(function(I){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=I();else if("function"==typeof define&&define.amd)define([],I);else{var R;R="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,R.IJS=I()}})(function(){var define;return function I(R,T,L){function E(W,Q){if(!T[W]){if(!R[W]){var $="function"==typeof require&&require;if(!Q&&$)return $(W,!0);if(G)return G(W,!0);var J=new Error("Cannot find module '"+W+"'");throw J.code="MODULE_NOT_FOUND",J}var ee=T[W]={exports:{}};R[W][0].call(ee.exports,function(te){var ae=R[W][1][te];return E(ae?ae:te)},ee,ee.exports,I,R,T,L)}return T[W].exports}var G="function"==typeof require&&require;for(var Z=0;Z<L.length;Z++)E(L[Z]);return E}({1:[function(I,R){(function(T){"use strict";var L=I("es-abstract/es6"),E=Number.isNaN||function(W){return W!==W},G=Number.isFinite||function(W){return"number"==typeof W&&T.isFinite(W)},Z=Array.prototype.indexOf;R.exports=function(Q){var $=1<arguments.length?L.ToInteger(arguments[1]):0;if(Z&&!E(Q)&&G($)&&"undefined"!=typeof Q)return-1<Z.apply(this,arguments);var J=L.ToObject(this),ee=L.ToLength(J.length);if(0===ee)return!1;for(var te=0<=$?$:Math.max(0,ee+$);te<ee;){if(L.SameValueZero(Q,J[te]))return!0;te+=1}return!1}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"es-abstract/es6":25}],2:[function(I,R){"use strict";var T=I("define-properties"),L=I("es-abstract/es6"),E=I("./implementation"),G=I("./polyfill"),Z=G(),W=I("./shim"),Q=Array.prototype.slice,$=function(ee){return L.RequireObjectCoercible(ee),Z.apply(ee,Q.call(arguments,1))};T($,{implementation:E,getPolyfill:G,shim:W}),R.exports=$},{"./implementation":1,"./polyfill":3,"./shim":4,"define-properties":23,"es-abstract/es6":25}],3:[function(I,R){"use strict";var T=I("./implementation");R.exports=function(){return Array.prototype.includes||T}},{"./implementation":1}],4:[function(I,R){"use strict";var T=I("define-properties"),L=I("./polyfill");R.exports=function(){var G=L();return Array.prototype.includes!==G&&T(Array.prototype,{includes:G}),G}},{"./polyfill":3,"define-properties":23}],5:[function(I,R){"use strict";R.exports=function(L){return atob(L)}},{}],6:[function(I,R){"use strict";function T(ae){for(var ie=ae.length,ne=new ArrayBuffer(ie),le=new Uint8Array(ne),oe=-1;++oe<ie;)le[oe]=ae.charCodeAt(oe);return ne}function L(ae){for(var ie="",ne=new Uint8Array(ae),le=ne.byteLength,oe=-1;++oe<le;)ie+=String.fromCharCode(ne[oe]);return ie}function E(ae,ie){return new te(function(ne,le){var oe=new Image;ie&&(oe.crossOrigin=ie),oe.onload=function(){ne(oe)},oe.onerror=le,oe.src=ae})}function G(ae){var ie=document.createElement("canvas");ie.width=ae.width,ie.height=ae.height;var ne=ie.getContext("2d");return ne.drawImage(ae,0,0,ae.width,ae.height,0,0,ae.width,ae.height),ie}function Z(ae,ie){return ie=ie||{},"string"==typeof ie&&(ie={type:ie}),new ee(ae,ie)}function W(ae){return new te(function(ie,ne){var le=new FileReader,oe="function"==typeof le.readAsBinaryString;le.onloadend=function(se){var de=se.target.result||"";return oe?ie(de):void ie(L(de))},le.onerror=ne,oe?le.readAsBinaryString(ae):le.readAsArrayBuffer(ae)})}function Q(ae,ie){return te.resolve().then(function(){var ne=[T(atob(ae))];return ie?Z(ne,{type:ie}):Z(ne)})}function $(ae){return te.resolve().then(function(){var ie=ae.match(/data:([^;]+)/)[1],ne=ae.replace(/^[^,]+,/,""),le=T(atob(ne));return Z([le],{type:ie})})}function J(ae,ie,ne){return te.resolve().then(function(){return"function"==typeof ae.toBlob?new te(function(le){ae.toBlob(le,ie,ne)}):$(ae.toDataURL(ie,ne))})}var ee=I("blob"),te=I("native-or-lie");R.exports={createBlob:Z,createObjectURL:function(ie){return(window.URL||window.webkitURL).createObjectURL(ie)},revokeObjectURL:function(ie){return(window.URL||window.webkitURL).revokeObjectURL(ie)},imgSrcToBlob:function(ie,ne,le,oe){return ne=ne||"image/png",E(ie,le).then(function(se){return G(se)}).then(function(se){return J(se,ne,oe)})},imgSrcToDataURL:function(ie,ne,le,oe){return ne=ne||"image/png",E(ie,le).then(function(se){return G(se)}).then(function(se){return se.toDataURL(ne,oe)})},canvasToBlob:J,dataURLToBlob:$,blobToBase64String:function(ie){return W(ie).then(function(ne){return btoa(ne)})},base64StringToBlob:Q,binaryStringToBlob:function(ie,ne){return te.resolve().then(function(){return Q(btoa(ie),ne)})},blobToBinaryString:W,arrayBufferToBlob:function(ie,ne){return te.resolve().then(function(){return Z([ie],ne)})},blobToArrayBuffer:function(ie){return new te(function(ne,le){var oe=new FileReader;oe.onloadend=function(se){var de=se.target.result||new ArrayBuffer(0);ne(de)},oe.onerror=le,oe.readAsArrayBuffer(ie)})}}},{blob:7,"native-or-lie":114}],7:[function(I,R){(function(T){"use strict";function L(J){for(var ee=0;ee<J.length;ee++){var te=J[ee];if(te.buffer instanceof ArrayBuffer){var ae=te.buffer;if(te.byteLength!==ae.byteLength){var ie=new Uint8Array(te.byteLength);ie.set(new Uint8Array(ae,te.byteOffset,te.byteLength)),ae=ie.buffer}J[ee]=ae}}}function E(J,ee){ee=ee||{};var te=new Z;L(J);for(var ae=0;ae<J.length;ae++)te.append(J[ae]);return ee.type?te.getBlob(ee.type):te.getBlob()}function G(J,ee){return L(J),new Blob(J,ee||{})}var Z=T.BlobBuilder||T.WebKitBlobBuilder||T.MSBlobBuilder||T.MozBlobBuilder,W=function(){try{var J=new Blob(["hi"]);return 2===J.size}catch(ee){return!1}}(),Q=W&&function(){try{var J=new Blob([new Uint8Array([1,2])]);return 2===J.size}catch(ee){return!1}}(),$=Z&&Z.prototype.append&&Z.prototype.getBlob;R.exports=function(){if(W)return Q?T.Blob:G;return $?E:void 0}()}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],8:[function(){},{}],9:[function(I,R){"use strict";R.exports={hex2rgb:I("./lib/hex2rgb"),hsv2hex:I("./lib/hsv2hex"),hsv2rgb:I("./lib/hsv2rgb"),rgb2hex:I("./lib/rgb2hex"),rgb2hsv:I("./lib/rgb2hsv"),rgba:I("./lib/rgba"),rgba2rgb:I("./lib/rgba2rgb"),rgba2hex:I("./lib/rgba2hex"),hsl2hsv:I("./lib/hsl2hsv"),hsv2hsl:I("./lib/hsv2hsl"),hsl2rgb:I("./lib/hsl2rgb"),cssColor:I("./lib/css-color")}},{"./lib/css-color":11,"./lib/hex2rgb":12,"./lib/hsl2hsv":13,"./lib/hsl2rgb":14,"./lib/hsv2hex":15,"./lib/hsv2hsl":16,"./lib/hsv2rgb":17,"./lib/rgb2hex":18,"./lib/rgb2hsv":19,"./lib/rgba":20,"./lib/rgba2hex":21,"./lib/rgba2rgb":22}],10:[function(I,R){"use strict";R.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}},{}],11:[function(I,R){"use strict";function T(ee){var te=J[ee.toLowerCase()];if(te)return{r:te[0],g:te[1],b:te[2],a:100}}function L(ee){if(0==ee.indexOf("rgb(")){ee=ee.match(/rgb\(([^)]+)\)/)[1];var te=ee.split(/ *, */).map(Number);return{r:te[0],g:te[1],b:te[2],a:100}}}function E(ee){if(0===ee.indexOf("rgba(")){ee=ee.match(/rgba\(([^)]+)\)/)[1];var te=ee.split(/ *, */).map(Number);return{r:te[0],g:te[1],b:te[2],a:100*te[3]}}}function G(ee){if("#"===ee[0]&&7===ee.length)return{r:parseInt(ee.slice(1,3),16),g:parseInt(ee.slice(3,5),16),b:parseInt(ee.slice(5,7),16),a:100}}function Z(ee){if("#"===ee[0]&&4===ee.length)return{r:parseInt(ee[1]+ee[1],16),g:parseInt(ee[2]+ee[2],16),b:parseInt(ee[3]+ee[3],16),a:100}}function W(ee){if(0===ee.indexOf("hsl(")){ee=ee.match(/hsl\(([^)]+)\)/)[1];var te=ee.split(/ *, */),ae=parseInt(te[0],10),ie=parseInt(te[1],10),ne=parseInt(te[2],10),le=$(ae,ie,ne);return le.a=100,le}}function Q(ee){if(0===ee.indexOf("hsla(")){ee=ee.match(/hsla\(([^)]+)\)/)[1];var te=ee.split(/ *, */),ae=parseInt(te[0],10),ie=parseInt(te[1],10),ne=parseInt(te[2],10),le=parseInt(100*te[3],10),oe=$(ae,ie,ne);return oe.a=le,oe}}var $=I("./hsl2rgb"),J=I("./_colors");R.exports=function(te){return T(te)||Z(te)||G(te)||L(te)||E(te)||W(te)||Q(te)}},{"./_colors":10,"./hsl2rgb":14}],12:[function(I,R){"use strict";R.exports=function(T){return("#"===T[0]&&(T=T.substr(1)),6===T.length)?{r:parseInt(T.substr(0,2),16),g:parseInt(T.substr(2,2),16),b:parseInt(T.substr(4,2),16)}:3===T.length?{r:parseInt(T[0]+T[0],16),g:parseInt(T[1]+T[1],16),b:parseInt(T[2]+T[2],16)}:void 0}},{}],13:[function(I,R){"use strict";R.exports=function(T,L,E){return L*=(50>E?E:100-E)/100,console.log("s",L),{h:T,s:100*(2*L/(E+L)),v:E+L}}},{}],14:[function(I,R){"use strict";var T=I("./hsl2hsv"),L=I("./hsv2rgb");R.exports=function(E,G,Z){var W=T(E,G,Z);return L(W.h,W.s,W.v)}},{"./hsl2hsv":13,"./hsv2rgb":17}],15:[function(I,R){"use strict";var T=I("./hsv2rgb"),L=I("./rgb2hex");R.exports=function(E,G,Z){var W=T(E,G,Z);return L(W.r,W.g,W.b)}},{"./hsv2rgb":17,"./rgb2hex":18}],16:[function(I,R){"use strict";R.exports=function(T,L,E){var G=(200-L)*E/100;return{h:T,s:L*E/(100>G?G:200-G),l:G/2}}},{}],17:[function(I,R){"use strict";R.exports=function(T,L,E){var L=L/100,E=E/100,G=[],Z=E*L,W=T/60,Q=Z*(1-Math.abs(W%2-1)),$=E-Z;switch(parseInt(W,10)){case 0:G=[Z,Q,0];break;case 1:G=[Q,Z,0];break;case 2:G=[0,Z,Q];break;case 3:G=[0,Q,Z];break;case 4:G=[Q,0,Z];break;case 5:G=[Z,0,Q];}return{r:Math.round(255*(G[0]+$)),g:Math.round(255*(G[1]+$)),b:Math.round(255*(G[2]+$))}}},{}],18:[function(I,R){"use strict";R.exports=function(T,L,E){function G(Z){var W=Z.toString(16);return 1===W.length?"0"+W:W}return[G(T),G(L),G(E)].join("")}},{}],19:[function(I,R){"use strict";R.exports=function(T,L,E){var Q=Math.max(T,L,E),$=Math.min(T,L,E),J=Q-$,G,Z,W;return 0==J?G=0:T===Q?G=(L-E)/J%6:L===Q?G=(E-T)/J+2:E===Q&&(G=(T-L)/J+4),G=Math.round(60*G),0>G&&(G+=360),Z=Math.round(100*(0===Q?0:J/Q)),W=Math.round(100*(Q/255)),{h:G,s:Z,v:W}}},{}],20:[function(I,R){"use strict";R.exports=function(T,L,E,G){return"rgba("+[T,L,E,G/100].join(",")+")"}},{}],21:[function(I,R){"use strict";var T=I("./rgba2rgb"),L=I("./rgb2hex");R.exports=function(E,G,Z,W){var Q=T(E,G,Z,W);return L(Q.r,Q.g,Q.b)}},{"./rgb2hex":18,"./rgba2rgb":22}],22:[function(I,R){"use strict";R.exports=function(T,L,E,G){return G=G/100,{r:parseInt(255*(1-G)+G*T,10),g:parseInt(255*(1-G)+G*L,10),b:parseInt(255*(1-G)+G*E,10)}}},{}],23:[function(I,R){"use strict";var T=I("object-keys"),L=I("foreach"),E="function"==typeof Symbol&&"symbol"==typeof Symbol(),G=Object.prototype.toString,Z=function(ee){return"function"==typeof ee&&"[object Function]"===G.call(ee)},W=Object.defineProperty&&function(){var ee={};try{for(var te in Object.defineProperty(ee,"x",{enumerable:!1,value:ee}),ee)return!1;return ee.x===ee}catch(ae){return!1}}(),Q=function(ee,te,ae,ie){(!(te in ee)||Z(ie)&&ie())&&(W?Object.defineProperty(ee,te,{configurable:!0,enumerable:!1,value:ae,writable:!0}):ee[te]=ae)},$=function(ee,te){var ae=2<arguments.length?arguments[2]:{},ie=T(te);E&&(ie=ie.concat(Object.getOwnPropertySymbols(te))),L(ie,function(ne){Q(ee,ne,te[ne],ae[ne])})};$.supportsDescriptors=!!W,R.exports=$},{foreach:42,"object-keys":118}],24:[function(I,R){"use strict";var T=I("./helpers/isNaN"),L=I("./helpers/isFinite"),E=I("./helpers/sign"),G=I("./helpers/mod"),Z=I("is-callable"),W=I("es-to-primitive/es5");R.exports={ToPrimitive:W,ToBoolean:function($){return!!$},ToNumber:function($){return+$},ToInteger:function($){var J=this.ToNumber($);return T(J)?0:0!==J&&L(J)?E(J)*Math.floor(Math.abs(J)):J},ToInt32:function($){return this.ToNumber($)>>0},ToUint32:function($){return this.ToNumber($)>>>0},ToUint16:function($){var J=this.ToNumber($);if(T(J)||0===J||!L(J))return 0;var ee=E(J)*Math.floor(Math.abs(J));return G(ee,65536)},ToString:function($){return $+""},ToObject:function($){return this.CheckObjectCoercible($),Object($)},CheckObjectCoercible:function($,J){if(null==$)throw new TypeError(J||"Cannot call method on "+$);return $},IsCallable:Z,SameValue:function($,J){return $===J?0!==$||1/$==1/J:T($)&&T(J)},Type:function($){return null===$?"Null":"undefined"==typeof $?"Undefined":"function"==typeof $||"object"==typeof $?"Object":"number"==typeof $?"Number":"boolean"==typeof $?"Boolean":"string"==typeof $?"String":void 0}}},{"./helpers/isFinite":27,"./helpers/isNaN":28,"./helpers/mod":30,"./helpers/sign":31,"es-to-primitive/es5":32,"is-callable":51}],25:[function(I,R){"use strict";var T=Object.prototype.toString,L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,E=L?Symbol.prototype.toString:T,G=I("./helpers/isNaN"),Z=I("./helpers/isFinite"),W=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Q=I("./helpers/assign"),$=I("./helpers/sign"),J=I("./helpers/mod"),ee=I("./helpers/isPrimitive"),te=I("es-to-primitive/es6"),ae=parseInt,ie=I("function-bind"),ne=ie.call(Function.call,String.prototype.slice),le=ie.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),oe=ie.call(Function.call,RegExp.prototype.test,/^0o[0-7]+$/i),se=["\x85","\u200B","\uFFFE"].join(""),de=new RegExp("["+se+"]","g"),he=ie.call(Function.call,RegExp.prototype.test,de),ue=/^[\-\+]0x[0-9a-f]+$/i,ce=ie.call(Function.call,RegExp.prototype.test,ue),ge=["\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),pe=new RegExp("(^["+ge+"]+)|(["+ge+"]+$)","g"),fe=ie.call(Function.call,String.prototype.replace),_e=function(we){return fe(we,pe,"")},be=I("./es5"),ye=I("is-regex"),xe=Q(Q({},be),{Call:function(we,ve){var Me=2<arguments.length?arguments[2]:[];if(!this.IsCallable(we))throw new TypeError(we+" is not a function");return we.apply(ve,Me)},ToPrimitive:te,ToNumber:function(we){var ve=ee(we)?we:te(we,"number");if("symbol"==typeof ve)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof ve){if(le(ve))return this.ToNumber(ae(ne(ve,2),2));if(oe(ve))return this.ToNumber(ae(ne(ve,2),8));if(he(ve)||ce(ve))return NaN;var Me=_e(ve);if(Me!==ve)return this.ToNumber(Me)}return+ve},ToInt16:function(we){var ve=this.ToUint16(we);return 32768<=ve?ve-65536:ve},ToInt8:function(we){var ve=this.ToUint8(we);return 128<=ve?ve-256:ve},ToUint8:function(we){var ve=this.ToNumber(we);if(G(ve)||0===ve||!Z(ve))return 0;var Me=$(ve)*Math.floor(Math.abs(ve));return J(Me,256)},ToUint8Clamp:function(we){var ve=this.ToNumber(we);if(G(ve)||0>=ve)return 0;if(255<=ve)return 255;var Me=Math.floor(we);return Me+0.5<ve?Me+1:ve<Me+0.5?Me:0==Me%2?Me:Me+1},ToString:function(we){if("symbol"==typeof we)throw new TypeError("Cannot convert a Symbol value to a string");return we+""},ToObject:function(we){return this.RequireObjectCoercible(we),Object(we)},ToPropertyKey:function(we){var ve=this.ToPrimitive(we,String);return"symbol"==typeof ve?E.call(ve):this.ToString(ve)},ToLength:function(we){var ve=this.ToInteger(we);return 0>=ve?0:ve>W?W:ve},CanonicalNumericIndexString:function(we){if("[object String]"!==T.call(we))throw new TypeError("must be a string");if("-0"===we)return-0;var ve=this.ToNumber(we);return this.SameValue(this.ToString(ve),we)?ve:void 0},RequireObjectCoercible:be.CheckObjectCoercible,IsArray:Array.isArray||function(we){return"[object Array]"===T.call(we)},IsConstructor:function(we){return"function"==typeof we&&!!we.prototype},IsExtensible:function(we){return!Object.preventExtensions||!ee(we)&&Object.isExtensible(we)},IsInteger:function(we){if("number"!=typeof we||G(we)||!Z(we))return!1;var ve=Math.abs(we);return Math.floor(ve)===ve},IsPropertyKey:function(we){return"string"==typeof we||"symbol"==typeof we},IsRegExp:function(we){if(!we||"object"!=typeof we)return!1;if(L){var ve=we[Symbol.match];if("undefined"!=typeof ve)return be.ToBoolean(ve)}return ye(we)},SameValueZero:function(we,ve){return we===ve||G(we)&&G(ve)},Type:function(we){return"symbol"==typeof we?"Symbol":be.Type(we)},SpeciesConstructor:function(we,ve){if("Object"!==this.Type(we))throw new TypeError("Assertion failed: Type(O) is not Object");var Me=we.constructor;if("undefined"==typeof Me)return ve;if("Object"!==this.Type(Me))throw new TypeError("O.constructor is not an Object");var je=L&&Symbol.species?Me[Symbol.species]:void 0;if(null==je)return ve;if(this.IsConstructor(je))return je;throw new TypeError("no constructor found")}});delete xe.CheckObjectCoercible,R.exports=xe},{"./es5":24,"./helpers/assign":26,"./helpers/isFinite":27,"./helpers/isNaN":28,"./helpers/isPrimitive":29,"./helpers/mod":30,"./helpers/sign":31,"es-to-primitive/es6":33,"function-bind":44,"is-regex":55}],26:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty;R.exports=Object.assign||function(E,G){for(var Z in G)T.call(G,Z)&&(E[Z]=G[Z]);return E}},{}],27:[function(I,R){"use strict";var T=Number.isNaN||function(L){return L!==L};R.exports=Number.isFinite||function(L){return"number"==typeof L&&!T(L)&&L!==1/0&&L!==-(1/0)}},{}],28:[function(I,R){"use strict";R.exports=Number.isNaN||function(L){return L!==L}},{}],29:[function(I,R){"use strict";R.exports=function(L){return null===L||"function"!=typeof L&&"object"!=typeof L}},{}],30:[function(I,R){"use strict";R.exports=function(L,E){var G=L%E;return Math.floor(0<=G?G:G+E)}},{}],31:[function(I,R){"use strict";R.exports=function(L){return 0<=L?1:-1}},{}],32:[function(I,R){"use strict";var T=Object.prototype.toString,L=I("./helpers/isPrimitive"),E=I("is-callable"),G={"[[DefaultValue]]":function(W,Q){var $=Q||("[object Date]"===T.call(W)?String:Number);if($===String||$===Number){var J=$===String?["toString","valueOf"]:["valueOf","toString"],ee,te;for(te=0;te<J.length;++te)if(E(W[J[te]])&&(ee=W[J[te]](),L(ee)))return ee;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};R.exports=function(W,Q){return L(W)?W:G["[[DefaultValue]]"](W,Q)}},{"./helpers/isPrimitive":34,"is-callable":51}],33:[function(I,R){"use strict";var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,L=I("./helpers/isPrimitive"),E=I("is-callable"),G=I("is-date-object"),Z=I("is-symbol"),W=function(J,ee){if("undefined"==typeof J||null===J)throw new TypeError("Cannot call method on "+J);if("string"!=typeof ee||"number"!==ee&&"string"!==ee)throw new TypeError("hint must be \"string\" or \"number\"");var te="string"===ee?["toString","valueOf"]:["valueOf","toString"],ae,ie,ne;for(ne=0;ne<te.length;++ne)if(ae=J[te[ne]],E(ae)&&(ie=ae.call(J),L(ie)))return ie;throw new TypeError("No default value")},Q=function(J,ee){var te=J[ee];if(null!==te&&"undefined"!=typeof te){if(!E(te))throw new TypeError(te+" returned for property "+ee+" of object "+J+" is not a function");return te}};R.exports=function(J,ee){if(L(J))return J;var te="default";1<arguments.length&&(ee===String?te="string":ee===Number&&(te="number"));var ae;if(T&&(Symbol.toPrimitive?ae=Q(J,Symbol.toPrimitive):Z(J)&&(ae=Symbol.prototype.valueOf)),"undefined"!=typeof ae){var ie=ae.call(J,te);if(L(ie))return ie;throw new TypeError("unable to convert exotic object to primitive")}return"default"==te&&(G(J)||Z(J))&&(te="string"),W(J,"default"==te?"number":te)}},{"./helpers/isPrimitive":34,"is-callable":51,"is-date-object":52,"is-symbol":56}],34:[function(I,R,T){arguments[4][29][0].apply(T,arguments)},{dup:29}],35:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty,L=Object.prototype.toString,E=function(W){return"function"==typeof Array.isArray?Array.isArray(W):"[object Array]"===L.call(W)},G=function(W){if(!W||"[object Object]"!==L.call(W))return!1;var Q=T.call(W,"constructor"),$=W.constructor&&W.constructor.prototype&&T.call(W.constructor.prototype,"isPrototypeOf");if(W.constructor&&!Q&&!$)return!1;for(var J in W);return"undefined"==typeof J||T.call(W,J)};R.exports=function Z(){var ae=arguments[0],ie=1,ne=arguments.length,le=!1,W,Q,$,J,ee,te;for("boolean"==typeof ae?(le=ae,ae=arguments[1]||{},ie=2):("object"!=typeof ae&&"function"!=typeof ae||null==ae)&&(ae={});ie<ne;++ie)if(W=arguments[ie],null!=W)for(Q in W)$=ae[Q],J=W[Q],ae!==J&&(le&&J&&(G(J)||(ee=E(J)))?(ee?(ee=!1,te=$&&E($)?$:[]):te=$&&G($)?$:{},ae[Q]=Z(le,te,J)):"undefined"!=typeof J&&(ae[Q]=J));return ae}},{}],36:[function(I,R){"use strict";var T=I("iobuffer"),L=I("tiff");R.exports=function(G){var Z=new T(G),W={};Z.setBigEndian();var Q=Z.readUint16();if(65496!==Q)throw new Error("SOI marker not found. Not a valid JPEG file");var $=Z.readUint16();if(65505===$){Z.readUint16();var J=Z.readBytes(6);if(69===J[0]&&120===J[1]&&105===J[2]&&102===J[3]&&0===J[4]&&0===J[5]){var ee=L.decode(Z,{onlyFirst:!0,ignoreImageData:!0,offset:Z.offset});W.exif=ee}}return W}},{iobuffer:49,tiff:139}],37:[function(I,R,T){"use strict";T.decode=I("./decode")},{"./decode":36}],38:[function(I,R,T){"use strict";(function(){function L(G,Z,W){this.next=W,W&&(W.prev=this),this.prev=Z,Z&&(Z.next=this),this.data=G}function E(){return this instanceof E?void(this._head=null,this._tail=null,this.length=0):new E}E.prototype={push:function(Z){this._tail=new L(Z,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0===this.length)return void 0;var Z=this._tail;return this._tail=Z.prev,Z.prev&&(Z.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),Z.data},unshift:function(Z){this._head=new L(Z,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0===this.length)return void 0;var Z=this._head;return this._head=Z.next,Z.next&&(Z.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),Z.data},item:function(Z){0>Z&&(Z=this.length+Z);for(var W=this._head;0<Z--&&W;)W=W.next;return W?W.data:void 0},slice:function(Z,W){if(Z||(Z=0),W||(W=this.length),0>W&&(W=this.length+W),0>Z&&(Z=this.length+Z),W===Z)return[];if(W<Z)throw new Error("invalid offset: "+Z+","+W+" (length="+this.length+")");for(var Q=W-Z,$=Array(Q),J=0,ee=this._head;0<Z--&&ee;)ee=ee.next;for(;J<Q&&ee;)$[J++]=ee.data,ee=ee.next;return $},drop:function(){E.call(this)},forEach:function(Z,W){for(var Q=this._head,$=0,J=this.length;$<J&&Q;)Z.call(W||this,Q.data,$,this),Q=Q.next,$++},map:function(Z,W){var Q=new E;return this.forEach(function($,J,ee){Q.push(Z.call(W||ee,$,J,ee))}),Q},filter:function(Z,W){var Q=new E;return this.forEach(function($,J,ee){Z.call(W||ee,$,J,ee)&&Q.push($)}),Q},reduce:function(Z,W,Q){var $=0,J=this._head,ee=this.length;for(W||($=1,W=J&&J.data,J=J&&J.next);$<ee&&J;)W=Z.call(Q||this,W,J.data,this),$++,J=J.next;return W}},"undefined"==typeof T?"function"==typeof define&&define.amd?define("FastList",function(){return E}):function(){return this}().FastList=E:R.exports=E})()},{}],39:[function(I,R){"use strict";function T(te,ae,ie){for(var ne=0;ne<ie;ne++)ae[ne]=te[ne]}function L(te,ae,ie,ne){for(var le=0;le<ne;le++)ae[le]=te[le];for(;le<ie;le++)ae[le]=255&te[le]+ae[le-ne]}function E(te,ae,ie,ne){var le=0;if(0===ie.length)for(;le<ne;le++)ae[le]=te[le];else for(;le<ne;le++)ae[le]=255&te[le]+ie[le]}function G(te,ae,ie,ne,le){var oe=0;if(0===ie.length){for(;oe<le;oe++)ae[oe]=te[oe];for(;oe<ne;oe++)ae[oe]=255&te[oe]+(ae[oe-le]>>1)}else{for(;oe<le;oe++)ae[oe]=255&te[oe]+(ie[oe]>>1);for(;oe<ne;oe++)ae[oe]=255&te[oe]+(ae[oe-le]+ie[oe]>>1)}}function Z(te,ae,ie,ne,le){var oe=0;if(0===ie.length){for(;oe<le;oe++)ae[oe]=te[oe];for(;oe<ne;oe++)ae[oe]=255&te[oe]+ae[oe-le]}else{for(;oe<le;oe++)ae[oe]=255&te[oe]+ie[oe];for(;oe<ne;oe++)ae[oe]=255&te[oe]+W(ae[oe-le],ie[oe],ie[oe-le])}}function W(te,ae,ie){var ne=te+ae-ie,le=Math.abs(ne-te),oe=Math.abs(ne-ae),se=Math.abs(ne-ie);if(le<=oe&&le<=se)return te;return oe<=se?ae:ie}var Q=I("iobuffer"),$=I("pako").Inflate,J=new Uint8Array(0),ee=[137,80,78,71,13,10,26,10];R.exports=class extends Q{constructor(ae){super(ae),this._decoded=!1,this._inflator=new $,this._png=null,this._end=!1,this.setBigEndian()}decode(){if(this._decoded)return this._png;for(this._png={tEXt:{}},this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(var ae=0;8>ae;ae++)if(this.readUint8()!==ee[ae])throw new Error(`Wrong PNG signature. Byte at ${ae} should be ${ee[ae]}.`)}decodeChunk(){var ae=this.readUint32(),ie=this.readChars(4),ne=this.offset;switch(ie){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(ae);break;case"IDAT":this.decodeIDAT(ae);break;case"tEXt":this.decodetEXt(ae);break;case"IEND":this._end=!0;break;default:this.skip(ae);}if(this.offset-ne!==ae)throw new Error("Length mismatch while decoding chunk "+ie);this.readUint32()}decodeIHDR(){var ae=this._png;if(ae.width=this.readUint32(),ae.height=this.readUint32(),ae.bitDepth=this.readUint8(),ae.colourType=this.readUint8(),ae.compressionMethod=this.readUint8(),ae.filterMethod=this.readUint8(),ae.interlaceMethod=this.readUint8(),0!==this._png.compressionMethod)throw new Error("Unsupported compression method: "+ae.compressionMethod)}decodePLTE(ae){if(0!=ae%3)throw new RangeError("PLTE field length must be a multiple of 3. Got "+ae);var ie=ae/3;this._hasPalette=!0;var ne=this._palette=Array(ie);for(var le=0;le<ie;le++)ne[le]=[this.readUint8(),this.readUint8(),this.readUint8()]}decodeIDAT(ae){this._inflator.push(new Uint8Array(this.buffer,this.offset,ae)),this.skip(ae)}decodetEXt(ae){for(var ie="",ne;"\0"!==(ne=this.readChar());)ie+=ne;this._png.tEXt[ie]=this.readChars(ae-ie.length-1)}decodeImage(){if(this._inflator.push(J,!0),this._inflator.err)throw new Error("Error while decompressing the data");var ae=this._inflator.result;if(this._inflator=null,0!==this._png.filterMethod)throw new Error("Filter method "+this._png.filterMethod+" not supported");if(0===this._png.interlaceMethod)this.decodeInterlaceNull(ae);else throw new Error("Interlace method "+this._png.interlaceMethod+" not supported")}decodeInterlaceNull(ae){var ie;switch(this._png.colourType){case 0:ie=1;break;case 2:ie=3;break;case 3:if(!this._hasPalette)throw new Error("Missing palette");ie=1;break;case 4:ie=2;break;case 6:ie=4;break;default:throw new Error("Unknown colour type: "+this._png.colourType);}var ne=this._png.height,le=ie*this._png.bitDepth/8,oe=this._png.width*le,se=new Uint8Array(this._png.height*oe),de=J,he=0,ue,ce;for(var ge=0;ge<ne;ge++){switch(ue=ae.subarray(he+1,he+1+oe),ce=se.subarray(ge*oe,(ge+1)*oe),ae[he]){case 0:T(ue,ce,oe);break;case 1:L(ue,ce,oe,le);break;case 2:E(ue,ce,de,oe);break;case 3:G(ue,ce,de,oe,le);break;case 4:Z(ue,ce,de,oe,le);break;default:throw new Error("Unsupported filter: "+ae[he]);}de=ce,he+=oe+1}this._hasPalette&&(this._png.palette=this._palette),this._png.data=se}}},{iobuffer:49,pako:120}],40:[function(I,R,T){"use strict";T.PNGDecoder=I("./PNGDecoder")},{"./PNGDecoder":39}],41:[function(I,R){"use strict";R.exports=function(T){return T&&1<T.length?255===T[0]&&216===T[1]&&255===T[2]?{ext:"jpg",mime:"image/jpeg"}:137===T[0]&&80===T[1]&&78===T[2]&&71===T[3]?{ext:"png",mime:"image/png"}:71===T[0]&&73===T[1]&&70===T[2]?{ext:"gif",mime:"image/gif"}:87===T[8]&&69===T[9]&&66===T[10]&&80===T[11]?{ext:"webp",mime:"image/webp"}:70===T[0]&&76===T[1]&&73===T[2]&&70===T[3]?{ext:"flif",mime:"image/flif"}:(73===T[0]&&73===T[1]&&42===T[2]&&0===T[3]||77===T[0]&&77===T[1]&&0===T[2]&&42===T[3])&&67===T[8]&&82===T[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===T[0]&&73===T[1]&&42===T[2]&&0===T[3]||77===T[0]&&77===T[1]&&0===T[2]&&42===T[3]?{ext:"tif",mime:"image/tiff"}:66===T[0]&&77===T[1]?{ext:"bmp",mime:"image/bmp"}:73===T[0]&&73===T[1]&&188===T[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===T[0]&&66===T[1]&&80===T[2]&&83===T[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===T[0]&&75===T[1]&&3===T[2]&&4===T[3]&&109===T[30]&&105===T[31]&&109===T[32]&&101===T[33]&&116===T[34]&&121===T[35]&&112===T[36]&&101===T[37]&&97===T[38]&&112===T[39]&&112===T[40]&&108===T[41]&&105===T[42]&&99===T[43]&&97===T[44]&&116===T[45]&&105===T[46]&&111===T[47]&&110===T[48]&&47===T[49]&&101===T[50]&&112===T[51]&&117===T[52]&&98===T[53]&&43===T[54]&&122===T[55]&&105===T[56]&&112===T[57]?{ext:"epub",mime:"application/epub+zip"}:80===T[0]&&75===T[1]&&3===T[2]&&4===T[3]&&77===T[30]&&69===T[31]&&84===T[32]&&65===T[33]&&45===T[34]&&73===T[35]&&78===T[36]&&70===T[37]&&47===T[38]&&109===T[39]&&111===T[40]&&122===T[41]&&105===T[42]&&108===T[43]&&108===T[44]&&97===T[45]&&46===T[46]&&114===T[47]&&115===T[48]&&97===T[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80===T[0]&&75===T[1]&&(3===T[2]||5===T[2]||7===T[2])&&(4===T[3]||6===T[3]||8===T[3])?{ext:"zip",mime:"application/zip"}:117===T[257]&&115===T[258]&&116===T[259]&&97===T[260]&&114===T[261]?{ext:"tar",mime:"application/x-tar"}:82===T[0]&&97===T[1]&&114===T[2]&&33===T[3]&&26===T[4]&&7===T[5]&&(0===T[6]||1===T[6])?{ext:"rar",mime:"application/x-rar-compressed"}:31===T[0]&&139===T[1]&&8===T[2]?{ext:"gz",mime:"application/gzip"}:66===T[0]&&90===T[1]&&104===T[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===T[0]&&122===T[1]&&188===T[2]&&175===T[3]&&39===T[4]&&28===T[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===T[0]&&1===T[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===T[0]&&0===T[1]&&0===T[2]&&(24===T[3]||32===T[3])&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]||51===T[0]&&103===T[1]&&112===T[2]&&53===T[3]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&109===T[8]&&112===T[9]&&52===T[10]&&50===T[11]&&109===T[16]&&112===T[17]&&52===T[18]&&49===T[19]&&109===T[20]&&112===T[21]&&52===T[22]&&50===T[23]&&105===T[24]&&115===T[25]&&111===T[26]&&109===T[27]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&105===T[8]&&115===T[9]&&111===T[10]&&109===T[11]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&109===T[8]&&112===T[9]&&52===T[10]&&50===T[11]&&0===T[12]&&0===T[13]&&0===T[14]&&0===T[15]?{ext:"mp4",mime:"video/mp4"}:0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&77===T[8]&&52===T[9]&&86===T[10]?{ext:"m4v",mime:"video/x-m4v"}:77===T[0]&&84===T[1]&&104===T[2]&&100===T[3]?{ext:"mid",mime:"audio/midi"}:109===T[31]&&97===T[32]&&116===T[33]&&114===T[34]&&111===T[35]&&115===T[36]&&107===T[37]&&97===T[38]?{ext:"mkv",mime:"video/x-matroska"}:26===T[0]&&69===T[1]&&223===T[2]&&163===T[3]?{ext:"webm",mime:"video/webm"}:0===T[0]&&0===T[1]&&0===T[2]&&20===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]?{ext:"mov",mime:"video/quicktime"}:82===T[0]&&73===T[1]&&70===T[2]&&70===T[3]&&65===T[8]&&86===T[9]&&73===T[10]?{ext:"avi",mime:"video/x-msvideo"}:48===T[0]&&38===T[1]&&178===T[2]&&117===T[3]&&142===T[4]&&102===T[5]&&207===T[6]&&17===T[7]&&166===T[8]&&217===T[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===T[0]&&0===T[1]&&1===T[2]&&"b"===T[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===T[0]&&68===T[1]&&51===T[2]||255===T[0]&&251===T[1]?{ext:"mp3",mime:"audio/mpeg"}:102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&77===T[8]&&52===T[9]&&65===T[10]||77===T[0]&&52===T[1]&&65===T[2]&&32===T[3]?{ext:"m4a",mime:"audio/m4a"}:79===T[28]&&112===T[29]&&117===T[30]&&115===T[31]&&72===T[32]&&101===T[33]&&97===T[34]&&100===T[35]?{ext:"opus",mime:"audio/opus"}:79===T[0]&&103===T[1]&&103===T[2]&&83===T[3]?{ext:"ogg",mime:"audio/ogg"}:102===T[0]&&76===T[1]&&97===T[2]&&67===T[3]?{ext:"flac",mime:"audio/x-flac"}:82===T[0]&&73===T[1]&&70===T[2]&&70===T[3]&&87===T[8]&&65===T[9]&&86===T[10]&&69===T[11]?{ext:"wav",mime:"audio/x-wav"}:35===T[0]&&33===T[1]&&65===T[2]&&77===T[3]&&82===T[4]&&10===T[5]?{ext:"amr",mime:"audio/amr"}:37===T[0]&&80===T[1]&&68===T[2]&&70===T[3]?{ext:"pdf",mime:"application/pdf"}:77===T[0]&&90===T[1]?{ext:"exe",mime:"application/x-msdownload"}:(67===T[0]||70===T[0])&&87===T[1]&&83===T[2]?{ext:"swf",mime:"application/x-shockwave-flash"}:123===T[0]&&92===T[1]&&114===T[2]&&116===T[3]&&102===T[4]?{ext:"rtf",mime:"application/rtf"}:119===T[0]&&79===T[1]&&70===T[2]&&70===T[3]&&(0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]||79===T[4]&&84===T[5]&&84===T[6]&&79===T[7])?{ext:"woff",mime:"application/font-woff"}:119===T[0]&&79===T[1]&&70===T[2]&&50===T[3]&&(0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]||79===T[4]&&84===T[5]&&84===T[6]&&79===T[7])?{ext:"woff2",mime:"application/font-woff"}:76===T[34]&&80===T[35]&&(0===T[8]&&0===T[9]&&1===T[10]||1===T[8]&&0===T[9]&&2===T[10]||2===T[8]&&0===T[9]&&2===T[10])?{ext:"eot",mime:"application/octet-stream"}:0===T[0]&&1===T[1]&&0===T[2]&&0===T[3]&&0===T[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===T[0]&&84===T[1]&&84===T[2]&&79===T[3]&&0===T[4]?{ext:"otf",mime:"application/font-sfnt"}:0===T[0]&&0===T[1]&&1===T[2]&&0===T[3]?{ext:"ico",mime:"image/x-icon"}:70===T[0]&&76===T[1]&&86===T[2]&&1===T[3]?{ext:"flv",mime:"video/x-flv"}:37===T[0]&&33===T[1]?{ext:"ps",mime:"application/postscript"}:253===T[0]&&55===T[1]&&122===T[2]&&88===T[3]&&90===T[4]&&0===T[5]?{ext:"xz",mime:"application/x-xz"}:83===T[0]&&81===T[1]&&76===T[2]&&105===T[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===T[0]&&69===T[1]&&83===T[2]&&26===T[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===T[0]&&114===T[1]&&50===T[2]&&52===T[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===T[0]&&83===T[1]&&67===T[2]&&70===T[3]||73===T[0]&&83===T[1]&&99===T[2]&&40===T[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===T[0]&&60===T[1]&&97===T[2]&&114===T[3]&&99===T[4]&&104===T[5]&&62===T[6]&&10===T[7]&&100===T[8]&&101===T[9]&&98===T[10]&&105===T[11]&&97===T[12]&&110===T[13]&&45===T[14]&&98===T[15]&&105===T[16]&&110===T[17]&&97===T[18]&&114===T[19]&&121===T[20]?{ext:"deb",mime:"application/x-deb"}:33===T[0]&&60===T[1]&&97===T[2]&&114===T[3]&&99===T[4]&&104===T[5]&&62===T[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===T[0]&&171===T[1]&&238===T[2]&&219===T[3]?{ext:"rpm",mime:"application/x-rpm"}:31===T[0]&&160===T[1]||31===T[0]&&157===T[1]?{ext:"Z",mime:"application/x-compress"}:76===T[0]&&90===T[1]&&73===T[2]&&80===T[3]?{ext:"lz",mime:"application/x-lzip"}:208===T[0]&&207===T[1]&&17===T[2]&&224===T[3]&&161===T[4]&&177===T[5]&&26===T[6]&&225===T[7]?{ext:"msi",mime:"application/x-msi"}:null:null}},{}],42:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty,L=Object.prototype.toString;R.exports=function(G,Z,W){if("[object Function]"!==L.call(Z))throw new TypeError("iterator must be a function");var Q=G.length;if(Q===+Q)for(var $=0;$<Q;$++)Z.call(W,G[$],$,G);else for(var J in G)T.call(G,J)&&Z.call(W,G[J],J,G)}},{}],43:[function(I,R){"use strict";var T=Array.prototype.slice,L=Object.prototype.toString;R.exports=function(G){var Z=this;if("function"!=typeof Z||"[object Function]"!==L.call(Z))throw new TypeError("Function.prototype.bind called on incompatible "+Z);var W=T.call(arguments,1),$=Math.max(0,Z.length-W.length),J=[],Q;for(var ee=0;ee<$;ee++)J.push("$"+ee);if(Q=Function("binder","return function ("+J.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof Q){var ie=Z.apply(this,W.concat(T.call(arguments)));return Object(ie)===ie?ie:this}return Z.apply(G,W.concat(T.call(arguments)))}),Z.prototype){var te=function(){};te.prototype=Z.prototype,Q.prototype=new te,te.prototype=null}return Q}},{}],44:[function(I,R){"use strict";var T=I("./implementation");R.exports=Function.prototype.bind||T},{"./implementation":43}],45:[function(I,R,T){"use strict";var L=Object.prototype.hasOwnProperty;R.exports=T=function(G,Z){return L.call(Z,G)},T.version=I("./package").version},{"./package":46}],46:[function(I,R){R.exports={name:"has-own",version:"1.0.0",description:"A safer .hasOwnProperty() - hasOwn(name, obj)",main:"index.js",scripts:{test:"make test"},author:"Aaron Heckmann <aaron.heckmann+github@gmail.com>",license:"MIT",repository:{type:"git",url:"git://github.com/pebble/has-own.git"},homepage:"https://github.com/pebble/has-own/",devDependencies:{mocha:"^1.21.0"}}},{}],47:[function(I,R){"use strict";var T=I("file-type");R.exports=function(L){var E=T(L);return-1===["jpg","png","gif","webp","tif","bmp","jxr","psd"].indexOf(E&&E.ext)?null:E}},{"file-type":41}],48:[function(I,R){(function(T){"use strict";function L(){J=!0;for(var ie=ee.length,te,ae;ie;){for(ae=ee,ee=[],te=-1;++te<ie;)ae[te]();ie=ee.length}J=!1}var E=T.MutationObserver||T.WebKitMutationObserver,G;if(E){var Z=0,W=new E(L),Q=T.document.createTextNode("");W.observe(Q,{characterData:!0}),G=function(){Q.data=Z=++Z%2}}else if(!T.setImmediate&&"undefined"!=typeof T.MessageChannel){var $=new T.MessageChannel;$.port1.onmessage=L,G=function(){$.port2.postMessage(0)}}else G="document"in T&&"onreadystatechange"in T.document.createElement("script")?function(){var ae=T.document.createElement("script");ae.onreadystatechange=function(){L(),ae.onreadystatechange=null,ae.parentNode.removeChild(ae),ae=null},T.document.documentElement.appendChild(ae)}:function(){setTimeout(L,0)};var J,ee=[];R.exports=function(ae){1!==ee.push(ae)||J||G()}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],49:[function(I,R){"use strict";var T=8192,L=[];R.exports=class{constructor(G,Z){Z=Z||{},G===void 0&&(G=T),"number"==typeof G&&(G=new ArrayBuffer(G));var W=G.byteLength,Q=Z.offset?Z.offset>>>0:0;G.buffer&&(W=G.byteLength-Q,G=G.byteLength===G.buffer.byteLength?Q?G.buffer.slice(Q):G.buffer:G.buffer.slice(G.byteOffset+Q,G.byteOffset+G.byteLength)),this.buffer=G,this.length=W,this.byteLength=W,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=W||T,this._mark=0}available(G){return void 0===G&&(G=1),this.offset+G<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(G){G===void 0&&(G=1),this.offset+=G}seek(G){this.offset=G}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(G){if(void 0===G&&(G=1),!this.available(G)){var Z=this._increment+this._increment;this._increment=Z;var W=this.length+Z,Q=new Uint8Array(W);Q.set(new Uint8Array(this.buffer)),this.buffer=Q.buffer,this.length=W,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(G){G===void 0&&(G=1);var Z=new Uint8Array(G);for(var W=0;W<G;W++)Z[W]=this.readByte();return Z}readInt16(){var G=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,G}readUint16(){var G=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,G}readInt32(){var G=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,G}readUint32(){var G=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,G}readFloat32(){var G=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,G}readFloat64(){var G=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,G}readChar(){return String.fromCharCode(this.readInt8())}readChars(G){G===void 0&&(G=1),L.length=G;for(var Z=0;Z<G;Z++)L[Z]=this.readChar();return L.join("")}writeBoolean(G){this.writeUint8(G?255:0)}writeInt8(G){this.ensureAvailable(1),this._data.setInt8(this.offset++,G)}writeUint8(G){this.ensureAvailable(1),this._data.setUint8(this.offset++,G)}writeByte(G){this.writeUint8(G)}writeBytes(G){this.ensureAvailable(G.length);for(var Z=0;Z<G.length;Z++)this._data.setUint8(this.offset++,G[Z])}writeInt16(G){this.ensureAvailable(2),this._data.setInt16(this.offset,G,this.littleEndian),this.offset+=2}writeUint16(G){this.ensureAvailable(2),this._data.setUint16(this.offset,G,this.littleEndian),this.offset+=2}writeInt32(G){this.ensureAvailable(4),this._data.setInt32(this.offset,G,this.littleEndian),this.offset+=4}writeUint32(G){this.ensureAvailable(4),this._data.setUint32(this.offset,G,this.littleEndian),this.offset+=4}writeFloat32(G){this.ensureAvailable(4),this._data.setFloat32(this.offset,G,this.littleEndian),this.offset+=4}writeFloat64(G){this.ensureAvailable(8),this._data.setFloat64(this.offset,G,this.littleEndian),this.offset+=8}writeChar(G){this.writeUint8(G.charCodeAt(0))}writeChars(G){for(var Z=0;Z<G.length;Z++)this.writeUint8(G.charCodeAt(Z))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},{}],50:[function(I,R){"use strict";var T=Object.prototype.toString;R.exports=function(E){return"Array"===T.call(E).substr(-6,5)}},{}],51:[function(I,R){"use strict";var T=Function.prototype.toString,L=/^\s*class /,E=function($){try{var J=T.call($),ee=J.replace(/\/\/.*\n/g,""),te=ee.replace(/\/\*[.\s\S]*\*\//g,""),ae=te.replace(/\n/mg," ").replace(/ {2}/g," ");return L.test(ae)}catch(ie){return!1}},G=function($){try{return!E($)&&(T.call($),!0)}catch(J){return!1}},Z=Object.prototype.toString,W="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function($){if(!$)return!1;if("function"!=typeof $&&"object"!=typeof $)return!1;if(W)return G($);if(E($))return!1;var J=Z.call($);return"[object Function]"===J||"[object GeneratorFunction]"===J}},{}],52:[function(I,R){"use strict";var T=Date.prototype.getDay,L=function(W){try{return T.call(W),!0}catch(Q){return!1}},E=Object.prototype.toString,G="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function(W){return"object"!=typeof W||null===W?!1:G?L(W):"[object Date]"===E.call(W)}},{}],53:[function(I,R){"use strict";var T=I("number-is-nan");R.exports=Number.isFinite||function(L){return!("number"!=typeof L||T(L)||L===1/0||L===-(1/0))}},{"number-is-nan":117}],54:[function(I,R){"use strict";var T=I("is-finite");R.exports=Number.isInteger||function(L){return"number"==typeof L&&T(L)&&Math.floor(L)===L}},{"is-finite":53}],55:[function(I,R){"use strict";var T=RegExp.prototype.exec,L=function(W){try{return T.call(W),!0}catch(Q){return!1}},E=Object.prototype.toString,G="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function(W){return!("object"!=typeof W)&&(G?L(W):"[object RegExp]"===E.call(W))}},{}],56:[function(I,R){"use strict";var T=Object.prototype.toString,L="function"==typeof Symbol&&"symbol"==typeof Symbol();if(L){var E=Symbol.prototype.toString,G=/^Symbol\(.*\)$/,Z=function(Q){return!("symbol"!=typeof Q.valueOf())&&G.test(E.call(Q))};R.exports=function(Q){if("symbol"==typeof Q)return!0;if("[object Symbol]"!==T.call(Q))return!1;try{return Z(Q)}catch($){return!1}}}else R.exports=function(){return!1}},{}],57:[function(I,R,T){(function(L){"use strict";(function(E){if("object"==typeof T&&"undefined"!=typeof R)R.exports=E();else if("function"==typeof define&&define.amd)define([],E);else{var G;G="undefined"==typeof window?"undefined"==typeof L?"undefined"==typeof self?this:self:L:window,G.PriorityQueue=E()}})(function(){return function E(G,Z,W){function Q(ee,te){if(!Z[ee]){if(!G[ee]){var ae="function"==typeof I&&I;if(!te&&ae)return ae(ee,!0);if($)return $(ee,!0);var ie=new Error("Cannot find module '"+ee+"'");throw ie.code="MODULE_NOT_FOUND",ie}var ne=Z[ee]={exports:{}};G[ee][0].call(ne.exports,function(le){var oe=G[ee][1][le];return Q(oe?oe:le)},ne,ne.exports,E,G,Z,W)}return Z[ee].exports}var $="function"==typeof I&&I;for(var J=0;J<W.length;J++)Q(W[J]);return Q}({1:[function(E,G){var ee=function(ie,ne){function le(){this.constructor=ie}for(var oe in ne)te.call(ne,oe)&&(ie[oe]=ne[oe]);return le.prototype=ne.prototype,ie.prototype=new le,ie.__super__=ne.prototype,ie},te={}.hasOwnProperty,Z,W,Q,$,J;Z=E("./PriorityQueue/AbstractPriorityQueue"),W=E("./PriorityQueue/ArrayStrategy"),$=E("./PriorityQueue/BinaryHeapStrategy"),Q=E("./PriorityQueue/BHeapStrategy"),J=function(ae){function ie(ne){ne||(ne={}),ne.strategy||(ne.strategy=$),ne.comparator||(ne.comparator=function(le,oe){return(le||0)-(oe||0)}),ie.__super__.constructor.call(this,ne)}return ee(ie,ae),ie}(Z),J.ArrayStrategy=W,J.BinaryHeapStrategy=$,J.BHeapStrategy=Q,G.exports=J},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(E,G){var Z;G.exports=Z=function(){function W(Q){var $;if(null==(null==Q?void 0:Q.strategy))throw"Must pass options.strategy, a strategy";if(null==(null==Q?void 0:Q.comparator))throw"Must pass options.comparator, a comparator";this.priv=new Q.strategy(Q),this.length=(null==Q||null==($=Q.initialValues)?void 0:$.length)||0}return W.prototype.queue=function(Q){return this.length++,this.priv.queue(Q),void 0},W.prototype.dequeue=function(){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},W.prototype.peek=function(){if(!this.length)throw"Empty queue";return this.priv.peek()},W.prototype.clear=function(){return this.length=0,this.priv.clear()},W}()},{}],3:[function(E,G){var Z,W;W=function($,J,ee){var te,ae,ie;for(ae=0,te=$.length;ae<te;)ie=ae+te>>>1,0<=ee($[ie],J)?ae=ie+1:te=ie;return ae},G.exports=Z=function(){function Q($){var J;this.options=$,this.comparator=this.options.comparator,this.data=(null==(J=this.options.initialValues)?void 0:J.slice(0))||[],this.data.sort(this.comparator).reverse()}return Q.prototype.queue=function($){var J=W(this.data,$,this.comparator);return this.data.splice(J,0,$),void 0},Q.prototype.dequeue=function(){return this.data.pop()},Q.prototype.peek=function(){return this.data[this.data.length-1]},Q.prototype.clear=function(){return this.data.length=0,void 0},Q}()},{}],4:[function(E,G){var Z;G.exports=Z=function(){function W(Q){var $,J,ee,te,ae,ie,ne,le,oe;for(this.comparator=(null==Q?void 0:Q.comparator)||function(se,de){return se-de},this.pageSize=(null==Q?void 0:Q.pageSize)||512,this.length=0,le=0;1<<le<this.pageSize;)le+=1;if(1<<le!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=le,this._emptyMemoryPageTemplate=$=[],(J=ee=0,ie=this.pageSize);0<=ie?ee<ie:ee>ie;J=0<=ie?++ee:--ee)$.push(null);if(this._memory=[],this._mask=this.pageSize-1,Q.initialValues)for(ne=Q.initialValues,te=0,ae=ne.length;te<ae;te++)oe=ne[te],this.queue(oe)}return W.prototype.queue=function(Q){return this.length+=1,this._write(this.length,Q),this._bubbleUp(this.length,Q),void 0},W.prototype.dequeue=function(){var Q,$;return Q=this._read(1),$=this._read(this.length),this.length-=1,0<this.length&&(this._write(1,$),this._bubbleDown(1,$)),Q},W.prototype.peek=function(){return this._read(1)},W.prototype.clear=function(){return this.length=0,this._memory.length=0,void 0},W.prototype._write=function(Q,$){for(var J=Q>>this._shift;J>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[J][Q&this._mask]=$},W.prototype._read=function(Q){return this._memory[Q>>this._shift][Q&this._mask]},W.prototype._bubbleUp=function(Q,$){var J,ee,te,ae;for(J=this.comparator;1<Q&&(ee=Q&this._mask,Q<this.pageSize||3<ee?te=Q&~this._mask|ee>>1:2>ee?(te=Q-this.pageSize>>this._shift,te+=te&~(this._mask>>1),te|=this.pageSize>>1):te=Q-2,ae=this._read(te),!(0>J(ae,$)));)this._write(te,$),this._write(Q,ae),Q=te;0},W.prototype._bubbleDown=function(Q,$){var J,ee,te,ae,ie;for(ie=this.comparator;Q<this.length;)if(Q>this._mask&&!(Q&this._mask-1)?J=ee=Q+2:Q&this.pageSize>>1?(J=(Q&~this._mask)>>1,J|=Q&this._mask>>1,J=J+1<<this._shift,ee=J+1):(J=Q+(Q&this._mask),ee=J+1),J!==ee&&ee<=this.length){if(te=this._read(J),ae=this._read(ee),0>ie(te,$)&&0>=ie(te,ae))this._write(J,$),this._write(Q,te),Q=J;else if(0>ie(ae,$))this._write(ee,$),this._write(Q,ae),Q=ee;else break;}else if(!(J<=this.length))break;else if(te=this._read(J),0>ie(te,$))this._write(J,$),this._write(Q,te),Q=J;else break;0},W}()},{}],5:[function(E,G){var Z;G.exports=Z=function(){function W(Q){var $;this.comparator=(null==Q?void 0:Q.comparator)||function(J,ee){return J-ee},this.length=0,this.data=(null==($=Q.initialValues)?void 0:$.slice(0))||[],this._heapify()}return W.prototype._heapify=function(){var Q,$,J;if(0<this.data.length)for(Q=$=1,J=this.data.length;1<=J?$<J:$>J;Q=1<=J?++$:--$)this._bubbleUp(Q);0},W.prototype.queue=function(Q){return this.data.push(Q),this._bubbleUp(this.data.length-1),void 0},W.prototype.dequeue=function(){var Q,$;return $=this.data[0],Q=this.data.pop(),0<this.data.length&&(this.data[0]=Q,this._bubbleDown(0)),$},W.prototype.peek=function(){return this.data[0]},W.prototype.clear=function(){return this.length=0,this.data.length=0,void 0},W.prototype._bubbleUp=function(Q){for(var $,J;0<Q&&($=Q-1>>>1,0>this.comparator(this.data[Q],this.data[$]));)J=this.data[$],this.data[$]=this.data[Q],this.data[Q]=J,Q=$;0},W.prototype._bubbleDown=function(Q){var $,J,ee,te,ae;for($=this.data.length-1;J=(Q<<1)+1,te=J+1,ee=Q,J<=$&&0>this.comparator(this.data[J],this.data[ee])&&(ee=J),te<=$&&0>this.comparator(this.data[te],this.data[ee])&&(ee=te),ee!==Q;)ae=this.data[ee],this.data[ee]=this.data[Q],this.data[Q]=ae,Q=ee;0},W}()},{}]},{},[1])(1)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],58:[function(I,R){"use strict";function T(){}function L(ie){if("function"!=typeof ie)throw new TypeError("resolver must be a function");this.state=ae,this.queue=[],this.outcome=void 0,ie!==T&&W(this,ie)}function E(ie,ne,le){this.promise=ie,"function"==typeof ne&&(this.onFulfilled=ne,this.callFulfilled=this.otherCallFulfilled),"function"==typeof le&&(this.onRejected=le,this.callRejected=this.otherCallRejected)}function G(ie,ne,le){$(function(){var oe;try{oe=ne(le)}catch(se){return J.reject(ie,se)}oe===ie?J.reject(ie,new TypeError("Cannot resolve promise with itself")):J.resolve(ie,oe)})}function Z(ie){var ne=ie&&ie.then;if(ie&&"object"==typeof ie&&"function"==typeof ne)return function(){ne.apply(ie,arguments)}}function W(ie,ne){function le(he){se||(se=!0,J.reject(ie,he))}function oe(he){se||(se=!0,J.resolve(ie,he))}var se=!1,de=Q(function(){ne(oe,le)});"error"===de.status&&le(de.value)}function Q(ie,ne){var le={};try{le.value=ie(ne),le.status="success"}catch(oe){le.status="error",le.value=oe}return le}var $=I("immediate"),J={},ee=["REJECTED"],te=["FULFILLED"],ae=["PENDING"];R.exports=L,L.prototype["catch"]=function(ie){return this.then(null,ie)},L.prototype.then=function(ie,ne){if("function"!=typeof ie&&this.state===te||"function"!=typeof ne&&this.state===ee)return this;var le=new this.constructor(T);if(this.state!==ae){var oe=this.state===te?ie:ne;G(le,oe,this.outcome)}else this.queue.push(new E(le,ie,ne));return le},E.prototype.callFulfilled=function(ie){J.resolve(this.promise,ie)},E.prototype.otherCallFulfilled=function(ie){G(this.promise,this.onFulfilled,ie)},E.prototype.callRejected=function(ie){J.reject(this.promise,ie)},E.prototype.otherCallRejected=function(ie){G(this.promise,this.onRejected,ie)},J.resolve=function(ie,ne){var le=Q(Z,ne);if("error"===le.status)return J.reject(ie,le.value);var oe=le.value;if(oe)W(ie,oe);else{ie.state=te,ie.outcome=ne;for(var se=-1,de=ie.queue.length;++se<de;)ie.queue[se].callFulfilled(ne)}return ie},J.reject=function(ie,ne){ie.state=ee,ie.outcome=ne;for(var le=-1,oe=ie.queue.length;++le<oe;)ie.queue[le].callRejected(ne);return ie},L.resolve=function(ne){return ne instanceof this?ne:J.resolve(new this(T),ne)},L.reject=function(ne){var le=new this(T);return J.reject(le,ne)},L.all=function(ne){function le(pe,fe){oe.resolve(pe).then(function(be){he[fe]=be,++ue!==se||de||(de=!0,J.resolve(ge,he))},function(_e){de||(de=!0,J.reject(ge,_e))})}var oe=this;if("[object Array]"!==Object.prototype.toString.call(ne))return this.reject(new TypeError("must be an array"));var se=ne.length,de=!1;if(!se)return this.resolve([]);for(var he=Array(se),ue=0,ce=-1,ge=new this(T);++ce<se;)le(ne[ce],ce);return ge},L.race=function(ne){function le(ce){oe.resolve(ce).then(function(ge){de||(de=!0,J.resolve(ue,ge))},function(ge){de||(de=!0,J.reject(ue,ge))})}var oe=this;if("[object Array]"!==Object.prototype.toString.call(ne))return this.reject(new TypeError("must be an array"));var se=ne.length,de=!1;if(!se)return this.resolve([]);for(var he=-1,ue=new this(T);++he<se;)le(ne[he]);return ue}},{immediate:48}],59:[function(I,R){"use strict";function T(E){var G=Array(E[0].length);for(var Z=0;Z<G.length;++Z)G[Z]=Array(E.length);for(Z=0;Z<E.length;++Z)for(var W=0;W<E[0].length;++W)G[W][Z]=E[Z][W];return G}var L=I("ml-stat").array;R.exports={coordArrayToPoints:function(G,Z){if(0!=G.length%Z)throw new RangeError("Dimensions number must be accordance with the size of the array.");var W=G.length/Z,Q=Array(W),$=0;for(var J=0;J<G.length;J+=Z){var ee=Array(Z);for(var te=0;te<Z;++te)ee[te]=G[J+te];Q[$]=ee,$++}return Q},coordArrayToCoordMatrix:function(G,Z){if(0!=G.length%Z)throw new RangeError("Dimensions number must be accordance with the size of the array.");var W=Array(Z),Q=G.length/Z;for(var $=0;$<W.length;$++)W[$]=Array(Q);for($=0;$<G.length;$+=Z)for(var J=0;J<Z;++J){var ee=Math.floor($/Z);W[J][ee]=G[$+J]}return W},coordMatrixToCoordArray:function(G){var Z=Array(G.length*G[0].length),W=0;for(var Q=0;Q<G[0].length;++Q)for(var $=0;$<G.length;++$)Z[W]=G[$][Q],++W;return Z},coordMatrixToPoints:T,pointsToCoordArray:function(G){var Z=Array(G.length*G[0].length),W=0;for(var Q=0;Q<G.length;++Q)for(var $=0;$<G[0].length;++$)Z[W]=G[Q][$],++W;return Z},pointsToCoordMatrix:T,applyDotProduct:function(G,Z){var W,Q;G.length<=Z.length?(Q=G,W=Z):(Q=Z,W=G);var $=W.length-Q.length+1,J=Array($);for(var ee=0;ee<$;++ee){var te=0;for(var ae=0;ae<Q.length;++ae)te+=Q[ae]*W[ee+ae];J[ee]=te}return J},scale:function(G,Z){var W;W=Z.inPlace?G:Array(G.length);var Q=Z.max,$=Z.min;if("number"==typeof Q){if("number"==typeof $){var J=L.minMax(G),ee=(Q-$)/(J.max-J.min);for(var te=0;te<W.length;te++)W[te]=(G[te]-J.min)*ee+$}else{var ae=L.max(G),ee=Q/ae;for(var te=0;te<W.length;te++)W[te]=G[te]*ee}}else if("number"==typeof $){var ae=L.min(G),ee=$/ae;for(var te=0;te<W.length;te++)W[te]=G[te]*ee}return W}}},{"ml-stat":112}],60:[function(I,R,T){"use strict";function L(Z,W,Q,$,J){function ee(ve,Me,je,Pe){return(Pe-Me)/(je-ve)}var te=Z.length,ae=($-Q)/(J-1),ie=Q-ae/2,ne=Array(J),le=Z[1]-Z[0],oe=Z[Z.length-1]-Z[Z.length-2],se=ie,de=ie+ae,he=Number.MIN_VALUE,ue=0,ce=Z[0]-le,ge=0,pe=0,fe=0,_e=0,be=0,ye=0,xe=0,ke=0;main:for(;!0;){for(;0<=ce-de;){var we=G(0,de-he,fe,ue);if(ye=pe+we,ne[ke]=(ye-be)/ae,ke++,ke===J)break main;se=de,de+=ae,be=ye}he<=se&&se<=ce&&(we=G(0,se-he,fe,ue),be=pe+we),pe+=G(he,ce,fe,_e),he=ce,ue=ge,xe<te?(ce=Z[xe],ge=W[xe],xe++):xe===te&&(ce+=oe,ge=0),fe=ee(he,ue,ce,ge),_e=-fe*he+ue}return ne}function E(Z,W,Q,$,J){var ee=Z.length,te=($-Q)/(J-1),ae=Z[Z.length-1]-Z[Z.length-2],ie=Q-te/2,ne=Array(J),le=ie,oe=ie+te,se=-Number.MAX_VALUE,de=0,he=Z[0],ue=W[0],ce=0,ge=!0,pe=0,fe=0,_e=1,be=0;main:for(;!0;){if(se>=he)throw new Error("x must be an increasing serie");for(;0<se-oe;){if(ge&&(fe++,ge=!1),ne[be]=0>=fe?0:pe/fe,be++,be===J)break main;le=oe,oe+=te,pe=0,fe=0}se>le&&(pe+=de,fe++),(se==-Number.MAX_VALUE||1<ce)&&fe--,se=he,de=ue,_e<ee?(he=Z[_e],ue=W[_e],_e++):(he+=ae,ue=0,ce++)}return ne}function G(Z,W,Q,$){return 0.5*Q*W*W+$*W-(0.5*Q*Z*Z+$*Z)}T.getEquallySpacedData=function(W,Q,$){1<W.length&&W[0]>W[1]&&(W=W.slice().reverse(),Q=Q.slice().reverse());var J=W.length;if(J!==Q.length)throw new RangeError("the x and y vector doesn't have the same size.");$===void 0&&($={});var ee=$.from===void 0?W[0]:$.from;if(isNaN(ee)||!isFinite(ee))throw new RangeError("'From' value must be a number");var te=$.to===void 0?W[W.length-1]:$.to;if(isNaN(te)||!isFinite(te))throw new RangeError("'To' value must be a number");var ae=ee>te;if(ae){var ie=ee;ee=te,te=ie}var ne=$.numberOfPoints===void 0?100:$.numberOfPoints;if(isNaN(ne)||!isFinite(ne))throw new RangeError("'Number of points' value must be a number");if(1>ne)throw new RangeError("the number of point must be higher than 1");var le="slot"===$.variant?"slot":"smooth",oe="slot"==le?E(W,Q,ee,te,ne):L(W,Q,ee,te,ne);return ae?oe.reverse():oe},T.integral=G},{}],61:[function(I,R,T){"use strict";R.exports=T=I("./ArrayUtils"),T.getEquallySpacedData=I("./getEquallySpaced").getEquallySpacedData,T.SNV=I("./snv").SNV},{"./ArrayUtils":59,"./getEquallySpaced":60,"./snv":62}],62:[function(I,R,T){"use strict";T.SNV=function(G){var Z=L.mean(G),W=L.standardDeviation(G),Q=G.slice();for(var $=0;$<G.length;$++)Q[$]=(Q[$]-Z)/W;return Q};var L=I("ml-stat").array},{"ml-stat":112}],63:[function(I,R){"use strict";function T(L){this.value=L,this.parent=null,this.rank=0}R.exports=class{constructor(){this.nodes=new Map}add(E){var G=this.nodes.get(E);return G||(G=new T(E),this.nodes.set(E,G)),G}union(E,G){var Z=this.find(E),W=this.find(G);Z===W||(Z.rank<W.rank?Z.parent=W:Z.rank>W.rank?W.parent=Z:(W.parent=Z,Z.rank++))}find(E){for(var G=E;null!==G.parent;)G=G.parent;for(var Z=E;null!==Z.parent;){var W=Z;Z=Z.parent,W.parent=G}return G}connected(E,G){return this.find(E)===this.find(G)}}},{}],64:[function(I,R){"use strict";function T(E,G){var Z=0;for(var W=0;W<E.length;W++)Z+=(E[W]-G[W])*(E[W]-G[W]);return Z}function L(E,G){return Math.sqrt(T(E,G))}R.exports=L,L.squared=T},{}],65:[function(I,R){"use strict";var T=I("./fftlib");R.exports={DEBUG:!1,ifft2DArray:function(E,G,Z){var W=Array(G*Z),Q=G/2,$=2*(Z-1);T.init(Q);var J={re:Array(Q),im:Array(Q)};for(var ee=0;ee<Z;ee++){for(var te=Q-1;0<=te;te--)J.re[te]=E[2*te*Z+ee],J.im[te]=E[(2*te+1)*Z+ee];T.bt(J.re,J.im);for(var te=Q-1;0<=te;te--)W[2*te*Z+ee]=J.re[te],W[(2*te+1)*Z+ee]=J.im[te]}var ae=Array(Q*$);T.init($);var ie={re:Array($),im:Array($)};for(var te=0;te<G;te+=2){ie.re[0]=W[te*Z],ie.im[0]=W[(te+1)*Z];for(var ee=1;ee<Z;ee++)ie.re[ee]=W[te*Z+ee],ie.im[ee]=W[(te+1)*Z+ee],ie.re[$-ee]=W[te*Z+ee],ie.im[$-ee]=-W[(te+1)*Z+ee];T.bt(ie.re,ie.im);var ne=te/2*$;for(var ee=$-1;0<=ee;ee--)ae[ne+ee]=ie.re[ee]/($*Q)}return ae},fft2DArray:function(E,G,Z){Object.assign({},{inplace:!0});var W=Z/2+1,Q=2*G,$=Array(Q*W);T.init(Z);var J={re:Array(Z),im:Array(Z)},ee={re:Array(Z),im:Array(Z)},te={re:Array(Z),im:Array(Z)},ae,ie,ne,le,oe;for(var se=0;se<G/2;se++){ae=2*se*Z,J.re=E.slice(ae,ae+Z),ae=(2*se+1)*Z,J.im=E.slice(ae,ae+Z),T.fft1d(J.re,J.im),this.reconstructTwoRealFFT(J,ee,te),ie=4*se*W,ne=(4*se+1)*W,le=(4*se+2)*W,oe=(4*se+3)*W;for(var de=W-1;0<=de;de--)$[ie+de]=ee.re[de],$[ne+de]=ee.im[de],$[le+de]=te.re[de],$[oe+de]=te.im[de]}ee=null,te=null;var he=Array(Q*W);T.init(G);var ue={re:Array(G),im:Array(G)};for(var ce=W-1;0<=ce;ce--){for(var se=G-1;0<=se;se--)ue.re[se]=$[2*se*W+ce],ue.im[se]=$[(2*se+1)*W+ce],isNaN(ue.re[se])&&(ue.re[se]=0),isNaN(ue.im[se])&&(ue.im[se]=0);T.fft1d(ue.re,ue.im);for(var se=G-1;0<=se;se--)he[2*se*W+ce]=ue.re[se],he[(2*se+1)*W+ce]=ue.im[se]}return he},reconstructTwoRealFFT:function(E,G,Z){var W=E.re.length;G.re[0]=E.re[0],G.im[0]=0,Z.re[0]=E.im[0],Z.im[0]=0;var Q,$,J,ee,te;for(var ae=W/2;0<ae;ae--)te=W-ae,Q=0.5*(E.re[ae]-E.re[te]),$=0.5*(E.re[ae]+E.re[te]),J=0.5*(E.im[ae]-E.im[te]),ee=0.5*(E.im[ae]+E.im[te]),G.re[ae]=$,G.im[ae]=J,G.re[te]=$,G.im[te]=-J,Z.re[ae]=ee,Z.im[ae]=-Q,Z.re[te]=ee,Z.im[te]=Q},convolute2DI:function(E,G,Z,W){var Q,$;for(var J=0;J<Z/2;J++)for(var ee=0;ee<W;ee++)Q=E[2*J*W+ee]*G[2*J*W+ee]-E[(2*J+1)*W+ee]*G[(2*J+1)*W+ee],$=E[2*J*W+ee]*G[(2*J+1)*W+ee]+E[(2*J+1)*W+ee]*G[2*J*W+ee],E[2*J*W+ee]=Q,E[(2*J+1)*W+ee]=$},convolute:function(E,G,Z,W){var Q=Array(W*Z);for(var $=0;$<Z*W;$++)Q[$]=E[$];Q=this.fft2DArray(Q,Z,W);var J=G.length,ee=G[0].length,te=Array(W*Z);for(var $=0;$<W*Z;$++)te[$]=0;var ne=Math.floor((J-1)/2),le=Math.floor((ee-1)/2),ae,ie;for(var oe=0;oe<J;oe++){ae=(oe-ne+Z)%Z;for(var se=0;se<ee;se++)ie=(se-le+W)%W,te[ae*W+ie]=G[oe][se]}te=this.fft2DArray(te,Z,W);var de=2*Z,he=W/2+1;return this.convolute2DI(Q,te,de,he),this.ifft2DArray(Q,de,he)},toRadix2:function(E,G,Z){var W,Q,$,J,ee=Z,te=G;if(0===Z||0!=(Z&Z-1)){for(ee=0;0!=Z>>++ee;);ee=1<<ee}if(0===G||0!=(G&G-1)){for(te=0;0!=G>>++te;);te=1<<te}if(te==G&&ee==Z)return{data:E,rows:G,cols:Z};var ae=Array(te*ee),ie=Math.floor((te-G)/2)-G,ne=Math.floor((ee-Z)/2)-Z;for(W=0;W<te;W++)for($=W*ee,J=(W-ie)%G*Z,Q=0;Q<ee;Q++)ae[$+Q]=E[J+(Q-ne)%Z];return{data:ae,rows:te,cols:ee}},crop:function(E,G,Z,W,Q,$){if(G==W&&Z==Q)return E;Object.assign({},$);var J=Array(Q*W),ee=Math.floor((G-W)/2),te=Math.floor((Z-Q)/2),ae,ie,ne,le;for(ne=0;ne<W;ne++)for(ae=ne*Q,ie=(ne+ee)*Z,le=0;le<Q;le++)J[ae+le]=E[ie+(le+te)];return J}}},{"./fftlib":66}],66:[function(I,R,T){"use strict";(function(){var L;L="undefined"==typeof T?{}:T;var E={release:"0.3.0",date:"2013-03"};L.toString=function(){return"version "+E.release+", released "+E.date};var G=0,Z=null,W=null,Q={init:function(te){if(0!==te&&0==(te&te-1))G=te,Q._initArray(),Q._makeBitReversalTable(),Q._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(te,ae){Q.fft(te,ae,1)},ifft1d:function(te,ae){var ie=1/G;Q.fft(te,ae,-1);for(var ne=0;ne<G;ne++)te[ne]*=ie,ae[ne]*=ie},bt1d:function(te,ae){Q.fft(te,ae,-1)},fft2d:function(te,ae){var ie=[],ne=[],le=0;for(var oe=0;oe<G;oe++){le=oe*G;for(var se=0;se<G;se++)ie[se]=te[se+le],ne[se]=ae[se+le];Q.fft1d(ie,ne);for(var de=0;de<G;de++)te[de+le]=ie[de],ae[de+le]=ne[de]}for(var he=0;he<G;he++){for(var ue=0;ue<G;ue++)le=he+ue*G,ie[ue]=te[le],ne[ue]=ae[le];Q.fft1d(ie,ne);for(var ce=0;ce<G;ce++)le=he+ce*G,te[le]=ie[ce],ae[le]=ne[ce]}},ifft2d:function(te,ae){var ie=[],ne=[],le=0;for(var oe=0;oe<G;oe++){le=oe*G;for(var se=0;se<G;se++)ie[se]=te[se+le],ne[se]=ae[se+le];Q.ifft1d(ie,ne);for(var de=0;de<G;de++)te[de+le]=ie[de],ae[de+le]=ne[de]}for(var he=0;he<G;he++){for(var ue=0;ue<G;ue++)le=he+ue*G,ie[ue]=te[le],ne[ue]=ae[le];Q.ifft1d(ie,ne);for(var ce=0;ce<G;ce++)le=he+ce*G,te[le]=ie[ce],ae[le]=ne[ce]}},fft:function(te,ae,ie){var pe=G>>2,ne,le,oe,se,de,he,ue,ce,ge;for(var fe=0;fe<G;fe++)se=Z[fe],fe<se&&(de=te[fe],te[fe]=te[se],te[se]=de,de=ae[fe],ae[fe]=ae[se],ae[se]=de);for(var _e=1;_e<G;_e<<=1){le=0,ne=G/(_e<<1);for(var be=0;be<_e;be++){he=W[le+pe],ue=ie*W[le];for(var ye=be;ye<G;ye+=_e<<1)oe=ye+_e,ce=he*te[oe]+ue*ae[oe],ge=he*ae[oe]-ue*te[oe],te[oe]=te[ye]-ce,te[ye]+=ce,ae[oe]=ae[ye]-ge,ae[ye]+=ge;le+=ne}}},_initArray:function(){Z="undefined"==typeof Uint32Array?[]:new Uint32Array(G),W="undefined"==typeof Float64Array?[]:new Float64Array(1.25*G)},_paddingZero:function(){},_makeBitReversalTable:function(){var te=0,ae=0,ie=0;for(Z[0]=0;++te<G;){for(ie=G>>1;ie<=ae;)ae-=ie,ie>>=1;ae+=ie,Z[te]=ae}},_makeCosSinTable:function(){var te=G>>1,ae=G>>2,ie=G>>3,ne=Math.sin(Math.PI/G),le=2*ne*ne,oe=Math.sqrt(le*(2-le)),se=W[ae]=1,de=W[0]=0;ne=2*le;for(var he=1;he<ie;he++)se-=le,le+=ne*se,de+=oe,oe-=ne*de,W[he]=de,W[ae-he]=se;0!=ie&&(W[ie]=Math.sqrt(0.5));for(var ue=0;ue<ae;ue++)W[te-ue]=W[ue];for(var ce=0;ce<te+ae;ce++)W[ce+te]=-W[ce]}},$=["init","fft1d","ifft1d","fft2d","ifft2d"];for(var J=0;J<$.length;J++)L[$[J]]=Q[$[J]];return L.bt=Q.bt1d,L.fft=Q.fft1d,L.ifft=Q.ifft1d,L}).call(void 0)},{}],67:[function(I,R,T){"use strict";T.FFTUtils=I("./FFTUtils"),T.FFT=I("./fftlib")},{"./FFTUtils":65,"./fftlib":66}],68:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma,this.divisor=2*G.sigma*G.sigma}compute(G,Z){var W=T(G,Z);return Math.exp(-W/this.divisor)}}},{"ml-distance-euclidean":64}],69:[function(I,R){"use strict";var T={degree:1,constant:1,scale:1};R.exports=class{constructor(E){E=Object.assign({},T,E),this.degree=E.degree,this.constant=E.constant,this.scale=E.scale}compute(E,G){var Z=0;for(var W=0;W<E.length;W++)Z+=E[W]*G[W];return Math.pow(this.scale*Z+this.constant,this.degree)}}},{}],70:[function(I,R){"use strict";var T={alpha:0.01,constant:-Math.E};R.exports=class{constructor(E){E=Object.assign({},T,E),this.alpha=E.alpha,this.constant=E.constant}compute(E,G){var Z=0;for(var W=0;W<E.length;W++)Z+=E[W]*G[W];return Math.tanh(this.alpha*Z+this.constant)}}},{}],71:[function(I,R){"use strict";var T=I("ml-matrix"),L=I("ml-kernel-gaussian"),E=I("ml-kernel-polynomial"),G=I("./kernels/anova-kernel"),Z=I("./kernels/cauchy-kernel"),W=I("./kernels/exponential-kernel"),Q=I("./kernels/histogram-intersection-kernel"),$=I("./kernels/laplacian-kernel"),J=I("./kernels/multiquadratic-kernel"),ee=I("./kernels/rational-quadratic-kernel"),te=I("ml-kernel-sigmoid"),ae={gaussian:L,rbf:L,polynomial:E,poly:E,anova:G,cauchy:Z,exponential:W,histogram:Q,min:Q,laplacian:$,multiquadratic:J,rational:ee,sigmoid:te,mlp:te};R.exports=class{constructor(ne,le){if(this.kernelType=ne,"linear"!==ne)if("string"==typeof ne){ne=ne.toLowerCase();var oe=ae[ne];if(oe)this.kernelFunction=new oe(le);else throw new Error("unsupported kernel type: "+ne)}else if("object"==typeof ne&&"function"==typeof ne.compute)this.kernelFunction=ne;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(ne,le){if(void 0===le&&(le=ne),"linear"===this.kernelType){var oe=new T(ne);return oe.mmul(new T(le).transpose())}var se=new T(ne.length,le.length),de,he;if(ne===le)for(de=0;de<ne.length;de++)for(he=de;he<ne.length;he++)se[de][he]=se[he][de]=this.kernelFunction.compute(ne[de],ne[he]);else for(de=0;de<ne.length;de++)for(he=0;he<le.length;he++)se[de][he]=this.kernelFunction.compute(ne[de],le[he]);return se}}},{"./kernels/anova-kernel":72,"./kernels/cauchy-kernel":73,"./kernels/exponential-kernel":74,"./kernels/histogram-intersection-kernel":75,"./kernels/laplacian-kernel":76,"./kernels/multiquadratic-kernel":77,"./kernels/rational-quadratic-kernel":78,"ml-kernel-gaussian":68,"ml-kernel-polynomial":69,"ml-kernel-sigmoid":70,"ml-matrix":88}],72:[function(I,R){"use strict";var T={sigma:1,degree:1};R.exports=class{constructor(E){E=Object.assign({},T,E),this.sigma=E.sigma,this.degree=E.degree}compute(E,G){var Z=0,W=Math.min(E.length,G.length);for(var Q=1;Q<=W;++Q)Z+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(E[Q-1],Q)-Math.pow(G[Q-1],Q),2)),this.degree);return Z}}},{}],73:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma}compute(G,Z){return 1/(1+T(G,Z)/(this.sigma*this.sigma))}}},{"ml-distance-euclidean":64}],74:[function(I,R){"use strict";var T=I("ml-distance-euclidean"),L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma,this.divisor=2*G.sigma*G.sigma}compute(G,Z){var W=T(G,Z);return Math.exp(-W/this.divisor)}}},{"ml-distance-euclidean":64}],75:[function(I,R){"use strict";R.exports=class{compute(L,E){var G=Math.min(L.length,E.length),Z=0;for(var W=0;W<G;++W)Z+=Math.min(L[W],E[W]);return Z}}},{}],76:[function(I,R){"use strict";var T=I("ml-distance-euclidean"),L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma}compute(G,Z){var W=T(G,Z);return Math.exp(-W/this.sigma)}}},{"ml-distance-euclidean":64}],77:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={constant:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.constant=G.constant}compute(G,Z){return Math.sqrt(T(G,Z)+this.constant*this.constant)}}},{"ml-distance-euclidean":64}],78:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={constant:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.constant=G.constant}compute(G,Z){var W=T(G,Z);return 1-W/(W+this.constant)}}},{"ml-distance-euclidean":64}],79:[function(I,R){"use strict";"use strict;";function T(E){var G=E,Z,W;if("number"!=typeof E[0]){Z=E.length,W=E[0].length,G=Array(Z*W);for(var Q=0;Q<Z;Q++)for(var $=0;$<W;$++)G[Q*W+$]=E[Q][$]}else{var J=Math.sqrt(E.length);Number.isInteger(J)&&(Z=J,W=J)}return{data:G,rows:Z,cols:W}}var L=I("ml-fft").FFTUtils;R.exports={fft:function(G,Z,W){var Q=T(G),$=Q.data,J=Object.assign({normalize:!1,divisor:1,rows:Q.rows,cols:Q.cols},W),ee,te;if(J.rows&&J.cols)ee=J.rows,te=J.cols;else throw new Error("Invalid number of rows or columns "+ee+" "+te);var ae=J.divisor,le=Z.length,oe=Z[0].length,ie,ne;if(J.normalize)for(ae=0,ie=0;ie<le;ie++)for(ne=0;ne<oe;ne++)ae+=Z[ie][ne];if(0===ae)throw new RangeError("convolution: The divisor is equal to zero");var se=L.toRadix2($,ee,te),de=L.convolute(se.data,Z,se.rows,se.cols);if(de=L.crop(de,se.rows,se.cols,ee,te),0!=ae&&1!=ae)for(ie=0;ie<de.length;ie++)de[ie]/=ae;return de},direct:function(G,Z,W){var Q=T(G),$=Q.data,J=Object.assign({normalize:!1,divisor:1,rows:Q.rows,cols:Q.cols},W),ee,te;if(J.rows&&J.cols)ee=J.rows,te=J.cols;else throw new Error("Invalid number of rows or columns "+ee+" "+te);var ae=J.divisor,ie=Z.length,ne=Z[0].length,le,oe,se,de,he,ue,ce,ge,pe;if(J.normalize)for(ae=0,le=0;le<ie;le++)for(oe=0;oe<ne;oe++)ae+=Z[le][oe];if(0===ae)throw new RangeError("convolution: The divisor is equal to zero");var fe=Array(ee*te),_e=Math.floor(ie/2),be=Math.floor(ne/2);for(de=0;de<ee;de++)for(se=0;se<te;se++){for(ue=0,oe=0;oe<ie;oe++)for(le=0;le<ne;le++)ce=Z[ie-oe-1][ne-le-1],ge=(de+oe-_e+ee)%ee,pe=(se+le-be+te)%te,he=ge*te+pe,ue+=$[he]*ce;he=de*te+se,fe[he]=ue/ae}return fe},kernelFactory:{LoG:function(G,Z,W){var Q=1e3;W&&W.factor&&(Q=W.factor);var $=Array(Z),J,ee,te,ae;Q*=-1;var ie=(Z-1)/2;for(J=0;J<Z;J++)for($[J]=Array(Z),ae=(J-ie)*(J-ie),ee=0;ee<Z;ee++)te=-((ee-ie)*(ee-ie)+ae)/(2*G*G),$[J][ee]=Math.round(Q*(1+te)*Math.exp(te));return $}},matrix2Array:T}},{"ml-fft":67}],80:[function(require,module){"use strict";module.exports=function(superCtor){function compareNumbers(I,R){return I-R}function fillTemplateFunction(I,R){for(var T in R)I=I.replace(new RegExp("%"+T+"%","g"),R[T]);return I}superCtor===void 0&&(superCtor=Object);class I extends superCtor{static get[Symbol.species](){return this}static from1DArray(R,T,L){if(R*T!==L.length)throw new RangeError("Data length does not match given dimensions");var E=new this(R,T);for(var G=0;G<R;G++)for(var Z=0;Z<T;Z++)E.set(G,Z,L[G*T+Z]);return E}static rowVector(R){var T=new this(1,R.length);for(var L=0;L<R.length;L++)T.set(0,L,R[L]);return T}static columnVector(R){var T=new this(R.length,1);for(var L=0;L<R.length;L++)T.set(L,0,R[L]);return T}static empty(R,T){return new this(R,T)}static zeros(R,T){return this.empty(R,T).fill(0)}static ones(R,T){return this.empty(R,T).fill(1)}static rand(R,T,L){L===void 0&&(L=Math.random);var E=this.empty(R,T);for(var G=0;G<R;G++)for(var Z=0;Z<T;Z++)E.set(G,Z,L());return E}static randInt(R,T,L,E){L===void 0&&(L=1e3),E===void 0&&(E=Math.random);var G=this.empty(R,T);for(var Z=0;Z<R;Z++)for(var W=0;W<T;W++){var Q=Math.floor(E()*L);G.set(Z,W,Q)}return G}static eye(R,T,L){L===void 0&&(L=1),T===void 0&&(T=R);var E=Math.min(R,T),G=this.zeros(R,T);for(var Z=0;Z<E;Z++)G.set(Z,Z,L);return G}static diag(R,T,L){var E=R.length;T===void 0&&(T=E),L===void 0&&(L=T);var G=Math.min(E,T,L),Z=this.zeros(T,L);for(var W=0;W<G;W++)Z.set(W,W,R[W]);return Z}static min(R,T){R=this.checkMatrix(R),T=this.checkMatrix(T);var L=R.rows,E=R.columns,G=new this(L,E);for(var Z=0;Z<L;Z++)for(var W=0;W<E;W++)G.set(Z,W,Math.min(R.get(Z,W),T.get(Z,W)));return G}static max(R,T){R=this.checkMatrix(R),T=this.checkMatrix(T);var L=R.rows,E=R.columns,G=new this(L,E);for(var Z=0;Z<L;Z++)for(var W=0;W<E;W++)G.set(Z,W,Math.max(R.get(Z,W),T.get(Z,W)));return G}static checkMatrix(R){return I.isMatrix(R)?R:new this(R)}static isMatrix(R){return null!=R&&"Matrix"===R.klass}get size(){return this.rows*this.columns}apply(R){if("function"!=typeof R)throw new TypeError("callback must be a function");var T=this.rows,L=this.columns;for(var E=0;E<T;E++)for(var G=0;G<L;G++)R.call(this,E,G);return this}to1DArray(){var R=Array(this.size);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R[T*this.columns+L]=this.get(T,L);return R}to2DArray(){var R=Array(this.rows);for(var T=0;T<this.rows;T++){R[T]=Array(this.columns);for(var L=0;L<this.columns;L++)R[T][L]=this.get(T,L)}return R}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var R=0;R<this.rows;R++)for(var T=0;T<=R;T++)if(this.get(R,T)!==this.get(T,R))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(R,T){R=R||1,T=T||1;var L=new this.constructor[Symbol.species](this.rows*R,this.columns*T);for(var E=0;E<R;E++)for(var G=0;G<T;G++)L.setSubMatrix(this,this.rows*E,this.columns*G);return L}fill(R){for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,R);return this}neg(){return this.mulS(-1)}getRow(R){util.checkRowIndex(this,R);var T=Array(this.columns);for(var L=0;L<this.columns;L++)T[L]=this.get(R,L);return T}getRowVector(R){return this.constructor.rowVector(this.getRow(R))}setRow(R,T){util.checkRowIndex(this,R),T=util.checkRowVector(this,T);for(var L=0;L<this.columns;L++)this.set(R,L,T[L]);return this}swapRows(R,T){util.checkRowIndex(this,R),util.checkRowIndex(this,T);for(var L=0;L<this.columns;L++){var E=this.get(R,L);this.set(R,L,this.get(T,L)),this.set(T,L,E)}return this}getColumn(R){util.checkColumnIndex(this,R);var T=Array(this.rows);for(var L=0;L<this.rows;L++)T[L]=this.get(L,R);return T}getColumnVector(R){return this.constructor.columnVector(this.getColumn(R))}setColumn(R,T){util.checkColumnIndex(this,R),T=util.checkColumnVector(this,T);for(var L=0;L<this.rows;L++)this.set(L,R,T[L]);return this}swapColumns(R,T){util.checkColumnIndex(this,R),util.checkColumnIndex(this,T);for(var L=0;L<this.rows;L++){var E=this.get(L,R);this.set(L,R,this.get(L,T)),this.set(L,T,E)}return this}addRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)+R[L]);return this}subRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)-R[L]);return this}mulRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)*R[L]);return this}divRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)/R[L]);return this}addColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)+R[T]);return this}subColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)-R[T]);return this}mulColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)*R[T]);return this}divColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)/R[T]);return this}mulRow(R,T){util.checkRowIndex(this,R);for(var L=0;L<this.columns;L++)this.set(R,L,this.get(R,L)*T);return this}mulColumn(R,T){util.checkColumnIndex(this,R);for(var L=0;L<this.rows;L++)this.set(L,R,this.get(L,R)*T)}max(){var R=this.get(0,0);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.get(T,L)>R&&(R=this.get(T,L));return R}maxIndex(){var R=this.get(0,0),T=[0,0];for(var L=0;L<this.rows;L++)for(var E=0;E<this.columns;E++)this.get(L,E)>R&&(R=this.get(L,E),T[0]=L,T[1]=E);return T}min(){var R=this.get(0,0);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.get(T,L)<R&&(R=this.get(T,L));return R}minIndex(){var R=this.get(0,0),T=[0,0];for(var L=0;L<this.rows;L++)for(var E=0;E<this.columns;E++)this.get(L,E)<R&&(R=this.get(L,E),T[0]=L,T[1]=E);return T}maxRow(R){util.checkRowIndex(this,R);var T=this.get(R,0);for(var L=1;L<this.columns;L++)this.get(R,L)>T&&(T=this.get(R,L));return T}maxRowIndex(R){util.checkRowIndex(this,R);var T=this.get(R,0),L=[R,0];for(var E=1;E<this.columns;E++)this.get(R,E)>T&&(T=this.get(R,E),L[1]=E);return L}minRow(R){util.checkRowIndex(this,R);var T=this.get(R,0);for(var L=1;L<this.columns;L++)this.get(R,L)<T&&(T=this.get(R,L));return T}minRowIndex(R){util.checkRowIndex(this,R);var T=this.get(R,0),L=[R,0];for(var E=1;E<this.columns;E++)this.get(R,E)<T&&(T=this.get(R,E),L[1]=E);return L}maxColumn(R){util.checkColumnIndex(this,R);var T=this.get(0,R);for(var L=1;L<this.rows;L++)this.get(L,R)>T&&(T=this.get(L,R));return T}maxColumnIndex(R){util.checkColumnIndex(this,R);var T=this.get(0,R),L=[0,R];for(var E=1;E<this.rows;E++)this.get(E,R)>T&&(T=this.get(E,R),L[0]=E);return L}minColumn(R){util.checkColumnIndex(this,R);var T=this.get(0,R);for(var L=1;L<this.rows;L++)this.get(L,R)<T&&(T=this.get(L,R));return T}minColumnIndex(R){util.checkColumnIndex(this,R);var T=this.get(0,R),L=[0,R];for(var E=1;E<this.rows;E++)this.get(E,R)<T&&(T=this.get(E,R),L[0]=E);return L}diag(){var R=Math.min(this.rows,this.columns),T=Array(R);for(var L=0;L<R;L++)T[L]=this.get(L,L);return T}sum(){var R=0;for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R+=this.get(T,L);return R}mean(){return this.sum()/this.size}prod(){var R=1;for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R*=this.get(T,L);return R}cumulativeSum(){var R=0;for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R+=this.get(T,L),this.set(T,L,R);return this}dot(R){I.isMatrix(R)&&(R=R.to1DArray());var T=this.to1DArray();if(T.length!==R.length)throw new RangeError("vectors do not have the same size");var L=0;for(var E=0;E<T.length;E++)L+=T[E]*R[E];return L}mmul(R){R=this.constructor.checkMatrix(R),this.columns!==R.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");var T=this.rows,L=this.columns,E=R.columns,G=new this.constructor[Symbol.species](T,E),Z=Array(L);for(var W=0;W<E;W++){for(var Q=0;Q<L;Q++)Z[Q]=R.get(Q,W);for(var $=0;$<T;$++){var J=0;for(Q=0;Q<L;Q++)J+=this.get($,Q)*Z[Q];G.set($,W,J)}}return G}strassen_2x2(R){var T=new this.constructor[Symbol.species](2,2),L=this.get(0,0),E=R.get(0,0),G=this.get(0,1),Z=R.get(0,1),W=this.get(1,0),Q=R.get(1,0),$=this.get(1,1),J=R.get(1,1),ee=(L+$)*(E+J),te=(W+$)*E,ae=L*(Z-J),ie=$*(Q-E),ne=(L+G)*J;return T.set(0,0,ee+ie-ne+(G-$)*(Q+J)),T.set(0,1,ae+ne),T.set(1,0,te+ie),T.set(1,1,ee-te+ae+(W-L)*(E+Z)),T}strassen_3x3(R){var T=new this.constructor[Symbol.species](3,3),L=this.get(0,0),E=this.get(0,1),G=this.get(0,2),Z=this.get(1,0),W=this.get(1,1),Q=this.get(1,2),$=this.get(2,0),J=this.get(2,1),ee=this.get(2,2),te=R.get(0,0),ae=R.get(0,1),ie=R.get(0,2),ne=R.get(1,0),le=R.get(1,1),oe=R.get(1,2),se=R.get(2,0),de=R.get(2,1),he=R.get(2,2),ue=(L-Z)*(-ae+le),ce=(-L+Z+W)*(te-ae+le),ge=(Z+W)*(-te+ae),pe=L*te,fe=(-L+$+J)*(te-ie+oe),_e=(-L+$)*(ie-oe),be=($+J)*(-te+ie),ye=(-G+J+ee)*(le+se-de),xe=(G-ee)*(le-de),ke=G*se,we=(J+ee)*(-se+de),ve=(-G+W+Q)*(oe+se-he),Me=(G-Q)*(oe-he),je=(W+Q)*(-se+he);return T.set(0,0,pe+ke+E*ne),T.set(0,1,(L+E+G-Z-W-J-ee)*le+ce+ge+pe+ye+ke+we),T.set(0,2,pe+fe+be+(L+E+G-W-Q-$-J)*oe+ke+ve+je),T.set(1,0,ue+W*(-te+ae+ne-le-oe-se+he)+ce+pe+ke+ve+Me),T.set(1,1,ue+ce+ge+pe+Q*de),T.set(1,2,ke+ve+Me+je+Z*ie),T.set(2,0,pe+fe+_e+J*(-te+ie+ne-le-oe-se+de)+ye+xe+ke),T.set(2,1,ye+xe+ke+we+$*ae),T.set(2,2,pe+fe+_e+be+ee*he),T}mmul_strassen(R){function T(te,ae,ie){var ne=te.rows,le=te.columns;if(ne==ae&&le==ie)return te;var oe=I.zeros(ae,ie);return oe=oe.setSubMatrix(te,0,0),oe}function L(te,ae,ie,ne){if(512>=ie||512>=ne)return te.mmul(ae);1==ie%2&&1==ne%2?(te=T(te,ie+1,ne+1),ae=T(ae,ie+1,ne+1)):1==ie%2?(te=T(te,ie+1,ne),ae=T(ae,ie+1,ne)):1==ne%2&&(te=T(te,ie,ne+1),ae=T(ae,ie,ne+1));var le=parseInt(te.rows/2),oe=parseInt(te.columns/2),se=te.subMatrix(0,le-1,0,oe-1),de=ae.subMatrix(0,le-1,0,oe-1),he=te.subMatrix(0,le-1,oe,te.columns-1),ue=ae.subMatrix(0,le-1,oe,ae.columns-1),ce=te.subMatrix(le,te.rows-1,0,oe-1),ge=ae.subMatrix(le,ae.rows-1,0,oe-1),pe=te.subMatrix(le,te.rows-1,oe,te.columns-1),fe=ae.subMatrix(le,ae.rows-1,oe,ae.columns-1),_e=L(I.add(se,pe),I.add(de,fe),le,oe),be=L(I.add(ce,pe),de,le,oe),ye=L(se,I.sub(ue,fe),le,oe),xe=L(pe,I.sub(ge,de),le,oe),ke=L(I.add(se,he),fe,le,oe),we=L(I.sub(ce,se),I.add(de,ue),le,oe),ve=L(I.sub(he,pe),I.add(ge,fe),le,oe),Me=I.add(_e,xe);Me.sub(ke),Me.add(ve);var je=I.add(ye,ke),Pe=I.add(be,xe),De=I.sub(_e,be);De.add(ye),De.add(we);var Ie=I.zeros(2*Me.rows,2*Me.columns);return Ie=Ie.setSubMatrix(Me,0,0),Ie=Ie.setSubMatrix(je,Me.rows,0),Ie=Ie.setSubMatrix(Pe,0,Me.columns),Ie=Ie.setSubMatrix(De,Me.rows,Me.columns),Ie.subMatrix(0,ie-1,0,ne-1)}var E=this.clone(),G=E.rows,Z=E.columns,W=R.rows,Q=R.columns;Z!=W&&console.log(`Multiplying ${G} x ${Z} and ${W} x ${Q} matrix: dimensions do not match.`);var $=Math.max(G,W),J=Math.max(Z,Q),E=T(E,$,J),R=T(R,$,J),ee=L(E,R,$,J);return ee}scaleRows(R,T){if(R=void 0===R?0:R,T=void 0===T?1:T,R>=T)throw new RangeError("min should be strictly smaller than max");var L=this.constructor.empty(this.rows,this.columns);for(var E=0;E<this.rows;E++){var G=arrayUtils.scale(this.getRow(E),{min:R,max:T});L.setRow(E,G)}return L}scaleColumns(R,T){if(R=void 0===R?0:R,T=void 0===T?1:T,R>=T)throw new RangeError("min should be strictly smaller than max");var L=this.constructor.empty(this.rows,this.columns);for(var E=0;E<this.columns;E++){var G=arrayUtils.scale(this.getColumn(E),{min:R,max:T});L.setColumn(E,G)}return L}kroneckerProduct(R){R=this.constructor.checkMatrix(R);var T=this.rows,L=this.columns,E=R.rows,G=R.columns,Z=new this.constructor[Symbol.species](T*E,L*G);for(var W=0;W<T;W++)for(var Q=0;Q<L;Q++)for(var $=0;$<E;$++)for(var J=0;J<G;J++)Z[E*W+$][G*Q+J]=this.get(W,Q)*R.get($,J);return Z}transpose(){var R=new this.constructor[Symbol.species](this.columns,this.rows);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R.set(L,T,this.get(T,L));return R}sortRows(R){R===void 0&&(R=compareNumbers);for(var T=0;T<this.rows;T++)this.setRow(T,this.getRow(T).sort(R));return this}sortColumns(R){R===void 0&&(R=compareNumbers);for(var T=0;T<this.columns;T++)this.setColumn(T,this.getColumn(T).sort(R));return this}subMatrix(R,T,L,E){util.checkRange(this,R,T,L,E);var G=new this.constructor[Symbol.species](T-R+1,E-L+1);for(var Z=R;Z<=T;Z++)for(var W=L;W<=E;W++)G[Z-R][W-L]=this.get(Z,W);return G}subMatrixRow(R,T,L){if(void 0===T&&(T=0),void 0===L&&(L=this.columns-1),T>L||0>T||T>=this.columns||0>L||L>=this.columns)throw new RangeError("Argument out of range");var E=new this.constructor[Symbol.species](R.length,L-T+1);for(var G=0;G<R.length;G++)for(var Z=T;Z<=L;Z++){if(0>R[G]||R[G]>=this.rows)throw new RangeError("Row index out of range: "+R[G]);E.set(G,Z-T,this.get(R[G],Z))}return E}subMatrixColumn(R,T,L){if(void 0===T&&(T=0),void 0===L&&(L=this.rows-1),T>L||0>T||T>=this.rows||0>L||L>=this.rows)throw new RangeError("Argument out of range");var E=new this.constructor[Symbol.species](L-T+1,R.length);for(var G=0;G<R.length;G++)for(var Z=T;Z<=L;Z++){if(0>R[G]||R[G]>=this.columns)throw new RangeError("Column index out of range: "+R[G]);E.set(Z-T,G,this.get(Z,R[G]))}return E}setSubMatrix(R,T,L){R=this.constructor.checkMatrix(R);var E=T+R.rows-1,G=L+R.columns-1;util.checkRange(this,T,E,L,G);for(var Z=0;Z<R.rows;Z++)for(var W=0;W<R.columns;W++)this[T+Z][L+W]=R.get(Z,W);return this}selection(R,T){var L=util.checkIndices(this,R,T),E=new this.constructor[Symbol.species](R.length,T.length);for(var G=0;G<L.row.length;G++){var Z=L.row[G];for(var W=0;W<L.column.length;W++){var Q=L.column[W];E[G][W]=this.get(Z,Q)}}return E}trace(){var R=Math.min(this.rows,this.columns),T=0;for(var L=0;L<R;L++)T+=this.get(L,L);return T}transposeView(){return new MatrixTransposeView(this)}rowView(R){return util.checkRowIndex(this,R),new MatrixRowView(this,R)}columnView(R){return util.checkColumnIndex(this,R),new MatrixColumnView(this,R)}flipRowView(){return new MatrixFlipRowView(this)}flipColumnView(){return new MatrixFlipColumnView(this)}subMatrixView(R,T,L,E){return new MatrixSubView(this,R,T,L,E)}selectionView(R,T){return new MatrixSelectionView(this,R,T)}}I.prototype.klass="Matrix",I.random=I.rand,I.diagonal=I.diag,I.prototype.diagonal=I.prototype.diag,I.identity=I.eye,I.prototype.negate=I.prototype.neg,I.prototype.tensorProduct=I.prototype.kroneckerProduct;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,inplaceMethodWithArgs=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,staticMethodWithArgs=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,inplaceMethodWithOneArgScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,inplaceMethodWithOneArgMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,inplaceMethodWithOneArg=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,operators=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]];for(var operator of operators){var inplaceOp=eval(fillTemplateFunction(inplaceOperator,{name:operator[1],op:operator[0]})),inplaceOpS=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[1]+"S",op:operator[0]})),inplaceOpM=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[1]+"M",op:operator[0]})),staticOp=eval(fillTemplateFunction(staticOperator,{name:operator[1]}));for(var i=1;i<operator.length;i++)I.prototype[operator[i]]=inplaceOp,I.prototype[operator[i]+"S"]=inplaceOpS,I.prototype[operator[i]+"M"]=inplaceOpM,I[operator[i]]=staticOp}var methods=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(I){methods.push(["Math."+I,I])});for(var method of methods){var inplaceMeth=eval(fillTemplateFunction(inplaceMethod,{name:method[1],method:method[0]})),staticMeth=eval(fillTemplateFunction(staticMethod,{name:method[1]}));for(var i=1;i<method.length;i++)I.prototype[method[i]]=inplaceMeth,I[method[i]]=staticMeth}var methodsWithArgs=[["Math.pow",1,"pow"]];for(var methodWithArg of methodsWithArgs){var args="arg0";for(var i=1;i<methodWithArg[1];i++)args+=`, arg${i}`;if(1!==methodWithArg[1]){var inplaceMethWithArgs=eval(fillTemplateFunction(inplaceMethodWithArgs,{name:methodWithArg[2],method:methodWithArg[0],args:args})),staticMethWithArgs=eval(fillTemplateFunction(staticMethodWithArgs,{name:methodWithArg[2],args:args}));for(var i=2;i<methodWithArg.length;i++)I.prototype[methodWithArg[i]]=inplaceMethWithArgs,I[methodWithArg[i]]=staticMethWithArgs}else{var tmplVar={name:methodWithArg[2],args:args,method:methodWithArg[0]},inplaceMethod=eval(fillTemplateFunction(inplaceMethodWithOneArg,tmplVar)),inplaceMethodS=eval(fillTemplateFunction(inplaceMethodWithOneArgScalar,tmplVar)),inplaceMethodM=eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix,tmplVar)),staticMethod=eval(fillTemplateFunction(staticMethodWithArgs,tmplVar));for(var i=2;i<methodWithArg.length;i++)I.prototype[methodWithArg[i]]=inplaceMethod,I.prototype[methodWithArg[i]+"M"]=inplaceMethodM,I.prototype[methodWithArg[i]+"S"]=inplaceMethodS,I[methodWithArg[i]]=staticMethod}}return I};var arrayUtils=require("ml-array-utils"),util=require("./util"),MatrixTransposeView=require("./views/transpose"),MatrixRowView=require("./views/row"),MatrixSubView=require("./views/sub"),MatrixSelectionView=require("./views/selection"),MatrixColumnView=require("./views/column"),MatrixFlipRowView=require("./views/flipRow"),MatrixFlipColumnView=require("./views/flipColumn")},{"./util":91,"./views/column":93,"./views/flipColumn":94,"./views/flipRow":95,"./views/row":96,"./views/selection":97,"./views/sub":98,"./views/transpose":99,"ml-array-utils":61}],81:[function(I,R){"use strict";function T(E){if(!(this instanceof T))return new T(E);if(E=L.checkMatrix(E),!E.isSymmetric())throw new Error("Matrix is not symmetric");var G=E,Z=G.rows,W=new L(Z,Z),Q=!0,$,J,ee;for(J=0;J<Z;J++){var te=W[J],ae=0;for(ee=0;ee<J;ee++){var ie=W[ee],ne=0;for($=0;$<ee;$++)ne+=ie[$]*te[$];te[ee]=ne=(G[J][ee]-ne)/W[ee][ee],ae=ae+ne*ne}for(ae=G[J][J]-ae,Q&=0<ae,W[J][J]=Math.sqrt(Math.max(ae,0)),ee=J+1;ee<Z;ee++)W[J][ee]=0}if(!Q)throw new Error("Matrix is not positive definite");this.L=W}var L=I("../matrix");T.prototype={get lowerTriangularMatrix(){return this.L},solve:function(G){G=L.checkMatrix(G);var Z=this.L,W=Z.rows;if(G.rows!==W)throw new Error("Matrix dimensions do not match");var Q=G.columns,$=G.clone(),J,ee,te;for(te=0;te<W;te++)for(ee=0;ee<Q;ee++){for(J=0;J<te;J++)$[te][ee]-=$[J][ee]*Z[te][J];$[te][ee]/=Z[te][te]}for(te=W-1;0<=te;te--)for(ee=0;ee<Q;ee++){for(J=te+1;J<W;J++)$[te][ee]-=$[J][ee]*Z[J][te];$[te][ee]/=Z[te][te]}return $}},R.exports=T},{"../matrix":89}],82:[function(I,R){"use strict";function T(ae,ie){if(ie=Object.assign({},te,ie),!(this instanceof T))return new T(ae,ie);if(ae=Q.checkMatrix(ae),!ae.isSquare())throw new Error("Matrix is not a square matrix");var ne=ae.columns,le=ee(ne,ne,0),oe=Array(ne),se=Array(ne),de=ae,ce=!1,he,ue;if(ce=!!ie.assumeSymmetric||ae.isSymmetric(),ce){for(he=0;he<ne;he++)for(ue=0;ue<ne;ue++)le[he][ue]=de.get(he,ue);L(ne,se,oe,le),E(ne,se,oe,le)}else{var ge=ee(ne,ne,0),pe=Array(ne);for(ue=0;ue<ne;ue++)for(he=0;he<ne;he++)ge[he][ue]=de.get(he,ue);G(ne,ge,pe,le),Z(ne,se,oe,le,ge)}this.n=ne,this.e=se,this.d=oe,this.V=le}function L(ae,ie,ne,le){var oe,se,de,he,ue,ce,ge,pe;for(ue=0;ue<ae;ue++)ne[ue]=le[ae-1][ue];for(he=ae-1;0<he;he--){for(pe=0,de=0,ce=0;ce<he;ce++)pe=pe+Math.abs(ne[ce]);if(0===pe)for(ie[he]=ne[he-1],ue=0;ue<he;ue++)ne[ue]=le[he-1][ue],le[he][ue]=0,le[ue][he]=0;else{for(ce=0;ce<he;ce++)ne[ce]/=pe,de+=ne[ce]*ne[ce];for(oe=ne[he-1],se=Math.sqrt(de),0<oe&&(se=-se),ie[he]=pe*se,de=de-oe*se,ne[he-1]=oe-se,ue=0;ue<he;ue++)ie[ue]=0;for(ue=0;ue<he;ue++){for(oe=ne[ue],le[ue][he]=oe,se=ie[ue]+le[ue][ue]*oe,ce=ue+1;ce<=he-1;ce++)se+=le[ce][ue]*ne[ce],ie[ce]+=le[ce][ue]*oe;ie[ue]=se}for(oe=0,ue=0;ue<he;ue++)ie[ue]/=de,oe+=ie[ue]*ne[ue];for(ge=oe/(de+de),ue=0;ue<he;ue++)ie[ue]-=ge*ne[ue];for(ue=0;ue<he;ue++){for(oe=ne[ue],se=ie[ue],ce=ue;ce<=he-1;ce++)le[ce][ue]-=oe*ie[ce]+se*ne[ce];ne[ue]=le[he-1][ue],le[he][ue]=0}}ne[he]=de}for(he=0;he<ae-1;he++){if(le[ae-1][he]=le[he][he],le[he][he]=1,de=ne[he+1],0!==de){for(ce=0;ce<=he;ce++)ne[ce]=le[ce][he+1]/de;for(ue=0;ue<=he;ue++){for(se=0,ce=0;ce<=he;ce++)se+=le[ce][he+1]*le[ce][ue];for(ce=0;ce<=he;ce++)le[ce][ue]-=se*ne[ce]}}for(ce=0;ce<=he;ce++)le[ce][he+1]=0}for(ue=0;ue<ae;ue++)ne[ue]=le[ae-1][ue],le[ae-1][ue]=0;le[ae-1][ae-1]=1,ie[0]=0}function E(ae,ie,ne,le){var oe,se,de,he,ue,ce,ge,pe,fe,_e,be,ye,xe,ke,we,ve,Me;for(de=1;de<ae;de++)ie[de-1]=ie[de];ie[ae-1]=0;var je=0,Pe=0,De=Math.pow(2,-52);for(ce=0;ce<ae;ce++){for(Pe=Math.max(Pe,Math.abs(ne[ce])+Math.abs(ie[ce])),ge=ce;ge<ae&&!(Math.abs(ie[ge])<=De*Pe);)ge++;if(ge>ce){Me=0;do{for(Me=Me+1,oe=ne[ce],pe=(ne[ce+1]-oe)/(2*ie[ce]),fe=J(pe,1),0>pe&&(fe=-fe),ne[ce]=ie[ce]/(pe+fe),ne[ce+1]=ie[ce]*(pe+fe),_e=ne[ce+1],se=oe-ne[ce],de=ce+2;de<ae;de++)ne[de]-=se;for(je=je+se,pe=ne[ge],be=1,ye=be,xe=be,ke=ie[ce+1],we=0,ve=0,de=ge-1;de>=ce;de--)for(xe=ye,ye=be,ve=we,oe=be*ie[de],se=be*pe,fe=J(pe,ie[de]),ie[de+1]=we*fe,we=ie[de]/fe,be=pe/fe,pe=be*ne[de]-we*oe,ne[de+1]=se+we*(be*oe+we*ne[de]),ue=0;ue<ae;ue++)se=le[ue][de+1],le[ue][de+1]=we*le[ue][de]+be*se,le[ue][de]=be*le[ue][de]-we*se;pe=-we*ve*xe*ke*ie[ce]/_e,ie[ce]=we*pe,ne[ce]=be*pe}while(Math.abs(ie[ce])>De*Pe)}ne[ce]=ne[ce]+je,ie[ce]=0}for(de=0;de<ae-1;de++){for(ue=de,pe=ne[de],he=de+1;he<ae;he++)ne[he]<pe&&(ue=he,pe=ne[he]);if(ue!==de)for(ne[ue]=ne[de],ne[de]=pe,he=0;he<ae;he++)pe=le[he][de],le[he][de]=le[he][ue],le[he][ue]=pe}}function G(ae,ie,ne,le){var oe=0,se=ae-1,de,he,ue,ce,ge,pe,fe;for(pe=oe+1;pe<=se-1;pe++){for(fe=0,ce=pe;ce<=se;ce++)fe=fe+Math.abs(ie[ce][pe-1]);if(0!==fe){for(ue=0,ce=se;ce>=pe;ce--)ne[ce]=ie[ce][pe-1]/fe,ue+=ne[ce]*ne[ce];for(he=Math.sqrt(ue),0<ne[pe]&&(he=-he),ue=ue-ne[pe]*he,ne[pe]=ne[pe]-he,ge=pe;ge<ae;ge++){for(de=0,ce=se;ce>=pe;ce--)de+=ne[ce]*ie[ce][ge];for(de=de/ue,ce=pe;ce<=se;ce++)ie[ce][ge]-=de*ne[ce]}for(ce=0;ce<=se;ce++){for(de=0,ge=se;ge>=pe;ge--)de+=ne[ge]*ie[ce][ge];for(de=de/ue,ge=pe;ge<=se;ge++)ie[ce][ge]-=de*ne[ge]}ne[pe]=fe*ne[pe],ie[pe][pe-1]=fe*he}}for(ce=0;ce<ae;ce++)for(ge=0;ge<ae;ge++)le[ce][ge]=ce===ge?1:0;for(pe=se-1;pe>=oe+1;pe--)if(0!==ie[pe][pe-1]){for(ce=pe+1;ce<=se;ce++)ne[ce]=ie[ce][pe-1];for(ge=pe;ge<=se;ge++){for(he=0,ce=pe;ce<=se;ce++)he+=ne[ce]*le[ce][ge];for(he=he/ne[pe]/ie[pe][pe-1],ce=pe;ce<=se;ce++)le[ce][ge]+=he*ne[ce]}}}function Z(ae,ie,ne,le,oe){var se=ae-1,de=0,he=ae-1,ue=Math.pow(2,-52),ce=0,ge=0,pe=0,fe=0,_e=0,be=0,ye=0,xe=0,ke,we,ve,Me,je,Pe,De,Ie,Se,Ce,Ae,Re,Be,ze,Te;for(ke=0;ke<ae;ke++)for((ke<de||ke>he)&&(ne[ke]=oe[ke][ke],ie[ke]=0),we=Math.max(ke-1,0);we<ae;we++)ge=ge+Math.abs(oe[ke][we]);for(;se>=de;){for(Me=se;Me>de&&(be=Math.abs(oe[Me-1][Me-1])+Math.abs(oe[Me][Me]),0==be&&(be=ge),!(Math.abs(oe[Me][Me-1])<ue*be));)Me--;if(Me===se)oe[se][se]=oe[se][se]+ce,ne[se]=oe[se][se],ie[se]=0,se--,xe=0;else if(Me===se-1){if(De=oe[se][se-1]*oe[se-1][se],pe=(oe[se-1][se-1]-oe[se][se])/2,fe=pe*pe+De,ye=Math.sqrt(Math.abs(fe)),oe[se][se]=oe[se][se]+ce,oe[se-1][se-1]=oe[se-1][se-1]+ce,Ie=oe[se][se],0<=fe){for(ye=0<=pe?pe+ye:pe-ye,ne[se-1]=Ie+ye,ne[se]=ne[se-1],0!=ye&&(ne[se]=Ie-De/ye),ie[se-1]=0,ie[se]=0,Ie=oe[se][se-1],be=Math.abs(Ie)+Math.abs(ye),pe=Ie/be,fe=ye/be,_e=Math.sqrt(pe*pe+fe*fe),pe=pe/_e,fe=fe/_e,we=se-1;we<ae;we++)ye=oe[se-1][we],oe[se-1][we]=fe*ye+pe*oe[se][we],oe[se][we]=fe*oe[se][we]-pe*ye;for(ke=0;ke<=se;ke++)ye=oe[ke][se-1],oe[ke][se-1]=fe*ye+pe*oe[ke][se],oe[ke][se]=fe*oe[ke][se]-pe*ye;for(ke=de;ke<=he;ke++)ye=le[ke][se-1],le[ke][se-1]=fe*ye+pe*le[ke][se],le[ke][se]=fe*le[ke][se]-pe*ye}else ne[se-1]=Ie+pe,ne[se]=Ie+pe,ie[se-1]=ye,ie[se]=-ye;se=se-2,xe=0}else{if(Ie=oe[se][se],Se=0,De=0,Me<se&&(Se=oe[se-1][se-1],De=oe[se][se-1]*oe[se-1][se]),10==xe){for(ce+=Ie,ke=de;ke<=se;ke++)oe[ke][ke]-=Ie;be=Math.abs(oe[se][se-1])+Math.abs(oe[se-1][se-2]),Ie=Se=0.75*be,De=-0.4375*be*be}if(30==xe&&(be=(Se-Ie)/2,be=be*be+De,0<be)){for(be=Math.sqrt(be),Se<Ie&&(be=-be),be=Ie-De/((Se-Ie)/2+be),ke=de;ke<=se;ke++)oe[ke][ke]-=be;ce+=be,Ie=Se=De=0.964}for(xe=xe+1,je=se-2;je>=Me&&(ye=oe[je][je],_e=Ie-ye,be=Se-ye,pe=(_e*be-De)/oe[je+1][je]+oe[je][je+1],fe=oe[je+1][je+1]-ye-_e-be,_e=oe[je+2][je+1],be=Math.abs(pe)+Math.abs(fe)+Math.abs(_e),pe=pe/be,fe=fe/be,_e=_e/be,je!=Me)&&!(Math.abs(oe[je][je-1])*(Math.abs(fe)+Math.abs(_e))<ue*(Math.abs(pe)*(Math.abs(oe[je-1][je-1])+Math.abs(ye)+Math.abs(oe[je+1][je+1]))));)je--;for(ke=je+2;ke<=se;ke++)oe[ke][ke-2]=0,ke>je+2&&(oe[ke][ke-3]=0);for(ve=je;ve<=se-1&&(ze=ve!==se-1,ve!=je&&(pe=oe[ve][ve-1],fe=oe[ve+1][ve-1],_e=ze?oe[ve+2][ve-1]:0,Ie=Math.abs(pe)+Math.abs(fe)+Math.abs(_e),0!==Ie&&(pe=pe/Ie,fe=fe/Ie,_e=_e/Ie)),0!==Ie);ve++)if(be=Math.sqrt(pe*pe+fe*fe+_e*_e),0>pe&&(be=-be),0!==be){for(ve==je?Me!==je&&(oe[ve][ve-1]=-oe[ve][ve-1]):oe[ve][ve-1]=-be*Ie,pe=pe+be,Ie=pe/be,Se=fe/be,ye=_e/be,fe=fe/pe,_e=_e/pe,we=ve;we<ae;we++)pe=oe[ve][we]+fe*oe[ve+1][we],ze&&(pe=pe+_e*oe[ve+2][we],oe[ve+2][we]=oe[ve+2][we]-pe*ye),oe[ve][we]=oe[ve][we]-pe*Ie,oe[ve+1][we]=oe[ve+1][we]-pe*Se;for(ke=0;ke<=Math.min(se,ve+3);ke++)pe=Ie*oe[ke][ve]+Se*oe[ke][ve+1],ze&&(pe=pe+ye*oe[ke][ve+2],oe[ke][ve+2]=oe[ke][ve+2]-pe*_e),oe[ke][ve]=oe[ke][ve]-pe,oe[ke][ve+1]=oe[ke][ve+1]-pe*fe;for(ke=de;ke<=he;ke++)pe=Ie*le[ke][ve]+Se*le[ke][ve+1],ze&&(pe=pe+ye*le[ke][ve+2],le[ke][ve+2]=le[ke][ve+2]-pe*_e),le[ke][ve]=le[ke][ve]-pe,le[ke][ve+1]=le[ke][ve+1]-pe*fe}}}if(0!==ge){for(se=ae-1;0<=se;se--)if(pe=ne[se],fe=ie[se],0===fe)for(Me=se,oe[se][se]=1,ke=se-1;0<=ke;ke--){for(De=oe[ke][ke]-pe,_e=0,we=Me;we<=se;we++)_e=_e+oe[ke][we]*oe[we][se];if(0>ie[ke])ye=De,be=_e;else if(Me=ke,0===ie[ke]?oe[ke][se]=0===De?-_e/(ue*ge):-_e/De:(Ie=oe[ke][ke+1],Se=oe[ke+1][ke],fe=(ne[ke]-pe)*(ne[ke]-pe)+ie[ke]*ie[ke],Pe=(Ie*be-ye*_e)/fe,oe[ke][se]=Pe,oe[ke+1][se]=Math.abs(Ie)>Math.abs(ye)?(-_e-De*Pe)/Ie:(-be-Se*Pe)/ye),Pe=Math.abs(oe[ke][se]),1<ue*Pe*Pe)for(we=ke;we<=se;we++)oe[we][se]=oe[we][se]/Pe}else if(0>fe)for(Me=se-1,Math.abs(oe[se][se-1])>Math.abs(oe[se-1][se])?(oe[se-1][se-1]=fe/oe[se][se-1],oe[se-1][se]=-(oe[se][se]-pe)/oe[se][se-1]):(Te=W(0,-oe[se-1][se],oe[se-1][se-1]-pe,fe),oe[se-1][se-1]=Te[0],oe[se-1][se]=Te[1]),oe[se][se-1]=0,oe[se][se]=1,ke=se-2;0<=ke;ke--){for(Ce=0,Ae=0,we=Me;we<=se;we++)Ce=Ce+oe[ke][we]*oe[we][se-1],Ae=Ae+oe[ke][we]*oe[we][se];if(De=oe[ke][ke]-pe,0>ie[ke])ye=De,_e=Ce,be=Ae;else if(Me=ke,0===ie[ke]?(Te=W(-Ce,-Ae,De,fe),oe[ke][se-1]=Te[0],oe[ke][se]=Te[1]):(Ie=oe[ke][ke+1],Se=oe[ke+1][ke],Re=(ne[ke]-pe)*(ne[ke]-pe)+ie[ke]*ie[ke]-fe*fe,Be=2*(ne[ke]-pe)*fe,0===Re&&0===Be&&(Re=ue*ge*(Math.abs(De)+Math.abs(fe)+Math.abs(Ie)+Math.abs(Se)+Math.abs(ye))),Te=W(Ie*_e-ye*Ce+fe*Ae,Ie*be-ye*Ae-fe*Ce,Re,Be),oe[ke][se-1]=Te[0],oe[ke][se]=Te[1],Math.abs(Ie)>Math.abs(ye)+Math.abs(fe)?(oe[ke+1][se-1]=(-Ce-De*oe[ke][se-1]+fe*oe[ke][se])/Ie,oe[ke+1][se]=(-Ae-De*oe[ke][se]-fe*oe[ke][se-1])/Ie):(Te=W(-_e-Se*oe[ke][se-1],-be-Se*oe[ke][se],ye,fe),oe[ke+1][se-1]=Te[0],oe[ke+1][se]=Te[1])),Pe=Math.max(Math.abs(oe[ke][se-1]),Math.abs(oe[ke][se])),1<ue*Pe*Pe)for(we=ke;we<=se;we++)oe[we][se-1]=oe[we][se-1]/Pe,oe[we][se]=oe[we][se]/Pe}for(ke=0;ke<ae;ke++)if(ke<de||ke>he)for(we=ke;we<ae;we++)le[ke][we]=oe[ke][we];for(we=ae-1;we>=de;we--)for(ke=de;ke<=he;ke++){for(ye=0,ve=de;ve<=Math.min(we,he);ve++)ye=ye+le[ke][ve]*oe[ve][we];le[ke][we]=ye}}}function W(ae,ie,ne,le){var oe,se;return Math.abs(ne)>Math.abs(le)?(oe=le/ne,se=ne+oe*le,[(ae+oe*ie)/se,(ie-oe*ae)/se]):(oe=ne/le,se=le+oe*ne,[(oe*ae+ie)/se,(oe*ie-ae)/se])}var Q=I("../matrix"),$=I("./util"),J=$.hypotenuse,ee=$.getFilled2DArray,te={assumeSymmetric:!1};T.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return Q.isMatrix(this.V)||(this.V=new Q(this.V)),this.V},get diagonalMatrix(){var ae=this.n,ie=this.e,ne=this.d,le=new Q(ae,ae),oe,se;for(oe=0;oe<ae;oe++){for(se=0;se<ae;se++)le[oe][se]=0;le[oe][oe]=ne[oe],0<ie[oe]?le[oe][oe+1]=ie[oe]:0>ie[oe]&&(le[oe][oe-1]=ie[oe])}return le}},R.exports=T},{"../matrix":89,"./util":86}],83:[function(I,R){"use strict";function T(E){if(!(this instanceof T))return new T(E);E=L.checkMatrix(E);var G=E.clone(),Z=G.rows,W=G.columns,Q=Array(Z),$=1,J,ee,te,ae,ie,ne,le,oe,se,de;for(J=0;J<Z;J++)Q[J]=J;for(se=Array(Z),ee=0;ee<W;ee++){for(J=0;J<Z;J++)se[J]=G[J][ee];for(J=0;J<Z;J++){for(oe=G[J],de=Math.min(J,ee),ie=0,te=0;te<de;te++)ie+=oe[te]*se[te];oe[ee]=se[J]-=ie}for(ae=ee,J=ee+1;J<Z;J++)Math.abs(se[J])>Math.abs(se[ae])&&(ae=J);if(ae!==ee){for(te=0;te<W;te++)ne=G[ae][te],G[ae][te]=G[ee][te],G[ee][te]=ne;le=Q[ae],Q[ae]=Q[ee],Q[ee]=le,$=-$}if(ee<Z&&0!==G[ee][ee])for(J=ee+1;J<Z;J++)G[J][ee]/=G[ee][ee]}this.LU=G,this.pivotVector=Q,this.pivotSign=$}var L=I("../matrix");T.prototype={isSingular:function(){var G=this.LU,Z=G.columns;for(var W=0;W<Z;W++)if(0===G[W][W])return!0;return!1},get determinant(){var E=this.LU;if(!E.isSquare())throw new Error("Matrix must be square");var G=this.pivotSign,Z=E.columns;for(var W=0;W<Z;W++)G*=E[W][W];return G},get lowerTriangularMatrix(){var E=this.LU,G=E.rows,Z=E.columns,W=new L(G,Z);for(var Q=0;Q<G;Q++)for(var $=0;$<Z;$++)W[Q][$]=Q>$?E[Q][$]:Q===$?1:0;return W},get upperTriangularMatrix(){var E=this.LU,G=E.rows,Z=E.columns,W=new L(G,Z);for(var Q=0;Q<G;Q++)for(var $=0;$<Z;$++)W[Q][$]=Q<=$?E[Q][$]:0;return W},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(G){G=L.checkMatrix(G);var Z=this.LU,W=Z.rows;if(W!==G.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var Q=G.columns,$=G.subMatrixRow(this.pivotVector,0,Q-1),J=Z.columns,ee,te,ae;for(ae=0;ae<J;ae++)for(ee=ae+1;ee<J;ee++)for(te=0;te<Q;te++)$[ee][te]-=$[ae][te]*Z[ee][ae];for(ae=J-1;0<=ae;ae--){for(te=0;te<Q;te++)$[ae][te]/=Z[ae][ae];for(ee=0;ee<ae;ee++)for(te=0;te<Q;te++)$[ee][te]-=$[ae][te]*Z[ee][ae]}return $}},R.exports=T},{"../matrix":89}],84:[function(I,R){"use strict";function T(G){if(!(this instanceof T))return new T(G);G=L.checkMatrix(G);var Z=G.clone(),W=G.rows,Q=G.columns,$=Array(Q),J,ee,te,ae;for(te=0;te<Q;te++){var ie=0;for(J=te;J<W;J++)ie=E(ie,Z[J][te]);if(0!==ie){for(0>Z[te][te]&&(ie=-ie),J=te;J<W;J++)Z[J][te]/=ie;for(Z[te][te]+=1,ee=te+1;ee<Q;ee++){for(ae=0,J=te;J<W;J++)ae+=Z[J][te]*Z[J][ee];for(ae=-ae/Z[te][te],J=te;J<W;J++)Z[J][ee]+=ae*Z[J][te]}}$[te]=-ie}this.QR=Z,this.Rdiag=$}var L=I("../matrix"),E=I("./util").hypotenuse;T.prototype={solve:function(Z){Z=L.checkMatrix(Z);var W=this.QR,Q=W.rows;if(Z.rows!==Q)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var $=Z.columns,J=Z.clone(),ee=W.columns,te,ae,ie,ne;for(ie=0;ie<ee;ie++)for(ae=0;ae<$;ae++){for(ne=0,te=ie;te<Q;te++)ne+=W[te][ie]*J[te][ae];for(ne=-ne/W[ie][ie],te=ie;te<Q;te++)J[te][ae]+=ne*W[te][ie]}for(ie=ee-1;0<=ie;ie--){for(ae=0;ae<$;ae++)J[ie][ae]/=this.Rdiag[ie];for(te=0;te<ie;te++)for(ae=0;ae<$;ae++)J[te][ae]-=J[ie][ae]*W[te][ie]}return J.subMatrix(0,ee-1,0,$-1)},isFullRank:function(){var Z=this.QR.columns;for(var W=0;W<Z;W++)if(0===this.Rdiag[W])return!1;return!0},get upperTriangularMatrix(){var G=this.QR,Z=G.columns,W=new L(Z,Z),Q,$;for(Q=0;Q<Z;Q++)for($=0;$<Z;$++)W[Q][$]=Q<$?G[Q][$]:Q===$?this.Rdiag[Q]:0;return W},get orthogonalMatrix(){var G=this.QR,Z=G.rows,W=G.columns,Q=new L(Z,W),$,J,ee,te;for(ee=W-1;0<=ee;ee--){for($=0;$<Z;$++)Q[$][ee]=0;for(Q[ee][ee]=1,J=ee;J<W;J++)if(0!==G[ee][ee]){for(te=0,$=ee;$<Z;$++)te+=G[$][ee]*Q[$][J];for(te=-te/G[ee][ee],$=ee;$<Z;$++)Q[$][J]+=te*G[$][ee]}}return Q}},R.exports=T},{"../matrix":89,"./util":86}],85:[function(I,R){"use strict";function T(W,Q){if(!(this instanceof T))return new T(W,Q);W=L.checkMatrix(W),Q=Q||{};var $=W.rows,J=W.columns,ee=Math.min($,J),te=!0,ae=!0;!1===Q.computeLeftSingularVectors&&(te=!1),!1===Q.computeRightSingularVectors&&(ae=!1);var ie=!0===Q.autoTranspose,ne=!1,le;if(!($<J))le=W.clone();else if(!ie)le=W.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{le=W.transpose(),$=le.rows,J=le.columns,ne=!0;var oe=te;te=ae,ae=oe}var se=Array(Math.min($+1,J)),de=Z($,ee,0),he=Z(J,J,0),ue=Array(J),ce=Array($),ge=Math.min($-1,J),pe=Math.max(0,Math.min(J-2,$)),fe,_e,be,ye,xe,ke,we,ve,Me,je,Pe,De,Ie,Se,Ce,Ae,Re,Be,ze,Te,Le;for(be=0,je=Math.max(ge,pe);be<je;be++){if(be<ge){for(se[be]=0,fe=be;fe<$;fe++)se[be]=G(se[be],le[fe][be]);if(0!==se[be]){for(0>le[be][be]&&(se[be]=-se[be]),fe=be;fe<$;fe++)le[fe][be]/=se[be];le[be][be]+=1}se[be]=-se[be]}for(_e=be+1;_e<J;_e++){if(be<ge&&0!==se[be]){for(xe=0,fe=be;fe<$;fe++)xe+=le[fe][be]*le[fe][_e];for(xe=-xe/le[be][be],fe=be;fe<$;fe++)le[fe][_e]+=xe*le[fe][be]}ue[_e]=le[be][_e]}if(te&&be<ge)for(fe=be;fe<$;fe++)de[fe][be]=le[fe][be];if(be<pe){for(ue[be]=0,fe=be+1;fe<J;fe++)ue[be]=G(ue[be],ue[fe]);if(0!==ue[be]){for(0>ue[be+1]&&(ue[be]=-ue[be]),fe=be+1;fe<J;fe++)ue[fe]/=ue[be];ue[be+1]+=1}if(ue[be]=-ue[be],be+1<$&&0!==ue[be]){for(fe=be+1;fe<$;fe++)ce[fe]=0;for(_e=be+1;_e<J;_e++)for(fe=be+1;fe<$;fe++)ce[fe]+=ue[_e]*le[fe][_e];for(_e=be+1;_e<J;_e++)for(xe=-ue[_e]/ue[be+1],fe=be+1;fe<$;fe++)le[fe][_e]+=xe*ce[fe]}if(ae)for(fe=be+1;fe<J;fe++)he[fe][be]=ue[fe]}}if(ye=Math.min(J,$+1),ge<J&&(se[ge]=le[ge][ge]),$<ye&&(se[ye-1]=0),pe+1<ye&&(ue[pe]=le[pe][ye-1]),ue[ye-1]=0,te){for(_e=ge;_e<ee;_e++){for(fe=0;fe<$;fe++)de[fe][_e]=0;de[_e][_e]=1}for(be=ge-1;0<=be;be--)if(0!==se[be]){for(_e=be+1;_e<ee;_e++){for(xe=0,fe=be;fe<$;fe++)xe+=de[fe][be]*de[fe][_e];for(xe=-xe/de[be][be],fe=be;fe<$;fe++)de[fe][_e]+=xe*de[fe][be]}for(fe=be;fe<$;fe++)de[fe][be]=-de[fe][be];for(de[be][be]=1+de[be][be],fe=0;fe<be-1;fe++)de[fe][be]=0}else{for(fe=0;fe<$;fe++)de[fe][be]=0;de[be][be]=1}}if(ae)for(be=J-1;0<=be;be--){if(be<pe&&0!==ue[be])for(_e=be+1;_e<J;_e++){for(xe=0,fe=be+1;fe<J;fe++)xe+=he[fe][be]*he[fe][_e];for(xe=-xe/he[be+1][be],fe=be+1;fe<J;fe++)he[fe][_e]+=xe*he[fe][be]}for(fe=0;fe<J;fe++)he[fe][be]=0;he[be][be]=1}for(var Ee=ye-1,Ve=0,Fe=Math.pow(2,-52);0<ye;){for(be=ye-2;-1<=be&&-1!==be;be--)if(Math.abs(ue[be])<=Fe*(Math.abs(se[be])+Math.abs(se[be+1]))){ue[be]=0;break}if(be===ye-2)Pe=4;else{for(ke=ye-1;ke>=be&&ke!==be;ke--)if(xe=(ke===ye?0:Math.abs(ue[ke]))+(ke===be+1?0:Math.abs(ue[ke-1])),Math.abs(se[ke])<=Fe*xe){se[ke]=0;break}ke===be?Pe=3:ke===ye-1?Pe=1:(Pe=2,be=ke)}switch(be++,Pe){case 1:{for(we=ue[ye-2],ue[ye-2]=0,_e=ye-2;_e>=be;_e--)if(xe=G(se[_e],we),ve=se[_e]/xe,Me=we/xe,se[_e]=xe,_e!==be&&(we=-Me*ue[_e-1],ue[_e-1]=ve*ue[_e-1]),ae)for(fe=0;fe<J;fe++)xe=ve*he[fe][_e]+Me*he[fe][ye-1],he[fe][ye-1]=-Me*he[fe][_e]+ve*he[fe][ye-1],he[fe][_e]=xe;break}case 2:{for(we=ue[be-1],ue[be-1]=0,_e=be;_e<ye;_e++)if(xe=G(se[_e],we),ve=se[_e]/xe,Me=we/xe,se[_e]=xe,we=-Me*ue[_e],ue[_e]=ve*ue[_e],te)for(fe=0;fe<$;fe++)xe=ve*de[fe][_e]+Me*de[fe][be-1],de[fe][be-1]=-Me*de[fe][_e]+ve*de[fe][be-1],de[fe][_e]=xe;break}case 3:{for(De=Math.max(Math.max(Math.max(Math.max(Math.abs(se[ye-1]),Math.abs(se[ye-2])),Math.abs(ue[ye-2])),Math.abs(se[be])),Math.abs(ue[be])),Ie=se[ye-1]/De,Se=se[ye-2]/De,Ce=ue[ye-2]/De,Ae=se[be]/De,Re=ue[be]/De,Be=((Se+Ie)*(Se-Ie)+Ce*Ce)/2,ze=Ie*Ce*(Ie*Ce),Te=0,(0!==Be||0!==ze)&&(Te=Math.sqrt(Be*Be+ze),0>Be&&(Te=-Te),Te=ze/(Be+Te)),we=(Ae+Ie)*(Ae-Ie)+Te,Le=Ae*Re,_e=be;_e<ye-1;_e++){if(xe=G(we,Le),ve=we/xe,Me=Le/xe,_e!==be&&(ue[_e-1]=xe),we=ve*se[_e]+Me*ue[_e],ue[_e]=ve*ue[_e]-Me*se[_e],Le=Me*se[_e+1],se[_e+1]=ve*se[_e+1],ae)for(fe=0;fe<J;fe++)xe=ve*he[fe][_e]+Me*he[fe][_e+1],he[fe][_e+1]=-Me*he[fe][_e]+ve*he[fe][_e+1],he[fe][_e]=xe;if(xe=G(we,Le),ve=we/xe,Me=Le/xe,se[_e]=xe,we=ve*ue[_e]+Me*se[_e+1],se[_e+1]=-Me*ue[_e]+ve*se[_e+1],Le=Me*ue[_e+1],ue[_e+1]=ve*ue[_e+1],te&&_e<$-1)for(fe=0;fe<$;fe++)xe=ve*de[fe][_e]+Me*de[fe][_e+1],de[fe][_e+1]=-Me*de[fe][_e]+ve*de[fe][_e+1],de[fe][_e]=xe}ue[ye-2]=we,Ve=Ve+1;break}case 4:{if(0>=se[be]&&(se[be]=0>se[be]?-se[be]:0,ae))for(fe=0;fe<=Ee;fe++)he[fe][be]=-he[fe][be];for(;be<Ee&&!(se[be]>=se[be+1]);){if(xe=se[be],se[be]=se[be+1],se[be+1]=xe,ae&&be<J-1)for(fe=0;fe<J;fe++)xe=he[fe][be+1],he[fe][be+1]=he[fe][be],he[fe][be]=xe;if(te&&be<$-1)for(fe=0;fe<$;fe++)xe=de[fe][be+1],de[fe][be+1]=de[fe][be],de[fe][be]=xe;be++}Ve=0,ye--;break}}}if(ne){var Ye=he;he=de,de=Ye}this.m=$,this.n=J,this.s=se,this.U=de,this.V=he}var L=I("../matrix"),E=I("./util"),G=E.hypotenuse,Z=E.getFilled2DArray;T.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){var W=Math.pow(2,-52),Q=Math.max(this.m,this.n)*this.s[0]*W,$=0,J=this.s;for(var ee=0,te=J.length;ee<te;ee++)J[ee]>Q&&$++;return $},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return L.isMatrix(this.U)||(this.U=new L(this.U)),this.U},get rightSingularVectors(){return L.isMatrix(this.V)||(this.V=new L(this.V)),this.V},get diagonalMatrix(){return L.diag(this.s)},solve:function(Q){var $=this.threshold,J=this.s.length,ee=L.zeros(J,J),te;for(te=0;te<J;te++)ee[te][te]=Math.abs(this.s[te])<=$?0:1/this.s[te];var ae=this.U,ie=this.rightSingularVectors,ne=ie.mmul(ee),le=ie.rows,oe=ae.length,se=L.zeros(le,oe),de,he,ue;for(te=0;te<le;te++)for(de=0;de<oe;de++){for(ue=0,he=0;he<J;he++)ue+=ne[te][he]*ae[de][he];se[te][de]=ue}return se.mmul(Q)},solveForDiagonal:function(Q){return this.solve(L.diag(Q))},inverse:function(){var Q=this.V,$=this.threshold,J=Q.length,ee=Q[0].length,te=new L(J,this.s.length),ae,ie;for(ae=0;ae<J;ae++)for(ie=0;ie<ee;ie++)te[ae][ie]=Math.abs(this.s[ie])>$?Q[ae][ie]/this.s[ie]:0;var ne=this.U,le=ne.length,oe=ne[0].length,se=new L(J,le),de,he;for(ae=0;ae<J;ae++)for(ie=0;ie<le;ie++){for(he=0,de=0;de<oe;de++)he+=te[ae][de]*ne[ie][de];se[ae][ie]=he}return se}},R.exports=T},{"../matrix":89,"./util":86}],86:[function(I,R,T){"use strict";T.hypotenuse=function(E,G){if(Math.abs(E)>Math.abs(G)){var Z=G/E;return Math.abs(E)*Math.sqrt(1+Z*Z)}if(0!==G){var Z=E/G;return Math.abs(G)*Math.sqrt(1+Z*Z)}return 0},T.getEmpty2DArray=function(L,E){var G=Array(L);for(var Z=0;Z<L;Z++)G[Z]=Array(E);return G},T.getFilled2DArray=function(L,E,G){var Z=Array(L);for(var W=0;W<L;W++){Z[W]=Array(E);for(var Q=0;Q<E;Q++)Z[W][Q]=G}return Z}},{}],87:[function(I,R){"use strict";function T(J){return J=E.checkMatrix(J),L(J,E.eye(J.rows))}function L(J,ee){return J=E.checkMatrix(J),ee=E.checkMatrix(ee),J.isSquare()?new W(J).solve(ee):new Q(J).solve(ee)}var E=I("./matrix"),G=I("./dc/svd"),Z=I("./dc/evd"),W=I("./dc/lu"),Q=I("./dc/qr"),$=I("./dc/cholesky");E.inverse=E.inv=T,E.prototype.inverse=E.prototype.inv=function(){return T(this)},E.solve=L,E.prototype.solve=function(J){return L(this,J)},R.exports={SingularValueDecomposition:G,SVD:G,EigenvalueDecomposition:Z,EVD:Z,LuDecomposition:W,LU:W,QrDecomposition:Q,QR:Q,CholeskyDecomposition:$,CHO:$,inverse:T,solve:L}},{"./dc/cholesky":81,"./dc/evd":82,"./dc/lu":83,"./dc/qr":84,"./dc/svd":85,"./matrix":89}],88:[function(I,R){"use strict";R.exports=I("./matrix"),R.exports.Decompositions=R.exports.DC=I("./decompositions")},{"./decompositions":87,"./matrix":89}],89:[function(I,R){"use strict";I("./symbol-species");var T=I("./abstractMatrix"),L=I("./util");class E extends T(Array){constructor(G,Z){if(1===arguments.length&&"number"==typeof G)return Array(G);if(E.isMatrix(G))return G.clone();if(Number.isInteger(G)&&0<G){if(super(G),Number.isInteger(Z)&&0<Z)for(var W=0;W<G;W++)this[W]=Array(Z);else throw new TypeError("nColumns must be a positive integer");}else if(Array.isArray(G)){var Q=G;if(G=Q.length,Z=Q[0].length,"number"!=typeof Z||0===Z)throw new TypeError("Data must be a 2D array with at least one element");super(G);for(var W=0;W<G;W++){if(Q[W].length!==Z)throw new RangeError("Inconsistent array dimensions");this[W]=[].concat(Q[W])}}else throw new TypeError("First argument must be a positive number or an array");this.rows=G,this.columns=Z}set(G,Z,W){return this[G][Z]=W,this}get(G,Z){return this[G][Z]}clone(){var G=new this.constructor[Symbol.species](this.rows,this.columns);for(var Z=0;Z<this.rows;Z++)for(var W=0;W<this.columns;W++)G.set(Z,W,this.get(Z,W));return G}removeRow(G){if(L.checkRowIndex(this,G),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(G,1),this.rows-=1,this}addRow(G,Z){return void 0===Z&&(Z=G,G=this.rows),L.checkRowIndex(this,G,!0),Z=L.checkRowVector(this,Z,!0),this.splice(G,0,Z),this.rows+=1,this}removeColumn(G){if(L.checkColumnIndex(this,G),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var Z=0;Z<this.rows;Z++)this[Z].splice(G,1);return this.columns-=1,this}addColumn(G,Z){"undefined"==typeof Z&&(Z=G,G=this.columns),L.checkColumnIndex(this,G,!0),Z=L.checkColumnVector(this,Z);for(var W=0;W<this.rows;W++)this[W].splice(G,0,Z[W]);return this.columns+=1,this}}R.exports=E,E.abstractMatrix=T},{"./abstractMatrix":80,"./symbol-species":90,"./util":91}],90:[function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},{}],91:[function(I,R,T){"use strict";T.checkRowIndex=function(E,G,Z){var W=Z?E.rows:E.rows-1;if(0>G||G>W)throw new RangeError("Row index out of range")},T.checkColumnIndex=function(E,G,Z){var W=Z?E.columns:E.columns-1;if(0>G||G>W)throw new RangeError("Column index out of range")},T.checkRowVector=function(E,G){if(G.to1DArray&&(G=G.to1DArray()),G.length!==E.columns)throw new RangeError("vector size must be the same as the number of columns");return G},T.checkColumnVector=function(E,G){if(G.to1DArray&&(G=G.to1DArray()),G.length!==E.rows)throw new RangeError("vector size must be the same as the number of rows");return G},T.checkIndices=function(E,G,Z){var W=G.some($=>{return 0>$||$>=E.rows}),Q=Z.some($=>{return 0>$||$>=E.columns});if(W||Q)throw new RangeError("Indices are out of range");if("object"!=typeof G||"object"!=typeof Z)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(G)||(G=Array.from(G)),Array.isArray(Z)||(G=Array.from(Z)),{row:G,column:Z}},T.checkRange=function(E,G,Z,W,Q){if(5!==arguments.length)throw new TypeError("Invalid argument type");var $=Array.from(arguments).slice(1).some(function(J){return"number"!=typeof J});if($)throw new TypeError("Invalid argument type");if(G>Z||W>Q||0>G||G>=E.rows||0>Z||Z>=E.rows||0>W||W>=E.columns||0>Q||Q>=E.columns)throw new RangeError("Submatrix indices are out of range")},T.getRange=function(E,G){var Z=Array(G-E+1);for(var W=0;W<Z.length;W++)Z[W]=E+W;return Z}},{}],92:[function(I,R){"use strict";var T=I("../abstractMatrix"),L;class E extends T(){constructor(G,Z,W){super(),this.matrix=G,this.rows=Z,this.columns=W}static get[Symbol.species](){return L||(L=I("../matrix")),L}}R.exports=E},{"../abstractMatrix":80,"../matrix":89}],93:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E,G){super(E,E.rows,1),this.column=G}set(E,G,Z){return this.matrix.set(E,this.column,Z),this}get(E){return this.matrix.get(E,this.column)}}},{"./base":92}],94:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E){super(E,E.rows,E.columns)}set(E,G,Z){return this.matrix.set(E,this.columns-G-1,Z),this}get(E,G){return this.matrix.get(E,this.columns-G-1)}}},{"./base":92}],95:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E){super(E,E.rows,E.columns)}set(E,G,Z){return this.matrix.set(this.rows-E-1,G,Z),this}get(E,G){return this.matrix.get(this.rows-E-1,G)}}},{"./base":92}],96:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E,G){super(E,1,E.columns),this.row=G}set(E,G,Z){return this.matrix.set(this.row,G,Z),this}get(E,G){return this.matrix.get(this.row,G)}}},{"./base":92}],97:[function(I,R){"use strict";var T=I("./base"),L=I("../util");R.exports=class extends T{constructor(G,Z,W){var Q=L.checkIndices(G,Z,W);super(G,Q.row.length,Q.column.length),this.rowIndices=Q.row,this.columnIndices=Q.column}set(G,Z,W){return this.matrix.set(this.rowIndices[G],this.columnIndices[Z],W),this}get(G,Z){return this.matrix.get(this.rowIndices[G],this.columnIndices[Z])}}},{"../util":91,"./base":92}],98:[function(I,R){"use strict";var T=I("./base"),L=I("../util");R.exports=class extends T{constructor(G,Z,W,Q,$){L.checkRange(G,Z,W,Q,$),super(G,W-Z+1,$-Q+1),this.startRow=Z,this.startColumn=Q}set(G,Z,W){return this.matrix.set(this.startRow+G,this.startColumn+Z,W),this}get(G,Z){return this.matrix.get(this.startRow+G,this.startColumn+Z)}}},{"../util":91,"./base":92}],99:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E){super(E,E.columns,E.rows)}set(E,G,Z){return this.matrix.set(G,E,Z),this}get(E,G){return this.matrix.get(G,E)}}},{"./base":92}],100:[function(I,R,T){"use strict";T.SimpleLinearRegression=T.SLR=I("./regression/simple-linear-regression"),T.NonLinearRegression=T.NLR={PolynomialRegression:I("./regression/polynomial-regression"),PotentialRegression:I("./regression/potential-regression"),ExpRegression:I("./regression/exp-regression"),PowerRegression:I("./regression/power-regression")},T.KernelRidgeRegression=T.KRR=I("./regression/kernel-ridge-regression"),T.PolinomialFitting2D=I("./regression/poly-fit-regression2d"),T.TheilSenRegression=I("./regression/theil-sen-regression")},{"./regression/exp-regression":102,"./regression/kernel-ridge-regression":103,"./regression/poly-fit-regression2d":104,"./regression/polynomial-regression":105,"./regression/potential-regression":106,"./regression/power-regression":107,"./regression/simple-linear-regression":108,"./regression/theil-sen-regression":109}],101:[function(I,R){"use strict";R.exports=class{predict(L){var E;if(Array.isArray(L)){E=Array(L.length);for(var G=0;G<L.length;G++)E[G]=this._predict(L[G])}else if(Number.isFinite(L))E=this._predict(L);else throw new TypeError("x must be a number or array");return E}_predict(){throw new Error("_compute not implemented")}train(){}toString(){return""}toLaTeX(){return""}modelQuality(L,E){var G=L.length,Z=Array(G);for(var W=0;W<G;W++)Z[W]=this._predict(L[W]);var Q=0,$=0,J=0,ee=0,te=0,ae=0,ie=0;for(var ne=0;ne<G;ne++)Q+=Z[ne],$+=E[ne],te+=Z[ne]*Z[ne],ae+=E[ne]*E[ne],ie+=Z[ne]*E[ne],0!==E[ne]&&(J+=(E[ne]-Z[ne])*(E[ne]-Z[ne])/E[ne]),ee=(E[ne]-Z[ne])*(E[ne]-Z[ne]);var le=(G*ie-Q*$)/Math.sqrt((G*te-Q*Q)*(G*ae-$*$));return{r:le,r2:le*le,chi2:J,rmsd:ee*ee/G}}}},{}],102:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./simple-linear-regression"),E=I("./base-regression");class G extends E{constructor(Z,W,Q){if(super(),!0===Z)this.A=W.A,this.C=W.C,W.quality&&(this.quality=W.quality);else{var $=Z.length;if($!==W.length)throw new RangeError("input and output array have a different length");var J=Array($);for(var ee=0;ee<$;ee++)J[ee]=Math.log(W[ee]);var te=new L(Z,J,{computeCoefficient:!1});this.A=te.slope,this.C=Math.exp(te.intercept),(Q||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){return this.C*Math.exp(Z*this.A)}toJSON(){var Z={name:"expRegression",A:this.A,C:this.C};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"f(x) = "+T(this.C,Z)+" * exp("+T(this.A,Z)+" * x)"}toLaTeX(Z){return 0<=this.A?"f(x) = "+T(this.C,Z)+"e^{"+T(this.A,Z)+"x}":"f(x) = \\frac{"+T(this.C,Z)+"}{e^{"+T(-this.A,Z)+"x}}"}static load(Z){if("expRegression"!==Z.name)throw new TypeError("not a exp regression model");return new G(!0,Z)}}R.exports=G},{"./base-regression":101,"./simple-linear-regression":108,"./util":110}],103:[function(I,R){"use strict";var T=I("ml-matrix"),L=I("ml-kernel"),E=I("./base-regression"),G={lambda:0.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class Z extends E{constructor(W,Q,$){if(super(),!0===W)this.alpha=Q.alpha,this.inputs=Q.inputs,this.kernelType=Q.kernelType,this.kernelOptions=Q.kernelOptions,this.kernel=new L(Q.kernelType,Q.kernelOptions),Q.quality&&(this.quality=Q.quality);else{$=Object.assign({},G,$);var J=new L($.kernelType,$.kernelOptions),ee=J.compute(W),te=W.length;ee.add(T.eye(te,te).mul($.lambda)),this.alpha=ee.solve(Q),this.inputs=W,this.kernelType=$.kernelType,this.kernelOptions=$.kernelOptions,this.kernel=J,$.computeQuality&&(this.quality=this.modelQuality(W,Q))}}_predict(W){return this.kernel.compute([W],this.inputs).mmul(this.alpha)[0]}toJSON(){var W={name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions};return this.quality&&(W.quality=this.quality),W}static load(W){if("kernelRidgeRegression"!==W.name)throw new TypeError("not a KRR model");return new Z(!0,W)}}R.exports=Z},{"./base-regression":101,"ml-kernel":71,"ml-matrix":88}],104:[function(I,R){"use strict";function T($,J){var ee=$.clone();for(var te=0;te<$.rows;++te)ee[te][0]=Math.pow(ee[te][0],J);return ee}function L($,J){this[$][J]=Math.abs(this[$][J])}var E=I("ml-matrix"),G=E.DC.SingularValueDecomposition,Z=I("./base-regression"),W={order:2};class Q extends Z{constructor($,J,ee){super(),!0===$?(this.coefficients=E.columnVector(J.coefficients),this.order=J.order,J.r&&(this.r=J.r,this.r2=J.r2),J.chi2&&(this.chi2=J.chi2)):(ee=Object.assign({},W,ee),this.order=ee.order,this.coefficients=[],this.X=$,this.y=J,this.train(this.X,this.y,ee),ee.computeQuality&&(this.quality=this.modelQuality($,J)))}train($,J){if(E.isMatrix($)||($=new E($)),E.isMatrix(J)||(J=E.columnVector(J)),J.rows!==$.rows&&(J=J.transpose()),2!==$.columns)throw new RangeError("You give X with "+$.columns+" columns and it must be 2");if($.rows!==J.rows)throw new RangeError("X and y must have the same rows");var ee=$.rows,te=(this.order+2)*(this.order+1)/2;this.coefficients=Array(te);var ae=$.getColumnVector(0),ie=$.getColumnVector(1),ne=1/ae.clone().apply(L).max(),le=1/ie.clone().apply(L).max(),oe=1/J.clone().apply(L).max();ae.mulColumn(0,ne),ie.mulColumn(0,le),J.mulColumn(0,oe);var se=new E(ee,te),de=0;for(var he=0;he<=this.order;++he){var ue=this.order-he;for(var ce=0;ce<=ue;++ce){var ge=T(ae,he).mulColumnVector(T(ie,ce));se.setColumn(de,ge),de++}}var pe=new G(se.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),fe=E.rowVector(pe.diagonal);fe=fe.apply(function(xe,ke){this[xe][ke]=1e-15<=this[xe][ke]?1/this[xe][ke]:0});var _e=E.zeros(ee,te);for(he=0;he<te;++he)_e[he][he]=fe[0][he];fe=_e;var be=pe.rightSingularVectors,ye=pe.leftSingularVectors;for(this.coefficients=ye.mmul(fe.transpose()).mmul(be.transpose()).mmul(J),de=0,he=0;he<=te;++he)for(ue=this.order-he,ce=0;ce<=ue;++ce)this.coefficients[de][0]=this.coefficients[de][0]*Math.pow(ne,he)*Math.pow(le,ce)/oe,de++}_predict($){var J=$[0],ee=$[1],te=0,ae=0;for(var ie=0;ie<=this.order;ie++)for(var ne=0;ne<=this.order-ie;ne++)te+=Math.pow(J,ie)*Math.pow(ee,ne)*this.coefficients[ae][0],ae++;return te}toJSON(){var $={name:"polyfit2D",order:this.order,coefficients:this.coefficients};return this.quality&&($.quality=this.quality),$}static load($){if("polyfit2D"!==$.name)throw new TypeError("not a polyfit2D model");return new Q(!0,$)}}R.exports=Q},{"./base-regression":101,"ml-matrix":88}],105:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./base-regression"),E=I("ml-matrix");class G extends L{constructor(Z,W,Q,$){if(super(),!0===Z)this.coefficients=W.coefficients,this.powers=W.powers,this.M=W.M,W.quality&&(this.quality=W.quality);else{var J=Z.length;if(J!==W.length)throw new RangeError("input and output array have a different length");var ee=void 0;if(Array.isArray(Q))ee=Q,Q=ee.length;else for(Q++,ee=Array(Q),ie=0;ie<Q;ie++)ee[ie]=ie;var te=new E(J,Q),ae=new E([W]),ie,ne;for(ie=0;ie<Q;ie++)for(ne=0;ne<J;ne++)te[ne][ie]=0===ee[ie]?1:Math.pow(Z[ne],ee[ie]);var le=te.transposeView(),oe=le.mmul(te),se=le.mmul(ae.transposeView());this.coefficients=oe.solve(se).to1DArray(),this.powers=ee,this.M=Q-1,($||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){var W=0;for(var Q=0;Q<this.powers.length;Q++)W+=this.coefficients[Q]*Math.pow(Z,this.powers[Q]);return W}toJSON(){var Z={name:"polynomialRegression",coefficients:this.coefficients,powers:this.powers,M:this.M};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return this._toFormula(Z,!1)}toLaTeX(Z){return this._toFormula(Z,!0)}_toFormula(Z,W){var Q="^",$="",J=" * ";W&&(Q="^{",$="}",J="");var ee="",te;for(var ae=0;ae<this.coefficients.length;ae++)te="",0!==this.coefficients[ae]&&(te=0===this.powers[ae]?T(this.coefficients[ae],Z):1===this.powers[ae]?T(this.coefficients[ae],Z)+J+"x":T(this.coefficients[ae],Z)+J+"x"+Q+this.powers[ae]+$,0<this.coefficients[ae]&&ae!==this.coefficients.length-1?te=" + "+te:ae!==this.coefficients.length-1&&(te=" "+te)),ee=te+ee;return" + "===ee.charAt(0)&&(ee=ee.slice(1)),"f(x) = "+ee}static load(Z){if("polynomialRegression"!==Z.name)throw new TypeError("not a polynomial regression model");return new G(!0,Z)}}R.exports=G},{"./base-regression":101,"./util":110,"ml-matrix":88}],106:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./polynomial-regression"),E=I("./base-regression");class G extends E{constructor(Z,W,Q,$){if(super(),!0===Z)this.A=W.A,this.M=W.M,W.quality&&(this.quality=W.quality);else{var J=Z.length;if(J!==W.length)throw new RangeError("input and output array have a different length");var ee=new L(Z,W,[Q],{computeCoefficient:!0});this.A=ee.coefficients[0],this.M=Q,($||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){return this.A*Math.pow(Z,this.M)}toJSON(){var Z={name:"potentialRegression",A:this.A,M:this.M};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"f(x) = "+T(this.A,Z)+" * x^"+this.M}toLaTeX(Z){return 0<=this.M?"f(x) = "+T(this.A,Z)+"x^{"+this.M+"}":"f(x) = \\frac{"+T(this.A,Z)+"}{x^{"+-this.M+"}}"}static load(Z){if("potentialRegression"!==Z.name)throw new TypeError("not a potential regression model");return new G(!0,Z)}}R.exports=G},{"./base-regression":101,"./polynomial-regression":105,"./util":110}],107:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./simple-linear-regression"),E=I("./base-regression");class G extends E{constructor(Z,W,Q){if(super(),!0===Z)this.A=W.A,this.B=W.B,this.quality=W.quality||{},W.quality.r&&(this.quality.r=W.quality.r,this.quality.r2=W.quality.r2),W.quality.chi2&&(this.quality.chi2=W.quality.chi2);else{var $=Z.length;if($!==W.length)throw new RangeError("input and output array have a different length");var J=Array($),ee=Array($);for(var te=0;te<$;te++)J[te]=Math.log(Z[te]),ee[te]=Math.log(W[te]);var ae=new L(J,ee,{computeCoefficient:!1});this.A=Math.exp(ae.intercept),this.B=ae.slope,(Q||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){return this.A*Math.pow(Z,this.B)}toJSON(){var Z={name:"powerRegression",A:this.A,B:this.B};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"f(x) = "+T(this.A,Z)+" * x^"+T(this.B,Z)}toLaTeX(Z){return 0<=this.B?"f(x) = "+T(this.A,Z)+"x^{"+T(this.B,Z)+"}":"f(x) = \\frac{"+T(this.A,Z)+"}{x^{"+T(-this.B,Z)+"}}"}static load(Z){if("powerRegression"!==Z.name)throw new TypeError("not a power regression model");return new G(!0,Z)}}R.exports=G},{"./base-regression":101,"./simple-linear-regression":108,"./util":110}],108:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./base-regression");class E extends L{constructor(G,Z,W){if(W=W||{},super(),!0===G)this.slope=Z.slope,this.intercept=Z.intercept,this.quality=Z.quality||{},Z.quality.r&&(this.quality.r=Z.quality.r,this.quality.r2=Z.quality.r2),Z.quality.chi2&&(this.quality.chi2=Z.quality.chi2);else{var Q=G.length;if(Q!==Z.length)throw new RangeError("input and output array have a different length");var $=0,J=0,ee=0,te=0;for(var ae=0;ae<Q;ae++)$+=G[ae],J+=Z[ae],ee+=G[ae]*G[ae],te+=G[ae]*Z[ae];var ie=Q*te-$*J;this.slope=ie/(Q*ee-$*$),this.intercept=1/Q*J-this.slope*(1/Q)*$,this.coefficients=[this.intercept,this.slope],W.computeQuality&&(this.quality=this.modelQuality(G,Z))}}toJSON(){var G={name:"simpleLinearRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(G.quality=this.quality),G}_predict(G){return this.slope*G+this.intercept}computeX(G){return(G-this.intercept)/this.slope}toString(G){var Z="f(x) = ";if(this.slope){var W=T(this.slope,G);if(Z+=(1e-5>Math.abs(W-1)?"":W+" * ")+"x",this.intercept){var Q=Math.abs(this.intercept),$=Q===this.intercept?"+":"-";Z+=" "+$+" "+T(Q,G)}}else Z+=T(this.intercept,G);return Z}toLaTeX(G){return this.toString(G)}static load(G){if("simpleLinearRegression"!==G.name)throw new TypeError("not a SLR model");return new E(!0,G)}}R.exports=E},{"./base-regression":101,"./util":110}],109:[function(I,R){"use strict";var T=I("./base-regression"),L=I("./util").maybeToPrecision,E=I("ml-stat/array").median;class G extends T{constructor(Z,W,Q){if(Q=Q||{},super(),!0===Z)this.slope=W.slope,this.intercept=W.intercept,this.quality=Object.assign({},W.quality,this.quality);else{var $=Z.length;if($!==W.length)throw new RangeError("Input and output array have a different length");var J=Array($*$),ee=0;for(var te=0;te<$;++te)for(var ae=te+1;ae<$;++ae)Z[te]!==Z[ae]&&(J[ee++]=(W[ae]-W[te])/(Z[ae]-Z[te]));J.length=ee;var ie=E(J),ne=Array($);for(var le=0;le<$;++le)ne[le]=W[le]-ie*Z[le];this.slope=ie,this.intercept=E(ne),this.coefficients=[this.intercept,this.slope],Q.computeQuality&&(this.quality=this.modelQuality(Z,W))}}toJSON(){var Z={name:"TheilSenRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(Z.quality=this.quality),Z}_predict(Z){return this.slope*Z+this.intercept}computeX(Z){return(Z-this.intercept)/this.slope}toString(Z){var W="f(x) = ";if(this.slope){var Q=L(this.slope,Z);if(W+=(1e-5>Math.abs(Q-1)?"":Q+" * ")+"x",this.intercept){var $=Math.abs(this.intercept),J=$===this.intercept?"+":"-";W+=" "+J+" "+L($,Z)}}else W+=L(this.intercept,Z);return W}toLaTeX(Z){return this.toString(Z)}static load(Z){if("TheilSenRegression"!==Z.name)throw new TypeError("not a Theil-Sen model");return new G(!0,Z)}}R.exports=G},{"./base-regression":101,"./util":110,"ml-stat/array":111}],110:[function(I,R,T){"use strict";T.maybeToPrecision=function(E,G){return 0>E?(E=-1*E,G)?"- "+E.toPrecision(G):"- "+E.toString():G?E.toPrecision(G):E.toString()}},{}],111:[function(I,R,T){"use strict";function L(E,G){return E-G}T.sum=function(G){var E=0;for(var Z=0;Z<G.length;Z++)E+=G[Z];return E},T.max=function(G){var E=G[0],Z=G.length;for(var W=1;W<Z;W++)G[W]>E&&(E=G[W]);return E},T.min=function(G){var E=G[0],Z=G.length;for(var W=1;W<Z;W++)G[W]<E&&(E=G[W]);return E},T.minMax=function(G){var Z=G[0],W=G[0],Q=G.length;for(var $=1;$<Q;$++)G[$]<Z&&(Z=G[$]),G[$]>W&&(W=G[$]);return{min:Z,max:W}},T.arithmeticMean=function(G){var Z=0,W=G.length;for(var Q=0;Q<W;Q++)Z+=G[Q];return Z/W},T.mean=T.arithmeticMean,T.geometricMean=function(G){var Z=1,W=G.length;for(var Q=0;Q<W;Q++)Z*=G[Q];return Math.pow(Z,1/W)},T.logMean=function(G){var Z=0,W=G.length;for(var Q=0;Q<W;Q++)Z+=Math.log(G[Q]);return Z/W},T.grandMean=function(G,Z){var W=0,Q=0,$=G.length;for(var J=0;J<$;J++)W+=Z[J]*G[J],Q+=Z[J];return W/Q},T.truncatedMean=function(G,Z,W){W===void 0&&(W=!1),W||(G=[].concat(G).sort(L));var Q=G.length,$=Math.floor(Q*Z),J=0;for(var ee=$;ee<Q-$;ee++)J+=G[ee];return J/(Q-2*$)},T.harmonicMean=function(G){var Z=0,W=G.length;for(var Q=0;Q<W;Q++){if(0===G[Q])throw new RangeError("value at index "+Q+"is zero");Z+=1/G[Q]}return W/Z},T.contraHarmonicMean=function(G){var Z=0,W=0,Q=G.length;for(var $=0;$<Q;$++)Z+=G[$]*G[$],W+=G[$];if(0>W)throw new RangeError("sum of values is negative");return Z/W},T.median=function(G,Z){Z===void 0&&(Z=!1),Z||(G=[].concat(G).sort(L));var W=G.length,Q=Math.floor(W/2);return 0==W%2?0.5*(G[Q-1]+G[Q]):G[Q]},T.variance=function(G,Z){Z===void 0&&(Z=!0);var W=T.mean(G),Q=0,$=G.length;for(var J=0;J<$;J++){var ee=G[J]-W;Q+=ee*ee}return Z?Q/($-1):Q/$},T.standardDeviation=function(G,Z){return Math.sqrt(T.variance(G,Z))},T.standardError=function(G){return T.standardDeviation(G)/Math.sqrt(G.length)},T.robustMeanAndStdev=function(G){var Z=0,W=0,Q=G.length,$=0;for($=0;$<Q;$++)Z+=G[$];Z/=Q;var J=Array(Q);for($=0;$<Q;$++)J[$]=Math.abs(G[$]-Z);return J.sort(L),W=1==Q%2?J[(Q-1)/2]/0.6745:0.5*(J[Q/2]+J[Q/2-1])/0.6745,{mean:Z,stdev:W}},T.quartiles=function(G,Z){"undefined"==typeof Z&&(Z=!1),Z||(G=[].concat(G).sort(L));var W=G.length/4,Q=G[Math.ceil(W)-1],$=T.median(G,!0),J=G[Math.ceil(3*W)-1];return{q1:Q,q2:$,q3:J}},T.pooledStandardDeviation=function(G,Z){return Math.sqrt(T.pooledVariance(G,Z))},T.pooledVariance=function(G,Z){"undefined"==typeof Z&&(Z=!0);var W=0,Q=0,$=G.length;for(var J=0;J<$;J++){var ee=G[J],te=T.variance(ee);W+=(ee.length-1)*te,Q+=Z?ee.length-1:ee.length}return W/Q},T.mode=function(G){var Z=G.length,W=Array(Z),Q;for(Q=0;Q<Z;Q++)W[Q]=0;var $=Array(Z),J=0;for(Q=0;Q<Z;Q++){var ee=$.indexOf(G[Q]);0<=ee?W[ee]++:($[J]=G[Q],W[J]=1,J++)}var te=0,ae=0;for(Q=0;Q<J;Q++)W[Q]>te&&(te=W[Q],ae=Q);return $[ae]},T.covariance=function(G,Z,W){"undefined"==typeof W&&(W=!0);var Q=T.mean(G),$=T.mean(Z);if(G.length!==Z.length)throw"Vectors do not have the same dimensions";var J=0,ee=G.length;for(var te=0;te<ee;te++){var ae=G[te]-Q,ie=Z[te]-$;J+=ae*ie}return W?J/(ee-1):J/ee},T.skewness=function(G,Z){"undefined"==typeof Z&&(Z=!0);var W=T.mean(G),Q=0,$=0,J=G.length;for(var ee=0;ee<J;ee++){var te=G[ee]-W;Q+=te*te,$+=te*te*te}var ae=Q/J,ie=$/J,ne=ie/Math.pow(ae,3/2);if(Z){var le=Math.sqrt(J*(J-1));return le/(J-2)*ne}return ne},T.kurtosis=function(G,Z){"undefined"==typeof Z&&(Z=!0);var W=T.mean(G),Q=G.length,$=0,J=0;for(var ee=0;ee<Q;ee++){var te=G[ee]-W;$+=te*te,J+=te*te*te*te}var ae=$/Q,ie=J/Q;if(Z){var ne=$/(Q-1),le=J/(ne*ne);return Q*(Q+1)/((Q-1)*(Q-2)*(Q-3))*le-3*((Q-1)*(Q-1)/((Q-2)*(Q-3)))}return ie/(ae*ae)-3},T.entropy=function(G,Z){"undefined"==typeof Z&&(Z=0);var W=0,Q=G.length;for(var $=0;$<Q;$++)W+=G[$]*Math.log(G[$]+Z);return-W},T.weightedMean=function(G,Z){var W=0,Q=G.length;for(var $=0;$<Q;$++)W+=G[$]*Z[$];return W},T.weightedStandardDeviation=function(G,Z){return Math.sqrt(T.weightedVariance(G,Z))},T.weightedVariance=function(G,Z){var W=T.weightedMean(G,Z),Q=0,$=G.length,J=0,ee=0;for(var te=0;te<$;te++){var ae=G[te]-W,ie=Z[te];Q+=ie*(ae*ae),ee+=ie,J+=ie*ie}return Q*(ee/(ee*ee-J))},T.center=function(G,Z){"undefined"==typeof Z&&(Z=!1);var W=G;Z||(W=[].concat(G));var Q=T.mean(W),$=W.length;for(var J=0;J<$;J++)W[J]-=Q},T.standardize=function(G,Z,W){"undefined"==typeof Z&&(Z=T.standardDeviation(G)),"undefined"==typeof W&&(W=!1);var Q=G.length,$=W?G:Array(Q);for(var J=0;J<Q;J++)$[J]=G[J]/Z;return $},T.cumulativeSum=function(G){var Z=G.length,W=Array(Z);W[0]=G[0];for(var Q=1;Q<Z;Q++)W[Q]=W[Q-1]+G[Q];return W}},{}],112:[function(I,R,T){"use strict";T.array=I("./array"),T.matrix=I("./matrix")},{"./array":111,"./matrix":113}],113:[function(I,R,T){"use strict";function L(G,Z){return G-Z}var E=I("./array");T.max=function(Z){var G=-(1/0);for(var W=0;W<Z.length;W++)for(var Q=0;Q<Z[W].length;Q++)Z[W][Q]>G&&(G=Z[W][Q]);return G},T.min=function(Z){var G=1/0;for(var W=0;W<Z.length;W++)for(var Q=0;Q<Z[W].length;Q++)Z[W][Q]<G&&(G=Z[W][Q]);return G},T.minMax=function(Z){var W=1/0,Q=-(1/0);for(var $=0;$<Z.length;$++)for(var J=0;J<Z[$].length;J++)Z[$][J]<W&&(W=Z[$][J]),Z[$][J]>Q&&(Q=Z[$][J]);return{min:W,max:Q}},T.entropy=function(Z,W){"undefined"==typeof W&&(W=0);var Q=0,$=Z.length,J=Z[0].length;for(var ee=0;ee<$;ee++)for(var te=0;te<J;te++)Q+=Z[ee][te]*Math.log(Z[ee][te]+W);return-Q},T.mean=function(Z,W){"undefined"==typeof W&&(W=0);var Q=Z.length,$=Z[0].length,J,ee,te,ae;if(-1===W){for(J=[0],ee=Q*$,te=0;te<Q;te++)for(ae=0;ae<$;ae++)J[0]+=Z[te][ae];J[0]/=ee}else if(0===W)for(J=Array($),ee=Q,ae=0;ae<$;ae++){for(J[ae]=0,te=0;te<Q;te++)J[ae]+=Z[te][ae];J[ae]/=ee}else if(1===W)for(J=Array(Q),ee=$,ae=0;ae<Q;ae++){for(J[ae]=0,te=0;te<$;te++)J[ae]+=Z[ae][te];J[ae]/=ee}else throw new Error("Invalid dimension");return J},T.sum=function(Z,W){"undefined"==typeof W&&(W=0);var Q=Z.length,$=Z[0].length,J,ee,te;if(-1===W)for(J=[0],ee=0;ee<Q;ee++)for(te=0;te<$;te++)J[0]+=Z[ee][te];else if(0===W)for(J=Array($),te=0;te<$;te++)for(J[te]=0,ee=0;ee<Q;ee++)J[te]+=Z[ee][te];else if(1===W)for(J=Array(Q),te=0;te<Q;te++)for(J[te]=0,ee=0;ee<$;ee++)J[te]+=Z[te][ee];else throw new Error("Invalid dimension");return J},T.product=function(Z,W){"undefined"==typeof W&&(W=0);var Q=Z.length,$=Z[0].length,J,ee,te;if(-1===W)for(J=[1],ee=0;ee<Q;ee++)for(te=0;te<$;te++)J[0]*=Z[ee][te];else if(0===W)for(J=Array($),te=0;te<$;te++)for(J[te]=1,ee=0;ee<Q;ee++)J[te]*=Z[ee][te];else if(1===W)for(J=Array(Q),te=0;te<Q;te++)for(J[te]=1,ee=0;ee<$;ee++)J[te]*=Z[te][ee];else throw new Error("Invalid dimension");return J},T.standardDeviation=function(Z,W,Q){var $=T.variance(Z,W,Q),J=$.length;for(var ee=0;ee<J;ee++)$[ee]=Math.sqrt($[ee]);return $},T.variance=function(Z,W,Q){"undefined"==typeof Q&&(Q=!0),W=W||T.mean(Z);var $=Z.length;if(0===$)return[];var J=Z[0].length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0,ne=0;for(var le=0;le<$;le++)ne=Z[le][te]-W[te],ae+=ne,ie+=ne*ne;ee[te]=Q?(ie-ae*ae/$)/($-1):(ie-ae*ae/$)/$}return ee},T.median=function(Z){var W=Z.length,Q=Z[0].length,$=Array(Q);for(var J=0;J<Q;J++){var ee=Array(W);for(var te=0;te<W;te++)ee[te]=Z[te][J];ee.sort(L);var ae=ee.length;$[J]=0==ae%2?0.5*(ee[ae/2]+ee[ae/2-1]):ee[Math.floor(ae/2)]}return $},T.mode=function(Z){var W=Z.length,Q=Z[0].length,$=Array(Q),J,ee;for(J=0;J<Q;J++){var te=Array(W);for(var ae=0;ae<W;ae++)te[ae]=0;var ie=Array(W),ne=0;for(ee=0;ee<W;ee++){var le=ie.indexOf(Z[ee][J]);0<=le?te[le]++:(ie[ne]=Z[ee][J],te[ne]=1,ne++)}var oe=0,se=0;for(ee=0;ee<ne;ee++)te[ee]>oe&&(oe=te[ee],se=ee);$[J]=ie[se]}return $},T.skewness=function(Z,W){"undefined"==typeof W&&(W=!0);var Q=T.mean(Z),$=Z.length,J=Q.length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0;for(var ne=0;ne<$;ne++){var le=Z[ne][te]-Q[te];ae+=le*le,ie+=le*le*le}var oe=ae/$,se=ie/$,de=se/Math.pow(oe,3/2);if(W){var he=Math.sqrt($*($-1));ee[te]=he/($-2)*de}else ee[te]=de}return ee},T.kurtosis=function(Z,W){"undefined"==typeof W&&(W=!0);var Q=T.mean(Z),$=Z.length,J=Z[0].length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0;for(var ne=0;ne<$;ne++){var le=Z[ne][te]-Q[te];ae+=le*le,ie+=le*le*le*le}var oe=ae/$,se=ie/$;if(W){var de=ae/($-1),he=ie/(de*de);ee[te]=$*($+1)/(($-1)*($-2)*($-3))*he-3*(($-1)*($-1)/(($-2)*($-3)))}else ee[te]=se/(oe*oe)-3}return ee},T.standardError=function(Z){var W=Z.length,Q=T.standardDeviation(Z),$=Q.length,J=Array($),ee=Math.sqrt(W);for(var te=0;te<$;te++)J[te]=Q[te]/ee;return J},T.covariance=function(Z,W){return T.scatter(Z,void 0,W)},T.scatter=function(Z,W,Q){"undefined"==typeof Q&&(Q=0),"undefined"==typeof W&&(0===Q?W=Z.length-1:1==Q&&(W=Z[0].length-1));var $=T.mean(Z,Q),J=Z.length;if(0===J)return[[]];var ee=Z[0].length,te,ae,ie,ne,le;if(0===Q){for(te=Array(ee),ae=0;ae<ee;ae++)te[ae]=Array(ee);for(ae=0;ae<ee;ae++)for(ie=ae;ie<ee;ie++){for(ne=0,le=0;le<J;le++)ne+=(Z[le][ie]-$[ie])*(Z[le][ae]-$[ae]);ne/=W,te[ae][ie]=ne,te[ie][ae]=ne}}else if(1===Q){for(te=Array(J),ae=0;ae<J;ae++)te[ae]=Array(J);for(ae=0;ae<J;ae++)for(ie=ae;ie<J;ie++){for(ne=0,le=0;le<ee;le++)ne+=(Z[ie][le]-$[ie])*(Z[ae][le]-$[ae]);ne/=W,te[ae][ie]=ne,te[ie][ae]=ne}}else throw new Error("Invalid dimension");return te},T.correlation=function(Z){var W=T.mean(Z),Q=T.standardDeviation(Z,!0,W),$=T.zScores(Z,W,Q),J=Z.length,ee=Z[0].length,te,ae,ie=Array(ee);for(te=0;te<ee;te++)ie[te]=Array(ee);for(te=0;te<ee;te++)for(ae=te;ae<ee;ae++){var ne=0;for(var le=0,oe=$.length;le<oe;le++)ne+=$[le][ae]*$[le][te];ne/=J-1,ie[te][ae]=ne,ie[ae][te]=ne}return ie},T.zScores=function(Z,W,Q){return W=W||T.mean(Z),"undefined"==typeof Q&&(Q=T.standardDeviation(Z,!0,W)),T.standardize(T.center(Z,W,!1),Q,!0)},T.center=function(Z,W,Q){W=W||T.mean(Z);var $=Z,J=Z.length,ee,te,ae;if(!Q)for($=Array(J),ee=0;ee<J;ee++)$[ee]=Array(Z[ee].length);for(ee=0;ee<J;ee++){var ie=$[ee];for(te=0,ae=ie.length;te<ae;te++)ie[te]=Z[ee][te]-W[te]}return $},T.standardize=function(Z,W,Q){"undefined"==typeof W&&(W=T.standardDeviation(Z));var $=Z,J=Z.length,ee,te,ae;if(!Q)for($=Array(J),ee=0;ee<J;ee++)$[ee]=Array(Z[ee].length);for(ee=0;ee<J;ee++){var ie=$[ee],ne=Z[ee];for(te=0,ae=ie.length;te<ae;te++)0===W[te]||isNaN(W[te])||(ie[te]=ne[te]/W[te])}return $},T.weightedVariance=function(Z,W){var Q=T.mean(Z),$=Z.length;if(0===$)return[];var J=Z[0].length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0,ne=0;for(var le=0;le<$;le++){var oe=Z[le][te]-Q[te],se=W[le];ae+=se*(oe*oe),ne+=se,ie+=se*se}ee[te]=ae*(ne/(ne*ne-ie))}return ee},T.weightedMean=function(Z,W,Q){"undefined"==typeof Q&&(Q=0);var $=Z.length;if(0===$)return[];var J=Z[0].length,ee,te,ae,ie,ne,le;if(0===Q){for(ee=Array(J),te=0;te<J;te++)ee[te]=0;for(te=0;te<$;te++)for(le=Z[te],ne=W[te],ie=0;ie<J;ie++)ee[ie]+=le[ie]*ne}else if(1===Q){for(ee=Array($),te=0;te<$;te++)ee[te]=0;for(ie=0;ie<$;ie++)for(le=Z[ie],ne=W[ie],te=0;te<J;te++)ee[ie]+=le[te]*ne}else throw new Error("Invalid dimension");var oe=E.sum(W);if(0!==oe)for(te=0,ae=ee.length;te<ae;te++)ee[te]/=oe;return ee},T.weightedCovariance=function(Z,W,Q,$){$=$||0,Q=Q||T.weightedMean(Z,W,$);var J=0,ee=0;for(var te=0,ae=W.length;te<ae;te++)J+=W[te],ee+=W[te]*W[te];var ie=J/(J*J-ee);return T.weightedScatter(Z,W,Q,ie,$)},T.weightedScatter=function(Z,W,Q,$,J){J=J||0,Q=Q||T.weightedMean(Z,W,J),"undefined"==typeof $&&($=1);var ee=Z.length;if(0===ee)return[[]];var te=Z[0].length,ae,ie,ne,le,oe;if(0===J){for(ae=Array(te),ie=0;ie<te;ie++)ae[ie]=Array(te);for(ie=0;ie<te;ie++)for(ne=ie;ne<te;ne++){for(oe=0,le=0;le<ee;le++)oe+=W[le]*(Z[le][ne]-Q[ne])*(Z[le][ie]-Q[ie]);ae[ie][ne]=oe*$,ae[ne][ie]=oe*$}}else if(1===J){for(ae=Array(ee),ie=0;ie<ee;ie++)ae[ie]=Array(ee);for(ie=0;ie<ee;ie++)for(ne=ie;ne<ee;ne++){for(oe=0,le=0;le<te;le++)oe+=W[le]*(Z[ne][le]-Q[ne])*(Z[ie][le]-Q[ie]);ae[ie][ne]=oe*$,ae[ne][ie]=oe*$}}else throw new Error("Invalid dimension");return ae}},{"./array":111}],114:[function(I,R){"use strict";R.exports="function"==typeof Promise?Promise:I("lie")},{lie:58}],115:[function(I,R){"use strict";R.exports=function(L,E){L=L||0;var G=Array(L);for(var Z=0;Z<L;Z++)G[Z]=E;return G}},{}],116:[function(I,R,T){"use strict";function L(G){if("number"!=typeof G||E(G))throw new TypeError("Expected a number")}var E=I("number-is-nan");T.asc=function(G,Z){return L(G),L(Z),G-Z},T.desc=function(G,Z){return L(G),L(Z),Z-G}},{"number-is-nan":117}],117:[function(I,R){"use strict";R.exports=Number.isNaN||function(T){return T!==T}},{}],118:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty,L=Object.prototype.toString,E=Array.prototype.slice,G=I("./isArguments"),Z=Object.prototype.propertyIsEnumerable,W=!Z.call({toString:null},"toString"),Q=Z.call(function(){},"prototype"),$=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],J=function(le){var oe=le.constructor;return oe&&oe.prototype===le},ee={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},te=function(){if("undefined"==typeof window)return!1;for(var ne in window)try{if(!ee["$"+ne]&&T.call(window,ne)&&null!==window[ne]&&"object"==typeof window[ne])try{J(window[ne])}catch(le){return!0}}catch(le){return!0}return!1}(),ae=function(le){if("undefined"==typeof window||!te)return J(le);try{return J(le)}catch(oe){return!1}},ie=function(le){var oe=null!==le&&"object"==typeof le,se="[object Function]"===L.call(le),de=G(le),he=oe&&"[object String]"===L.call(le),ue=[];if(!oe&&!se&&!de)throw new TypeError("Object.keys called on a non-object");if(he&&0<le.length&&!T.call(le,0))for(var ce=0;ce<le.length;++ce)ue.push(ce+"");if(de&&0<le.length)for(var ge=0;ge<le.length;++ge)ue.push(ge+"");else for(var pe in le)!(Q&&se&&"prototype"===pe)&&T.call(le,pe)&&ue.push(pe+"");if(W){var fe=ae(le);for(var _e=0;_e<$.length;++_e)!(fe&&"constructor"===$[_e])&&T.call(le,$[_e])&&ue.push($[_e])}return ue};ie.shim=function(){if(Object.keys){var le=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!le){var oe=Object.keys;Object.keys=function(de){return G(de)?oe(E.call(de)):oe(de)}}}else Object.keys=ie;return Object.keys||ie},R.exports=ie},{"./isArguments":119}],119:[function(I,R){"use strict";var T=Object.prototype.toString;R.exports=function(E){var G=T.call(E),Z="[object Arguments]"===G;return Z||(Z="[object Array]"!==G&&null!==E&&"object"==typeof E&&"number"==typeof E.length&&0<=E.length&&"[object Function]"===T.call(E.callee)),Z}},{}],120:[function(I,R){"use strict";var T=I("./lib/utils/common").assign,L=I("./lib/deflate"),E=I("./lib/inflate"),G=I("./lib/zlib/constants"),Z={};T(Z,L,E,G),R.exports=Z},{"./lib/deflate":121,"./lib/inflate":122,"./lib/utils/common":123,"./lib/zlib/constants":126}],121:[function(I,R,T){"use strict";function L(ne){if(!(this instanceof L))return new L(ne);this.options=Z.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},ne||{});var le=this.options;le.raw&&0<le.windowBits?le.windowBits=-le.windowBits:le.gzip&&0<le.windowBits&&16>le.windowBits&&(le.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $,this.strm.avail_out=0;var oe=G.deflateInit2(this.strm,le.level,le.method,le.windowBits,le.memLevel,le.strategy);if(oe!==te)throw new Error(Q[oe]);if(le.header&&G.deflateSetHeader(this.strm,le.header),le.dictionary){var se;if(se="string"==typeof le.dictionary?W.string2buf(le.dictionary):"[object ArrayBuffer]"===J.call(le.dictionary)?new Uint8Array(le.dictionary):le.dictionary,oe=G.deflateSetDictionary(this.strm,se),oe!==te)throw new Error(Q[oe]);this._dict_set=!0}}function E(ne,le){var oe=new L(le);if(oe.push(ne,!0),oe.err)throw oe.msg;return oe.result}var G=I("./zlib/deflate"),Z=I("./utils/common"),W=I("./utils/strings"),Q=I("./zlib/messages"),$=I("./zlib/zstream"),J=Object.prototype.toString,ee=4,te=0,ae=1,ie=2;L.prototype.push=function(ne,le){var oe=this.strm,se=this.options.chunkSize,de,he;if(this.ended)return!1;he=le===~~le?le:!0===le?ee:0,oe.input="string"==typeof ne?W.string2buf(ne):"[object ArrayBuffer]"===J.call(ne)?new Uint8Array(ne):ne,oe.next_in=0,oe.avail_in=oe.input.length;do{if(0===oe.avail_out&&(oe.output=new Z.Buf8(se),oe.next_out=0,oe.avail_out=se),de=G.deflate(oe,he),de!==ae&&de!==te)return this.onEnd(de),this.ended=!0,!1;(0===oe.avail_out||0===oe.avail_in&&(he===ee||he===ie))&&("string"===this.options.to?this.onData(W.buf2binstring(Z.shrinkBuf(oe.output,oe.next_out))):this.onData(Z.shrinkBuf(oe.output,oe.next_out)))}while((0<oe.avail_in||0===oe.avail_out)&&de!==ae);return he===ee?(de=G.deflateEnd(this.strm),this.onEnd(de),this.ended=!0,de===te):he!==ie||(this.onEnd(te),oe.avail_out=0,!0)},L.prototype.onData=function(ne){this.chunks.push(ne)},L.prototype.onEnd=function(ne){ne===te&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Z.flattenChunks(this.chunks)),this.chunks=[],this.err=ne,this.msg=this.strm.msg},T.Deflate=L,T.deflate=E,T.deflateRaw=function(le,oe){return oe=oe||{},oe.raw=!0,E(le,oe)},T.gzip=function(le,oe){return oe=oe||{},oe.gzip=!0,E(le,oe)}},{"./utils/common":123,"./utils/strings":124,"./zlib/deflate":128,"./zlib/messages":133,"./zlib/zstream":135}],122:[function(I,R,T){"use strict";function L(ae){if(!(this instanceof L))return new L(ae);this.options=Z.assign({chunkSize:16384,windowBits:0,to:""},ae||{});var ie=this.options;ie.raw&&0<=ie.windowBits&&16>ie.windowBits&&(ie.windowBits=-ie.windowBits,0===ie.windowBits&&(ie.windowBits=-15)),0<=ie.windowBits&&16>ie.windowBits&&!(ae&&ae.windowBits)&&(ie.windowBits+=32),15<ie.windowBits&&48>ie.windowBits&&0==(15&ie.windowBits)&&(ie.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new J,this.strm.avail_out=0;var ne=G.inflateInit2(this.strm,ie.windowBits);if(ne!==Q.Z_OK)throw new Error($[ne]);this.header=new ee,G.inflateGetHeader(this.strm,this.header)}function E(ae,ie){var ne=new L(ie);if(ne.push(ae,!0),ne.err)throw ne.msg;return ne.result}var G=I("./zlib/inflate"),Z=I("./utils/common"),W=I("./utils/strings"),Q=I("./zlib/constants"),$=I("./zlib/messages"),J=I("./zlib/zstream"),ee=I("./zlib/gzheader"),te=Object.prototype.toString;L.prototype.push=function(ae,ie){var ne=this.strm,le=this.options.chunkSize,oe=this.options.dictionary,pe=!1,se,de,he,ue,ce,ge;if(this.ended)return!1;de=ie===~~ie?ie:!0===ie?Q.Z_FINISH:Q.Z_NO_FLUSH,ne.input="string"==typeof ae?W.binstring2buf(ae):"[object ArrayBuffer]"===te.call(ae)?new Uint8Array(ae):ae,ne.next_in=0,ne.avail_in=ne.input.length;do{if(0===ne.avail_out&&(ne.output=new Z.Buf8(le),ne.next_out=0,ne.avail_out=le),se=G.inflate(ne,Q.Z_NO_FLUSH),se===Q.Z_NEED_DICT&&oe&&(ge="string"==typeof oe?W.string2buf(oe):"[object ArrayBuffer]"===te.call(oe)?new Uint8Array(oe):oe,se=G.inflateSetDictionary(this.strm,ge)),se===Q.Z_BUF_ERROR&&!0==pe&&(se=Q.Z_OK,pe=!1),se!==Q.Z_STREAM_END&&se!==Q.Z_OK)return this.onEnd(se),this.ended=!0,!1;ne.next_out&&(0===ne.avail_out||se===Q.Z_STREAM_END||0===ne.avail_in&&(de===Q.Z_FINISH||de===Q.Z_SYNC_FLUSH))&&("string"===this.options.to?(he=W.utf8border(ne.output,ne.next_out),ue=ne.next_out-he,ce=W.buf2string(ne.output,he),ne.next_out=ue,ne.avail_out=le-ue,ue&&Z.arraySet(ne.output,ne.output,he,ue,0),this.onData(ce)):this.onData(Z.shrinkBuf(ne.output,ne.next_out))),0===ne.avail_in&&0===ne.avail_out&&(pe=!0)}while((0<ne.avail_in||0===ne.avail_out)&&se!==Q.Z_STREAM_END);return se===Q.Z_STREAM_END&&(de=Q.Z_FINISH),de===Q.Z_FINISH?(se=G.inflateEnd(this.strm),this.onEnd(se),this.ended=!0,se===Q.Z_OK):de!==Q.Z_SYNC_FLUSH||(this.onEnd(Q.Z_OK),ne.avail_out=0,!0)},L.prototype.onData=function(ae){this.chunks.push(ae)},L.prototype.onEnd=function(ae){ae===Q.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Z.flattenChunks(this.chunks)),this.chunks=[],this.err=ae,this.msg=this.strm.msg},T.Inflate=L,T.inflate=E,T.inflateRaw=function(ie,ne){return ne=ne||{},ne.raw=!0,E(ie,ne)},T.ungzip=E},{"./utils/common":123,"./utils/strings":124,"./zlib/constants":126,"./zlib/gzheader":129,"./zlib/inflate":131,"./zlib/messages":133,"./zlib/zstream":135}],123:[function(I,R,T){"use strict";var L="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;T.assign=function(Z){for(var W=Array.prototype.slice.call(arguments,1);W.length;){var Q=W.shift();if(Q){if("object"!=typeof Q)throw new TypeError(Q+"must be non-object");for(var $ in Q)Q.hasOwnProperty($)&&(Z[$]=Q[$])}}return Z},T.shrinkBuf=function(Z,W){return Z.length===W?Z:Z.subarray?Z.subarray(0,W):(Z.length=W,Z)};var E={arraySet:function(W,Q,$,J,ee){if(Q.subarray&&W.subarray)return void W.set(Q.subarray($,$+J),ee);for(var te=0;te<J;te++)W[ee+te]=Q[$+te]},flattenChunks:function(W){var Q,$,J,ee,te,ae;for(J=0,Q=0,$=W.length;Q<$;Q++)J+=W[Q].length;for(ae=new Uint8Array(J),ee=0,(Q=0,$=W.length);Q<$;Q++)te=W[Q],ae.set(te,ee),ee+=te.length;return ae}},G={arraySet:function(W,Q,$,J,ee){for(var te=0;te<J;te++)W[ee+te]=Q[$+te]},flattenChunks:function(W){return[].concat.apply([],W)}};T.setTyped=function(Z){Z?(T.Buf8=Uint8Array,T.Buf16=Uint16Array,T.Buf32=Int32Array,T.assign(T,E)):(T.Buf8=Array,T.Buf16=Array,T.Buf32=Array,T.assign(T,G))},T.setTyped(L)},{}],124:[function(I,R,T){"use strict";function L($,J){if(65537>J&&($.subarray&&Z||!$.subarray&&G))return String.fromCharCode.apply(null,E.shrinkBuf($,J));var ee="";for(var te=0;te<J;te++)ee+=String.fromCharCode($[te]);return ee}var E=I("./common"),G=!0,Z=!0;try{String.fromCharCode.apply(null,[0])}catch($){G=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch($){Z=!1}var W=new E.Buf8(256);for(var Q=0;256>Q;Q++)W[Q]=252<=Q?6:248<=Q?5:240<=Q?4:224<=Q?3:192<=Q?2:1;W[254]=W[254]=1,T.string2buf=function($){var ne=$.length,le=0,J,ee,te,ae,ie;for(ae=0;ae<ne;ae++)ee=$.charCodeAt(ae),55296==(64512&ee)&&ae+1<ne&&(te=$.charCodeAt(ae+1),56320==(64512&te)&&(ee=65536+(ee-55296<<10)+(te-56320),ae++)),le+=128>ee?1:2048>ee?2:65536>ee?3:4;for(J=new E.Buf8(le),ie=0,ae=0;ie<le;ae++)ee=$.charCodeAt(ae),55296==(64512&ee)&&ae+1<ne&&(te=$.charCodeAt(ae+1),56320==(64512&te)&&(ee=65536+(ee-55296<<10)+(te-56320),ae++)),128>ee?J[ie++]=ee:2048>ee?(J[ie++]=192|ee>>>6,J[ie++]=128|63&ee):65536>ee?(J[ie++]=224|ee>>>12,J[ie++]=128|63&ee>>>6,J[ie++]=128|63&ee):(J[ie++]=240|ee>>>18,J[ie++]=128|63&ee>>>12,J[ie++]=128|63&ee>>>6,J[ie++]=128|63&ee);return J},T.buf2binstring=function($){return L($,$.length)},T.binstring2buf=function($){var J=new E.Buf8($.length);for(var ee=0,te=J.length;ee<te;ee++)J[ee]=$.charCodeAt(ee);return J},T.buf2string=function($,J){var ee,te,ae,ie,ne=J||$.length,le=Array(2*ne);for(te=0,ee=0;ee<ne;){if(ae=$[ee++],128>ae){le[te++]=ae;continue}if(ie=W[ae],4<ie){le[te++]=65533,ee+=ie-1;continue}for(ae&=2===ie?31:3===ie?15:7;1<ie&&ee<ne;)ae=ae<<6|63&$[ee++],ie--;if(1<ie){le[te++]=65533;continue}65536>ae?le[te++]=ae:(ae-=65536,le[te++]=55296|1023&ae>>10,le[te++]=56320|1023&ae)}return L(le,te)},T.utf8border=function($,J){var ee;for(J=J||$.length,J>$.length&&(J=$.length),ee=J-1;0<=ee&&128==(192&$[ee]);)ee--;return 0>ee?J:0===ee?J:ee+W[$[ee]]>J?ee:J}},{"./common":123}],125:[function(I,R){"use strict";R.exports=function(L,E,G,Z){for(var W=0|65535&L,Q=0|65535&L>>>16,$=0;0!==G;){$=2e3<G?2e3:G,G-=$;do W=0|W+E[Z++],Q=0|Q+W;while(--$);W%=65521,Q%=65521}return 0|(W|Q<<16)}},{}],126:[function(I,R){"use strict";R.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],127:[function(I,R){"use strict";var T=function(){var G=[],E;for(var Z=0;256>Z;Z++){E=Z;for(var W=0;8>W;W++)E=1&E?3988292384^E>>>1:E>>>1;G[Z]=E}return G}();R.exports=function(E,G,Z,W){E^=-1;for(var Q=W;Q<W+Z;Q++)E=E>>>8^T[255&(E^G[Q])];return-1^E}},{}],128:[function(I,R,T){"use strict";function L(Xe,Ue){return Xe.msg=be[Ue],Ue}function E(Xe){return(Xe<<1)-(4<Xe?9:0)}function G(Xe){for(var Ue=Xe.length;0<=--Ue;)Xe[Ue]=0}function Z(Xe){var Ue=Xe.state,Ge=Ue.pending;Ge>Xe.avail_out&&(Ge=Xe.avail_out);0===Ge||(ge.arraySet(Xe.output,Ue.pending_buf,Ue.pending_out,Ge,Xe.next_out),Xe.next_out+=Ge,Ue.pending_out+=Ge,Xe.total_out+=Ge,Xe.avail_out-=Ge,Ue.pending-=Ge,0===Ue.pending&&(Ue.pending_out=0))}function W(Xe,Ue){pe._tr_flush_block(Xe,0<=Xe.block_start?Xe.block_start:-1,Xe.strstart-Xe.block_start,Ue),Xe.block_start=Xe.strstart,Z(Xe.strm)}function Q(Xe,Ue){Xe.pending_buf[Xe.pending++]=Ue}function $(Xe,Ue){Xe.pending_buf[Xe.pending++]=255&Ue>>>8,Xe.pending_buf[Xe.pending++]=255&Ue}function J(Xe,Ue,Ge,He){var Ze=Xe.avail_in;return(Ze>He&&(Ze=He),0===Ze)?0:(Xe.avail_in-=Ze,ge.arraySet(Ue,Xe.input,Xe.next_in,Ze,Ge),1===Xe.state.wrap?Xe.adler=fe(Xe.adler,Ue,Ze,Ge):2===Xe.state.wrap&&(Xe.adler=_e(Xe.adler,Ue,Ze,Ge)),Xe.next_in+=Ze,Xe.total_in+=Ze,Ze)}function ee(Xe,Ue){var Ge=Xe.max_chain_length,He=Xe.strstart,Ze,We,Ke=Xe.prev_length,Qe=Xe.nice_match,$e=Xe.strstart>Xe.w_size-Ae?Xe.strstart-(Xe.w_size-Ae):0,Je=Xe.window,et=Xe.w_mask,at=Xe.prev,nt=Xe.strstart+Ce,lt=Je[He+Ke-1],ot=Je[He+Ke];Xe.prev_length>=Xe.good_match&&(Ge>>=2),Qe>Xe.lookahead&&(Qe=Xe.lookahead);do{if(Ze=Ue,Je[Ze+Ke]!==ot||Je[Ze+Ke-1]!==lt||Je[Ze]!==Je[He]||Je[++Ze]!==Je[He+1])continue;He+=2,Ze++;do;while(Je[++He]===Je[++Ze]&&Je[++He]===Je[++Ze]&&Je[++He]===Je[++Ze]&&Je[++He]===Je[++Ze]&&Je[++He]===Je[++Ze]&&Je[++He]===Je[++Ze]&&Je[++He]===Je[++Ze]&&Je[++He]===Je[++Ze]&&He<nt);if(We=Ce-(nt-He),He=nt-Ce,We>Ke){if(Xe.match_start=Ue,Ke=We,We>=Qe)break;lt=Je[He+Ke-1],ot=Je[He+Ke]}}while((Ue=at[Ue&et])>$e&&0!=--Ge);return Ke<=Xe.lookahead?Ke:Xe.lookahead}function te(Xe){var Ue=Xe.w_size,Ge,He,Ze,We,Ke;do{if(We=Xe.window_size-Xe.lookahead-Xe.strstart,Xe.strstart>=Ue+(Ue-Ae)){ge.arraySet(Xe.window,Xe.window,Ue,Ue,0),Xe.match_start-=Ue,Xe.strstart-=Ue,Xe.block_start-=Ue,He=Xe.hash_size,Ge=He;do Ze=Xe.head[--Ge],Xe.head[Ge]=Ze>=Ue?Ze-Ue:0;while(--He);He=Ue,Ge=He;do Ze=Xe.prev[--Ge],Xe.prev[Ge]=Ze>=Ue?Ze-Ue:0;while(--He);We+=Ue}if(0===Xe.strm.avail_in)break;if(He=J(Xe.strm,Xe.window,Xe.strstart+Xe.lookahead,We),Xe.lookahead+=He,Xe.lookahead+Xe.insert>=Se)for(Ke=Xe.strstart-Xe.insert,Xe.ins_h=Xe.window[Ke],Xe.ins_h=(Xe.ins_h<<Xe.hash_shift^Xe.window[Ke+1])&Xe.hash_mask;Xe.insert&&(Xe.ins_h=(Xe.ins_h<<Xe.hash_shift^Xe.window[Ke+Se-1])&Xe.hash_mask,Xe.prev[Ke&Xe.w_mask]=Xe.head[Xe.ins_h],Xe.head[Xe.ins_h]=Ke,Ke++,Xe.insert--,!(Xe.lookahead+Xe.insert<Se)););}while(Xe.lookahead<Ae&&0!==Xe.strm.avail_in)}function ae(Xe,Ue){for(var Ge,He;;){if(Xe.lookahead<Ae){if(te(Xe),Xe.lookahead<Ae&&Ue===ye)return Fe;if(0===Xe.lookahead)break}if(Ge=0,Xe.lookahead>=Se&&(Xe.ins_h=(Xe.ins_h<<Xe.hash_shift^Xe.window[Xe.strstart+Se-1])&Xe.hash_mask,Ge=Xe.prev[Xe.strstart&Xe.w_mask]=Xe.head[Xe.ins_h],Xe.head[Xe.ins_h]=Xe.strstart),0!==Ge&&Xe.strstart-Ge<=Xe.w_size-Ae&&(Xe.match_length=ee(Xe,Ge)),!(Xe.match_length>=Se))He=pe._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++;else if(He=pe._tr_tally(Xe,Xe.strstart-Xe.match_start,Xe.match_length-Se),Xe.lookahead-=Xe.match_length,Xe.match_length<=Xe.max_lazy_match&&Xe.lookahead>=Se){Xe.match_length--;do Xe.strstart++,Xe.ins_h=(Xe.ins_h<<Xe.hash_shift^Xe.window[Xe.strstart+Se-1])&Xe.hash_mask,Ge=Xe.prev[Xe.strstart&Xe.w_mask]=Xe.head[Xe.ins_h],Xe.head[Xe.ins_h]=Xe.strstart;while(0!=--Xe.match_length);Xe.strstart++}else Xe.strstart+=Xe.match_length,Xe.match_length=0,Xe.ins_h=Xe.window[Xe.strstart],Xe.ins_h=(Xe.ins_h<<Xe.hash_shift^Xe.window[Xe.strstart+1])&Xe.hash_mask;if(He&&(W(Xe,!1),0===Xe.strm.avail_out))return Fe}return Xe.insert=Xe.strstart<Se-1?Xe.strstart:Se-1,Ue===xe?(W(Xe,!0),0===Xe.strm.avail_out?Ne:Oe):Xe.last_lit&&(W(Xe,!1),0===Xe.strm.avail_out)?Fe:Ye}function ie(Xe,Ue){for(var Ge,He,Ze;;){if(Xe.lookahead<Ae){if(te(Xe),Xe.lookahead<Ae&&Ue===ye)return Fe;if(0===Xe.lookahead)break}if(Ge=0,Xe.lookahead>=Se&&(Xe.ins_h=(Xe.ins_h<<Xe.hash_shift^Xe.window[Xe.strstart+Se-1])&Xe.hash_mask,Ge=Xe.prev[Xe.strstart&Xe.w_mask]=Xe.head[Xe.ins_h],Xe.head[Xe.ins_h]=Xe.strstart),Xe.prev_length=Xe.match_length,Xe.prev_match=Xe.match_start,Xe.match_length=Se-1,0!==Ge&&Xe.prev_length<Xe.max_lazy_match&&Xe.strstart-Ge<=Xe.w_size-Ae&&(Xe.match_length=ee(Xe,Ge),5>=Xe.match_length&&(1===Xe.strategy||Xe.match_length===Se&&4096<Xe.strstart-Xe.match_start)&&(Xe.match_length=Se-1)),Xe.prev_length>=Se&&Xe.match_length<=Xe.prev_length){Ze=Xe.strstart+Xe.lookahead-Se,He=pe._tr_tally(Xe,Xe.strstart-1-Xe.prev_match,Xe.prev_length-Se),Xe.lookahead-=Xe.prev_length-1,Xe.prev_length-=2;do++Xe.strstart<=Ze&&(Xe.ins_h=(Xe.ins_h<<Xe.hash_shift^Xe.window[Xe.strstart+Se-1])&Xe.hash_mask,Ge=Xe.prev[Xe.strstart&Xe.w_mask]=Xe.head[Xe.ins_h],Xe.head[Xe.ins_h]=Xe.strstart);while(0!=--Xe.prev_length);if(Xe.match_available=0,Xe.match_length=Se-1,Xe.strstart++,He&&(W(Xe,!1),0===Xe.strm.avail_out))return Fe}else if(!Xe.match_available)Xe.match_available=1,Xe.strstart++,Xe.lookahead--;else if(He=pe._tr_tally(Xe,0,Xe.window[Xe.strstart-1]),He&&W(Xe,!1),Xe.strstart++,Xe.lookahead--,0===Xe.strm.avail_out)return Fe}return Xe.match_available&&(He=pe._tr_tally(Xe,0,Xe.window[Xe.strstart-1]),Xe.match_available=0),Xe.insert=Xe.strstart<Se-1?Xe.strstart:Se-1,Ue===xe?(W(Xe,!0),0===Xe.strm.avail_out?Ne:Oe):Xe.last_lit&&(W(Xe,!1),0===Xe.strm.avail_out)?Fe:Ye}function ne(Xe,Ue){for(var Ke=Xe.window,Ge,He,Ze,We;;){if(Xe.lookahead<=Ce){if(te(Xe),Xe.lookahead<=Ce&&Ue===ye)return Fe;if(0===Xe.lookahead)break}if(Xe.match_length=0,Xe.lookahead>=Se&&0<Xe.strstart&&(Ze=Xe.strstart-1,He=Ke[Ze],He===Ke[++Ze]&&He===Ke[++Ze]&&He===Ke[++Ze])){We=Xe.strstart+Ce;do;while(He===Ke[++Ze]&&He===Ke[++Ze]&&He===Ke[++Ze]&&He===Ke[++Ze]&&He===Ke[++Ze]&&He===Ke[++Ze]&&He===Ke[++Ze]&&He===Ke[++Ze]&&Ze<We);Xe.match_length=Ce-(We-Ze),Xe.match_length>Xe.lookahead&&(Xe.match_length=Xe.lookahead)}if(Xe.match_length>=Se?(Ge=pe._tr_tally(Xe,1,Xe.match_length-Se),Xe.lookahead-=Xe.match_length,Xe.strstart+=Xe.match_length,Xe.match_length=0):(Ge=pe._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++),Ge&&(W(Xe,!1),0===Xe.strm.avail_out))return Fe}return Xe.insert=0,Ue===xe?(W(Xe,!0),0===Xe.strm.avail_out?Ne:Oe):Xe.last_lit&&(W(Xe,!1),0===Xe.strm.avail_out)?Fe:Ye}function le(Xe,Ue){for(var Ge;;){if(0===Xe.lookahead&&(te(Xe),0===Xe.lookahead)){if(Ue===ye)return Fe;break}if(Xe.match_length=0,Ge=pe._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++,Ge&&(W(Xe,!1),0===Xe.strm.avail_out))return Fe}return Xe.insert=0,Ue===xe?(W(Xe,!0),0===Xe.strm.avail_out?Ne:Oe):Xe.last_lit&&(W(Xe,!1),0===Xe.strm.avail_out)?Fe:Ye}function oe(Xe,Ue,Ge,He,Ze){this.good_length=Xe,this.max_lazy=Ue,this.nice_length=Ge,this.max_chain=He,this.func=Ze}function se(Xe){Xe.window_size=2*Xe.w_size,G(Xe.head),Xe.max_lazy_match=qe[Xe.level].max_lazy,Xe.good_match=qe[Xe.level].good_length,Xe.nice_match=qe[Xe.level].nice_length,Xe.max_chain_length=qe[Xe.level].max_chain,Xe.strstart=0,Xe.block_start=0,Xe.lookahead=0,Xe.insert=0,Xe.match_length=Xe.prev_length=Se-1,Xe.match_available=0,Xe.ins_h=0}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=De,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ge.Buf16(2*(2*Ie+1)),this.dyn_dtree=new ge.Buf16(122),this.bl_tree=new ge.Buf16(78),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ge.Buf16(16),this.heap=new ge.Buf16(2*Ie+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ge.Buf16(2*Ie+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(Xe){var Ue;return Xe&&Xe.state?(Xe.total_in=Xe.total_out=0,Xe.data_type=2,Ue=Xe.state,Ue.pending=0,Ue.pending_out=0,0>Ue.wrap&&(Ue.wrap=-Ue.wrap),Ue.status=Ue.wrap?Re:Ee,Xe.adler=2===Ue.wrap?0:1,Ue.last_flush=ye,pe._tr_init(Ue),we):L(Xe,Me)}function ue(Xe){var Ue=he(Xe);return Ue===we&&se(Xe.state),Ue}function ce(Xe,Ue,Ge,He,Ze,We){if(!Xe)return Me;var Ke=1;if(-1===Ue&&(Ue=6),0>He?(Ke=0,He=-He):15<He&&(Ke=2,He-=16),1>Ze||9<Ze||Ge!==De||8>He||15<He||0>Ue||9<Ue||0>We||4<We)return L(Xe,Me);8===He&&(He=9);var Qe=new de;return Xe.state=Qe,Qe.strm=Xe,Qe.wrap=Ke,Qe.gzhead=null,Qe.w_bits=He,Qe.w_size=1<<Qe.w_bits,Qe.w_mask=Qe.w_size-1,Qe.hash_bits=Ze+7,Qe.hash_size=1<<Qe.hash_bits,Qe.hash_mask=Qe.hash_size-1,Qe.hash_shift=~~((Qe.hash_bits+Se-1)/Se),Qe.window=new ge.Buf8(2*Qe.w_size),Qe.head=new ge.Buf16(Qe.hash_size),Qe.prev=new ge.Buf16(Qe.w_size),Qe.lit_bufsize=1<<Ze+6,Qe.pending_buf_size=4*Qe.lit_bufsize,Qe.pending_buf=new ge.Buf8(Qe.pending_buf_size),Qe.d_buf=1*Qe.lit_bufsize,Qe.l_buf=3*Qe.lit_bufsize,Qe.level=Ue,Qe.strategy=We,Qe.method=Ge,ue(Xe)}var ge=I("../utils/common"),pe=I("./trees"),fe=I("./adler32"),_e=I("./crc32"),be=I("./messages"),ye=0,xe=4,ke=5,we=0,ve=1,Me=-2,je=-5,Pe=2,De=8,Ie=286,Se=3,Ce=258,Ae=Ce+Se+1,Re=42,Be=69,ze=73,Te=91,Le=103,Ee=113,Ve=666,Fe=1,Ye=2,Ne=3,Oe=4,qe=[new oe(0,0,0,0,function(Ue,Ge){var He=65535;for(He>Ue.pending_buf_size-5&&(He=Ue.pending_buf_size-5);;){if(1>=Ue.lookahead){if(te(Ue),0===Ue.lookahead&&Ge===ye)return Fe;if(0===Ue.lookahead)break}Ue.strstart+=Ue.lookahead,Ue.lookahead=0;var Ze=Ue.block_start+He;if((0===Ue.strstart||Ue.strstart>=Ze)&&(Ue.lookahead=Ue.strstart-Ze,Ue.strstart=Ze,W(Ue,!1),0===Ue.strm.avail_out))return Fe;if(Ue.strstart-Ue.block_start>=Ue.w_size-Ae&&(W(Ue,!1),0===Ue.strm.avail_out))return Fe}return Ue.insert=0,Ge===xe?(W(Ue,!0),0===Ue.strm.avail_out?Ne:Oe):Ue.strstart>Ue.block_start&&(W(Ue,!1),0===Ue.strm.avail_out)?Fe:Fe}),new oe(4,4,8,4,ae),new oe(4,5,16,8,ae),new oe(4,6,32,32,ae),new oe(4,4,16,16,ie),new oe(8,16,32,32,ie),new oe(8,16,128,128,ie),new oe(8,32,128,256,ie),new oe(32,128,258,1024,ie),new oe(32,258,258,4096,ie)];T.deflateInit=function(Ue,Ge){return ce(Ue,Ge,De,15,8,0)},T.deflateInit2=ce,T.deflateReset=ue,T.deflateResetKeep=he,T.deflateSetHeader=function(Ue,Ge){return Ue&&Ue.state?2===Ue.state.wrap?(Ue.state.gzhead=Ge,we):Me:Me},T.deflate=function(Ue,Ge){var He,Ze,We,Ke;if(!Ue||!Ue.state||Ge>ke||0>Ge)return Ue?L(Ue,Me):Me;if(Ze=Ue.state,!Ue.output||!Ue.input&&0!==Ue.avail_in||Ze.status===Ve&&Ge!==xe)return L(Ue,0===Ue.avail_out?je:Me);if(Ze.strm=Ue,He=Ze.last_flush,Ze.last_flush=Ge,Ze.status===Re)if(2===Ze.wrap)Ue.adler=0,Q(Ze,31),Q(Ze,139),Q(Ze,8),Ze.gzhead?(Q(Ze,(Ze.gzhead.text?1:0)+(Ze.gzhead.hcrc?2:0)+(Ze.gzhead.extra?4:0)+(Ze.gzhead.name?8:0)+(Ze.gzhead.comment?16:0)),Q(Ze,255&Ze.gzhead.time),Q(Ze,255&Ze.gzhead.time>>8),Q(Ze,255&Ze.gzhead.time>>16),Q(Ze,255&Ze.gzhead.time>>24),Q(Ze,9===Ze.level?2:Ze.strategy>=Pe||2>Ze.level?4:0),Q(Ze,255&Ze.gzhead.os),Ze.gzhead.extra&&Ze.gzhead.extra.length&&(Q(Ze,255&Ze.gzhead.extra.length),Q(Ze,255&Ze.gzhead.extra.length>>8)),Ze.gzhead.hcrc&&(Ue.adler=_e(Ue.adler,Ze.pending_buf,Ze.pending,0)),Ze.gzindex=0,Ze.status=Be):(Q(Ze,0),Q(Ze,0),Q(Ze,0),Q(Ze,0),Q(Ze,0),Q(Ze,9===Ze.level?2:Ze.strategy>=Pe||2>Ze.level?4:0),Q(Ze,3),Ze.status=Ee);else{var Qe=De+(Ze.w_bits-8<<4)<<8,$e=-1;$e=Ze.strategy>=Pe||2>Ze.level?0:6>Ze.level?1:6===Ze.level?2:3,Qe|=$e<<6,0!==Ze.strstart&&(Qe|=32),Qe+=31-Qe%31,Ze.status=Ee,$(Ze,Qe),0!==Ze.strstart&&($(Ze,Ue.adler>>>16),$(Ze,65535&Ue.adler)),Ue.adler=1}if(Ze.status===Be)if(Ze.gzhead.extra){for(We=Ze.pending;Ze.gzindex<(65535&Ze.gzhead.extra.length)&&!(Ze.pending===Ze.pending_buf_size&&(Ze.gzhead.hcrc&&Ze.pending>We&&(Ue.adler=_e(Ue.adler,Ze.pending_buf,Ze.pending-We,We)),Z(Ue),We=Ze.pending,Ze.pending===Ze.pending_buf_size));)Q(Ze,255&Ze.gzhead.extra[Ze.gzindex]),Ze.gzindex++;Ze.gzhead.hcrc&&Ze.pending>We&&(Ue.adler=_e(Ue.adler,Ze.pending_buf,Ze.pending-We,We)),Ze.gzindex===Ze.gzhead.extra.length&&(Ze.gzindex=0,Ze.status=ze)}else Ze.status=ze;if(Ze.status===ze)if(Ze.gzhead.name){We=Ze.pending;do{if(Ze.pending===Ze.pending_buf_size&&(Ze.gzhead.hcrc&&Ze.pending>We&&(Ue.adler=_e(Ue.adler,Ze.pending_buf,Ze.pending-We,We)),Z(Ue),We=Ze.pending,Ze.pending===Ze.pending_buf_size)){Ke=1;break}Ke=Ze.gzindex<Ze.gzhead.name.length?255&Ze.gzhead.name.charCodeAt(Ze.gzindex++):0,Q(Ze,Ke)}while(0!==Ke);Ze.gzhead.hcrc&&Ze.pending>We&&(Ue.adler=_e(Ue.adler,Ze.pending_buf,Ze.pending-We,We)),0===Ke&&(Ze.gzindex=0,Ze.status=Te)}else Ze.status=Te;if(Ze.status===Te)if(Ze.gzhead.comment){We=Ze.pending;do{if(Ze.pending===Ze.pending_buf_size&&(Ze.gzhead.hcrc&&Ze.pending>We&&(Ue.adler=_e(Ue.adler,Ze.pending_buf,Ze.pending-We,We)),Z(Ue),We=Ze.pending,Ze.pending===Ze.pending_buf_size)){Ke=1;break}Ke=Ze.gzindex<Ze.gzhead.comment.length?255&Ze.gzhead.comment.charCodeAt(Ze.gzindex++):0,Q(Ze,Ke)}while(0!==Ke);Ze.gzhead.hcrc&&Ze.pending>We&&(Ue.adler=_e(Ue.adler,Ze.pending_buf,Ze.pending-We,We)),0===Ke&&(Ze.status=Le)}else Ze.status=Le;if(Ze.status===Le&&(Ze.gzhead.hcrc?(Ze.pending+2>Ze.pending_buf_size&&Z(Ue),Ze.pending+2<=Ze.pending_buf_size&&(Q(Ze,255&Ue.adler),Q(Ze,255&Ue.adler>>8),Ue.adler=0,Ze.status=Ee)):Ze.status=Ee),0!==Ze.pending){if(Z(Ue),0===Ue.avail_out)return Ze.last_flush=-1,we;}else if(0===Ue.avail_in&&E(Ge)<=E(He)&&Ge!==xe)return L(Ue,je);if(Ze.status===Ve&&0!==Ue.avail_in)return L(Ue,je);if(0!==Ue.avail_in||0!==Ze.lookahead||Ge!==ye&&Ze.status!==Ve){var Je=Ze.strategy===Pe?le(Ze,Ge):3===Ze.strategy?ne(Ze,Ge):qe[Ze.level].func(Ze,Ge);if((Je===Ne||Je===Oe)&&(Ze.status=Ve),Je===Fe||Je===Ne)return 0===Ue.avail_out&&(Ze.last_flush=-1),we;if(Je===Ye&&(1===Ge?pe._tr_align(Ze):Ge!=ke&&(pe._tr_stored_block(Ze,0,0,!1),3==Ge&&(G(Ze.head),0===Ze.lookahead&&(Ze.strstart=0,Ze.block_start=0,Ze.insert=0))),Z(Ue),0===Ue.avail_out))return Ze.last_flush=-1,we}return Ge===xe?0>=Ze.wrap?ve:(2===Ze.wrap?(Q(Ze,255&Ue.adler),Q(Ze,255&Ue.adler>>8),Q(Ze,255&Ue.adler>>16),Q(Ze,255&Ue.adler>>24),Q(Ze,255&Ue.total_in),Q(Ze,255&Ue.total_in>>8),Q(Ze,255&Ue.total_in>>16),Q(Ze,255&Ue.total_in>>24)):($(Ze,Ue.adler>>>16),$(Ze,65535&Ue.adler)),Z(Ue),0<Ze.wrap&&(Ze.wrap=-Ze.wrap),0===Ze.pending?ve:we):we},T.deflateEnd=function(Ue){var Ge;return Ue&&Ue.state?(Ge=Ue.state.status,Ge!==Re&&Ge!==Be&&Ge!==ze&&Ge!==Te&&Ge!==Le&&Ge!==Ee&&Ge!==Ve)?L(Ue,Me):(Ue.state=null,Ge===Ee?L(Ue,-3):we):Me},T.deflateSetDictionary=function(Ue,Ge){var He=Ge.length,Ze,We,Ke,Qe,$e,Je,et,at;if(!Ue||!Ue.state)return Me;if(Ze=Ue.state,Qe=Ze.wrap,2===Qe||1===Qe&&Ze.status!==Re||Ze.lookahead)return Me;for(1===Qe&&(Ue.adler=fe(Ue.adler,Ge,He,0)),Ze.wrap=0,He>=Ze.w_size&&(0===Qe&&(G(Ze.head),Ze.strstart=0,Ze.block_start=0,Ze.insert=0),at=new ge.Buf8(Ze.w_size),ge.arraySet(at,Ge,He-Ze.w_size,Ze.w_size,0),Ge=at,He=Ze.w_size),$e=Ue.avail_in,Je=Ue.next_in,et=Ue.input,Ue.avail_in=He,Ue.next_in=0,Ue.input=Ge,te(Ze);Ze.lookahead>=Se;){We=Ze.strstart,Ke=Ze.lookahead-(Se-1);do Ze.ins_h=(Ze.ins_h<<Ze.hash_shift^Ze.window[We+Se-1])&Ze.hash_mask,Ze.prev[We&Ze.w_mask]=Ze.head[Ze.ins_h],Ze.head[Ze.ins_h]=We,We++;while(--Ke);Ze.strstart=We,Ze.lookahead=Se-1,te(Ze)}return Ze.strstart+=Ze.lookahead,Ze.block_start=Ze.strstart,Ze.insert=Ze.lookahead,Ze.lookahead=0,Ze.match_length=Ze.prev_length=Se-1,Ze.match_available=0,Ue.next_in=Je,Ue.input=et,Ue.avail_in=$e,Ze.wrap=Qe,we},T.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":123,"./adler32":125,"./crc32":127,"./messages":133,"./trees":134}],129:[function(I,R){"use strict";R.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],130:[function(I,R){"use strict";var T=30;R.exports=function(E,G){var Z,W,Q,$,J,ee,te,ae,ie,ne,le,oe,se,de,he,ue,ce,ge,pe,fe,_e,be,ye,xe,ke;Z=E.state,W=E.next_in,xe=E.input,Q=W+(E.avail_in-5),$=E.next_out,ke=E.output,J=$-(G-E.avail_out),ee=$+(E.avail_out-257),te=Z.dmax,ae=Z.wsize,ie=Z.whave,ne=Z.wnext,le=Z.window,oe=Z.hold,se=Z.bits,de=Z.lencode,he=Z.distcode,ue=(1<<Z.lenbits)-1,ce=(1<<Z.distbits)-1;top:do{15>se&&(oe+=xe[W++]<<se,se+=8,oe+=xe[W++]<<se,se+=8),ge=de[oe&ue];dolen:for(;;){if(pe=ge>>>24,oe>>>=pe,se-=pe,pe=255&ge>>>16,0===pe)ke[$++]=65535&ge;else if(16&pe){fe=65535&ge,pe&=15,pe&&(se<pe&&(oe+=xe[W++]<<se,se+=8),fe+=oe&(1<<pe)-1,oe>>>=pe,se-=pe),15>se&&(oe+=xe[W++]<<se,se+=8,oe+=xe[W++]<<se,se+=8),ge=he[oe&ce];dodist:for(;;){if(pe=ge>>>24,oe>>>=pe,se-=pe,pe=255&ge>>>16,16&pe){if(_e=65535&ge,pe&=15,se<pe&&(oe+=xe[W++]<<se,se+=8,se<pe&&(oe+=xe[W++]<<se,se+=8)),_e+=oe&(1<<pe)-1,_e>te){E.msg="invalid distance too far back",Z.mode=T;break top}if(oe>>>=pe,se-=pe,pe=$-J,_e>pe){if(pe=_e-pe,pe>ie&&Z.sane){E.msg="invalid distance too far back",Z.mode=T;break top}if(be=0,ye=le,0===ne){if(be+=ae-pe,pe<fe){fe-=pe;do ke[$++]=le[be++];while(--pe);be=$-_e,ye=ke}}else if(ne<pe){if(be+=ae+ne-pe,pe-=ne,pe<fe){fe-=pe;do ke[$++]=le[be++];while(--pe);if(be=0,ne<fe){pe=ne,fe-=pe;do ke[$++]=le[be++];while(--pe);be=$-_e,ye=ke}}}else if(be+=ne-pe,pe<fe){fe-=pe;do ke[$++]=le[be++];while(--pe);be=$-_e,ye=ke}for(;2<fe;)ke[$++]=ye[be++],ke[$++]=ye[be++],ke[$++]=ye[be++],fe-=3;fe&&(ke[$++]=ye[be++],1<fe&&(ke[$++]=ye[be++]))}else{be=$-_e;do ke[$++]=ke[be++],ke[$++]=ke[be++],ke[$++]=ke[be++],fe-=3;while(2<fe);fe&&(ke[$++]=ke[be++],1<fe&&(ke[$++]=ke[be++]))}}else if(0==(64&pe)){ge=he[(65535&ge)+(oe&(1<<pe)-1)];continue dodist}else{E.msg="invalid distance code",Z.mode=T;break top}break}}else if(0==(64&pe)){ge=de[(65535&ge)+(oe&(1<<pe)-1)];continue dolen}else if(32&pe){Z.mode=12;break top}else{E.msg="invalid literal/length code",Z.mode=T;break top}break}}while(W<Q&&$<ee);fe=se>>3,W-=fe,se-=fe<<3,oe&=(1<<se)-1,E.next_in=W,E.next_out=$,E.avail_in=W<Q?5+(Q-W):5-(W-Q),E.avail_out=$<ee?257+(ee-$):257-($-ee),Z.hold=oe,Z.bits=se}},{}],131:[function(I,R,T){"use strict";function L(Ke){return(255&Ke>>>24)+(65280&Ke>>>8)+((65280&Ke)<<8)+((255&Ke)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ee.Buf16(320),this.work=new ee.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function G(Ke){var Qe;return Ke&&Ke.state?(Qe=Ke.state,Ke.total_in=Ke.total_out=Qe.total=0,Ke.msg="",Qe.wrap&&(Ke.adler=1&Qe.wrap),Qe.mode=fe,Qe.last=0,Qe.havedict=0,Qe.dmax=32768,Qe.head=null,Qe.hold=0,Qe.bits=0,Qe.lencode=Qe.lendyn=new ee.Buf32(852),Qe.distcode=Qe.distdyn=new ee.Buf32(592),Qe.sane=1,Qe.back=-1,he):ue}function Z(Ke){var Qe;return Ke&&Ke.state?(Qe=Ke.state,Qe.wsize=0,Qe.whave=0,Qe.wnext=0,G(Ke)):ue}function W(Ke,Qe){var $e,Je;return Ke&&Ke.state?(Je=Ke.state,0>Qe?($e=0,Qe=-Qe):($e=(Qe>>4)+1,48>Qe&&(Qe&=15)),Qe&&(8>Qe||15<Qe))?ue:(null!==Je.window&&Je.wbits!==Qe&&(Je.window=null),Je.wrap=$e,Je.wbits=Qe,Z(Ke)):ue}function Q(Ke,Qe){var $e,Je;return Ke?(Je=new E,Ke.state=Je,Je.window=null,$e=W(Ke,Qe),$e!==he&&(Ke.state=null),$e):ue}function $(Ke){if(He){var Qe;for(Ze=new ee.Buf32(512),We=new ee.Buf32(32),Qe=0;144>Qe;)Ke.lens[Qe++]=8;for(;256>Qe;)Ke.lens[Qe++]=9;for(;280>Qe;)Ke.lens[Qe++]=7;for(;288>Qe;)Ke.lens[Qe++]=8;for(ne(le,Ke.lens,0,288,Ze,0,Ke.work,{bits:9}),Qe=0;32>Qe;)Ke.lens[Qe++]=5;ne(oe,Ke.lens,0,32,We,0,Ke.work,{bits:5}),He=!1}Ke.lencode=Ze,Ke.lenbits=9,Ke.distcode=We,Ke.distbits=5}function J(Ke,Qe,$e,Je){var at=Ke.state,et;return null===at.window&&(at.wsize=1<<at.wbits,at.wnext=0,at.whave=0,at.window=new ee.Buf8(at.wsize)),Je>=at.wsize?(ee.arraySet(at.window,Qe,$e-at.wsize,at.wsize,0),at.wnext=0,at.whave=at.wsize):(et=at.wsize-at.wnext,et>Je&&(et=Je),ee.arraySet(at.window,Qe,$e-Je,et,at.wnext),Je-=et,Je?(ee.arraySet(at.window,Qe,$e-Je,Je,0),at.wnext=Je,at.whave=at.wsize):(at.wnext+=et,at.wnext===at.wsize&&(at.wnext=0),at.whave<at.wsize&&(at.whave+=et))),0}var ee=I("../utils/common"),te=I("./adler32"),ae=I("./crc32"),ie=I("./inffast"),ne=I("./inftrees"),le=1,oe=2,se=4,de=6,he=0,ue=-2,ce=-3,ge=-4,pe=8,fe=1,_e=2,be=3,ye=4,xe=5,ke=6,we=7,ve=8,Me=9,je=10,Pe=11,De=12,Ie=13,Se=14,Ce=15,Ae=16,Re=17,Be=18,ze=19,Te=20,Le=21,Ee=22,Ve=23,Fe=24,Ye=25,Ne=26,Oe=27,qe=28,Xe=29,Ue=30,Ge=31,He=!0,Ze,We;T.inflateReset=Z,T.inflateReset2=W,T.inflateResetKeep=G,T.inflateInit=function(Qe){return Q(Qe,15)},T.inflateInit2=Q,T.inflate=function(Qe,$e){var pt=0,jt=new ee.Buf8(4),It=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Je,et,at,nt,lt,ot,rt,st,dt,ht,ut,mt,ct,gt,_t,bt,yt,xt,kt,wt,vt,Mt,Pt,Dt;if(!Qe||!Qe.state||!Qe.output||!Qe.input&&0!==Qe.avail_in)return ue;Je=Qe.state,Je.mode===De&&(Je.mode=Ie),lt=Qe.next_out,at=Qe.output,rt=Qe.avail_out,nt=Qe.next_in,et=Qe.input,ot=Qe.avail_in,st=Je.hold,dt=Je.bits,ht=ot,ut=rt,Mt=he;inf_leave:for(;;)switch(Je.mode){case fe:if(0===Je.wrap){Je.mode=Ie;break}for(;16>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(2&Je.wrap&&35615===st){Je.check=0,jt[0]=255&st,jt[1]=255&st>>>8,Je.check=ae(Je.check,jt,2,0),st=0,dt=0,Je.mode=_e;break}if(Je.flags=0,Je.head&&(Je.head.done=!1),!(1&Je.wrap)||(((255&st)<<8)+(st>>8))%31){Qe.msg="incorrect header check",Je.mode=Ue;break}if((15&st)!=pe){Qe.msg="unknown compression method",Je.mode=Ue;break}if(st>>>=4,dt-=4,vt=(15&st)+8,0===Je.wbits)Je.wbits=vt;else if(vt>Je.wbits){Qe.msg="invalid window size",Je.mode=Ue;break}Je.dmax=1<<vt,Qe.adler=Je.check=1,Je.mode=512&st?je:De,st=0,dt=0;break;case _e:for(;16>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(Je.flags=st,(255&Je.flags)!=pe){Qe.msg="unknown compression method",Je.mode=Ue;break}if(57344&Je.flags){Qe.msg="unknown header flags set",Je.mode=Ue;break}Je.head&&(Je.head.text=1&st>>8),512&Je.flags&&(jt[0]=255&st,jt[1]=255&st>>>8,Je.check=ae(Je.check,jt,2,0)),st=0,dt=0,Je.mode=be;case be:for(;32>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.head&&(Je.head.time=st),512&Je.flags&&(jt[0]=255&st,jt[1]=255&st>>>8,jt[2]=255&st>>>16,jt[3]=255&st>>>24,Je.check=ae(Je.check,jt,4,0)),st=0,dt=0,Je.mode=ye;case ye:for(;16>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.head&&(Je.head.xflags=255&st,Je.head.os=st>>8),512&Je.flags&&(jt[0]=255&st,jt[1]=255&st>>>8,Je.check=ae(Je.check,jt,2,0)),st=0,dt=0,Je.mode=xe;case xe:if(1024&Je.flags){for(;16>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.length=st,Je.head&&(Je.head.extra_len=st),512&Je.flags&&(jt[0]=255&st,jt[1]=255&st>>>8,Je.check=ae(Je.check,jt,2,0)),st=0,dt=0}else Je.head&&(Je.head.extra=null);Je.mode=ke;case ke:if(1024&Je.flags&&(mt=Je.length,mt>ot&&(mt=ot),mt&&(Je.head&&(vt=Je.head.extra_len-Je.length,!Je.head.extra&&(Je.head.extra=Array(Je.head.extra_len)),ee.arraySet(Je.head.extra,et,nt,mt,vt)),512&Je.flags&&(Je.check=ae(Je.check,et,mt,nt)),ot-=mt,nt+=mt,Je.length-=mt),Je.length))break inf_leave;Je.length=0,Je.mode=we;case we:if(2048&Je.flags){if(0===ot)break inf_leave;mt=0;do vt=et[nt+mt++],Je.head&&vt&&65536>Je.length&&(Je.head.name+=String.fromCharCode(vt));while(vt&&mt<ot);if(512&Je.flags&&(Je.check=ae(Je.check,et,mt,nt)),ot-=mt,nt+=mt,vt)break inf_leave}else Je.head&&(Je.head.name=null);Je.length=0,Je.mode=ve;case ve:if(4096&Je.flags){if(0===ot)break inf_leave;mt=0;do vt=et[nt+mt++],Je.head&&vt&&65536>Je.length&&(Je.head.comment+=String.fromCharCode(vt));while(vt&&mt<ot);if(512&Je.flags&&(Je.check=ae(Je.check,et,mt,nt)),ot-=mt,nt+=mt,vt)break inf_leave}else Je.head&&(Je.head.comment=null);Je.mode=Me;case Me:if(512&Je.flags){for(;16>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(st!==(65535&Je.check)){Qe.msg="header crc mismatch",Je.mode=Ue;break}st=0,dt=0}Je.head&&(Je.head.hcrc=1&Je.flags>>9,Je.head.done=!0),Qe.adler=Je.check=0,Je.mode=De;break;case je:for(;32>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Qe.adler=Je.check=L(st),st=0,dt=0,Je.mode=Pe;case Pe:if(0===Je.havedict)return Qe.next_out=lt,Qe.avail_out=rt,Qe.next_in=nt,Qe.avail_in=ot,Je.hold=st,Je.bits=dt,2;Qe.adler=Je.check=1,Je.mode=De;case De:if(5===$e||$e===de)break inf_leave;case Ie:if(Je.last){st>>>=7&dt,dt-=7&dt,Je.mode=Oe;break}for(;3>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}switch(Je.last=1&st,st>>>=1,dt-=1,3&st){case 0:Je.mode=Se;break;case 1:if($(Je),Je.mode=Te,$e===de){st>>>=2,dt-=2;break inf_leave}break;case 2:Je.mode=Re;break;case 3:Qe.msg="invalid block type",Je.mode=Ue;}st>>>=2,dt-=2;break;case Se:for(st>>>=7&dt,dt-=7&dt;32>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if((65535&st)!=(65535^st>>>16)){Qe.msg="invalid stored block lengths",Je.mode=Ue;break}if(Je.length=65535&st,st=0,dt=0,Je.mode=Ce,$e===de)break inf_leave;case Ce:Je.mode=Ae;case Ae:if(mt=Je.length,mt){if(mt>ot&&(mt=ot),mt>rt&&(mt=rt),0===mt)break inf_leave;ee.arraySet(at,et,nt,mt,lt),ot-=mt,nt+=mt,rt-=mt,lt+=mt,Je.length-=mt;break}Je.mode=De;break;case Re:for(;14>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(Je.nlen=(31&st)+257,st>>>=5,dt-=5,Je.ndist=(31&st)+1,st>>>=5,dt-=5,Je.ncode=(15&st)+4,st>>>=4,dt-=4,286<Je.nlen||30<Je.ndist){Qe.msg="too many length or distance symbols",Je.mode=Ue;break}Je.have=0,Je.mode=Be;case Be:for(;Je.have<Je.ncode;){for(;3>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.lens[It[Je.have++]]=7&st,st>>>=3,dt-=3}for(;19>Je.have;)Je.lens[It[Je.have++]]=0;if(Je.lencode=Je.lendyn,Je.lenbits=7,Pt={bits:Je.lenbits},Mt=ne(0,Je.lens,0,19,Je.lencode,0,Je.work,Pt),Je.lenbits=Pt.bits,Mt){Qe.msg="invalid code lengths set",Je.mode=Ue;break}Je.have=0,Je.mode=ze;case ze:for(;Je.have<Je.nlen+Je.ndist;){for(;;){if(pt=Je.lencode[st&(1<<Je.lenbits)-1],_t=pt>>>24,bt=255&pt>>>16,yt=65535&pt,_t<=dt)break;if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(16>yt)st>>>=_t,dt-=_t,Je.lens[Je.have++]=yt;else{if(16===yt){for(Dt=_t+2;dt<Dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(st>>>=_t,dt-=_t,0===Je.have){Qe.msg="invalid bit length repeat",Je.mode=Ue;break}vt=Je.lens[Je.have-1],mt=3+(3&st),st>>>=2,dt-=2}else if(17===yt){for(Dt=_t+3;dt<Dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}st>>>=_t,dt-=_t,vt=0,mt=3+(7&st),st>>>=3,dt-=3}else{for(Dt=_t+7;dt<Dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}st>>>=_t,dt-=_t,vt=0,mt=11+(127&st),st>>>=7,dt-=7}if(Je.have+mt>Je.nlen+Je.ndist){Qe.msg="invalid bit length repeat",Je.mode=Ue;break}for(;mt--;)Je.lens[Je.have++]=vt}}if(Je.mode===Ue)break;if(0===Je.lens[256]){Qe.msg="invalid code -- missing end-of-block",Je.mode=Ue;break}if(Je.lenbits=9,Pt={bits:Je.lenbits},Mt=ne(le,Je.lens,0,Je.nlen,Je.lencode,0,Je.work,Pt),Je.lenbits=Pt.bits,Mt){Qe.msg="invalid literal/lengths set",Je.mode=Ue;break}if(Je.distbits=6,Je.distcode=Je.distdyn,Pt={bits:Je.distbits},Mt=ne(oe,Je.lens,Je.nlen,Je.ndist,Je.distcode,0,Je.work,Pt),Je.distbits=Pt.bits,Mt){Qe.msg="invalid distances set",Je.mode=Ue;break}if(Je.mode=Te,$e===de)break inf_leave;case Te:Je.mode=Le;case Le:if(6<=ot&&258<=rt){Qe.next_out=lt,Qe.avail_out=rt,Qe.next_in=nt,Qe.avail_in=ot,Je.hold=st,Je.bits=dt,ie(Qe,ut),lt=Qe.next_out,at=Qe.output,rt=Qe.avail_out,nt=Qe.next_in,et=Qe.input,ot=Qe.avail_in,st=Je.hold,dt=Je.bits,Je.mode===De&&(Je.back=-1);break}for(Je.back=0;;){if(pt=Je.lencode[st&(1<<Je.lenbits)-1],_t=pt>>>24,bt=255&pt>>>16,yt=65535&pt,_t<=dt)break;if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(bt&&0==(240&bt)){for(xt=_t,kt=bt,wt=yt;;){if(pt=Je.lencode[wt+((st&(1<<xt+kt)-1)>>xt)],_t=pt>>>24,bt=255&pt>>>16,yt=65535&pt,xt+_t<=dt)break;if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}st>>>=xt,dt-=xt,Je.back+=xt}if(st>>>=_t,dt-=_t,Je.back+=_t,Je.length=yt,0===bt){Je.mode=Ne;break}if(32&bt){Je.back=-1,Je.mode=De;break}if(64&bt){Qe.msg="invalid literal/length code",Je.mode=Ue;break}Je.extra=15&bt,Je.mode=Ee;case Ee:if(Je.extra){for(Dt=Je.extra;dt<Dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.length+=st&(1<<Je.extra)-1,st>>>=Je.extra,dt-=Je.extra,Je.back+=Je.extra}Je.was=Je.length,Je.mode=Ve;case Ve:for(;;){if(pt=Je.distcode[st&(1<<Je.distbits)-1],_t=pt>>>24,bt=255&pt>>>16,yt=65535&pt,_t<=dt)break;if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(0==(240&bt)){for(xt=_t,kt=bt,wt=yt;;){if(pt=Je.distcode[wt+((st&(1<<xt+kt)-1)>>xt)],_t=pt>>>24,bt=255&pt>>>16,yt=65535&pt,xt+_t<=dt)break;if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}st>>>=xt,dt-=xt,Je.back+=xt}if(st>>>=_t,dt-=_t,Je.back+=_t,64&bt){Qe.msg="invalid distance code",Je.mode=Ue;break}Je.offset=yt,Je.extra=15&bt,Je.mode=Fe;case Fe:if(Je.extra){for(Dt=Je.extra;dt<Dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}Je.offset+=st&(1<<Je.extra)-1,st>>>=Je.extra,dt-=Je.extra,Je.back+=Je.extra}if(Je.offset>Je.dmax){Qe.msg="invalid distance too far back",Je.mode=Ue;break}Je.mode=Ye;case Ye:if(0===rt)break inf_leave;if(mt=ut-rt,Je.offset>mt){if(mt=Je.offset-mt,mt>Je.whave&&Je.sane){Qe.msg="invalid distance too far back",Je.mode=Ue;break}mt>Je.wnext?(mt-=Je.wnext,ct=Je.wsize-mt):ct=Je.wnext-mt,mt>Je.length&&(mt=Je.length),gt=Je.window}else gt=at,ct=lt-Je.offset,mt=Je.length;mt>rt&&(mt=rt),rt-=mt,Je.length-=mt;do at[lt++]=gt[ct++];while(--mt);0===Je.length&&(Je.mode=Le);break;case Ne:if(0===rt)break inf_leave;at[lt++]=Je.length,rt--,Je.mode=Le;break;case Oe:if(Je.wrap){for(;32>dt;){if(0===ot)break inf_leave;ot--,st|=et[nt++]<<dt,dt+=8}if(ut-=rt,Qe.total_out+=ut,Je.total+=ut,ut&&(Qe.adler=Je.check=Je.flags?ae(Je.check,at,ut,lt-ut):te(Je.check,at,ut,lt-ut)),ut=rt,(Je.flags?st:L(st))!==Je.check){Qe.msg="incorrect data check",Je.mode=Ue;break}st=0,dt=0}Je.mode=qe;case qe:if(Je.wrap&&Je.flags){for(;32>dt;){if(0===ot)break inf_leave;ot--,st+=et[nt++]<<dt,dt+=8}if(st!==(4294967295&Je.total)){Qe.msg="incorrect length check",Je.mode=Ue;break}st=0,dt=0}Je.mode=Xe;case Xe:Mt=1;break inf_leave;case Ue:Mt=ce;break inf_leave;case Ge:return ge;case 32:default:return ue;}return(Qe.next_out=lt,Qe.avail_out=rt,Qe.next_in=nt,Qe.avail_in=ot,Je.hold=st,Je.bits=dt,(Je.wsize||ut!==Qe.avail_out&&Je.mode<Ue&&(Je.mode<Oe||$e!==se))&&J(Qe,Qe.output,Qe.next_out,ut-Qe.avail_out))?(Je.mode=Ge,ge):(ht-=Qe.avail_in,ut-=Qe.avail_out,Qe.total_in+=ht,Qe.total_out+=ut,Je.total+=ut,Je.wrap&&ut&&(Qe.adler=Je.check=Je.flags?ae(Je.check,at,ut,Qe.next_out-ut):te(Je.check,at,ut,Qe.next_out-ut)),Qe.data_type=Je.bits+(Je.last?64:0)+(Je.mode===De?128:0)+(Je.mode===Te||Je.mode===Ce?256:0),(0===ht&&0===ut||$e===se)&&Mt===he&&(Mt=-5),Mt)},T.inflateEnd=function(Qe){if(!Qe||!Qe.state)return ue;var $e=Qe.state;return $e.window&&($e.window=null),Qe.state=null,he},T.inflateGetHeader=function(Qe,$e){var Je;return Qe&&Qe.state?(Je=Qe.state,0==(2&Je.wrap))?ue:(Je.head=$e,$e.done=!1,he):ue},T.inflateSetDictionary=function(Qe,$e){var Je=$e.length,et,at,nt;return Qe&&Qe.state?(et=Qe.state,0!==et.wrap&&et.mode!==Pe)?ue:et.mode===Pe&&(at=1,at=te(at,$e,Je,0),at!==et.check)?ce:(nt=J(Qe,$e,Je,Je),nt)?(et.mode=Ge,ge):(et.havedict=1,he):ue},T.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":123,"./adler32":125,"./crc32":127,"./inffast":130,"./inftrees":132}],132:[function(I,R){"use strict";var T=I("../utils/common"),L=15,E=852,G=592,Z=0,W=1,Q=2,$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],J=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],te=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];R.exports=function(ie,ne,le,oe,se,de,he,ue){var ce=ue.bits,ge=0,pe=0,fe=0,_e=0,be=0,ye=0,xe=0,ke=0,we=0,ve=0,Se=null,Ce=0,Re=new T.Buf16(L+1),Be=new T.Buf16(L+1),ze=null,Te=0,Me,je,Pe,De,Ie,Ae,Le,Ee,Ve;for(ge=0;ge<=L;ge++)Re[ge]=0;for(pe=0;pe<oe;pe++)Re[ne[le+pe]]++;for(be=ce,_e=L;1<=_e&&0===Re[_e];_e--);if(be>_e&&(be=_e),0==_e)return se[de++]=20971520,se[de++]=20971520,ue.bits=1,0;for(fe=1;fe<_e&&0===Re[fe];fe++);for(be<fe&&(be=fe),ke=1,ge=1;ge<=L;ge++)if(ke<<=1,ke-=Re[ge],0>ke)return-1;if(0<ke&&(ie===Z||1!=_e))return-1;for(Be[1]=0,ge=1;ge<L;ge++)Be[ge+1]=Be[ge]+Re[ge];for(pe=0;pe<oe;pe++)0!==ne[le+pe]&&(he[Be[ne[le+pe]]++]=pe);if(ie===Z?(Se=ze=he,Ae=19):ie===W?(Se=$,Ce-=257,ze=J,Te-=257,Ae=256):(Se=ee,ze=te,Ae=-1),ve=0,pe=0,ge=fe,Ie=de,ye=be,xe=0,Pe=-1,we=1<<be,De=we-1,ie===W&&we>E||ie===Q&&we>G)return 1;for(var Fe=0;;){Fe++,Le=ge-xe,he[pe]<Ae?(Ee=0,Ve=he[pe]):he[pe]>Ae?(Ee=ze[Te+he[pe]],Ve=Se[Ce+he[pe]]):(Ee=96,Ve=0),Me=1<<ge-xe,je=1<<ye,fe=je;do je-=Me,se[Ie+(ve>>xe)+je]=0|(Le<<24|Ee<<16|Ve);while(0!==je);for(Me=1<<ge-1;ve&Me;)Me>>=1;if(0===Me?ve=0:(ve&=Me-1,ve+=Me),pe++,0==--Re[ge]){if(ge==_e)break;ge=ne[le+he[pe]]}if(ge>be&&(ve&De)!==Pe){for(0==xe&&(xe=be),Ie+=fe,ye=ge-xe,ke=1<<ye;ye+xe<_e&&(ke-=Re[ye+xe],!(0>=ke));)ye++,ke<<=1;if(we+=1<<ye,ie===W&&we>E||ie===Q&&we>G)return 1;Pe=ve&De,se[Pe]=0|(be<<24|ye<<16|Ie-de)}}return 0!=ve&&(se[Ie+ve]=0|(4194304|ge-xe<<24)),ue.bits=be,0}},{"../utils/common":123}],133:[function(I,R){"use strict";R.exports={"0":"","1":"stream end","2":"need dictionary","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],134:[function(I,R,T){"use strict";function L(We){for(var Ke=We.length;0<=--Ke;)We[Ke]=0}function E(We,Ke,Qe,$e,Je){this.static_tree=We,this.extra_bits=Ke,this.extra_base=Qe,this.elems=$e,this.max_length=Je,this.has_stree=We&&We.length}function G(We,Ke){this.dyn_tree=We,this.max_code=0,this.stat_desc=Ke}function Z(We){return 256>We?Ne[We]:Ne[256+(We>>>7)]}function W(We,Ke){We.pending_buf[We.pending++]=255&Ke,We.pending_buf[We.pending++]=255&Ke>>>8}function Q(We,Ke,Qe){We.bi_valid>Ce-Qe?(We.bi_buf|=65535&Ke<<We.bi_valid,W(We,We.bi_buf),We.bi_buf=Ke>>Ce-We.bi_valid,We.bi_valid+=Qe-Ce):(We.bi_buf|=65535&Ke<<We.bi_valid,We.bi_valid+=Qe)}function $(We,Ke,Qe){Q(We,Qe[2*Ke],Qe[2*Ke+1])}function J(We,Ke){var Qe=0;do Qe|=1&We,We>>>=1,Qe<<=1;while(0<--Ke);return Qe>>>1}function ee(We){16===We.bi_valid?(W(We,We.bi_buf),We.bi_buf=0,We.bi_valid=0):8<=We.bi_valid&&(We.pending_buf[We.pending++]=255&We.bi_buf,We.bi_buf>>=8,We.bi_valid-=8)}function te(We,Ke){var Qe=Ke.dyn_tree,$e=Ke.max_code,Je=Ke.stat_desc.static_tree,et=Ke.stat_desc.has_stree,at=Ke.stat_desc.extra_bits,nt=Ke.stat_desc.extra_base,lt=Ke.stat_desc.max_length,ot,rt,st,dt,ht,ut,mt=0;for(dt=0;dt<=Se;dt++)We.bl_count[dt]=0;for(Qe[2*We.heap[We.heap_max]+1]=0,ot=We.heap_max+1;ot<Ie;ot++)(rt=We.heap[ot],dt=Qe[2*Qe[2*rt+1]+1]+1,dt>lt&&(dt=lt,mt++),Qe[2*rt+1]=dt,!(rt>$e))&&(We.bl_count[dt]++,ht=0,rt>=nt&&(ht=at[rt-nt]),ut=Qe[2*rt],We.opt_len+=ut*(dt+ht),et&&(We.static_len+=ut*(Je[2*rt+1]+ht)));if(0!=mt){do{for(dt=lt-1;0===We.bl_count[dt];)dt--;We.bl_count[dt]--,We.bl_count[dt+1]+=2,We.bl_count[lt]--,mt-=2}while(0<mt);for(dt=lt;0!==dt;dt--)for(rt=We.bl_count[dt];0!==rt;)(st=We.heap[--ot],!(st>$e))&&(Qe[2*st+1]!==dt&&(We.opt_len+=(dt-Qe[2*st+1])*Qe[2*st],Qe[2*st+1]=dt),rt--)}}function ae(We,Ke,Qe){var $e=Array(Se+1),Je=0,et,at;for(et=1;et<=Se;et++)$e[et]=Je=Je+Qe[et-1]<<1;for(at=0;at<=Ke;at++){var nt=We[2*at+1];0!==nt&&(We[2*at]=J($e[nt]++,nt))}}function ie(){var We,Ke,Qe,$e,Je,et=Array(Se+1);for(Qe=0,$e=0;$e<ve-1;$e++)for(qe[$e]=Qe,We=0;We<1<<Te[$e];We++)Oe[Qe++]=$e;for(Oe[Qe-1]=$e,Je=0,$e=0;16>$e;$e++)for(Xe[$e]=Je,We=0;We<1<<Le[$e];We++)Ne[Je++]=$e;for(Je>>=7;$e<Pe;$e++)for(Xe[$e]=Je<<7,We=0;We<1<<Le[$e]-7;We++)Ne[256+Je++]=$e;for(Ke=0;Ke<=Se;Ke++)et[Ke]=0;for(We=0;143>=We;)Fe[2*We+1]=8,We++,et[8]++;for(;255>=We;)Fe[2*We+1]=9,We++,et[9]++;for(;279>=We;)Fe[2*We+1]=7,We++,et[7]++;for(;287>=We;)Fe[2*We+1]=8,We++,et[8]++;for(ae(Fe,je+1,et),We=0;We<Pe;We++)Ye[2*We+1]=5,Ye[2*We]=J(We,5);Ue=new E(Fe,Te,Me+1,je,Se),Ge=new E(Ye,Le,0,Pe,Se),He=new E([],Ee,0,De,7)}function ne(We){var Ke;for(Ke=0;Ke<je;Ke++)We.dyn_ltree[2*Ke]=0;for(Ke=0;Ke<Pe;Ke++)We.dyn_dtree[2*Ke]=0;for(Ke=0;Ke<De;Ke++)We.bl_tree[2*Ke]=0;We.dyn_ltree[2*Ae]=1,We.opt_len=We.static_len=0,We.last_lit=We.matches=0}function le(We){8<We.bi_valid?W(We,We.bi_buf):0<We.bi_valid&&(We.pending_buf[We.pending++]=We.bi_buf),We.bi_buf=0,We.bi_valid=0}function oe(We,Ke,Qe,$e){le(We),$e&&(W(We,Qe),W(We,~Qe)),ye.arraySet(We.pending_buf,We.window,Ke,Qe,We.pending),We.pending+=Qe}function se(We,Ke,Qe,$e){var Je=2*Ke,et=2*Qe;return We[Je]<We[et]||We[Je]===We[et]&&$e[Ke]<=$e[Qe]}function de(We,Ke,Qe){for(var $e=We.heap[Qe],Je=Qe<<1;Je<=We.heap_len&&(Je<We.heap_len&&se(Ke,We.heap[Je+1],We.heap[Je],We.depth)&&Je++,!se(Ke,$e,We.heap[Je],We.depth));)We.heap[Qe]=We.heap[Je],Qe=Je,Je<<=1;We.heap[Qe]=$e}function he(We,Ke,Qe){var $e,Je,et=0,at,nt;if(0!==We.last_lit)do $e=We.pending_buf[We.d_buf+2*et]<<8|We.pending_buf[We.d_buf+2*et+1],Je=We.pending_buf[We.l_buf+et],et++,0===$e?$(We,Je,Ke):(at=Oe[Je],$(We,at+Me+1,Ke),nt=Te[at],0!==nt&&(Je-=qe[at],Q(We,Je,nt)),$e--,at=Z($e),$(We,at,Qe),nt=Le[at],0!==nt&&($e-=Xe[at],Q(We,$e,nt)));while(et<We.last_lit);$(We,Ae,Ke)}function ue(We,Ke){var Qe=Ke.dyn_tree,$e=Ke.stat_desc.static_tree,Je=Ke.stat_desc.has_stree,et=Ke.stat_desc.elems,at,nt,lt=-1,ot;for(We.heap_len=0,We.heap_max=Ie,at=0;at<et;at++)0===Qe[2*at]?Qe[2*at+1]=0:(We.heap[++We.heap_len]=lt=at,We.depth[at]=0);for(;2>We.heap_len;)ot=We.heap[++We.heap_len]=2>lt?++lt:0,Qe[2*ot]=1,We.depth[ot]=0,We.opt_len--,Je&&(We.static_len-=$e[2*ot+1]);for(Ke.max_code=lt,at=We.heap_len>>1;1<=at;at--)de(We,Qe,at);ot=et;do at=We.heap[1],We.heap[1]=We.heap[We.heap_len--],de(We,Qe,1),nt=We.heap[1],We.heap[--We.heap_max]=at,We.heap[--We.heap_max]=nt,Qe[2*ot]=Qe[2*at]+Qe[2*nt],We.depth[ot]=(We.depth[at]>=We.depth[nt]?We.depth[at]:We.depth[nt])+1,Qe[2*at+1]=Qe[2*nt+1]=ot,We.heap[1]=ot++,de(We,Qe,1);while(2<=We.heap_len);We.heap[--We.heap_max]=We.heap[1],te(We,Ke),ae(Qe,lt,We.bl_count)}function ce(We,Ke,Qe){var $e,Je=-1,et,at=Ke[1],nt=0,lt=7,ot=4;for(0===at&&(lt=138,ot=3),Ke[2*(Qe+1)+1]=65535,$e=0;$e<=Qe;$e++){if(et=at,at=Ke[2*($e+1)+1],++nt<lt&&et===at)continue;else nt<ot?We.bl_tree[2*et]+=nt:0===et?10>=nt?We.bl_tree[2*Be]++:We.bl_tree[2*ze]++:(et!==Je&&We.bl_tree[2*et]++,We.bl_tree[2*Re]++);nt=0,Je=et,0===at?(lt=138,ot=3):et===at?(lt=6,ot=3):(lt=7,ot=4)}}function ge(We,Ke,Qe){var $e,Je=-1,et,at=Ke[1],nt=0,lt=7,ot=4;for(0===at&&(lt=138,ot=3),$e=0;$e<=Qe;$e++){if(et=at,at=Ke[2*($e+1)+1],++nt<lt&&et===at)continue;else if(nt<ot)do $(We,et,We.bl_tree);while(0!=--nt);else 0===et?10>=nt?($(We,Be,We.bl_tree),Q(We,nt-3,3)):($(We,ze,We.bl_tree),Q(We,nt-11,7)):(et!==Je&&($(We,et,We.bl_tree),nt--),$(We,Re,We.bl_tree),Q(We,nt-3,2));nt=0,Je=et,0===at?(lt=138,ot=3):et===at?(lt=6,ot=3):(lt=7,ot=4)}}function pe(We){var Ke;for(ce(We,We.dyn_ltree,We.l_desc.max_code),ce(We,We.dyn_dtree,We.d_desc.max_code),ue(We,We.bl_desc),Ke=De-1;3<=Ke&&0===We.bl_tree[2*Ve[Ke]+1];Ke--);return We.opt_len+=3*(Ke+1)+5+5+4,Ke}function fe(We,Ke,Qe,$e){var Je;for(Q(We,Ke-257,5),Q(We,Qe-1,5),Q(We,$e-4,4),Je=0;Je<$e;Je++)Q(We,We.bl_tree[2*Ve[Je]+1],3);ge(We,We.dyn_ltree,Ke-1),ge(We,We.dyn_dtree,Qe-1)}function _e(We){var Ke=4093624447,Qe;for(Qe=0;31>=Qe;Qe++,Ke>>>=1)if(1&Ke&&0!==We.dyn_ltree[2*Qe])return xe;if(0!==We.dyn_ltree[18]||0!==We.dyn_ltree[20]||0!==We.dyn_ltree[26])return ke;for(Qe=32;Qe<Me;Qe++)if(0!==We.dyn_ltree[2*Qe])return ke;return xe}function be(We,Ke,Qe,$e){Q(We,0+($e?1:0),3),oe(We,Ke,Qe,!0)}var ye=I("../utils/common"),xe=0,ke=1,we=1,ve=29,Me=256,je=Me+1+ve,Pe=30,De=19,Ie=2*je+1,Se=15,Ce=16,Ae=256,Re=16,Be=17,ze=18,Te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Le=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Fe=Array(2*(je+2));L(Fe);var Ye=Array(2*Pe);L(Ye);var Ne=Array(512);L(Ne);var Oe=Array(256);L(Oe);var qe=Array(ve);L(qe);var Xe=Array(Pe);L(Xe);var Ue,Ge,He,Ze=!1;T._tr_init=function(Ke){Ze||(ie(),Ze=!0),Ke.l_desc=new G(Ke.dyn_ltree,Ue),Ke.d_desc=new G(Ke.dyn_dtree,Ge),Ke.bl_desc=new G(Ke.bl_tree,He),Ke.bi_buf=0,Ke.bi_valid=0,ne(Ke)},T._tr_stored_block=be,T._tr_flush_block=function(Ke,Qe,$e,Je){var et,at,nt=0;0<Ke.level?(2===Ke.strm.data_type&&(Ke.strm.data_type=_e(Ke)),ue(Ke,Ke.l_desc),ue(Ke,Ke.d_desc),nt=pe(Ke),et=Ke.opt_len+3+7>>>3,at=Ke.static_len+3+7>>>3,at<=et&&(et=at)):et=at=$e+5,$e+4<=et&&-1!==Qe?be(Ke,Qe,$e,Je):4===Ke.strategy||at===et?(Q(Ke,(we<<1)+(Je?1:0),3),he(Ke,Fe,Ye)):(Q(Ke,4+(Je?1:0),3),fe(Ke,Ke.l_desc.max_code+1,Ke.d_desc.max_code+1,nt+1),he(Ke,Ke.dyn_ltree,Ke.dyn_dtree)),ne(Ke),Je&&le(Ke)},T._tr_tally=function(Ke,Qe,$e){return Ke.pending_buf[Ke.d_buf+2*Ke.last_lit]=255&Qe>>>8,Ke.pending_buf[Ke.d_buf+2*Ke.last_lit+1]=255&Qe,Ke.pending_buf[Ke.l_buf+Ke.last_lit]=255&$e,Ke.last_lit++,0===Qe?Ke.dyn_ltree[2*$e]++:(Ke.matches++,Qe--,Ke.dyn_ltree[2*(Oe[$e]+Me+1)]++,Ke.dyn_dtree[2*Z(Qe)]++),Ke.last_lit===Ke.lit_bufsize-1},T._tr_align=function(Ke){Q(Ke,we<<1,3),$(Ke,Ae,Fe),ee(Ke)}},{"../utils/common":123}],135:[function(I,R){"use strict";R.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],136:[function(I,R){"use strict";var T=I("./tiffDecoder");R.exports=function(E,G){var Z=new T(E,G);return Z.decode(G)}},{"./tiffDecoder":143}],137:[function(I,R){"use strict";var T={standard:I("./tags/standard"),exif:I("./tags/exif"),gps:I("./tags/gps")};class L{constructor(E){if(!E)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=E,this._map=null}get(E){if("number"==typeof E)return this.fields.get(E);if("string"==typeof E)return this.fields.get(T[this.kind].tagsByName[E]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};var E=T[this.kind].tagsById;for(var G of this.fields.keys())E[G]&&(this._map[E[G]]=this.fields.get(G))}return this._map}}R.exports=L},{"./tags/exif":140,"./tags/gps":141,"./tags/standard":142}],138:[function(I,R,T){"use strict";function L(G,Z){if(1===Z)return G.readUint8();var W=new Uint8Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readUint8();return W}var E=new Map([[1,[1,L]],[2,[1,function(Z,W){var Q=[],$="";for(var J=0;J<W;J++){var ee=String.fromCharCode(Z.readUint8());"\0"===ee?(Q.push($),$=""):$+=ee}return 1===Q.length?Q[0]:Q}]],[3,[2,function(Z,W){if(1===W)return Z.readUint16();var Q=new Uint16Array(W);for(var $=0;$<W;$++)Q[$]=Z.readUint16();return Q}]],[4,[4,function(Z,W){if(1===W)return Z.readUint32();var Q=new Uint32Array(W);for(var $=0;$<W;$++)Q[$]=Z.readUint32();return Q}]],[5,[8,function(Z,W){if(1===W)return Z.readUint32()/Z.readUint32();var Q=Array(W);for(var $=0;$<W;$++)Q[$]=Z.readUint32()/Z.readUint32();return Q}]],[6,[1,function(Z,W){if(1===W)return Z.readInt8();var Q=new Int8Array(W);for(var $=0;$<W;$++)Q[$]=Z.readInt8();return Q}]],[7,[1,L]],[8,[2,function(Z,W){if(1===W)return Z.readInt16();var Q=new Int16Array(W);for(var $=0;$<W;$++)Q[$]=Z.readInt16();return Q}]],[9,[4,function(Z,W){if(1===W)return Z.readInt32();var Q=new Int32Array(W);for(var $=0;$<W;$++)Q[$]=Z.readInt32();return Q}]],[10,[8,function(Z,W){if(1===W)return Z.readInt32()/Z.readInt32();var Q=Array(W);for(var $=0;$<W;$++)Q[$]=Z.readInt32()/Z.readInt32();return Q}]],[11,[4,function(Z,W){if(1===W)return Z.readFloat32();var Q=new Float32Array(W);for(var $=0;$<W;$++)Q[$]=Z.readFloat32();return Q}]],[12,[8,function(Z,W){if(1===W)return Z.readFloat64();var Q=new Float64Array(W);for(var $=0;$<W;$++)Q[$]=Z.readFloat64();return Q}]]]);T.getByteLength=function(G,Z){return E.get(G)[0]*Z},T.readData=function(G,Z,W){return E.get(Z)[1](G,W)}},{}],139:[function(I,R,T){arguments[4][37][0].apply(T,arguments)},{"./decode":136,dup:37}],140:[function(I,R){"use strict";var T={"33434":"ExposureTime","33437":"FNumber","34850":"ExposureProgram","34852":"SpectralSensitivity","34855":"ISOSpeedRatings","34856":"OECF","34864":"SensitivityType","34865":"StandardOutputSensitivity","34866":"RecommendedExposureIndex","34867":"ISOSpeed","34868":"ISOSpeedLatitudeyyy","34869":"ISOSpeedLatitudezzz","36864":"ExifVersion","36867":"DateTimeOriginal","36868":"DateTimeDigitized","37121":"ComponentsConfiguration","37122":"CompressedBitsPerPixel","37377":"ShutterSpeedValue","37378":"ApertureValue","37379":"BrightnessValue","37380":"ExposureBiasValue","37381":"MaxApertureValue","37382":"SubjectDistance","37383":"MeteringMode","37384":"LightSource","37385":"Flash","37386":"FocalLength","37396":"SubjectArea","37500":"MakerNote","37510":"UserComment","37520":"SubsecTime","37521":"SubsecTimeOriginal","37522":"SubsecTimeDigitized","40960":"FlashpixVersion","40961":"ColorSpace","40962":"PixelXDimension","40963":"PixelYDimension","40964":"RelatedSoundFile","41483":"FlashEnergy","41484":"SpatialFrequencyResponse","41486":"FocalPlaneXResolution","41487":"FocalPlaneYResolution","41488":"FocalPlaneResolutionUnit","41492":"SubjectLocation","41493":"ExposureIndex","41495":"SensingMethod","41728":"FileSource","41729":"SceneType","41730":"CFAPattern","41985":"CustomRendered","41986":"ExposureMode","41987":"WhiteBalance","41988":"DigitalZoomRatio","41989":"FocalLengthIn35mmFilm","41990":"SceneCaptureType","41991":"GainControl","41992":"Contrast","41993":"Saturation","41994":"Sharpness","41995":"DeviceSettingDescription","41996":"SubjectDistanceRange","42016":"ImageUniqueID","42032":"CameraOwnerName","42033":"BodySerialNumber","42034":"LensSpecification","42035":"LensMake","42036":"LensModel","42037":"LensSerialNumber","42240":"Gamma"},L={};for(var E in T)L[T[E]]=E;R.exports={tagsById:T,tagsByName:L}},{}],141:[function(I,R){"use strict";var T={"0":"GPSVersionID","1":"GPSLatitudeRef","2":"GPSLatitude","3":"GPSLongitudeRef","4":"GPSLongitude","5":"GPSAltitudeRef","6":"GPSAltitude","7":"GPSTimeStamp","8":"GPSSatellites","9":"GPSStatus","10":"GPSMeasureMode","11":"GPSDOP","12":"GPSSpeedRef","13":"GPSSpeed","14":"GPSTrackRef","15":"GPSTrack","16":"GPSImgDirectionRef","17":"GPSImgDirection","18":"GPSMapDatum","19":"GPSDestLatitudeRef","20":"GPSDestLatitude","21":"GPSDestLongitudeRef","22":"GPSDestLongitude","23":"GPSDestBearingRef","24":"GPSDestBearing","25":"GPSDestDistanceRef","26":"GPSDestDistance","27":"GPSProcessingMethod","28":"GPSAreaInformation","29":"GPSDateStamp","30":"GPSDifferential","31":"GPSHPositioningError"},L={};for(var E in T)L[T[E]]=E;R.exports={tagsById:T,tagsByName:L}},{}],142:[function(I,R){"use strict";var T={"254":"NewSubfileType","255":"SubfileType","256":"ImageWidth","257":"ImageLength","258":"BitsPerSample","259":"Compression","262":"PhotometricInterpretation","263":"Threshholding","264":"CellWidth","265":"CellLength","266":"FillOrder","269":"DocumentName","270":"ImageDescription","271":"Make","272":"Model","273":"StripOffsets","274":"Orientation","277":"SamplesPerPixel","278":"RowsPerStrip","279":"StripByteCounts","280":"MinSampleValue","281":"MaxSampleValue","282":"XResolution","283":"YResolution","284":"PlanarConfiguration","285":"PageName","286":"XPosition","287":"YPosition","288":"FreeOffsets","289":"FreeByteCounts","290":"GrayResponseUnit","291":"GrayResponseCurve","292":"T4Options","293":"T6Options","296":"ResolutionUnit","297":"PageNumber","301":"TransferFunction","305":"Software","306":"DateTime","315":"Artist","316":"HostComputer","317":"Predictor","318":"WhitePoint","319":"PrimaryChromaticities","320":"ColorMap","321":"HalftoneHints","322":"TileWidth","323":"TileLength","324":"TileOffsets","325":"TileByteCounts","326":"BadFaxLines","327":"CleanFaxData","328":"ConsecutiveBadFaxLines","330":"SubIFDs","332":"InkSet","333":"InkNames","334":"NumberOfInks","336":"DotRange","337":"TargetPrinter","338":"ExtraSamples","339":"SampleFormat","340":"SMinSampleValue","341":"SMaxSampleValue","342":"TransferRange","343":"ClipPath","344":"XClipPathUnits","345":"YClipPathUnits","346":"Indexed","347":"JPEGTables","351":"OPIProxy","400":"GlobalParametersIFD","401":"ProfileType","402":"FaxProfile","403":"CodingMethods","404":"VersionYear","405":"ModeNumber","433":"Decode","434":"DefaultImageColor","512":"JPEGProc","513":"JPEGInterchangeFormat","514":"JPEGInterchangeFormatLength","515":"JPEGRestartInterval","517":"JPEGLosslessPredictors","518":"JPEGPointTransforms","519":"JPEGQTables","520":"JPEGDCTables","521":"JPEGACTables","529":"YCbCrCoefficients","530":"YCbCrSubSampling","531":"YCbCrPositioning","532":"ReferenceBlackWhite","559":"StripRowCounts","700":"XMP","32781":"ImageID","32932":"WangAnnotatio","33432":"Copyright","33445":"MDFileTag","33446":"MDScalePixel","33447":"MDColorTable","33448":"MDLabName","33449":"MDSampleInfo","33450":"MDPrepDate","33451":"MDPrepTime","33452":"MDFileUnits","33550":"ModelPixelScaleTag","33723":"IPTC","33918":"INGRPacketDataTag","33919":"INGRFlagRegisters","33920":"IrasBTransformationMatrix","33922":"ModelTiepointTag","34264":"ModelTransformationTag","34377":"Photoshop","34665":"ExifIFD","34675":"ICCProfile","34732":"ImageLayer","34735":"GeoKeyDirectoryTag","34736":"GeoDoubleParamsTag","34737":"GeoAsciiParamsTag","34853":"GPSIFD","34908":"HylaFAXFaxRecvParams","34909":"HylaFAXFaxSubAddress","34910":"HylaFAXFaxRecvTime","37724":"ImageSourceData","40965":"InteroperabilityIFD","42112":"GDAL_METADATA","42113":"GDAL_NODATA","50215":"OceScanjobDescription","50216":"OceApplicationSelector","50217":"OceIdentificationNumber","50218":"OceImageLogicCharacteristics","50706":"DNGVersion","50707":"DNGBackwardVersion","50708":"UniqueCameraModel","50709":"LocalizedCameraModel","50710":"CFAPlaneColor","50711":"CFALayout","50712":"LinearizationTable","50713":"BlackLevelRepeatDim","50714":"BlackLevel","50715":"BlackLevelDeltaH","50716":"BlackLevelDeltaV","50717":"WhiteLevel","50718":"DefaultScale","50719":"DefaultCropOrigin","50720":"DefaultCropSize","50721":"ColorMatrix1","50722":"ColorMatrix2","50723":"CameraCalibration1","50724":"CameraCalibration2","50725":"ReductionMatrix1","50726":"ReductionMatrix2","50727":"AnalogBalance","50728":"AsShotNeutral","50729":"AsShotWhiteXY","50730":"BaselineExposure","50731":"BaselineNoise","50732":"BaselineSharpness","50733":"BayerGreenSplit","50734":"LinearResponseLimit","50735":"CameraSerialNumber","50736":"LensInfo","50737":"ChromaBlurRadius","50738":"AntiAliasStrength","50740":"DNGPrivateData","50741":"MakerNoteSafety","50778":"CalibrationIlluminant1","50779":"CalibrationIlluminant2","50780":"BestQualityScale","50784":"AliasLayerMetadata"},L={};for(var E in T)L[T[E]]=E;R.exports={tagsById:T,tagsByName:L}},{}],143:[function(I,R){"use strict";function T(ae,ie,ne,le){if(8===ne)return new Uint8Array(ae*ie);return 16===ne?new Uint16Array(ae*ie):32===ne&&3===le?new Float32Array(ae*ie):Z("bit depth / sample format",ne+" / "+le)}function L(ae,ie,ne,le){for(var oe=0;oe<le;oe++)ae[ne++]=ie.getUint8(oe);return ne}function E(ae,ie,ne,le,oe){for(var se=0;se<2*le;se+=2)ae[ne++]=ie.getUint16(se,oe);return ne}function G(ae,ie,ne,le,oe){for(var se=0;se<4*le;se+=4)ae[ne++]=ie.getFloat32(se,oe);return ne}function Z(ae,ie){throw new Error("Unsupported "+ae+": "+ie)}function W(ae){if(ae.length){var ie=ae;ae=ie[0];for(var ne=0;ne<ie.length;ne++)ie[ne]!==ae&&Z("bit depth",ie)}return ae}var Q=I("iobuffer"),$=I("./ifd"),J=I("./tiffIfd"),ee=I("./ifdValue"),te={ignoreImageData:!1,onlyFirst:!1};R.exports=class extends Q{constructor(ie,ne){super(ie,ne),this._nextIFD=0}decode(ie){ie=Object.assign({},te,ie);var ne=[];for(this.decodeHeader();this._nextIFD;)if(ne.push(this.decodeIFD(ie)),ie.onlyFirst)return ne[0];return ne}decodeHeader(){var ie=this.readUint16();if(18761===ie)this.setLittleEndian();else if(19789===ie)this.setBigEndian();else throw new Error("invalid byte order: 0x"+ie.toString(16));if(ie=this.readUint16(),42!==ie)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(ie){this.seek(this._nextIFD);var ne;ne=ie.kind?new $(ie.kind):new J;var le=this.readUint16();for(var oe=0;oe<le;oe++)this.decodeIFDEntry(ne);return ie.ignoreImageData||this.decodeImageData(ne),this._nextIFD=this.readUint32(),ne}decodeIFDEntry(ie){var ne=this.offset,le=this.readUint16(),oe=this.readUint16(),se=this.readUint32();if(1>oe||12<oe)return void this.skip(4);var de=ee.getByteLength(oe,se);4<de&&this.seek(this.readUint32());var he=ee.readData(this,oe,se);if(ie.fields.set(le,he),34665===le||34853===le){var ue=this.offset,ce=void 0;34665===le?ce="exif":34853===le&&(ce="gps"),this._nextIFD=he,ie[ce]=this.decodeIFD({kind:ce,ignoreImageData:!0}),this.offset=ue}this.seek(ne),this.skip(12)}decodeImageData(ie){var ne=ie.orientation;switch(ne&&1!==ne&&Z("orientation",ne),ie.type){case 1:case 2:this.readStripData(ie);break;default:Z("image type",ie.type);}}readStripData(ie){var ne=ie.width,le=ie.height,oe=W(ie.bitsPerSample),se=ie.sampleFormat,de=ne*le,he=T(de,1,oe,se),ue=ie.compression,ce=ie.rowsPerStrip,ge=ce*ne,pe=ie.stripOffsets,fe=ie.stripByteCounts,_e=0;for(var be=0;be<pe.length;be++){var ye=this.getStripData(ue,pe[be],fe[be]),xe=de>ge?ge:de;de-=xe,8===oe?_e=L(he,ye,_e,xe):16===oe?_e=E(he,ye,_e,xe,this.isLittleEndian()):32===oe&&3===se?_e=G(he,ye,_e,xe,this.isLittleEndian()):Z("bitDepth",oe)}ie.data=he}getStripData(ie,ne,le){switch(ie){case 1:return new DataView(this.buffer,ne,le);case 2:case 32773:return Z("Compression",ie);default:throw new Error("invalid compression: "+ie);}}}},{"./ifd":137,"./ifdValue":138,"./tiffIfd":144,iobuffer:49}],144:[function(I,R){"use strict";function T(Z){return"number"==typeof Z?[Z]:Z}var L=I("./ifd"),E=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class G extends L{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var Z=new Date,W=E.exec(this.dateTime);return Z.setFullYear(W[1],W[2]-1,W[3]),Z.setHours(W[4],W[5],W[6]),Z}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return T(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return T(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}R.exports=G},{"./ifd":137}],145:[function(I,R){"use strict";function T(G,Z){if("string"!=typeof G&&"function"!=typeof G)throw new TypeError("func argument must be a function");if(void 0===Z&&(Z={}),"object"!=typeof Z||null===Z)throw new TypeError("options argument must be an object");this._workerCode=G.toString(),this._numWorkers=void 0===Z.maxWorkers||"auto"===Z.maxWorkers?Math.min(E-1,1):0<Z.maxWorkers?Math.min(Z.maxWorkers,E):E,this._workers=new Map,this._timeout=Z.timeout||0,this._terminateOnError=!!Z.terminateOnError;var W=Z.deps;"string"==typeof W&&(W=[W]),Array.isArray(W)||(W=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(W)}var L=I("./workerTemplate"),E=navigator.hardwareConcurrency||1;Function.prototype,T.prototype._init=function(G){var Z=L.newWorkerURL(this._workerCode,G);for(var W=0;W<this._numWorkers;W++){var Q=new Worker(Z);Q.onmessage=this._onmessage.bind(this,Q),Q.onerror=this._onerror.bind(this,Q),Q.running=!1,Q.id=W,this._workers.set(Q,null)}URL.revokeObjectURL(Z)},T.prototype._onerror=function(G,Z){if(!this._terminated){this._working--,G.running=!1;var W=this._workers.get(G);W&&W[1](Z.message),this._workers.set(G,null),this._terminateOnError?this.terminate():this._exec()}},T.prototype._onmessage=function(G,Z){if(!this._terminated){this._working--,G.running=!1;var W=this._workers.get(G);W&&W[0](Z.data.data),this._workers.set(G,null),this._exec()}},T.prototype._exec=function(){for(var G of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!G.running)for(var Z=0;Z<this._waiting.length;Z++){var W=this._waiting[Z];if("number"!=typeof W[4]||W[4]===G.id){this._waiting.splice(Z,1),G.postMessage({action:"exec",event:W[0],args:W[1]},W[2]),G.running=!0,G.time=Date.now(),this._workers.set(G,W[3]),this._working++;break}}}},T.prototype.terminate=function(){if(!this._terminated){for(var G of this._workers)G[0].terminate(),G[1]&&G[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},T.prototype.postAll=function(G,Z){if(this._terminated)throw new Error("Cannot post (terminated)");var W=[];for(var Q of this._workers.keys())W.push(this.post(G,Z,[],Q.id));return Promise.all(W)},T.prototype.post=function(G,Z,W,Q){Z===void 0&&(Z=[]),W===void 0&&(W=[]),Array.isArray(Z)||(Z=[Z]),Array.isArray(W)||(W=[W]);var $=this;return new Promise(function(J,ee){if($._terminated)throw new Error("Cannot post (terminated)");$._waiting.push([G,Z,W,[J,ee],Q]),$._exec()})},R.exports=T},{"./workerTemplate":146}],146:[function(I,R,T){"use strict";var L=function(){function G(){this._listeners={}}self.window=self,G.prototype.on=function(Z,W){if(this._listeners[Z])throw new RangeError("there is already a listener for "+Z);if("function"!=typeof W)throw new TypeError("callback argument must be a function");this._listeners[Z]=W},G.prototype._send=function(Z,W,Q){Q===void 0?Q=[]:!Array.isArray(Q)&&(Q=[Q]),self.postMessage({id:Z,data:W},Q)},G.prototype._trigger=function(Z,W){if(!this._listeners[Z])throw new Error("event "+Z+" is not defined");this._listeners[Z].apply(null,W)};var E=new G;self.onmessage=function(Z){switch(Z.data.action){case"exec":Z.data.args.unshift(function(W,Q){E._send(Z.data.id,W,Q)}),E._trigger(Z.data.event,Z.data.args);break;case"ping":E._send(Z.data.id,"pong");break;default:throw new Error("unexpected action: "+Z.data.action);}}}.toString().split("\"CODE\";");T.newWorkerURL=function(G,Z){var W=new Blob(["(",L[0],"importScripts.apply(self, "+JSON.stringify(Z)+");\n","(",G,")();",L[1],")();"],{type:"application/javascript"});return URL.createObjectURL(W)}},{}],147:[function(I,R,T){"use strict";function L(be){return be&&be.__esModule?be:{default:be}}function E(be){if(Array.isArray(be)){for(var ye=0,xe=Array(be.length);ye<be.length;ye++)xe[ye]=be[ye];return xe}return Array.from(be)}Object.defineProperty(T,"__esModule",{value:!0});var G=I("./kind"),Z=I("./kindNames"),W=I("./environment"),Q=I("./extend"),$=L(Q),J=I("./bitMethods"),ee=L(J),te=I("fs"),ae=I("./model/model"),ie=I("./roi/manager"),ne=L(ie),le=I("./mediaTypes"),oe=I("extend"),se=L(oe),de=I("./load"),he=I("../stack/Stack"),ue=L(he),ce=I("blob-util"),ge=I("has-own"),pe=L(ge),fe={configurable:!0,enumerable:!1,get:void 0};class _e{constructor(be,ye,xe,ke){if(void 0===be&&(be=1),void 0===ye&&(ye=1),"object"==typeof be){var we=be,ve=!0===ye;be=we.width,ye=we.height,xe=ve?we.data.slice():we.data,ke={position:we.position,components:we.components,alpha:we.alpha,bitDepth:we.bitDepth,colorModel:we.colorModel,parent:we,meta:we.meta}}if(xe&&!xe.length&&(ke=xe,xe=null),void 0===ke&&(ke={}),this.width=be,this.height=ye,0>=this.width)throw new RangeError("width must be greater than 0");if(0>=this.height)throw new RangeError("height must be greater than 0");Object.defineProperty(this,"parent",{enumerable:!1,writable:!0}),this.parent=ke.parent,this.position=ke.position||[0,0];var Me=void 0;if("string"!=typeof ke.kind)Me=(0,G.getKind)(Z.RGBA);else if(Me=(0,G.getKind)(ke.kind),!Me)throw new RangeError("invalid image kind: "+ke.kind);var je=(0,se.default)({},Me,ke);this.components=je.components,this.alpha=je.alpha+0,this.bitDepth=je.bitDepth,this.colorModel=je.colorModel,this.meta=ke.meta||{},this.computed=null,this.initialize(),xe||(xe=(0,G.createPixelArray)(this)),this.setData(xe)}initialize(){this.size=this.width*this.height,this.sizes=[this.width,this.height],this.channels=this.components+this.alpha,this.maxValue=32===this.bitDepth?Number.MAX_VALUE:Math.pow(2,this.bitDepth)-1,this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=32>this.bitDepth,this.borderSizes=[0,0]}setData(be){var ye=(0,G.getTheoreticalPixelArraySize)(this);if(ye!==be.length)throw new RangeError(`incorrect data size. Should be ${ye} and found ${be.length}`);this.data=be}static load(be,ye){return(0,de.loadImage)(be,ye)}static fromCanvas(be){var ye=be.getContext("2d"),xe=ye.getImageData(0,0,be.width,be.height);return new _e(xe.width,xe.height,xe.data)}static extendMethod(be,ye){var xe=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},ke=xe.inPlace,we=ke!==void 0&&ke,ve=xe.returnThis,Me=!(ve!==void 0)||ve,je=xe.partialArgs,Pe=je===void 0?[]:je,De=xe.stack,Ie=De!==void 0&&De;if(we){if(_e.prototype[be]=function(){this.computed=null;for(var Ae=arguments.length,Re=Array(Ae),Be=0;Be<Ae;Be++)Re[Be]=arguments[Be];var ze=ye.apply(this,[].concat(E(Pe),Re));return Me?this:ze},Ie){var Se="string"==typeof Ie?Ie:be;ue.default.prototype[Se]=Me?function(){for(var Ae of this)Ae[be].apply(Ae,arguments);return this}:function(){var Ae=new ue.default(this.length);for(var Re=0;Re<this.length;Re++){var Be;Ae[Re]=(Be=this[Re])[be].apply(Be,arguments)}return Ae}}}else if(_e.prototype[be]=function(){for(var Ae=arguments.length,Re=Array(Ae),Be=0;Be<Ae;Be++)Re[Be]=arguments[Be];return ye.apply(this,[].concat(E(Pe),Re))},Ie){var Ce="string"==typeof Ie?Ie:be;ue.default.prototype[Ce]=function(){var Ae=new ue.default(this.length);for(var Re=0;Re<this.length;Re++){var Be;Ae[Re]=(Be=this[Re])[be].apply(Be,arguments)}return Ae}}return _e}static extendProperty(be,ye){var xe=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},ke=xe.partialArgs,we=void 0===ke?[]:ke;return fe.get=function(){if(null===this.computed)this.computed={};else if((0,pe.default)(be,this.computed))return this.computed[be];var ve=ye.apply(this,we);return this.computed[be]=ve,ve},Object.defineProperty(_e.prototype,be,fe),_e}static createFrom(be,ye){var xe={width:be.width,height:be.height,position:be.position,components:be.components,alpha:be.alpha,colorModel:be.colorModel,bitDepth:be.bitDepth,parent:be};return(0,se.default)(xe,ye),new _e(xe.width,xe.height,xe)}static isTypeSupported(be){var ye=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"write";if("string"!=typeof be)throw new TypeError("type argument must be a string");if(be=(0,le.getType)(be),"write"===ye)return(0,le.canWrite)(be);throw new TypeError("unknown operation: "+ye)}getPixelIndex(be){var ye=0;for(var xe=0;xe<be.length;xe++)ye+=this.multipliers[xe]*be[xe];return ye}setValueXY(be,ye,xe,ke){return this.data[(ye*this.width+be)*this.channels+xe]=ke,this.computed=null,this}getValueXY(be,ye,xe){return this.data[(ye*this.width+be)*this.channels+xe]}setValue(be,ye,xe){return this.data[be*this.channels+ye]=xe,this.computed=null,this}getValue(be,ye){return this.data[be*this.channels+ye]}setPixelXY(be,ye,xe){return this.setPixel(ye*this.width+be,xe)}getPixelXY(be,ye){return this.getPixel(ye*this.width+be)}setPixel(be,ye){var xe=be*this.channels;for(var ke=0;ke<ye.length;ke++)this.data[xe+ke]=ye[ke];return this.computed=null,this}getPixel(be){var ye=Array(this.channels),xe=be*this.channels;for(var ke=0;ke<this.channels;ke++)ye[ke]=this.data[xe+ke];return ye}toDataURL(){var be=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"image/png",ye=1<arguments.length&&arguments[1]!==void 0&&arguments[1];return ye?new Promise((xe,ke)=>{this.getCanvas().toDataURL((0,le.getType)(be),function(we,ve){we?ke(we):xe(ve)})}):this.getCanvas().toDataURL((0,le.getType)(be))}toBase64(){var be=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"image/png",ye=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(ye)return this.toDataURL(be,!0).then(function(ke){return ke.substring(ke.indexOf(",")+1)});var xe=this.toDataURL(be);return xe.substring(xe.indexOf(",")+1)}toBlob(){var be=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"image/png",ye=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0.8;return(0,ce.canvasToBlob)(this.getCanvas({originalData:!0}),be,ye)}getCanvas(){var be=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ye=be.originalData,xe=void 0!==ye&&ye,ke=void 0;xe?(this.checkProcessable("getInPlaceCanvas",{channels:[4],bitDepth:[8]}),ke=new W.ImageData(this.data,this.width,this.height)):ke=new W.ImageData(this.getRGBAData(),this.width,this.height);var we=new W.Canvas(this.width,this.height),ve=we.getContext("2d");return ve.putImageData(ke,0,0),we}getRGBAData(){this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16]});var be=this.size,ye=new Uint8ClampedArray(4*(this.width*this.height));if(1===this.bitDepth)for(var xe=0;xe<be;xe++){var ke=this.getBit(xe);ye[4*xe]=255*ke,ye[4*xe+1]=255*ke,ye[4*xe+2]=255*ke}else if(1===this.components)for(var we=0;we<be;we++)ye[4*we]=this.data[we*this.channels]>>>this.bitDepth-8,ye[4*we+1]=this.data[we*this.channels]>>>this.bitDepth-8,ye[4*we+2]=this.data[we*this.channels]>>>this.bitDepth-8;else if(3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[ae.RGB]}),this.colorModel===ae.RGB))for(var ve=0;ve<be;ve++)ye[4*ve]=this.data[ve*this.channels]>>>this.bitDepth-8,ye[4*ve+1]=this.data[ve*this.channels+1]>>>this.bitDepth-8,ye[4*ve+2]=this.data[ve*this.channels+2]>>>this.bitDepth-8;if(this.alpha){this.checkProcessable("getRGBAData",{bitDepth:[8,16]});for(var Me=0;Me<be;Me++)ye[4*Me+3]=this.data[Me*this.channels+this.components]>>this.bitDepth-8}else for(var je=0;je<be;je++)ye[4*je+3]=255;return ye}getRoiManager(be){return new ne.default(this,be)}clone(){var be=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ye=be.copyData,xe=!(ye!==void 0)||ye;return new _e(this,xe)}save(be){var ye=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},xe=ye.format,ke=xe===void 0?"png":xe;return new Promise((we,ve)=>{var Me=this.getCanvas(),je=(0,te.createWriteStream)(be),Pe=void 0;switch(ke.toLowerCase()){case"png":Pe=Me.pngStream();break;case"jpg":case"jpeg":Pe=Me.jpegStream();break;default:throw new RangeError("invalid output format: "+ke);}je.on("finish",we),je.on("error",ve),Pe.pipe(je)})}checkProcessable(be){var ye=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},xe=ye.bitDepth,ke=ye.alpha,we=ye.colorModel,ve=ye.components,Me=ye.channels;if("string"!=typeof be)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(xe&&(Array.isArray(xe)||(xe=[xe]),!xe.includes(this.bitDepth)))throw new TypeError("The process: "+be+" can only be applied if bit depth is in: "+xe);if(ke&&(Array.isArray(ke)||(ke=[ke]),!ke.includes(this.alpha)))throw new TypeError("The process: "+be+" can only be applied if alpha is in: "+ke);if(we&&(Array.isArray(we)||(we=[we]),!we.includes(this.colorModel)))throw new TypeError("The process: "+be+" can only be applied if color model is in: "+we);if(ve&&(Array.isArray(ve)||(ve=[ve]),!ve.includes(this.components)))throw new TypeError("The process: "+be+" can only be applied if the number of components is in: "+ve);if(Me&&(Array.isArray(Me)||(Me=[Me]),!Me.includes(this.channels)))throw new TypeError("The process: "+be+" can only be applied if the number of channels is in: "+Me)}checkColumn(be){if(0>be||be>=this.width)throw new RangeError(`checkColumn: column should be included between 0 and ${this.width-1}. Current value: ${be}`)}checkRow(be){if(0>be||be>=this.height)throw new RangeError(`checkRow: row should be included between 0 and ${this.height-1}. Current value: ${be}`)}checkChannel(be){if(0>be||be>=this.channels)throw new RangeError(`checkChannel: channel should be included between 0 and ${this.channels-1}. Current value: ${be}`)}apply(be){for(var ye=0;ye<this.height;ye++)for(var xe=0;xe<this.width;xe++){var ke=(ye*this.width+xe)*this.channels;be.call(this,ke)}}}T.default=_e,(0,$.default)(_e),(0,ee.default)(_e)},{"../stack/Stack":253,"./bitMethods":148,"./environment":161,"./extend":162,"./kind":183,"./kindNames":184,"./load":185,"./mediaTypes":186,"./model/model":187,"./roi/manager":203,"blob-util":6,extend:35,fs:8,"has-own":45}],148:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){for(var G in L)E.prototype[G]=L[G]};var L={setBitXY:function(G,Z){var W=Z*this.width+G;this.data[W>>3]|=1<<7-(7&W)},clearBitXY:function(G,Z){var W=Z*this.width+G;this.data[W>>3]&=~(1<<7-(7&W))},toggleBitXY:function(G,Z){var W=Z*this.width+G;this.data[W>>3]^=1<<7-(7&W)},getBitXY:function(G,Z){var W=Z*this.width+G;return this.data[W>>3]&1<<7-(7&W)?1:0},setBit:function(G){this.data[G>>3]|=1<<7-(7&G)},clearBit:function(G){this.data[G>>3]&=~(1<<7-(7&G))},toggleBit:function(G){this.data[G>>3]^=1<<7-(7&G)},getBit:function(G){return this.data[G>>3]&1<<7-(7&G)?1:0}}},{}],149:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},W=Z.useAlpha,Q=!(W!==void 0)||W,$=Z.nbSlots,J=$===void 0?512:$;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});var ee=Math.log(J)/Math.log(8);if(ee!==Math.floor(ee))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");var te=this.bitDepth-ee,ae=this.data,ie=(0,E.default)(Math.pow(8,ee),0),ne=Math.pow(2,2*ee),le=Math.pow(2,ee);for(var oe=0;oe<ae.length;oe+=this.channels){var se=(ae[oe]>>te)*ne+(ae[oe+1]>>te)*le+(ae[oe+2]>>te);Q&&this.alpha?ie[se]+=ae[oe+this.channels-1]/this.maxValue:ie[se]++}return ie};var L=I("new-array"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"new-array":115}],150:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},G=E.alpha,Z=G===void 0?1:G;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});var W=0;if(Z!==void 0){for(var Q=this.components;Q<this.data.length;Q+=this.channels)this.data[Q]===Z&&W++;return W}return this.size}},{}],151:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}function E($,J){var ee=J.useAlpha,te=J.maxSlots,ae=Math.log2(te);if(!(0,Q.default)(ae))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");var ie=0;this.bitDepth>ae&&(ie=this.bitDepth-ae);var ne=this.data,le=(0,Z.default)(Math.pow(2,Math.min(this.bitDepth,ae)),0);if(ee&&this.alpha){var oe=this.channels-$-1;for(var se=$;se<ne.length;se+=this.channels)le[ne[se]>>ie]+=ne[se+oe]/this.maxValue}else for(var de=$;de<ne.length;de+=this.channels)le[ne[de]>>ie]++;return le}Object.defineProperty(T,"__esModule",{value:!0}),T.getHistogram=function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ee=J.maxSlots,te=void 0===ee?256:ee,ae=J.channel,ie=J.useAlpha,ne=void 0===ie||ie;if(this.checkProcessable("getHistogram",{bitDepth:[8,16]}),void 0===ae){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");ae=0}return E.call(this,ae,{useAlpha:ne,maxSlots:te})},T.getHistograms=function(){var J=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ee=J.maxSlots,te=ee===void 0?256:ee,ae=J.useAlpha,ie=!(ae!==void 0)||ae;this.checkProcessable("getHistograms",{bitDepth:[8,16]});var ne=Array(ie?this.components:this.channels);for(var le=0;le<ne.length;le++)ne[le]=E.call(this,le,{useAlpha:ie,maxSlots:te});return ne};var G=I("new-array"),Z=L(G),W=I("is-integer"),Q=L(W)},{"is-integer":54,"new-array":115}],152:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},G=E.mask,Z=E.region,W=Z===void 0?3:Z,Q=E.removeClosePoints,$=Q===void 0?0:Q,J=E.invert,ee=J!==void 0&&J,te=E.maxEquals,ae=te===void 0?2:te,ie=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),W*=4;var ne=ee?0:1,le=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],oe=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],se=8>=W?1:2,de=[];for(var he=se;he<ie.height-se;he++)for(var ue=se;ue<ie.width-se;ue++)if(!(G&&G.getBitXY(ue,he)!==ne)){var ce=0,ge=0,pe=ie.data[ue+he*ie.width];for(var fe=0;fe<W;fe++)ee?ie.data[ue+le[fe]+(he+oe[fe])*ie.width]>pe&&ce++:ie.data[ue+le[fe]+(he+oe[fe])*ie.width]<pe&&ce++,ie.data[ue+le[fe]+(he+oe[fe])*ie.width]===pe&&ge++;ce+ge===W&&ge<=ae&&de.push([ue,he])}if(0<$)for(var _e=0;_e<de.length;_e++)for(var be=_e+1;be<de.length;be++)Math.sqrt(Math.pow(de[_e][0]-de[be][0],2)+Math.pow(de[_e][1]-de[be][1],2))<$&&(de[_e][0]=de[_e][0]+de[be][0]>>1,de[_e][1]=de[_e][1]+de[be][1]>>1,de.splice(be,1),be--);return de}},{}],153:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("max",{bitDepth:[8,16]});var Z=(0,E.default)(this.channels,-(1/0));for(var W=0;W<this.data.length;W+=this.channels)for(var Q=0;Q<this.channels;Q++)this.data[W+Q]>Z[Q]&&(Z[Q]=this.data[W+Q]);return Z};var L=I("new-array"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"new-array":115}],154:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var G=this.getHistograms({maxSlots:this.maxValue+1}),Z=Array(G.length);for(var W=0;W<G.length;W++){var Q=G[W];Z[W]=(0,L.mean)(Q)}return Z};var L=I("../../util/histogram")},{"../../util/histogram":266}],155:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var G=this.getHistograms({maxSlots:this.maxValue+1}),Z=Array(G.length);for(var W=0;W<G.length;W++){var Q=G[W];Z[W]=(0,L.median)(Q)}return Z};var L=I("../../util/histogram")},{"../../util/histogram":266}],156:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var Z=(0,E.default)(this.channels,+(1/0));for(var W=0;W<this.data.length;W+=this.channels)for(var Q=0;Q<this.channels;Q++)this.data[W+Q]<Z[Q]&&(Z[Q]=this.data[W+Q]);return Z};var L=I("new-array"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"new-array":115}],157:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("points",{bitDepth:[1]});var E=Array(this.size),G=0;for(var Z=0;Z<this.width;Z++)for(var W=0;W<this.height;W++)1===this.getBitXY(Z,W)&&(E[G++]=[Z,W]);return E.length=G,E}},{}],158:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){if(this===E)return[0,0];for(var G=[0,0],Z=this;Z;){if(Z===E)return G;Z.position&&(G[0]+=Z.position[0],G[1]+=Z.position[1]),Z=Z.parent}return!1}},{}],159:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("sum",{bitDepth:[8,16]});var Z=(0,E.default)(this.channels,0);for(var W=0;W<this.data.length;W+=this.channels)for(var Q=0;Q<this.channels;Q++)Z[Q]+=this.data[W+Q];return Z};var L=I("new-array"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"new-array":115}],160:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){return this.checkProcessable("getSvd",{bitDepth:[1]}),L.DC.SVD(this.points)};var L=I("ml-matrix")},{"ml-matrix":88}],161:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=void 0,E=void 0,G=void 0,Z=void 0,W=void 0,Q=void 0;"undefined"==typeof self?"undefined"!=typeof R&&R.exports&&function(){T.env=Q="node",T.isDifferentOrigin=W=()=>!1;var $=I("canvas");T.DOMImage=E=$.Image,T.Canvas=G=$,T.ImageData=Z=$.ImageData;var J=I("fs");T.fetchBinary=L=function(te){return new Promise(function(ae,ie){J.readFile(te,function(ne,le){ne?ie(ne):ae(le.buffer)})})}}():function(){T.env=Q="browser";var $=self.location.origin;T.isDifferentOrigin=W=function(ee){try{var te=new self.URL(ee);return te.origin!==$}catch(ae){return!1}},T.ImageData=Z=self.ImageData,T.DOMImage=E=self.Image,T.Canvas=G=function(ee,te){var ae=self.document.createElement("canvas");return ae.width=ee,ae.height=te,ae},T.fetchBinary=L=function(ee){var te=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ae=te.withCredentials,ie=ae!==void 0&&ae;return new Promise(function(ne,le){var oe=new self.XMLHttpRequest;oe.open("GET",ee,!0),oe.responseType="arraybuffer",oe.withCredentials=ie,oe.onload=function(se){200===this.status?ne(this.response):le(se)},oe.onerror=le,oe.send()})}}(),T.fetchBinary=L,T.DOMImage=E,T.Canvas=G,T.ImageData=Z,T.isDifferentOrigin=W,T.env=Q},{canvas:void 0,fs:8}],162:[function(I,R,T){"use strict";function L(ka){return ka&&ka.__esModule?ka:{default:ka}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(wa){var va={inPlace:!0},Ma={stack:!0};wa.extendMethod("invertGetSet",G.default,va),wa.extendMethod("invertIterator",W.default,va),wa.extendMethod("invertPixel",ee.default,va),wa.extendMethod("invertOneLoop",$.default,va),wa.extendMethod("invertApply",ae.default,va),wa.extendMethod("invert",oe.default,{inPlace:!0,stack:!0}),wa.extendMethod("invertBinaryLoop",ne.default,va),wa.extendMethod("level",we.default,va),wa.extendMethod("add",Me.default,va),wa.extendMethod("subtract",Pe.default,va),wa.extendMethod("multiply",Ce.default,va),wa.extendMethod("divide",Re.default,va),wa.extendMethod("hypotenuse",Ie.default),wa.extendMethod("background",ze.default),wa.extendMethod("flipX",de.default),wa.extendMethod("flipY",ue.default),wa.extendMethod("blurFilter",ge.default),wa.extendMethod("medianFilter",fe.default),wa.extendMethod("gaussianFilter",be.default),wa.extendMethod("sobelFilter",xe.default),wa.extendMethod("crop",Le.default,Ma),wa.extendMethod("cropAlpha",Ve.default,Ma),wa.extendMethod("scale",Ye.default,Ma),wa.extendMethod("hsv",Oe.default),wa.extendMethod("hsl",Xe.default),wa.extendMethod("cmyk",Ge.default),wa.extendMethod("rgba8",Ze.default),wa.extendMethod("grey",Ke.default).extendMethod("gray",Ke.default),wa.extendMethod("mask",$e.default),wa.extendMethod("pad",et.default),wa.extendMethod("resizeBinary",nt.default),wa.extendMethod("colorDepth",ot.default),wa.extendMethod("setBorder",dt.default,va),wa.extendMethod("rotate",rt.rotate),wa.extendMethod("rotateLeft",rt.rotateLeft),wa.extendMethod("rotateRight",rt.rotateRight),wa.extendMethod("getRow",Pt.default),wa.extendMethod("getColumn",It.default),wa.extendMethod("getMatrix",Ct.default),wa.extendMethod("setMatrix",Rt.default),wa.extendMethod("getPixelsArray",zt.default),wa.extendMethod("split",ut.default),wa.extendMethod("getChannel",ct.default),wa.extendMethod("combineChannels",pt.default),wa.extendMethod("setChannel",bt.default),wa.extendMethod("getSimilarity",xt.default),wa.extendMethod("getPixelsGrid",wt.default),wa.extendMethod("getBestMatch",Mt.default),wa.extendMethod("paintMasks",Lt.default,va),wa.extendMethod("paintLabels",Vt.default,va),wa.extendMethod("paintPoints",Yt.default,va),wa.extendMethod("extract",Ot.default),wa.extendMethod("convolution",Xt.default),wa.extendMethod("convolutionFft",Gt.default),wa.extendMethod("floodFill",Zt.default),wa.extendMethod("countAlphaPixels",xa.default),wa.extendMethod("getHistogram",Wt.getHistogram).extendProperty("histogram",Wt.getHistogram),wa.extendMethod("getHistograms",Wt.getHistograms).extendProperty("histograms",Wt.getHistograms),wa.extendMethod("getColorHistogram",Qt.default).extendProperty("colorHistogram",Qt.default),wa.extendMethod("getMin",Jt.default).extendProperty("min",Jt.default),wa.extendMethod("getMax",ta.default).extendProperty("max",ta.default),wa.extendMethod("getSum",ia.default).extendProperty("sum",ia.default),wa.extendMethod("getLocalMaxima",la.default),wa.extendMethod("getMedian",ua.default).extendProperty("median",ua.default),wa.extendMethod("getMean",da.default).extendProperty("mean",da.default),wa.extendMethod("getPoints",ca.default).extendProperty("points",ca.default),wa.extendMethod("getRelativePosition",fa.default),wa.extendMethod("getSvd",ba.default).extendProperty("svd",ba.default)};var E=I("./filter/invertGetSet"),G=L(E),Z=I("./filter/invertIterator"),W=L(Z),Q=I("./filter/invertOneLoop"),$=L(Q),J=I("./filter/invertPixel"),ee=L(J),te=I("./filter/invertApply"),ae=L(te),ie=I("./filter/invertBinaryLoop"),ne=L(ie),le=I("./filter/invert"),oe=L(le),se=I("./filter/flipX"),de=L(se),he=I("./filter/flipY"),ue=L(he),ce=I("./filter/blurFilter"),ge=L(ce),pe=I("./filter/medianFilter"),fe=L(pe),_e=I("./filter/gaussianFilter"),be=L(_e),ye=I("./filter/sobelFilter"),xe=L(ye),ke=I("./filter/level"),we=L(ke),ve=I("./filter/add"),Me=L(ve),je=I("./filter/subtract"),Pe=L(je),De=I("./filter/hypotenuse"),Ie=L(De),Se=I("./filter/multiply"),Ce=L(Se),Ae=I("./filter/divide"),Re=L(Ae),Be=I("./filter/background"),ze=L(Be),Te=I("./transform/crop"),Le=L(Te),Ee=I("./transform/cropAlpha"),Ve=L(Ee),Fe=I("./transform/scale/scale"),Ye=L(Fe),Ne=I("./transform/hsv"),Oe=L(Ne),qe=I("./transform/hsl"),Xe=L(qe),Ue=I("./transform/cmyk"),Ge=L(Ue),He=I("./transform/rgba8"),Ze=L(He),We=I("./transform/grey"),Ke=L(We),Qe=I("./transform/mask/mask"),$e=L(Qe),Je=I("./transform/pad"),et=L(Je),at=I("./transform/resizeBinary"),nt=L(at),lt=I("./transform/colorDepth"),ot=L(lt),rt=I("./transform/rotate"),st=I("./utility/setBorder"),dt=L(st),ht=I("./utility/split"),ut=L(ht),mt=I("./utility/getChannel"),ct=L(mt),gt=I("./utility/combineChannels"),pt=L(gt),_t=I("./utility/setChannel"),bt=L(_t),yt=I("./utility/getSimilarity"),xt=L(yt),kt=I("./utility/getPixelsGrid"),wt=L(kt),vt=I("./utility/getBestMatch"),Mt=L(vt),jt=I("./utility/getRow"),Pt=L(jt),Dt=I("./utility/getColumn"),It=L(Dt),St=I("./utility/getMatrix"),Ct=L(St),At=I("./utility/setMatrix"),Rt=L(At),Bt=I("./utility/getPixelsArray"),zt=L(Bt),Tt=I("./operator/paintMasks"),Lt=L(Tt),Et=I("./operator/paintLabels"),Vt=L(Et),Ft=I("./operator/paintPoints"),Yt=L(Ft),Nt=I("./operator/extract"),Ot=L(Nt),qt=I("./operator/convolution"),Xt=L(qt),Ut=I("./operator/convolutionFft"),Gt=L(Ut),Ht=I("./operator/floodFill"),Zt=L(Ht),Wt=I("./compute/histogram"),Kt=I("./compute/colorHistogram"),Qt=L(Kt),$t=I("./compute/min"),Jt=L($t),ea=I("./compute/max"),ta=L(ea),aa=I("./compute/sum"),ia=L(aa),na=I("./compute/localMaxima"),la=L(na),oa=I("./compute/mean"),da=L(oa),ha=I("./compute/median"),ua=L(ha),ma=I("./compute/points"),ca=L(ma),ga=I("./compute/relativePosition"),fa=L(ga),_a=I("./compute/svd"),ba=L(_a),ya=I("./compute/countAlphaPixels"),xa=L(ya)},{"./compute/colorHistogram":149,"./compute/countAlphaPixels":150,"./compute/histogram":151,"./compute/localMaxima":152,"./compute/max":153,"./compute/mean":154,"./compute/median":155,"./compute/min":156,"./compute/points":157,"./compute/relativePosition":158,"./compute/sum":159,"./compute/svd":160,"./filter/add":163,"./filter/background":164,"./filter/blurFilter":165,"./filter/divide":166,"./filter/flipX":167,"./filter/flipY":168,"./filter/gaussianFilter":169,"./filter/hypotenuse":170,"./filter/invert":171,"./filter/invertApply":172,"./filter/invertBinaryLoop":173,"./filter/invertGetSet":174,"./filter/invertIterator":175,"./filter/invertOneLoop":176,"./filter/invertPixel":177,"./filter/level":178,"./filter/medianFilter":179,"./filter/multiply":180,"./filter/sobelFilter":181,"./filter/subtract":182,"./operator/convolution":188,"./operator/convolutionFft":189,"./operator/extract":190,"./operator/floodFill":191,"./operator/paintLabels":192,"./operator/paintMasks":193,"./operator/paintPoints":194,"./transform/cmyk":204,"./transform/colorDepth":205,"./transform/crop":206,"./transform/cropAlpha":207,"./transform/grey":208,"./transform/hsl":210,"./transform/hsv":211,"./transform/mask/mask":216,"./transform/pad":229,"./transform/resizeBinary":230,"./transform/rgba8":231,"./transform/rotate":232,"./transform/scale/scale":235,"./utility/combineChannels":236,"./utility/getBestMatch":238,"./utility/getChannel":239,"./utility/getColumn":240,"./utility/getMatrix":241,"./utility/getPixelsArray":242,"./utility/getPixelsGrid":243,"./utility/getRow":244,"./utility/getSimilarity":245,"./utility/setBorder":246,"./utility/setChannel":247,"./utility/setMatrix":248,"./utility/split":249}],163:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.channels;if(this.checkProcessable("add",{bitDepth:[8,16]}),Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),Z=(0,E.checkNumberArray)(Z),!isNaN(Z))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]+Z>>0)}else{if(this.data.length!==Z.length)throw new Error("add: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]+Z[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":262,"../../util/value":271}],164:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Q,$){var J=new L.KernelRidgeRegression(W,Q,$),ee=Array(this.size);for(var te=0;te<this.width;te++)for(var ae=0;ae<this.height;ae++)ee[ae*this.width+te]=[te,ae];var ie=J.predict(ee),Z=G.default.createFrom(this);for(var ne=0;ne<this.size;ne++)Z.data[ne]=Math.min(this.maxValue,Math.max(0,ie[ne][0]));return Z};var L=I("ml-regression"),E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../Image":147,"ml-regression":100}],165:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},W=Z.radius,Q=void 0===W?1:W;if(this.checkProcessable("meanFilter",{components:[1],bitDepth:[8,16]}),1>Q)throw new Error("Number of neighbors should be grater than 0");var $=2*Q+1,J=Array($*$);for(var ee=0;ee<J.length;ee++)J[ee]=1;return E.default.call(this,J)};var L=I("../operator/convolutionFft"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../operator/convolutionFft":189}],166:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.channels;if(this.checkProcessable("divide",{bitDepth:[8,16]}),Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),Z=(0,E.checkNumberArray)(Z),!isNaN(Z))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]/Z>>0)}else{if(this.data.length!==Z.length)throw new Error("divide: the: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]/Z[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":262,"../../util/value":271}],167:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(var E=0;E<this.height;E++){var G=E*this.width*this.channels;for(var Z=0;Z<Math.floor(this.width/2);Z++){var W=Z*this.channels+G,Q=(this.width-Z-1)*this.channels+G;for(var $=0;$<this.channels;$++){var J=this.data[W+$];this.data[W+$]=this.data[Q+$],this.data[Q+$]=J}}}return this}},{}],168:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(var E=0;E<Math.floor(this.height/2);E++)for(var G=0;G<this.width;G++){var Z=G*this.channels+E*this.width*this.channels,W=G*this.channels+(this.height-1-E)*this.channels*this.width;for(var Q=0;Q<this.channels;Q++){var $=this.data[Z+Q];this.data[Z+Q]=this.data[W+Q],this.data[W+Q]=$}}return this}},{}],169:[function(I,R,T){"use strict";function L(W,Q){if(1>W)throw new RangeError("Radius should be grater than 0");var $=2*W+1,J=Array($*$),ee=2*(Q*Q),te=Math.PI*ee;for(var ae=0;ae<=W;ae++)for(var ie=ae;ie<=W;ie++){var ne=Math.exp(-(ae*ae+ie*ie)/ee)/te;J[(ae+W)*$+(ie+W)]=ne,J[(ae+W)*$+(-ie+W)]=ne,J[(-ae+W)*$+(ie+W)]=ne,J[(-ae+W)*$+(-ie+W)]=ne,J[(ie+W)*$+(ae+W)]=ne,J[(ie+W)*$+(-ae+W)]=ne,J[(-ie+W)*$+(ae+W)]=ne,J[(-ie+W)*$+(-ae+W)]=ne}return J}function E(W){if(0>=W)throw new RangeError("Sigma should be grater than 0");for(var Q=2*(W*W),$=Math.PI*Q,J=1/$,ee=J,te=0;0.99>ee;){te++,J=Math.exp(-(te*te)/Q)/$,ee+=4*J;for(var ae=1;ae<te;ae++)J=Math.exp(-(ae*ae+te*te)/Q)/$,ee+=8*J;J=4*Math.exp(-(2*te*te)/Q)/$,ee+=J}if(1<ee)throw new Error("unexpected sum over 1");return L(te,W)}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.radius,J=void 0===$?1:$,ee=Q.sigma,te=Q.channels,ae=Q.border,ie=void 0===ae?"copy":ae,ne=Q.algorithm,le=void 0===ne?"auto":ne;this.checkProcessable("gaussian",{bitDepth:[8,16]});var oe=void 0;return ee?oe=E(ee):(ee=0.3*(J-1)+0.8,oe=L(J,ee)),Z.default.call(this,oe,{border:ie,channels:te,algorithm:le})};var G=I("../operator/convolution"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(G)},{"../operator/convolution":188}],170:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},$=Q.bitDepth,J=void 0===$?this.bitDepth:$,ee=Q.channels;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==W.width||this.height!==W.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==W.alpha||this.bitDepth!==W.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==W.channels)throw new Error("hypotenuse: both images must have the same number of channels");var te=G.default.createFrom(this,{bitDepth:J});ee=(0,L.validateArrayOfChannels)(this,{channels:ee});var ae=te.isClamped;for(var ie=0;ie<ee.length;ie++){var ne=ee[ie];for(var le=ne;le<this.data.length;le+=this.channels){var oe=Math.sqrt(this.data[le]*this.data[le]+W.data[le]*W.data[le]);te.data[le]=ae?Math.min(Math.max(Math.round(oe),0),te.maxValue):oe}}return te};var L=I("../../util/channel"),E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../../util/channel":262,"../Image":147}],171:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=G.channels;if(this.checkProcessable("invertOneLoop",{bitDepth:[1,8,16]}),1===this.bitDepth){var W=this.data;for(var Q=0;Q<W.length;Q++)W[Q]=~W[Q]}else{Z=(0,L.validateArrayOfChannels)(this,{channels:Z});for(var $=0;$<Z.length;$++){var J=Z[$];for(var ee=J;ee<this.data.length;ee+=this.channels)this.data[ee]=this.maxValue-this.data[ee]}}return this};var L=I("../../util/channel")},{"../../util/channel":262}],172:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(1===this.bitDepth){var E=this.data;for(var G=0;G<E.length;G++)E[G]=~E[G]}else this.checkProcessable("invertApply",{bitDepth:[8,16]}),this.apply(function(Z){for(var W=0;W<this.components;W++)this.data[Z+W]=this.maxValue-this.data[Z+W]})}},{}],173:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertBinaryLoop",{bitDepth:[1]});for(var E=0;E<this.size;E++)this.toggleBit(E)}},{}],174:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth){var E=this.data;for(var G=0;G<E.length;G++)E[G]=~E[G]}else for(var Z=0;Z<this.width;Z++)for(var W=0;W<this.height;W++)for(var Q=0;Q<this.components;Q++){var $=this.getValueXY(Z,W,Q);this.setValueXY(Z,W,Q,this.maxValue-$)}}},{}],175:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth){var E=this.data;for(var G=0;G<E.length;G++)E[G]=~E[G]}else for(var Z of this.pixels()){var W=Z.index,Q=Z.pixel;for(var $=0;$<this.components;$++)this.setValue(W,$,this.maxValue-Q[$])}}},{}],176:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertOneLoop",{bitDepth:[8,16]});var E=this.data;for(var G=0;G<E.length;G+=this.channels)for(var Z=0;Z<this.components;Z++)E[G+Z]=this.maxValue-E[G+Z]}},{}],177:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertPixel",{bitDepth:[8,16]});for(var E=0;E<this.width;E++)for(var G=0;G<this.height;G++){var Z=this.getPixelXY(E,G);for(var W=0;W<this.components;W++)Z[W]=this.maxValue-Z[W];this.setPixelXY(E,G,Z)}}},{}],178:[function(I,R,T){"use strict";function L(W,Q,$,J){var ee=1e-5,te=Array(W.channels);for(var ae of J)te[ae]=0===Q[ae]&&$[ae]===W.maxValue?0:$[ae]===Q[ae]?0:(W.maxValue+1-ee)/($[ae]-Q[ae]),Q[ae]+=(0.5-ee/2)/te[ae];for(var ie=0;ie<J.length;ie++){var ne=J[ie];if(0!==te[ne])for(var le=0;le<W.data.length;le+=W.channels)W.data[le+ne]=Math.min(Math.max(0,0|(W.data[le+ne]-Q[ne])*te[ne]+0.5),W.maxValue)}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.algorithm,J=void 0===$?"range":$,ee=Q.channels,te=Q.min,ae=void 0===te?this.min:te,ie=Q.max,ne=void 0===ie?this.max:ie;switch(this.checkProcessable("level",{bitDepth:[8,16]}),ee=(0,Z.validateArrayOfChannels)(this,{channels:ee}),J){case"range":0>ae&&(ae=0),ne>this.maxValue&&(ne=this.maxValue),Array.isArray(ae)||(ae=(0,G.default)(ee.length,ae)),Array.isArray(ne)||(ne=(0,G.default)(ee.length,ne)),L(this,ae,ne,ee);break;default:throw new Error("level: algorithm not implement: "+J);}return this};var E=I("new-array"),G=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(E),Z=I("../../util/channel")},{"../../util/channel":262,"new-array":115}],179:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.radius,J=void 0===$?1:$,ee=Q.channels,te=Q.border,ae=void 0===te?"copy":te;if(this.checkProcessable("median",{bitDepth:[8,16]}),1>J)throw new Error("Kernel radius should be greater than 0");ee=(0,L.validateArrayOfChannels)(this,ee,!0);var ie=J,ne=J,le=Z.default.createFrom(this),oe=(2*ie+1)*(2*ne+1),se=Math.floor(oe/2),de=Array(oe);for(var he=0;he<ee.length;he++){var ue=ee[he];for(var ce=ne;ce<this.height-ne;ce++)for(var ge=ie;ge<this.width-ie;ge++){var pe=0;for(var fe=-ne;fe<=ne;fe++)for(var _e=-ie;_e<=ie;_e++){var be=((ce+fe)*this.width+ge+_e)*this.channels+ue;de[pe++]=this.data[be]}var ye=(ce*this.width+ge)*this.channels+ue,xe=de.sort(E.asc)[se];le.data[ye]=xe}}if(this.alpha&&!ee.includes(this.channels))for(var ke=this.components;ke<this.data.length;ke=ke+this.channels)le.data[ke]=this.data[ke];return le.setBorder({size:[ie,ne],algorithm:ae}),le};var L=I("../../util/channel"),E=I("num-sort"),G=I("../Image"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(G)},{"../../util/channel":262,"../Image":147,"num-sort":116}],180:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.channels;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),0>=Z)throw new Error("multiply: the value must be greater than 0");if(Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),Z=(0,E.checkNumberArray)(Z),!isNaN(Z))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]*Z>>0)}else{if(this.data.length!==Z.length)throw new Error("multiply: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]*Z[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":262,"../../util/value":271}],181:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},Q=W.kernelX,$=Q===void 0?G.GRADIENT_X:Q,J=W.kernelY,ee=J===void 0?G.GRADIENT_Y:J,te=W.border,ae=te===void 0?"copy":te,ie=W.channels;this.checkProcessable("sobel",{bitDepth:[8,16]});var ne=E.default.call(this,$,{channels:ie,border:ae,bitDepth:32}),le=E.default.call(this,ee,{channels:ie,border:ae,bitDepth:32});return ne.hypotenuse(le,{bitDepth:this.bitDepth,channels:ie})};var L=I("../operator/convolution"),E=function(W){return W&&W.__esModule?W:{default:W}}(L),G=I("../../util/kernels")},{"../../util/kernels":268,"../operator/convolution":188}],182:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.channels;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),Z=(0,E.checkNumberArray)(Z),!isNaN(Z))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.max(0,this.data[ee+J]-Z>>0)}else{if(this.data.length!==Z.length)throw new Error("substract: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]-Z[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":262,"../../util/value":271}],183:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getKind=function(Q){return Z[Q]},T.getTheoreticalPixelArraySize=function(Q){var $=Q.channels*Q.size;return 1===Q.bitDepth&&($=Math.ceil($/8)),$},T.createPixelArray=function(Q){var $=Q.channels*Q.size,J=void 0;switch(Q.bitDepth){case 1:J=new Uint8Array(Math.ceil($/8));break;case 8:J=new Uint8ClampedArray($);break;case 16:J=new Uint16Array($);break;case 32:J=new Float32Array($);break;default:throw new Error("Cannot create pixel array for bit depth "+Q.bitDepth);}if(Q.alpha)for(var ee=Q.components;ee<J.length;ee+=Q.channels)J[ee]=Q.maxValue;return J};var L=I("./kindNames"),E=function(Q){if(Q&&Q.__esModule)return Q;var $={};if(null!=Q)for(var J in Q)Object.prototype.hasOwnProperty.call(Q,J)&&($[J]=Q[J]);return $.default=Q,$}(L),G=I("./model/model"),Z={};Z[E.BINARY]={components:1,alpha:0,bitDepth:1,colorModel:G.GREY},Z[E.GREYA]={components:1,alpha:1,bitDepth:8,colorModel:G.GREY},Z[E.GREY]={components:1,alpha:0,bitDepth:8,colorModel:G.GREY},Z[E.RGBA]={components:3,alpha:1,bitDepth:8,colorModel:G.RGB},Z[E.RGB]={components:3,alpha:0,bitDepth:8,colorModel:G.RGB},Z[E.CMYK]={components:4,alpha:0,bitDepth:8,colorModel:G.CMYK},Z[E.CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:G.CMYK}},{"./kindNames":184,"./model/model":187}],184:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BINARY="BINARY",T.GREY="GREY",T.GREYA="GREYA",T.RGB="RGB",T.RGBA="RGBA",T.CMYK="CMYK",T.CMYKA="CMYKA"},{}],185:[function(I,R,T){"use strict";function L(_e){return _e&&_e.__esModule?_e:{default:_e}}function E(_e){var be=new Uint8Array(_e.length);for(var ye=0;ye<_e.length;ye++)be[ye]=_e.charCodeAt(ye);return be}function G(_e){return(255&_e)<<8|255&_e>>8}function Z(_e,be,ye){function xe(Me,je){if(!Me)throw new Error(`This kind of image (${ke}) can only be loaded from URL.`);return te(Me,je)}var ke=(0,pe.default)(_e);if(ke)switch(ke.ext){case"png":return Q(_e);case"jpg":{var we=(0,de.decode)(_e),ve=void 0;return we.exif&&(ve=J(we.exif)),xe(ye,{meta:ve})}case"tif":return $(_e);}return xe(ye)}function W(_e,be){var ye=_e.slice(0,64).match(fe),xe=void 0;return xe=ye?Promise.resolve(E((0,ce.default)(_e.slice(ye[0].length)))):(0,oe.fetchBinary)(_e,be),xe.then(ke=>{var we=new Uint8Array(ke);return Z(we,be,_e)})}function Q(_e){var be=new se.PNGDecoder(_e),ye=be.decode(),xe=ye.bitDepth,ke=ye.data.buffer,we=void 0;if(8===xe)we=new Uint8ClampedArray(ke);else if(16===xe){we=new Uint16Array(ke);for(var ve=0;ve<we.length;ve++)we[ve]=G(we[ve])}var Me=ye.colourType,je=void 0,Pe=0;switch(Me){case 0:je=1;break;case 2:je=3;break;case 4:je=1,Pe=1;break;case 6:je=3,Pe=1;break;default:throw new Error(`Unexpected colourType: ${Me}`);}return new ie.default(ye.width,ye.height,we,{components:je,alpha:Pe,bitDepth:xe})}function $(_e){var be=(0,he.decode)(_e);return 1===be.length?ee(be[0]):new le.default(be.map(ee))}function J(_e){var be={tiff:_e};return _e.exif&&(be.exif=_e.exif),_e.gps&&(be.gps=_e.gps),be}function ee(_e){return new ie.default(_e.width,_e.height,_e.data,{components:1,alpha:0,colorModel:null,bitDepth:_e.bitsPerSample.length?_e.bitsPerSample[0]:_e.bitsPerSample,meta:J(_e)})}function te(_e,be){return be=be||{},new Promise(function(ye,xe){var ke=new oe.DOMImage;(0,oe.isDifferentOrigin)(_e)&&(ke.crossOrigin="Anonymous"),ke.onload=function(){var we=ke.width,ve=ke.height,Me=new oe.Canvas(we,ve),je=Me.getContext("2d");je.drawImage(ke,0,0,we,ve);var Pe=je.getImageData(0,0,we,ve).data;ye(new ie.default(we,ve,Pe,be))},ke.onerror=function(){xe(new Error("Could not load "+_e))},ke.src=_e})}Object.defineProperty(T,"__esModule",{value:!0}),T.loadImage=function(be,ye){if("string"==typeof be)return W(be,ye);if(be instanceof ArrayBuffer)return Promise.resolve(Z(new Uint8Array(be),ye));if(be.buffer)return Promise.resolve(Z(be,ye));throw new Error("argument to \"load\" must be a string or buffer.")};var ae=I("./Image"),ie=L(ae),ne=I("../stack/Stack"),le=L(ne),oe=I("./environment"),se=I("fast-png"),de=I("fast-jpeg"),he=I("tiff"),ue=I("atob-lite"),ce=L(ue),ge=I("image-type"),pe=L(ge),fe=/^data:[a-z]+\/([a-z]+);base64,/},{"../stack/Stack":253,"./Image":147,"./environment":161,"atob-lite":5,"fast-jpeg":37,"fast-png":40,"image-type":47,tiff:139}],186:[function(I,R,T){"use strict";function L(J){Q||(Q=new G.default(1,1));var ee=W.get(J);return ee||(ee=new $(J),W.set(J,ee)),ee}Object.defineProperty(T,"__esModule",{value:!0}),T.canWrite=function(ee){return"node"===Z.env&&"image/png"!==ee?!1:L(ee).canWrite()},T.getType=function(ee){return ee.includes("/")||(ee="image/"+ee),ee};var E=I("./Image"),G=function(ee){return ee&&ee.__esModule?ee:{default:ee}}(E),Z=I("./environment"),W=new Map,Q=void 0;class ${constructor(J){this.type=J,this._canWrite=null}canWrite(){return null===this._canWrite&&(this._canWrite=Q.toDataURL(this.type).startsWith("data:"+this.type)),this._canWrite}}},{"./Image":147,"./environment":161}],187:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.RGB="RGB",T.HSL="HSL",T.HSV="HSV",T.CMYK="CMYK",T.GREY="GREY"},{}],188:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($){var J=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},ee=J.channels,te=J.bitDepth,ae=J.normalize,ie=void 0!==ae&&ae,ne=J.divisor,le=void 0===ne?1:ne,oe=J.border,se=void 0===oe?"copy":oe,de=J.algorithm,he=void 0===de?"auto":de,ue=E.default.createFrom(this,{bitDepth:te});ee=(0,G.validateArrayOfChannels)(this,ee,!0);var ce=(0,Z.validateKernel)($);$=ce.kernel,"auto"===he&&(9<$.length||9<$[0].length?he="fft":he="direct"),(4096<this.width||4096<this.height)&&(he="direct");var ge=Math.floor($.length/2),pe=Math.floor($[0].length/2),fe=ue.isClamped,_e=Array(this.height*this.width),be=void 0,ye=void 0,xe=void 0,ke=void 0,we=void 0,ve=void 0;for(ke=0;ke<ee.length;ke++){for(we=ee[ke],xe=0;xe<this.height;xe++)for(ye=0;ye<this.width;ye++)be=xe*this.width+ye,_e[be]=this.data[be*this.channels+we];for(ve="direct"===he?W.direct(_e,$,{rows:this.height,cols:this.width,normalize:ie,divisor:le}):W.fft(_e,$,{rows:this.height,cols:this.width,normalize:ie,divisor:le}),xe=0;xe<this.height;xe++)for(ye=0;ye<this.width;ye++)be=xe*this.width+ye,ue.data[be*this.channels+we]=fe?Math.min(Math.max(ve[be],0),ue.maxValue):ve[be]}if(this.alpha&&!ee.includes(this.channels))for(ye=this.components;ye<this.data.length;ye=ye+this.channels)ue.data[ye]=this.data[ye];return"periodic"!==se&&ue.setBorder({size:[pe,ge],algorithm:se}),ue};var L=I("../Image"),E=function($){return $&&$.__esModule?$:{default:$}}(L),G=I("../../util/channel"),Z=I("../../util/kernel"),W=I("ml-matrix-convolution")},{"../../util/channel":262,"../../util/kernel":267,"../Image":147,"ml-matrix-convolution":79}],189:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return G=Object.assign({},G),G.algorithm="fft",this.convolution(E,G)}},{}],190:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.position;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!Q&&(Q=Z.getRelativePosition(this),!Q))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(1<this.bitDepth){var $=E.default.createFrom(this,{width:Z.width,height:Z.height,alpha:1,position:Q,parent:this});for(var J=0;J<Z.width;J++)for(var ee=0;ee<Z.height;ee++){for(var te=0;te<this.channels;te++){var ae=this.getValueXY(J+Q[0],ee+Q[1],te);$.setValueXY(J,ee,te,ae)}Z.getBitXY(J,ee)||$.setValueXY(J,ee,this.components,0)}return $}var ie=E.default.createFrom(this,{width:Z.width,height:Z.height,position:Q,parent:this});for(var ne=0;ne<Z.height;ne++)for(var le=0;le<Z.width;le++)Z.getBitXY(le,ne)&&this.getBitXY(le+Q[0],ne+Q[1])&&ie.setBitXY(le,ne);return ie};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Image":147}],191:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}function E($,J){this.x=$,this.y=J}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ee=J.x,te=void 0===ee?0:ee,ae=J.y,ie=void 0===ae?0:ae,ne=J.inPlace,le=void 0===ne||ne,oe=le?this:Q.default.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),1===this.bitDepth){var se=this.getBitXY(te,ie);if(se)return oe;var de=new Z.default;for(de.push(new E(te,ie));0<de.length;){var he=de.shift();oe.setBitXY(he.x,he.y);for(var ue=he.x+1;ue<this.width&&!oe.getBitXY(ue,he.y)&&!this.getBitXY(ue,he.y);ue++)oe.setBitXY(ue,he.y),he.y+1<this.height&&!this.getBitXY(ue,he.y+1)&&de.push(new E(ue,he.y+1)),0<=he.y-1&&!this.getBitXY(ue,he.y-1)&&de.push(new E(ue,he.y-1));for(var ce=he.x-1;0<=ce&&!oe.getBitXY(ce,he.y)&&!this.getBitXY(ce,he.y);ce++)oe.setBitXY(ce,he.y),he.y+1<this.height&&!this.getBitXY(ce,he.y+1)&&de.push(new E(ce,he.y+1)),0<=he.y-1&&!this.getBitXY(ce,he.y-1)&&de.push(new E(ce,he.y-1))}}return oe};var G=I("fast-list"),Z=L(G),W=I("../Image"),Q=L(W)},{"../Image":147,"fast-list":38}],192:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z,W){var Q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},$=Q.color,J=void 0===$?"blue":$,ee=Q.colors,te=Q.font,ae=void 0===te?"12px Helvetica":te,ie=Q.rotate,ne=void 0===ie?0:ie;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:L.RGB}),!Array.isArray(Z))throw Error("paintLabels: labels must be an array");if(!Array.isArray(W))throw Error("paintLabels: positions must be an array");if(J&&!Array.isArray(J)&&(J=(0,E.css2array)(J)),ee=ee?ee.map(function(ue){return Array.isArray(ue)?ue:(0,E.css2array)(ue)}):[J],Z.length!==W.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(ae)||(ae=[ae]),Array.isArray(ne)||(ne=[ne]);var le=this.getCanvas({originalData:!0}),oe=le.getContext("2d");for(var se=0;se<Z.length;se++){oe.save();var de=ee[se%ee.length];oe.fillStyle=`rgba(${de[0]},${de[1]},${de[2]},${de[3]/this.maxValue})`,oe.font=ae[se%ae.length];var he=W[se];oe.translate(he[0],he[1]),oe.rotate(ne[se%ne.length]/180*Math.PI),oe.fillText(Z[se],0,0),oe.restore()}return this.setData(oe.getImageData(0,0,this.width,this.height).data),this};var L=I("../model/model"),E=I("../../util/color")},{"../../util/color":263,"../model/model":187}],193:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},Q=W.color,$=Q===void 0?"red":Q,J=W.colors,ee=W.alpha,te=ee===void 0?255:ee,ae=W.randomColors,ie=ae!==void 0&&ae,ne=W.distinctColors,le=ne!==void 0&&ne,oe=W.labels,se=oe===void 0?[]:oe,de=W.labelsPosition,he=de===void 0?[]:de,ue=W.labelColor,ce=ue===void 0?"blue":ue,ge=W.labelFont,pe=ge===void 0?"12px Helvetica":ge;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:L.RGB}),$&&!Array.isArray($)&&($=(0,E.css2array)($)),J&&(J=J.map(function(Pe){return Array.isArray(Pe)?Pe:(0,E.css2array)(Pe)})),Array.isArray(Z)||(Z=[Z]),le&&(J=(0,E.getDistinctColors)(Z.length));for(var fe=0;fe<Z.length;fe++){var _e=Z[fe];J?$=J[fe%J.length]:ie&&($=(0,E.getRandomColor)());for(var be=0;be<_e.width;be++)for(var ye=0;ye<_e.height;ye++)if(_e.getBitXY(be,ye))for(var xe=0;xe<Math.min(this.components,$.length);xe++)if(255===te)this.setValueXY(be+_e.position[0],ye+_e.position[1],xe,$[xe]);else{var ke=this.getValueXY(be+_e.position[0],ye+_e.position[1],xe);ke=Math.round((ke*(255-te)+$[xe]*te)/255),this.setValueXY(be+_e.position[0],ye+_e.position[1],xe,ke)}}if(Array.isArray(se)&&0<se.length){var we=this.getCanvas({originalData:!0}),ve=we.getContext("2d");ve.fillStyle=ce,ve.font=pe;for(var Me=0;Me<Math.min(Z.length,se.length);Me++){var je=he[Me]?he[Me]:Z[Me].position;ve.fillText(se[Me],je[0],je[1])}this.setData(ve.getImageData(0,0,this.width,this.height).data)}return this};var L=I("../model/model"),E=I("../../util/color")},{"../../util/color":263,"../model/model":187}],194:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.color,J=$===void 0?[this.maxValue,0,0]:$,ee=Q.shape;this.checkProcessable("paintPoints",{components:3,bitDepth:[8,16],colorModel:L.RGB});var te=new G.default(ee).getPoints(),ae=Math.min(this.channels,J.length);for(var ie=0;ie<W.length;ie++){var ne=W[ie][0],le=W[ie][1];for(var oe=0;oe<te.length;oe++){var se=te[oe][0],de=te[oe][1];if(0<=ne+se&&0<=le+de&&ne+se<this.width&&le+de<this.height){var he=(ne+se+(le+de)*this.width)*this.channels;for(var ue=0;ue<ae;ue++)this.data[he+ue]=J[ue]}}}return this};var L=I("../model/model"),E=I("../../util/shape"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../../util/shape":270,"../model/model":187}],195:[function(I,R,T){"use strict";function L(oe){return oe&&oe.__esModule?oe:{default:oe}}function E(oe){var se=oe.map,de=se.data,he=new Set,ue=new Map,ce=new Set,ge=[1,0,-1,0],pe=[0,1,0,-1];for(var fe=oe.minX;fe<=oe.maxX;fe++)for(var _e=oe.minY;_e<=oe.maxY;_e++){var be=fe+_e*se.width;if(de[be]===oe.id)for(var ye=0;4>ye;ye++){var xe=fe+ge[ye],ke=_e+pe[ye];if(0<=xe&&0<=ke&&xe<se.width&&ke<se.height){var we=xe+ke*se.width;if(de[we]!==oe.id&&!ce.has(we)){ce.add(we),he.add(de[we]);var ve=ue.get(de[we]);ve?ue.set(de[we],++ve):ue.set(de[we],1)}}}}var Me=Array.from(he),je=Me.map(function(Pe){return ue.get(Pe)});return{ids:Me,lengths:je}}function G(oe){var se=new Set,de=oe.map,he=de.data;for(var ue of[0,oe.height-1])for(var ce=0;ce<oe.width;ce++){var ge=(ue+oe.minY)*de.width+ce+oe.minX;if(0<ce-oe.minX&&he[ge]===oe.id&&he[ge-1]!==oe.id){var pe=he[ge-1];se.add(pe)}if(1<de.width-ce-oe.minX&&he[ge]===oe.id&&he[ge+1]!==oe.id){var fe=he[ge+1];se.add(fe)}}for(var _e of[0,oe.width-1])for(var be=0;be<oe.height;be++){var ye=(be+oe.minY)*de.width+_e+oe.minX;if(0<be-oe.minY&&he[ye]===oe.id&&he[ye-de.width]!==oe.id){var xe=he[ye-de.width];se.add(xe)}if(1<de.height-be-oe.minY&&he[ye]===oe.id&&he[ye+de.width]!==oe.id){var ke=he[ye+de.width];se.add(ke)}}return Array.from(se)}function Z(oe){var se=0,de=oe.map,he=de.data,ue=[0];1<oe.height&&(ue[1]=oe.height-1);for(var ce of ue)for(var ge=1;ge<oe.width-1;ge++){var pe=(ce+oe.minY)*de.width+ge+oe.minX;he[pe]===oe.id&&se++}var fe=[0];1<oe.width&&(fe[1]=oe.width-1);for(var _e of fe)for(var be=0;be<oe.height;be++){var ye=(be+oe.minY)*de.width+_e+oe.minX;he[ye]===oe.id&&se++}return se}function W(oe){var se=0,de=oe.map,he=de.data;for(var ue=1;ue<oe.width-1;ue++)for(var ce=1;ce<oe.height-1;ce++){var ge=(ce+oe.minY)*de.width+ue+oe.minX;he[ge]===oe.id&&(he[ge-1]!==oe.id||he[ge+1]!==oe.id||he[ge-de.width]!==oe.id||he[ge+de.width]!==oe.id)&&se++}return se+oe.box}function Q(oe){var se=0,de=oe.map,he=de.data;for(var ue=1;ue<oe.width-1;ue++)for(var ce=1;ce<oe.height-1;ce++){var ge=(ce+oe.minY)*de.width+ue+oe.minX;he[ge]===oe.id&&(oe.externalIDs.includes(he[ge-1])||oe.externalIDs.includes(he[ge+1])||oe.externalIDs.includes(he[ge-de.width])||oe.externalIDs.includes(he[ge+de.width]))&&se++}return se+oe.box}function $(oe){var se=[oe.id],de=oe.map,he=de.data;if(2<oe.height)for(var ue=0;ue<oe.width;ue++){var ce=oe.minY*de.width+ue+oe.minX;if(se.includes(he[ce])){var ge=he[ce+de.width];se.includes(ge)||oe.boxIDs.includes(ge)||se.push(ge)}}var pe=[,,,,];for(var fe=1;fe<oe.width-1;fe++)for(var _e=1;_e<oe.height-1;_e++){var be=(_e+oe.minY)*de.width+fe+oe.minX;if(se.includes(he[be])){pe[0]=he[be-1],pe[1]=he[be+1],pe[2]=he[be-de.width],pe[3]=he[be+de.width];for(var ye=0;4>ye;ye++){var xe=pe[ye];se.includes(xe)||oe.boxIDs.includes(xe)||se.push(xe)}}}return se}Object.defineProperty(T,"__esModule",{value:!0});var J=I("../Image"),ee=L(J),te=I("../kindNames"),ae=function(se){if(se&&se.__esModule)return se;var de={};if(null!=se)for(var he in se)Object.prototype.hasOwnProperty.call(se,he)&&(de[he]=se[he]);return de.default=se,de}(te),ie=I("../../util/shape"),ne=L(ie);class le{constructor(oe,se){this.map=oe,this.id=se,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(){var oe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},se=oe.scale,de=void 0===se?1:se,he=oe.kind,ue=void 0===he?"":he,ce=void 0;return ce="contour"===ue?this.contourMask:"box"===ue?this.boxMask:"filled"===ue?this.filledMask:"center"===ue?this.centerMask:this.mask,1>de&&(ce=ce.resizeBinary(de),ce.parent=this.mask.parent,ce.position[0]+=this.minX,ce.position[1]+=this.minY),ce}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center?this.computed.center:this.computed.center=[this.width/2>>0,this.height/2>>0]}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){var oe=this.borderIDs,se=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];var de=this.internalIDs;for(var he=0;he<oe.length;he++)de.includes(oe[he])||(this.computed.externalIDs.push(oe[he]),this.computed.externalLengths.push(se[he]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){var oe=E(this);this.computed.borderIDs=oe.ids,this.computed.borderLengths=oe.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs?this.computed.boxIDs:this.computed.boxIDs=G(this)}get internalIDs(){return this.computed.internalIDs?this.computed.internalIDs:this.computed.internalIDs=$(this)}get box(){return this.computed.box?this.computed.box:this.computed.box=Z(this)}get external(){return this.computed.external?this.computed.external:this.computed.external=Q(this)}get border(){return this.computed.border?this.computed.border:this.computed.border=W(this)}get contourMask(){if(this.computed.contourMask)return this.computed.contourMask;var oe=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)for(var de=0;de<this.height;de++)this.map.data[se+this.minX+(de+this.minY)*this.map.width]===this.id&&(0<se&&se<this.width-1&&0<de&&de<this.height-1?(this.map.data[se-1+this.minX+(de+this.minY)*this.map.width]!==this.id||this.map.data[se+1+this.minX+(de+this.minY)*this.map.width]!==this.id||this.map.data[se+this.minX+(de-1+this.minY)*this.map.width]!==this.id||this.map.data[se+this.minX+(de+1+this.minY)*this.map.width]!==this.id)&&oe.setBitXY(se,de):oe.setBitXY(se,de));return this.computed.contour=oe}get boxMask(){if(this.computed.boxMask)return this.computed.boxMask;var oe=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)oe.setBitXY(se,0),oe.setBitXY(se,this.height-1);for(var de=0;de<this.height;de++)oe.setBitXY(0,de),oe.setBitXY(this.width-1,de);return this.computed.boxMask=oe}get mask(){if(this.computed.mask)return this.computed.mask;var oe=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)for(var de=0;de<this.height;de++)this.map.data[se+this.minX+(de+this.minY)*this.map.width]===this.id&&oe.setBitXY(se,de);return this.computed.mask=oe}get filledMask(){if(this.computed.filledMask)return this.computed.filledMask;var oe=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)for(var de=0;de<this.height;de++){var he=se+this.minX+(de+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[he])&&oe.setBitXY(se,de)}return this.computed.filledMask=oe}get centerMask(){if(this.computed.centerMask)return this.computed.centerMask;var oe=new ne.default({kind:"smallCross"}).getMask();return oe.parent=this.map.parent,oe.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=oe}get points(){if(this.computed.points)return this.computed.points;var oe=[];for(var se=0;se<this.height;se++)for(var de=0;de<this.width;de++){var he=(se+this.minY)*this.map.width+de+this.minX;this.map.data[he]===this.id&&oe.push([de,se])}return this.computed.points=oe}get maxLengthPoints(){if(this.computed.maxLengthPoints)return this.computed.maxLengthPoints;var oe=0,se=void 0,de=this.points;for(var he=0;he<de.length;he++)for(var ue=he+1;ue<de.length;ue++){var ce=Math.pow(de[he][0]-de[ue][0],2)+Math.pow(de[he][1]-de[ue][1],2);ce>=oe&&(oe=ce,se=[de[he],de[ue]])}return this.computed.maxLengthPoints=se}get maxLength(){if(this.computed.maxLength)return this.computed.maxLength;var oe=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));return this.computed.maxLength=oe}get angle(){if(this.computed.angle)return this.computed.angle;var oe=this.maxLengthPoints,se=180*-Math.atan2(oe[0][1]-oe[1][1],oe[0][0]-oe[1][0])/Math.PI;return this.computed.angle=se}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface}}}T.default=le},{"../../util/shape":270,"../Image":147,"../kindNames":184}],196:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=I("./Roi"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L);T.default=class{constructor(Z,W){this.roiMap=Z,this.options=W,this.roi=this.createRoi()}createRoi(){var Z=this.roiMap.data,W={};this.roiMap.positive=0,this.roiMap.negative=0;for(var Q=0;Q<Z.length;Q++)Z[Q]&&!W[Z[Q]]&&(W[Z[Q]]=!0,0<Z[Q]?this.roiMap.positive++:this.roiMap.negative++);var $={};for(var J in W)$[J]=new E.default(this.roiMap,1*J);var ee=this.roiMap.width,te=this.roiMap.height;for(var ae=0;ae<ee;ae++)for(var ie=0;ie<te;ie++){var ne=ie*ee+ae;if(0!==Z[ne]){var le=Z[ne],oe=$[le];ae<oe.minX&&(oe.minX=ae),ae>oe.maxX&&(oe.maxX=ae),ie<oe.minY&&(oe.minY=ie),ie>oe.maxY&&(oe.maxY=ie),oe.meanX+=ae,oe.meanY+=ie,oe.surface++}}var se=[];for(var de in W)$[de].meanX/=$[de].surface,$[de].meanY/=$[de].surface,se.push($[de]);return se}}},{"./Roi":195}],197:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});class L{constructor(E,G){this.parent=E,this.width=E.width,this.height=E.height,this.data=G,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}}T.default=L},{}],198:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){function W(de,he){var ue=0,ce=0,ge=Z.getBitXY(de,he),pe=ge?++te:--ae;for(ne[0]=de,le[0]=he;ue<=ce;){var fe=ne[ue&ie],_e=le[ue&ie];if(ee[_e*Z.width+fe]=pe,0<fe&&0===ee[_e*Z.width+fe-1]&&Z.getBitXY(fe-1,_e)===ge&&(ce++,ne[ce&ie]=fe-1,le[ce&ie]=_e,ee[_e*Z.width+fe-1]=-32768),0<_e&&0===ee[(_e-1)*Z.width+fe]&&Z.getBitXY(fe,_e-1)===ge&&(ce++,ne[ce&ie]=fe,le[ce&ie]=_e-1,ee[(_e-1)*Z.width+fe]=-32768),fe<Z.width-1&&0===ee[_e*Z.width+fe+1]&&Z.getBitXY(fe+1,_e)===ge&&(ce++,ne[ce&ie]=fe+1,le[ce&ie]=_e,ee[_e*Z.width+fe+1]=-32768),_e<Z.height-1&&0===ee[(_e+1)*Z.width+fe]&&Z.getBitXY(fe,_e+1)===ge&&(ce++,ne[ce&ie]=fe,le[ce&ie]=_e+1,ee[(_e+1)*Z.width+fe]=-32768),J&&(0<fe&&0<_e&&0===ee[(_e-1)*Z.width+fe-1]&&Z.getBitXY(fe-1,_e-1)===ge&&(ce++,ne[ce&ie]=fe-1,le[ce&ie]=_e-1,ee[(_e-1)*Z.width+fe-1]=-32768),fe<Z.width-1&&0<_e&&0===ee[(_e-1)*Z.width+fe+1]&&Z.getBitXY(fe+1,_e-1)===ge&&(ce++,ne[ce&ie]=fe+1,le[ce&ie]=_e-1,ee[(_e-1)*Z.width+fe+1]=-32768),0<fe&&_e<Z.height-1&&0===ee[(_e+1)*Z.width+fe-1]&&Z.getBitXY(fe-1,_e+1)===ge&&(ce++,ne[ce&ie]=fe-1,le[ce&ie]=_e+1,ee[(_e+1)*Z.width+fe-1]=-32768),fe<Z.width-1&&_e<Z.height-1&&0===ee[(_e+1)*Z.width+fe+1]&&Z.getBitXY(fe+1,_e+1)===ge&&(ce++,ne[ce&ie]=fe+1,le[ce&ie]=_e+1,ee[(_e+1)*Z.width+fe+1]=-32768)),ue++,ce-ue>ie)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}var Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.allowCorners,J=$!==void 0&&$,ee=new Int16Array(Z.size),te=0,ae=0,ie=65535,ne=new Uint16Array(ie+1),le=new Uint16Array(ie+1);for(var oe=0;oe<Z.width;oe++)for(var se=0;se<Z.height;se++)0===ee[se*Z.width+oe]&&W(oe,se);return new E.default(Z,ee)};var L=I("../RoiMap"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../RoiMap":197}],199:[function(I,R,T){"use strict";function L(ie){return ie&&ie.__esModule?ie:{default:ie}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(ne){var le=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},oe=le.allowCorners,se=oe!==void 0&&oe,de=4;se&&(de=8);var he=void 0,ue=void 0,ce=void 0;if(8==de)he=ee,ue=te,ce=ae;else if(4==de)he=Q,ue=$,ce=J;else throw new RangeError("unsupported neighbours count: "+de);var ge=ne.size,pe=ne.width,fe=ne.height,_e=Array(ge),be=new Int16Array(ge),ye=new G.default,xe=1;for(var ke=0;ke<fe;ke++)for(var we=0;we<pe;we++){var ve=we+ke*pe;if(ne.getBit(ve)){var Me=null;for(var je=0;je<ce.length;je++){var Pe=we+he[je],De=ke+ue[je];if(0<=Pe&&0<=De&&Pe<pe&&De<fe){var Ie=_e[Pe+De*pe];Ie?(ce[je]=Ie,(!Me||ce[je].value<Me.value)&&(Me=ce[je])):ce[je]=null}}if(!Me)_e[ve]=ye.add(xe++);else{_e[ve]=Me;for(var Se=0;Se<ce.length;Se++)ce[Se]&&ce[Se]!==Me&&ye.union(Me,ce[Se])}}}for(var Ce=0;Ce<fe;Ce++)for(var Ae=0;Ae<pe;Ae++){var Re=Ae+Ce*pe;ne.getBit(Re)&&(be[Re]=ye.find(_e[Re]).value)}return new W.default(ne,be)};var E=I("ml-disjoint-set"),G=L(E),Z=I("../RoiMap"),W=L(Z),Q=[-1,0],$=[0,-1],J=[null,null],ee=[-1,-1,0,1],te=[0,-1,-1,-1],ae=[null,null,null,null]},{"../RoiMap":197,"ml-disjoint-set":63}],200:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){function Z(je,Pe){var De=be;ke=0,we=1,ye[0]=je,xe[0]=Pe;for(var Ie=!0;ke<we;){var Se=ye[ke&ge],Ce=xe[ke&ge];Ie&=W(Se,Ce,le),ke++}if(!Ie){for(var Ae=0;Ae<we;Ae++){var Re=ye[Ae&ge],Be=xe[Ae&ge],ze=Be*ne.width+Re;he[ze]=0}be=De}return Ie}function W(je,Pe,De){var Ie=he[Pe*ne.width+je],Se=ne.data[Pe*ne.width+je];for(var Ce=Pe-1;Ce<=Pe+1;Ce++)for(var Ae=je-1;Ae<=je+1;Ae++){var Re=Ce*ne.width+Ae;if(0===ue[Re])switch(ue[Re]=1,ce[Re]=ne.data[Re]-Se,De){case le:if(0===ce[Re]){if(0===Ae||0===Ce||Ae===ne.width-1||Ce===ne.height-1)return!1;he[Re]=Ie,ye[we&ge]=Ae,xe[we&ge]=Ce,we++}else{if(0<ce[Re])return!1;te||(he[Re]=Ie,pe[be&ge]=Ae,fe[be&ge]=Ce,be++)}break;case oe:0>=ce[Re]&&(he[Re]=Ie,pe[be&ge]=Ae,fe[be&ge]=Ce,be++);break;default:throw new Error("unreachable");}}return!0}var Q=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},$=Q.allowCorner,J=!($!==void 0)||$,ee=Q.onlyTop,te=ee!==void 0&&ee,ae=Q.invert,ie=ae!==void 0&&ae,ne=this;ne.checkProcessable("fromMaxima",{components:[1]});var le=1,oe=2,se=0,de=0,he=new Int16Array(ne.size),ue=new Int8Array(ne.size),ce=new Float32Array(ne.size),ge=1048575,pe=new Uint16Array(ge+1),fe=new Uint16Array(ge+1),_e=0,be=0,ye=new Uint16Array(ge+1),xe=new Uint16Array(ge+1),ke=0,we=0;for(function(Pe){var De=Pe.maxima,Ie=void 0===De||De;for(var Se=1;Se<ne.height-1;Se++)for(var Ce=1;Ce<ne.width-1;Ce++){var Ae=Ce+Se*ne.width;if(0===ue[Ae]){var Re=Ie?ne.data[Ae]:-ne.data[Ce+Se*ne.width];if(ne.data[Se*ne.width+Ce-1]>Re)continue;if(ne.data[Se*ne.width+Ce+1]>Re)continue;if(ne.data[(Se-1)*ne.width+Ce]>Re)continue;if(ne.data[(Se+1)*ne.width+Ce]>Re)continue;if(J){if(ne.data[(Se-1)*ne.width+Ce-1]>Re)continue;if(ne.data[(Se-1)*ne.width+Ce+1]>Re)continue;if(ne.data[(Se+1)*ne.width+Ce-1]>Re)continue;if(ne.data[(Se+1)*ne.width+Ce+1]>Re)continue}he[Ae]=Ie?++se:--de;var Be=Z(Ce,Se,le);Be||(Ie?--se:++de)}}}(ne,{maxima:!ie});_e<be;){var ve=pe[_e&ge],Me=fe[_e&ge];W(ve,Me,oe),_e++}return new E.default(ne,he)};var L=I("../RoiMap"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../RoiMap":197}],201:[function(I,R,T){"use strict";function L(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($){var J=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ee=new W.default(J),te=new Int16Array(this.size),ae=0,ie=ee.getPoints();for(var ne=0;ne<$.length;ne++){ae++;var le=$[ne][0],oe=$[ne][1];for(var se=0;se<ie.length;se++){var de=ie[se][0],he=ie[se][1];0<=le+de&&0<=oe+he&&le+de<this.width&&oe+he<this.height&&(te[le+de+(oe+he)*this.width]=ae)}}return new G.default(this,te)};var E=I("../RoiMap"),G=L(E),Z=I("./../../../util/shape"),W=L(Z)},{"../RoiMap":197,"./../../../util/shape":270}],202:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var J=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ee=J.points,te=J.mask,ae=J.image,ie=J.fillMaxValue,ne=ie===void 0?this.maxValue:ie,le=J.invert,oe=le!==void 0&&le,se=ae||this;se.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),oe=!oe,ee||(ee=se.getLocalMaxima({invert:oe,mask:te}));var de=oe?0:1,he=new Int16Array(se.size),ue=se.width,ce=se.height,ge=new W.default({comparator:(je,Pe)=>je[2]-Pe[2],strategy:W.default.BinaryHeapStrategy});for(var pe=0;pe<ee.length;pe++){var fe=ee[pe][0]+ee[pe][1]*ue;he[fe]=pe+1;var _e=se.data[fe];(oe&&_e<=ne||!oe&&_e>=ne)&&ge.queue([ee[pe][0],ee[pe][1],_e])}for(;0<ge.length;){var be=ge.dequeue(),ye=be[0]+be[1]*ue;for(var xe=0;4>xe;xe++){var ke=be[0]+Q.dxs[xe],we=be[1]+Q.dys[xe];if(0<=ke&&0<=we&&ke<ue&&we<ce){var ve=ke+we*ue;if(!te||te.getBit(ve)===de){var Me=se.data[ve];(oe&&Me<=ne||!oe&&Me>=ne)&&0===he[ve]&&(he[ve]=he[ye],ge.queue([be[0]+Q.dxs[xe],be[1]+Q.dys[xe],Me]))}}}}return new G.default(se,he)};var E=I("../RoiMap"),G=L(E),Z=I("js-priority-queue"),W=L(Z),Q=I("./../../../util/dxdy.js")},{"../RoiMap":197,"./../../../util/dxdy.js":265,"js-priority-queue":57}],203:[function(I,R,T){"use strict";function L(ge){return ge&&ge.__esModule?ge:{default:ge}}function E(ge,pe,fe,_e,be){var ye={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(var xe=0;xe<fe.length;xe++){var ke=fe[xe],we=ke[0],ve=ke[1],Me=we+ge+(ve+pe)*_e.width,je=_e.data[Me];(0<je||0>je)&&(ye.id.includes(je)?ye.surface[ye.id.indexOf(je)]+=1:(ye.id.push(je),ye.surface.push(1)))}for(var Pe=0;Pe<ye.id.length;Pe++){var De=Math.sign(ye.id[Pe]);De===be?ye.same+=ye.surface[Pe]:ye.opposite+=ye.surface[Pe],ye.roiSurfaceCovered[Pe]=ye.surface[Pe]/fe.length}return ye.total=ye.opposite+ye.same,ye}Object.defineProperty(T,"__esModule",{value:!0});var G=I("./creator/fromMask"),Z=L(G),W=I("./creator/fromMaskConnectedComponentLabelingAlgorithm"),Q=L(W),$=I("./creator/fromMaxima"),J=L($),ee=I("./creator/fromWaterShed"),te=L(ee),ae=I("./creator/fromPoints"),ie=L(ae),ne=I("extend"),le=L(ne),oe=I("../Image"),se=L(oe),de=I("./RoiMap"),he=L(de),ue=I("./RoiLayer"),ce=L(ue);T.default=class{constructor(pe){var fe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this._image=pe,this._options=fe,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=(0,le.default)({},this._options,pe),_e=J.default.call(this._image,pe);this._layers[fe.label]=new ce.default(_e,fe)}fromPoints(pe){var fe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_e=(0,le.default)({},this._options,fe),be=ie.default.call(this._image,pe,fe);return this._layers[_e.label]=new ce.default(be,_e),this}putMap(pe){var fe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_e=new he.default(this._image,pe),be=(0,le.default)({},this._options,fe);return this._layers[be.label]=new ce.default(_e,be),this}fromWaterShed(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=(0,le.default)({},this._options,pe),_e=te.default.call(this._image,pe);this._layers[fe.label]=new ce.default(_e,fe)}fromMask(pe){var fe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_e=(0,le.default)({},this._options,fe),be=Z.default.call(this._image,pe,fe);return this._layers[_e.label]=new ce.default(be,_e),this}fromMaskConnectedComponentLabelingAlgorithm(pe){var fe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_e=(0,le.default)({},this._options,fe),be=Q.default.call(this._image,pe,fe);return this._layers[_e.label]=new ce.default(be,_e),this}getMap(){var pe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},fe=(0,le.default)({},this._options,pe);return this._assertLayerWithLabel(fe.label),this._layers[fe.label].roiMap}getRoiIds(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=this.getRois(pe);if(fe){var _e=Array(fe.length);for(var be=0;be<fe.length;be++)_e[be]=fe[be].id;return _e}throw new Error("ROIs not found")}getRois(){var pe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},fe=pe.label,_e=void 0===fe?this._options.label:fe,be=pe.positive,ye=void 0===be||be,xe=pe.negative,ke=void 0===xe||xe,we=pe.minSurface,ve=void 0===we?0:we,Me=pe.maxSurface,je=void 0===Me?Number.POSITIVE_INFINITY:Me,Pe=pe.minWidth,De=void 0===Pe?0:Pe,Ie=pe.maxWidth,Se=void 0===Ie?Number.POSITIVE_INFINITY:Ie,Ce=pe.minHeight,Ae=void 0===Ce?0:Ce,Re=pe.maxHeight,Be=void 0===Re?Number.POSITIVE_INFINITY:Re;if(!this._layers[_e])throw new Error("getRoi: This Roi layer ("+_e+") does not exists.");var ze=this._layers[_e].roi,Te=Array(ze.length),Le=0;for(var Ee=0;Ee<ze.length;Ee++){var Ve=ze[Ee];(0>Ve.id&&ke||0<Ve.id&&ye)&&Ve.surface>=ve&&Ve.surface<=je&&Ve.width>=De&&Ve.width<=Se&&Ve.height>=Ae&&Ve.height<=Be&&(Te[Le++]=Ve)}return Te.length=Le,Te}getMasks(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=this.getRois(pe),_e=Array(fe.length);for(var be=0;be<fe.length;be++)_e[be]=fe[be].getMask(pe);return _e}getData(){var pe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},fe=(0,le.default)({},this._options,pe);return this._assertLayerWithLabel(fe.label),this._layers[fe.label].roiMap.data}paint(){var pe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},fe=pe.labelProperty;this._painted||(this._painted=this._image.rgba8());var _e=this.getMasks(pe);if(fe){var be=this.getRois(pe);pe.labels=be.map(ye=>ye[fe]),pe.labelsPosition=be.map(ye=>[ye.meanX,ye.meanY])}return this._painted.paintMasks(_e,pe),this._painted}getMask(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=new se.default(this._image.width,this._image.height,{kind:"BINARY"}),_e=this.getMasks(pe);for(var be=0;be<_e.length;be++){var ye=_e[be];for(var xe=0;xe<ye.width;xe++)for(var ke=0;ke<ye.height;ke++)ye.getBitXY(xe,ke)&&fe.setBitXY(xe+ye.position[0],ke+ye.position[1])}return fe}resetPainted(){var pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},fe=pe.image;this._painted=fe?this.image.rgba8():this._image.rgba8()}mergeRoi(){var pe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},fe=(0,le.default)({},this._options,pe),_e=pe.algorithm,be=void 0===_e?"commonBorder":_e,ye=pe.minCommonBorderLength,xe=void 0===ye?5:ye,ke=this.getRois(fe),we=new Set;switch(be.toLowerCase()){case"commonborder":for(var ve=0;ve<ke.length;ve++)for(var Me=0;Me<ke[ve].borderIDs.length;Me++)0!==ke[ve].borderIDs[Me]&&ke[ve].borderIDs[Me]<ke[ve].id&&ke[ve].borderLengths[Me]*xe>=ke[ve].border&&we.add([ke[ve].id,ke[ve].borderIDs[Me]]);break;default:throw new Error(`Unexpected algorithm: ${be}`);}var je=this.getMap(fe).data;for(var Pe=0;Pe<je.length;Pe++)if(0!==je[Pe])for(var De of we)je[Pe]===De[0]&&(je[Pe]=De[1]);return this.putMap(je,fe),this}findCorrespondingRoi(pe){var fe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},_e=this.getRois(fe),be=[];for(var ye=0;ye<_e.length;ye++){var xe=_e[ye],ke=xe.minX,we=xe.minY,ve=xe.points,Me=Math.sign(xe.id),je=E(ke,we,ve,pe,Me);be.push(je)}return be}_assertLayerWithLabel(pe){if(!this._layers[pe])throw new Error(`no layer with label ${pe}`)}}},{"../Image":147,"./RoiLayer":196,"./RoiMap":197,"./creator/fromMask":198,"./creator/fromMaskConnectedComponentLabelingAlgorithm":199,"./creator/fromMaxima":200,"./creator/fromPoints":201,"./creator/fromWaterShed":202,extend:35}],204:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});var W=G.default.createFrom(this,{components:4,colorModel:L.CMYK}),Q=0,$=this.data;for(var J=0;J<$.length;J+=this.channels){var ee=$[J],te=$[J+1],ae=$[J+2],ie=Math.min(this.maxValue-ee,this.maxValue-te,this.maxValue-ae),ne=(this.maxValue-ee-ie)/(1-ie/this.maxValue),le=(this.maxValue-te-ie)/(1-ie/this.maxValue),oe=(this.maxValue-ae-ie)/(1-ie/this.maxValue);W.data[Q++]=ne,W.data[Q++]=le,W.data[Q++]=oe,W.data[Q++]=ie,this.alpha&&(W.data[Q++]=$[J+3])}return W};var L=I("../model/model"),E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../Image":147,"../model/model":187}],205:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8;if(this.checkProcessable("colorDepth",{bitDepth:[8,16]}),![8,16].includes(Z))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===Z)return this.clone();var W=E.default.createFrom(this,{bitDepth:Z});if(8===Z)for(var Q=0;Q<this.data.length;Q++)W.data[Q]=this.data[Q]>>8;else for(var $=0;$<this.data.length;$++)W.data[$]=this.data[$]<<8|this.data[$];return W};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Image":147}],206:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},W=Z.x,Q=void 0===W?0:W,$=Z.y,J=void 0===$?0:$,ee=Z.width,te=void 0===ee?this.width-Q:ee,ae=Z.height,ie=void 0===ae?this.height-J:ae;if(Q=Math.round(Q),J=Math.round(J),te=Math.round(te),ie=Math.round(ie),Q>this.width-1||J>this.height-1)throw new RangeError(`crop: origin (x:${Q}, y:${J}) out of range (${this.width-1}; ${this.height-1})`);if(0>=te||0>=ie)throw new RangeError(`crop: width and height (width:${te}; height:${ie}) must be positive numbers`);if(0>Q||0>J)throw new RangeError(`crop: x and y (x:${Q}, y:${J}) must be positive numbers`);if(te>this.width-Q||ie>this.height-J)throw new RangeError(`crop: (x: ${Q}, y:${J}, width:${te}, height:${ie}) size is out of range`);var ne=E.default.createFrom(this,{width:te,height:ie}),le=te*this.channels,oe=J+ie,se=0,de=Q*this.channels;for(var he=J;he<oe;he++)for(var ue=he*this.width*this.channels+de,ce=ue+le;ue<ce;ue++)ne.data[se++]=this.data[ue];return ne};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Image":147}],207:[function(I,R,T){"use strict";function L(W,Q,$){for(var J=0;J<W.width;J++)for(var ee=0;ee<W.height;ee++)if(W.getValueXY(J,ee,$)>=Q)return J;return-1}function E(W,Q,$,J){for(var ee=0;ee<W.height;ee++)for(var te=J;te<W.width;te++)if(W.getValueXY(te,ee,$)>=Q)return ee;return-1}function G(W,Q,$,J){for(var ee=W.height-1;0<=ee;ee--)for(var te=J;te<W.width;te++)if(W.getValueXY(te,ee,$)>=Q)return ee;return-1}function Z(W,Q,$,J,ee,te){for(var ae=W.width-1;ae>=J;ae--)for(var ie=ee;ie<=te;ie++)if(W.getValueXY(ae,ie,$)>=Q)return ae;return-1}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.checkProcessable("cropAlpha",{alpha:1});var $=Q.threshold,J=$===void 0?this.maxValue:$,ee=L(this,J,this.components);if(-1===ee)throw new Error("Could not find new dimensions. Threshold may be too high.");var te=E(this,J,this.components,ee),ae=G(this,J,this.components,ee),ie=Z(this,J,this.components,ee,te,ae);return this.crop({x:ee,y:te,width:ie-ee+1,height:ae-te+1})}},{}],208:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},$=Q.algorithm,J=$===void 0?"luma709":$,ee=Q.keepAlpha,te=ee!==void 0&&ee,ae=Q.mergeAlpha,ie=!(ae!==void 0)||ae,ne=Q.allowGrey,le=ne!==void 0&&ne,oe={bitDepth:[8,16],alpha:[0,1]};le||(oe.colorModel=[G.RGB],oe.components=[3]),this.checkProcessable("grey",oe),1===this.components&&(J="red"),te&=this.alpha,ie&=this.alpha,te&&(ie=!1);var se=E.default.createFrom(this,{components:1,alpha:te,colorModel:null}),de=Z.methods[J.toLowerCase()];if(!de)throw new Error("Unsupported grey algorithm: "+J);var he=0;for(var ue=0;ue<this.data.length;ue+=this.channels)ie?se.data[he++]=de(this.data,ue,this)*this.data[ue+this.components]/this.maxValue:(se.data[he++]=de(this.data,ue,this),se.alpha&&(se.data[he++]=this.data[ue+this.components]));return se};var L=I("../Image"),E=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(L),G=I("../model/model"),Z=I("./greyAlgorithms")},{"../Image":147,"../model/model":187,"./greyAlgorithms":209}],209:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.methods={luma709:function(G,Z){return 6966*G[Z]+23436*G[Z+1]+2366*G[Z+2]>>15},luma601:function(G,Z){return 9798*G[Z]+19235*G[Z+1]+3735*G[Z+2]>>15},maximum:function(G,Z){return Math.max(G[Z],G[Z+1],G[Z+2])},minimum:function(G,Z){return Math.min(G[Z],G[Z+1],G[Z+2])},average:function(G,Z){return(G[Z]+G[Z+1]+G[Z+2])/3>>0},minmax:function(G,Z){return(Math.max(G[Z],G[Z+1],G[Z+2])+Math.min(G[Z],G[Z+1],G[Z+2]))/2},red:function(G,Z){return G[Z]},green:function(G,Z){return G[Z+1]},blue:function(G,Z){return G[Z+2]},cyan:function(G,Z,W){var Q=L.black(G,Z,W);return(W.maxValue-G[0]-Q)/(1-Q/W.maxValue)>>0},magenta:function(G,Z,W){var Q=L.black(G,Z,W);return(W.maxValue-G[1]-Q)/(1-Q/W.maxValue)>>0},yellow:function(G,Z,W){var Q=L.black(G,Z,W);return(W.maxValue-G[2]-Q)/(1-Q/W.maxValue)>>0},black:function(G,Z,W){return Math.min(W.maxValue-G[Z],W.maxValue-G[Z+1],W.maxValue-G[Z+2])},hue:function(G,Z,W){var Q=L.min(G,Z),$=L.max(G,Z);if($===Q)return 0;var E=0,J=$-Q;switch($){case G[Z]:E=(G[Z+1]-G[Z+2])/J+(G[Z+1]<G[Z+2]?6:0);break;case G[Z+1]:E=(G[Z+2]-G[Z])/J+2;break;case G[Z+2]:E=(G[Z]-G[Z+1])/J+4;break;default:throw new Error("unreachable");}return E/6*W.maxValue>>0},saturation:function(G,Z,W){var Q=L.min(G,Z),$=L.max(G,Z);return 0===$?0:($-Q)/$*W.maxValue},lightness:function(G,Z){var W=L.min(G,Z),Q=L.max(G,Z);return(Q+W)/2}};Object.defineProperty(L,"luminosity",{enumerable:!1,value:L.lightness}),Object.defineProperty(L,"luminance",{enumerable:!1,value:L.lightness}),Object.defineProperty(L,"min",{enumerable:!1,value:L.minimum}),Object.defineProperty(L,"max",{enumerable:!1,value:L.maximum}),Object.defineProperty(L,"brightness",{enumerable:!1,value:L.maximum}),T.names=Object.keys(L)},{}],210:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});var W=G.default.createFrom(this,{colorModel:L.HSL}),Q=Math.floor(this.maxValue/2),$=0,J=this.data;for(var ee=0;ee<J.length;ee+=this.channels){var te=J[ee],ae=J[ee+1],ie=J[ee+2],ne=Math.max(te,ae,ie),le=Math.min(te,ae,ie),oe=0,se=0,de=(ne+le)/2;if(ne!==le){var he=ne-le;switch(se=de>Q?he/(2-ne-le):he/(ne+le),ne){case te:oe=(ae-ie)/he+(ae<ie?6:0);break;case ae:oe=(ie-te)/he+2;break;case ie:oe=(te-ae)/he+4;break;default:throw new Error("unreachable");}oe/=6}W.data[$++]=oe*this.maxValue,W.data[$++]=se*this.maxValue,W.data[$++]=de,this.alpha&&(W.data[$++]=J[ee+3])}return W};var L=I("../model/model"),E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../Image":147,"../model/model":187}],211:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});var W=G.default.createFrom(this,{colorModel:L.HSV}),Q=0,$=this.data;for(var J=0;J<$.length;J+=this.channels){var ee=$[J],te=$[J+1],ae=$[J+2],ie=Math.min(ee,te,ae),ne=Math.max(ee,te,ae),le=ne-ie,oe=0,se=0===ne?0:le/ne;if(ne!==ie){switch(ne){case ee:oe=(te-ae)/le+(te<ae?6:0);break;case te:oe=(ae-ee)/le+2;break;case ae:oe=(ee-te)/le+4;break;default:throw new Error("unreachable");}oe/=6}W.data[Q++]=oe*this.maxValue,W.data[Q++]=se*this.maxValue,W.data[Q++]=ne,this.alpha&&(W.data[Q++]=$[J+3])}return W};var L=I("../model/model"),E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../Image":147,"../model/model":187}],212:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=0;for(var Z=0;Z<E.length;Z++)if(0!==E[Z]){G=Z;break}var W=E.length-1;for(var Q=E.length-1;Q>=G;Q--)if(0!==E[Q]){W=Q;break}var $=1/(W-G),J=Array(E.length),ee=0,te=0;for(var ae=G;ae<E.length;ae++)ee+=ae*E[ae],te+=E[ae],J[ae]=ee/te;var ie=Array(E.length);ee=te=0;for(var ne=W;0<ne;ne--)ee+=ne*E[ne],te+=E[ne],ie[ne-1]=ee/te;var le=-1,oe=Number.MAX_VALUE;for(var se=0;se<E.length;se++){var de=0,he=void 0;for(var ue=0;ue<=se;ue++)he=1/(1+$*Math.abs(ue-J[se])),1e-6>he||0.999999<he||(de+=E[ue]*(-he*Math.log(he)-(1-he)*Math.log(1-he)));for(var ce=se+1;ce<E.length;ce++)he=1/(1+$*Math.abs(ce-ie[se])),1e-6>he||0.999999<he||(de+=E[ce]*(-he*Math.log(he)-(1-he)*Math.log(1-he)));de<oe&&(oe=de,le=se)}return le}},{}],213:[function(I,R,T){"use strict";function L(E){var G=!1,Z=0;for(var W=1;W<E.length-1;W++)if(E[W-1]<E[W]&&E[W+1]<E[W]&&(Z++,2<Z))return!1;return 2==Z&&(G=!0),G}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G){for(var Z=G.slice(),W=0;!L(Z);){var Q=0,$=0,J=Z[0];for(var ee=0;ee<G.length-1;ee++)Q=$,$=J,J=Z[ee+1],Z[ee]=(Q+$+J)/3;if(Z[G.length-1]=($+J)/3,W++,1e4<W)throw new Error("Intermodes Threshold not found after 10000 iterations")}var te=0;for(var ae=1;ae<G.length-1;ae++)Z[ae-1]<Z[ae]&&Z[ae+1]<Z[ae]&&(te+=ae);return Math.floor(te/2)}},{}],214:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=void 0,Z=void 0,W=void 0,Q=void 0,$=0;for(var J=1;J<E.length;J++)if(0<E[J]){$=J+1;break}for(;!0;){G=0,W=0;for(var ee=0;ee<$;ee++)W=W+E[ee],G=G+E[ee]*ee;Q=0,Z=0;for(var te=$+1;te<E.length;te++)Z+=E[te],Q+=E[te]*te;if(0<W&&0<Z&&(G/=W,Q/=Z,$===Math.round((G+Q)/2)))break;if($++,$>E.length-2)throw new Error("Threshold not found")}return $}},{}],215:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=void 0,W=void 0,Q=void 0,$=void 0,J=void 0,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,le=void 0,oe=void 0;le=0.5,ne=0;for(var se=0;se<E.length;se++)ne+=se*E[se];ne/=G,te=ne;do{ee=te,Z=0|ee+0.5,W=0,$=0;for(var de=0;de<=Z;de++)W+=de*E[de],$+=E[de];ae=0===$?0:W/$,Q=0,J=0;for(var he=Z+1;he<E.length;he++)Q+=he*E[he],J+=E[he];ie=0===J?0:Q/J,oe=(ae-ie)/(Math.log(ae)-Math.log(ie)),te=oe<-Number.EPSILON?0|oe-0.5:0|oe+0.5}while(Math.abs(te-ee)>le);return Z}},{}],216:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.algorithm,J=void 0===$?"threshold":$,ee=Q.threshold,te=void 0===ee?0.5:ee,ae=Q.useAlpha,ie=void 0===ae||ae,ne=Q.invert,le=void 0!==ne&&ne;if(this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),"threshold"===J)te=(0,Z.getThreshold)(te,this.maxValue);else{var oe=G.methods[J.toLowerCase()];if(oe){var se=this.getHistogram();te=oe(se,this.size)}else throw new Error("mask transform unknown algorithm: "+J)}var de=new E.default(this.width,this.height,{kind:"BINARY",parent:this}),he=0;if(this.alpha&&ie)for(var ue=0;ue<this.data.length;ue+=this.channels){var ce=this.data[ue]+(this.maxValue-this.data[ue])*(this.maxValue-this.data[ue+1])/this.maxValue;(le&&ce<=te||!le&&ce>=te)&&de.setBit(he),he++}else for(var ge=0;ge<this.data.length;ge+=this.channels)(le&&this.data[ge]<=te||!le&&this.data[ge]>=te)&&de.setBit(he),he++;return de};var L=I("../../Image"),E=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(L),G=I("./maskAlgorithms"),Z=I("../../../util/converter")},{"../../../util/converter":264,"../../Image":147,"./maskAlgorithms":217}],217:[function(I,R,T){"use strict";function L(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}Object.defineProperty(T,"__esModule",{value:!0}),T.names=T.methods=void 0;var E=I("./huang"),G=L(E),Z=I("./intermodes"),W=L(Z),Q=I("./isodata"),$=L(Q),J=I("./li"),ee=L(J),te=I("./maxEntropy"),ae=L(te),ie=I("./mean"),ne=L(ie),le=I("./minError"),oe=L(le),se=I("./minimum"),de=L(se),he=I("./moments"),ue=L(he),ce=I("./otsu"),ge=L(ce),pe=I("./percentile"),fe=L(pe),_e=I("./renyiEntropy.js"),be=L(_e),ye=I("./shanbhag"),xe=L(ye),ke=I("./triangle"),we=L(ke),ve=I("./yen"),Me=L(ve),je=T.methods={huang:G.default,intermodes:W.default,isodata:$.default,li:ee.default,maxentropy:ae.default,mean:ne.default,minerror:oe.default,minimum:de.default,moments:ue.default,otsu:ge.default,percentile:fe.default,renyientropy:be.default,shanbhag:xe.default,triangle:we.default,yen:Me.default};T.names=["threshold"].concat(Object.keys(je))},{"./huang":212,"./intermodes":213,"./isodata":214,"./li":215,"./maxEntropy":218,"./mean":219,"./minError":220,"./minimum":221,"./moments":222,"./otsu":223,"./percentile":224,"./renyiEntropy.js":225,"./shanbhag":226,"./triangle":227,"./yen":228}],218:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=Array(E.length);for(var W=0;W<E.length;W++)Z[W]=E[W]/G;var Q=Array(E.length),$=Array(E.length);Q[0]=Z[0],$[0]=1-Q[0];for(var J=1;J<E.length;J++)Q[J]=Q[J-1]+Z[J],$[J]=1-Q[J];var ee=0;for(var te=0;te<E.length;te++)if(Math.abs(Q[te])>=Number.EPSILON){ee=te;break}var ae=E.length-1;for(var ie=E.length-1;ie>=ee;ie--)if(Math.abs($[ie])>=Number.EPSILON){ae=ie;break}var ne=-1,le=void 0,oe=Number.MIN_VALUE,se=void 0,de=void 0;for(var he=ee;he<=ae;he++){se=0;for(var ue=0;ue<=he;ue++)0!==E[ue]&&(se-=Z[ue]/Q[he]*Math.log(Z[ue]/Q[he]));de=0;for(var ce=he+1;ce<E.length;ce++)0!==E[ce]&&(de-=Z[ce]/$[he]*Math.log(Z[ce]/$[he]));le=se+de,oe<le&&(oe=le,ne=he)}return ne}},{}],219:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=0;for(var W=0;W<E.length;W++)Z+=W*E[W];return Math.floor(Z/G)}},{}],220:[function(I,R,T){"use strict";function L(Z,W){var Q=0;for(var $=0;$<=W;$++)Q+=Z[$];return Q}function E(Z,W){var Q=0;for(var $=0;$<=W;$++)Q+=$*Z[$];return Q}function G(Z,W){var Q=0;for(var $=0;$<=W;$++)Q+=$*$*Z[$];return Q}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Q){var $=void 0,J=-2,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,le=void 0,oe=void 0,se=void 0,de=void 0,he=void 0,ue=void 0,ce=0;for(var ge=0;ge<W.length;ge++)ce+=ge*W[ge];for(ce/=Q,$=ce;$!==J;){var pe=L(W,$),fe=L(W,W.length-1),_e=E(W,$),be=E(W,W.length-1),ye=G(W,$),xe=G(W,W.length-1);if(ee=_e/pe,te=(be-_e)/(fe-pe),ae=pe/fe,ie=(fe-pe)/fe,ne=ye/pe-ee*ee,le=(xe-ye)/(fe-pe)-te*te,oe=1/ne-1/le,se=ee/ne-te/le,de=ee*ee/ne-te*te/le+Math.log10(ne*(ie*ie)/(le*(ae*ae))),he=se*se-oe*de,0>he)return $;J=$,ue=(se+Math.sqrt(he))/oe,$=isNaN(ue)?J:Math.floor(ue)}return $}},{}],221:[function(I,R,T){"use strict";function L(Z){var W=Array(Z.length);for(var Q=1;Q<Z.length-1;Q++)W[Q]=(Z[Q-1]+Z[Q]+Z[Q+1])/3;return W[0]=(Z[0]+Z[1])/3,W[Z.length-1]=(Z[Z.length-2]+Z[Z.length-1])/3,W}function E(Z,W){var Q=void 0;for(var $=1;$<W;$++)if(Z[$-1]>Z[$]&&Z[$+1]>=Z[$]){Q=$;break}return Q}function G(Z){var W=Z.length,Q=!1,$=0;for(var J=1;J<W-1;J++)if(Z[J-1]<Z[J]&&Z[J+1]<Z[J]&&($++,2<$))return!1;return 2==$&&(Q=!0),Q}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){if(2>W.length)return 0;var Q=0,$=-1,J=-1,ee=Array(W.length);for(var te=0;te<W.length;te++)ee[te]=W[te],0<W[te]&&(J=te);for(;!G(ee);)if(ee=L(ee),Q++,1e4<Q)return $;return $=E(ee,J),$}},{}],222:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=1,W=0,Q=0,$=0,J=0,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,le=void 0,oe=-1,se=E.length,de=Array(se);for(var he=0;he<se;he++)de[he]=E[he]/G;for(var ue=0;ue<se;ue++)W+=ue*de[ue],Q+=ue*ue*de[ue],$+=ue*ue*ue*de[ue];te=Z*Q-W*W,ae=(-Q*Q+W*$)/te,ie=(Z*-$+Q*W)/te,ne=0.5*(-ie-Math.sqrt(ie*ie-4*ae)),le=0.5*(-ie+Math.sqrt(ie*ie-4*ae)),ee=(le-W)/(le-ne);for(var ce=0;ce<se;ce++)if(J+=de[ce],J>ee){oe=ce;break}return oe}},{}],223:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=0,W=0,Q=0,$=0,J=void 0,ee=void 0,te=0,ae=0,ie=0;for(var ne=1;ne<E.length;++ne)Z+=ne*E[ne];for(var le=1;le<E.length;++le)if(Q+=E[le],0!=Q){if($=G-Q,0==$)break;W+=le*E[le],J=W/Q,ee=(Z-W)/$,ae=Q*$*(J-ee)*(J-ee),ae>=te&&(ie=le,te=ae)}return ie}},{}],224:[function(I,R,T){"use strict";function L(E,G){var Z=0;for(var W=0;W<=G;W++)Z+=E[W];return Z}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=-1,Z=Array(E.length),W=L(E,E.length-1),Q=1;for(var $=0;$<E.length;$++)Z[$]=Math.abs(L(E,$)/W-0.5),Z[$]<Q&&(Q=Z[$],G=$);return G}},{}],225:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G,Z){var W=void 0,Q=void 0,$=void 0,J=Array(G.length),ee=Array(G.length),te=Array(G.length),ae=0,ie=0,ne=0,le=0,oe=0,se=0;for(var de=0;de<G.length;de++)J[de]=G[de]/Z;ee[0]=J[0],te[0]=1-ee[0];for(var he=1;he<G.length;he++)ee[he]=ee[he-1]+J[he],te[he]=1-ee[he];Q=0;for(var ue=0;ue<G.length;ue++)if(Math.abs(ee[ue])>=Number.EPSILON){Q=ue;break}$=G.length-1;for(var ce=G.length-1;ce>=Q;ce--)if(Math.abs(te[ce])>=Number.EPSILON){$=ce;break}for(var ge=Q;ge<=$;ge++){var pe=0,fe=0,_e=0;for(var be=0;be<=ge;be++)0!==G[be]&&(pe-=J[be]/ee[ge]*Math.log(J[be]/ee[ge])),fe+=Math.sqrt(J[be]/ee[ge]),_e+=J[be]*J[be]/(ee[ge]*ee[ge]);var ye=0,xe=0,ke=0;for(var we=ge+1;we<G.length;we++)0!==G[we]&&(ye-=J[we]/te[ge]*Math.log(J[we]/te[ge])),xe+=Math.sqrt(J[we]/te[ge]),ke+=J[we]*J[we]/(te[ge]*te[ge]);var ve=pe+ye,Me=2*(0<fe*xe?Math.log(fe*xe):0),je=-1*(0<_e*ke?Math.log(_e*ke):0);ve>le&&(le=ve,ae=ge),Me>oe&&(oe=Me,ie=ge),je>se&&(se=je,ne=ge)}var Pe=[ae,ie,ne];Pe.sort(L.asc);var De=void 0;De=5>=Math.abs(Pe[0]-Pe[1])?5>=Math.abs(Pe[1]-Pe[2])?[1,2,1]:[0,1,3]:5>=Math.abs(Pe[1]-Pe[2])?[3,1,0]:[1,2,1];var Ie=ee[Pe[2]]-ee[Pe[0]];return W=Math.round(Pe[0]*(ee[Pe[0]]+0.25*Ie*De[0])+0.25*Pe[1]*Ie*De[1]+Pe[2]*(te[Pe[2]]+0.25*Ie*De[2])),W};var L=I("num-sort")},{"num-sort":116}],226:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=Array(E.length);for(var W=0;W<E.length;W++)Z[W]=E[W]/G;var Q=Array(E.length),$=Array(E.length);Q[0]=Z[0],$[0]=1-Q[0];for(var J=1;J<E.length;J++)Q[J]=Q[J-1]+Z[J],$[J]=1-Q[J];var ee=0;for(var te=0;te<E.length;te++)if(Math.abs(Q[te])>=Number.EPSILON){ee=te;break}var ae=E.length-1;for(var ie=E.length-1;ie>=ee;ie--)if(Math.abs($[ie])>=Number.EPSILON){ae=ie;break}var ne=-1,le=Number.MAX_VALUE,oe=void 0,se=void 0,de=void 0,he=void 0;for(var ue=ee;ue<=ae;ue++){de=0,oe=0.5/Q[ue];for(var ce=1;ce<=ue;ce++)de-=Z[ce]*Math.log(1-oe*Q[ce-1]);de*=oe,he=0,oe=0.5/$[ue];for(var ge=ue+1;ge<E.length;ge++)he-=Z[ge]*Math.log(1-oe*$[ge]);he*=oe,se=Math.abs(de-he),se<le&&(le=se,ne=ue)}return ne}},{}],227:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=0,Z=0,W=0,Q=0;for(var $=0;$<E.length;$++)if(0<E[$]){G=$;break}0<G&&G--;for(var J=E.length-1;0<J;J--)if(0<E[J]){Q=J;break}Q<E.length-1&&Q++;for(var ee=0;ee<E.length;ee++)E[ee]>Z&&(W=ee,Z=E[ee]);var te=!1;if(W-G<Q-W){te=!0;for(var ae=0,ie=E.length-1;ae<ie;){var ne=E[ae];E[ae]=E[ie],E[ie]=ne,ae++,ie--}G=E.length-1-Q,W=E.length-1-W}if(G===W)return G;var le=void 0,oe=void 0,se=void 0;le=E[W],oe=G-W,se=Math.sqrt(le*le+oe*oe),le/=se,oe/=se,se=le*G+oe*E[G];var de=G,he=0;for(var ue=G+1;ue<=W;ue++){var ce=le*ue+oe*E[ue]-se;ce>he&&(de=ue,he=ce)}if(de--,te){for(var ge=0,pe=E.length-1;ge<pe;){var fe=E[ge];E[ge]=E[pe],E[pe]=fe,ge++,pe--}return E.length-1-de}return de}},{}],228:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=Array(E.length);for(var W=0;W<E.length;W++)Z[W]=E[W]/G;var Q=Array(E.length);Q[0]=Z[0];for(var $=1;$<E.length;$++)Q[$]=Q[$-1]+Z[$];var J=Array(E.length);J[0]=Z[0]*Z[0];for(var ee=1;ee<E.length;ee++)J[ee]=J[ee-1]+Z[ee]*Z[ee];var te=Array(E.length);te[E.length-1]=0;for(var ae=E.length-2;0<=ae;ae--)te[ae]=te[ae+1]+Z[ae+1]*Z[ae+1];var ie=-1,ne=Number.MIN_VALUE,le=void 0;for(var oe=0;oe<E.length;oe++)le=-1*(0<J[oe]*te[oe]?Math.log(J[oe]*te[oe]):0)+2*(0<Q[oe]*(1-Q[oe])?Math.log(Q[oe]*(1-Q[oe])):0),le>ne&&(ne=le,ie=oe);return ie}},{}],229:[function(I,R,T){"use strict";function L(J){return J&&J.__esModule?J:{default:J}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var ee=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},te=ee.size,ae=void 0===te?0:te,ie=ee.algorithm,ne=void 0===ie?"copy":ie,le=ee.color;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===ne){if(le.length!==this.channels)throw new Error("pad: the color array must have the same length as the number of channels. Here: "+this.channels);for(var oe=0;oe<le.length;oe++)0===le[oe]&&(le[oe]=1e-3)}else le=(0,W.default)(this.channels,null);Array.isArray(ae)||(ae=[ae,ae]);var se=this.width+2*ae[0],de=this.height+2*ae[1],he=this.channels,ue=G.default.createFrom(this,{width:se,height:de});(0,$.default)(this,ue,ae[0],ae[1]);for(var ce=ae[0];ce<se-ae[0];ce++)for(var ge=0;ge<he;ge++){var pe=le[ge]||ue.data[(ae[1]*se+ce)*he+ge];for(var fe=0;fe<ae[1];fe++)ue.data[(fe*se+ce)*he+ge]=pe;pe=le[ge]||ue.data[((de-ae[1]-1)*se+ce)*he+ge];for(var _e=de-ae[1];_e<de;_e++)ue.data[(_e*se+ce)*he+ge]=pe}for(var be=0;be<de;be++)for(var ye=0;ye<he;ye++){var xe=le[ye]||ue.data[(be*se+ae[0])*he+ye];for(var ke=0;ke<ae[0];ke++)ue.data[(be*se+ke)*he+ye]=xe;xe=le[ye]||ue.data[(be*se+se-ae[0]-1)*he+ye];for(var we=se-ae[0];we<se;we++)ue.data[(be*se+we)*he+ye]=xe}return ue};var E=I("../Image"),G=L(E),Z=I("new-array"),W=L(Z),Q=I("../utility/copy"),$=L(Q)},{"../Image":147,"../utility/copy":237,"new-array":115}],230:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0.5;this.checkProcessable("resizeBinary",{bitDepth:[1]});var Q=Math.max(Math.floor(this.width*W),1),$=Math.max(Math.floor(this.height*W),1),J=Math.round((this.width-Q)/2),ee=Math.round((this.height-$)/2),te=E.default.createFrom(this,{kind:G.BINARY,width:Q,height:$,position:[J,ee],parent:this});for(var ae=0;ae<this.width;ae++)for(var ie=0;ie<this.height;ie++)this.getBitXY(ae,ie)&&te.setBitXY(Math.floor(ae*W),Math.floor(ie*W));return te};var L=I("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(L),G=I("../kindNames")},{"../Image":147,"../kindNames":184}],231:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){return new E.default(this.width,this.height,this.getRGBAData(),{kind:"RGBA"})};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Image":147}],232:[function(I,R,T){"use strict";function L(ee){return ee&&ee.__esModule?ee:{default:ee}}function E(){var ee=Q.default.createFrom(this,{width:this.height,height:this.width}),te=ee.height-1;for(var ae=0;ae<this.height;ae++)for(var ie=0;ie<this.width;ie++)for(var ne=0;ne<this.channels;ne++)ee.setValueXY(ae,te-ie,ne,this.getValueXY(ie,ae,ne));return ee}function G(){var ee=Q.default.createFrom(this,{width:this.height,height:this.width}),te=ee.width-1;for(var ae=0;ae<this.height;ae++)for(var ie=0;ie<this.width;ie++)for(var ne=0;ne<this.channels;ne++)ee.setValueXY(te-ae,ie,ne,this.getValueXY(ie,ae,ne));return ee}function Z(){var ee=Q.default.createFrom(this),te=ee.width-1,ae=ee.height-1;for(var ie=0;ie<this.height;ie++)for(var ne=0;ne<this.width;ne++)for(var le=0;le<this.channels;le++)ee.setValueXY(te-ne,ae-ie,le,this.getValueXY(ne,ie,le));return ee}Object.defineProperty(T,"__esModule",{value:!0}),T.rotate=function(te,ae){if("number"!=typeof te)throw new TypeError("angle must be a number");switch(0>te&&(te=360*Math.ceil(-te/360)+te),te%360){case 0:return this.clone();case 90:return G.call(this);case 180:return Z.call(this);case 270:return E.call(this);default:return J.default.call(this,te,ae);}},T.rotateLeft=E,T.rotateRight=G;var W=I("../Image"),Q=L(W),$=I("./rotateFree"),J=L($)},{"../Image":147,"./rotateFree":233}],233:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},Q=W.interpolation,$=Q===void 0?"none":Q,J=W.width,ee=J===void 0?this.width:J,te=W.height,ae=te===void 0?this.height:te,ie=Z*Math.PI/180,ne=Math.floor(Math.abs(ee*Math.cos(ie))+Math.abs(ae*Math.sin(ie))),le=Math.floor(Math.abs(ae*Math.cos(ie))+Math.abs(ee*Math.sin(ie))),oe=E.default.createFrom(this,{width:ne,height:le}),se=Math.cos(-ie),de=Math.sin(-ie),he=ne/2,ue=le/2;0==ne%2?(he=he-0.5,ue=0==le%2?ue-0.5:Math.floor(ue)):(he=Math.floor(he),ue=0==le%2?ue-0.5:Math.floor(ue));var ce=Math.floor(ee/2-he),ge=Math.floor(ae/2-ue);if("bilinear"===$){var pe=this.width*this.channels;for(var fe=0;fe<ne;fe+=1)for(var _e=0;_e<le;_e+=1){var be=(fe-he)*se-(_e-ue)*de+he+ce,ye=(_e-ue)*se+(fe-he)*de+ue+ge,xe=0|be,ke=0|ye,we=be-xe,ve=ye-ke;for(var Me=0;Me<this.channels;Me++)if(0>be||be>=ee||0>ye||ye>=ae)this.alpha?oe.setValueXY(fe,_e,Me,this.alpha):oe.setValueXY(fe,_e,Me,this.maxValue);else{var je=(ke*this.width+xe)*this.channels+Me,Pe=this.data[je],De=this.data[je+this.channels],Ie=this.data[je+pe],Se=this.data[je+pe+this.channels];oe.setValueXY(fe,_e,Me,0|Pe+we*(De-Pe)+ve*(Ie-Pe)+we*ve*(Pe-De-Ie+Se))}}}else for(var Ce=0;Ce<ne;Ce+=1)for(var Ae=0;Ae<le;Ae+=1)for(var Re=0;Re<this.channels;Re++){var Be=Math.round((Ce-he)*se-(Ae-ue)*de+he)+ce,ze=Math.round((Ae-ue)*se+(Ce-he)*de+ue)+ge;0>Be||Be>=ee||0>ze||ze>=ae?this.alpha?oe.setValueXY(Ce,Ae,Re,this.alpha):oe.setValueXY(Ce,Ae,Re,this.maxValue):oe.setValueXY(Ce,Ae,Re,this.getValueXY(Be,ze,Re))}return oe};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Image":147}],234:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G,Z){var W=this.width/G,Q=this.height/Z;if(1<this.bitDepth)for(var $=0;$<G;$++){var J=Math.floor(($+0.5)*W);for(var ee=0;ee<Z;ee++){var te=Math.floor((ee+0.5)*Q);for(var ae=0;ae<this.channels;ae++)E.setValueXY($,ee,ae,this.getValueXY(J,te,ae))}}else for(var ie=0;ie<G;ie++){var ne=Math.floor((ie+0.5)*W);for(var le=0;le<Z;le++){var oe=Math.floor((le+0.5)*Q);this.getBitXY(ne,oe)&&E.setBitXY(ie,le)}}}},{}],235:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ee=J.factor,te=void 0===ee?1:ee,ae=J.algorithm,ie=void 0===ae?"nearestNeighbor":ae,ne=J.preserveAspectRatio,le=void 0===ne||ne,oe=J.width,se=J.height;oe||(se&&le?oe=Math.round(se*(this.width/this.height)):oe=this.width),se||(le?se=Math.round(oe*(this.height/this.width)):se=this.height);var de=(0,Q.factorDimensions)(te,oe,se);if(oe=de.width,se=de.height,oe===this.width&&se===this.height)return this.clone();var he=G.default.createFrom(this,{width:oe,height:se});switch(ie.toLowerCase()){case"nearestneighbor":case"nearestneighbour":W.default.call(this,he,oe,se);break;default:throw new Error("Unsupported scale algorithm: "+ie);}return he};var E=I("../../Image"),G=L(E),Z=I("./nearestNeighbor"),W=L(Z),Q=I("../../../util/converter")},{"../../../util/converter":264,"../../Image":147,"./nearestNeighbor":234}],236:[function(I,R,T){"use strict";function L(Z){return(Z[0]+Z[1]+Z[2])/3}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:L,Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.mergeAlpha,J=$!==void 0&&$,ee=Q.keepAlpha,te=ee!==void 0&&ee;J&=this.alpha,te&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});var ae=G.default.createFrom(this,{components:1,alpha:te,colorModel:null}),ie=0;for(var ne=0;ne<this.size;ne++){var le=W(this.getPixel(ne));J?ae.data[ie++]=le*this.data[ne*this.channels+this.components]/this.maxValue:(ae.data[ie++]=le,te&&(ae.data[ie++]=this.data[ne*this.channels+this.components]))}return ae};var E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../Image":147}],237:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G,Z,W){var Q=E.width,$=E.height,J=G.width,ee=E.channels;for(var te=0;te<Q;te++)for(var ae=0;ae<$;ae++)for(var ie=0;ie<ee;ie++){var ne=(ae*Q+te)*ee+ie,le=((W+ae)*J+Z+te)*ee+ie;G.data[le]=E.data[ne]}}},{}],238:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.border;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==Z.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==Z.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==Z.colorModel)throw new Error("Both images must have the same colorModel");for(var $=new E.default(Z.width,Z.height,-(1/0)),J=Math.floor(Z.width/2),ee=Math.floor(Z.height/2),te=J,ae=ee,ie=!1;!ie;){var ne=$.localSearch(J,ee,-(1/0));for(var le=0;le<ne.length;le++){var oe=ne[le],se=this.getSimilarity(Z,{border:Q,shift:[te-oe[0],ae-oe[1]]});$[oe[0]][oe[1]]=se}var de=$.localMax(J,ee);de.position[0]!==J||de.position[1]!==ee?(J=de.position[0],ee=de.position[1]):ie=!0}return[J-te,ee-ae]};var L=I("../../util/matrix"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../../util/matrix":269}],239:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.keepAlpha,J=$!==void 0&&$,ee=Q.mergeAlpha,te=ee!==void 0&&ee;J&=this.alpha,te&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),W=(0,G.validateChannel)(this,W);var ae=E.default.createFrom(this,{components:1,alpha:J,colorModel:null}),ie=0;for(var ne=0;ne<this.data.length;ne+=this.channels)te?ae.data[ie++]=this.data[ne+W]*this.data[ne+this.components]/this.maxValue:(ae.data[ie++]=this.data[ne+W],J&&(ae.data[ie++]=this.data[ne+this.components]));return ae};var L=I("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(L),G=I("./../../util/channel")},{"../Image":147,"./../../util/channel":262}],240:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;this.checkProcessable("getColumn",{bitDepth:[8,16]}),this.checkColumn(E),this.checkChannel(G);var Z=Array(this.height),W=0,Q=this.width*this.channels;for(var $=G+E*this.channels;$<this.data.length;$+=Q)Z[W++]=this.data[$];return Z}},{}],241:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},W=Z.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===W){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");W=0}var Q=new E.default(this.height,this.width);for(var $=0;$<this.height;$++)for(var J=0;J<this.width;J++)Q.set($,J,this.getValueXY(J,$,W));return Q};var L=I("ml-matrix"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"ml-matrix":88}],242:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});var E=Array(this.size),G=0;for(var Z=0;Z<this.data.length;Z+=this.channels){var W=Array(this.components);for(var Q=0;Q<this.components;Q++)W[Q]=this.data[Z+Q];E[G++]=W}return E}},{}],243:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},G=E.sampling,Z=void 0===G?[10,10]:G,W=E.painted,Q=void 0!==W&&W,$=E.mask;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(Z)||(Z=[Z,Z]);var J=Z[0],ee=Z[1],te=J*ee,ae=Array(te),ie=Array(te),ne=this.width/J,le=this.height/ee,oe=Math.floor(ne/2),se=0;for(var de=0;de<J;de++){var he=Math.floor(le/2);for(var ue=0;ue<ee;ue++){var ce=Math.round(oe),ge=Math.round(he);(!$||$.getBitXY(ce,ge))&&(ae[se]=[ce,ge],ie[se]=this.getPixelXY(ce,ge),se++),he+=le}oe+=ne}ae.length=se,ie.length=se;var pe={xyS:ae,zS:ie};return Q&&(pe.painted=this.rgba8().paintPoints(ae)),pe}},{}],244:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;this.checkProcessable("getRow",{bitDepth:[8,16]}),this.checkRow(E),this.checkChannel(G);var Z=Array(this.width),W=0,Q=E*this.width*this.channels+G,$=Q+this.width*this.channels;for(var J=Q;J<$;J+=this.channels)Z[W++]=this.data[J];return Z}},{}],245:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},$=Q.shift,J=void 0===$?[0,0]:$,ee=Q.average,te=Q.channels,ae=Q.defaultAlpha,ie=Q.normalize,ne=Q.border,le=void 0===ne?[0,0]:ne;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(le)||(le=[le,le]),te=(0,L.validateArrayOfChannels)(this,{channels:te,defaultAlpha:ae}),this.bitDepth!==W.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==W.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==W.colorModel)throw new Error("Both images must have the same colorModel");"undefined"==typeof ee&&(ee=!0);var oe=Math.max(le[0],-J[0]),se=Math.min(this.width-le[0],this.width-J[0]),de=Math.max(le[1],-J[1]),he=Math.min(this.height-le[1],this.height-J[1]),ue=(0,G.default)(te.length,0);for(var ce=0;ce<te.length;ce++){var ge=te[ce],pe=ie?this.sum[ge]:Math.max(this.sum[ge],W.sum[ge]),fe=ie?W.sum[ge]:Math.max(this.sum[ge],W.sum[ge]);if(0!==pe&&0!==fe)for(var _e=oe;_e<se;_e++)for(var be=de;be<he;be++){var ye=_e*this.multiplierX+be*this.multiplierY+ge,xe=ye+J[0]*this.multiplierX+J[1]*this.multiplierY;ue[ce]+=Math.min(this.data[ye]/pe,W.data[xe]/fe)}}return ee?ue.reduce((ke,we)=>ke+we)/ue.length:ue};var L=I("./../../util/channel"),E=I("new-array"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"./../../util/channel":262,"new-array":115}],246:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},W=Z.size,Q=void 0===W?0:W,$=Z.algorithm,J=void 0===$?"copy":$,ee=Z.color;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===J){if(ee.length!==this.channels)throw new Error("setBorder: the color array must have the same length as the number of channels. Here: "+this.channels);for(var te=0;te<ee.length;te++)0===ee[te]&&(ee[te]=1e-3)}else ee=(0,E.default)(this.channels,null);Array.isArray(Q)||(Q=[Q,Q]);var ae=Q[0],ie=Q[1],ne=this.channels;for(var le=ae;le<this.width-ae;le++)for(var oe=0;oe<ne;oe++){var se=ee[oe]||this.data[(le+this.width*ie)*ne+oe];for(var de=0;de<ie;de++)this.data[(de*this.width+le)*ne+oe]=se;se=ee[oe]||this.data[(le+this.width*(this.height-ie-1))*ne+oe];for(var he=this.height-ie;he<this.height;he++)this.data[(he*this.width+le)*ne+oe]=se}for(var ue=0;ue<this.height;ue++)for(var ce=0;ce<ne;ce++){var ge=ee[ce]||this.data[(ue*this.width+ae)*ne+ce];for(var pe=0;pe<ae;pe++)this.data[(ue*this.width+pe)*ne+ce]=ge;ge=ee[ce]||this.data[(ue*this.width+this.width-ae-1)*ne+ce];for(var fe=this.width-ae;fe<this.width;fe++)this.data[(ue*this.width+fe)*ne+ce]=ge}return this};var L=I("new-array"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"new-array":115}],247:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G,Z){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),Z.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),Z.width!==this.width||Z.height!==this.height)throw new Error("Images must have exactly the same width and height");G=(0,L.validateChannel)(this,G);var W=G;for(var Q=0;Q<Z.data.length;Q++)this.data[W]=Z.data[Q],W+=this.channels;return this};var L=I("./../../util/channel")},{"./../../util/channel":262}],248:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Z=G.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===Z){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");Z=0}if(!E.length||!E[0].length||this.width!==E.columns||this.height!==E.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(var W=0;W<this.height;W++)for(var Q=0;Q<this.width;Q++)this.setValueXY(Q,W,Z,E.get(W,Q))}},{}],249:[function(I,R,T){"use strict";function L(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var $=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},J=$.preserveAlpha,ee=void 0===J||J;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new W.default([this.clone()]);var te=new W.default,ae=this.data;if(this.alpha&&ee)for(var ie=0;ie<this.components;ie++){var ne=G.default.createFrom(this,{components:1,alpha:!0,colorModel:null}),le=0;for(var oe=0;oe<ae.length;oe+=this.channels)ne.data[le++]=ae[oe+ie],ne.data[le++]=ae[oe+this.components];te.push(ne)}else for(var se=0;se<this.channels;se++){var de=G.default.createFrom(this,{components:1,alpha:!1,colorModel:null}),he=0;for(var ue=0;ue<ae.length;ue+=this.channels)de.data[he++]=ae[ue+se];te.push(de)}return te};var E=I("../Image"),G=L(E),Z=I("../../stack/Stack"),W=L(Z)},{"../../stack/Stack":253,"../Image":147}],250:[function(I,R,T){"use strict";var L=I("./image/environment"),E=I("array-includes"),G=function(W){return W&&W.__esModule?W:{default:W}}(E);G.default.shim(),R.exports=T=I("./image/Image").default,T.Stack=I("./stack/Stack").default,T.Shape=I("./util/shape").default,T.Kernel=I("./kernel/kernel"),T.Static={grey:I("./image/transform/greyAlgorithms").names,mask:I("./image/transform/mask/maskAlgorithms").names},"browser"===L.env&&(T.Worker=I("./worker/worker").default)},{"./image/Image":147,"./image/environment":161,"./image/transform/greyAlgorithms":209,"./image/transform/mask/maskAlgorithms":217,"./kernel/kernel":251,"./stack/Stack":253,"./util/shape":270,"./worker/worker":274,"array-includes":2}],251:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=I("../util/kernels");Object.keys(L).forEach(function(G){"default"===G||"__esModule"===G||Object.defineProperty(T,G,{enumerable:!0,get:function(){return L[G]}})});var E=I("./laplacianOfGaussian");Object.defineProperty(T,"laplacianOfGaussian",{enumerable:!0,get:function(){return E.laplacianOfGaussian}})},{"../util/kernels":268,"./laplacianOfGaussian":252}],252:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.laplacianOfGaussian=function(E,G,Z){var W=Array(G),Q=void 0,$=void 0,J=void 0,ee=void 0;Z||(Z=100),Z*=-1;var te=(G-1)/2,ae=2*E*E;for(Q=0;Q<G;Q++)for(W[Q]=Array(G),ee=(Q-te)*(Q-te),$=0;$<G;$++)J=($-te)*($-te),W[Q][$]=Math.round(Z*(1-(J+ee)/ae)*Math.exp(-(J+ee)/ae));return W}},{}],253:[function(I,R,T){"use strict";function L(ae){return ae&&ae.__esModule?ae:{default:ae}}function E(ae){if(Array.isArray(ae)){for(var ie=0,ne=Array(ae.length);ie<ae.length;ie++)ne[ie]=ae[ie];return ne}return Array.from(ae)}Object.defineProperty(T,"__esModule",{value:!0});var G=I("./extend"),Z=L(G),W=I("../image/Image"),Q=L(W),$=I("has-own"),J=L($),ee={configurable:!0,enumerable:!1,get:void 0};class te extends Array{constructor(ae){if(Array.isArray(ae)){super(ae.length);for(var ie=0;ie<ae.length;ie++)this[ie]=ae[ie]}else"number"==typeof ae?super(ae):super();this.computed=null}static load(ae){return Promise.all(ae.map(Q.default.load)).then(ie=>new te(ie))}static extendMethod(ae,ie){var ne=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},le=ne.inPlace,oe=void 0!==le&&le,se=ne.returnThis,de=void 0===se||se,he=ne.partialArgs,ue=void 0===he?[]:he;return te.prototype[ae]=oe?function(){this.computed=null;for(var ce=arguments.length,ge=Array(ce),pe=0;pe<ce;pe++)ge[pe]=arguments[pe];var fe=ie.apply(this,[].concat(E(ue),ge));return de?this:fe}:function(){for(var ce=arguments.length,ge=Array(ce),pe=0;pe<ce;pe++)ge[pe]=arguments[pe];return ie.apply(this,[].concat(E(ue),ge))},te}static extendProperty(ae,ie){var ne=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},le=ne.partialArgs,oe=void 0===le?[]:le;return ee.get=function(){if(null===this.computed)this.computed={};else if((0,J.default)(ae,this.computed))return this.computed[ae];var se=ie.apply(this,oe);return this.computed[ae]=se,se},Object.defineProperty(te.prototype,ae,ee),te}checkProcessable(ae){var ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if("string"!=typeof ae)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError("The process: "+ae+" can not be applied on an empty stack");this[0].checkProcessable(ae,ie);for(var ne=1;ne<this.length;ne++){if((ie.sameSize===void 0||ie.sameSize)&&this[0].width!==this[ne].width)throw new TypeError("The process: "+ae+" can not be applied if width is not identical in all images");if((void 0===ie.sameSize||ie.sameSize)&&this[0].height!==this[ne].height)throw new TypeError("The process: "+ae+" can not be applied if height is not identical in all images");if((void 0===ie.sameAlpha||ie.sameAlpha)&&this[0].alpha!==this[ne].alpha)throw new TypeError("The process: "+ae+" can not be applied if alpha is not identical in all images");if((void 0===ie.sameBitDepth||ie.sameBitDepth)&&this[0].bitDepth!==this[ne].bitDepth)throw new TypeError("The process: "+ae+" can not be applied if bitDepth is not identical in all images");if((void 0===ie.sameColorModel||ie.sameColorModel)&&this[0].colorModel!==this[ne].colorModel)throw new TypeError("The process: "+ae+" can not be applied if colorModel is not identical in all images");if((void 0===ie.sameNumberChannels||ie.sameNumberChannels)&&this[0].channels!==this[ne].channels)throw new TypeError("The process: "+ae+" can not be applied if channels is not identical in all images")}}}T.default=te,Array[Symbol.species]||(te.prototype.map=function(ae,ie){if("function"!=typeof ae)throw new TypeError(ae+" is not a function");var ne=new te(this.length);for(var le=0;le<this.length;le++)ne[le]=ae.call(ie,this[le],le,this);return ne}),(0,Z.default)(te)},{"../image/Image":147,"./extend":259,"has-own":45}],254:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].getHistogram(E);for(var G=1;G<this.length;G++){var Z=this[G].getHistogram(E);for(var W=0;W<L.length;W++)L[W]+=Z[W]}return L}},{}],255:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].getHistograms(E),G=L[0].length;for(var Z=1;Z<this.length;Z++){var W=this[Z].getHistograms(E);for(var Q=0;Q<L.length;Q++)for(var $=0;$<G;$++)L[Q][$]+=W[Q][$]}return L}},{}],256:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].max;for(var E=1;E<this.length;E++)for(var G=0;G<L.length;G++)L[G]=Math.max(L[G],this[E].max[G]);return L}},{}],257:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("median",{bitDepth:[8,16]});var G=this.getHistograms({maxSlots:this[0].maxValue+1}),Z=Array(G.length);for(var W=0;W<G.length;W++){var Q=G[W];Z[W]=(0,L.median)(Q)}return Z};var L=I("../../util/histogram")},{"../../util/histogram":266}],258:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].min;for(var E=1;E<this.length;E++)for(var G=0;G<L.length;G++)L[G]=Math.min(L[G],this[E].min[G]);return L}},{}],259:[function(I,R,T){"use strict";function L(se){return se&&se.__esModule?se:{default:se}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(de){de.extendMethod("matchAndCrop",G.default),de.extendMethod("getMin",W.default),de.extendMethod("getMax",$.default),de.extendMethod("getMedian",ee.default),de.extendMethod("getHistogram",ae.default),de.extendMethod("getHistograms",ne.default),de.extendMethod("getAverage",oe.default)};var E=I("./transform/matchAndCrop"),G=L(E),Z=I("./compute/min"),W=L(Z),Q=I("./compute/max"),$=L(Q),J=I("./compute/median"),ee=L(J),te=I("./compute/histogram"),ae=L(te),ie=I("./compute/histograms"),ne=L(ie),le=I("./utility/average"),oe=L(le)},{"./compute/histogram":254,"./compute/histograms":255,"./compute/max":256,"./compute/median":257,"./compute/min":258,"./transform/matchAndCrop":260,"./utility/average":261}],260:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},W=Z.algorithm,Q=W===void 0?"matchToPrevious":W,$=Z.ignoreBorder,J=$===void 0?[0,0]:$;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});var ee=this[0],te=[];te[0]={position:[0,0],image:this[0]};var ae=[0,0];for(var ie=1;ie<this.length;ie++){var ne=ee.getBestMatch(this[ie],{border:J});te[ie]={position:[ne[0]+ae[0],ne[1]+ae[1]],image:this[ie]},"matchToPrevious"===Q&&(ae[0]+=ne[0],ae[1]+=ne[1],ee=this[ie])}var le=0,oe=0,se=0,de=0;for(var he=0;he<te.length;he++){var ue=te[he];ue.position[0]>le&&(le=ue.position[0]),ue.position[0]<oe&&(oe=ue.position[0]),ue.position[1]>se&&(se=ue.position[1]),ue.position[1]<de&&(de=ue.position[1])}oe=0-oe,de=0-de;for(var ce=0;ce<te.length;ce++){var ge=te[ce];ge.crop=ge.image.crop({x:le-ge.position[0],y:se-ge.position[1],width:ee.width-oe-le,height:ee.height-de-se})}var pe=[];for(var fe=0;fe<te.length;fe++)pe[fe]=te[fe].crop;return new E.default(pe)};var L=I("../Stack"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Stack":253}],261:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("average",{bitDepth:[8,16]});var Z=new Uint32Array(this[0].data.length);for(var W=0;W<this.length;W++){var Q=this[W];for(var $=0;$<this[0].data.length;$++)Z[$]+=Q.data[$]}var J=E.default.createFrom(this[0]),ee=J.data;for(var te=0;te<this[0].data.length;te++)ee[te]=Z[te]/this.length;return J};var L=I("../../image/Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../../image/Image":147}],262:[function(I,R,T){"use strict";function L(Q,$){var J=$?Q.channels:Q.components,ee=Array(J);for(var te=0;te<J;te++)ee[te]=te;return ee}function E(Q,$,J){Array.isArray($)||($=[$]);for(var ee=0;ee<$.length;ee++)$[ee]=G(Q,$[ee],J);return $}function G(Q,$){var J=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0;if($===void 0)throw new RangeError("validateChannel : the channel has to be >=0 and <"+Q.channels);if("string"==typeof $){switch(Q.colorModel){case W.GREY:break;case W.RGB:"rgb".includes($)&&("r"===$?$=0:"g"===$?$=1:"b"===$?$=2:void 0);break;case W.HSL:"hsl".includes($)&&("h"===$?$=0:"s"===$?$=1:"l"===$?$=2:void 0);break;case W.HSV:"hsv".includes($)&&("h"===$?$=0:"s"===$?$=1:"v"===$?$=2:void 0);break;case W.CMYK:"cmyk".includes($)&&("c"===$?$=0:"m"===$?$=1:"y"===$?$=2:"k"===$?$=3:void 0);break;default:throw new Error(`Unexpected color model: ${Q.colorModel}`);}if("a"===$){if(!Q.alpha)throw new Error("validateChannel : the image does not contain alpha channel");$=Q.components}if("string"==typeof $)throw new Error("validateChannel : undefined channel: "+$)}if($>=Q.channels)throw new RangeError("validateChannel : the channel has to be >=0 and <"+Q.channels);if(!J&&$>=Q.components)throw new RangeError("validateChannel : alpha channel may not be selected");return $}Object.defineProperty(T,"__esModule",{value:!0}),T.validateArrayOfChannels=function($){var J=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},ee=J.channels,te=J.allowAlpha,ae=J.defaultAlpha;return"boolean"!=typeof te&&(te=!0),"undefined"==typeof ee?L($,ae):E($,ee,te)},T.validateChannel=G;var Z=I("../image/model/model"),W=function($){if($&&$.__esModule)return $;var J={};if(null!=$)for(var ee in $)Object.prototype.hasOwnProperty.call($,ee)&&(J[ee]=$[ee]);return J.default=$,J}(Z)},{"../image/model/model":187}],263:[function(I,R,T){"use strict";function L(Z,W,Q){return 0>Q&&(Q+=1),1<Q&&(Q-=1),Q<1/6?Z+6*(W-Z)*Q:Q<1/2?W:Q<2/3?Z+6*((W-Z)*(2/3-Q)):Z}function E(Z,W,Q){var $=void 0,J=void 0,ee=void 0,te=void 0,ae=void 0,ie=void 0;return W/=100,Q/=100,0===W?te=ae=ie=255*Q:(J=0.5>=Q?Q*(W+1):Q+W-Q*W,$=2*Q-J,ee=Z/360,te=L($,J,ee+1/3),ae=L($,J,ee),ie=L($,J,ee-1/3)),{r:te,g:ae,b:ie}}Object.defineProperty(T,"__esModule",{value:!0}),T.css2array=function(W){var Q=(0,G.cssColor)(W);return[Q.r,Q.g,Q.b,Math.round(255*Q.a/100)]},T.getDistinctColors=function(W){var Q=Array(W),$=0;for(var J=0;360>J;J+=360/W){$++;var ee=E(J,100,30+15*($%4));Q[$-1]=[Math.round(255*ee.r),Math.round(255*ee.g),Math.round(255*ee.b)]}return Q},T.getRandomColor=function(){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]};var G=I("color-functions")},{"color-functions":9}],264:[function(I,R,T){"use strict";function L(E){if("string"==typeof E){var G=E[E.length-1];E=parseFloat(E),"%"===G&&(E/=100)}return E}Object.defineProperty(T,"__esModule",{value:!0}),T.getFactor=L,T.getThreshold=function(G,Z){if(!Z)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof G){var W=G[G.length-1];if("%"!==W)throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(G)/100*Z}if("number"==typeof G)return 1>G?G*Z:G;throw Error("getThreshold : the value is not valid")},T.factorDimensions=function(G,Z,W){G=L(G);var Q=Math.round(G*Z),$=Math.round(G*W);return 0>=Q&&(Q=1),0>=$&&($=1),{width:Q,height:$}}},{}],265:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.dxs=[1,0,-1,0,1,1,-1,-1],T.dys=[0,1,0,-1,1,-1,1,-1]},{}],266:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.median=function(E){var G=E.reduce((J,ee)=>J+ee);if(0===G)throw new Error("unreachable");for(var Z=0,W=0,Q=G/2,$=void 0;!0;){if(0<E[Z]){if(void 0!=$)return($+Z)/2;if(W+=E[Z],W>Q)return Z;W==Q&&($=Z)}Z++}},T.mean=function(E){var G=0,Z=0;for(var W=0;W<E.length;W++)G+=E[W],Z+=E[W]*W;return 0===G?0:Z/G}},{}],267:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.validateKernel=function(Z){var W=void 0,Q=void 0;if(!Array.isArray(Z))throw new Error("validateKernel: Invalid Kernel: "+Z);else if(!Array.isArray(Z[0])){var $=Math.sqrt(Z.length);if((0,E.default)($))Q=W=Math.floor(Math.sqrt(Z.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");var J=Array($);for(var ee=0;ee<$;ee++){J[ee]=Array($);for(var te=0;te<$;te++)J[ee][te]=Z[ee*$+te]}Z=J}else if(0==(1&Z.length)||0==(1&Z[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");else W=Math.floor(Z.length/2),Q=Math.floor(Z[0].length/2);return{kernel:Z,kWidth:Q,kHeight:W}};var L=I("is-integer"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"is-integer":54}],268:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.DISCRETE_LAPLACE_4=[[0,1,0],[1,-4,1],[0,1,0]],T.DISCRETE_LAPLACE_8=[[1,1,1],[1,-8,1],[1,1,1]],T.GRADIENT_X=[[-1,0,1],[-2,0,2],[-1,0,1]],T.GRADIENT_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],T.SECOND_DERIVATIVE=[[-1,-2,0,2,1],[-2,-4,0,4,2],[0,0,0,0,0],[1,2,0,-2,-1],[2,4,0,-4,-2]],T.SECOND_DERIVATIVE_INV=[[1,2,0,-2,-1],[2,4,0,-4,-2],[0,0,0,0,0],[-2,-4,0,4,2],[-1,-2,0,2,1]]},{}],269:[function(I,R,T){"use strict";function L(E,G,Z){var W=Array(E);for(var Q=0;Q<E;Q++)W[Q]=Array(G);if(Z)for(var $=0;$<E;$++)for(var J=0;J<G;J++)W[$][J]=Z;return W.width=E,W.height=G,W.__proto__=L.prototype,W}Object.defineProperty(T,"__esModule",{value:!0}),T.default=L,L.prototype.localMin=function(E,G){var Z=this[E][G],W=[E,G];for(var Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]<Z&&(Z=this[Q][$],W=[Q,$]);return{position:W,value:Z}},L.prototype.localMax=function(E,G){var Z=this[E][G],W=[E,G];for(var Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]>Z&&(Z=this[Q][$],W=[Q,$]);return{position:W,value:Z}},L.prototype.localSearch=function(E,G,Z){var W=[];for(var Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]===Z&&W.push([Q,$]);return W}},{}],270:[function(I,R,T){"use strict";function L(ie){return ie&&ie.__esModule?ie:{default:ie}}function E(ie,ne,le){var oe=Q.default.zeros(ne,ie);if(le.filled)for(var se=0;se<ne;se++)for(var de=0;de<ie;de++)oe.set(se,de,1);else{for(var he of[0,ne-1])for(var ue=0;ue<ie;ue++)oe.set(he,ue,1);for(var ce=0;ce<ne;ce++)for(var ge of[0,ie-1])oe.set(ce,ge,1)}return oe}function G(ie,ne,le){var oe=Q.default.zeros(ne,ie,le),se=1-ne%2,de=1-ie%2,he=Math.floor((ie-1)/2),ue=Math.floor((ne-1)/2),ce=he*he,ge=ue*ue;if(le.filled)for(var pe=0;pe<=ue;pe++){var fe=Math.floor(Math.sqrt(ce-ce*pe*pe/ge));for(var _e=he-fe;_e<=he;_e++)oe.set(ue-pe,_e,1),oe.set(ue+pe+se,_e,1),oe.set(ue-pe,ie-_e-1,1),oe.set(ue+pe+se,ie-_e-1,1)}else{for(var be=0;be<=ue;be++){var ye=Math.floor(Math.sqrt(ce-ce*be*be/ge)),xe=he-ye;oe.set(ue-be,xe,1),oe.set(ue+be+se,xe,1),oe.set(ue-be,ie-xe-1,1),oe.set(ue+be+se,ie-xe-1,1)}for(var ke=0;ke<=he;ke++){var we=Math.floor(Math.sqrt(ge-ge*ke*ke/ce)),ve=ue-we;oe.set(ve,he-ke,1),oe.set(ve,he+ke+de,1),oe.set(ne-ve-1,he-ke,1),oe.set(ne-ve-1,he+ke+de,1)}}return oe}function Z(ie,ne,le){if(!le.filled)throw new Error("Non filled triangle is not implemented");var oe=Q.default.zeros(ne,ie,le);for(var se=0;se<ne;se++){var de=Math.floor((1-se/ne)*ie/2);for(var he=de;he<ie-de;he++)oe.set(se,he,1)}return oe}Object.defineProperty(T,"__esModule",{value:!0});var W=I("ml-matrix"),Q=L(W),$=I("../image/Image"),J=L($),ee=I("../image/kindNames"),te=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],ae=[[0,1,0],[1,1,1],[0,1,0]];T.default=class{constructor(){var ne=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},le=ne.kind,oe=void 0===le?"cross":le,se=ne.shape,de=ne.size,he=ne.width,ue=ne.height,ce=ne.filled,ge=void 0===ce||ce;if(de&&(he=de,ue=de),se)switch(se.toLowerCase()){case"square":case"rectangle":this.matrix=E(he,ue,{filled:ge});break;case"circle":case"ellipse":this.matrix=G(he,ue,{filled:ge});break;case"triangle":this.matrix=Z(he,ue,{filled:ge});break;default:throw new Error(`Shape: unexpected shape: ${se}`);}else if(oe)switch(oe.toLowerCase()){case"cross":this.matrix=te;break;case"smallcross":this.matrix=ae;break;default:throw new Error(`Shape: unexpected kind: ${oe}`);}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){var ne=this.matrix,le=[];for(var oe=0;oe<ne.length;oe++)for(var se=0;se<ne[0].length;se++)ne[oe][se]&&le.push([se-this.halfWidth,oe-this.halfHeight]);return le}getMask(){var ne=new J.default(this.width,this.height,{kind:ee.BINARY});for(var le=0;le<this.matrix.length;le++)for(var oe=0;oe<this.matrix[0].length;oe++)this.matrix[le][oe]&&ne.setBitXY(oe,le);return ne}}},{"../image/Image":147,"../image/kindNames":184,"ml-matrix":88}],271:[function(I,R,T){"use strict";function L(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,"__esModule",{value:!0}),T.checkNumberArray=function($){if(!isNaN($)){if(0>=$)throw new Error("checkNumberArray: the value must be greater than 0");return $}if($ instanceof G.default)return $.data;if(!(0,W.default)($))throw new Error("checkNumberArray: the value should be either a number, array or Image");return $};var E=I("../image/Image"),G=L(E),Z=I("is-array-type"),W=L(Z)},{"../image/Image":147,"is-array-type":50}],272:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){Z.extendMethod("background",E.default)};var L=I("./process/background"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"./process/background":273}],273:[function(I,R,T){"use strict";function L(J){return J&&J.__esModule?J:{default:J}}function E(J,ee,te){return J.post("data",[ee,te]).then(function(ae){for(var ie in ae)ae[ie]=new Q.default(ae[ie]);return ae})}Object.defineProperty(T,"__esModule",{value:!0});var G=I("extend"),Z=L(G),W=I("../../image/Image"),Q=L(W),$={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:0.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};T.default={run:function(ee,te,ae){te=(0,Z.default)({},$,te);var ie=this.manager;return Array.isArray(ee)?Promise.all(ee.map(function(ne){var le=E(ie,ne,te);return"function"==typeof ae&&le.then(ae),le})):E(ie,ee,te)},work:function(){worker.on("data",function(ee,te,ae){function ie(fe,_e){ae.include.includes(fe)&&(ne[fe]=_e,le.push(_e.data.buffer))}te=new IJS(te);var ne={},le=[],oe=te.grey(),se=oe.sobelFilter();ie("sobel",se);var de=se.level().mask({threshold:ae.threshold});ie("mask",de);var he=se.getRoiManager();he.fromMask(de);var ue=he.getMask(ae.roi);ie("realMask",ue);var ce=oe.getPixelsGrid({sampling:ae.sampling,mask:ue}),ge=te.getBackground(ce.xyS,ce.zS,ae.regression);ie("background",ge);var pe=te.subtract(ge);ne.result=pe,le.push(pe.data.buffer),ee(ne,le)})}}},{"../../image/Image":147,extend:35}],274:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0});var E=I("web-worker-manager"),G=L(E),Z=I("./extend"),W=L(Z);class Q{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url($){if("string"!=typeof $)throw new TypeError("worker URL must be a string");this._url=$,this._deps[0]=$}static extendMethod($,J){function ee(){var ne;te||(this.checkUrl(),ae=this.url,te=new G.default(J.work,{deps:ae}),ie.manager=te);for(var le=arguments.length,oe=Array(le),se=0;se<le;se++)oe[se]=arguments[se];return(ne=J.run).call.apply(ne,[ie].concat(oe))}var te=void 0,ae=void 0,ie={};ee.reset=function(){te&&(te.terminate(),te=new G.default(J.work,{deps:ae}),ie.manager=te)},Q.prototype[$]=ee}}(0,W.default)(Q),T.default=new Q},{"./extend":272,"web-worker-manager":145}]},{},[250])(250)});

//# sourceMappingURL=image.min.js.map