(function(_){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=_();else if("function"==typeof define&&define.amd)define([],_);else{var P;P="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,P.IJS=_()}})(function(){var define;return function _(P,D,I){function S(E,T){if(!D[E]){if(!P[E]){var L="function"==typeof require&&require;if(!T&&L)return L(E,!0);if(C)return C(E,!0);var O=new Error("Cannot find module '"+E+"'");throw O.code="MODULE_NOT_FOUND",O}var G=D[E]={exports:{}};P[E][0].call(G.exports,function(Z){var W=P[E][1][Z];return S(W?W:Z)},G,G.exports,_,P,D,I)}return D[E].exports}var C="function"==typeof require&&require;for(var R=0;R<I.length;R++)S(I[R]);return S}({1:[function(_,P,D){"use strict";P.exports=function(S){return atob(S)}},{}],2:[function(_,P,D){"use strict";function I(Q){for(var J=Q.length,$=new ArrayBuffer(J),ee=new Uint8Array($),te=-1;++te<J;)ee[te]=Q.charCodeAt(te);return $}function S(Q){for(var J="",$=new Uint8Array(Q),ee=$.byteLength,te=-1;++te<ee;)J+=String.fromCharCode($[te]);return J}function C(Q,J){return new W(function($,ee){var te=new Image;J&&(te.crossOrigin=J),te.onload=function(){$(te)},te.onerror=ee,te.src=Q})}function R(Q){var J=document.createElement("canvas");J.width=Q.width,J.height=Q.height;var $=J.getContext("2d");return $.drawImage(Q,0,0,Q.width,Q.height,0,0,Q.width,Q.height),J}function E(Q,J){return J=J||{},"string"==typeof J&&(J={type:J}),new Z(Q,J)}function T(Q){return new W(function(J,$){var ee=new FileReader,te="function"==typeof ee.readAsBinaryString;ee.onloadend=function(ae){var ie=ae.target.result;return te?J(ie):void J(S(ie))},ee.onerror=$,te?ee.readAsBinaryString(Q):ee.readAsArrayBuffer(Q)})}function L(Q,J){return W.resolve().then(function(){var $=[I(atob(Q))];return J?E($,{type:J}):E($)})}function O(Q){return W.resolve().then(function(){var J=Q.match(/data:([^;]+)/)[1],$=Q.replace(/^[^,]+,/,""),ee=I(atob($));return E([ee],{type:J})})}function G(Q,J,$){return W.resolve().then(function(){return"function"==typeof Q.toBlob?new W(function(ee){Q.toBlob(ee,J,$)}):O(Q.toDataURL(J,$))})}var Z=_("blob"),W=_("native-or-lie");P.exports={createBlob:E,createObjectURL:function(J){return(window.URL||window.webkitURL).createObjectURL(J)},revokeObjectURL:function(J){return(window.URL||window.webkitURL).revokeObjectURL(J)},imgSrcToBlob:function(J,$,ee,te){return $=$||"image/png",C(J,ee).then(function(ae){return R(ae)}).then(function(ae){return G(ae,$,te)})},imgSrcToDataURL:function(J,$,ee,te){return $=$||"image/png",C(J,ee).then(function(ae){return R(ae)}).then(function(ae){return ae.toDataURL($,te)})},canvasToBlob:G,dataURLToBlob:O,blobToBase64String:function(J){return T(J).then(function($){return btoa($)})},base64StringToBlob:L,binaryStringToBlob:function(J,$){return W.resolve().then(function(){return L(btoa(J),$)})},blobToBinaryString:T,arrayBufferToBlob:function(J,$){return W.resolve().then(function(){return E([J],$)})},blobToArrayBuffer:function(J){return new W(function($,ee){var te=new FileReader;te.onloadend=function(ae){var ie=ae.target.result||new ArrayBuffer(0);$(ie)},te.onerror=ee,te.readAsArrayBuffer(J)})}}},{blob:3,"native-or-lie":107}],3:[function(_,P,D){(function(I){"use strict";function S(G){for(var Z=0;Z<G.length;Z++){var W=G[Z];if(W.buffer instanceof ArrayBuffer){var Q=W.buffer;if(W.byteLength!==Q.byteLength){var J=new Uint8Array(W.byteLength);J.set(new Uint8Array(Q,W.byteOffset,W.byteLength)),Q=J.buffer}G[Z]=Q}}}function C(G,Z){Z=Z||{};var W=new E;S(G);for(var Q=0;Q<G.length;Q++)W.append(G[Q]);return Z.type?W.getBlob(Z.type):W.getBlob()}function R(G,Z){return S(G),new Blob(G,Z||{})}var E=I.BlobBuilder||I.WebKitBlobBuilder||I.MSBlobBuilder||I.MozBlobBuilder,T=function(){try{var G=new Blob(["hi"]);return 2===G.size}catch(Z){return!1}}(),L=T&&function(){try{var G=new Blob([new Uint8Array([1,2])]);return 2===G.size}catch(Z){return!1}}(),O=E&&E.prototype.append&&E.prototype.getBlob;;;P.exports=function(){if(T)return L?I.Blob:R;return O?C:void 0}()}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],4:[function(_,P,D){},{}],5:[function(_,P,D){"use strict";P.exports={hex2rgb:_("./lib/hex2rgb"),hsv2hex:_("./lib/hsv2hex"),hsv2rgb:_("./lib/hsv2rgb"),rgb2hex:_("./lib/rgb2hex"),rgb2hsv:_("./lib/rgb2hsv"),rgba:_("./lib/rgba"),rgba2rgb:_("./lib/rgba2rgb"),rgba2hex:_("./lib/rgba2hex"),hsl2hsv:_("./lib/hsl2hsv"),hsv2hsl:_("./lib/hsv2hsl"),hsl2rgb:_("./lib/hsl2rgb"),cssColor:_("./lib/css-color")}},{"./lib/css-color":7,"./lib/hex2rgb":8,"./lib/hsl2hsv":9,"./lib/hsl2rgb":10,"./lib/hsv2hex":11,"./lib/hsv2hsl":12,"./lib/hsv2rgb":13,"./lib/rgb2hex":14,"./lib/rgb2hsv":15,"./lib/rgba":16,"./lib/rgba2hex":17,"./lib/rgba2rgb":18}],6:[function(_,P,D){"use strict";P.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}},{}],7:[function(_,P,D){"use strict";function I(Z){var W=G[Z.toLowerCase()];if(W)return{r:W[0],g:W[1],b:W[2],a:100}}function S(Z){if(0==Z.indexOf("rgb(")){Z=Z.match(/rgb\(([^)]+)\)/)[1];var W=Z.split(/ *, */).map(Number);return{r:W[0],g:W[1],b:W[2],a:100}}}function C(Z){if(0===Z.indexOf("rgba(")){Z=Z.match(/rgba\(([^)]+)\)/)[1];var W=Z.split(/ *, */).map(Number);return{r:W[0],g:W[1],b:W[2],a:100*W[3]}}}function R(Z){if("#"===Z[0]&&7===Z.length)return{r:parseInt(Z.slice(1,3),16),g:parseInt(Z.slice(3,5),16),b:parseInt(Z.slice(5,7),16),a:100}}function E(Z){if("#"===Z[0]&&4===Z.length)return{r:parseInt(Z[1]+Z[1],16),g:parseInt(Z[2]+Z[2],16),b:parseInt(Z[3]+Z[3],16),a:100}}function T(Z){if(0===Z.indexOf("hsl(")){Z=Z.match(/hsl\(([^)]+)\)/)[1];var W=Z.split(/ *, */),Q=parseInt(W[0],10),J=parseInt(W[1],10),$=parseInt(W[2],10),ee=O(Q,J,$);return ee.a=100,ee}}function L(Z){if(0===Z.indexOf("hsla(")){Z=Z.match(/hsla\(([^)]+)\)/)[1];var W=Z.split(/ *, */),Q=parseInt(W[0],10),J=parseInt(W[1],10),$=parseInt(W[2],10),ee=parseInt(100*W[3],10),te=O(Q,J,$);return te.a=ee,te}}var O=_("./hsl2rgb"),G=_("./_colors");P.exports=function(W){return I(W)||E(W)||R(W)||S(W)||C(W)||T(W)||L(W)}},{"./_colors":6,"./hsl2rgb":10}],8:[function(_,P,D){"use strict";P.exports=function(I){return("#"===I[0]&&(I=I.substr(1)),6===I.length)?{r:parseInt(I.substr(0,2),16),g:parseInt(I.substr(2,2),16),b:parseInt(I.substr(4,2),16)}:3===I.length?{r:parseInt(I[0]+I[0],16),g:parseInt(I[1]+I[1],16),b:parseInt(I[2]+I[2],16)}:void 0}},{}],9:[function(_,P,D){"use strict";P.exports=function(I,S,C){return S*=(50>C?C:100-C)/100,console.log("s",S),{h:I,s:100*(2*S/(C+S)),v:C+S}}},{}],10:[function(_,P,D){"use strict";var I=_("./hsl2hsv"),S=_("./hsv2rgb");P.exports=function(C,R,E){var T=I(C,R,E);return S(T.h,T.s,T.v)}},{"./hsl2hsv":9,"./hsv2rgb":13}],11:[function(_,P,D){"use strict";var I=_("./hsv2rgb"),S=_("./rgb2hex");P.exports=function(C,R,E){var T=I(C,R,E);return S(T.r,T.g,T.b)}},{"./hsv2rgb":13,"./rgb2hex":14}],12:[function(_,P,D){"use strict";P.exports=function(I,S,C){var R=(200-S)*C/100;return{h:I,s:S*C/(100>R?R:200-R),l:R/2}}},{}],13:[function(_,P,D){"use strict";P.exports=function(I,S,C){var S=S/100,C=C/100,R=[],E=C*S,T=I/60,L=E*(1-Math.abs(T%2-1)),O=C-E;switch(parseInt(T,10)){case 0:R=[E,L,0];break;case 1:R=[L,E,0];break;case 2:R=[0,E,L];break;case 3:R=[0,L,E];break;case 4:R=[L,0,E];break;case 5:R=[E,0,L];}return{r:Math.round(255*(R[0]+O)),g:Math.round(255*(R[1]+O)),b:Math.round(255*(R[2]+O))}}},{}],14:[function(_,P,D){"use strict";P.exports=function(I,S,C){function R(E){var T=E.toString(16);return 1===T.length?"0"+T:T}return[R(I),R(S),R(C)].join("")}},{}],15:[function(_,P,D){"use strict";P.exports=function(I,S,C){var L=Math.max(I,S,C),O=Math.min(I,S,C),G=L-O,R,E,T;return 0==G?R=0:I===L?R=(S-C)/G%6:S===L?R=(C-I)/G+2:C===L&&(R=(I-S)/G+4),R=Math.round(60*R),0>R&&(R+=360),E=Math.round(100*(0===L?0:G/L)),T=Math.round(100*(L/255)),{h:R,s:E,v:T}}},{}],16:[function(_,P,D){"use strict";P.exports=function(I,S,C,R){return"rgba("+[I,S,C,R/100].join(",")+")"}},{}],17:[function(_,P,D){"use strict";var I=_("./rgba2rgb"),S=_("./rgb2hex");P.exports=function(C,R,E,T){var L=I(C,R,E,T);return S(L.r,L.g,L.b)}},{"./rgb2hex":14,"./rgba2rgb":18}],18:[function(_,P,D){"use strict";P.exports=function(I,S,C,R){return R=R/100,{r:parseInt(255*(1-R)+R*I,10),g:parseInt(255*(1-R)+R*S,10),b:parseInt(255*(1-R)+R*C,10)}}},{}],19:[function(_,P,D){"use strict";var I=Object.prototype.hasOwnProperty,S=Object.prototype.toString,C=function(T){return"function"==typeof Array.isArray?Array.isArray(T):"[object Array]"===S.call(T)},R=function(T){if(!T||"[object Object]"!==S.call(T))return!1;var L=I.call(T,"constructor"),O=T.constructor&&T.constructor.prototype&&I.call(T.constructor.prototype,"isPrototypeOf");if(T.constructor&&!L&&!O)return!1;for(var G in T);return"undefined"==typeof G||I.call(T,G)};P.exports=function E(){var Q=arguments[0],J=1,$=arguments.length,ee=!1,T,L,O,G,Z,W;for("boolean"==typeof Q?(ee=Q,Q=arguments[1]||{},J=2):("object"!=typeof Q&&"function"!=typeof Q||null==Q)&&(Q={});J<$;++J)if(T=arguments[J],null!=T)for(L in T)O=Q[L],G=T[L],Q!==G&&(ee&&G&&(R(G)||(Z=C(G)))?(Z?(Z=!1,W=O&&C(O)?O:[]):W=O&&R(O)?O:{},Q[L]=E(ee,W,G)):"undefined"!=typeof G&&(Q[L]=G));return Q}},{}],20:[function(_,P,D){"use strict";var I=8192,S=[];P.exports=class{constructor(R,E){E=E||{},R===void 0&&(R=I),"number"==typeof R&&(R=new ArrayBuffer(R));var T=R.byteLength,L=E.offset?E.offset>>>0:0;R.buffer&&(T=R.byteLength-L,R=R.byteLength===R.buffer.byteLength?L?R.buffer.slice(L):R.buffer:R.buffer.slice(R.byteOffset+L,R.byteOffset+R.byteLength)),this.buffer=R,this.length=T,this.byteLength=T,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=T||I,this._mark=0}available(R){return void 0===R&&(R=1),this.offset+R<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(R){R===void 0&&(R=1),this.offset+=R}seek(R){this.offset=R}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(R){if(void 0===R&&(R=1),!this.available(R)){var E=this._increment+this._increment;this._increment=E;var T=this.length+E,L=new Uint8Array(T);L.set(new Uint8Array(this.buffer)),this.buffer=L.buffer,this.length=T,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(R){R===void 0&&(R=1);var E=new Uint8Array(R);for(var T=0;T<R;T++)E[T]=this.readByte();return E}readInt16(){var R=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,R}readUint16(){var R=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,R}readInt32(){var R=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,R}readUint32(){var R=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,R}readFloat32(){var R=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,R}readFloat64(){var R=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,R}readChar(){return String.fromCharCode(this.readInt8())}readChars(R){R===void 0&&(R=1),S.length=R;for(var E=0;E<R;E++)S[E]=this.readChar();return S.join("")}writeBoolean(R){this.writeUint8(R?255:0)}writeInt8(R){this.ensureAvailable(1),this._data.setInt8(this.offset++,R)}writeUint8(R){this.ensureAvailable(1),this._data.setUint8(this.offset++,R)}writeByte(R){this.writeUint8(R)}writeBytes(R){this.ensureAvailable(R.length);for(var E=0;E<R.length;E++)this._data.setUint8(this.offset++,R[E])}writeInt16(R){this.ensureAvailable(2),this._data.setInt16(this.offset,R,this.littleEndian),this.offset+=2}writeUint16(R){this.ensureAvailable(2),this._data.setUint16(this.offset,R,this.littleEndian),this.offset+=2}writeInt32(R){this.ensureAvailable(4),this._data.setInt32(this.offset,R,this.littleEndian),this.offset+=4}writeUint32(R){this.ensureAvailable(4),this._data.setUint32(this.offset,R,this.littleEndian),this.offset+=4}writeFloat32(R){this.ensureAvailable(4),this._data.setFloat32(this.offset,R,this.littleEndian),this.offset+=4}writeFloat64(R){this.ensureAvailable(8),this._data.setFloat64(this.offset,R,this.littleEndian),this.offset+=8}writeChar(R){this.writeUint8(R.charCodeAt(0))}writeChars(R){for(var E=0;E<R.length;E++)this.writeUint8(R.charCodeAt(E))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},{}],21:[function(_,P,D){"use strict";var I=_("iobuffer"),S=_("tiff");P.exports=function(R){var E=new I(R),T={};E.setBigEndian();var L=E.readUint16();if(65496!==L)throw new Error("SOI marker not found. Not a valid JPEG file");var O=E.readUint16();if(65505===O){E.readUint16();var G=E.readBytes(6);if(69===G[0]&&120===G[1]&&105===G[2]&&102===G[3]&&0===G[4]&&0===G[5]){var Z=S.decode(E,{onlyFirst:!0,ignoreImageData:!0,offset:E.offset});T.exif=Z}}return T}},{iobuffer:20,tiff:115}],22:[function(_,P,D){"use strict";D.decode=_("./decode")},{"./decode":21}],23:[function(_,P,D){"use strict";var I=_("./lib/utils/common").assign,S=_("./lib/deflate"),C=_("./lib/inflate"),R=_("./lib/zlib/constants"),E={};I(E,S,C,R),P.exports=E},{"./lib/deflate":24,"./lib/inflate":25,"./lib/utils/common":26,"./lib/zlib/constants":29}],24:[function(_,P,D){"use strict";function I(J){if(!(this instanceof I))return new I(J);this.options=R.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},J||{});var $=this.options;$.raw&&0<$.windowBits?$.windowBits=-$.windowBits:$.gzip&&0<$.windowBits&&16>$.windowBits&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new L,this.strm.avail_out=0;var ee=C.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(ee!==Z)throw new Error(T[ee]);if($.header&&C.deflateSetHeader(this.strm,$.header),$.dictionary){var te;if(te="string"==typeof $.dictionary?E.string2buf($.dictionary):"[object ArrayBuffer]"===O.call($.dictionary)?new Uint8Array($.dictionary):$.dictionary,ee=C.deflateSetDictionary(this.strm,te),ee!==Z)throw new Error(T[ee]);this._dict_set=!0}}function S(J,$){var ee=new I($);if(ee.push(J,!0),ee.err)throw ee.msg;return ee.result}var C=_("./zlib/deflate"),R=_("./utils/common"),E=_("./utils/strings"),T=_("./zlib/messages"),L=_("./zlib/zstream"),O=Object.prototype.toString,G=4,Z=0,W=1,Q=2;I.prototype.push=function(J,$){var ee=this.strm,te=this.options.chunkSize,ae,ie;if(this.ended)return!1;ie=$===~~$?$:!0===$?G:0,ee.input="string"==typeof J?E.string2buf(J):"[object ArrayBuffer]"===O.call(J)?new Uint8Array(J):J,ee.next_in=0,ee.avail_in=ee.input.length;do{if(0===ee.avail_out&&(ee.output=new R.Buf8(te),ee.next_out=0,ee.avail_out=te),ae=C.deflate(ee,ie),ae!==W&&ae!==Z)return this.onEnd(ae),this.ended=!0,!1;(0===ee.avail_out||0===ee.avail_in&&(ie===G||ie===Q))&&("string"===this.options.to?this.onData(E.buf2binstring(R.shrinkBuf(ee.output,ee.next_out))):this.onData(R.shrinkBuf(ee.output,ee.next_out)))}while((0<ee.avail_in||0===ee.avail_out)&&ae!==W);return ie===G?(ae=C.deflateEnd(this.strm),this.onEnd(ae),this.ended=!0,ae===Z):ie!==Q||(this.onEnd(Z),ee.avail_out=0,!0)},I.prototype.onData=function(J){this.chunks.push(J)},I.prototype.onEnd=function(J){J===Z&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=R.flattenChunks(this.chunks)),this.chunks=[],this.err=J,this.msg=this.strm.msg},D.Deflate=I,D.deflate=S,D.deflateRaw=function($,ee){return ee=ee||{},ee.raw=!0,S($,ee)},D.gzip=function($,ee){return ee=ee||{},ee.gzip=!0,S($,ee)}},{"./utils/common":26,"./utils/strings":27,"./zlib/deflate":31,"./zlib/messages":36,"./zlib/zstream":38}],25:[function(_,P,D){"use strict";function I(W){if(!(this instanceof I))return new I(W);this.options=R.assign({chunkSize:16384,windowBits:0,to:""},W||{});var Q=this.options;Q.raw&&0<=Q.windowBits&&16>Q.windowBits&&(Q.windowBits=-Q.windowBits,0===Q.windowBits&&(Q.windowBits=-15)),0<=Q.windowBits&&16>Q.windowBits&&!(W&&W.windowBits)&&(Q.windowBits+=32),15<Q.windowBits&&48>Q.windowBits&&0==(15&Q.windowBits)&&(Q.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new O,this.strm.avail_out=0;var J=C.inflateInit2(this.strm,Q.windowBits);if(J!==T.Z_OK)throw new Error(L[J]);this.header=new G,C.inflateGetHeader(this.strm,this.header)}function S(W,Q){var J=new I(Q);if(J.push(W,!0),J.err)throw J.msg;return J.result}var C=_("./zlib/inflate"),R=_("./utils/common"),E=_("./utils/strings"),T=_("./zlib/constants"),L=_("./zlib/messages"),O=_("./zlib/zstream"),G=_("./zlib/gzheader"),Z=Object.prototype.toString;I.prototype.push=function(W,Q){var J=this.strm,$=this.options.chunkSize,ee=this.options.dictionary,se=!1,te,ae,ie,ne,le,oe;if(this.ended)return!1;ae=Q===~~Q?Q:!0===Q?T.Z_FINISH:T.Z_NO_FLUSH,J.input="string"==typeof W?E.binstring2buf(W):"[object ArrayBuffer]"===Z.call(W)?new Uint8Array(W):W,J.next_in=0,J.avail_in=J.input.length;do{if(0===J.avail_out&&(J.output=new R.Buf8($),J.next_out=0,J.avail_out=$),te=C.inflate(J,T.Z_NO_FLUSH),te===T.Z_NEED_DICT&&ee&&(oe="string"==typeof ee?E.string2buf(ee):"[object ArrayBuffer]"===Z.call(ee)?new Uint8Array(ee):ee,te=C.inflateSetDictionary(this.strm,oe)),te===T.Z_BUF_ERROR&&!0==se&&(te=T.Z_OK,se=!1),te!==T.Z_STREAM_END&&te!==T.Z_OK)return this.onEnd(te),this.ended=!0,!1;J.next_out&&(0===J.avail_out||te===T.Z_STREAM_END||0===J.avail_in&&(ae===T.Z_FINISH||ae===T.Z_SYNC_FLUSH))&&("string"===this.options.to?(ie=E.utf8border(J.output,J.next_out),ne=J.next_out-ie,le=E.buf2string(J.output,ie),J.next_out=ne,J.avail_out=$-ne,ne&&R.arraySet(J.output,J.output,ie,ne,0),this.onData(le)):this.onData(R.shrinkBuf(J.output,J.next_out))),0===J.avail_in&&0===J.avail_out&&(se=!0)}while((0<J.avail_in||0===J.avail_out)&&te!==T.Z_STREAM_END);return te===T.Z_STREAM_END&&(ae=T.Z_FINISH),ae===T.Z_FINISH?(te=C.inflateEnd(this.strm),this.onEnd(te),this.ended=!0,te===T.Z_OK):ae!==T.Z_SYNC_FLUSH||(this.onEnd(T.Z_OK),J.avail_out=0,!0)},I.prototype.onData=function(W){this.chunks.push(W)},I.prototype.onEnd=function(W){W===T.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=R.flattenChunks(this.chunks)),this.chunks=[],this.err=W,this.msg=this.strm.msg},D.Inflate=I,D.inflate=S,D.inflateRaw=function(Q,J){return J=J||{},J.raw=!0,S(Q,J)},D.ungzip=S},{"./utils/common":26,"./utils/strings":27,"./zlib/constants":29,"./zlib/gzheader":32,"./zlib/inflate":34,"./zlib/messages":36,"./zlib/zstream":38}],26:[function(_,P,D){"use strict";var I="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;D.assign=function(R){for(var E=Array.prototype.slice.call(arguments,1);E.length;){var T=E.shift();if(T){if("object"!=typeof T)throw new TypeError(T+"must be non-object");for(var L in T)T.hasOwnProperty(L)&&(R[L]=T[L])}}return R},D.shrinkBuf=function(R,E){return R.length===E?R:R.subarray?R.subarray(0,E):(R.length=E,R)};var S={arraySet:function(E,T,L,O,G){if(T.subarray&&E.subarray)return void E.set(T.subarray(L,L+O),G);for(var Z=0;Z<O;Z++)E[G+Z]=T[L+Z]},flattenChunks:function(E){var T,L,O,G,Z,W;for(O=0,T=0,L=E.length;T<L;T++)O+=E[T].length;for(W=new Uint8Array(O),G=0,(T=0,L=E.length);T<L;T++)Z=E[T],W.set(Z,G),G+=Z.length;return W}},C={arraySet:function(E,T,L,O,G){for(var Z=0;Z<O;Z++)E[G+Z]=T[L+Z]},flattenChunks:function(E){return[].concat.apply([],E)}};D.setTyped=function(R){R?(D.Buf8=Uint8Array,D.Buf16=Uint16Array,D.Buf32=Int32Array,D.assign(D,S)):(D.Buf8=Array,D.Buf16=Array,D.Buf32=Array,D.assign(D,C))},D.setTyped(I)},{}],27:[function(_,P,D){"use strict";function I(L,O){if(65537>O&&(L.subarray&&R||!L.subarray&&C))return String.fromCharCode.apply(null,S.shrinkBuf(L,O));var G="";for(var Z=0;Z<O;Z++)G+=String.fromCharCode(L[Z]);return G}var S=_("./common"),C=!0,R=!0;try{String.fromCharCode.apply(null,[0])}catch(L){C=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(L){R=!1}var E=new S.Buf8(256);for(var T=0;256>T;T++)E[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;E[254]=E[254]=1,D.string2buf=function(L){var J=L.length,$=0,O,G,Z,W,Q;for(W=0;W<J;W++)G=L.charCodeAt(W),55296==(64512&G)&&W+1<J&&(Z=L.charCodeAt(W+1),56320==(64512&Z)&&(G=65536+(G-55296<<10)+(Z-56320),W++)),$+=128>G?1:2048>G?2:65536>G?3:4;for(O=new S.Buf8($),Q=0,W=0;Q<$;W++)G=L.charCodeAt(W),55296==(64512&G)&&W+1<J&&(Z=L.charCodeAt(W+1),56320==(64512&Z)&&(G=65536+(G-55296<<10)+(Z-56320),W++)),128>G?O[Q++]=G:2048>G?(O[Q++]=192|G>>>6,O[Q++]=128|63&G):65536>G?(O[Q++]=224|G>>>12,O[Q++]=128|63&G>>>6,O[Q++]=128|63&G):(O[Q++]=240|G>>>18,O[Q++]=128|63&G>>>12,O[Q++]=128|63&G>>>6,O[Q++]=128|63&G);return O},D.buf2binstring=function(L){return I(L,L.length)},D.binstring2buf=function(L){var O=new S.Buf8(L.length);for(var G=0,Z=O.length;G<Z;G++)O[G]=L.charCodeAt(G);return O},D.buf2string=function(L,O){var G,Z,W,Q,J=O||L.length,$=Array(2*J);for(Z=0,G=0;G<J;){if(W=L[G++],128>W){$[Z++]=W;continue}if(Q=E[W],4<Q){$[Z++]=65533,G+=Q-1;continue}for(W&=2===Q?31:3===Q?15:7;1<Q&&G<J;)W=W<<6|63&L[G++],Q--;if(1<Q){$[Z++]=65533;continue}65536>W?$[Z++]=W:(W-=65536,$[Z++]=55296|1023&W>>10,$[Z++]=56320|1023&W)}return I($,Z)},D.utf8border=function(L,O){var G;for(O=O||L.length,O>L.length&&(O=L.length),G=O-1;0<=G&&128==(192&L[G]);)G--;return 0>G?O:0===G?O:G+E[L[G]]>O?G:O}},{"./common":26}],28:[function(_,P,D){"use strict";P.exports=function(S,C,R,E){for(var T=0|65535&S,L=0|65535&S>>>16,O=0;0!==R;){O=2000<R?2000:R,R-=O;do T=0|T+C[E++],L=0|L+T;while(--O);T%=65521,L%=65521}return 0|(T|L<<16)}},{}],29:[function(_,P,D){"use strict";P.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],30:[function(_,P,D){"use strict";var I=function(){var R=[],C;for(var E=0;256>E;E++){C=E;for(var T=0;8>T;T++)C=1&C?3988292384^C>>>1:C>>>1;R[E]=C}return R}();P.exports=function(C,R,E,T){C^=-1;for(var L=T;L<T+E;L++)C=C>>>8^I[255&(C^R[L])];return-1^C}},{}],31:[function(_,P,D){"use strict";function I(Le,qe){return Le.msg=ue[qe],qe}function S(Le){return(Le<<1)-(4<Le?9:0)}function C(Le){for(var qe=Le.length;0<=--qe;)Le[qe]=0}function R(Le){var qe=Le.state,Oe=qe.pending;Oe>Le.avail_out&&(Oe=Le.avail_out);0===Oe||(oe.arraySet(Le.output,qe.pending_buf,qe.pending_out,Oe,Le.next_out),Le.next_out+=Oe,qe.pending_out+=Oe,Le.total_out+=Oe,Le.avail_out-=Oe,qe.pending-=Oe,0===qe.pending&&(qe.pending_out=0))}function E(Le,qe){se._tr_flush_block(Le,0<=Le.block_start?Le.block_start:-1,Le.strstart-Le.block_start,qe),Le.block_start=Le.strstart,R(Le.strm)}function T(Le,qe){Le.pending_buf[Le.pending++]=qe}function L(Le,qe){Le.pending_buf[Le.pending++]=255&qe>>>8,Le.pending_buf[Le.pending++]=255&qe}function O(Le,qe,Oe,Ve){var Fe=Le.avail_in;return(Fe>Ve&&(Fe=Ve),0===Fe)?0:(Le.avail_in-=Fe,oe.arraySet(qe,Le.input,Le.next_in,Fe,Oe),1===Le.state.wrap?Le.adler=de(Le.adler,qe,Fe,Oe):2===Le.state.wrap&&(Le.adler=he(Le.adler,qe,Fe,Oe)),Le.next_in+=Fe,Le.total_in+=Fe,Fe)}function G(Le,qe){var Oe=Le.max_chain_length,Ve=Le.strstart,Fe,Ue,Ne=Le.prev_length,Ye=Le.nice_match,Ge=Le.strstart>Le.w_size-Me?Le.strstart-(Le.w_size-Me):0,Xe=Le.window,He=Le.w_mask,Ze=Le.prev,We=Le.strstart+ve,Ke=Xe[Ve+Ne-1],Qe=Xe[Ve+Ne];Le.prev_length>=Le.good_match&&(Oe>>=2),Ye>Le.lookahead&&(Ye=Le.lookahead);do{if(Fe=qe,Xe[Fe+Ne]!==Qe||Xe[Fe+Ne-1]!==Ke||Xe[Fe]!==Xe[Ve]||Xe[++Fe]!==Xe[Ve+1])continue;Ve+=2,Fe++;do;while(Xe[++Ve]===Xe[++Fe]&&Xe[++Ve]===Xe[++Fe]&&Xe[++Ve]===Xe[++Fe]&&Xe[++Ve]===Xe[++Fe]&&Xe[++Ve]===Xe[++Fe]&&Xe[++Ve]===Xe[++Fe]&&Xe[++Ve]===Xe[++Fe]&&Xe[++Ve]===Xe[++Fe]&&Ve<We);if(Ue=ve-(We-Ve),Ve=We-ve,Ue>Ne){if(Le.match_start=qe,Ne=Ue,Ue>=Ye)break;Ke=Xe[Ve+Ne-1],Qe=Xe[Ve+Ne]}}while((qe=Ze[qe&He])>Ge&&0!=--Oe);return Ne<=Le.lookahead?Ne:Le.lookahead}function Z(Le){var qe=Le.w_size,Oe,Ve,Fe,Ue,Ne;do{if(Ue=Le.window_size-Le.lookahead-Le.strstart,Le.strstart>=qe+(qe-Me)){oe.arraySet(Le.window,Le.window,qe,qe,0),Le.match_start-=qe,Le.strstart-=qe,Le.block_start-=qe,Ve=Le.hash_size,Oe=Ve;do Fe=Le.head[--Oe],Le.head[Oe]=Fe>=qe?Fe-qe:0;while(--Ve);Ve=qe,Oe=Ve;do Fe=Le.prev[--Oe],Le.prev[Oe]=Fe>=qe?Fe-qe:0;while(--Ve);Ue+=qe}if(0===Le.strm.avail_in)break;if(Ve=O(Le.strm,Le.window,Le.strstart+Le.lookahead,Ue),Le.lookahead+=Ve,Le.lookahead+Le.insert>=we)for(Ne=Le.strstart-Le.insert,Le.ins_h=Le.window[Ne],Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Ne+1])&Le.hash_mask;Le.insert&&(Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Ne+we-1])&Le.hash_mask,Le.prev[Ne&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Ne,Ne++,Le.insert--,!(Le.lookahead+Le.insert<we)););}while(Le.lookahead<Me&&0!==Le.strm.avail_in)}function W(Le,qe){for(var Oe,Ve;;){if(Le.lookahead<Me){if(Z(Le),Le.lookahead<Me&&qe===me)return Re;if(0===Le.lookahead)break}if(Oe=0,Le.lookahead>=we&&(Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Le.strstart+we-1])&Le.hash_mask,Oe=Le.prev[Le.strstart&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Le.strstart),0!==Oe&&Le.strstart-Oe<=Le.w_size-Me&&(Le.match_length=G(Le,Oe)),!(Le.match_length>=we))Ve=se._tr_tally(Le,0,Le.window[Le.strstart]),Le.lookahead--,Le.strstart++;else if(Ve=se._tr_tally(Le,Le.strstart-Le.match_start,Le.match_length-we),Le.lookahead-=Le.match_length,Le.match_length<=Le.max_lazy_match&&Le.lookahead>=we){Le.match_length--;do Le.strstart++,Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Le.strstart+we-1])&Le.hash_mask,Oe=Le.prev[Le.strstart&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Le.strstart;while(0!=--Le.match_length);Le.strstart++}else Le.strstart+=Le.match_length,Le.match_length=0,Le.ins_h=Le.window[Le.strstart],Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Le.strstart+1])&Le.hash_mask;if(Ve&&(E(Le,!1),0===Le.strm.avail_out))return Re}return Le.insert=Le.strstart<we-1?Le.strstart:we-1,qe===ge?(E(Le,!0),0===Le.strm.avail_out?ze:Ee):Le.last_lit&&(E(Le,!1),0===Le.strm.avail_out)?Re:Be}function Q(Le,qe){for(var Oe,Ve,Fe;;){if(Le.lookahead<Me){if(Z(Le),Le.lookahead<Me&&qe===me)return Re;if(0===Le.lookahead)break}if(Oe=0,Le.lookahead>=we&&(Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Le.strstart+we-1])&Le.hash_mask,Oe=Le.prev[Le.strstart&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Le.strstart),Le.prev_length=Le.match_length,Le.prev_match=Le.match_start,Le.match_length=we-1,0!==Oe&&Le.prev_length<Le.max_lazy_match&&Le.strstart-Oe<=Le.w_size-Me&&(Le.match_length=G(Le,Oe),5>=Le.match_length&&(1===Le.strategy||Le.match_length===we&&4096<Le.strstart-Le.match_start)&&(Le.match_length=we-1)),Le.prev_length>=we&&Le.match_length<=Le.prev_length){Fe=Le.strstart+Le.lookahead-we,Ve=se._tr_tally(Le,Le.strstart-1-Le.prev_match,Le.prev_length-we),Le.lookahead-=Le.prev_length-1,Le.prev_length-=2;do++Le.strstart<=Fe&&(Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Le.strstart+we-1])&Le.hash_mask,Oe=Le.prev[Le.strstart&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Le.strstart);while(0!=--Le.prev_length);if(Le.match_available=0,Le.match_length=we-1,Le.strstart++,Ve&&(E(Le,!1),0===Le.strm.avail_out))return Re}else if(!Le.match_available)Le.match_available=1,Le.strstart++,Le.lookahead--;else if(Ve=se._tr_tally(Le,0,Le.window[Le.strstart-1]),Ve&&E(Le,!1),Le.strstart++,Le.lookahead--,0===Le.strm.avail_out)return Re}return Le.match_available&&(Ve=se._tr_tally(Le,0,Le.window[Le.strstart-1]),Le.match_available=0),Le.insert=Le.strstart<we-1?Le.strstart:we-1,qe===ge?(E(Le,!0),0===Le.strm.avail_out?ze:Ee):Le.last_lit&&(E(Le,!1),0===Le.strm.avail_out)?Re:Be}function J(Le,qe){for(var Ne=Le.window,Oe,Ve,Fe,Ue;;){if(Le.lookahead<=ve){if(Z(Le),Le.lookahead<=ve&&qe===me)return Re;if(0===Le.lookahead)break}if(Le.match_length=0,Le.lookahead>=we&&0<Le.strstart&&(Fe=Le.strstart-1,Ve=Ne[Fe],Ve===Ne[++Fe]&&Ve===Ne[++Fe]&&Ve===Ne[++Fe])){Ue=Le.strstart+ve;do;while(Ve===Ne[++Fe]&&Ve===Ne[++Fe]&&Ve===Ne[++Fe]&&Ve===Ne[++Fe]&&Ve===Ne[++Fe]&&Ve===Ne[++Fe]&&Ve===Ne[++Fe]&&Ve===Ne[++Fe]&&Fe<Ue);Le.match_length=ve-(Ue-Fe),Le.match_length>Le.lookahead&&(Le.match_length=Le.lookahead)}if(Le.match_length>=we?(Oe=se._tr_tally(Le,1,Le.match_length-we),Le.lookahead-=Le.match_length,Le.strstart+=Le.match_length,Le.match_length=0):(Oe=se._tr_tally(Le,0,Le.window[Le.strstart]),Le.lookahead--,Le.strstart++),Oe&&(E(Le,!1),0===Le.strm.avail_out))return Re}return Le.insert=0,qe===ge?(E(Le,!0),0===Le.strm.avail_out?ze:Ee):Le.last_lit&&(E(Le,!1),0===Le.strm.avail_out)?Re:Be}function $(Le,qe){for(var Oe;;){if(0===Le.lookahead&&(Z(Le),0===Le.lookahead)){if(qe===me)return Re;break}if(Le.match_length=0,Oe=se._tr_tally(Le,0,Le.window[Le.strstart]),Le.lookahead--,Le.strstart++,Oe&&(E(Le,!1),0===Le.strm.avail_out))return Re}return Le.insert=0,qe===ge?(E(Le,!0),0===Le.strm.avail_out?ze:Ee):Le.last_lit&&(E(Le,!1),0===Le.strm.avail_out)?Re:Be}function ee(Le,qe,Oe,Ve,Fe){this.good_length=Le,this.max_lazy=qe,this.nice_length=Oe,this.max_chain=Ve,this.func=Fe}function te(Le){Le.window_size=2*Le.w_size,C(Le.head),Le.max_lazy_match=Te[Le.level].max_lazy,Le.good_match=Te[Le.level].good_length,Le.nice_match=Te[Le.level].nice_length,Le.max_chain_length=Te[Le.level].max_chain,Le.strstart=0,Le.block_start=0,Le.lookahead=0,Le.insert=0,Le.match_length=Le.prev_length=we-1,Le.match_available=0,Le.ins_h=0}function ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ye,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new oe.Buf16(2*(2*ke+1)),this.dyn_dtree=new oe.Buf16(122),this.bl_tree=new oe.Buf16(78),C(this.dyn_ltree),C(this.dyn_dtree),C(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new oe.Buf16(16),this.heap=new oe.Buf16(2*ke+1),C(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new oe.Buf16(2*ke+1),C(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ie(Le){var qe;return Le&&Le.state?(Le.total_in=Le.total_out=0,Le.data_type=2,qe=Le.state,qe.pending=0,qe.pending_out=0,0>qe.wrap&&(qe.wrap=-qe.wrap),qe.status=qe.wrap?je:Ae,Le.adler=2===qe.wrap?0:1,qe.last_flush=me,se._tr_init(qe),pe):I(Le,_e)}function ne(Le){var qe=ie(Le);return qe===pe&&te(Le.state),qe}function le(Le,qe,Oe,Ve,Fe,Ue){if(!Le)return _e;var Ne=1;if(-1===qe&&(qe=6),0>Ve?(Ne=0,Ve=-Ve):15<Ve&&(Ne=2,Ve-=16),1>Fe||9<Fe||Oe!==ye||8>Ve||15<Ve||0>qe||9<qe||0>Ue||4<Ue)return I(Le,_e);8===Ve&&(Ve=9);var Ye=new ae;return Le.state=Ye,Ye.strm=Le,Ye.wrap=Ne,Ye.gzhead=null,Ye.w_bits=Ve,Ye.w_size=1<<Ye.w_bits,Ye.w_mask=Ye.w_size-1,Ye.hash_bits=Fe+7,Ye.hash_size=1<<Ye.hash_bits,Ye.hash_mask=Ye.hash_size-1,Ye.hash_shift=~~((Ye.hash_bits+we-1)/we),Ye.window=new oe.Buf8(2*Ye.w_size),Ye.head=new oe.Buf16(Ye.hash_size),Ye.prev=new oe.Buf16(Ye.w_size),Ye.lit_bufsize=1<<Fe+6,Ye.pending_buf_size=4*Ye.lit_bufsize,Ye.pending_buf=new oe.Buf8(Ye.pending_buf_size),Ye.d_buf=Ye.lit_bufsize>>1,Ye.l_buf=3*Ye.lit_bufsize,Ye.level=qe,Ye.strategy=Ue,Ye.method=Oe,ne(Le)}var oe=_("../utils/common"),se=_("./trees"),de=_("./adler32"),he=_("./crc32"),ue=_("./messages"),me=0,ge=4,ce=5,pe=0,fe=1,_e=-2,be=-5,xe=2,ye=8,ke=286,we=3,ve=258,Me=ve+we+1,je=42,Pe=69,De=73,Ie=91,Se=103,Ae=113,Ce=666,Re=1,Be=2,ze=3,Ee=4,Te=[new ee(0,0,0,0,function(qe,Oe){var Ve=65535;for(Ve>qe.pending_buf_size-5&&(Ve=qe.pending_buf_size-5);;){if(1>=qe.lookahead){if(Z(qe),0===qe.lookahead&&Oe===me)return Re;if(0===qe.lookahead)break}qe.strstart+=qe.lookahead,qe.lookahead=0;var Fe=qe.block_start+Ve;if((0===qe.strstart||qe.strstart>=Fe)&&(qe.lookahead=qe.strstart-Fe,qe.strstart=Fe,E(qe,!1),0===qe.strm.avail_out))return Re;if(qe.strstart-qe.block_start>=qe.w_size-Me&&(E(qe,!1),0===qe.strm.avail_out))return Re}return qe.insert=0,Oe===ge?(E(qe,!0),0===qe.strm.avail_out?ze:Ee):qe.strstart>qe.block_start&&(E(qe,!1),0===qe.strm.avail_out)?Re:Re}),new ee(4,4,8,4,W),new ee(4,5,16,8,W),new ee(4,6,32,32,W),new ee(4,4,16,16,Q),new ee(8,16,32,32,Q),new ee(8,16,128,128,Q),new ee(8,32,128,256,Q),new ee(32,128,258,1024,Q),new ee(32,258,258,4096,Q)];D.deflateInit=function(qe,Oe){return le(qe,Oe,ye,15,8,0)},D.deflateInit2=le,D.deflateReset=ne,D.deflateResetKeep=ie,D.deflateSetHeader=function(qe,Oe){return qe&&qe.state?2===qe.state.wrap?(qe.state.gzhead=Oe,pe):_e:_e},D.deflate=function(qe,Oe){var Ve,Fe,Ue,Ne;if(!qe||!qe.state||Oe>ce||0>Oe)return qe?I(qe,_e):_e;if(Fe=qe.state,!qe.output||!qe.input&&0!==qe.avail_in||Fe.status===Ce&&Oe!==ge)return I(qe,0===qe.avail_out?be:_e);if(Fe.strm=qe,Ve=Fe.last_flush,Fe.last_flush=Oe,Fe.status===je)if(2===Fe.wrap)qe.adler=0,T(Fe,31),T(Fe,139),T(Fe,8),Fe.gzhead?(T(Fe,(Fe.gzhead.text?1:0)+(Fe.gzhead.hcrc?2:0)+(Fe.gzhead.extra?4:0)+(Fe.gzhead.name?8:0)+(Fe.gzhead.comment?16:0)),T(Fe,255&Fe.gzhead.time),T(Fe,255&Fe.gzhead.time>>8),T(Fe,255&Fe.gzhead.time>>16),T(Fe,255&Fe.gzhead.time>>24),T(Fe,9===Fe.level?2:Fe.strategy>=xe||2>Fe.level?4:0),T(Fe,255&Fe.gzhead.os),Fe.gzhead.extra&&Fe.gzhead.extra.length&&(T(Fe,255&Fe.gzhead.extra.length),T(Fe,255&Fe.gzhead.extra.length>>8)),Fe.gzhead.hcrc&&(qe.adler=he(qe.adler,Fe.pending_buf,Fe.pending,0)),Fe.gzindex=0,Fe.status=Pe):(T(Fe,0),T(Fe,0),T(Fe,0),T(Fe,0),T(Fe,0),T(Fe,9===Fe.level?2:Fe.strategy>=xe||2>Fe.level?4:0),T(Fe,3),Fe.status=Ae);else{var Ye=ye+(Fe.w_bits-8<<4)<<8,Ge=-1;Ge=Fe.strategy>=xe||2>Fe.level?0:6>Fe.level?1:6===Fe.level?2:3,Ye|=Ge<<6,0!==Fe.strstart&&(Ye|=32),Ye+=31-Ye%31,Fe.status=Ae,L(Fe,Ye),0!==Fe.strstart&&(L(Fe,qe.adler>>>16),L(Fe,65535&qe.adler)),qe.adler=1}if(Fe.status===Pe)if(Fe.gzhead.extra){for(Ue=Fe.pending;Fe.gzindex<(65535&Fe.gzhead.extra.length)&&!(Fe.pending===Fe.pending_buf_size&&(Fe.gzhead.hcrc&&Fe.pending>Ue&&(qe.adler=he(qe.adler,Fe.pending_buf,Fe.pending-Ue,Ue)),R(qe),Ue=Fe.pending,Fe.pending===Fe.pending_buf_size));)T(Fe,255&Fe.gzhead.extra[Fe.gzindex]),Fe.gzindex++;Fe.gzhead.hcrc&&Fe.pending>Ue&&(qe.adler=he(qe.adler,Fe.pending_buf,Fe.pending-Ue,Ue)),Fe.gzindex===Fe.gzhead.extra.length&&(Fe.gzindex=0,Fe.status=De)}else Fe.status=De;if(Fe.status===De)if(Fe.gzhead.name){Ue=Fe.pending;do{if(Fe.pending===Fe.pending_buf_size&&(Fe.gzhead.hcrc&&Fe.pending>Ue&&(qe.adler=he(qe.adler,Fe.pending_buf,Fe.pending-Ue,Ue)),R(qe),Ue=Fe.pending,Fe.pending===Fe.pending_buf_size)){Ne=1;break}Ne=Fe.gzindex<Fe.gzhead.name.length?255&Fe.gzhead.name.charCodeAt(Fe.gzindex++):0,T(Fe,Ne)}while(0!==Ne);Fe.gzhead.hcrc&&Fe.pending>Ue&&(qe.adler=he(qe.adler,Fe.pending_buf,Fe.pending-Ue,Ue)),0===Ne&&(Fe.gzindex=0,Fe.status=Ie)}else Fe.status=Ie;if(Fe.status===Ie)if(Fe.gzhead.comment){Ue=Fe.pending;do{if(Fe.pending===Fe.pending_buf_size&&(Fe.gzhead.hcrc&&Fe.pending>Ue&&(qe.adler=he(qe.adler,Fe.pending_buf,Fe.pending-Ue,Ue)),R(qe),Ue=Fe.pending,Fe.pending===Fe.pending_buf_size)){Ne=1;break}Ne=Fe.gzindex<Fe.gzhead.comment.length?255&Fe.gzhead.comment.charCodeAt(Fe.gzindex++):0,T(Fe,Ne)}while(0!==Ne);Fe.gzhead.hcrc&&Fe.pending>Ue&&(qe.adler=he(qe.adler,Fe.pending_buf,Fe.pending-Ue,Ue)),0===Ne&&(Fe.status=Se)}else Fe.status=Se;if(Fe.status===Se&&(Fe.gzhead.hcrc?(Fe.pending+2>Fe.pending_buf_size&&R(qe),Fe.pending+2<=Fe.pending_buf_size&&(T(Fe,255&qe.adler),T(Fe,255&qe.adler>>8),qe.adler=0,Fe.status=Ae)):Fe.status=Ae),0!==Fe.pending){if(R(qe),0===qe.avail_out)return Fe.last_flush=-1,pe;}else if(0===qe.avail_in&&S(Oe)<=S(Ve)&&Oe!==ge)return I(qe,be);if(Fe.status===Ce&&0!==qe.avail_in)return I(qe,be);if(0!==qe.avail_in||0!==Fe.lookahead||Oe!==me&&Fe.status!==Ce){var Xe=Fe.strategy===xe?$(Fe,Oe):3===Fe.strategy?J(Fe,Oe):Te[Fe.level].func(Fe,Oe);if((Xe===ze||Xe===Ee)&&(Fe.status=Ce),Xe===Re||Xe===ze)return 0===qe.avail_out&&(Fe.last_flush=-1),pe;if(Xe===Be&&(1===Oe?se._tr_align(Fe):Oe!=ce&&(se._tr_stored_block(Fe,0,0,!1),3==Oe&&(C(Fe.head),0===Fe.lookahead&&(Fe.strstart=0,Fe.block_start=0,Fe.insert=0))),R(qe),0===qe.avail_out))return Fe.last_flush=-1,pe}return Oe===ge?0>=Fe.wrap?fe:(2===Fe.wrap?(T(Fe,255&qe.adler),T(Fe,255&qe.adler>>8),T(Fe,255&qe.adler>>16),T(Fe,255&qe.adler>>24),T(Fe,255&qe.total_in),T(Fe,255&qe.total_in>>8),T(Fe,255&qe.total_in>>16),T(Fe,255&qe.total_in>>24)):(L(Fe,qe.adler>>>16),L(Fe,65535&qe.adler)),R(qe),0<Fe.wrap&&(Fe.wrap=-Fe.wrap),0===Fe.pending?fe:pe):pe},D.deflateEnd=function(qe){var Oe;return qe&&qe.state?(Oe=qe.state.status,Oe!==je&&Oe!==Pe&&Oe!==De&&Oe!==Ie&&Oe!==Se&&Oe!==Ae&&Oe!==Ce)?I(qe,_e):(qe.state=null,Oe===Ae?I(qe,-3):pe):_e},D.deflateSetDictionary=function(qe,Oe){var Ve=Oe.length,Fe,Ue,Ne,Ye,Ge,Xe,He,Ze;if(!qe||!qe.state)return _e;if(Fe=qe.state,Ye=Fe.wrap,2===Ye||1===Ye&&Fe.status!==je||Fe.lookahead)return _e;for(1===Ye&&(qe.adler=de(qe.adler,Oe,Ve,0)),Fe.wrap=0,Ve>=Fe.w_size&&(0===Ye&&(C(Fe.head),Fe.strstart=0,Fe.block_start=0,Fe.insert=0),Ze=new oe.Buf8(Fe.w_size),oe.arraySet(Ze,Oe,Ve-Fe.w_size,Fe.w_size,0),Oe=Ze,Ve=Fe.w_size),Ge=qe.avail_in,Xe=qe.next_in,He=qe.input,qe.avail_in=Ve,qe.next_in=0,qe.input=Oe,Z(Fe);Fe.lookahead>=we;){Ue=Fe.strstart,Ne=Fe.lookahead-(we-1);do Fe.ins_h=(Fe.ins_h<<Fe.hash_shift^Fe.window[Ue+we-1])&Fe.hash_mask,Fe.prev[Ue&Fe.w_mask]=Fe.head[Fe.ins_h],Fe.head[Fe.ins_h]=Ue,Ue++;while(--Ne);Fe.strstart=Ue,Fe.lookahead=we-1,Z(Fe)}return Fe.strstart+=Fe.lookahead,Fe.block_start=Fe.strstart,Fe.insert=Fe.lookahead,Fe.lookahead=0,Fe.match_length=Fe.prev_length=we-1,Fe.match_available=0,qe.next_in=Xe,qe.input=He,qe.avail_in=Ge,Fe.wrap=Ye,pe},D.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":26,"./adler32":28,"./crc32":30,"./messages":36,"./trees":37}],32:[function(_,P,D){"use strict";P.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],33:[function(_,P,D){"use strict";var I=30;P.exports=function(C,R){var E,T,L,O,G,Z,W,Q,J,$,ee,te,ae,ie,ne,le,oe,se,de,he,ue,me,ge,ce,pe;E=C.state,T=C.next_in,ce=C.input,L=T+(C.avail_in-5),O=C.next_out,pe=C.output,G=O-(R-C.avail_out),Z=O+(C.avail_out-257),W=E.dmax,Q=E.wsize,J=E.whave,$=E.wnext,ee=E.window,te=E.hold,ae=E.bits,ie=E.lencode,ne=E.distcode,le=(1<<E.lenbits)-1,oe=(1<<E.distbits)-1;top:do{15>ae&&(te+=ce[T++]<<ae,ae+=8,te+=ce[T++]<<ae,ae+=8),se=ie[te&le];dolen:for(;;){if(de=se>>>24,te>>>=de,ae-=de,de=255&se>>>16,0===de)pe[O++]=65535&se;else if(16&de){he=65535&se,de&=15,de&&(ae<de&&(te+=ce[T++]<<ae,ae+=8),he+=te&(1<<de)-1,te>>>=de,ae-=de),15>ae&&(te+=ce[T++]<<ae,ae+=8,te+=ce[T++]<<ae,ae+=8),se=ne[te&oe];dodist:for(;;){if(de=se>>>24,te>>>=de,ae-=de,de=255&se>>>16,16&de){if(ue=65535&se,de&=15,ae<de&&(te+=ce[T++]<<ae,ae+=8,ae<de&&(te+=ce[T++]<<ae,ae+=8)),ue+=te&(1<<de)-1,ue>W){C.msg="invalid distance too far back",E.mode=I;break top}if(te>>>=de,ae-=de,de=O-G,ue>de){if(de=ue-de,de>J&&E.sane){C.msg="invalid distance too far back",E.mode=I;break top}if(me=0,ge=ee,0===$){if(me+=Q-de,de<he){he-=de;do pe[O++]=ee[me++];while(--de);me=O-ue,ge=pe}}else if($<de){if(me+=Q+$-de,de-=$,de<he){he-=de;do pe[O++]=ee[me++];while(--de);if(me=0,$<he){de=$,he-=de;do pe[O++]=ee[me++];while(--de);me=O-ue,ge=pe}}}else if(me+=$-de,de<he){he-=de;do pe[O++]=ee[me++];while(--de);me=O-ue,ge=pe}for(;2<he;)pe[O++]=ge[me++],pe[O++]=ge[me++],pe[O++]=ge[me++],he-=3;he&&(pe[O++]=ge[me++],1<he&&(pe[O++]=ge[me++]))}else{me=O-ue;do pe[O++]=pe[me++],pe[O++]=pe[me++],pe[O++]=pe[me++],he-=3;while(2<he);he&&(pe[O++]=pe[me++],1<he&&(pe[O++]=pe[me++]))}}else if(0==(64&de)){se=ne[(65535&se)+(te&(1<<de)-1)];continue dodist}else{C.msg="invalid distance code",E.mode=I;break top}break}}else if(0==(64&de)){se=ie[(65535&se)+(te&(1<<de)-1)];continue dolen}else if(32&de){E.mode=12;break top}else{C.msg="invalid literal/length code",E.mode=I;break top}break}}while(T<L&&O<Z);he=ae>>3,T-=he,ae-=he<<3,te&=(1<<ae)-1,C.next_in=T,C.next_out=O,C.avail_in=T<L?5+(L-T):5-(T-L),C.avail_out=O<Z?257+(Z-O):257-(O-Z),E.hold=te,E.bits=ae}},{}],34:[function(_,P,D){"use strict";function I(Ne){return(255&Ne>>>24)+(65280&Ne>>>8)+((65280&Ne)<<8)+((255&Ne)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new G.Buf16(320),this.work=new G.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(Ne){var Ye;return Ne&&Ne.state?(Ye=Ne.state,Ne.total_in=Ne.total_out=Ye.total=0,Ne.msg="",Ye.wrap&&(Ne.adler=1&Ye.wrap),Ye.mode=de,Ye.last=0,Ye.havedict=0,Ye.dmax=32768,Ye.head=null,Ye.hold=0,Ye.bits=0,Ye.lencode=Ye.lendyn=new G.Buf32(852),Ye.distcode=Ye.distdyn=new G.Buf32(592),Ye.sane=1,Ye.back=-1,ie):ne}function R(Ne){var Ye;return Ne&&Ne.state?(Ye=Ne.state,Ye.wsize=0,Ye.whave=0,Ye.wnext=0,C(Ne)):ne}function E(Ne,Ye){var Ge,Xe;return Ne&&Ne.state?(Xe=Ne.state,0>Ye?(Ge=0,Ye=-Ye):(Ge=(Ye>>4)+1,48>Ye&&(Ye&=15)),Ye&&(8>Ye||15<Ye))?ne:(null!==Xe.window&&Xe.wbits!==Ye&&(Xe.window=null),Xe.wrap=Ge,Xe.wbits=Ye,R(Ne)):ne}function T(Ne,Ye){var Ge,Xe;return Ne?(Xe=new S,Ne.state=Xe,Xe.window=null,Ge=E(Ne,Ye),Ge!==ie&&(Ne.state=null),Ge):ne}function L(Ne){if(Ve){var Ye;for(Fe=new G.Buf32(512),Ue=new G.Buf32(32),Ye=0;144>Ye;)Ne.lens[Ye++]=8;for(;256>Ye;)Ne.lens[Ye++]=9;for(;280>Ye;)Ne.lens[Ye++]=7;for(;288>Ye;)Ne.lens[Ye++]=8;for(J($,Ne.lens,0,288,Fe,0,Ne.work,{bits:9}),Ye=0;32>Ye;)Ne.lens[Ye++]=5;J(ee,Ne.lens,0,32,Ue,0,Ne.work,{bits:5}),Ve=!1}Ne.lencode=Fe,Ne.lenbits=9,Ne.distcode=Ue,Ne.distbits=5}function O(Ne,Ye,Ge,Xe){var Ze=Ne.state,He;return null===Ze.window&&(Ze.wsize=1<<Ze.wbits,Ze.wnext=0,Ze.whave=0,Ze.window=new G.Buf8(Ze.wsize)),Xe>=Ze.wsize?(G.arraySet(Ze.window,Ye,Ge-Ze.wsize,Ze.wsize,0),Ze.wnext=0,Ze.whave=Ze.wsize):(He=Ze.wsize-Ze.wnext,He>Xe&&(He=Xe),G.arraySet(Ze.window,Ye,Ge-Xe,He,Ze.wnext),Xe-=He,Xe?(G.arraySet(Ze.window,Ye,Ge-Xe,Xe,0),Ze.wnext=Xe,Ze.whave=Ze.wsize):(Ze.wnext+=He,Ze.wnext===Ze.wsize&&(Ze.wnext=0),Ze.whave<Ze.wsize&&(Ze.whave+=He))),0}var G=_("../utils/common"),Z=_("./adler32"),W=_("./crc32"),Q=_("./inffast"),J=_("./inftrees"),$=1,ee=2,te=4,ae=6,ie=0,ne=-2,le=-3,oe=-4,se=8,de=1,he=2,ue=3,me=4,ge=5,ce=6,pe=7,fe=8,_e=9,be=10,xe=11,ye=12,ke=13,we=14,ve=15,Me=16,je=17,Pe=18,De=19,Ie=20,Se=21,Ae=22,Ce=23,Re=24,Be=25,ze=26,Ee=27,Te=28,Le=29,qe=30,Oe=31,Ve=!0,Fe,Ue;D.inflateReset=R,D.inflateReset2=E,D.inflateResetKeep=C,D.inflateInit=function(Ye){return T(Ye,15)},D.inflateInit2=T,D.inflate=function(Ye,Ge){var st=0,bt=new G.Buf8(4),kt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Xe,He,Ze,We,Ke,Qe,Je,$e,et,at,nt,lt,rt,ot,dt,ht,ut,mt,gt,ct,pt,_t,xt,yt;if(!Ye||!Ye.state||!Ye.output||!Ye.input&&0!==Ye.avail_in)return ne;Xe=Ye.state,Xe.mode===ye&&(Xe.mode=ke),Ke=Ye.next_out,Ze=Ye.output,Je=Ye.avail_out,We=Ye.next_in,He=Ye.input,Qe=Ye.avail_in,$e=Xe.hold,et=Xe.bits,at=Qe,nt=Je,_t=ie;inf_leave:for(;;)switch(Xe.mode){case de:if(0===Xe.wrap){Xe.mode=ke;break}for(;16>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}if(2&Xe.wrap&&35615===$e){Xe.check=0,bt[0]=255&$e,bt[1]=255&$e>>>8,Xe.check=W(Xe.check,bt,2,0),$e=0,et=0,Xe.mode=he;break}if(Xe.flags=0,Xe.head&&(Xe.head.done=!1),!(1&Xe.wrap)||(((255&$e)<<8)+($e>>8))%31){Ye.msg="incorrect header check",Xe.mode=qe;break}if((15&$e)!=se){Ye.msg="unknown compression method",Xe.mode=qe;break}if($e>>>=4,et-=4,pt=(15&$e)+8,0===Xe.wbits)Xe.wbits=pt;else if(pt>Xe.wbits){Ye.msg="invalid window size",Xe.mode=qe;break}Xe.dmax=1<<pt,Ye.adler=Xe.check=1,Xe.mode=512&$e?be:ye,$e=0,et=0;break;case he:for(;16>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}if(Xe.flags=$e,(255&Xe.flags)!=se){Ye.msg="unknown compression method",Xe.mode=qe;break}if(57344&Xe.flags){Ye.msg="unknown header flags set",Xe.mode=qe;break}Xe.head&&(Xe.head.text=1&$e>>8),512&Xe.flags&&(bt[0]=255&$e,bt[1]=255&$e>>>8,Xe.check=W(Xe.check,bt,2,0)),$e=0,et=0,Xe.mode=ue;case ue:for(;32>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}Xe.head&&(Xe.head.time=$e),512&Xe.flags&&(bt[0]=255&$e,bt[1]=255&$e>>>8,bt[2]=255&$e>>>16,bt[3]=255&$e>>>24,Xe.check=W(Xe.check,bt,4,0)),$e=0,et=0,Xe.mode=me;case me:for(;16>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}Xe.head&&(Xe.head.xflags=255&$e,Xe.head.os=$e>>8),512&Xe.flags&&(bt[0]=255&$e,bt[1]=255&$e>>>8,Xe.check=W(Xe.check,bt,2,0)),$e=0,et=0,Xe.mode=ge;case ge:if(1024&Xe.flags){for(;16>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}Xe.length=$e,Xe.head&&(Xe.head.extra_len=$e),512&Xe.flags&&(bt[0]=255&$e,bt[1]=255&$e>>>8,Xe.check=W(Xe.check,bt,2,0)),$e=0,et=0}else Xe.head&&(Xe.head.extra=null);Xe.mode=ce;case ce:if(1024&Xe.flags&&(lt=Xe.length,lt>Qe&&(lt=Qe),lt&&(Xe.head&&(pt=Xe.head.extra_len-Xe.length,!Xe.head.extra&&(Xe.head.extra=Array(Xe.head.extra_len)),G.arraySet(Xe.head.extra,He,We,lt,pt)),512&Xe.flags&&(Xe.check=W(Xe.check,He,lt,We)),Qe-=lt,We+=lt,Xe.length-=lt),Xe.length))break inf_leave;Xe.length=0,Xe.mode=pe;case pe:if(2048&Xe.flags){if(0===Qe)break inf_leave;lt=0;do pt=He[We+lt++],Xe.head&&pt&&65536>Xe.length&&(Xe.head.name+=String.fromCharCode(pt));while(pt&&lt<Qe);if(512&Xe.flags&&(Xe.check=W(Xe.check,He,lt,We)),Qe-=lt,We+=lt,pt)break inf_leave}else Xe.head&&(Xe.head.name=null);Xe.length=0,Xe.mode=fe;case fe:if(4096&Xe.flags){if(0===Qe)break inf_leave;lt=0;do pt=He[We+lt++],Xe.head&&pt&&65536>Xe.length&&(Xe.head.comment+=String.fromCharCode(pt));while(pt&&lt<Qe);if(512&Xe.flags&&(Xe.check=W(Xe.check,He,lt,We)),Qe-=lt,We+=lt,pt)break inf_leave}else Xe.head&&(Xe.head.comment=null);Xe.mode=_e;case _e:if(512&Xe.flags){for(;16>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}if($e!==(65535&Xe.check)){Ye.msg="header crc mismatch",Xe.mode=qe;break}$e=0,et=0}Xe.head&&(Xe.head.hcrc=1&Xe.flags>>9,Xe.head.done=!0),Ye.adler=Xe.check=0,Xe.mode=ye;break;case be:for(;32>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}Ye.adler=Xe.check=I($e),$e=0,et=0,Xe.mode=xe;case xe:if(0===Xe.havedict)return Ye.next_out=Ke,Ye.avail_out=Je,Ye.next_in=We,Ye.avail_in=Qe,Xe.hold=$e,Xe.bits=et,2;Ye.adler=Xe.check=1,Xe.mode=ye;case ye:if(5===Ge||Ge===ae)break inf_leave;case ke:if(Xe.last){$e>>>=7&et,et-=7&et,Xe.mode=Ee;break}for(;3>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}switch(Xe.last=1&$e,$e>>>=1,et-=1,3&$e){case 0:Xe.mode=we;break;case 1:if(L(Xe),Xe.mode=Ie,Ge===ae){$e>>>=2,et-=2;break inf_leave}break;case 2:Xe.mode=je;break;case 3:Ye.msg="invalid block type",Xe.mode=qe;}$e>>>=2,et-=2;break;case we:for($e>>>=7&et,et-=7&et;32>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}if((65535&$e)!=(65535^$e>>>16)){Ye.msg="invalid stored block lengths",Xe.mode=qe;break}if(Xe.length=65535&$e,$e=0,et=0,Xe.mode=ve,Ge===ae)break inf_leave;case ve:Xe.mode=Me;case Me:if(lt=Xe.length,lt){if(lt>Qe&&(lt=Qe),lt>Je&&(lt=Je),0===lt)break inf_leave;G.arraySet(Ze,He,We,lt,Ke),Qe-=lt,We+=lt,Je-=lt,Ke+=lt,Xe.length-=lt;break}Xe.mode=ye;break;case je:for(;14>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}if(Xe.nlen=(31&$e)+257,$e>>>=5,et-=5,Xe.ndist=(31&$e)+1,$e>>>=5,et-=5,Xe.ncode=(15&$e)+4,$e>>>=4,et-=4,286<Xe.nlen||30<Xe.ndist){Ye.msg="too many length or distance symbols",Xe.mode=qe;break}Xe.have=0,Xe.mode=Pe;case Pe:for(;Xe.have<Xe.ncode;){for(;3>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}Xe.lens[kt[Xe.have++]]=7&$e,$e>>>=3,et-=3}for(;19>Xe.have;)Xe.lens[kt[Xe.have++]]=0;if(Xe.lencode=Xe.lendyn,Xe.lenbits=7,xt={bits:Xe.lenbits},_t=J(0,Xe.lens,0,19,Xe.lencode,0,Xe.work,xt),Xe.lenbits=xt.bits,_t){Ye.msg="invalid code lengths set",Xe.mode=qe;break}Xe.have=0,Xe.mode=De;case De:for(;Xe.have<Xe.nlen+Xe.ndist;){for(;;){if(st=Xe.lencode[$e&(1<<Xe.lenbits)-1],dt=st>>>24,ht=255&st>>>16,ut=65535&st,dt<=et)break;if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}if(16>ut)$e>>>=dt,et-=dt,Xe.lens[Xe.have++]=ut;else{if(16===ut){for(yt=dt+2;et<yt;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}if($e>>>=dt,et-=dt,0===Xe.have){Ye.msg="invalid bit length repeat",Xe.mode=qe;break}pt=Xe.lens[Xe.have-1],lt=3+(3&$e),$e>>>=2,et-=2}else if(17===ut){for(yt=dt+3;et<yt;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}$e>>>=dt,et-=dt,pt=0,lt=3+(7&$e),$e>>>=3,et-=3}else{for(yt=dt+7;et<yt;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}$e>>>=dt,et-=dt,pt=0,lt=11+(127&$e),$e>>>=7,et-=7}if(Xe.have+lt>Xe.nlen+Xe.ndist){Ye.msg="invalid bit length repeat",Xe.mode=qe;break}for(;lt--;)Xe.lens[Xe.have++]=pt}}if(Xe.mode===qe)break;if(0===Xe.lens[256]){Ye.msg="invalid code -- missing end-of-block",Xe.mode=qe;break}if(Xe.lenbits=9,xt={bits:Xe.lenbits},_t=J($,Xe.lens,0,Xe.nlen,Xe.lencode,0,Xe.work,xt),Xe.lenbits=xt.bits,_t){Ye.msg="invalid literal/lengths set",Xe.mode=qe;break}if(Xe.distbits=6,Xe.distcode=Xe.distdyn,xt={bits:Xe.distbits},_t=J(ee,Xe.lens,Xe.nlen,Xe.ndist,Xe.distcode,0,Xe.work,xt),Xe.distbits=xt.bits,_t){Ye.msg="invalid distances set",Xe.mode=qe;break}if(Xe.mode=Ie,Ge===ae)break inf_leave;case Ie:Xe.mode=Se;case Se:if(6<=Qe&&258<=Je){Ye.next_out=Ke,Ye.avail_out=Je,Ye.next_in=We,Ye.avail_in=Qe,Xe.hold=$e,Xe.bits=et,Q(Ye,nt),Ke=Ye.next_out,Ze=Ye.output,Je=Ye.avail_out,We=Ye.next_in,He=Ye.input,Qe=Ye.avail_in,$e=Xe.hold,et=Xe.bits,Xe.mode===ye&&(Xe.back=-1);break}for(Xe.back=0;;){if(st=Xe.lencode[$e&(1<<Xe.lenbits)-1],dt=st>>>24,ht=255&st>>>16,ut=65535&st,dt<=et)break;if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}if(ht&&0==(240&ht)){for(mt=dt,gt=ht,ct=ut;;){if(st=Xe.lencode[ct+(($e&(1<<mt+gt)-1)>>mt)],dt=st>>>24,ht=255&st>>>16,ut=65535&st,mt+dt<=et)break;if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}$e>>>=mt,et-=mt,Xe.back+=mt}if($e>>>=dt,et-=dt,Xe.back+=dt,Xe.length=ut,0===ht){Xe.mode=ze;break}if(32&ht){Xe.back=-1,Xe.mode=ye;break}if(64&ht){Ye.msg="invalid literal/length code",Xe.mode=qe;break}Xe.extra=15&ht,Xe.mode=Ae;case Ae:if(Xe.extra){for(yt=Xe.extra;et<yt;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}Xe.length+=$e&(1<<Xe.extra)-1,$e>>>=Xe.extra,et-=Xe.extra,Xe.back+=Xe.extra}Xe.was=Xe.length,Xe.mode=Ce;case Ce:for(;;){if(st=Xe.distcode[$e&(1<<Xe.distbits)-1],dt=st>>>24,ht=255&st>>>16,ut=65535&st,dt<=et)break;if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}if(0==(240&ht)){for(mt=dt,gt=ht,ct=ut;;){if(st=Xe.distcode[ct+(($e&(1<<mt+gt)-1)>>mt)],dt=st>>>24,ht=255&st>>>16,ut=65535&st,mt+dt<=et)break;if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}$e>>>=mt,et-=mt,Xe.back+=mt}if($e>>>=dt,et-=dt,Xe.back+=dt,64&ht){Ye.msg="invalid distance code",Xe.mode=qe;break}Xe.offset=ut,Xe.extra=15&ht,Xe.mode=Re;case Re:if(Xe.extra){for(yt=Xe.extra;et<yt;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}Xe.offset+=$e&(1<<Xe.extra)-1,$e>>>=Xe.extra,et-=Xe.extra,Xe.back+=Xe.extra}if(Xe.offset>Xe.dmax){Ye.msg="invalid distance too far back",Xe.mode=qe;break}Xe.mode=Be;case Be:if(0===Je)break inf_leave;if(lt=nt-Je,Xe.offset>lt){if(lt=Xe.offset-lt,lt>Xe.whave&&Xe.sane){Ye.msg="invalid distance too far back",Xe.mode=qe;break}lt>Xe.wnext?(lt-=Xe.wnext,rt=Xe.wsize-lt):rt=Xe.wnext-lt,lt>Xe.length&&(lt=Xe.length),ot=Xe.window}else ot=Ze,rt=Ke-Xe.offset,lt=Xe.length;lt>Je&&(lt=Je),Je-=lt,Xe.length-=lt;do Ze[Ke++]=ot[rt++];while(--lt);0===Xe.length&&(Xe.mode=Se);break;case ze:if(0===Je)break inf_leave;Ze[Ke++]=Xe.length,Je--,Xe.mode=Se;break;case Ee:if(Xe.wrap){for(;32>et;){if(0===Qe)break inf_leave;Qe--,$e|=He[We++]<<et,et+=8}if(nt-=Je,Ye.total_out+=nt,Xe.total+=nt,nt&&(Ye.adler=Xe.check=Xe.flags?W(Xe.check,Ze,nt,Ke-nt):Z(Xe.check,Ze,nt,Ke-nt)),nt=Je,(Xe.flags?$e:I($e))!==Xe.check){Ye.msg="incorrect data check",Xe.mode=qe;break}$e=0,et=0}Xe.mode=Te;case Te:if(Xe.wrap&&Xe.flags){for(;32>et;){if(0===Qe)break inf_leave;Qe--,$e+=He[We++]<<et,et+=8}if($e!==(4294967295&Xe.total)){Ye.msg="incorrect length check",Xe.mode=qe;break}$e=0,et=0}Xe.mode=Le;case Le:_t=1;break inf_leave;case qe:_t=le;break inf_leave;case Oe:return oe;case 32:default:return ne;}return(Ye.next_out=Ke,Ye.avail_out=Je,Ye.next_in=We,Ye.avail_in=Qe,Xe.hold=$e,Xe.bits=et,(Xe.wsize||nt!==Ye.avail_out&&Xe.mode<qe&&(Xe.mode<Ee||Ge!==te))&&O(Ye,Ye.output,Ye.next_out,nt-Ye.avail_out))?(Xe.mode=Oe,oe):(at-=Ye.avail_in,nt-=Ye.avail_out,Ye.total_in+=at,Ye.total_out+=nt,Xe.total+=nt,Xe.wrap&&nt&&(Ye.adler=Xe.check=Xe.flags?W(Xe.check,Ze,nt,Ye.next_out-nt):Z(Xe.check,Ze,nt,Ye.next_out-nt)),Ye.data_type=Xe.bits+(Xe.last?64:0)+(Xe.mode===ye?128:0)+(Xe.mode===Ie||Xe.mode===ve?256:0),(0===at&&0===nt||Ge===te)&&_t===ie&&(_t=-5),_t)},D.inflateEnd=function(Ye){if(!Ye||!Ye.state)return ne;var Ge=Ye.state;return Ge.window&&(Ge.window=null),Ye.state=null,ie},D.inflateGetHeader=function(Ye,Ge){var Xe;return Ye&&Ye.state?(Xe=Ye.state,0==(2&Xe.wrap))?ne:(Xe.head=Ge,Ge.done=!1,ie):ne},D.inflateSetDictionary=function(Ye,Ge){var Xe=Ge.length,He,Ze,We;return Ye&&Ye.state?(He=Ye.state,0!==He.wrap&&He.mode!==xe)?ne:He.mode===xe&&(Ze=1,Ze=Z(Ze,Ge,Xe,0),Ze!==He.check)?le:(We=O(Ye,Ge,Xe,Xe),We)?(He.mode=Oe,oe):(He.havedict=1,ie):ne},D.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":26,"./adler32":28,"./crc32":30,"./inffast":33,"./inftrees":35}],35:[function(_,P,D){"use strict";var I=_("../utils/common"),S=15,C=852,R=592,E=0,T=1,L=2,O=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],G=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],W=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];P.exports=function(J,$,ee,te,ae,ie,ne,le){var oe=le.bits,se=0,de=0,he=0,ue=0,me=0,ge=0,ce=0,pe=0,fe=0,_e=0,ve=null,Me=0,Pe=new I.Buf16(S+1),De=new I.Buf16(S+1),Ie=null,Se=0,be,xe,ye,ke,we,je,Ae,Ce,Re;for(se=0;se<=S;se++)Pe[se]=0;for(de=0;de<te;de++)Pe[$[ee+de]]++;for(me=oe,ue=S;1<=ue&&0===Pe[ue];ue--);if(me>ue&&(me=ue),0==ue)return ae[ie++]=20971520,ae[ie++]=20971520,le.bits=1,0;for(he=1;he<ue&&0===Pe[he];he++);for(me<he&&(me=he),pe=1,se=1;se<=S;se++)if(pe<<=1,pe-=Pe[se],0>pe)return-1;if(0<pe&&(J===E||1!=ue))return-1;for(De[1]=0,se=1;se<S;se++)De[se+1]=De[se]+Pe[se];for(de=0;de<te;de++)0!==$[ee+de]&&(ne[De[$[ee+de]]++]=de);if(J===E?(ve=Ie=ne,je=19):J===T?(ve=O,Me-=257,Ie=G,Se-=257,je=256):(ve=Z,Ie=W,je=-1),_e=0,de=0,se=he,we=ie,ge=me,ce=0,ye=-1,fe=1<<me,ke=fe-1,J===T&&fe>C||J===L&&fe>R)return 1;for(var Be=0;;){Be++,Ae=se-ce,ne[de]<je?(Ce=0,Re=ne[de]):ne[de]>je?(Ce=Ie[Se+ne[de]],Re=ve[Me+ne[de]]):(Ce=96,Re=0),be=1<<se-ce,xe=1<<ge,he=xe;do xe-=be,ae[we+(_e>>ce)+xe]=0|(Ae<<24|Ce<<16|Re);while(0!==xe);for(be=1<<se-1;_e&be;)be>>=1;if(0===be?_e=0:(_e&=be-1,_e+=be),de++,0==--Pe[se]){if(se==ue)break;se=$[ee+ne[de]]}if(se>me&&(_e&ke)!==ye){for(0==ce&&(ce=me),we+=he,ge=se-ce,pe=1<<ge;ge+ce<ue&&(pe-=Pe[ge+ce],!(0>=pe));)ge++,pe<<=1;if(fe+=1<<ge,J===T&&fe>C||J===L&&fe>R)return 1;ye=_e&ke,ae[ye]=0|(me<<24|ge<<16|we-ie)}}return 0!=_e&&(ae[we+_e]=0|(4194304|se-ce<<24)),le.bits=me,0}},{"../utils/common":26}],36:[function(_,P,D){"use strict";P.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],37:[function(_,P,D){"use strict";function I(Ue){for(var Ne=Ue.length;0<=--Ne;)Ue[Ne]=0}function S(Ue,Ne,Ye,Ge,Xe){this.static_tree=Ue,this.extra_bits=Ne,this.extra_base=Ye,this.elems=Ge,this.max_length=Xe,this.has_stree=Ue&&Ue.length}function C(Ue,Ne){this.dyn_tree=Ue,this.max_code=0,this.stat_desc=Ne}function R(Ue){return 256>Ue?ze[Ue]:ze[256+(Ue>>>7)]}function E(Ue,Ne){Ue.pending_buf[Ue.pending++]=255&Ne,Ue.pending_buf[Ue.pending++]=255&Ne>>>8}function T(Ue,Ne,Ye){Ue.bi_valid>ve-Ye?(Ue.bi_buf|=65535&Ne<<Ue.bi_valid,E(Ue,Ue.bi_buf),Ue.bi_buf=Ne>>ve-Ue.bi_valid,Ue.bi_valid+=Ye-ve):(Ue.bi_buf|=65535&Ne<<Ue.bi_valid,Ue.bi_valid+=Ye)}function L(Ue,Ne,Ye){T(Ue,Ye[2*Ne],Ye[2*Ne+1])}function O(Ue,Ne){var Ye=0;do Ye|=1&Ue,Ue>>>=1,Ye<<=1;while(0<--Ne);return Ye>>>1}function G(Ue){16===Ue.bi_valid?(E(Ue,Ue.bi_buf),Ue.bi_buf=0,Ue.bi_valid=0):8<=Ue.bi_valid&&(Ue.pending_buf[Ue.pending++]=255&Ue.bi_buf,Ue.bi_buf>>=8,Ue.bi_valid-=8)}function Z(Ue,Ne){var Ye=Ne.dyn_tree,Ge=Ne.max_code,Xe=Ne.stat_desc.static_tree,He=Ne.stat_desc.has_stree,Ze=Ne.stat_desc.extra_bits,We=Ne.stat_desc.extra_base,Ke=Ne.stat_desc.max_length,Qe,Je,$e,et,at,nt,lt=0;for(et=0;et<=we;et++)Ue.bl_count[et]=0;for(Ye[2*Ue.heap[Ue.heap_max]+1]=0,Qe=Ue.heap_max+1;Qe<ke;Qe++)(Je=Ue.heap[Qe],et=Ye[2*Ye[2*Je+1]+1]+1,et>Ke&&(et=Ke,lt++),Ye[2*Je+1]=et,!(Je>Ge))&&(Ue.bl_count[et]++,at=0,Je>=We&&(at=Ze[Je-We]),nt=Ye[2*Je],Ue.opt_len+=nt*(et+at),He&&(Ue.static_len+=nt*(Xe[2*Je+1]+at)));if(0!=lt){do{for(et=Ke-1;0===Ue.bl_count[et];)et--;Ue.bl_count[et]--,Ue.bl_count[et+1]+=2,Ue.bl_count[Ke]--,lt-=2}while(0<lt);for(et=Ke;0!==et;et--)for(Je=Ue.bl_count[et];0!==Je;)($e=Ue.heap[--Qe],!($e>Ge))&&(Ye[2*$e+1]!==et&&(Ue.opt_len+=(et-Ye[2*$e+1])*Ye[2*$e],Ye[2*$e+1]=et),Je--)}}function W(Ue,Ne,Ye){var Ge=Array(we+1),Xe=0,He,Ze;for(He=1;He<=we;He++)Ge[He]=Xe=Xe+Ye[He-1]<<1;for(Ze=0;Ze<=Ne;Ze++){var We=Ue[2*Ze+1];0!==We&&(Ue[2*Ze]=O(Ge[We]++,We))}}function Q(){var Ue,Ne,Ye,Ge,Xe,He=Array(we+1);for(Ye=0,Ge=0;Ge<fe-1;Ge++)for(Te[Ge]=Ye,Ue=0;Ue<1<<Ie[Ge];Ue++)Ee[Ye++]=Ge;for(Ee[Ye-1]=Ge,Xe=0,Ge=0;16>Ge;Ge++)for(Le[Ge]=Xe,Ue=0;Ue<1<<Se[Ge];Ue++)ze[Xe++]=Ge;for(Xe>>=7;Ge<xe;Ge++)for(Le[Ge]=Xe<<7,Ue=0;Ue<1<<Se[Ge]-7;Ue++)ze[256+Xe++]=Ge;for(Ne=0;Ne<=we;Ne++)He[Ne]=0;for(Ue=0;143>=Ue;)Re[2*Ue+1]=8,Ue++,He[8]++;for(;255>=Ue;)Re[2*Ue+1]=9,Ue++,He[9]++;for(;279>=Ue;)Re[2*Ue+1]=7,Ue++,He[7]++;for(;287>=Ue;)Re[2*Ue+1]=8,Ue++,He[8]++;for(W(Re,be+1,He),Ue=0;Ue<xe;Ue++)Be[2*Ue+1]=5,Be[2*Ue]=O(Ue,5);qe=new S(Re,Ie,_e+1,be,we),Oe=new S(Be,Se,0,xe,we),Ve=new S([],Ae,0,ye,7)}function J(Ue){var Ne;for(Ne=0;Ne<be;Ne++)Ue.dyn_ltree[2*Ne]=0;for(Ne=0;Ne<xe;Ne++)Ue.dyn_dtree[2*Ne]=0;for(Ne=0;Ne<ye;Ne++)Ue.bl_tree[2*Ne]=0;Ue.dyn_ltree[2*Me]=1,Ue.opt_len=Ue.static_len=0,Ue.last_lit=Ue.matches=0}function $(Ue){8<Ue.bi_valid?E(Ue,Ue.bi_buf):0<Ue.bi_valid&&(Ue.pending_buf[Ue.pending++]=Ue.bi_buf),Ue.bi_buf=0,Ue.bi_valid=0}function ee(Ue,Ne,Ye,Ge){$(Ue),Ge&&(E(Ue,Ye),E(Ue,~Ye)),me.arraySet(Ue.pending_buf,Ue.window,Ne,Ye,Ue.pending),Ue.pending+=Ye}function te(Ue,Ne,Ye,Ge){var Xe=2*Ne,He=2*Ye;return Ue[Xe]<Ue[He]||Ue[Xe]===Ue[He]&&Ge[Ne]<=Ge[Ye]}function ae(Ue,Ne,Ye){for(var Ge=Ue.heap[Ye],Xe=Ye<<1;Xe<=Ue.heap_len&&(Xe<Ue.heap_len&&te(Ne,Ue.heap[Xe+1],Ue.heap[Xe],Ue.depth)&&Xe++,!te(Ne,Ge,Ue.heap[Xe],Ue.depth));)Ue.heap[Ye]=Ue.heap[Xe],Ye=Xe,Xe<<=1;Ue.heap[Ye]=Ge}function ie(Ue,Ne,Ye){var Ge,Xe,He=0,Ze,We;if(0!==Ue.last_lit)do Ge=Ue.pending_buf[Ue.d_buf+2*He]<<8|Ue.pending_buf[Ue.d_buf+2*He+1],Xe=Ue.pending_buf[Ue.l_buf+He],He++,0===Ge?L(Ue,Xe,Ne):(Ze=Ee[Xe],L(Ue,Ze+_e+1,Ne),We=Ie[Ze],0!==We&&(Xe-=Te[Ze],T(Ue,Xe,We)),Ge--,Ze=R(Ge),L(Ue,Ze,Ye),We=Se[Ze],0!==We&&(Ge-=Le[Ze],T(Ue,Ge,We)));while(He<Ue.last_lit);L(Ue,Me,Ne)}function ne(Ue,Ne){var Ye=Ne.dyn_tree,Ge=Ne.stat_desc.static_tree,Xe=Ne.stat_desc.has_stree,He=Ne.stat_desc.elems,Ze,We,Ke=-1,Qe;for(Ue.heap_len=0,Ue.heap_max=ke,Ze=0;Ze<He;Ze++)0===Ye[2*Ze]?Ye[2*Ze+1]=0:(Ue.heap[++Ue.heap_len]=Ke=Ze,Ue.depth[Ze]=0);for(;2>Ue.heap_len;)Qe=Ue.heap[++Ue.heap_len]=2>Ke?++Ke:0,Ye[2*Qe]=1,Ue.depth[Qe]=0,Ue.opt_len--,Xe&&(Ue.static_len-=Ge[2*Qe+1]);for(Ne.max_code=Ke,Ze=Ue.heap_len>>1;1<=Ze;Ze--)ae(Ue,Ye,Ze);Qe=He;do Ze=Ue.heap[1],Ue.heap[1]=Ue.heap[Ue.heap_len--],ae(Ue,Ye,1),We=Ue.heap[1],Ue.heap[--Ue.heap_max]=Ze,Ue.heap[--Ue.heap_max]=We,Ye[2*Qe]=Ye[2*Ze]+Ye[2*We],Ue.depth[Qe]=(Ue.depth[Ze]>=Ue.depth[We]?Ue.depth[Ze]:Ue.depth[We])+1,Ye[2*Ze+1]=Ye[2*We+1]=Qe,Ue.heap[1]=Qe++,ae(Ue,Ye,1);while(2<=Ue.heap_len);Ue.heap[--Ue.heap_max]=Ue.heap[1],Z(Ue,Ne),W(Ye,Ke,Ue.bl_count)}function le(Ue,Ne,Ye){var Ge,Xe=-1,He,Ze=Ne[1],We=0,Ke=7,Qe=4;for(0===Ze&&(Ke=138,Qe=3),Ne[2*(Ye+1)+1]=65535,Ge=0;Ge<=Ye;Ge++){if(He=Ze,Ze=Ne[2*(Ge+1)+1],++We<Ke&&He===Ze)continue;else We<Qe?Ue.bl_tree[2*He]+=We:0===He?10>=We?Ue.bl_tree[2*Pe]++:Ue.bl_tree[2*De]++:(He!==Xe&&Ue.bl_tree[2*He]++,Ue.bl_tree[2*je]++);We=0,Xe=He,0===Ze?(Ke=138,Qe=3):He===Ze?(Ke=6,Qe=3):(Ke=7,Qe=4)}}function oe(Ue,Ne,Ye){var Ge,Xe=-1,He,Ze=Ne[1],We=0,Ke=7,Qe=4;for(0===Ze&&(Ke=138,Qe=3),Ge=0;Ge<=Ye;Ge++){if(He=Ze,Ze=Ne[2*(Ge+1)+1],++We<Ke&&He===Ze)continue;else if(We<Qe)do L(Ue,He,Ue.bl_tree);while(0!=--We);else 0===He?10>=We?(L(Ue,Pe,Ue.bl_tree),T(Ue,We-3,3)):(L(Ue,De,Ue.bl_tree),T(Ue,We-11,7)):(He!==Xe&&(L(Ue,He,Ue.bl_tree),We--),L(Ue,je,Ue.bl_tree),T(Ue,We-3,2));We=0,Xe=He,0===Ze?(Ke=138,Qe=3):He===Ze?(Ke=6,Qe=3):(Ke=7,Qe=4)}}function se(Ue){var Ne;for(le(Ue,Ue.dyn_ltree,Ue.l_desc.max_code),le(Ue,Ue.dyn_dtree,Ue.d_desc.max_code),ne(Ue,Ue.bl_desc),Ne=ye-1;3<=Ne&&0===Ue.bl_tree[2*Ce[Ne]+1];Ne--);return Ue.opt_len+=3*(Ne+1)+5+5+4,Ne}function de(Ue,Ne,Ye,Ge){var Xe;for(T(Ue,Ne-257,5),T(Ue,Ye-1,5),T(Ue,Ge-4,4),Xe=0;Xe<Ge;Xe++)T(Ue,Ue.bl_tree[2*Ce[Xe]+1],3);oe(Ue,Ue.dyn_ltree,Ne-1),oe(Ue,Ue.dyn_dtree,Ye-1)}function he(Ue){var Ne=4093624447,Ye;for(Ye=0;31>=Ye;Ye++,Ne>>>=1)if(1&Ne&&0!==Ue.dyn_ltree[2*Ye])return ge;if(0!==Ue.dyn_ltree[18]||0!==Ue.dyn_ltree[20]||0!==Ue.dyn_ltree[26])return ce;for(Ye=32;Ye<_e;Ye++)if(0!==Ue.dyn_ltree[2*Ye])return ce;return ge}function ue(Ue,Ne,Ye,Ge){T(Ue,0+(Ge?1:0),3),ee(Ue,Ne,Ye,!0)}var me=_("../utils/common"),ge=0,ce=1,pe=1,fe=29,_e=256,be=_e+1+fe,xe=30,ye=19,ke=2*be+1,we=15,ve=16,Me=256,je=16,Pe=17,De=18,Ie=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Se=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Re=Array(2*(be+2));I(Re);var Be=Array(2*xe);I(Be);var ze=Array(512);I(ze);var Ee=Array(256);I(Ee);var Te=Array(fe);I(Te);var Le=Array(xe);I(Le);var qe,Oe,Ve,Fe=!1;D._tr_init=function(Ne){Fe||(Q(),Fe=!0),Ne.l_desc=new C(Ne.dyn_ltree,qe),Ne.d_desc=new C(Ne.dyn_dtree,Oe),Ne.bl_desc=new C(Ne.bl_tree,Ve),Ne.bi_buf=0,Ne.bi_valid=0,J(Ne)},D._tr_stored_block=ue,D._tr_flush_block=function(Ne,Ye,Ge,Xe){var He,Ze,We=0;0<Ne.level?(2===Ne.strm.data_type&&(Ne.strm.data_type=he(Ne)),ne(Ne,Ne.l_desc),ne(Ne,Ne.d_desc),We=se(Ne),He=Ne.opt_len+3+7>>>3,Ze=Ne.static_len+3+7>>>3,Ze<=He&&(He=Ze)):He=Ze=Ge+5,Ge+4<=He&&-1!==Ye?ue(Ne,Ye,Ge,Xe):4===Ne.strategy||Ze===He?(T(Ne,(pe<<1)+(Xe?1:0),3),ie(Ne,Re,Be)):(T(Ne,4+(Xe?1:0),3),de(Ne,Ne.l_desc.max_code+1,Ne.d_desc.max_code+1,We+1),ie(Ne,Ne.dyn_ltree,Ne.dyn_dtree)),J(Ne),Xe&&$(Ne)},D._tr_tally=function(Ne,Ye,Ge){return Ne.pending_buf[Ne.d_buf+2*Ne.last_lit]=255&Ye>>>8,Ne.pending_buf[Ne.d_buf+2*Ne.last_lit+1]=255&Ye,Ne.pending_buf[Ne.l_buf+Ne.last_lit]=255&Ge,Ne.last_lit++,0===Ye?Ne.dyn_ltree[2*Ge]++:(Ne.matches++,Ye--,Ne.dyn_ltree[2*(Ee[Ge]+_e+1)]++,Ne.dyn_dtree[2*R(Ye)]++),Ne.last_lit===Ne.lit_bufsize-1},D._tr_align=function(Ne){T(Ne,pe<<1,3),L(Ne,Me,Re),G(Ne)}},{"../utils/common":26}],38:[function(_,P,D){"use strict";P.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],39:[function(_,P,D){"use strict";function I(W,Q,J){for(var $=0;$<J;$++)Q[$]=W[$]}function S(W,Q,J,$){for(var ee=0;ee<$;ee++)Q[ee]=W[ee];for(;ee<J;ee++)Q[ee]=255&W[ee]+Q[ee-$]}function C(W,Q,J,$){var ee=0;if(0===J.length)for(;ee<$;ee++)Q[ee]=W[ee];else for(;ee<$;ee++)Q[ee]=255&W[ee]+J[ee]}function R(W,Q,J,$,ee){var te=0;if(0===J.length){for(;te<ee;te++)Q[te]=W[te];for(;te<$;te++)Q[te]=255&W[te]+(Q[te-ee]>>1)}else{for(;te<ee;te++)Q[te]=255&W[te]+(J[te]>>1);for(;te<$;te++)Q[te]=255&W[te]+(Q[te-ee]+J[te]>>1)}}function E(W,Q,J,$,ee){var te=0;if(0===J.length){for(;te<ee;te++)Q[te]=W[te];for(;te<$;te++)Q[te]=255&W[te]+Q[te-ee]}else{for(;te<ee;te++)Q[te]=255&W[te]+J[te];for(;te<$;te++)Q[te]=255&W[te]+T(Q[te-ee],J[te],J[te-ee])}}function T(W,Q,J){var $=W+Q-J,ee=Math.abs($-W),te=Math.abs($-Q),ae=Math.abs($-J);if(ee<=te&&ee<=ae)return W;return te<=ae?Q:J}var L=_("iobuffer"),O=_("pako").Inflate,G=new Uint8Array(0),Z=[137,80,78,71,13,10,26,10];P.exports=class extends L{constructor(Q){super(Q),this._decoded=!1,this._inflator=new O,this._png=null,this._end=!1,this.setBigEndian()}decode(){if(this._decoded)return this._png;for(this._png={tEXt:{}},this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(var Q=0;8>Q;Q++)if(this.readUint8()!==Z[Q])throw new Error(`Wrong PNG signature. Byte at ${Q} should be ${Z[Q]}.`)}decodeChunk(){var Q=this.readUint32(),J=this.readChars(4),$=this.offset;switch(J){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(Q);break;case"IDAT":this.decodeIDAT(Q);break;case"tEXt":this.decodetEXt(Q);break;case"IEND":this._end=!0;break;default:this.skip(Q);}if(this.offset-$!==Q)throw new Error("Length mismatch while decoding chunk "+J);this.readUint32()}decodeIHDR(){var Q=this._png;if(Q.width=this.readUint32(),Q.height=this.readUint32(),Q.bitDepth=this.readUint8(),Q.colourType=this.readUint8(),Q.compressionMethod=this.readUint8(),Q.filterMethod=this.readUint8(),Q.interlaceMethod=this.readUint8(),0!==this._png.compressionMethod)throw new Error("Unsupported compression method: "+Q.compressionMethod)}decodePLTE(Q){if(0!=Q%3)throw new RangeError("PLTE field length must be a multiple of 3. Got "+Q);var J=Q/3;this._hasPalette=!0;var $=this._palette=Array(J);for(var ee=0;ee<J;ee++)$[ee]=[this.readUint8(),this.readUint8(),this.readUint8()]}decodeIDAT(Q){this._inflator.push(new Uint8Array(this.buffer,this.offset,Q)),this.skip(Q)}decodetEXt(Q){for(var J="",$;"\u0000"!==($=this.readChar());)J+=$;this._png.tEXt[J]=this.readChars(Q-J.length-1)}decodeImage(){if(this._inflator.push(G,!0),this._inflator.err)throw new Error("Error while decompressing the data");var Q=this._inflator.result;if(this._inflator=null,0!==this._png.filterMethod)throw new Error("Filter method "+this._png.filterMethod+" not supported");if(0===this._png.interlaceMethod)this.decodeInterlaceNull(Q);else throw new Error("Interlace method "+this._png.interlaceMethod+" not supported")}decodeInterlaceNull(Q){var J;switch(this._png.colourType){case 0:J=1;break;case 2:J=3;break;case 3:if(!this._hasPalette)throw new Error("Missing palette");J=1;break;case 4:J=2;break;case 6:J=4;break;default:throw new Error("Unknown colour type: "+this._png.colourType);}var $=this._png.height,ee=J*this._png.bitDepth/8,te=this._png.width*ee,ae=new Uint8Array(this._png.height*te),ie=G,ne=0,le,oe;for(var se=0;se<$;se++){switch(le=Q.subarray(ne+1,ne+1+te),oe=ae.subarray(se*te,(se+1)*te),Q[ne]){case 0:I(le,oe,te);break;case 1:S(le,oe,te,ee);break;case 2:C(le,oe,ie,te);break;case 3:R(le,oe,ie,te,ee);break;case 4:E(le,oe,ie,te,ee);break;default:throw new Error("Unsupported filter: "+Q[ne]);}ie=oe,ne+=te+1}this._hasPalette&&(this._png.palette=this._palette),this._png.data=ae}}},{iobuffer:44,pako:23}],40:[function(_,P,D){"use strict";D.PNGDecoder=_("./PNGDecoder")},{"./PNGDecoder":39}],41:[function(_,P,D){"use strict";P.exports=function(I){return I&&1<I.length?255===I[0]&&216===I[1]&&255===I[2]?{ext:"jpg",mime:"image/jpeg"}:137===I[0]&&80===I[1]&&78===I[2]&&71===I[3]?{ext:"png",mime:"image/png"}:71===I[0]&&73===I[1]&&70===I[2]?{ext:"gif",mime:"image/gif"}:87===I[8]&&69===I[9]&&66===I[10]&&80===I[11]?{ext:"webp",mime:"image/webp"}:(73===I[0]&&73===I[1]&&42===I[2]&&0===I[3]||77===I[0]&&77===I[1]&&0===I[2]&&42===I[3])&&67===I[8]&&82===I[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===I[0]&&73===I[1]&&42===I[2]&&0===I[3]||77===I[0]&&77===I[1]&&0===I[2]&&42===I[3]?{ext:"tif",mime:"image/tiff"}:66===I[0]&&77===I[1]?{ext:"bmp",mime:"image/bmp"}:73===I[0]&&73===I[1]&&188===I[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===I[0]&&66===I[1]&&80===I[2]&&83===I[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===I[0]&&75===I[1]&&3===I[2]&&4===I[3]&&109===I[30]&&105===I[31]&&109===I[32]&&101===I[33]&&116===I[34]&&121===I[35]&&112===I[36]&&101===I[37]&&97===I[38]&&112===I[39]&&112===I[40]&&108===I[41]&&105===I[42]&&99===I[43]&&97===I[44]&&116===I[45]&&105===I[46]&&111===I[47]&&110===I[48]&&47===I[49]&&101===I[50]&&112===I[51]&&117===I[52]&&98===I[53]&&43===I[54]&&122===I[55]&&105===I[56]&&112===I[57]?{ext:"epub",mime:"application/epub+zip"}:80===I[0]&&75===I[1]&&3===I[2]&&4===I[3]&&77===I[30]&&69===I[31]&&84===I[32]&&65===I[33]&&45===I[34]&&73===I[35]&&78===I[36]&&70===I[37]&&47===I[38]&&109===I[39]&&111===I[40]&&122===I[41]&&105===I[42]&&108===I[43]&&108===I[44]&&97===I[45]&&46===I[46]&&114===I[47]&&115===I[48]&&97===I[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80===I[0]&&75===I[1]&&(3===I[2]||5===I[2]||7===I[2])&&(4===I[3]||6===I[3]||8===I[3])?{ext:"zip",mime:"application/zip"}:117===I[257]&&115===I[258]&&116===I[259]&&97===I[260]&&114===I[261]?{ext:"tar",mime:"application/x-tar"}:82===I[0]&&97===I[1]&&114===I[2]&&33===I[3]&&26===I[4]&&7===I[5]&&(0===I[6]||1===I[6])?{ext:"rar",mime:"application/x-rar-compressed"}:31===I[0]&&139===I[1]&&8===I[2]?{ext:"gz",mime:"application/gzip"}:66===I[0]&&90===I[1]&&104===I[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===I[0]&&122===I[1]&&188===I[2]&&175===I[3]&&39===I[4]&&28===I[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===I[0]&&1===I[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===I[0]&&0===I[1]&&0===I[2]&&(24===I[3]||32===I[3])&&102===I[4]&&116===I[5]&&121===I[6]&&112===I[7]||51===I[0]&&103===I[1]&&112===I[2]&&53===I[3]||0===I[0]&&0===I[1]&&0===I[2]&&28===I[3]&&102===I[4]&&116===I[5]&&121===I[6]&&112===I[7]&&109===I[8]&&112===I[9]&&52===I[10]&&50===I[11]&&109===I[16]&&112===I[17]&&52===I[18]&&49===I[19]&&109===I[20]&&112===I[21]&&52===I[22]&&50===I[23]&&105===I[24]&&115===I[25]&&111===I[26]&&109===I[27]||0===I[0]&&0===I[1]&&0===I[2]&&28===I[3]&&102===I[4]&&116===I[5]&&121===I[6]&&112===I[7]&&105===I[8]&&115===I[9]&&111===I[10]&&109===I[11]||0===I[0]&&0===I[1]&&0===I[2]&&28===I[3]&&102===I[4]&&116===I[5]&&121===I[6]&&112===I[7]&&109===I[8]&&112===I[9]&&52===I[10]&&50===I[11]&&0===I[12]&&0===I[13]&&0===I[14]&&0===I[15]?{ext:"mp4",mime:"video/mp4"}:0===I[0]&&0===I[1]&&0===I[2]&&28===I[3]&&102===I[4]&&116===I[5]&&121===I[6]&&112===I[7]&&77===I[8]&&52===I[9]&&86===I[10]?{ext:"m4v",mime:"video/x-m4v"}:77===I[0]&&84===I[1]&&104===I[2]&&100===I[3]?{ext:"mid",mime:"audio/midi"}:109===I[31]&&97===I[32]&&116===I[33]&&114===I[34]&&111===I[35]&&115===I[36]&&107===I[37]&&97===I[38]?{ext:"mkv",mime:"video/x-matroska"}:26===I[0]&&69===I[1]&&223===I[2]&&163===I[3]?{ext:"webm",mime:"video/webm"}:0===I[0]&&0===I[1]&&0===I[2]&&20===I[3]&&102===I[4]&&116===I[5]&&121===I[6]&&112===I[7]?{ext:"mov",mime:"video/quicktime"}:82===I[0]&&73===I[1]&&70===I[2]&&70===I[3]&&65===I[8]&&86===I[9]&&73===I[10]?{ext:"avi",mime:"video/x-msvideo"}:48===I[0]&&38===I[1]&&178===I[2]&&117===I[3]&&142===I[4]&&102===I[5]&&207===I[6]&&17===I[7]&&166===I[8]&&217===I[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===I[0]&&0===I[1]&&1===I[2]&&"b"===I[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===I[0]&&68===I[1]&&51===I[2]||255===I[0]&&251===I[1]?{ext:"mp3",mime:"audio/mpeg"}:102===I[4]&&116===I[5]&&121===I[6]&&112===I[7]&&77===I[8]&&52===I[9]&&65===I[10]||77===I[0]&&52===I[1]&&65===I[2]&&32===I[3]?{ext:"m4a",mime:"audio/m4a"}:79===I[28]&&112===I[29]&&117===I[30]&&115===I[31]&&72===I[32]&&101===I[33]&&97===I[34]&&100===I[35]?{ext:"opus",mime:"audio/opus"}:79===I[0]&&103===I[1]&&103===I[2]&&83===I[3]?{ext:"ogg",mime:"audio/ogg"}:102===I[0]&&76===I[1]&&97===I[2]&&67===I[3]?{ext:"flac",mime:"audio/x-flac"}:82===I[0]&&73===I[1]&&70===I[2]&&70===I[3]&&87===I[8]&&65===I[9]&&86===I[10]&&69===I[11]?{ext:"wav",mime:"audio/x-wav"}:35===I[0]&&33===I[1]&&65===I[2]&&77===I[3]&&82===I[4]&&10===I[5]?{ext:"amr",mime:"audio/amr"}:37===I[0]&&80===I[1]&&68===I[2]&&70===I[3]?{ext:"pdf",mime:"application/pdf"}:77===I[0]&&90===I[1]?{ext:"exe",mime:"application/x-msdownload"}:(67===I[0]||70===I[0])&&87===I[1]&&83===I[2]?{ext:"swf",mime:"application/x-shockwave-flash"}:123===I[0]&&92===I[1]&&114===I[2]&&116===I[3]&&102===I[4]?{ext:"rtf",mime:"application/rtf"}:119===I[0]&&79===I[1]&&70===I[2]&&70===I[3]&&(0===I[4]&&1===I[5]&&0===I[6]&&0===I[7]||79===I[4]&&84===I[5]&&84===I[6]&&79===I[7])?{ext:"woff",mime:"application/font-woff"}:119===I[0]&&79===I[1]&&70===I[2]&&50===I[3]&&(0===I[4]&&1===I[5]&&0===I[6]&&0===I[7]||79===I[4]&&84===I[5]&&84===I[6]&&79===I[7])?{ext:"woff2",mime:"application/font-woff"}:76===I[34]&&80===I[35]&&(0===I[8]&&0===I[9]&&1===I[10]||1===I[8]&&0===I[9]&&2===I[10]||2===I[8]&&0===I[9]&&2===I[10])?{ext:"eot",mime:"application/octet-stream"}:0===I[0]&&1===I[1]&&0===I[2]&&0===I[3]&&0===I[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===I[0]&&84===I[1]&&84===I[2]&&79===I[3]&&0===I[4]?{ext:"otf",mime:"application/font-sfnt"}:0===I[0]&&0===I[1]&&1===I[2]&&0===I[3]?{ext:"ico",mime:"image/x-icon"}:70===I[0]&&76===I[1]&&86===I[2]&&1===I[3]?{ext:"flv",mime:"video/x-flv"}:37===I[0]&&33===I[1]?{ext:"ps",mime:"application/postscript"}:253===I[0]&&55===I[1]&&122===I[2]&&88===I[3]&&90===I[4]&&0===I[5]?{ext:"xz",mime:"application/x-xz"}:83===I[0]&&81===I[1]&&76===I[2]&&105===I[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===I[0]&&69===I[1]&&83===I[2]&&26===I[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===I[0]&&114===I[1]&&50===I[2]&&52===I[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===I[0]&&83===I[1]&&67===I[2]&&70===I[3]||73===I[0]&&83===I[1]&&99===I[2]&&40===I[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===I[0]&&60===I[1]&&97===I[2]&&114===I[3]&&99===I[4]&&104===I[5]&&62===I[6]&&10===I[7]&&100===I[8]&&101===I[9]&&98===I[10]&&105===I[11]&&97===I[12]&&110===I[13]&&45===I[14]&&98===I[15]&&105===I[16]&&110===I[17]&&97===I[18]&&114===I[19]&&121===I[20]?{ext:"deb",mime:"application/x-deb"}:33===I[0]&&60===I[1]&&97===I[2]&&114===I[3]&&99===I[4]&&104===I[5]&&62===I[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===I[0]&&171===I[1]&&238===I[2]&&219===I[3]?{ext:"rpm",mime:"application/x-rpm"}:31===I[0]&&160===I[1]||31===I[0]&&157===I[1]?{ext:"Z",mime:"application/x-compress"}:76===I[0]&&90===I[1]&&73===I[2]&&80===I[3]?{ext:"lz",mime:"application/x-lzip"}:208===I[0]&&207===I[1]&&17===I[2]&&224===I[3]&&161===I[4]&&177===I[5]&&26===I[6]&&225===I[7]?{ext:"msi",mime:"application/x-msi"}:null:null}},{}],42:[function(_,P,D){"use strict";var I=_("file-type");P.exports=function(S){var C=I(S);return-1===["jpg","png","gif","webp","tif","bmp","jxr","psd"].indexOf(C&&C.ext)?null:C}},{"file-type":41}],43:[function(_,P,D){(function(I){"use strict";function S(){G=!0;for(var J=Z.length,W,Q;J;){for(Q=Z,Z=[],W=-1;++W<J;)Q[W]();J=Z.length}G=!1}var C=I.MutationObserver||I.WebKitMutationObserver,R;if(C){var E=0,T=new C(S),L=I.document.createTextNode("");T.observe(L,{characterData:!0}),R=function(){L.data=E=++E%2}}else if(!I.setImmediate&&"undefined"!=typeof I.MessageChannel){var O=new I.MessageChannel;O.port1.onmessage=S,R=function(){O.port2.postMessage(0)}}else R="document"in I&&"onreadystatechange"in I.document.createElement("script")?function(){var Q=I.document.createElement("script");Q.onreadystatechange=function(){S(),Q.onreadystatechange=null,Q.parentNode.removeChild(Q),Q=null},I.document.documentElement.appendChild(Q)}:function(){setTimeout(S,0)};var G,Z=[];P.exports=function(Q){1!==Z.push(Q)||G||R()}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],44:[function(_,P,D){"use strict";var I=8192,S=[];P.exports=class{constructor(R){var E=0;R===void 0&&(R=I),"number"==typeof R&&(E=R,R=new ArrayBuffer(R)),E=R.byteLength,R.buffer&&(E=R.byteLength,R=R.byteLength===R.buffer.byteLength?R.buffer:R.buffer.slice(R.byteOffset,R.byteOffset+R.byteLength)),this.buffer=R,this.length=E,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=E||I,this._mark=0}available(R){return void 0===R&&(R=1),this.offset+R<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(R){R===void 0&&(R=1),this.offset+=R}seek(R){this.offset=R}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(R){if(void 0===R&&(R=1),!this.available(R)){var E=this._increment+this._increment;this._increment=E;var T=this.length+E,L=new Uint8Array(T);L.set(new Uint8Array(this.buffer)),this.buffer=L.buffer,this.length=T,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(R){R===void 0&&(R=1);var E=new Uint8Array(R);for(var T=0;T<R;T++)E[T]=this.readByte();return E}readInt16(){var R=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,R}readUint16(){var R=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,R}readInt32(){var R=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,R}readUint32(){var R=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,R}readFloat32(){var R=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,R}readFloat64(){var R=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,R}readChar(){return String.fromCharCode(this.readInt8())}readChars(R){R===void 0&&(R=1),S.length=R;for(var E=0;E<R;E++)S[E]=this.readChar();return S.join("")}writeBoolean(R){this.writeUint8(R?255:0)}writeInt8(R){this.ensureAvailable(1),this._data.setInt8(this.offset++,R)}writeUint8(R){this.ensureAvailable(1),this._data.setUint8(this.offset++,R)}writeByte(R){this.writeUint8(R)}writeBytes(R){this.ensureAvailable(R.length);for(var E=0;E<R.length;E++)this._data.setUint8(this.offset++,R[E])}writeInt16(R){this.ensureAvailable(2),this._data.setInt16(this.offset,R,this.littleEndian),this.offset+=2}writeUint16(R){this.ensureAvailable(2),this._data.setUint16(this.offset,R,this.littleEndian),this.offset+=2}writeInt32(R){this.ensureAvailable(4),this._data.setInt32(this.offset,R,this.littleEndian),this.offset+=4}writeUint32(R){this.ensureAvailable(4),this._data.setUint32(this.offset,R,this.littleEndian),this.offset+=4}writeFloat32(R){this.ensureAvailable(4),this._data.setFloat32(this.offset,R,this.littleEndian),this.offset+=4}writeFloat64(R){this.ensureAvailable(8),this._data.setFloat64(this.offset,R,this.littleEndian),this.offset+=8}writeChar(R){this.writeUint8(R.charCodeAt(0))}writeChars(R){for(var E=0;E<R.length;E++)this.writeUint8(R.charCodeAt(E))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},{}],45:[function(_,P,D){"use strict";var I=Object.prototype.toString;P.exports=function(C){return"Array"===I.call(C).substr(-6,5)}},{}],46:[function(_,P,D){"use strict";var I=_("number-is-nan");P.exports=Number.isFinite||function(S){return!("number"!=typeof S||I(S)||S===1/0||S===-(1/0))}},{"number-is-nan":109}],47:[function(_,P,D){"use strict";var I=_("is-finite");P.exports=Number.isInteger||function(S){return"number"==typeof S&&I(S)&&Math.floor(S)===S}},{"is-finite":46}],48:[function(_,P,D){(function(I){"use strict";(function(S){if("object"==typeof D&&"undefined"!=typeof P)P.exports=S();else if("function"==typeof define&&define.amd)define([],S);else{var C;C="undefined"==typeof window?"undefined"==typeof I?"undefined"==typeof self?this:self:I:window,C.PriorityQueue=S()}})(function(){return function S(C,R,E){function T(G,Z){if(!R[G]){if(!C[G]){var W="function"==typeof _&&_;if(!Z&&W)return W(G,!0);if(L)return L(G,!0);var Q=new Error("Cannot find module '"+G+"'");throw Q.code="MODULE_NOT_FOUND",Q}var J=R[G]={exports:{}};C[G][0].call(J.exports,function($){var ee=C[G][1][$];return T(ee?ee:$)},J,J.exports,S,C,R,E)}return R[G].exports}var L="function"==typeof _&&_;for(var O=0;O<E.length;O++)T(E[O]);return T}({1:[function(S,C,R){var Z=function(J,$){function ee(){this.constructor=J}for(var te in $)W.call($,te)&&(J[te]=$[te]);return ee.prototype=$.prototype,J.prototype=new ee,J.__super__=$.prototype,J},W={}.hasOwnProperty,E,T,L,O,G;E=S("./PriorityQueue/AbstractPriorityQueue"),T=S("./PriorityQueue/ArrayStrategy"),O=S("./PriorityQueue/BinaryHeapStrategy"),L=S("./PriorityQueue/BHeapStrategy"),G=function(Q){function J($){$||($={}),$.strategy||($.strategy=O),$.comparator||($.comparator=function(ee,te){return ee-te}),J.__super__.constructor.call(this,$)}return Z(J,Q),J}(E),G.ArrayStrategy=T,G.BinaryHeapStrategy=O,G.BHeapStrategy=L,C.exports=G},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(S,C,R){var E;C.exports=E=function(){function T(L){var O;if(null==(null==L?void 0:L.strategy))throw"Must pass options.strategy, a strategy";if(null==(null==L?void 0:L.comparator))throw"Must pass options.comparator, a comparator";this.priv=new L.strategy(L),this.length=null==L||null==(O=L.initialValues)?void 0:O.length}return T.prototype.queue=function(L){return this.length++,this.priv.queue(L),void 0},T.prototype.dequeue=function(L){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},T.prototype.peek=function(L){if(!this.length)throw"Empty queue";return this.priv.peek()},T.prototype.clear=function(){return this.length=0,this.priv.clear()},T}()},{}],3:[function(S,C,R){var E,T;T=function(O,G,Z){var W,Q,J;for(Q=0,W=O.length;Q<W;)J=Q+W>>>1,0<=Z(O[J],G)?Q=J+1:W=J;return Q},C.exports=E=function(){function L(O){var G;this.options=O,this.comparator=this.options.comparator,this.data=(null==(G=this.options.initialValues)?void 0:G.slice(0))||[],this.data.sort(this.comparator).reverse()}return L.prototype.queue=function(O){var G=T(this.data,O,this.comparator);return this.data.splice(G,0,O),void 0},L.prototype.dequeue=function(){return this.data.pop()},L.prototype.peek=function(){return this.data[this.data.length-1]},L.prototype.clear=function(){return this.data.length=0,void 0},L}()},{}],4:[function(S,C,R){var E;C.exports=E=function(){function T(L){var O,G,Z,W,Q,J,$,ee,te;for(this.comparator=(null==L?void 0:L.comparator)||function(ae,ie){return ae-ie},this.pageSize=(null==L?void 0:L.pageSize)||512,this.length=0,ee=0;1<<ee<this.pageSize;)ee+=1;if(1<<ee!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=ee,this._emptyMemoryPageTemplate=O=[],(G=Z=0,J=this.pageSize);0<=J?Z<J:Z>J;G=0<=J?++Z:--Z)O.push(null);if(this._memory=[],this._mask=this.pageSize-1,L.initialValues)for($=L.initialValues,W=0,Q=$.length;W<Q;W++)te=$[W],this.queue(te)}return T.prototype.queue=function(L){return this.length+=1,this._write(this.length,L),this._bubbleUp(this.length,L),void 0},T.prototype.dequeue=function(){var L,O;return L=this._read(1),O=this._read(this.length),this.length-=1,0<this.length&&(this._write(1,O),this._bubbleDown(1,O)),L},T.prototype.peek=function(){return this._read(1)},T.prototype.clear=function(){return this.length=0,this._memory.length=0,void 0},T.prototype._write=function(L,O){for(var G=L>>this._shift;G>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[G][L&this._mask]=O},T.prototype._read=function(L){return this._memory[L>>this._shift][L&this._mask]},T.prototype._bubbleUp=function(L,O){var G,Z,W,Q;for(G=this.comparator;1<L&&(Z=L&this._mask,L<this.pageSize||3<Z?W=L&~this._mask|Z>>1:2>Z?(W=L-this.pageSize>>this._shift,W+=W&~(this._mask>>1),W|=this.pageSize>>1):W=L-2,Q=this._read(W),!(0>G(Q,O)));)this._write(W,O),this._write(L,Q),L=W;0},T.prototype._bubbleDown=function(L,O){var G,Z,W,Q,J;for(J=this.comparator;L<this.length;)if(L>this._mask&&!(L&this._mask-1)?G=Z=L+2:L&this.pageSize>>1?(G=(L&~this._mask)>>1,G|=L&this._mask>>1,G=G+1<<this._shift,Z=G+1):(G=L+(L&this._mask),Z=G+1),G!==Z&&Z<=this.length){if(W=this._read(G),Q=this._read(Z),0>J(W,O)&&0>=J(W,Q))this._write(G,O),this._write(L,W),L=G;else if(0>J(Q,O))this._write(Z,O),this._write(L,Q),L=Z;else break;}else if(!(G<=this.length))break;else if(W=this._read(G),0>J(W,O))this._write(G,O),this._write(L,W),L=G;else break;0},T}()},{}],5:[function(S,C,R){var E;C.exports=E=function(){function T(L){var O;this.comparator=(null==L?void 0:L.comparator)||function(G,Z){return G-Z},this.length=0,this.data=(null==(O=L.initialValues)?void 0:O.slice(0))||[],this._heapify()}return T.prototype._heapify=function(){var L,O,G;if(0<this.data.length)for(L=O=1,G=this.data.length;1<=G?O<G:O>G;L=1<=G?++O:--O)this._bubbleUp(L);0},T.prototype.queue=function(L){return this.data.push(L),this._bubbleUp(this.data.length-1),void 0},T.prototype.dequeue=function(){var L,O;return O=this.data[0],L=this.data.pop(),0<this.data.length&&(this.data[0]=L,this._bubbleDown(0)),O},T.prototype.peek=function(){return this.data[0]},T.prototype.clear=function(){return this.length=0,this.data.length=0,void 0},T.prototype._bubbleUp=function(L){for(var O,G;0<L&&(O=L-1>>>1,0>this.comparator(this.data[L],this.data[O]));)G=this.data[O],this.data[O]=this.data[L],this.data[L]=G,L=O;0},T.prototype._bubbleDown=function(L){var O,G,Z,W,Q;for(O=this.data.length-1;G=(L<<1)+1,W=G+1,Z=L,G<=O&&0>this.comparator(this.data[G],this.data[Z])&&(Z=G),W<=O&&0>this.comparator(this.data[W],this.data[Z])&&(Z=W),Z!==L;)Q=this.data[Z],this.data[Z]=this.data[L],this.data[L]=Q,L=Z;0},T}()},{}]},{},[1])(1)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],49:[function(_,P,D){"use strict";function I(){}function S(J){if("function"!=typeof J)throw new TypeError("resolver must be a function");this.state=Q,this.queue=[],this.outcome=void 0,J!==I&&T(this,J)}function C(J,$,ee){this.promise=J,"function"==typeof $&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),"function"==typeof ee&&(this.onRejected=ee,this.callRejected=this.otherCallRejected)}function R(J,$,ee){O(function(){var te;try{te=$(ee)}catch(ae){return G.reject(J,ae)}te===J?G.reject(J,new TypeError("Cannot resolve promise with itself")):G.resolve(J,te)})}function E(J){var $=J&&J.then;if(J&&"object"==typeof J&&"function"==typeof $)return function(){$.apply(J,arguments)}}function T(J,$){function ee(ne){ae||(ae=!0,G.reject(J,ne))}function te(ne){ae||(ae=!0,G.resolve(J,ne))}var ae=!1,ie=L(function(){$(te,ee)});"error"===ie.status&&ee(ie.value)}function L(J,$){var ee={};try{ee.value=J($),ee.status="success"}catch(te){ee.status="error",ee.value=te}return ee}var O=_("immediate"),G={},Z=["REJECTED"],W=["FULFILLED"],Q=["PENDING"];P.exports=S,S.prototype["catch"]=function(J){return this.then(null,J)},S.prototype.then=function(J,$){if("function"!=typeof J&&this.state===W||"function"!=typeof $&&this.state===Z)return this;var ee=new this.constructor(I);if(this.state!==Q){var te=this.state===W?J:$;R(ee,te,this.outcome)}else this.queue.push(new C(ee,J,$));return ee},C.prototype.callFulfilled=function(J){G.resolve(this.promise,J)},C.prototype.otherCallFulfilled=function(J){R(this.promise,this.onFulfilled,J)},C.prototype.callRejected=function(J){G.reject(this.promise,J)},C.prototype.otherCallRejected=function(J){R(this.promise,this.onRejected,J)},G.resolve=function(J,$){var ee=L(E,$);if("error"===ee.status)return G.reject(J,ee.value);var te=ee.value;if(te)T(J,te);else{J.state=W,J.outcome=$;for(var ae=-1,ie=J.queue.length;++ae<ie;)J.queue[ae].callFulfilled($)}return J},G.reject=function(J,$){J.state=Z,J.outcome=$;for(var ee=-1,te=J.queue.length;++ee<te;)J.queue[ee].callRejected($);return J},S.resolve=function($){return $ instanceof this?$:G.resolve(new this(I),$)},S.reject=function($){var ee=new this(I);return G.reject(ee,$)},S.all=function($){function ee(de,he){te.resolve(de).then(function(me){ne[he]=me,++le!==ae||ie||(ie=!0,G.resolve(se,ne))},function(ue){ie||(ie=!0,G.reject(se,ue))})}var te=this;if("[object Array]"!==Object.prototype.toString.call($))return this.reject(new TypeError("must be an array"));var ae=$.length,ie=!1;if(!ae)return this.resolve([]);for(var ne=Array(ae),le=0,oe=-1,se=new this(I);++oe<ae;)ee($[oe],oe);return se},S.race=function($){function ee(oe){te.resolve(oe).then(function(se){ie||(ie=!0,G.resolve(le,se))},function(se){ie||(ie=!0,G.reject(le,se))})}var te=this;if("[object Array]"!==Object.prototype.toString.call($))return this.reject(new TypeError("must be an array"));var ae=$.length,ie=!1;if(!ae)return this.resolve([]);for(var ne=-1,le=new this(I);++ne<ae;)ee($[ne]);return le}},{immediate:43}],50:[function(_,P,D){"use strict";function I(C){var R=Array(C[0].length);for(var E=0;E<R.length;++E)R[E]=Array(C.length);for(E=0;E<C.length;++E)for(var T=0;T<C[0].length;++T)R[T][E]=C[E][T];return R}var S=_("ml-stat").array;P.exports={coordArrayToPoints:function(R,E){if(0!=R.length%E)throw new RangeError("Dimensions number must be accordance with the size of the array.");var T=R.length/E,L=Array(T),O=0;for(var G=0;G<R.length;G+=E){var Z=Array(E);for(var W=0;W<E;++W)Z[W]=R[G+W];L[O]=Z,O++}return L},coordArrayToCoordMatrix:function(R,E){if(0!=R.length%E)throw new RangeError("Dimensions number must be accordance with the size of the array.");var T=Array(E),L=R.length/E;for(var O=0;O<T.length;O++)T[O]=Array(L);for(O=0;O<R.length;O+=E)for(var G=0;G<E;++G){var Z=Math.floor(O/E);T[G][Z]=R[O+G]}return T},coordMatrixToCoordArray:function(R){var E=Array(R.length*R[0].length),T=0;for(var L=0;L<R[0].length;++L)for(var O=0;O<R.length;++O)E[T]=R[O][L],++T;return E},coordMatrixToPoints:I,pointsToCoordArray:function(R){var E=Array(R.length*R[0].length),T=0;for(var L=0;L<R.length;++L)for(var O=0;O<R[0].length;++O)E[T]=R[L][O],++T;return E},pointsToCoordMatrix:I,applyDotProduct:function(R,E){var T,L;R.length<=E.length?(L=R,T=E):(L=E,T=R);var O=T.length-L.length+1,G=Array(O);for(var Z=0;Z<O;++Z){var W=0;for(var Q=0;Q<L.length;++Q)W+=L[Q]*T[Z+Q];G[Z]=W}return G},scale:function(R,E){var T;T=E.inPlace?R:Array(R.length);var L=E.max,O=E.min;if("number"==typeof L){if("number"==typeof O){var G=S.minMax(R),Z=(L-O)/(G.max-G.min);for(var W=0;W<T.length;W++)T[W]=(R[W]-G.min)*Z+O}else{var Q=S.max(R),Z=L/Q;for(var W=0;W<T.length;W++)T[W]=R[W]*Z}}else if("number"==typeof O){var Q=S.min(R),Z=O/Q;for(var W=0;W<T.length;W++)T[W]=R[W]*Z}return T}}},{"ml-stat":105}],51:[function(_,P,D){"use strict";function I(R,E,T,L,O){function G(fe,_e,be,xe){return(xe-_e)/(be-fe)}var Z=R.length,W=(L-T)/(O-1),Q=T-W/2,J=Array(O),$=R[1]-R[0],ee=R[R.length-1]-R[R.length-2],te=Q,ae=Q+W,ie=Number.MIN_VALUE,ne=0,le=R[0]-$,oe=0,se=0,de=0,he=0,ue=0,me=0,ge=0,ce=0;main:for(;!0;){for(;0<=le-ae;){var pe=C(0,ae-ie,de,ne);if(me=se+pe,J[ce]=(me-ue)/W,ce++,ce===O)break main;te=ae,ae+=W,ue=me}ie<=te&&te<=le&&(pe=C(0,te-ie,de,ne),ue=se+pe),se+=C(ie,le,de,he),ie=le,ne=oe,ge<Z?(le=R[ge],oe=E[ge],ge++):ge===Z&&(le+=ee,oe=0),de=G(ie,ne,le,oe),he=-de*ie+ne}return J}function S(R,E,T,L,O){var G=R.length,Z=(L-T)/(O-1),W=R[R.length-1]-R[R.length-2],Q=T-Z/2,J=Array(O),$=Q,ee=Q+Z,te=-Number.MAX_VALUE,ae=0,ie=R[0],ne=E[0],le=0,oe=!0,se=0,de=0,he=1,ue=0;main:for(;!0;){if(te>=ie)throw new Error("x must be an increasing serie");for(;0<te-ee;){if(oe&&(de++,oe=!1),J[ue]=0>=de?0:se/de,ue++,ue===O)break main;$=ee,ee+=Z,se=0,de=0}te>$&&(se+=ae,de++),(te==-Number.MAX_VALUE||1<le)&&de--,te=ie,ae=ne,he<G?(ie=R[he],ne=E[he],he++):(ie+=W,ne=0,le++)}return J}function C(R,E,T,L){return 0.5*T*E*E+L*E-(0.5*T*R*R+L*R)}D.getEquallySpacedData=function(E,T,L){1<E.length&&E[0]>E[1]&&(E=E.slice().reverse(),T=T.slice().reverse());var O=E.length;if(O!==T.length)throw new RangeError("the x and y vector doesn't have the same size.");L===void 0&&(L={});var G=L.from===void 0?E[0]:L.from;if(isNaN(G)||!isFinite(G))throw new RangeError("'From' value must be a number");var Z=L.to===void 0?E[E.length-1]:L.to;if(isNaN(Z)||!isFinite(Z))throw new RangeError("'To' value must be a number");var W=G>Z;if(W){var Q=G;G=Z,Z=Q}var J=L.numberOfPoints===void 0?100:L.numberOfPoints;if(isNaN(J)||!isFinite(J))throw new RangeError("'Number of points' value must be a number");if(1>J)throw new RangeError("the number of point must be higher than 1");var $="slot"===L.variant?"slot":"smooth",ee="slot"==$?S(E,T,G,Z,J):I(E,T,G,Z,J);return W?ee.reverse():ee},D.integral=C},{}],52:[function(_,P,D){"use strict";P.exports=D=_("./ArrayUtils"),D.getEquallySpacedData=_("./getEquallySpaced").getEquallySpacedData,D.SNV=_("./snv").SNV,D.binarySearch=_("ml-binary-search")},{"./ArrayUtils":50,"./getEquallySpaced":51,"./snv":53,"ml-binary-search":54}],53:[function(_,P,D){"use strict";D.SNV=function(C){var R=I.mean(C),E=I.standardDeviation(C),T=C.slice();for(var L=0;L<C.length;L++)T[L]=(T[L]-R)/E;return T};var I=_("ml-stat").array},{"ml-stat":105}],54:[function(_,P,D){"use strict";P.exports=function(S,C){for(var R=0,E=S.length-1;R<=E;){var T=R+E>>>1,L=S[T];if(L<C)R=T+1;else if(L>C)E=T-1;else return T}return-(R+1)}},{}],55:[function(_,P,D){"use strict";function I(S){this.value=S,this.parent=null,this.rank=0}P.exports=class{constructor(){this.nodes=new Map}add(C){var R=this.nodes.get(C);return R||(R=new I(C),this.nodes.set(C,R)),R}union(C,R){var E=this.find(C),T=this.find(R);E===T||(E.rank<T.rank?E.parent=T:E.rank>T.rank?T.parent=E:(T.parent=E,E.rank++))}find(C){for(var R=C;null!==R.parent;)R=R.parent;for(var E=C;null!==E.parent;){var T=E;E=E.parent,T.parent=R}return R}connected(C,R){return this.find(C)===this.find(R)}}},{}],56:[function(_,P,D){"use strict";function I(C,R){var E=0;for(var T=0;T<C.length;T++)E+=(C[T]-R[T])*(C[T]-R[T]);return E}function S(C,R){return Math.sqrt(I(C,R))}P.exports=S,S.squared=I},{}],57:[function(_,P,D){"use strict";var I=_("./fftlib");P.exports={DEBUG:!1,ifft2DArray:function(C,R,E){var T=Array(R*E),L=R/2,O=2*(E-1);I.init(L);var G={re:Array(L),im:Array(L)};for(var Z=0;Z<E;Z++){for(var W=L-1;0<=W;W--)G.re[W]=C[2*W*E+Z],G.im[W]=C[(2*W+1)*E+Z];I.bt(G.re,G.im);for(var W=L-1;0<=W;W--)T[2*W*E+Z]=G.re[W],T[(2*W+1)*E+Z]=G.im[W]}var Q=Array(L*O);I.init(O);var J={re:Array(O),im:Array(O)};for(var W=0;W<R;W+=2){J.re[0]=T[W*E],J.im[0]=T[(W+1)*E];for(var Z=1;Z<E;Z++)J.re[Z]=T[W*E+Z],J.im[Z]=T[(W+1)*E+Z],J.re[O-Z]=T[W*E+Z],J.im[O-Z]=-T[(W+1)*E+Z];I.bt(J.re,J.im);var $=W/2*O;for(var Z=O-1;0<=Z;Z--)Q[$+Z]=J.re[Z]/(O*L)}return Q},fft2DArray:function(C,R,E,T){Object.assign({},{inplace:!0});var L=E/2+1,O=2*R,G=Array(O*L);I.init(E);var Z={re:Array(E),im:Array(E)},W={re:Array(E),im:Array(E)},Q={re:Array(E),im:Array(E)},J,$,ee,te,ae;for(var ie=0;ie<R/2;ie++){J=2*ie*E,Z.re=C.slice(J,J+E),J=(2*ie+1)*E,Z.im=C.slice(J,J+E),I.fft1d(Z.re,Z.im),this.reconstructTwoRealFFT(Z,W,Q),$=4*ie*L,ee=(4*ie+1)*L,te=(4*ie+2)*L,ae=(4*ie+3)*L;for(var ne=L-1;0<=ne;ne--)G[$+ne]=W.re[ne],G[ee+ne]=W.im[ne],G[te+ne]=Q.re[ne],G[ae+ne]=Q.im[ne]}W=null,Q=null;var le=Array(O*L);I.init(R);var oe={re:Array(R),im:Array(R)};for(var se=L-1;0<=se;se--){for(var ie=R-1;0<=ie;ie--)oe.re[ie]=G[2*ie*L+se],oe.im[ie]=G[(2*ie+1)*L+se],isNaN(oe.re[ie])&&(oe.re[ie]=0),isNaN(oe.im[ie])&&(oe.im[ie]=0);I.fft1d(oe.re,oe.im);for(var ie=R-1;0<=ie;ie--)le[2*ie*L+se]=oe.re[ie],le[(2*ie+1)*L+se]=oe.im[ie]}return le},reconstructTwoRealFFT:function(C,R,E){var T=C.re.length;R.re[0]=C.re[0],R.im[0]=0,E.re[0]=C.im[0],E.im[0]=0;var L,O,G,Z,W;for(var Q=T/2;0<Q;Q--)W=T-Q,L=0.5*(C.re[Q]-C.re[W]),O=0.5*(C.re[Q]+C.re[W]),G=0.5*(C.im[Q]-C.im[W]),Z=0.5*(C.im[Q]+C.im[W]),R.re[Q]=O,R.im[Q]=G,R.re[W]=O,R.im[W]=-G,E.re[Q]=Z,E.im[Q]=-L,E.re[W]=Z,E.im[W]=L},convolute2DI:function(C,R,E,T){var L,O;for(var G=0;G<E/2;G++)for(var Z=0;Z<T;Z++)L=C[2*G*T+Z]*R[2*G*T+Z]-C[(2*G+1)*T+Z]*R[(2*G+1)*T+Z],O=C[2*G*T+Z]*R[(2*G+1)*T+Z]+C[(2*G+1)*T+Z]*R[2*G*T+Z],C[2*G*T+Z]=L,C[(2*G+1)*T+Z]=O},convolute:function(C,R,E,T,L){var O=Array(T*E);for(var G=0;G<E*T;G++)O[G]=C[G];O=this.fft2DArray(O,E,T);var Z=R.length,W=R[0].length,Q=Array(T*E);for(var G=0;G<T*E;G++)Q[G]=0;var ee=Math.floor((Z-1)/2),te=Math.floor((W-1)/2),J,$;for(var ae=0;ae<Z;ae++){J=(ae-ee+E)%E;for(var ie=0;ie<W;ie++)$=(ie-te+T)%T,Q[J*T+$]=R[ae][ie]}Q=this.fft2DArray(Q,E,T);var ne=2*E,le=T/2+1;return this.convolute2DI(O,Q,ne,le),this.ifft2DArray(O,ne,le)},toRadix2:function(C,R,E){var T,L,O,G,Z=E,W=R;if(0===E||0!=(E&E-1)){for(Z=0;0!=E>>++Z;);Z=1<<Z}if(0===R||0!=(R&R-1)){for(W=0;0!=R>>++W;);W=1<<W}if(W==R&&Z==E)return{data:C,rows:R,cols:E};var Q=Array(W*Z),J=Math.floor((W-R)/2)-R,$=Math.floor((Z-E)/2)-E;for(T=0;T<W;T++)for(O=T*Z,G=(T-J)%R*E,L=0;L<Z;L++)Q[O+L]=C[G+(L-$)%E];return{data:Q,rows:W,cols:Z}},crop:function(C,R,E,T,L,O){if(R==T&&E==L)return C;Object.assign({},O);var G=Array(L*T),Z=Math.floor((R-T)/2),W=Math.floor((E-L)/2),Q,J,$,ee;for($=0;$<T;$++)for(Q=$*T,J=($+Z)*E,ee=0;ee<L;ee++)G[Q+ee]=C[J+(ee+W)];return G}}},{"./fftlib":58}],58:[function(_,P,D){"use strict";(function(){var I;I="undefined"==typeof D?{}:D;var S={release:"0.3.0",date:"2013-03"};I.toString=function(){return"version "+S.release+", released "+S.date};var C=0,R=null,E=null,T={init:function(Z){if(0!==Z&&0==(Z&Z-1))C=Z,T._initArray(),T._makeBitReversalTable(),T._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(Z,W){T.fft(Z,W,1)},ifft1d:function(Z,W){var Q=1/C;T.fft(Z,W,-1);for(var J=0;J<C;J++)Z[J]*=Q,W[J]*=Q},bt1d:function(Z,W){T.fft(Z,W,-1)},fft2d:function(Z,W){var Q=[],J=[],$=0;for(var ee=0;ee<C;ee++){$=ee*C;for(var te=0;te<C;te++)Q[te]=Z[te+$],J[te]=W[te+$];T.fft1d(Q,J);for(var ae=0;ae<C;ae++)Z[ae+$]=Q[ae],W[ae+$]=J[ae]}for(var ie=0;ie<C;ie++){for(var ne=0;ne<C;ne++)$=ie+ne*C,Q[ne]=Z[$],J[ne]=W[$];T.fft1d(Q,J);for(var le=0;le<C;le++)$=ie+le*C,Z[$]=Q[le],W[$]=J[le]}},ifft2d:function(Z,W){var Q=[],J=[],$=0;for(var ee=0;ee<C;ee++){$=ee*C;for(var te=0;te<C;te++)Q[te]=Z[te+$],J[te]=W[te+$];T.ifft1d(Q,J);for(var ae=0;ae<C;ae++)Z[ae+$]=Q[ae],W[ae+$]=J[ae]}for(var ie=0;ie<C;ie++){for(var ne=0;ne<C;ne++)$=ie+ne*C,Q[ne]=Z[$],J[ne]=W[$];T.ifft1d(Q,J);for(var le=0;le<C;le++)$=ie+le*C,Z[$]=Q[le],W[$]=J[le]}},fft:function(Z,W,Q){var se=C>>2,J,$,ee,te,ae,ie,ne,le,oe;for(var de=0;de<C;de++)te=R[de],de<te&&(ae=Z[de],Z[de]=Z[te],Z[te]=ae,ae=W[de],W[de]=W[te],W[te]=ae);for(var he=1;he<C;he<<=1){$=0,J=C/(he<<1);for(var ue=0;ue<he;ue++){ie=E[$+se],ne=Q*E[$];for(var me=ue;me<C;me+=he<<1)ee=me+he,le=ie*Z[ee]+ne*W[ee],oe=ie*W[ee]-ne*Z[ee],Z[ee]=Z[me]-le,Z[me]+=le,W[ee]=W[me]-oe,W[me]+=oe;$+=J}}},_initArray:function(){R="undefined"==typeof Uint32Array?[]:new Uint32Array(C),E="undefined"==typeof Float64Array?[]:new Float64Array(1.25*C)},_paddingZero:function(){},_makeBitReversalTable:function(){var Z=0,W=0,Q=0;for(R[0]=0;++Z<C;){for(Q=C>>1;Q<=W;)W-=Q,Q>>=1;W+=Q,R[Z]=W}},_makeCosSinTable:function(){var Z=C>>1,W=C>>2,Q=C>>3,J=Math.sin(Math.PI/C),$=2*J*J,ee=Math.sqrt($*(2-$)),te=E[W]=1,ae=E[0]=0;J=2*$;for(var ie=1;ie<Q;ie++)te-=$,$+=J*te,ae+=ee,ee-=J*ae,E[ie]=ae,E[W-ie]=te;0!=Q&&(E[Q]=Math.sqrt(0.5));for(var ne=0;ne<W;ne++)E[Z-ne]=E[ne];for(var le=0;le<Z+W;le++)E[le+Z]=-E[le]}},L=["init","fft1d","ifft1d","fft2d","ifft2d"];for(var O=0;O<L.length;O++)I[L[O]]=T[L[O]];return I.bt=T.bt1d,I.fft=T.fft1d,I.ifft=T.ifft1d,I}).call(void 0)},{}],59:[function(_,P,D){"use strict";D.FFTUtils=_("./FFTUtils"),D.FFT=_("./fftlib")},{"./FFTUtils":57,"./fftlib":58}],60:[function(_,P,D){"use strict";var I=_("ml-distance-euclidean").squared,S={sigma:1};P.exports=class{constructor(R){R=Object.assign({},S,R),this.sigma=R.sigma,this.divisor=2*R.sigma*R.sigma}compute(R,E){var T=I(R,E);return Math.exp(-T/this.divisor)}}},{"ml-distance-euclidean":56}],61:[function(_,P,D){"use strict";var I={degree:1,constant:1,scale:1};P.exports=class{constructor(C){C=Object.assign({},I,C),this.degree=C.degree,this.constant=C.constant,this.scale=C.scale}compute(C,R){var E=0;for(var T=0;T<C.length;T++)E+=C[T]*R[T];return Math.pow(this.scale*E+this.constant,this.degree)}}},{}],62:[function(_,P,D){"use strict";var I={alpha:0.01,constant:-Math.E};P.exports=class{constructor(C){C=Object.assign({},I,C),this.alpha=C.alpha,this.constant=C.constant}compute(C,R){var E=0;for(var T=0;T<C.length;T++)E+=C[T]*R[T];return Math.tanh(this.alpha*E+this.constant)}}},{}],63:[function(_,P,D){"use strict";var I=_("ml-matrix"),S=_("ml-kernel-gaussian"),C=_("ml-kernel-polynomial"),R=_("./kernels/anova-kernel"),E=_("./kernels/cauchy-kernel"),T=_("./kernels/exponential-kernel"),L=_("./kernels/histogram-intersection-kernel"),O=_("./kernels/laplacian-kernel"),G=_("./kernels/multiquadratic-kernel"),Z=_("./kernels/rational-quadratic-kernel"),W=_("ml-kernel-sigmoid"),Q={gaussian:S,rbf:S,polynomial:C,poly:C,anova:R,cauchy:E,exponential:T,histogram:L,min:L,laplacian:O,multiquadratic:G,rational:Z,sigmoid:W,mlp:W};P.exports=class{constructor($,ee){if(this.kernelType=$,"linear"!==$)if("string"==typeof $){$=$.toLowerCase();var te=Q[$];if(te)this.kernelFunction=new te(ee);else throw new Error("unsupported kernel type: "+$)}else if("object"==typeof $&&"function"==typeof $.compute)this.kernelFunction=$;else throw new TypeError("first argument must be a valid kernel type or instance")}compute($,ee){if(void 0===ee&&(ee=$),"linear"===this.kernelType){var te=new I($);return te.mmul(new I(ee).transpose())}var ae=new I($.length,ee.length),ie,ne;if($===ee)for(ie=0;ie<$.length;ie++)for(ne=ie;ne<$.length;ne++)ae[ie][ne]=ae[ne][ie]=this.kernelFunction.compute($[ie],$[ne]);else for(ie=0;ie<$.length;ie++)for(ne=0;ne<ee.length;ne++)ae[ie][ne]=this.kernelFunction.compute($[ie],ee[ne]);return ae}}},{"./kernels/anova-kernel":64,"./kernels/cauchy-kernel":65,"./kernels/exponential-kernel":66,"./kernels/histogram-intersection-kernel":67,"./kernels/laplacian-kernel":68,"./kernels/multiquadratic-kernel":69,"./kernels/rational-quadratic-kernel":70,"ml-kernel-gaussian":60,"ml-kernel-polynomial":61,"ml-kernel-sigmoid":62,"ml-matrix":80}],64:[function(_,P,D){"use strict";var I={sigma:1,degree:1};P.exports=class{constructor(C){C=Object.assign({},I,C),this.sigma=C.sigma,this.degree=C.degree}compute(C,R){var E=0,T=Math.min(C.length,R.length);for(var L=1;L<=T;++L)E+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(C[L-1],L)-Math.pow(R[L-1],L),2)),this.degree);return E}}},{}],65:[function(_,P,D){"use strict";var I=_("ml-distance-euclidean").squared,S={sigma:1};P.exports=class{constructor(R){R=Object.assign({},S,R),this.sigma=R.sigma}compute(R,E){return 1/(1+I(R,E)/(this.sigma*this.sigma))}}},{"ml-distance-euclidean":56}],66:[function(_,P,D){"use strict";var I=_("ml-distance-euclidean"),S={sigma:1};P.exports=class{constructor(R){R=Object.assign({},S,R),this.sigma=R.sigma,this.divisor=2*R.sigma*R.sigma}compute(R,E){var T=I(R,E);return Math.exp(-T/this.divisor)}}},{"ml-distance-euclidean":56}],67:[function(_,P,D){"use strict";P.exports=class{compute(S,C){var R=Math.min(S.length,C.length),E=0;for(var T=0;T<R;++T)E+=Math.min(S[T],C[T]);return E}}},{}],68:[function(_,P,D){"use strict";var I=_("ml-distance-euclidean"),S={sigma:1};P.exports=class{constructor(R){R=Object.assign({},S,R),this.sigma=R.sigma}compute(R,E){var T=I(R,E);return Math.exp(-T/this.sigma)}}},{"ml-distance-euclidean":56}],69:[function(_,P,D){"use strict";var I=_("ml-distance-euclidean").squared,S={constant:1};P.exports=class{constructor(R){R=Object.assign({},S,R),this.constant=R.constant}compute(R,E){return Math.sqrt(I(R,E)+this.constant*this.constant)}}},{"ml-distance-euclidean":56}],70:[function(_,P,D){"use strict";var I=_("ml-distance-euclidean").squared,S={constant:1};P.exports=class{constructor(R){R=Object.assign({},S,R),this.constant=R.constant}compute(R,E){var T=I(R,E);return 1-T/(T+this.constant)}}},{"ml-distance-euclidean":56}],71:[function(_,P,D){"use strict";"use strict;";function I(C){var R=C,E,T;if("number"!=typeof C[0]){E=C.length,T=C[0].length,R=Array(E*T);for(var L=0;L<E;L++)for(var O=0;O<T;O++)R[L*T+O]=C[L][O]}else{var G=Math.sqrt(C.length);Number.isInteger(G)&&(E=G,T=G)}return{data:R,rows:E,cols:T}}var S=_("ml-fft").FFTUtils;P.exports={fft:function(R,E,T){var L=I(R),O=L.data,G=Object.assign({normalize:!1,divisor:1,rows:L.rows,cols:L.cols},T),Z,W;if(G.rows&&G.cols)Z=G.rows,W=G.cols;else throw new Error("Invalid number of rows or columns "+Z+" "+W);var Q=G.divisor,ee=E.length,te=E[0].length,J,$;if(G.normalize)for(Q=0,J=0;J<ee;J++)for($=0;$<te;$++)Q+=E[J][$];if(0===Q)throw new RangeError("convolution: The divisor is equal to zero");var ae=S.toRadix2(O,Z,W),ie=S.convolute(ae.data,E,ae.rows,ae.cols);if(ie=S.crop(ie,ae.rows,ae.cols,Z,W),0!=Q&&1!=Q)for(J=0;J<ie.length;J++)ie[J]/=Q;return ie},direct:function(R,E,T){var L=I(R),O=L.data,G=Object.assign({normalize:!1,divisor:1,rows:L.rows,cols:L.cols},T),Z,W;if(G.rows&&G.cols)Z=G.rows,W=G.cols;else throw new Error("Invalid number of rows or columns "+Z+" "+W);var Q=G.divisor,J=E.length,$=E[0].length,ee,te,ae,ie,ne,le,oe,se,de;if(G.normalize)for(Q=0,ee=0;ee<J;ee++)for(te=0;te<$;te++)Q+=E[ee][te];if(0===Q)throw new RangeError("convolution: The divisor is equal to zero");var he=Array(Z*W),ue=Math.floor(J/2),me=Math.floor($/2);for(ie=0;ie<Z;ie++)for(ae=0;ae<W;ae++){for(le=0,te=0;te<J;te++)for(ee=0;ee<$;ee++)oe=E[J-te-1][$-ee-1],se=(ie+te-ue+Z)%Z,de=(ae+ee-me+W)%W,ne=se*W+de,le+=O[ne]*oe;ne=ie*W+ae,he[ne]=le/Q}return he},kernelFactory:{LoG:function(R,E,T){var L=1000;T&&T.factor&&(L=T.factor);var O=Array(E),G,Z,W,Q;L*=-1;var J=(E-1)/2;for(G=0;G<E;G++)for(O[G]=Array(E),Q=(G-J)*(G-J),Z=0;Z<E;Z++)W=-((Z-J)*(Z-J)+Q)/(2*R*R),O[G][Z]=Math.round(L*(1+W)*Math.exp(W));return O}},matrix2Array:I}},{"ml-fft":59}],72:[function(require,module,exports){"use strict";module.exports=function(superCtor){function compareNumbers(_,P){return _-P}function fillTemplateFunction(_,P){for(var D in P)_=_.replace(new RegExp("%"+D+"%","g"),P[D]);return _}superCtor===void 0&&(superCtor=Object);class _ extends superCtor{static get[Symbol.species](){return this}static from1DArray(P,D,I){if(P*D!==I.length)throw new RangeError("Data length does not match given dimensions");var S=new this(P,D);for(var C=0;C<P;C++)for(var R=0;R<D;R++)S.set(C,R,I[C*D+R]);return S}static rowVector(P){var D=new this(1,P.length);for(var I=0;I<P.length;I++)D.set(0,I,P[I]);return D}static columnVector(P){var D=new this(P.length,1);for(var I=0;I<P.length;I++)D.set(I,0,P[I]);return D}static empty(P,D){return new this(P,D)}static zeros(P,D){return this.empty(P,D).fill(0)}static ones(P,D){return this.empty(P,D).fill(1)}static rand(P,D,I){I===void 0&&(I=Math.random);var S=this.empty(P,D);for(var C=0;C<P;C++)for(var R=0;R<D;R++)S.set(C,R,I());return S}static eye(P,D){D===void 0&&(D=P);var I=Math.min(P,D),S=this.zeros(P,D);for(var C=0;C<I;C++)S.set(C,C,1);return S}static diag(P,D,I){var S=P.length;D===void 0&&(D=S),I===void 0&&(I=D);var C=Math.min(S,D,I),R=this.zeros(D,I);for(var E=0;E<C;E++)R.set(E,E,P[E]);return R}static min(P,D){P=this.checkMatrix(P),D=this.checkMatrix(D);var I=P.rows,S=P.columns,C=new this(I,S);for(var R=0;R<I;R++)for(var E=0;E<S;E++)C.set(R,E,Math.min(P.get(R,E),D.get(R,E)));return C}static max(P,D){P=this.checkMatrix(P),D=this.checkMatrix(D);var I=P.rows,S=P.columns,C=new this(I,S);for(var R=0;R<I;R++)for(var E=0;E<S;E++)C.set(R,E,Math.max(P.get(R,E),D.get(R,E)));return C}static checkMatrix(P){return _.isMatrix(P)?P:new this(P)}static isMatrix(P){return null!=P&&"Matrix"===P.klass}get size(){return this.rows*this.columns}apply(P){if("function"!=typeof P)throw new TypeError("callback must be a function");var D=this.rows,I=this.columns;for(var S=0;S<D;S++)for(var C=0;C<I;C++)P.call(this,S,C);return this}to1DArray(){var P=Array(this.size);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)P[D*this.columns+I]=this.get(D,I);return P}to2DArray(){var P=Array(this.rows);for(var D=0;D<this.rows;D++){P[D]=Array(this.columns);for(var I=0;I<this.columns;I++)P[D][I]=this.get(D,I)}return P}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var P=0;P<this.rows;P++)for(var D=0;D<=P;D++)if(this.get(P,D)!==this.get(D,P))return!1;return!0}return!1}set(P,D,I){throw new Error("set method is unimplemented")}get(P,D){throw new Error("get method is unimplemented")}repeat(P,D){P=P||1,D=D||1;var I=new this.constructor[Symbol.species](this.rows*P,this.columns*D);for(var S=0;S<P;S++)for(var C=0;C<D;C++)I.setSubMatrix(this,this.rows*S,this.columns*C);return I}fill(P){for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,P);return this}neg(){return this.mulS(-1)}getRow(P){util.checkRowIndex(this,P);var D=Array(this.columns);for(var I=0;I<this.columns;I++)D[I]=this.get(P,I);return D}getRowVector(P){return this.constructor.rowVector(this.getRow(P))}setRow(P,D){util.checkRowIndex(this,P),D=util.checkRowVector(this,D);for(var I=0;I<this.columns;I++)this.set(P,I,D[I]);return this}swapRows(P,D){util.checkRowIndex(this,P),util.checkRowIndex(this,D);for(var I=0;I<this.columns;I++){var S=this.get(P,I);this.set(P,I,this.get(D,I)),this.set(D,I,S)}return this}getColumn(P){util.checkColumnIndex(this,P);var D=Array(this.rows);for(var I=0;I<this.rows;I++)D[I]=this.get(I,P);return D}getColumnVector(P){return this.constructor.columnVector(this.getColumn(P))}setColumn(P,D){util.checkColumnIndex(this,P),D=util.checkColumnVector(this,D);for(var I=0;I<this.rows;I++)this.set(I,P,D[I]);return this}swapColumns(P,D){util.checkColumnIndex(this,P),util.checkColumnIndex(this,D);for(var I=0;I<this.rows;I++){var S=this.get(I,P);this.set(I,P,this.get(I,D)),this.set(I,D,S)}return this}addRowVector(P){P=util.checkRowVector(this,P);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)+P[I]);return this}subRowVector(P){P=util.checkRowVector(this,P);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)-P[I]);return this}mulRowVector(P){P=util.checkRowVector(this,P);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)*P[I]);return this}divRowVector(P){P=util.checkRowVector(this,P);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)/P[I]);return this}addColumnVector(P){P=util.checkColumnVector(this,P);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)+P[D]);return this}subColumnVector(P){P=util.checkColumnVector(this,P);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)-P[D]);return this}mulColumnVector(P){P=util.checkColumnVector(this,P);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)*P[D]);return this}divColumnVector(P){P=util.checkColumnVector(this,P);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.set(D,I,this.get(D,I)/P[D]);return this}mulRow(P,D){util.checkRowIndex(this,P);for(var I=0;I<this.columns;I++)this.set(P,I,this.get(P,I)*D);return this}mulColumn(P,D){util.checkColumnIndex(this,P);for(var I=0;I<this.rows;I++)this.set(I,P,this.get(I,P)*D)}max(){var P=this.get(0,0);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.get(D,I)>P&&(P=this.get(D,I));return P}maxIndex(){var P=this.get(0,0),D=[0,0];for(var I=0;I<this.rows;I++)for(var S=0;S<this.columns;S++)this.get(I,S)>P&&(P=this.get(I,S),D[0]=I,D[1]=S);return D}min(){var P=this.get(0,0);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)this.get(D,I)<P&&(P=this.get(D,I));return P}minIndex(){var P=this.get(0,0),D=[0,0];for(var I=0;I<this.rows;I++)for(var S=0;S<this.columns;S++)this.get(I,S)<P&&(P=this.get(I,S),D[0]=I,D[1]=S);return D}maxRow(P){util.checkRowIndex(this,P);var D=this.get(P,0);for(var I=1;I<this.columns;I++)this.get(P,I)>D&&(D=this.get(P,I));return D}maxRowIndex(P){util.checkRowIndex(this,P);var D=this.get(P,0),I=[P,0];for(var S=1;S<this.columns;S++)this.get(P,S)>D&&(D=this.get(P,S),I[1]=S);return I}minRow(P){util.checkRowIndex(this,P);var D=this.get(P,0);for(var I=1;I<this.columns;I++)this.get(P,I)<D&&(D=this.get(P,I));return D}minRowIndex(P){util.checkRowIndex(this,P);var D=this.get(P,0),I=[P,0];for(var S=1;S<this.columns;S++)this.get(P,S)<D&&(D=this.get(P,S),I[1]=S);return I}maxColumn(P){util.checkColumnIndex(this,P);var D=this.get(0,P);for(var I=1;I<this.rows;I++)this.get(I,P)>D&&(D=this.get(I,P));return D}maxColumnIndex(P){util.checkColumnIndex(this,P);var D=this.get(0,P),I=[0,P];for(var S=1;S<this.rows;S++)this.get(S,P)>D&&(D=this.get(S,P),I[0]=S);return I}minColumn(P){util.checkColumnIndex(this,P);var D=this.get(0,P);for(var I=1;I<this.rows;I++)this.get(I,P)<D&&(D=this.get(I,P));return D}minColumnIndex(P){util.checkColumnIndex(this,P);var D=this.get(0,P),I=[0,P];for(var S=1;S<this.rows;S++)this.get(S,P)<D&&(D=this.get(S,P),I[0]=S);return I}diag(){var P=Math.min(this.rows,this.columns),D=Array(P);for(var I=0;I<P;I++)D[I]=this.get(I,I);return D}sum(){var P=0;for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)P+=this.get(D,I);return P}mean(){return this.sum()/this.size}prod(){var P=1;for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)P*=this.get(D,I);return P}cumulativeSum(){var P=0;for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)P+=this.get(D,I),this.set(D,I,P);return this}dot(P){_.isMatrix(P)&&(P=P.to1DArray());var D=this.to1DArray();if(D.length!==P.length)throw new RangeError("vectors do not have the same size");var I=0;for(var S=0;S<D.length;S++)I+=D[S]*P[S];return I}mmul(P){P=this.constructor.checkMatrix(P),this.columns!==P.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");var D=this.rows,I=this.columns,S=P.columns,C=new this.constructor[Symbol.species](D,S),R=Array(I);for(var E=0;E<S;E++){for(var T=0;T<I;T++)R[T]=P.get(T,E);for(var L=0;L<D;L++){var O=0;for(T=0;T<I;T++)O+=this.get(L,T)*R[T];C.set(L,E,O)}}return C}scaleRows(P,D){if(P=void 0===P?0:P,D=void 0===D?1:D,P>=D)throw new RangeError("min should be strictly smaller than max");var I=this.constructor.empty(this.rows,this.columns);for(var S=0;S<this.rows;S++){var C=arrayUtils.scale(this.getRow(S),{min:P,max:D});I.setRow(S,C)}return I}scaleColumns(P,D){if(P=void 0===P?0:P,D=void 0===D?1:D,P>=D)throw new RangeError("min should be strictly smaller than max");var I=this.constructor.empty(this.rows,this.columns);for(var S=0;S<this.columns;S++){var C=arrayUtils.scale(this.getColumn(S),{min:P,max:D});I.setColumn(S,C)}return I}kroneckerProduct(P){P=this.constructor.checkMatrix(P);var D=this.rows,I=this.columns,S=P.rows,C=P.columns,R=new this.constructor[Symbol.species](D*S,I*C);for(var E=0;E<D;E++)for(var T=0;T<I;T++)for(var L=0;L<S;L++)for(var O=0;O<C;O++)R[S*E+L][C*T+O]=this.get(E,T)*P.get(L,O);return R}transpose(){var P=new this.constructor[Symbol.species](this.columns,this.rows);for(var D=0;D<this.rows;D++)for(var I=0;I<this.columns;I++)P.set(I,D,this.get(D,I));return P}sortRows(P){P===void 0&&(P=compareNumbers);for(var D=0;D<this.rows;D++)this.setRow(D,this.getRow(D).sort(P));return this}sortColumns(P){P===void 0&&(P=compareNumbers);for(var D=0;D<this.columns;D++)this.setColumn(D,this.getColumn(D).sort(P));return this}subMatrix(P,D,I,S){util.checkRange(this,P,D,I,S);var C=new this.constructor[Symbol.species](D-P+1,S-I+1);for(var R=P;R<=D;R++)for(var E=I;E<=S;E++)C[R-P][E-I]=this.get(R,E);return C}subMatrixRow(P,D,I){if(void 0===D&&(D=0),void 0===I&&(I=this.columns-1),D>I||0>D||D>=this.columns||0>I||I>=this.columns)throw new RangeError("Argument out of range");var S=new this.constructor[Symbol.species](P.length,I-D+1);for(var C=0;C<P.length;C++)for(var R=D;R<=I;R++){if(0>P[C]||P[C]>=this.rows)throw new RangeError("Row index out of range: "+P[C]);S.set(C,R-D,this.get(P[C],R))}return S}subMatrixColumn(P,D,I){if(void 0===D&&(D=0),void 0===I&&(I=this.rows-1),D>I||0>D||D>=this.rows||0>I||I>=this.rows)throw new RangeError("Argument out of range");var S=new this.constructor[Symbol.species](I-D+1,P.length);for(var C=0;C<P.length;C++)for(var R=D;R<=I;R++){if(0>P[C]||P[C]>=this.columns)throw new RangeError("Column index out of range: "+P[C]);S.set(R-D,C,this.get(R,P[C]))}return S}setSubMatrix(P,D,I){P=this.constructor.checkMatrix(P);var S=D+P.rows-1,C=I+P.columns-1;if(D>S||I>C||0>D||D>=this.rows||0>S||S>=this.rows||0>I||I>=this.columns||0>C||C>=this.columns)throw new RangeError("Argument out of range");for(var R=0;R<P.rows;R++)for(var E=0;E<P.columns;E++)this[D+R][I+E]=P.get(R,E);return this}selection(P,D){var I=util.checkIndices(this,P,D),S=new this.constructor(P.length,D.length);for(var C=0;C<I.row.length;C++){var R=I.row[C];for(var E=0;E<I.column.length;E++){var T=I.column[E];S[C][E]=this.get(R,T)}}return S}trace(){var P=Math.min(this.rows,this.columns),D=0;for(var I=0;I<P;I++)D+=this.get(I,I);return D}transposeView(){return new MatrixTransposeView(this)}rowView(P){return util.checkRowIndex(this,P),new MatrixRowView(this,P)}columnView(P){return util.checkColumnIndex(this,P),new MatrixColumnView(this,P)}flipRowView(){return new MatrixFlipRowView(this)}flipColumnView(){return new MatrixFlipColumnView(this)}subMatrixView(P,D,I,S){return new MatrixSubView(this,P,D,I,S)}selectionView(P,D){return new MatrixSelectionView(this,P,D)}}_.prototype.klass="Matrix",_.random=_.rand,_.diagonal=_.diag,_.prototype.diagonal=_.prototype.diag,_.identity=_.eye,_.prototype.negate=_.prototype.neg,_.prototype.tensorProduct=_.prototype.kroneckerProduct;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new this(matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new this(matrix);
    return newMatrix.%name%();
})
`,inplaceMethodWithArgs=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,staticMethodWithArgs=`
(function %name%(matrix, %args%) {
    var newMatrix = new this(matrix);
    return newMatrix.%name%(%args%);
})
`,inplaceMethodWithOneArgScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,inplaceMethodWithOneArgMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,inplaceMethodWithOneArg=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,operators=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]];for(var operator of operators){var inplaceOp=eval(fillTemplateFunction(inplaceOperator,{name:operator[1],op:operator[0]})),inplaceOpS=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[1]+"S",op:operator[0]})),inplaceOpM=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[1]+"M",op:operator[0]})),staticOp=eval(fillTemplateFunction(staticOperator,{name:operator[1]}));for(var i=1;i<operator.length;i++)_.prototype[operator[i]]=inplaceOp,_.prototype[operator[i]+"S"]=inplaceOpS,_.prototype[operator[i]+"M"]=inplaceOpM,_[operator[i]]=staticOp}var methods=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(_){methods.push(["Math."+_,_])});for(var method of methods){var inplaceMeth=eval(fillTemplateFunction(inplaceMethod,{name:method[1],method:method[0]})),staticMeth=eval(fillTemplateFunction(staticMethod,{name:method[1]}));for(var i=1;i<method.length;i++)_.prototype[method[i]]=inplaceMeth,_[method[i]]=staticMeth}var methodsWithArgs=[["Math.pow",1,"pow"]];for(var methodWithArg of methodsWithArgs){var args="arg0";for(var i=1;i<methodWithArg[1];i++)args+=`, arg${i}`;if(1!==methodWithArg[1]){var inplaceMethWithArgs=eval(fillTemplateFunction(inplaceMethodWithArgs,{name:methodWithArg[2],method:methodWithArg[0],args:args})),staticMethWithArgs=eval(fillTemplateFunction(staticMethodWithArgs,{name:methodWithArg[2],args:args}));for(var i=2;i<methodWithArg.length;i++)_.prototype[methodWithArg[i]]=inplaceMethWithArgs,_[methodWithArg[i]]=staticMethWithArgs}else{var tmplVar={name:methodWithArg[2],args:args,method:methodWithArg[0]},inplaceMethod=eval(fillTemplateFunction(inplaceMethodWithOneArg,tmplVar)),inplaceMethodS=eval(fillTemplateFunction(inplaceMethodWithOneArgScalar,tmplVar)),inplaceMethodM=eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix,tmplVar)),staticMethod=eval(fillTemplateFunction(staticMethodWithArgs,tmplVar));for(var i=2;i<methodWithArg.length;i++)_.prototype[methodWithArg[i]]=inplaceMethod,_.prototype[methodWithArg[i]+"M"]=inplaceMethodM,_.prototype[methodWithArg[i]+"S"]=inplaceMethodS,_[methodWithArg[i]]=staticMethod}}return _};var arrayUtils=require("ml-array-utils"),util=require("./util"),MatrixTransposeView=require("./views/transpose"),MatrixRowView=require("./views/row"),MatrixSubView=require("./views/sub"),MatrixSelectionView=require("./views/selection"),MatrixColumnView=require("./views/column"),MatrixFlipRowView=require("./views/flipRow"),MatrixFlipColumnView=require("./views/flipColumn")},{"./util":83,"./views/column":85,"./views/flipColumn":86,"./views/flipRow":87,"./views/row":88,"./views/selection":89,"./views/sub":90,"./views/transpose":91,"ml-array-utils":52}],73:[function(_,P,D){"use strict";function I(C){if(!(this instanceof I))return new I(C);if(C=S.checkMatrix(C),!C.isSymmetric())throw new Error("Matrix is not symmetric");var R=C,E=R.rows,T=new S(E,E),L=!0,O,G,Z;for(G=0;G<E;G++){var W=T[G],Q=0;for(Z=0;Z<G;Z++){var J=T[Z],$=0;for(O=0;O<Z;O++)$+=J[O]*W[O];W[Z]=$=(R[G][Z]-$)/T[Z][Z],Q=Q+$*$}for(Q=R[G][G]-Q,L&=0<Q,T[G][G]=Math.sqrt(Math.max(Q,0)),Z=G+1;Z<E;Z++)T[G][Z]=0}if(!L)throw new Error("Matrix is not positive definite");this.L=T}var S=_("../matrix");I.prototype={get lowerTriangularMatrix(){return this.L},solve:function(R){R=S.checkMatrix(R);var E=this.L,T=E.rows;if(R.rows!==T)throw new Error("Matrix dimensions do not match");var L=R.columns,O=R.clone(),G,Z,W;for(W=0;W<T;W++)for(Z=0;Z<L;Z++){for(G=0;G<W;G++)O[W][Z]-=O[G][Z]*E[W][G];O[W][Z]/=E[W][W]}for(W=T-1;0<=W;W--)for(Z=0;Z<L;Z++){for(G=W+1;G<T;G++)O[W][Z]-=O[G][Z]*E[G][W];O[W][Z]/=E[W][W]}return O}},P.exports=I},{"../matrix":81}],74:[function(_,P,D){"use strict";function I(Q,J){if(J=Object.assign({},W,J),!(this instanceof I))return new I(Q,J);if(Q=L.checkMatrix(Q),!Q.isSquare())throw new Error("Matrix is not a square matrix");var $=Q.columns,ee=Z($,$,0),te=Array($),ae=Array($),ie=Q,oe=!1,ne,le;if(oe=!!J.assumeSymmetric||Q.isSymmetric(),oe){for(ne=0;ne<$;ne++)for(le=0;le<$;le++)ee[ne][le]=ie.get(ne,le);S($,ae,te,ee),C($,ae,te,ee)}else{var se=Z($,$,0),de=Array($);for(le=0;le<$;le++)for(ne=0;ne<$;ne++)se[ne][le]=ie.get(ne,le);R($,se,de,ee),E($,ae,te,ee,se)}this.n=$,this.e=ae,this.d=te,this.V=ee}function S(Q,J,$,ee){var te,ae,ie,ne,le,oe,se,de;for(le=0;le<Q;le++)$[le]=ee[Q-1][le];for(ne=Q-1;0<ne;ne--){for(de=0,ie=0,oe=0;oe<ne;oe++)de=de+Math.abs($[oe]);if(0===de)for(J[ne]=$[ne-1],le=0;le<ne;le++)$[le]=ee[ne-1][le],ee[ne][le]=0,ee[le][ne]=0;else{for(oe=0;oe<ne;oe++)$[oe]/=de,ie+=$[oe]*$[oe];for(te=$[ne-1],ae=Math.sqrt(ie),0<te&&(ae=-ae),J[ne]=de*ae,ie=ie-te*ae,$[ne-1]=te-ae,le=0;le<ne;le++)J[le]=0;for(le=0;le<ne;le++){for(te=$[le],ee[le][ne]=te,ae=J[le]+ee[le][le]*te,oe=le+1;oe<=ne-1;oe++)ae+=ee[oe][le]*$[oe],J[oe]+=ee[oe][le]*te;J[le]=ae}for(te=0,le=0;le<ne;le++)J[le]/=ie,te+=J[le]*$[le];for(se=te/(ie+ie),le=0;le<ne;le++)J[le]-=se*$[le];for(le=0;le<ne;le++){for(te=$[le],ae=J[le],oe=le;oe<=ne-1;oe++)ee[oe][le]-=te*J[oe]+ae*$[oe];$[le]=ee[ne-1][le],ee[ne][le]=0}}$[ne]=ie}for(ne=0;ne<Q-1;ne++){if(ee[Q-1][ne]=ee[ne][ne],ee[ne][ne]=1,ie=$[ne+1],0!==ie){for(oe=0;oe<=ne;oe++)$[oe]=ee[oe][ne+1]/ie;for(le=0;le<=ne;le++){for(ae=0,oe=0;oe<=ne;oe++)ae+=ee[oe][ne+1]*ee[oe][le];for(oe=0;oe<=ne;oe++)ee[oe][le]-=ae*$[oe]}}for(oe=0;oe<=ne;oe++)ee[oe][ne+1]=0}for(le=0;le<Q;le++)$[le]=ee[Q-1][le],ee[Q-1][le]=0;ee[Q-1][Q-1]=1,J[0]=0}function C(Q,J,$,ee){var te,ae,ie,ne,le,oe,se,de,he,ue,me,ge,ce,pe,fe,_e,be;for(ie=1;ie<Q;ie++)J[ie-1]=J[ie];J[Q-1]=0;var xe=0,ye=0,ke=Math.pow(2,-52);for(oe=0;oe<Q;oe++){for(ye=Math.max(ye,Math.abs($[oe])+Math.abs(J[oe])),se=oe;se<Q&&!(Math.abs(J[se])<=ke*ye);)se++;if(se>oe){be=0;do{for(be=be+1,te=$[oe],de=($[oe+1]-te)/(2*J[oe]),he=G(de,1),0>de&&(he=-he),$[oe]=J[oe]/(de+he),$[oe+1]=J[oe]*(de+he),ue=$[oe+1],ae=te-$[oe],ie=oe+2;ie<Q;ie++)$[ie]-=ae;for(xe=xe+ae,de=$[se],me=1,ge=me,ce=me,pe=J[oe+1],fe=0,_e=0,ie=se-1;ie>=oe;ie--)for(ce=ge,ge=me,_e=fe,te=me*J[ie],ae=me*de,he=G(de,J[ie]),J[ie+1]=fe*he,fe=J[ie]/he,me=de/he,de=me*$[ie]-fe*te,$[ie+1]=ae+fe*(me*te+fe*$[ie]),le=0;le<Q;le++)ae=ee[le][ie+1],ee[le][ie+1]=fe*ee[le][ie]+me*ae,ee[le][ie]=me*ee[le][ie]-fe*ae;de=-fe*_e*ce*pe*J[oe]/ue,J[oe]=fe*de,$[oe]=me*de}while(Math.abs(J[oe])>ke*ye)}$[oe]=$[oe]+xe,J[oe]=0}for(ie=0;ie<Q-1;ie++){for(le=ie,de=$[ie],ne=ie+1;ne<Q;ne++)$[ne]<de&&(le=ne,de=$[ne]);if(le!==ie)for($[le]=$[ie],$[ie]=de,ne=0;ne<Q;ne++)de=ee[ne][ie],ee[ne][ie]=ee[ne][le],ee[ne][le]=de}}function R(Q,J,$,ee){var te=0,ae=Q-1,ie,ne,le,oe,se,de,he;for(de=te+1;de<=ae-1;de++){for(he=0,oe=de;oe<=ae;oe++)he=he+Math.abs(J[oe][de-1]);if(0!==he){for(le=0,oe=ae;oe>=de;oe--)$[oe]=J[oe][de-1]/he,le+=$[oe]*$[oe];for(ne=Math.sqrt(le),0<$[de]&&(ne=-ne),le=le-$[de]*ne,$[de]=$[de]-ne,se=de;se<Q;se++){for(ie=0,oe=ae;oe>=de;oe--)ie+=$[oe]*J[oe][se];for(ie=ie/le,oe=de;oe<=ae;oe++)J[oe][se]-=ie*$[oe]}for(oe=0;oe<=ae;oe++){for(ie=0,se=ae;se>=de;se--)ie+=$[se]*J[oe][se];for(ie=ie/le,se=de;se<=ae;se++)J[oe][se]-=ie*$[se]}$[de]=he*$[de],J[de][de-1]=he*ne}}for(oe=0;oe<Q;oe++)for(se=0;se<Q;se++)ee[oe][se]=oe===se?1:0;for(de=ae-1;de>=te+1;de--)if(0!==J[de][de-1]){for(oe=de+1;oe<=ae;oe++)$[oe]=J[oe][de-1];for(se=de;se<=ae;se++){for(ne=0,oe=de;oe<=ae;oe++)ne+=$[oe]*ee[oe][se];for(ne=ne/$[de]/J[de][de-1],oe=de;oe<=ae;oe++)ee[oe][se]+=ne*$[oe]}}}function E(Q,J,$,ee,te){var ae=Q-1,ie=0,ne=Q-1,le=Math.pow(2,-52),oe=0,se=0,de=0,he=0,ue=0,me=0,ge=0,ce=0,pe,fe,_e,be,xe,ye,ke,we,ve,Me,je,Pe,De,Ie,Se;for(pe=0;pe<Q;pe++)for((pe<ie||pe>ne)&&($[pe]=te[pe][pe],J[pe]=0),fe=Math.max(pe-1,0);fe<Q;fe++)se=se+Math.abs(te[pe][fe]);for(;ae>=ie;){for(be=ae;be>ie&&(me=Math.abs(te[be-1][be-1])+Math.abs(te[be][be]),0==me&&(me=se),!(Math.abs(te[be][be-1])<le*me));)be--;if(be===ae)te[ae][ae]=te[ae][ae]+oe,$[ae]=te[ae][ae],J[ae]=0,ae--,ce=0;else if(be===ae-1){if(ke=te[ae][ae-1]*te[ae-1][ae],de=(te[ae-1][ae-1]-te[ae][ae])/2,he=de*de+ke,ge=Math.sqrt(Math.abs(he)),te[ae][ae]=te[ae][ae]+oe,te[ae-1][ae-1]=te[ae-1][ae-1]+oe,we=te[ae][ae],0<=he){for(ge=0<=de?de+ge:de-ge,$[ae-1]=we+ge,$[ae]=$[ae-1],0!=ge&&($[ae]=we-ke/ge),J[ae-1]=0,J[ae]=0,we=te[ae][ae-1],me=Math.abs(we)+Math.abs(ge),de=we/me,he=ge/me,ue=Math.sqrt(de*de+he*he),de=de/ue,he=he/ue,fe=ae-1;fe<Q;fe++)ge=te[ae-1][fe],te[ae-1][fe]=he*ge+de*te[ae][fe],te[ae][fe]=he*te[ae][fe]-de*ge;for(pe=0;pe<=ae;pe++)ge=te[pe][ae-1],te[pe][ae-1]=he*ge+de*te[pe][ae],te[pe][ae]=he*te[pe][ae]-de*ge;for(pe=ie;pe<=ne;pe++)ge=ee[pe][ae-1],ee[pe][ae-1]=he*ge+de*ee[pe][ae],ee[pe][ae]=he*ee[pe][ae]-de*ge}else $[ae-1]=we+de,$[ae]=we+de,J[ae-1]=ge,J[ae]=-ge;ae=ae-2,ce=0}else{if(we=te[ae][ae],ve=0,ke=0,be<ae&&(ve=te[ae-1][ae-1],ke=te[ae][ae-1]*te[ae-1][ae]),10==ce){for(oe+=we,pe=ie;pe<=ae;pe++)te[pe][pe]-=we;me=Math.abs(te[ae][ae-1])+Math.abs(te[ae-1][ae-2]),we=ve=0.75*me,ke=-0.4375*me*me}if(30==ce&&(me=(ve-we)/2,me=me*me+ke,0<me)){for(me=Math.sqrt(me),ve<we&&(me=-me),me=we-ke/((ve-we)/2+me),pe=ie;pe<=ae;pe++)te[pe][pe]-=me;oe+=me,we=ve=ke=0.964}for(ce=ce+1,xe=ae-2;xe>=be&&(ge=te[xe][xe],ue=we-ge,me=ve-ge,de=(ue*me-ke)/te[xe+1][xe]+te[xe][xe+1],he=te[xe+1][xe+1]-ge-ue-me,ue=te[xe+2][xe+1],me=Math.abs(de)+Math.abs(he)+Math.abs(ue),de=de/me,he=he/me,ue=ue/me,xe!=be)&&!(Math.abs(te[xe][xe-1])*(Math.abs(he)+Math.abs(ue))<le*(Math.abs(de)*(Math.abs(te[xe-1][xe-1])+Math.abs(ge)+Math.abs(te[xe+1][xe+1]))));)xe--;for(pe=xe+2;pe<=ae;pe++)te[pe][pe-2]=0,pe>xe+2&&(te[pe][pe-3]=0);for(_e=xe;_e<=ae-1&&(Ie=_e!==ae-1,_e!=xe&&(de=te[_e][_e-1],he=te[_e+1][_e-1],ue=Ie?te[_e+2][_e-1]:0,we=Math.abs(de)+Math.abs(he)+Math.abs(ue),0!==we&&(de=de/we,he=he/we,ue=ue/we)),0!==we);_e++)if(me=Math.sqrt(de*de+he*he+ue*ue),0>de&&(me=-me),0!==me){for(_e==xe?be!==xe&&(te[_e][_e-1]=-te[_e][_e-1]):te[_e][_e-1]=-me*we,de=de+me,we=de/me,ve=he/me,ge=ue/me,he=he/de,ue=ue/de,fe=_e;fe<Q;fe++)de=te[_e][fe]+he*te[_e+1][fe],Ie&&(de=de+ue*te[_e+2][fe],te[_e+2][fe]=te[_e+2][fe]-de*ge),te[_e][fe]=te[_e][fe]-de*we,te[_e+1][fe]=te[_e+1][fe]-de*ve;for(pe=0;pe<=Math.min(ae,_e+3);pe++)de=we*te[pe][_e]+ve*te[pe][_e+1],Ie&&(de=de+ge*te[pe][_e+2],te[pe][_e+2]=te[pe][_e+2]-de*ue),te[pe][_e]=te[pe][_e]-de,te[pe][_e+1]=te[pe][_e+1]-de*he;for(pe=ie;pe<=ne;pe++)de=we*ee[pe][_e]+ve*ee[pe][_e+1],Ie&&(de=de+ge*ee[pe][_e+2],ee[pe][_e+2]=ee[pe][_e+2]-de*ue),ee[pe][_e]=ee[pe][_e]-de,ee[pe][_e+1]=ee[pe][_e+1]-de*he}}}if(0!==se){for(ae=Q-1;0<=ae;ae--)if(de=$[ae],he=J[ae],0===he)for(be=ae,te[ae][ae]=1,pe=ae-1;0<=pe;pe--){for(ke=te[pe][pe]-de,ue=0,fe=be;fe<=ae;fe++)ue=ue+te[pe][fe]*te[fe][ae];if(0>J[pe])ge=ke,me=ue;else if(be=pe,0===J[pe]?te[pe][ae]=0===ke?-ue/(le*se):-ue/ke:(we=te[pe][pe+1],ve=te[pe+1][pe],he=($[pe]-de)*($[pe]-de)+J[pe]*J[pe],ye=(we*me-ge*ue)/he,te[pe][ae]=ye,te[pe+1][ae]=Math.abs(we)>Math.abs(ge)?(-ue-ke*ye)/we:(-me-ve*ye)/ge),ye=Math.abs(te[pe][ae]),1<le*ye*ye)for(fe=pe;fe<=ae;fe++)te[fe][ae]=te[fe][ae]/ye}else if(0>he)for(be=ae-1,Math.abs(te[ae][ae-1])>Math.abs(te[ae-1][ae])?(te[ae-1][ae-1]=he/te[ae][ae-1],te[ae-1][ae]=-(te[ae][ae]-de)/te[ae][ae-1]):(Se=T(0,-te[ae-1][ae],te[ae-1][ae-1]-de,he),te[ae-1][ae-1]=Se[0],te[ae-1][ae]=Se[1]),te[ae][ae-1]=0,te[ae][ae]=1,pe=ae-2;0<=pe;pe--){for(Me=0,je=0,fe=be;fe<=ae;fe++)Me=Me+te[pe][fe]*te[fe][ae-1],je=je+te[pe][fe]*te[fe][ae];if(ke=te[pe][pe]-de,0>J[pe])ge=ke,ue=Me,me=je;else if(be=pe,0===J[pe]?(Se=T(-Me,-je,ke,he),te[pe][ae-1]=Se[0],te[pe][ae]=Se[1]):(we=te[pe][pe+1],ve=te[pe+1][pe],Pe=($[pe]-de)*($[pe]-de)+J[pe]*J[pe]-he*he,De=2*($[pe]-de)*he,0===Pe&&0===De&&(Pe=le*se*(Math.abs(ke)+Math.abs(he)+Math.abs(we)+Math.abs(ve)+Math.abs(ge))),Se=T(we*ue-ge*Me+he*je,we*me-ge*je-he*Me,Pe,De),te[pe][ae-1]=Se[0],te[pe][ae]=Se[1],Math.abs(we)>Math.abs(ge)+Math.abs(he)?(te[pe+1][ae-1]=(-Me-ke*te[pe][ae-1]+he*te[pe][ae])/we,te[pe+1][ae]=(-je-ke*te[pe][ae]-he*te[pe][ae-1])/we):(Se=T(-ue-ve*te[pe][ae-1],-me-ve*te[pe][ae],ge,he),te[pe+1][ae-1]=Se[0],te[pe+1][ae]=Se[1])),ye=Math.max(Math.abs(te[pe][ae-1]),Math.abs(te[pe][ae])),1<le*ye*ye)for(fe=pe;fe<=ae;fe++)te[fe][ae-1]=te[fe][ae-1]/ye,te[fe][ae]=te[fe][ae]/ye}for(pe=0;pe<Q;pe++)if(pe<ie||pe>ne)for(fe=pe;fe<Q;fe++)ee[pe][fe]=te[pe][fe];for(fe=Q-1;fe>=ie;fe--)for(pe=ie;pe<=ne;pe++){for(ge=0,_e=ie;_e<=Math.min(fe,ne);_e++)ge=ge+ee[pe][_e]*te[_e][fe];ee[pe][fe]=ge}}}function T(Q,J,$,ee){var te,ae;return Math.abs($)>Math.abs(ee)?(te=ee/$,ae=$+te*ee,[(Q+te*J)/ae,(J-te*Q)/ae]):(te=$/ee,ae=ee+te*$,[(te*Q+J)/ae,(te*J-Q)/ae])}var L=_("../matrix"),O=_("./util"),G=O.hypotenuse,Z=O.getFilled2DArray,W={assumeSymmetric:!1};I.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return L.isMatrix(this.V)||(this.V=new L(this.V)),this.V},get diagonalMatrix(){var Q=this.n,J=this.e,$=this.d,ee=new L(Q,Q),te,ae;for(te=0;te<Q;te++){for(ae=0;ae<Q;ae++)ee[te][ae]=0;ee[te][te]=$[te],0<J[te]?ee[te][te+1]=J[te]:0>J[te]&&(ee[te][te-1]=J[te])}return ee}},P.exports=I},{"../matrix":81,"./util":78}],75:[function(_,P,D){"use strict";function I(C){if(!(this instanceof I))return new I(C);C=S.checkMatrix(C);var R=C.clone(),E=R.rows,T=R.columns,L=Array(E),O=1,G,Z,W,Q,J,$,ee,te,ae,ie;for(G=0;G<E;G++)L[G]=G;for(ae=Array(E),Z=0;Z<T;Z++){for(G=0;G<E;G++)ae[G]=R[G][Z];for(G=0;G<E;G++){for(te=R[G],ie=Math.min(G,Z),J=0,W=0;W<ie;W++)J+=te[W]*ae[W];te[Z]=ae[G]-=J}for(Q=Z,G=Z+1;G<E;G++)Math.abs(ae[G])>Math.abs(ae[Q])&&(Q=G);if(Q!==Z){for(W=0;W<T;W++)$=R[Q][W],R[Q][W]=R[Z][W],R[Z][W]=$;ee=L[Q],L[Q]=L[Z],L[Z]=ee,O=-O}if(Z<E&&0!==R[Z][Z])for(G=Z+1;G<E;G++)R[G][Z]/=R[Z][Z]}this.LU=R,this.pivotVector=L,this.pivotSign=O}var S=_("../matrix");I.prototype={isSingular:function(){var R=this.LU,E=R.columns;for(var T=0;T<E;T++)if(0===R[T][T])return!0;return!1},get determinant(){var C=this.LU;if(!C.isSquare())throw new Error("Matrix must be square");var R=this.pivotSign,E=C.columns;for(var T=0;T<E;T++)R*=C[T][T];return R},get lowerTriangularMatrix(){var C=this.LU,R=C.rows,E=C.columns,T=new S(R,E);for(var L=0;L<R;L++)for(var O=0;O<E;O++)T[L][O]=L>O?C[L][O]:L===O?1:0;return T},get upperTriangularMatrix(){var C=this.LU,R=C.rows,E=C.columns,T=new S(R,E);for(var L=0;L<R;L++)for(var O=0;O<E;O++)T[L][O]=L<=O?C[L][O]:0;return T},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(R){R=S.checkMatrix(R);var E=this.LU,T=E.rows;if(T!==R.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var L=R.columns,O=R.subMatrixRow(this.pivotVector,0,L-1),G=E.columns,Z,W,Q;for(Q=0;Q<G;Q++)for(Z=Q+1;Z<G;Z++)for(W=0;W<L;W++)O[Z][W]-=O[Q][W]*E[Z][Q];for(Q=G-1;0<=Q;Q--){for(W=0;W<L;W++)O[Q][W]/=E[Q][Q];for(Z=0;Z<Q;Z++)for(W=0;W<L;W++)O[Z][W]-=O[Q][W]*E[Z][Q]}return O}},P.exports=I},{"../matrix":81}],76:[function(_,P,D){"use strict";function I(R){if(!(this instanceof I))return new I(R);R=S.checkMatrix(R);var E=R.clone(),T=R.rows,L=R.columns,O=Array(L),G,Z,W,Q;for(W=0;W<L;W++){var J=0;for(G=W;G<T;G++)J=C(J,E[G][W]);if(0!==J){for(0>E[W][W]&&(J=-J),G=W;G<T;G++)E[G][W]/=J;for(E[W][W]+=1,Z=W+1;Z<L;Z++){for(Q=0,G=W;G<T;G++)Q+=E[G][W]*E[G][Z];for(Q=-Q/E[W][W],G=W;G<T;G++)E[G][Z]+=Q*E[G][W]}}O[W]=-J}this.QR=E,this.Rdiag=O}var S=_("../matrix"),C=_("./util").hypotenuse;I.prototype={solve:function(E){E=S.checkMatrix(E);var T=this.QR,L=T.rows;if(E.rows!==L)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var O=E.columns,G=E.clone(),Z=T.columns,W,Q,J,$;for(J=0;J<Z;J++)for(Q=0;Q<O;Q++){for($=0,W=J;W<L;W++)$+=T[W][J]*G[W][Q];for($=-$/T[J][J],W=J;W<L;W++)G[W][Q]+=$*T[W][J]}for(J=Z-1;0<=J;J--){for(Q=0;Q<O;Q++)G[J][Q]/=this.Rdiag[J];for(W=0;W<J;W++)for(Q=0;Q<O;Q++)G[W][Q]-=G[J][Q]*T[W][J]}return G.subMatrix(0,Z-1,0,O-1)},isFullRank:function(){var E=this.QR.columns;for(var T=0;T<E;T++)if(0===this.Rdiag[T])return!1;return!0},get upperTriangularMatrix(){var R=this.QR,E=R.columns,T=new S(E,E),L,O;for(L=0;L<E;L++)for(O=0;O<E;O++)T[L][O]=L<O?R[L][O]:L===O?this.Rdiag[L]:0;return T},get orthogonalMatrix(){var R=this.QR,E=R.rows,T=R.columns,L=new S(E,T),O,G,Z,W;for(Z=T-1;0<=Z;Z--){for(O=0;O<E;O++)L[O][Z]=0;for(L[Z][Z]=1,G=Z;G<T;G++)if(0!==R[Z][Z]){for(W=0,O=Z;O<E;O++)W+=R[O][Z]*L[O][G];for(W=-W/R[Z][Z],O=Z;O<E;O++)L[O][G]+=W*R[O][Z]}}return L}},P.exports=I},{"../matrix":81,"./util":78}],77:[function(_,P,D){"use strict";function I(T,L){if(!(this instanceof I))return new I(T,L);T=S.checkMatrix(T),L=L||{};var O=T.rows,G=T.columns,Z=Math.min(O,G),W=!0,Q=!0;!1===L.computeLeftSingularVectors&&(W=!1),!1===L.computeRightSingularVectors&&(Q=!1);var J=!0===L.autoTranspose,$=!1,ee;if(!(O<G))ee=T.clone();else if(!J)ee=T.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{ee=T.transpose(),O=ee.rows,G=ee.columns,$=!0;var te=W;W=Q,Q=te}var ae=Array(Math.min(O+1,G)),ie=E(O,Z,0),ne=E(G,G,0),le=Array(G),oe=Array(O),se=Math.min(O-1,G),de=Math.max(0,Math.min(G-2,O)),he,ue,me,ge,ce,pe,fe,_e,be,xe,ye,ke,we,ve,Me,je,Pe,De,Ie,Se,Ae;for(me=0,xe=Math.max(se,de);me<xe;me++){if(me<se){for(ae[me]=0,he=me;he<O;he++)ae[me]=R(ae[me],ee[he][me]);if(0!==ae[me]){for(0>ee[me][me]&&(ae[me]=-ae[me]),he=me;he<O;he++)ee[he][me]/=ae[me];ee[me][me]+=1}ae[me]=-ae[me]}for(ue=me+1;ue<G;ue++){if(me<se&&0!==ae[me]){for(ce=0,he=me;he<O;he++)ce+=ee[he][me]*ee[he][ue];for(ce=-ce/ee[me][me],he=me;he<O;he++)ee[he][ue]+=ce*ee[he][me]}le[ue]=ee[me][ue]}if(W&&me<se)for(he=me;he<O;he++)ie[he][me]=ee[he][me];if(me<de){for(le[me]=0,he=me+1;he<G;he++)le[me]=R(le[me],le[he]);if(0!==le[me]){for(0>le[me+1]&&(le[me]=-le[me]),he=me+1;he<G;he++)le[he]/=le[me];le[me+1]+=1}if(le[me]=-le[me],me+1<O&&0!==le[me]){for(he=me+1;he<O;he++)oe[he]=0;for(ue=me+1;ue<G;ue++)for(he=me+1;he<O;he++)oe[he]+=le[ue]*ee[he][ue];for(ue=me+1;ue<G;ue++)for(ce=-le[ue]/le[me+1],he=me+1;he<O;he++)ee[he][ue]+=ce*oe[he]}if(Q)for(he=me+1;he<G;he++)ne[he][me]=le[he]}}if(ge=Math.min(G,O+1),se<G&&(ae[se]=ee[se][se]),O<ge&&(ae[ge-1]=0),de+1<ge&&(le[de]=ee[de][ge-1]),le[ge-1]=0,W){for(ue=se;ue<Z;ue++){for(he=0;he<O;he++)ie[he][ue]=0;ie[ue][ue]=1}for(me=se-1;0<=me;me--)if(0!==ae[me]){for(ue=me+1;ue<Z;ue++){for(ce=0,he=me;he<O;he++)ce+=ie[he][me]*ie[he][ue];for(ce=-ce/ie[me][me],he=me;he<O;he++)ie[he][ue]+=ce*ie[he][me]}for(he=me;he<O;he++)ie[he][me]=-ie[he][me];for(ie[me][me]=1+ie[me][me],he=0;he<me-1;he++)ie[he][me]=0}else{for(he=0;he<O;he++)ie[he][me]=0;ie[me][me]=1}}if(Q)for(me=G-1;0<=me;me--){if(me<de&&0!==le[me])for(ue=me+1;ue<G;ue++){for(ce=0,he=me+1;he<G;he++)ce+=ne[he][me]*ne[he][ue];for(ce=-ce/ne[me+1][me],he=me+1;he<G;he++)ne[he][ue]+=ce*ne[he][me]}for(he=0;he<G;he++)ne[he][me]=0;ne[me][me]=1}for(var Ce=ge-1,Re=0,Be=Math.pow(2,-52);0<ge;){for(me=ge-2;-1<=me&&-1!==me;me--)if(Math.abs(le[me])<=Be*(Math.abs(ae[me])+Math.abs(ae[me+1]))){le[me]=0;break}if(me===ge-2)ye=4;else{for(pe=ge-1;pe>=me&&pe!==me;pe--)if(ce=(pe===ge?0:Math.abs(le[pe]))+(pe===me+1?0:Math.abs(le[pe-1])),Math.abs(ae[pe])<=Be*ce){ae[pe]=0;break}pe===me?ye=3:pe===ge-1?ye=1:(ye=2,me=pe)}switch(me++,ye){case 1:{for(fe=le[ge-2],le[ge-2]=0,ue=ge-2;ue>=me;ue--)if(ce=R(ae[ue],fe),_e=ae[ue]/ce,be=fe/ce,ae[ue]=ce,ue!==me&&(fe=-be*le[ue-1],le[ue-1]=_e*le[ue-1]),Q)for(he=0;he<G;he++)ce=_e*ne[he][ue]+be*ne[he][ge-1],ne[he][ge-1]=-be*ne[he][ue]+_e*ne[he][ge-1],ne[he][ue]=ce;break}case 2:{for(fe=le[me-1],le[me-1]=0,ue=me;ue<ge;ue++)if(ce=R(ae[ue],fe),_e=ae[ue]/ce,be=fe/ce,ae[ue]=ce,fe=-be*le[ue],le[ue]=_e*le[ue],W)for(he=0;he<O;he++)ce=_e*ie[he][ue]+be*ie[he][me-1],ie[he][me-1]=-be*ie[he][ue]+_e*ie[he][me-1],ie[he][ue]=ce;break}case 3:{for(ke=Math.max(Math.max(Math.max(Math.max(Math.abs(ae[ge-1]),Math.abs(ae[ge-2])),Math.abs(le[ge-2])),Math.abs(ae[me])),Math.abs(le[me])),we=ae[ge-1]/ke,ve=ae[ge-2]/ke,Me=le[ge-2]/ke,je=ae[me]/ke,Pe=le[me]/ke,De=((ve+we)*(ve-we)+Me*Me)/2,Ie=we*Me*(we*Me),Se=0,(0!==De||0!==Ie)&&(Se=Math.sqrt(De*De+Ie),0>De&&(Se=-Se),Se=Ie/(De+Se)),fe=(je+we)*(je-we)+Se,Ae=je*Pe,ue=me;ue<ge-1;ue++){if(ce=R(fe,Ae),_e=fe/ce,be=Ae/ce,ue!==me&&(le[ue-1]=ce),fe=_e*ae[ue]+be*le[ue],le[ue]=_e*le[ue]-be*ae[ue],Ae=be*ae[ue+1],ae[ue+1]=_e*ae[ue+1],Q)for(he=0;he<G;he++)ce=_e*ne[he][ue]+be*ne[he][ue+1],ne[he][ue+1]=-be*ne[he][ue]+_e*ne[he][ue+1],ne[he][ue]=ce;if(ce=R(fe,Ae),_e=fe/ce,be=Ae/ce,ae[ue]=ce,fe=_e*le[ue]+be*ae[ue+1],ae[ue+1]=-be*le[ue]+_e*ae[ue+1],Ae=be*le[ue+1],le[ue+1]=_e*le[ue+1],W&&ue<O-1)for(he=0;he<O;he++)ce=_e*ie[he][ue]+be*ie[he][ue+1],ie[he][ue+1]=-be*ie[he][ue]+_e*ie[he][ue+1],ie[he][ue]=ce}le[ge-2]=fe,Re=Re+1;break}case 4:{if(0>=ae[me]&&(ae[me]=0>ae[me]?-ae[me]:0,Q))for(he=0;he<=Ce;he++)ne[he][me]=-ne[he][me];for(;me<Ce&&!(ae[me]>=ae[me+1]);){if(ce=ae[me],ae[me]=ae[me+1],ae[me+1]=ce,Q&&me<G-1)for(he=0;he<G;he++)ce=ne[he][me+1],ne[he][me+1]=ne[he][me],ne[he][me]=ce;if(W&&me<O-1)for(he=0;he<O;he++)ce=ie[he][me+1],ie[he][me+1]=ie[he][me],ie[he][me]=ce;me++}Re=0,ge--;break}}}if($){var ze=ne;ne=ie,ie=ze}this.m=O,this.n=G,this.s=ae,this.U=ie,this.V=ne}var S=_("../matrix"),C=_("./util"),R=C.hypotenuse,E=C.getFilled2DArray;I.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){var T=Math.pow(2,-52),L=Math.max(this.m,this.n)*this.s[0]*T,O=0,G=this.s;for(var Z=0,W=G.length;Z<W;Z++)G[Z]>L&&O++;return O},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return S.isMatrix(this.U)||(this.U=new S(this.U)),this.U},get rightSingularVectors(){return S.isMatrix(this.V)||(this.V=new S(this.V)),this.V},get diagonalMatrix(){return S.diag(this.s)},solve:function(L){var O=this.threshold,G=this.s.length,Z=S.zeros(G,G),W;for(W=0;W<G;W++)Z[W][W]=Math.abs(this.s[W])<=O?0:1/this.s[W];var Q=this.U,J=this.rightSingularVectors,$=J.mmul(Z),ee=J.rows,te=Q.length,ae=S.zeros(ee,te),ie,ne,le;for(W=0;W<ee;W++)for(ie=0;ie<te;ie++){for(le=0,ne=0;ne<G;ne++)le+=$[W][ne]*Q[ie][ne];ae[W][ie]=le}return ae.mmul(L)},solveForDiagonal:function(L){return this.solve(S.diag(L))},inverse:function(){var L=this.V,O=this.threshold,G=L.length,Z=L[0].length,W=new S(G,this.s.length),Q,J;for(Q=0;Q<G;Q++)for(J=0;J<Z;J++)W[Q][J]=Math.abs(this.s[J])>O?L[Q][J]/this.s[J]:0;var $=this.U,ee=$.length,te=$[0].length,ae=new S(G,ee),ie,ne;for(Q=0;Q<G;Q++)for(J=0;J<ee;J++){for(ne=0,ie=0;ie<te;ie++)ne+=W[Q][ie]*$[J][ie];ae[Q][J]=ne}return ae}},P.exports=I},{"../matrix":81,"./util":78}],78:[function(_,P,D){"use strict";D.hypotenuse=function(S,C){if(Math.abs(S)>Math.abs(C)){var R=C/S;return Math.abs(S)*Math.sqrt(1+R*R)}if(0!==C){var R=S/C;return Math.abs(C)*Math.sqrt(1+R*R)}return 0},D.getEmpty2DArray=function(I,S){var C=Array(I);for(var R=0;R<I;R++)C[R]=Array(S);return C},D.getFilled2DArray=function(I,S,C){var R=Array(I);for(var E=0;E<I;E++){R[E]=Array(S);for(var T=0;T<S;T++)R[E][T]=C}return R}},{}],79:[function(_,P,D){"use strict";function I(G){return G=C.checkMatrix(G),S(G,C.eye(G.rows))}function S(G,Z){return G=C.checkMatrix(G),Z=C.checkMatrix(Z),G.isSquare()?new T(G).solve(Z):new L(G).solve(Z)}var C=_("./matrix"),R=_("./dc/svd"),E=_("./dc/evd"),T=_("./dc/lu"),L=_("./dc/qr"),O=_("./dc/cholesky");C.inverse=C.inv=I,C.prototype.inverse=C.prototype.inv=function(){return I(this)},C.solve=S,C.prototype.solve=function(G){return S(this,G)},P.exports={SingularValueDecomposition:R,SVD:R,EigenvalueDecomposition:E,EVD:E,LuDecomposition:T,LU:T,QrDecomposition:L,QR:L,CholeskyDecomposition:O,CHO:O,inverse:I,solve:S}},{"./dc/cholesky":73,"./dc/evd":74,"./dc/lu":75,"./dc/qr":76,"./dc/svd":77,"./matrix":81}],80:[function(_,P,D){"use strict";P.exports=_("./matrix"),P.exports.Decompositions=P.exports.DC=_("./decompositions")},{"./decompositions":79,"./matrix":81}],81:[function(_,P,D){"use strict";_("./symbol-species");var I=_("./abstractMatrix"),S=_("./util");class C extends I(Array){constructor(R,E){if(1===arguments.length&&"number"==typeof R)return Array(R);if(C.isMatrix(R))return R.clone();if(Number.isInteger(R)&&0<R){if(super(R),Number.isInteger(E)&&0<E)for(var T=0;T<R;T++)this[T]=Array(E);else throw new TypeError("nColumns must be a positive integer");}else if(Array.isArray(R)){var L=R;if(R=L.length,E=L[0].length,"number"!=typeof E||0===E)throw new TypeError("Data must be a 2D array with at least one element");super(R);for(var T=0;T<R;T++){if(L[T].length!==E)throw new RangeError("Inconsistent array dimensions");this[T]=[].concat(L[T])}}else throw new TypeError("First argument must be a positive number or an array");this.rows=R,this.columns=E}set(R,E,T){return this[R][E]=T,this}get(R,E){return this[R][E]}clone(){var R=new this.constructor[Symbol.species](this.rows,this.columns);for(var E=0;E<this.rows;E++)for(var T=0;T<this.columns;T++)R.set(E,T,this.get(E,T));return R}removeRow(R){if(S.checkRowIndex(this,R),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(R,1),this.rows-=1,this}addRow(R,E){return void 0===E&&(E=R,R=this.rows),S.checkRowIndex(this,R,!0),E=S.checkRowVector(this,E,!0),this.splice(R,0,E),this.rows+=1,this}removeColumn(R){if(S.checkColumnIndex(this,R),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var E=0;E<this.rows;E++)this[E].splice(R,1);return this.columns-=1,this}addColumn(R,E){"undefined"==typeof E&&(E=R,R=this.columns),S.checkColumnIndex(this,R,!0),E=S.checkColumnVector(this,E);for(var T=0;T<this.rows;T++)this[T].splice(R,0,E[T]);return this.columns+=1,this}}P.exports=C,C.abstractMatrix=I},{"./abstractMatrix":72,"./symbol-species":82,"./util":83}],82:[function(_,P,D){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},{}],83:[function(_,P,D){"use strict";D.checkRowIndex=function(S,C,R){var E=R?S.rows:S.rows-1;if(0>C||C>E)throw new RangeError("Row index out of range")},D.checkColumnIndex=function(S,C,R){var E=R?S.columns:S.columns-1;if(0>C||C>E)throw new RangeError("Column index out of range")},D.checkRowVector=function(S,C){if(C.to1DArray&&(C=C.to1DArray()),C.length!==S.columns)throw new RangeError("vector size must be the same as the number of columns");return C},D.checkColumnVector=function(S,C){if(C.to1DArray&&(C=C.to1DArray()),C.length!==S.rows)throw new RangeError("vector size must be the same as the number of rows");return C},D.checkIndices=function(S,C,R){var E=C.some(L=>{return 0>L||L>=S.rows}),T=R.some(L=>{return 0>L||L>=S.columns});if(E||T)throw new RangeError("Indices are out of range");if("object"!=typeof C||"object"!=typeof R)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(C)||(C=Array.from(C)),Array.isArray(R)||(C=Array.from(R)),{row:C,column:R}},D.checkRange=function(S,C,R,E,T){if(5!==arguments.length)throw new TypeError("Invalid argument type");var L=Array.from(arguments).slice(1).some(function(O){return"number"!=typeof O});if(L)throw new TypeError("Invalid argument type");if(C>R||E>T||0>C||C>=S.rows||0>R||R>=S.rows||0>E||E>=S.columns||0>T||T>=S.columns)throw new RangeError("Submatrix indices are out of range")},D.getRange=function(S,C){var R=Array(C-S+1);for(var E=0;E<R.length;E++)R[E]=S+E;return R}},{}],84:[function(_,P,D){"use strict";var I=_("../abstractMatrix"),S;class C extends I(){constructor(R,E,T){super(),this.matrix=R,this.rows=E,this.columns=T}static get[Symbol.species](){return S||(S=_("../matrix")),S}}P.exports=C},{"../abstractMatrix":72,"../matrix":81}],85:[function(_,P,D){"use strict";var I=_("./base");P.exports=class extends I{constructor(C,R){super(C,C.rows,1),this.column=R}set(C,R,E){return this.matrix.set(C,this.column,E),this}get(C,R){return this.matrix.get(C,this.column)}}},{"./base":84}],86:[function(_,P,D){"use strict";var I=_("./base");P.exports=class extends I{constructor(C){super(C,C.rows,C.columns)}set(C,R,E){return this.matrix.set(C,this.columns-R-1,E),this}get(C,R){return this.matrix.get(C,this.columns-R-1)}}},{"./base":84}],87:[function(_,P,D){"use strict";var I=_("./base");P.exports=class extends I{constructor(C){super(C,C.rows,C.columns)}set(C,R,E){return this.matrix.set(this.rows-C-1,R,E),this}get(C,R){return this.matrix.get(this.rows-C-1,R)}}},{"./base":84}],88:[function(_,P,D){"use strict";var I=_("./base");P.exports=class extends I{constructor(C,R){super(C,1,C.columns),this.row=R}set(C,R,E){return this.matrix.set(this.row,R,E),this}get(C,R){return this.matrix.get(this.row,R)}}},{"./base":84}],89:[function(_,P,D){"use strict";var I=_("./base"),S=_("../util");P.exports=class extends I{constructor(R,E,T){var L=S.checkIndices(R,E,T);super(R,L.row.length,L.column.length),this.rowIndices=L.row,this.columnIndices=L.column}set(R,E,T){return this.matrix.set(this.rowIndices[R],this.columnIndices[E],T),this}get(R,E){return this.matrix.get(this.rowIndices[R],this.columnIndices[E])}}},{"../util":83,"./base":84}],90:[function(_,P,D){"use strict";var I=_("./base"),S=_("../util");P.exports=class extends I{constructor(R,E,T,L,O){S.checkRange(R,E,T,L,O),super(R,T-E+1,O-L+1),this.startRow=E,this.startColumn=L}set(R,E,T){return this.matrix.set(this.startRow+R,this.startColumn+E,T),this}get(R,E){return this.matrix.get(this.startRow+R,this.startColumn+E)}}},{"../util":83,"./base":84}],91:[function(_,P,D){"use strict";var I=_("./base");P.exports=class extends I{constructor(C){super(C,C.columns,C.rows)}set(C,R,E){return this.matrix.set(R,C,E),this}get(C,R){return this.matrix.get(R,C)}}},{"./base":84}],92:[function(_,P,D){"use strict";function I(S,C){return S-C}D.sum=function(C){var S=0;for(var R=0;R<C.length;R++)S+=C[R];return S},D.max=function(C){var S=C[0],R=C.length;for(var E=1;E<R;E++)C[E]>S&&(S=C[E]);return S},D.min=function(C){var S=C[0],R=C.length;for(var E=1;E<R;E++)C[E]<S&&(S=C[E]);return S},D.minMax=function(C){var R=C[0],E=C[0],T=C.length;for(var L=1;L<T;L++)C[L]<R&&(R=C[L]),C[L]>E&&(E=C[L]);return{min:R,max:E}},D.arithmeticMean=function(C){var R=0,E=C.length;for(var T=0;T<E;T++)R+=C[T];return R/E},D.mean=D.arithmeticMean,D.geometricMean=function(C){var R=1,E=C.length;for(var T=0;T<E;T++)R*=C[T];return Math.pow(R,1/E)},D.logMean=function(C){var R=0,E=C.length;for(var T=0;T<E;T++)R+=Math.log(C[T]);return R/E},D.grandMean=function(C,R){var E=0,T=0,L=C.length;for(var O=0;O<L;O++)E+=R[O]*C[O],T+=R[O];return E/T},D.truncatedMean=function(C,R,E){E===void 0&&(E=!1),E||(C=[].concat(C).sort(I));var T=C.length,L=Math.floor(T*R),O=0;for(var G=L;G<T-L;G++)O+=C[G];return O/(T-2*L)},D.harmonicMean=function(C){var R=0,E=C.length;for(var T=0;T<E;T++){if(0===C[T])throw new RangeError("value at index "+T+"is zero");R+=1/C[T]}return E/R},D.contraHarmonicMean=function(C){var R=0,E=0,T=C.length;for(var L=0;L<T;L++)R+=C[L]*C[L],E+=C[L];if(0>E)throw new RangeError("sum of values is negative");return R/E},D.median=function(C,R){R===void 0&&(R=!1),R||(C=[].concat(C).sort(I));var E=C.length,T=Math.floor(E/2);return 0==E%2?0.5*(C[T-1]+C[T]):C[T]},D.variance=function(C,R){R===void 0&&(R=!0);var E=D.mean(C),T=0,L=C.length;for(var O=0;O<L;O++){var G=C[O]-E;T+=G*G}return R?T/(L-1):T/L},D.standardDeviation=function(C,R){return Math.sqrt(D.variance(C,R))},D.standardError=function(C){return D.standardDeviation(C)/Math.sqrt(C.length)},D.robustMeanAndStdev=function(C){var R=0,E=0,T=C.length,L=0;for(L=0;L<T;L++)R+=C[L];R/=T;var O=Array(T);for(L=0;L<T;L++)O[L]=Math.abs(C[L]-R);return O.sort(I),E=1==T%2?O[(T-1)/2]/0.6745:0.5*(O[T/2]+O[T/2-1])/0.6745,{mean:R,stdev:E}},D.quartiles=function(C,R){"undefined"==typeof R&&(R=!1),R||(C=[].concat(C).sort(I));var E=C.length/4,T=C[Math.ceil(E)-1],L=D.median(C,!0),O=C[Math.ceil(3*E)-1];return{q1:T,q2:L,q3:O}},D.pooledStandardDeviation=function(C,R){return Math.sqrt(D.pooledVariance(C,R))},D.pooledVariance=function(C,R){"undefined"==typeof R&&(R=!0);var E=0,T=0,L=C.length;for(var O=0;O<L;O++){var G=C[O],Z=D.variance(G);E+=(G.length-1)*Z,T+=R?G.length-1:G.length}return E/T},D.mode=function(C){var R=C.length,E=Array(R),T;for(T=0;T<R;T++)E[T]=0;var L=Array(R),O=0;for(T=0;T<R;T++){var G=L.indexOf(C[T]);0<=G?E[G]++:(L[O]=C[T],E[O]=1,O++)}var Z=0,W=0;for(T=0;T<O;T++)E[T]>Z&&(Z=E[T],W=T);return L[W]},D.covariance=function(C,R,E){"undefined"==typeof E&&(E=!0);var T=D.mean(C),L=D.mean(R);if(C.length!==R.length)throw"Vectors do not have the same dimensions";var O=0,G=C.length;for(var Z=0;Z<G;Z++){var W=C[Z]-T,Q=R[Z]-L;O+=W*Q}return E?O/(G-1):O/G},D.skewness=function(C,R){"undefined"==typeof R&&(R=!0);var E=D.mean(C),T=0,L=0,O=C.length;for(var G=0;G<O;G++){var Z=C[G]-E;T+=Z*Z,L+=Z*Z*Z}var W=T/O,Q=L/O,J=Q/Math.pow(W,3/2);if(R){var $=Math.sqrt(O*(O-1));return $/(O-2)*J}return J},D.kurtosis=function(C,R){"undefined"==typeof R&&(R=!0);var E=D.mean(C),T=C.length,L=0,O=0;for(var G=0;G<T;G++){var Z=C[G]-E;L+=Z*Z,O+=Z*Z*Z*Z}var W=L/T,Q=O/T;if(R){var J=L/(T-1),$=O/(J*J);return T*(T+1)/((T-1)*(T-2)*(T-3))*$-3*((T-1)*(T-1)/((T-2)*(T-3)))}return Q/(W*W)-3},D.entropy=function(C,R){"undefined"==typeof R&&(R=0);var E=0,T=C.length;for(var L=0;L<T;L++)E+=C[L]*Math.log(C[L]+R);return-E},D.weightedMean=function(C,R){var E=0,T=C.length;for(var L=0;L<T;L++)E+=C[L]*R[L];return E},D.weightedStandardDeviation=function(C,R){return Math.sqrt(D.weightedVariance(C,R))},D.weightedVariance=function(C,R){var E=D.weightedMean(C,R),T=0,L=C.length,O=0,G=0;for(var Z=0;Z<L;Z++){var W=C[Z]-E,Q=R[Z];T+=Q*(W*W),G+=Q,O+=Q*Q}return T*(G/(G*G-O))},D.center=function(C,R){"undefined"==typeof R&&(R=!1);var E=C;R||(E=[].concat(C));var T=D.mean(E),L=E.length;for(var O=0;O<L;O++)E[O]-=T},D.standardize=function(C,R,E){"undefined"==typeof R&&(R=D.standardDeviation(C)),"undefined"==typeof E&&(E=!1);var T=C.length,L=E?C:Array(T);for(var O=0;O<T;O++)L[O]=C[O]/R;return L},D.cumulativeSum=function(C){var R=C.length,E=Array(R);E[0]=C[0];for(var T=1;T<R;T++)E[T]=E[T-1]+C[T];return E}},{}],93:[function(_,P,D){"use strict";D.SimpleLinearRegression=D.SLR=_("./regression/simple-linear-regression"),D.NonLinearRegression=D.NLR={PolynomialRegression:_("./regression/polynomial-regression"),PotentialRegression:_("./regression/potential-regression"),ExpRegression:_("./regression/exp-regression"),PowerRegression:_("./regression/power-regression")},D.KernelRidgeRegression=D.KRR=_("./regression/kernel-ridge-regression"),D.PolinomialFitting2D=_("./regression/poly-fit-regression2d"),D.TheilSenRegression=_("./regression/theil-sen-regression")},{"./regression/exp-regression":95,"./regression/kernel-ridge-regression":96,"./regression/poly-fit-regression2d":97,"./regression/polynomial-regression":98,"./regression/potential-regression":99,"./regression/power-regression":100,"./regression/simple-linear-regression":101,"./regression/theil-sen-regression":102}],94:[function(_,P,D){"use strict";P.exports=class{predict(S){var C;if(Array.isArray(S)){C=Array(S.length);for(var R=0;R<S.length;R++)C[R]=this._predict(S[R])}else if(Number.isFinite(S))C=this._predict(S);else throw new TypeError("x must be a number or array");return C}_predict(S){throw new Error("_compute not implemented")}train(S){}toString(S){return""}toLaTeX(S){return""}modelQuality(S,C){var R=S.length,E=Array(R);for(var T=0;T<R;T++)E[T]=this._predict(S[T]);var L=0,O=0,G=0,Z=0,W=0,Q=0,J=0;for(var $=0;$<R;$++)L+=E[$],O+=C[$],W+=E[$]*E[$],Q+=C[$]*C[$],J+=E[$]*C[$],0!==C[$]&&(G+=(C[$]-E[$])*(C[$]-E[$])/C[$]),Z=(C[$]-E[$])*(C[$]-E[$]);var ee=(R*J-L*O)/Math.sqrt((R*W-L*L)*(R*Q-O*O));return{r:ee,r2:ee*ee,chi2:G,rmsd:Z*Z/R}}}},{}],95:[function(_,P,D){"use strict";var I=_("./util").maybeToPrecision,S=_("./simple-linear-regression"),C=_("./base-regression");class R extends C{constructor(E,T,L){if(super(),!0===E)this.A=T.A,this.C=T.C,T.quality&&(this.quality=T.quality);else{var O=E.length;if(O!==T.length)throw new RangeError("input and output array have a different length");var G=Array(O);for(var Z=0;Z<O;Z++)G[Z]=Math.log(T[Z]);var W=new S(E,G,{computeCoefficient:!1});this.A=W.slope,this.C=Math.exp(W.intercept),(L||{}).computeQuality&&(this.quality=this.modelQuality(E,T))}}_predict(E){return this.C*Math.exp(E*this.A)}toJSON(){var E={name:"expRegression",A:this.A,C:this.C};return this.quality&&(E.quality=this.quality),E}toString(E){return"y = "+I(this.C,E)+"*exp("+I(this.A,E)+"*x)"}toLaTeX(E){return 0<=this.A?"y = "+I(this.C,E)+"e^{"+I(this.A,E)+"x}":"y = \\frac{"+I(this.C,E)+"}{e^{"+I(-this.A,E)+"x}}"}static load(E){if("expRegression"!==E.name)throw new TypeError("not a exp regression model");return new R(!0,E)}}P.exports=R},{"./base-regression":94,"./simple-linear-regression":101,"./util":103}],96:[function(_,P,D){"use strict";var I=_("ml-matrix"),S=_("ml-kernel"),C=_("./base-regression"),R={lambda:0.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class E extends C{constructor(T,L,O){if(super(),!0===T)this.alpha=L.alpha,this.inputs=L.inputs,this.kernelType=L.kernelType,this.kernelOptions=L.kernelOptions,this.kernel=new S(L.kernelType,L.kernelOptions),L.quality&&(this.quality=L.quality);else{O=Object.assign({},R,O);var G=new S(O.kernelType,O.kernelOptions),Z=G.compute(T),W=T.length;Z.add(I.eye(W,W).mul(O.lambda)),this.alpha=Z.solve(L),this.inputs=T,this.kernelType=O.kernelType,this.kernelOptions=O.kernelOptions,this.kernel=G,O.computeQuality&&(this.quality=this.modelQuality(T,L))}}_predict(T){return this.kernel.compute([T],this.inputs).mmul(this.alpha)[0]}toJSON(){var T={name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions};return this.quality&&(T.quality=this.quality),T}static load(T){if("kernelRidgeRegression"!==T.name)throw new TypeError("not a KRR model");return new E(!0,T)}}P.exports=E},{"./base-regression":94,"ml-kernel":63,"ml-matrix":80}],97:[function(_,P,D){"use strict";function I(O,G){var Z=O.clone();for(var W=0;W<O.rows;++W)Z[W][0]=Math.pow(Z[W][0],G);return Z}function S(O,G){this[O][G]=Math.abs(this[O][G])}var C=_("ml-matrix"),R=C.DC.SingularValueDecomposition,E=_("./base-regression"),T={order:2};class L extends E{constructor(O,G,Z){super(),!0===O?(this.coefficients=C.columnVector(G.coefficients),this.order=G.order,G.r&&(this.r=G.r,this.r2=G.r2),G.chi2&&(this.chi2=G.chi2)):(Z=Object.assign({},T,Z),this.order=Z.order,this.coefficients=[],this.X=O,this.y=G,this.train(this.X,this.y,Z),Z.computeQuality&&(this.quality=this.modelQuality(O,G)))}train(O,G,Z){if(C.isMatrix(O)||(O=new C(O)),C.isMatrix(G)||(G=C.columnVector(G)),G.rows!==O.rows&&(G=G.transpose()),2!==O.columns)throw new RangeError("You give X with "+O.columns+" columns and it must be 2");if(O.rows!==G.rows)throw new RangeError("X and y must have the same rows");var W=O.rows,Q=(this.order+2)*(this.order+1)/2;this.coefficients=Array(Q);var J=O.getColumnVector(0),$=O.getColumnVector(1),ee=1/J.clone().apply(S).max(),te=1/$.clone().apply(S).max(),ae=1/G.clone().apply(S).max();J.mulColumn(0,ee),$.mulColumn(0,te),G.mulColumn(0,ae);var ie=new C(W,Q),ne=0;for(var le=0;le<=this.order;++le){var oe=this.order-le;for(var se=0;se<=oe;++se){var de=I(J,le).mulColumnVector(I($,se));ie.setColumn(ne,de),ne++}}var he=new R(ie.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),ue=C.rowVector(he.diagonal);ue=ue.apply(function(pe,fe){this[pe][fe]=1e-15<=this[pe][fe]?1/this[pe][fe]:0});var me=C.zeros(W,Q);for(le=0;le<Q;++le)me[le][le]=ue[0][le];ue=me;var ge=he.rightSingularVectors,ce=he.leftSingularVectors;for(this.coefficients=ce.mmul(ue.transpose()).mmul(ge.transpose()).mmul(G),ne=0,le=0;le<=Q;++le)for(oe=this.order-le,se=0;se<=oe;++se)this.coefficients[ne][0]=this.coefficients[ne][0]*Math.pow(ee,le)*Math.pow(te,se)/ae,ne++}_predict(O){var G=O[0],Z=O[1],W=0,Q=0;for(var J=0;J<=this.order;J++)for(var $=0;$<=this.order-J;$++)W+=Math.pow(G,J)*Math.pow(Z,$)*this.coefficients[Q][0],Q++;return W}toJSON(){var O={name:"polyfit2D",order:this.order,coefficients:this.coefficients};return this.quality&&(O.quality=this.quality),O}static load(O){if("polyfit2D"!==O.name)throw new TypeError("not a polyfit2D model");return new L(!0,O)}}P.exports=L},{"./base-regression":94,"ml-matrix":80}],98:[function(_,P,D){"use strict";var I=_("./util").maybeToPrecision,S=_("./base-regression"),C=_("ml-matrix");class R extends S{constructor(E,T,L,O){if(super(),!0===E)this.coefficients=T.coefficients,this.powers=T.powers,this.M=T.M,T.quality&&(this.quality=T.quality);else{var G=E.length;if(G!==T.length)throw new RangeError("input and output array have a different length");var Z=void 0;if(Array.isArray(L))Z=L,L=Z.length;else for(L++,Z=Array(L),J=0;J<L;J++)Z[J]=J;var W=new C(G,L),Q=new C([T]),J,$;for(J=0;J<L;J++)for($=0;$<G;$++)W[$][J]=0===Z[J]?1:Math.pow(E[$],Z[J]);var ee=W.transposeView(),te=ee.mmul(W),ae=ee.mmul(Q.transposeView());this.coefficients=te.solve(ae).to1DArray(),this.powers=Z,this.M=L-1,(O||{}).computeQuality&&(this.quality=this.modelQuality(E,T))}}_predict(E){var T=0;for(var L=0;L<this.powers.length;L++)T+=this.coefficients[L]*Math.pow(E,this.powers[L]);return T}toJSON(){var E={name:"polynomialRegression",coefficients:this.coefficients,powers:this.powers,M:this.M};return this.quality&&(E.quality=this.quality),E}toString(E){return this._toFormula(E,!1)}toLaTeX(E){return this._toFormula(E,!0)}_toFormula(E,T){var L="^",O="",G="*";T&&(L="^{",O="}",G="");var Z="",W;for(var Q=0;Q<this.coefficients.length;Q++)W="",0!==this.coefficients[Q]&&(W=0===this.powers[Q]?I(this.coefficients[Q],E):1===this.powers[Q]?I(this.coefficients[Q],E)+G+"x":I(this.coefficients[Q],E)+G+"x"+L+this.powers[Q]+O,0<this.coefficients[Q]&&(W="+"+W)),Z=W+Z;return"+"===Z.charAt(0)&&(Z=Z.slice(1)),"y = "+Z}static load(E){if("polynomialRegression"!==E.name)throw new TypeError("not a polynomial regression model");return new R(!0,E)}}P.exports=R},{"./base-regression":94,"./util":103,"ml-matrix":80}],99:[function(_,P,D){"use strict";var I=_("./util").maybeToPrecision,S=_("./polynomial-regression"),C=_("./power-regression"),R=_("./base-regression");P.exports=class extends R{constructor(T,L,O,G){if(super(),!0===T)this.A=L.A,this.M=L.M,L.quality&&(this.quality=L.quality);else{var Z=T.length;if(Z!==L.length)throw new RangeError("input and output array have a different length");var W=new S(T,L,[O],{computeCoefficient:!0});this.A=W.coefficients[0],this.M=O,(G||{}).computeQuality&&(this.quality=this.modelQuality(T,L))}}_predict(T){return this.A*Math.pow(T,this.M)}toJSON(){var T={name:"potentialRegression",A:this.A,M:this.M};return this.quality&&(T.quality=this.quality),T}toString(T){return"y = "+I(this.A,T)+"*x^"+this.M}toLaTeX(T){return 0<=this.M?"y = "+I(this.A,T)+"x^{"+this.M+"}":"y = \\frac{"+I(this.A,T)+"}{x^{"+-this.M+"}}"}static load(T){if("potentialRegression"!==T.name)throw new TypeError("not a potential regression model");return new C(!0,T)}}},{"./base-regression":94,"./polynomial-regression":98,"./power-regression":100,"./util":103}],100:[function(_,P,D){"use strict";var I=_("./util").maybeToPrecision,S=_("./simple-linear-regression"),C=_("./base-regression");class R extends C{constructor(E,T,L){if(super(),!0===E)this.A=T.A,this.B=T.B,this.quality=T.quality||{},T.quality.r&&(this.quality.r=T.quality.r,this.quality.r2=T.quality.r2),T.quality.chi2&&(this.quality.chi2=T.quality.chi2);else{var O=E.length;if(O!==T.length)throw new RangeError("input and output array have a different length");var G=Array(O),Z=Array(O);for(var W=0;W<O;W++)G[W]=Math.log(E[W]),Z[W]=Math.log(T[W]);var Q=new S(G,Z,{computeCoefficient:!1});this.A=Math.exp(Q.intercept),this.B=Q.slope,(L||{}).computeQuality&&(this.quality=this.modelQuality(E,T))}}_predict(E){return this.A*Math.pow(E,this.B)}toJSON(){var E={name:"powerRegression",A:this.A,B:this.B};return this.quality&&(E.quality=this.quality),E}toString(E){return"y = "+I(this.A,E)+"*x^"+I(this.B,E)}toLaTeX(E){return 0<=this.B?"y = "+I(this.A,E)+"x^{"+I(this.B,E)+"}":"y = \\frac{"+I(this.A,E)+"}{x^{"+I(-this.B,E)+"}}"}static load(E){if("powerRegression"!==E.name)throw new TypeError("not a power regression model");return new R(!0,E)}}P.exports=R},{"./base-regression":94,"./simple-linear-regression":101,"./util":103}],101:[function(_,P,D){"use strict";var I=_("./util").maybeToPrecision,S=_("./base-regression");class C extends S{constructor(R,E,T){if(T=T||{},super(),!0===R)this.slope=E.slope,this.intercept=E.intercept,this.quality=E.quality||{},E.quality.r&&(this.quality.r=E.quality.r,this.quality.r2=E.quality.r2),E.quality.chi2&&(this.quality.chi2=E.quality.chi2);else{var L=R.length;if(L!==E.length)throw new RangeError("input and output array have a different length");var O=0,G=0,Z=0,W=0;for(var Q=0;Q<L;Q++)O+=R[Q],G+=E[Q],Z+=R[Q]*R[Q],E[Q]*E[Q],W+=R[Q]*E[Q];var J=L*W-O*G;this.slope=J/(L*Z-O*O),this.intercept=1/L*G-this.slope*(1/L)*O,this.coefficients=[this.intercept,this.slope],T.computeQuality&&(this.quality=this.modelQuality(R,E))}}toJSON(){var R={name:"simpleLinearRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(R.quality=this.quality),R}_predict(R){return this.slope*R+this.intercept}computeX(R){return(R-this.intercept)/this.slope}toString(R){var E="y = ";if(this.slope){var T=I(this.slope,R);if(E+=(1==T?"":T)+"x",this.intercept){var L=Math.abs(this.intercept),O=L===this.intercept?"+":"-";E+=" "+O+" "+I(L,R)}}else E+=I(this.intercept,R);return E}toLaTeX(R){return this.toString(R)}static load(R){if("simpleLinearRegression"!==R.name)throw new TypeError("not a SLR model");return new C(!0,R)}}P.exports=C},{"./base-regression":94,"./util":103}],102:[function(_,P,D){"use strict";var I=_("./base-regression"),S=_("./util").maybeToPrecision,C=_("ml-stat/array").median;class R extends I{constructor(E,T,L){if(L=L||{},super(),!0===E)this.slope=T.slope,this.intercept=T.intercept,this.quality=T.quality||{},T.quality.r&&(this.quality.r=T.quality.r,this.quality.r2=T.quality.r2),T.quality.chi2&&(this.quality.chi2=T.quality.chi2);else{var O=E.length;if(O!==T.length)throw new RangeError("Input and output array have a different length");var G=Array(O*O),Z=0;for(var W=0;W<O;++W)for(var Q=W+1;Q<O;++Q)E[W]!==E[Q]&&(G[Z++]=(T[Q]-T[W])/(E[Q]-E[W]));G.length=Z;var J=C(G),$=Array(O);for(var ee=0;ee<O;++ee)$[ee]=T[ee]-J*E[ee];this.slope=J,this.intercept=C($),this.coefficients=[this.intercept,this.slope],L.computeQuality&&(this.quality=this.modelQuality(E,T))}}toJSON(){var E={name:"TheilSenRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(E.quality=this.quality),E}_predict(E){return this.slope*E+this.intercept}computeX(E){return(E-this.intercept)/this.slope}toString(E){var T="y = ";if(this.slope){var L=S(this.slope,E);if(T+=(0.00001>Math.abs(L-1)?"":L)+"x",this.intercept){var O=Math.abs(this.intercept),G=O===this.intercept?"+":"-";T+=" "+G+" "+S(O,E)}}else T+=S(this.intercept,E);return T}toLaTeX(E){return this.toString(E)}static load(E){if("TheilSenRegression"!==E.name)throw new TypeError("not a Theil-Sen model");return new R(!0,E)}}P.exports=R},{"./base-regression":94,"./util":103,"ml-stat/array":92}],103:[function(_,P,D){"use strict";D.maybeToPrecision=function(S,C){return C?S.toPrecision(C):S.toString()}},{}],104:[function(_,P,D){"use strict";function I(S,C){return S-C}D.sum=function(C){var S=0;for(var R=0;R<C.length;R++)S+=C[R];return S},D.max=function(C){var S=C[0],R=C.length;for(var E=1;E<R;E++)C[E]>S&&(S=C[E]);return S},D.min=function(C){var S=C[0],R=C.length;for(var E=1;E<R;E++)C[E]<S&&(S=C[E]);return S},D.minMax=function(C){var R=C[0],E=C[0],T=C.length;for(var L=1;L<T;L++)C[L]<R&&(R=C[L]),C[L]>E&&(E=C[L]);return{min:R,max:E}},D.arithmeticMean=function(C){var R=0,E=C.length;for(var T=0;T<E;T++)R+=C[T];return R/E},D.mean=D.arithmeticMean,D.geometricMean=function(C){var R=1,E=C.length;for(var T=0;T<E;T++)R*=C[T];return Math.pow(R,1/E)},D.logMean=function(C){var R=0,E=C.length;for(var T=0;T<E;T++)R+=Math.log(C[T]);return R/E},D.grandMean=function(C,R){var E=0,T=0,L=C.length;for(var O=0;O<L;O++)E+=R[O]*C[O],T+=R[O];return E/T},D.truncatedMean=function(C,R,E){E===void 0&&(E=!1),E||(C=[].concat(C).sort(I));var T=C.length,L=Math.floor(T*R),O=0;for(var G=L;G<T-L;G++)O+=C[G];return O/(T-2*L)},D.harmonicMean=function(C){var R=0,E=C.length;for(var T=0;T<E;T++){if(0===C[T])throw new RangeError("value at index "+T+"is zero");R+=1/C[T]}return E/R},D.contraHarmonicMean=function(C){var R=0,E=0,T=C.length;for(var L=0;L<T;L++)R+=C[L]*C[L],E+=C[L];if(0>E)throw new RangeError("sum of values is negative");return R/E},D.median=function(C,R){R===void 0&&(R=!1),R||(C=[].concat(C).sort(I));var E=C.length,T=Math.floor(E/2);return 0==E%2?0.5*(C[T-1]+C[T]):C[T]},D.variance=function(C,R){R===void 0&&(R=!0);var E=D.mean(C),T=0,L=C.length;for(var O=0;O<L;O++){var G=C[O]-E;T+=G*G}return R?T/(L-1):T/L},D.standardDeviation=function(C,R){return Math.sqrt(D.variance(C,R))},D.standardError=function(C){return D.standardDeviation(C)/Math.sqrt(C.length)},D.robustMeanAndStdev=function(C){var R=0,E=0,T=C.length,L=0;for(L=0;L<T;L++)R+=C[L];R/=T;var O=Array(T);for(L=0;L<T;L++)O[L]=Math.abs(C[L]-R);return O.sort(I),E=1==T%2?O[(T-1)/2]/0.6745:0.5*(O[T/2]+O[T/2-1])/0.6745,{mean:R,stdev:E}},D.quartiles=function(C,R){"undefined"==typeof R&&(R=!1),R||(C=[].concat(C).sort(I));var E=C.length/4,T=C[Math.ceil(E)-1],L=D.median(C,!0),O=C[Math.ceil(3*E)-1];return{q1:T,q2:L,q3:O}},D.pooledStandardDeviation=function(C,R){return Math.sqrt(D.pooledVariance(C,R))},D.pooledVariance=function(C,R){"undefined"==typeof R&&(R=!0);var E=0,T=0,L=C.length;for(var O=0;O<L;O++){var G=C[O],Z=D.variance(G);E+=(G.length-1)*Z,T+=R?G.length-1:G.length}return E/T},D.mode=function(C){var R=C.length,E=Array(R),T;for(T=0;T<R;T++)E[T]=0;var L=Array(R),O=0;for(T=0;T<R;T++){var G=L.indexOf(C[T]);0<=G?E[G]++:(L[O]=C[T],E[O]=1,O++)}var Z=0,W=0;for(T=0;T<O;T++)E[T]>Z&&(Z=E[T],W=T);return L[W]},D.covariance=function(C,R,E){"undefined"==typeof E&&(E=!0);var T=D.mean(C),L=D.mean(R);if(C.length!==R.length)throw"Vectors do not have the same dimensions";var O=0,G=C.length;for(var Z=0;Z<G;Z++){var W=C[Z]-T,Q=R[Z]-L;O+=W*Q}return E?O/(G-1):O/G},D.skewness=function(C,R){"undefined"==typeof R&&(R=!0);var E=D.mean(C),T=0,L=0,O=C.length;for(var G=0;G<O;G++){var Z=C[G]-E;T+=Z*Z,L+=Z*Z*Z}var W=T/O,Q=L/O,J=Q/Math.pow(W,3/2);if(R){var $=Math.sqrt(O*(O-1));return $/(O-2)*J}return J},D.kurtosis=function(C,R){"undefined"==typeof R&&(R=!0);var E=D.mean(C),T=C.length,L=0,O=0;for(var G=0;G<T;G++){var Z=C[G]-E;L+=Z*Z,O+=Z*Z*Z*Z}var W=L/T,Q=O/T;if(R){var J=L/(T-1),$=O/(J*J);return T*(T+1)/((T-1)*(T-2)*(T-3))*$-3*((T-1)*(T-1)/((T-2)*(T-3)))}return Q/(W*W)-3},D.entropy=function(C,R){"undefined"==typeof R&&(R=0);var E=0,T=C.length;for(var L=0;L<T;L++)E+=C[L]*Math.log(C[L]+R);return-E},D.weightedMean=function(C,R){var E=0,T=C.length;for(var L=0;L<T;L++)E+=C[L]*R[L];return E},D.weightedStandardDeviation=function(C,R){return Math.sqrt(D.weightedVariance(C,R))},D.weightedVariance=function(C,R){var E=D.weightedMean(C,R),T=0,L=C.length,O=0,G=0;for(var Z=0;Z<L;Z++){var W=C[Z]-E,Q=R[Z];T+=Q*(W*W),G+=Q,O+=Q*Q}return T*(G/(G*G-O))},D.center=function(C,R){"undefined"==typeof R&&(R=!1);var E=C;R||(E=[].concat(C));var T=D.mean(E),L=E.length;for(var O=0;O<L;O++)E[O]-=T},D.standardize=function(C,R,E){"undefined"==typeof R&&(R=D.standardDeviation(C)),"undefined"==typeof E&&(E=!1);var T=C.length,L=E?C:Array(T);for(var O=0;O<T;O++)L[O]=C[O]/R;return L},D.cumulativeSum=function(C){var R=C.length,E=Array(R);E[0]=C[0];for(var T=1;T<R;T++)E[T]=E[T-1]+C[T];return E}},{}],105:[function(_,P,D){"use strict";D.array=_("./array"),D.matrix=_("./matrix")},{"./array":104,"./matrix":106}],106:[function(_,P,D){"use strict";function I(C,R){return C-R}var S=_("./array");D.max=function(R){var C=-(1/0);for(var E=0;E<R.length;E++)for(var T=0;T<R[E].length;T++)R[E][T]>C&&(C=R[E][T]);return C},D.min=function(R){var C=1/0;for(var E=0;E<R.length;E++)for(var T=0;T<R[E].length;T++)R[E][T]<C&&(C=R[E][T]);return C},D.minMax=function(R){var E=1/0,T=-(1/0);for(var L=0;L<R.length;L++)for(var O=0;O<R[L].length;O++)R[L][O]<E&&(E=R[L][O]),R[L][O]>T&&(T=R[L][O]);return{min:E,max:T}},D.entropy=function(R,E){"undefined"==typeof E&&(E=0);var T=0,L=R.length,O=R[0].length;for(var G=0;G<L;G++)for(var Z=0;Z<O;Z++)T+=R[G][Z]*Math.log(R[G][Z]+E);return-T},D.mean=function(R,E){"undefined"==typeof E&&(E=0);var T=R.length,L=R[0].length,O,G,Z,W;if(-1===E){for(O=[0],G=T*L,Z=0;Z<T;Z++)for(W=0;W<L;W++)O[0]+=R[Z][W];O[0]/=G}else if(0===E)for(O=Array(L),G=T,W=0;W<L;W++){for(O[W]=0,Z=0;Z<T;Z++)O[W]+=R[Z][W];O[W]/=G}else if(1===E)for(O=Array(T),G=L,W=0;W<T;W++){for(O[W]=0,Z=0;Z<L;Z++)O[W]+=R[W][Z];O[W]/=G}else throw new Error("Invalid dimension");return O},D.sum=function(R,E){"undefined"==typeof E&&(E=0);var T=R.length,L=R[0].length,O,G,Z;if(-1===E)for(O=[0],G=0;G<T;G++)for(Z=0;Z<L;Z++)O[0]+=R[G][Z];else if(0===E)for(O=Array(L),Z=0;Z<L;Z++)for(O[Z]=0,G=0;G<T;G++)O[Z]+=R[G][Z];else if(1===E)for(O=Array(T),Z=0;Z<T;Z++)for(O[Z]=0,G=0;G<L;G++)O[Z]+=R[Z][G];else throw new Error("Invalid dimension");return O},D.product=function(R,E){"undefined"==typeof E&&(E=0);var T=R.length,L=R[0].length,O,G,Z;if(-1===E)for(O=[1],G=0;G<T;G++)for(Z=0;Z<L;Z++)O[0]*=R[G][Z];else if(0===E)for(O=Array(L),Z=0;Z<L;Z++)for(O[Z]=1,G=0;G<T;G++)O[Z]*=R[G][Z];else if(1===E)for(O=Array(T),Z=0;Z<T;Z++)for(O[Z]=1,G=0;G<L;G++)O[Z]*=R[Z][G];else throw new Error("Invalid dimension");return O},D.standardDeviation=function(R,E,T){var L=D.variance(R,E,T),O=L.length;for(var G=0;G<O;G++)L[G]=Math.sqrt(L[G]);return L},D.variance=function(R,E,T){"undefined"==typeof T&&(T=!0),E=E||D.mean(R);var L=R.length;if(0===L)return[];var O=R[0].length,G=Array(O);for(var Z=0;Z<O;Z++){var W=0,Q=0,J=0;for(var $=0;$<L;$++)J=R[$][Z]-E[Z],W+=J,Q+=J*J;G[Z]=T?(Q-W*W/L)/(L-1):(Q-W*W/L)/L}return G},D.median=function(R){var E=R.length,T=R[0].length,L=Array(T);for(var O=0;O<T;O++){var G=Array(E);for(var Z=0;Z<E;Z++)G[Z]=R[Z][O];G.sort(I);var W=G.length;L[O]=0==W%2?0.5*(G[W/2]+G[W/2-1]):G[Math.floor(W/2)]}return L},D.mode=function(R){var E=R.length,T=R[0].length,L=Array(T),O,G;for(O=0;O<T;O++){var Z=Array(E);for(var W=0;W<E;W++)Z[W]=0;var Q=Array(E),J=0;for(G=0;G<E;G++){var $=Q.indexOf(R[G][O]);0<=$?Z[$]++:(Q[J]=R[G][O],Z[J]=1,J++)}var ee=0,te=0;for(G=0;G<J;G++)Z[G]>ee&&(ee=Z[G],te=G);L[O]=Q[te]}return L},D.skewness=function(R,E){"undefined"==typeof E&&(E=!0);var T=D.mean(R),L=R.length,O=T.length,G=Array(O);for(var Z=0;Z<O;Z++){var W=0,Q=0;for(var J=0;J<L;J++){var $=R[J][Z]-T[Z];W+=$*$,Q+=$*$*$}var ee=W/L,te=Q/L,ae=te/Math.pow(ee,3/2);if(E){var ie=Math.sqrt(L*(L-1));G[Z]=ie/(L-2)*ae}else G[Z]=ae}return G},D.kurtosis=function(R,E){"undefined"==typeof E&&(E=!0);var T=D.mean(R),L=R.length,O=R[0].length,G=Array(O);for(var Z=0;Z<O;Z++){var W=0,Q=0;for(var J=0;J<L;J++){var $=R[J][Z]-T[Z];W+=$*$,Q+=$*$*$*$}var ee=W/L,te=Q/L;if(E){var ae=W/(L-1),ie=Q/(ae*ae);G[Z]=L*(L+1)/((L-1)*(L-2)*(L-3))*ie-3*((L-1)*(L-1)/((L-2)*(L-3)))}else G[Z]=te/(ee*ee)-3}return G},D.standardError=function(R){var E=R.length,T=D.standardDeviation(R),L=T.length,O=Array(L),G=Math.sqrt(E);for(var Z=0;Z<L;Z++)O[Z]=T[Z]/G;return O},D.covariance=function(R,E){return D.scatter(R,void 0,E)},D.scatter=function(R,E,T){"undefined"==typeof T&&(T=0),"undefined"==typeof E&&(0===T?E=R.length-1:1==T&&(E=R[0].length-1));var L=D.mean(R,T),O=R.length;if(0===O)return[[]];var G=R[0].length,Z,W,Q,J,$;if(0===T){for(Z=Array(G),W=0;W<G;W++)Z[W]=Array(G);for(W=0;W<G;W++)for(Q=W;Q<G;Q++){for(J=0,$=0;$<O;$++)J+=(R[$][Q]-L[Q])*(R[$][W]-L[W]);J/=E,Z[W][Q]=J,Z[Q][W]=J}}else if(1===T){for(Z=Array(O),W=0;W<O;W++)Z[W]=Array(O);for(W=0;W<O;W++)for(Q=W;Q<O;Q++){for(J=0,$=0;$<G;$++)J+=(R[Q][$]-L[Q])*(R[W][$]-L[W]);J/=E,Z[W][Q]=J,Z[Q][W]=J}}else throw new Error("Invalid dimension");return Z},D.correlation=function(R){var E=D.mean(R),T=D.standardDeviation(R,!0,E),L=D.zScores(R,E,T),O=R.length,G=R[0].length,Z,W,Q=Array(G);for(Z=0;Z<G;Z++)Q[Z]=Array(G);for(Z=0;Z<G;Z++)for(W=Z;W<G;W++){var J=0;for(var $=0,ee=L.length;$<ee;$++)J+=L[$][W]*L[$][Z];J/=O-1,Q[Z][W]=J,Q[W][Z]=J}return Q},D.zScores=function(R,E,T){return E=E||D.mean(R),"undefined"==typeof T&&(T=D.standardDeviation(R,!0,E)),D.standardize(D.center(R,E,!1),T,!0)},D.center=function(R,E,T){E=E||D.mean(R);var L=R,O=R.length,G,Z,W;if(!T)for(L=Array(O),G=0;G<O;G++)L[G]=Array(R[G].length);for(G=0;G<O;G++){var Q=L[G];for(Z=0,W=Q.length;Z<W;Z++)Q[Z]=R[G][Z]-E[Z]}return L},D.standardize=function(R,E,T){"undefined"==typeof E&&(E=D.standardDeviation(R));var L=R,O=R.length,G,Z,W;if(!T)for(L=Array(O),G=0;G<O;G++)L[G]=Array(R[G].length);for(G=0;G<O;G++){var Q=L[G],J=R[G];for(Z=0,W=Q.length;Z<W;Z++)0===E[Z]||isNaN(E[Z])||(Q[Z]=J[Z]/E[Z])}return L},D.weightedVariance=function(R,E){var T=D.mean(R),L=R.length;if(0===L)return[];var O=R[0].length,G=Array(O);for(var Z=0;Z<O;Z++){var W=0,Q=0,J=0;for(var $=0;$<L;$++){var ee=R[$][Z]-T[Z],te=E[$];W+=te*(ee*ee),J+=te,Q+=te*te}G[Z]=W*(J/(J*J-Q))}return G},D.weightedMean=function(R,E,T){"undefined"==typeof T&&(T=0);var L=R.length;if(0===L)return[];var O=R[0].length,G,Z,W,Q,J,$;if(0===T){for(G=Array(O),Z=0;Z<O;Z++)G[Z]=0;for(Z=0;Z<L;Z++)for($=R[Z],J=E[Z],Q=0;Q<O;Q++)G[Q]+=$[Q]*J}else if(1===T){for(G=Array(L),Z=0;Z<L;Z++)G[Z]=0;for(Q=0;Q<L;Q++)for($=R[Q],J=E[Q],Z=0;Z<O;Z++)G[Q]+=$[Z]*J}else throw new Error("Invalid dimension");var ee=S.sum(E);if(0!==ee)for(Z=0,W=G.length;Z<W;Z++)G[Z]/=ee;return G},D.weightedCovariance=function(R,E,T,L){L=L,T=T||D.weightedMean(R,E,L);var O=0,G=0;for(var Z=0,W=E.length;Z<W;Z++)O+=E[Z],G+=E[Z]*E[Z];var Q=O/(O*O-G);return D.weightedScatter(R,E,T,Q,L)},D.weightedScatter=function(R,E,T,L,O){O=O,T=T||D.weightedMean(R,E,O),"undefined"==typeof L&&(L=1);var G=R.length;if(0===G)return[[]];var Z=R[0].length,W,Q,J,$,ee;if(0===O){for(W=Array(Z),Q=0;Q<Z;Q++)W[Q]=Array(Z);for(Q=0;Q<Z;Q++)for(J=Q;J<Z;J++){for(ee=0,$=0;$<G;$++)ee+=E[$]*(R[$][J]-T[J])*(R[$][Q]-T[Q]);W[Q][J]=ee*L,W[J][Q]=ee*L}}else if(1===O){for(W=Array(G),Q=0;Q<G;Q++)W[Q]=Array(G);for(Q=0;Q<G;Q++)for(J=Q;J<G;J++){for(ee=0,$=0;$<Z;$++)ee+=E[$]*(R[J][$]-T[J])*(R[Q][$]-T[Q]);W[Q][J]=ee*L,W[J][Q]=ee*L}}else throw new Error("Invalid dimension");return W}},{"./array":104}],107:[function(_,P,D){"use strict";P.exports="function"==typeof Promise?Promise:_("lie")},{lie:49}],108:[function(_,P,D){"use strict";P.exports=function(S,C){S=S;var R=Array(S);for(var E=0;E<S;E++)R[E]=C;return R}},{}],109:[function(_,P,D){"use strict";P.exports=Number.isNaN||function(I){return I!==I}},{}],110:[function(_,P,D){"use strict";P.exports=function(I,S,C){if(C="number"==typeof C?C:0,"string"!=typeof I)throw new TypeError("Expected a string");return-1!==I.indexOf(S,C)}},{}],111:[function(_,P,D){arguments[4][20][0].apply(D,arguments)},{dup:20}],112:[function(_,P,D){"use strict";var I=_("./tiffDecoder");P.exports=function(C,R){var E=new I(C,R);return E.decode(R)}},{"./tiffDecoder":119}],113:[function(_,P,D){"use strict";var I={standard:_("./tags/standard"),exif:_("./tags/exif"),gps:_("./tags/gps")};class S{constructor(C){if(!C)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=C,this._map=null}get(C){if("number"==typeof C)return this.fields.get(C);return"string"==typeof C?this.fields.get(I[this.kind].tagsByName[C]):void 0}get map(){if(!this._map){this._map={};var C=I[this.kind].tagsById;for(var R of this.fields.keys())C[R]&&(this._map[C[R]]=this.fields.get(R))}return this._map}}P.exports=S},{"./tags/exif":116,"./tags/gps":117,"./tags/standard":118}],114:[function(_,P,D){"use strict";function I(C,R){if(1===R)return C.readUint8();var E=new Uint8Array(R);for(var T=0;T<R;T++)E[T]=C.readUint8();return E}var S=new Map([[1,[1,I]],[2,[1,function(R,E){var T=[],L="";for(var O=0;O<E;O++){var G=String.fromCharCode(R.readUint8());"\u0000"===G?(T.push(L),L=""):L+=G}return 1===T.length?T[0]:T}]],[3,[2,function(R,E){if(1===E)return R.readUint16();var T=new Uint16Array(E);for(var L=0;L<E;L++)T[L]=R.readUint16();return T}]],[4,[4,function(R,E){if(1===E)return R.readUint32();var T=new Uint32Array(E);for(var L=0;L<E;L++)T[L]=R.readUint32();return T}]],[5,[8,function(R,E){if(1===E)return R.readUint32()/R.readUint32();var T=Array(E);for(var L=0;L<E;L++)T[L]=R.readUint32()/R.readUint32();return T}]],[6,[1,function(R,E){if(1===E)return R.readInt8();var T=new Int8Array(E);for(var L=0;L<E;L++)T[L]=R.readInt8();return T}]],[7,[1,I]],[8,[2,function(R,E){if(1===E)return R.readInt16();var T=new Int16Array(E);for(var L=0;L<E;L++)T[L]=R.readInt16();return T}]],[9,[4,function(R,E){if(1===E)return R.readInt32();var T=new Int32Array(E);for(var L=0;L<E;L++)T[L]=R.readInt32();return T}]],[10,[8,function(R,E){if(1===E)return R.readInt32()/R.readInt32();var T=Array(E);for(var L=0;L<E;L++)T[L]=R.readInt32()/R.readInt32();return T}]],[11,[4,function(R,E){if(1===E)return R.readFloat32();var T=new Float32Array(E);for(var L=0;L<E;L++)T[L]=R.readFloat32();return T}]],[12,[8,function(R,E){if(1===E)return R.readFloat64();var T=new Float64Array(E);for(var L=0;L<E;L++)T[L]=R.readFloat64();return T}]]]);D.getByteLength=function(C,R){return S.get(C)[0]*R},D.readData=function(C,R,E){return S.get(R)[1](C,E)}},{}],115:[function(_,P,D){arguments[4][22][0].apply(D,arguments)},{"./decode":112,dup:22}],116:[function(_,P,D){"use strict";var I={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},S={};for(var C in I)S[I[C]]=C;P.exports={tagsById:I,tagsByName:S}},{}],117:[function(_,P,D){"use strict";var I={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},S={};for(var C in I)S[I[C]]=C;P.exports={tagsById:I,tagsByName:S}},{}],118:[function(_,P,D){"use strict";var I={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},S={};for(var C in I)S[I[C]]=C;P.exports={tagsById:I,tagsByName:S}},{}],119:[function(_,P,D){"use strict";function I(W,Q,J,$){if(8===J)return new Uint8Array(W*Q);return 16===J?new Uint16Array(W*Q):32===J&&3===$?new Float32Array(W*Q):void E("bit depth / sample format",J+" / "+$)}function S(W,Q,J,$){for(var ee=0;ee<$;ee++)W[J++]=Q.getUint8(ee);return J}function C(W,Q,J,$,ee){for(var te=0;te<2*$;te+=2)W[J++]=Q.getUint16(te,ee);return J}function R(W,Q,J,$,ee){for(var te=0;te<4*$;te+=4)W[J++]=Q.getFloat32(te,ee);return J}function E(W,Q){throw new Error("Unsupported "+W+": "+Q)}var T=_("iobuffer"),L=_("./ifd"),O=_("./tiffIfd"),G=_("./ifdValue"),Z={ignoreImageData:!1,onlyFirst:!1};P.exports=class extends T{constructor(Q,J){super(Q,J),this._nextIFD=0}decode(Q){Q=Object.assign({},Z,Q);var J=[];for(this.decodeHeader();this._nextIFD;)if(J.push(this.decodeIFD(Q)),Q.onlyFirst)return J[0];return J}decodeHeader(){var Q=this.readUint16();if(18761===Q)this.setLittleEndian();else if(19789===Q)this.setBigEndian();else throw new Error("invalid byte order: 0x"+Q.toString(16));if(Q=this.readUint16(),42!==Q)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(Q){this.seek(this._nextIFD);var J;J=Q.kind?new L(Q.kind):new O;var $=this.readUint16();for(var ee=0;ee<$;ee++)this.decodeIFDEntry(J);return Q.ignoreImageData||this.decodeImageData(J),this._nextIFD=this.readUint32(),J}decodeIFDEntry(Q){var J=this.offset,$=this.readUint16(),ee=this.readUint16(),te=this.readUint32();if(1>ee||12<ee)return void this.skip(4);var ae=G.getByteLength(ee,te);4<ae&&this.seek(this.readUint32());var ie=G.readData(this,ee,te);if(Q.fields.set($,ie),34665===$||34853===$){var ne=this.offset,le=void 0;34665===$?le="exif":34853===$&&(le="gps"),this._nextIFD=ie,Q[le]=this.decodeIFD({kind:le,ignoreImageData:!0}),this.offset=ne}this.seek(J),this.skip(12)}decodeImageData(Q){var J=Q.orientation;switch(J&&1!==J&&E("orientation",J),Q.type){case 1:this.decodeBilevelOrGrey(Q);break;default:E("image type",Q.type);}}decodeBilevelOrGrey(Q){var J=Q.width,$=Q.height,ee=Q.bitsPerSample,te=Q.sampleFormat,ae=J*$,ie=I(ae,1,ee,te),ne=Q.compression,le=Q.rowsPerStrip,oe=le*J,se=Q.stripOffsets,de=Q.stripByteCounts,he=0;for(var ue=0;ue<se.length;ue++){var me=this.getStripData(ne,se[ue],de[ue]),ge=ae>oe?oe:ae;ae-=ge,8===ee?he=S(ie,me,he,ge):16===ee?he=C(ie,me,he,ge,this.isLittleEndian()):32===ee&&3===te?he=R(ie,me,he,ge,this.isLittleEndian()):E("bitDepth",ee)}Q.data=ie}getStripData(Q,J,$){switch(Q){case 1:return new DataView(this.buffer,J,$);break;case 2:case 32773:E("Compression",Q);break;default:throw new Error("invalid compression: "+Q);}}}},{"./ifd":113,"./ifdValue":114,"./tiffIfd":120,iobuffer:111}],120:[function(_,P,D){"use strict";function I(E){return"number"==typeof E?[E]:E}var S=_("./ifd"),C=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class R extends S{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var E=new Date,T=C.exec(this.dateTime);return E.setFullYear(T[1],T[2]-1,T[3]),E.setHours(T[4],T[5],T[6]),E}get newSubfileType(){return this.fields.get(254)}get imageWidth(){return this.fields.get(256)}get imageLength(){return this.fields.get(257)}get bitsPerSample(){return this.fields.get(258)}get compression(){return this.fields.get(259)||1}get type(){return this.fields.get(262)}get fillOrder(){return this.fields.get(266)||1}get documentName(){return this.fields.get(269)}get imageDescription(){return this.fields.get(270)}get stripOffsets(){return I(this.fields.get(273))}get orientation(){return this.fields.get(274)}get samplesPerPixel(){return this.fields.get(277)}get rowsPerStrip(){return this.fields.get(278)}get stripByteCounts(){return I(this.fields.get(279))}get minSampleValue(){return this.fields.get(280)}get maxSampleValue(){return this.fields.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.fields.get(282)}get yResolution(){return this.fields.get(283)}get planarConfiguration(){return this.fields.get(284)||1}get resolutionUnit(){return this.fields.get(296)||2}get dateTime(){return this.fields.get(306)}get predictor(){return this.fields.get(317)||1}get sampleFormat(){return this.fields.get(339)||1}get sMinSampleValue(){return this.fields.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.fields.get(341)||this.maxSampleValue}}P.exports=R},{"./ifd":113}],121:[function(_,P,D){"use strict";function I(R,E){if("string"!=typeof R&&"function"!=typeof R)throw new TypeError("func argument must be a function");if(void 0===E&&(E={}),"object"!=typeof E||null===E)throw new TypeError("options argument must be an object");this._workerCode=R.toString(),this._numWorkers=void 0===E.maxWorkers||"auto"===E.maxWorkers?Math.min(C-1,1):0<E.maxWorkers?Math.min(E.maxWorkers,C):C,this._workers=new Map,this._timeout=E.timeout,this._terminateOnError=!!E.terminateOnError;var T=E.deps;"string"==typeof T&&(T=[T]),Array.isArray(T)||(T=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(T)}var S=_("./workerTemplate"),C=navigator.hardwareConcurrency||1;Function.prototype,I.prototype._init=function(R){var E=S.newWorkerURL(this._workerCode,R);for(var T=0;T<this._numWorkers;T++){var L=new Worker(E);L.onmessage=this._onmessage.bind(this,L),L.onerror=this._onerror.bind(this,L),L.running=!1,L.id=T,this._workers.set(L,null)}URL.revokeObjectURL(E)},I.prototype._onerror=function(R,E){if(!this._terminated){this._working--,R.running=!1;var T=this._workers.get(R);T&&T[1](E.message),this._workers.set(R,null),this._terminateOnError?this.terminate():this._exec()}},I.prototype._onmessage=function(R,E){if(!this._terminated){this._working--,R.running=!1;var T=this._workers.get(R);T&&T[0](E.data.data),this._workers.set(R,null),this._exec()}},I.prototype._exec=function(){for(var R of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!R.running)for(var E=0;E<this._waiting.length;E++){var T=this._waiting[E];if("number"!=typeof T[4]||T[4]===R.id){this._waiting.splice(E,1),R.postMessage({action:"exec",event:T[0],args:T[1]},T[2]),R.running=!0,R.time=Date.now(),this._workers.set(R,T[3]),this._working++;break}}}},I.prototype.terminate=function(){if(!this._terminated){for(var R of this._workers)R[0].terminate(),R[1]&&R[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},I.prototype.postAll=function(R,E){if(this._terminated)throw new Error("Cannot post (terminated)");var T=[];for(var L of this._workers.keys())T.push(this.post(R,E,[],L.id));return Promise.all(T)},I.prototype.post=function(R,E,T,L){E===void 0&&(E=[]),T===void 0&&(T=[]),Array.isArray(E)||(E=[E]),Array.isArray(T)||(T=[T]);var O=this;return new Promise(function(G,Z){if(O._terminated)throw new Error("Cannot post (terminated)");O._waiting.push([R,E,T,[G,Z],L]),O._exec()})},P.exports=I},{"./workerTemplate":122}],122:[function(_,P,D){"use strict";var I=function(){function C(){this._listeners={}}self.window=self,C.prototype.on=function(R,E){if(this._listeners[R])throw new RangeError("there is already a listener for "+R);if("function"!=typeof E)throw new TypeError("callback argument must be a function");this._listeners[R]=E},C.prototype._send=function(R,E,T){T===void 0?T=[]:!Array.isArray(T)&&(T=[T]),self.postMessage({id:R,data:E},T)},C.prototype._trigger=function(R,E){if(!this._listeners[R])throw new Error("event "+R+" is not defined");this._listeners[R].apply(null,E)};var S=new C;self.onmessage=function(R){switch(R.data.action){case"exec":R.data.args.unshift(function(E,T){S._send(R.data.id,E,T)}),S._trigger(R.data.event,R.data.args);break;case"ping":S._send(R.data.id,"pong");break;default:throw new Error("unexpected action: "+R.data.action);}}}.toString().split("\"CODE\";");D.newWorkerURL=function(C,R){var E=new Blob(["(",I[0],"importScripts.apply(self, "+JSON.stringify(R)+");\n","(",C,")();",I[1],")();"],{type:"application/javascript"});return URL.createObjectURL(E)}},{}],123:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S){for(var C in I)S.prototype[C]=I[C]};var I={setBitXY:function(C,R){var E=R*this.width+C;this.data[E>>3]|=1<<7-(7&E)},clearBitXY:function(C,R){var E=R*this.width+C;this.data[E>>3]&=~(1<<7-(7&E))},toggleBitXY:function(C,R){var E=R*this.width+C;this.data[E>>3]^=1<<7-(7&E)},getBitXY:function(C,R){var E=R*this.width+C;return this.data[E>>3]&1<<7-(7&E)?1:0},setBit:function(C){this.data[C>>3]|=1<<7-(7&C)},clearBit:function(C){this.data[C>>3]&=~(1<<7-(7&C))},toggleBit:function(C){this.data[C>>3]^=1<<7-(7&C)},getBit:function(C){return this.data[C>>3]&1<<7-(7&C)?1:0}}},{}],124:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var R=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],E=R.useAlpha,T=!(E!==void 0)||E,L=R.nbSlots,O=L===void 0?512:L;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});var G=Math.log(O)/Math.log(8);if(G!==Math.floor(G))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");var Z=this.bitDepth-G,W=this.data,Q=(0,S.default)(Math.pow(8,G),0),J=Math.pow(2,2*G),$=Math.pow(2,G);for(var ee=0;ee<W.length;ee+=this.channels){var te=(W[ee]>>Z)*J+(W[ee+1]>>Z)*$+(W[ee+2]>>Z);T&&this.alpha?Q[te]+=W[ee+this.channels-1]/this.maxValue:Q[te]++}return Q};var I=_("new-array"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"new-array":108}],125:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var S=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],C=S.alpha,R=C===void 0?1:C;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});var E=0;if(R!==void 0){for(var T=this.components;T<this.data.length;T+=this.channels)this.data[T]===R&&E++;return E}return this.size}},{}],126:[function(_,P,D){"use strict";function I(L){return L&&L.__esModule?L:{default:L}}function S(L,O){var G=O.useAlpha,Z=O.maxSlots,W=Math.log2(Z);if(!(0,T.default)(W))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");var Q=0;this.bitDepth>W&&(Q=this.bitDepth-W);var J=this.data,$=(0,R.default)(Math.pow(2,Math.min(this.bitDepth,W)),0);if(G&&this.alpha){var ee=this.channels-L-1;for(var te=L;te<J.length;te+=this.channels)$[J[te]>>Q]+=J[te+ee]/this.maxValue}else for(var ae=L;ae<J.length;ae+=this.channels)$[J[ae]>>Q]++;return $}Object.defineProperty(D,"__esModule",{value:!0}),D.getHistogram=function(){var O=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],G=O.maxSlots,Z=void 0===G?256:G,W=O.channel,Q=O.useAlpha,J=void 0===Q||Q;if(this.checkProcessable("getHistogram",{bitDepth:[8,16]}),void 0===W){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");W=0}return S.call(this,W,{useAlpha:J,maxSlots:Z})},D.getHistograms=function(){var O=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],G=O.maxSlots,Z=G===void 0?256:G,W=O.useAlpha,Q=!(W!==void 0)||W;this.checkProcessable("getHistograms",{bitDepth:[8,16]});var J=Array(Q?this.components:this.channels);for(var $=0;$<J.length;$++)J[$]=S.call(this,$,{useAlpha:Q,maxSlots:Z});return J};var C=_("new-array"),R=I(C),E=_("is-integer"),T=I(E)},{"is-integer":47,"new-array":108}],127:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var S=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],C=S.removeClosePoints,R=C===void 0?0:C,E=S.region,T=E===void 0?3:E,L=S.algorithm,O=L===void 0?"max":L,G=S.mask,Z=S.maxEquals,W=Z===void 0?2:Z,Q=!0;"min"===O.toLowerCase()&&(Q=!1);var J=this;this.checkProcessable("localExtrema",{bitDepth:[8,16],components:1}),T*=4;var $=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],ee=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],te=8>=T?1:2,ae=[];for(var ie=te;ie<J.height-te;ie++)for(var ne=te;ne<J.width-te;ne++)if(!G||G.getBitXY(ne,ie)){var le=0,oe=0,se=J.data[ne+ie*J.width];for(var de=0;de<T;de++)Q?J.data[ne+$[de]+(ie+ee[de])*J.width]<se&&le++:J.data[ne+$[de]+(ie+ee[de])*J.width]>se&&le++,J.data[ne+$[de]+(ie+ee[de])*J.width]===se&&oe++;le+oe===T&&oe<=W&&ae.push([ne,ie])}if(0<R)for(var he=0;he<ae.length;he++)for(var ue=he+1;ue<ae.length;ue++)Math.sqrt(Math.pow(ae[he][0]-ae[ue][0],2)+Math.pow(ae[he][1]-ae[ue][1],2))<R&&(ae[he][0]=ae[he][0]+ae[ue][0]>>1,ae[he][1]=ae[he][1]+ae[ue][1]>>1,ae.splice(ue,1),ue--);return ae}},{}],128:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("max",{bitDepth:[8,16]});var R=(0,S.default)(this.channels,-(1/0));for(var E=0;E<this.data.length;E+=this.channels)for(var T=0;T<this.channels;T++)this.data[E+T]>R[T]&&(R[T]=this.data[E+T]);return R};var I=_("new-array"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"new-array":108}],129:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var C=this.getHistograms({maxSlots:this.maxValue+1}),R=Array(C.length);for(var E=0;E<C.length;E++){var T=C[E];R[E]=(0,I.mean)(T)}return R};var I=_("../../util/histogram")},{"../../util/histogram":234}],130:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var C=this.getHistograms({maxSlots:this.maxValue+1}),R=Array(C.length);for(var E=0;E<C.length;E++){var T=C[E];R[E]=(0,I.median)(T)}return R};var I=_("../../util/histogram")},{"../../util/histogram":234}],131:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var R=(0,S.default)(this.channels,+(1/0));for(var E=0;E<this.data.length;E+=this.channels)for(var T=0;T<this.channels;T++)this.data[E+T]<R[T]&&(R[T]=this.data[E+T]);return R};var I=_("new-array"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"new-array":108}],132:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){if(this.checkProcessable("getPixelsArray",{bitDepth:[1]}),1===this.bitDepth){var S=Array(this.size),C=0;for(var R=0;R<this.width;R++)for(var E=0;E<this.height;E++)1===this.getBitXY(R,E)&&(S[C++]=[R,E]);return S.length=C,S}}},{}],133:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S){if(this===S)return[0,0];for(var C=[0,0],R=this;R;){if(R===S)return C;R.position&&(C[0]+=R.position[0],C[1]+=R.position[1]),R=R.parent}return void 0}},{}],134:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("sum",{bitDepth:[8,16]});var R=(0,S.default)(this.channels,0);for(var E=0;E<this.data.length;E+=this.channels)for(var T=0;T<this.channels;T++)R[T]+=this.data[E+T];return R};var I=_("new-array"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"new-array":108}],135:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){return this.checkProcessable("getSVD",{bitDepth:[1]}),I.DC.SVD(this.pixelsArray)};var I=_("ml-matrix")},{"ml-matrix":80}],136:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0});var I=void 0,S=void 0,C=void 0,R=void 0,E=void 0,T=void 0;"undefined"==typeof self?"undefined"!=typeof P&&P.exports&&function(){D.env=T="node",D.isDifferentOrigin=E=function(Z){return!1};var L=_("canvas");D.DOMImage=S=L.Image,D.Canvas=C=L,D.ImageData=R=L.ImageData;var O=_("fs");D.loadBinary=I=function(Z){return new Promise(function(W,Q){O.readFile(Z,function(J,$){J?Q(J):W($.buffer)})})}}():function(){D.env=T="browser";var L=self.location.origin;D.isDifferentOrigin=E=function(G){try{var Z=new self.URL(G);return Z.origin!==L}catch(W){return!1}},D.ImageData=R=self.ImageData,D.DOMImage=S=self.Image,D.Canvas=C=function(G,Z){var W=self.document.createElement("canvas");return W.width=G,W.height=Z,W},D.loadBinary=I=function(G){var Z=1>=arguments.length||arguments[1]===void 0?{}:arguments[1],W=Z.withCredentials,Q=W!==void 0&&W;return new Promise(function(J,$){var ee=new self.XMLHttpRequest;ee.open("GET",G,!0),ee.responseType="arraybuffer",ee.withCredentials=Q,ee.onload=function(te){200===this.status?J(this.response):$(te)},ee.onerror=$,ee.send()})}}(),D.loadBinary=I,D.DOMImage=S,D.Canvas=C,D.ImageData=R,D.isDifferentOrigin=E,D.env=T},{canvas:void 0,fs:4}],137:[function(_,P,D){"use strict";function I(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function($t){var ea={inPlace:!0},ta={stack:!0};$t.extendMethod("invertGetSet",C.default,ea),$t.extendMethod("invertIterator",E.default,ea),$t.extendMethod("invertPixel",G.default,ea),$t.extendMethod("invertOneLoop",L.default,ea),$t.extendMethod("invertApply",W.default,ea),$t.extendMethod("invert",ee.default,{inPlace:!0,stack:!0}),$t.extendMethod("invertBinaryLoop",J.default,ea),$t.extendMethod("level",ue.default,ea),$t.extendMethod("add",ge.default,ea),$t.extendMethod("subtract",pe.default,ea),$t.extendMethod("multiply",xe.default,ea),$t.extendMethod("divide",ke.default,ea),$t.extendMethod("hypotenuse",_e.default),$t.extendMethod("getBackground",ve.default),$t.extendMethod("meanFilter",ae.default),$t.extendMethod("medianFilter",ne.default),$t.extendMethod("gaussianFilter",oe.default),$t.extendMethod("sobelFilter",de.default),$t.extendMethod("crop",je.default,ta),$t.extendMethod("scale",De.default,ta),$t.extendMethod("hsv",Se.default),$t.extendMethod("hsl",Ce.default),$t.extendMethod("cmyk",Be.default),$t.extendMethod("rgba8",Ee.default),$t.extendMethod("grey",Le.default).extendMethod("gray",Le.default),$t.extendMethod("mask",Oe.default),$t.extendMethod("pad",Fe.default),$t.extendMethod("resizeBinary",Ne.default),$t.extendMethod("colorDepth",Ge.default),$t.extendMethod("setBorder",He.default,ea),$t.extendMethod("getRow",ut.default),$t.extendMethod("getColumn",gt.default),$t.extendMethod("getMatrix",pt.default),$t.extendMethod("setMatrix",bt.default),$t.extendMethod("split",We.default),$t.extendMethod("getChannel",Qe.default),$t.extendMethod("combineChannels",$e.default),$t.extendMethod("setChannel",at.default),$t.extendMethod("getSimilarity",lt.default),$t.extendMethod("getPixelsGrid",ot.default),$t.extendMethod("getBestMatch",dt.default),$t.extendMethod("paintMasks",yt.default,ea),$t.extendMethod("paintPoints",wt.default,ea),$t.extendMethod("extract",Mt.default),$t.extendMethod("convolution",Pt.default),$t.extendMethod("convolutionFFT",It.default),$t.extendMethod("countAlphaPixels",Qt.default),$t.extendMethod("getHistogram",St.getHistogram).extendProperty("histogram",St.getHistogram),$t.extendMethod("getHistograms",St.getHistograms).extendProperty("histograms",St.getHistograms),$t.extendMethod("getColorHistogram",Ct.default).extendProperty("colorHistogram",Ct.default),$t.extendMethod("getMin",Bt.default).extendProperty("min",Bt.default),$t.extendMethod("getMax",Et.default).extendProperty("max",Et.default),$t.extendMethod("getSum",Lt.default).extendProperty("sum",Lt.default),$t.extendMethod("getLocalExtrema",Ot.default),$t.extendMethod("getMedian",Lt.default).extendProperty("median",Nt.default),$t.extendMethod("getMean",Ft.default).extendProperty("mean",Ft.default),$t.extendMethod("getPixelsArray",Gt.default).extendProperty("pixelsArray",Gt.default),$t.extendMethod("getRelativePosition",Ht.default),$t.extendMethod("getSVD",Wt.default).extendProperty("svd",Wt.default)};var S=_("./filter/invertGetSet"),C=I(S),R=_("./filter/invertIterator"),E=I(R),T=_("./filter/invertOneLoop"),L=I(T),O=_("./filter/invertPixel"),G=I(O),Z=_("./filter/invertApply"),W=I(Z),Q=_("./filter/invertBinaryLoop"),J=I(Q),$=_("./filter/invert"),ee=I($),te=_("./filter/blur"),ae=I(te),ie=_("./filter/median"),ne=I(ie),le=_("./filter/gaussian"),oe=I(le),se=_("./filter/sobel"),de=I(se),he=_("./filter/level"),ue=I(he),me=_("./filter/add"),ge=I(me),ce=_("./filter/subtract"),pe=I(ce),fe=_("./filter/hypotenuse"),_e=I(fe),be=_("./filter/multiply"),xe=I(be),ye=_("./filter/divide"),ke=I(ye),we=_("./filter/getBackground"),ve=I(we),Me=_("./transform/crop"),je=I(Me),Pe=_("./transform/scale/scale"),De=I(Pe),Ie=_("./transform/hsv"),Se=I(Ie),Ae=_("./transform/hsl"),Ce=I(Ae),Re=_("./transform/cmyk"),Be=I(Re),ze=_("./transform/rgba8"),Ee=I(ze),Te=_("./transform/grey"),Le=I(Te),qe=_("./transform/mask/mask"),Oe=I(qe),Ve=_("./transform/pad"),Fe=I(Ve),Ue=_("./transform/resizeBinary"),Ne=I(Ue),Ye=_("./transform/colorDepth"),Ge=I(Ye),Xe=_("./utility/setBorder"),He=I(Xe),Ze=_("./utility/split"),We=I(Ze),Ke=_("./utility/getChannel"),Qe=I(Ke),Je=_("./utility/combineChannels"),$e=I(Je),et=_("./utility/setChannel"),at=I(et),nt=_("./utility/getSimilarity"),lt=I(nt),rt=_("./utility/getPixelsGrid"),ot=I(rt),st=_("./utility/getBestMatch"),dt=I(st),ht=_("./utility/getRow"),ut=I(ht),mt=_("./utility/getColumn"),gt=I(mt),ct=_("./utility/getMatrix"),pt=I(ct),_t=_("./utility/setMatrix"),bt=I(_t),xt=_("./operator/paintMasks"),yt=I(xt),kt=_("./operator/paintPoints"),wt=I(kt),vt=_("./operator/extract"),Mt=I(vt),jt=_("./operator/convolution"),Pt=I(jt),Dt=_("./operator/convolutionFFT"),It=I(Dt),St=_("./compute/histogram"),At=_("./compute/colorHistogram"),Ct=I(At),Rt=_("./compute/min"),Bt=I(Rt),zt=_("./compute/max"),Et=I(zt),Tt=_("./compute/sum"),Lt=I(Tt),qt=_("./compute/localExtrema"),Ot=I(qt),Vt=_("./compute/mean"),Ft=I(Vt),Ut=_("./compute/median"),Nt=I(Ut),Yt=_("./compute/pixelsArray"),Gt=I(Yt),Xt=_("./compute/relativePosition"),Ht=I(Xt),Zt=_("./compute/svd"),Wt=I(Zt),Kt=_("./compute/countAlphaPixels"),Qt=I(Kt)},{"./compute/colorHistogram":124,"./compute/countAlphaPixels":125,"./compute/histogram":126,"./compute/localExtrema":127,"./compute/max":128,"./compute/mean":129,"./compute/median":130,"./compute/min":131,"./compute/pixelsArray":132,"./compute/relativePosition":133,"./compute/sum":134,"./compute/svd":135,"./filter/add":138,"./filter/blur":139,"./filter/divide":140,"./filter/gaussian":141,"./filter/getBackground":142,"./filter/hypotenuse":143,"./filter/invert":144,"./filter/invertApply":145,"./filter/invertBinaryLoop":146,"./filter/invertGetSet":147,"./filter/invertIterator":148,"./filter/invertOneLoop":149,"./filter/invertPixel":150,"./filter/level":151,"./filter/median":152,"./filter/multiply":153,"./filter/sobel":154,"./filter/subtract":155,"./operator/convolution":162,"./operator/convolutionFFT":163,"./operator/extract":164,"./operator/paintMasks":165,"./operator/paintPoints":166,"./transform/cmyk":176,"./transform/colorDepth":177,"./transform/crop":178,"./transform/grey":179,"./transform/hsl":181,"./transform/hsv":182,"./transform/mask/mask":187,"./transform/pad":200,"./transform/resizeBinary":201,"./transform/rgba8":202,"./transform/scale/scale":204,"./utility/combineChannels":205,"./utility/getBestMatch":207,"./utility/getChannel":208,"./utility/getColumn":209,"./utility/getMatrix":210,"./utility/getPixelsGrid":211,"./utility/getRow":212,"./utility/getSimilarity":213,"./utility/setBorder":214,"./utility/setChannel":215,"./utility/setMatrix":216,"./utility/split":217}],138:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(R){var E=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],T=E.channels;if(this.checkProcessable("add",{bitDepth:[8,16]}),T=(0,I.validateArrayOfChannels)(this,{channels:T}),R=(0,S.checkNumberArray)(R),!isNaN(R))for(var L=0;L<T.length;L++){var O=T[L];for(var G=0;G<this.data.length;G+=this.channels)this.data[G+O]=Math.min(this.maxValue,this.data[G+O]+R>>0)}else{if(this.data.length!==R.length)throw new Error("add: the data size is different");for(var Z=0;Z<T.length;Z++){var W=T[Z];for(var Q=0;Q<this.data.length;Q+=this.channels)this.data[Q+W]=Math.max(0,Math.min(this.maxValue,this.data[Q+W]+R[Q+W]>>0))}}};var I=_("../../util/channel"),S=_("../../util/value")},{"../../util/channel":230,"../../util/value":239}],139:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(R){if(this.checkProcessable("meanFilter",{components:[1],bitDepth:[8,16]}),1>R)throw new Error("Number of neighbors should be grater than 0");var E=2*R+1,T=Array(E*E);for(var L=0;L<T.length;L++)T[L]=1;return S.default.call(this,T)};var I=_("../operator/convolutionFFT"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"../operator/convolutionFFT":163}],140:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(E){var T=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],L=T.channels;if(this.checkProcessable("divide",{bitDepth:[8,16]}),L=(0,I.validateArrayOfChannels)(this,{channels:L}),E=(0,C.checkNumberArray)(E),!isNaN(E))for(var O=0;O<L.length;O++){var G=L[O];for(var Z=0;Z<this.data.length;Z+=this.channels)this.data[Z+G]=Math.min(this.maxValue,this.data[Z+G]/E>>0)}else{if(this.data.length!==E.length)throw new Error("divide: the: the data size is different");for(var W=0;W<L.length;W++){var Q=L[W];for(var J=0;J<this.data.length;J+=this.channels)this.data[J+Q]=Math.max(0,Math.min(this.maxValue,this.data[J+Q]/E[J+Q]>>0))}}};var I=_("../../util/channel"),S=_("../image");(function(E){return E&&E.__esModule?E:{default:E}})(S);var C=_("../../util/value")},{"../../util/channel":230,"../../util/value":239,"../image":156}],141:[function(_,P,D){"use strict";function I(L){return L&&L.__esModule?L:{default:L}}function S(L,O){if(1>L)throw new RangeError("Radius should be grater than 0");var G=2*L+1,Z=Array(G*G),W=2*(O*O),Q=Math.PI*W;for(var J=0;J<=L;J++)for(var $=J;$<=L;$++){var ee=Math.exp(-(J*J+$*$)/W)/Q;Z[(J+L)*G+($+L)]=ee,Z[(J+L)*G+(-$+L)]=ee,Z[(-J+L)*G+($+L)]=ee,Z[(-J+L)*G+(-$+L)]=ee,Z[($+L)*G+(J+L)]=ee,Z[($+L)*G+(-J+L)]=ee,Z[(-$+L)*G+(J+L)]=ee,Z[(-$+L)*G+(-J+L)]=ee}return Z}function C(L){if(0>=L)throw new RangeError("Sigma should be grater than 0");for(var O=2*(L*L),G=Math.PI*O,Z=1/G,W=Z,Q=0;0.99>W;){Q++,Z=Math.exp(-(Q*Q)/O)/G,W+=4*Z;for(var J=1;J<Q;J++)Z=Math.exp(-(J*J+Q*Q)/O)/G,W+=8*Z;Z=4*Math.exp(-(2*Q*Q)/O)/G,W+=Z}if(1<W)throw new Error("unexpected sum over 1");return S(Q,L)}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var O=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],G=O.radius,Z=void 0===G?1:G,W=O.sigma,Q=O.channels,J=O.border,$=void 0===J?"copy":J;this.checkProcessable("gaussianFilter",{bitDepth:[8,16]});var ee=void 0;return W?ee=C(W):(W=0.3*(Z-1)+0.8,ee=S(Z,W)),T.default.call(this,ee,{border:$,channels:Q})};var R=_("../image");I(R);var E=_("../operator/convolutionFFT"),T=I(E)},{"../image":156,"../operator/convolutionFFT":163}],142:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(E,T,L){var O=new I.KernelRidgeRegression(E,T,L),G=Array(this.size);for(var Z=0;Z<this.width;Z++)for(var W=0;W<this.height;W++)G[W*this.width+Z]=[Z,W];var Q=O.predict(G),J=C.default.createFrom(this);for(var $=0;$<this.size;$++)J.data[$]=Math.min(this.maxValue,Math.max(0,Q[$][0]));return J};var I=_("ml-regression"),S=_("../image"),C=function(E){return E&&E.__esModule?E:{default:E}}(S)},{"../image":156,"ml-regression":93}],143:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(E){var T=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],L=T.bitDepth,O=T.channels;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==E.width||this.height!==E.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==E.alpha||this.bitDepth!==E.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==E.channels)throw new Error("hypotenuse: both images must have the same number of channels");var G=C.default.createFrom(this,{bitDepth:L});O=(0,I.validateArrayOfChannels)(this,{channels:O});var Z=G.isClamped;for(var W=0;W<O.length;W++){var Q=O[W];for(var J=Q;J<this.data.length;J+=this.channels){var $=Math.sqrt(this.data[J]*this.data[J]+E.data[J]*E.data[J]);G.data[J]=Z?Math.min(Math.max(Math.round($),0),G.maxValue):$}}return G};var I=_("../../util/channel"),S=_("../image"),C=function(E){return E&&E.__esModule?E:{default:E}}(S)},{"../../util/channel":230,"../image":156}],144:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var C=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],R=C.channels;if(this.checkProcessable("invertOneLoop",{bitDepth:[1,8,16]}),1===this.bitDepth){var E=this.data;for(var T=0;T<E.length;T++)E[T]=~E[T]}else{R=(0,I.validateArrayOfChannels)(this,{channels:R});for(var L=0;L<R.length;L++){var O=R[L];for(var G=O;G<this.data.length;G+=this.channels)this.data[G]=this.maxValue-this.data[G]}}};var I=_("../../util/channel")},{"../../util/channel":230}],145:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){if(1===this.bitDepth){var S=this.data;for(var C=0;C<S.length;C++)S[C]=~S[C]}else this.checkProcessable("invertApply",{bitDepth:[8,16]}),this.apply(function(R){for(var E=0;E<this.components;E++)this.data[R+E]=this.maxValue-this.data[R+E]})}},{}],146:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("invertBinaryLoop",{bitDepth:[1]});for(var S=0;S<this.size;S++)this.toggleBit(S)}},{}],147:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth){var S=this.data;for(var C=0;C<S.length;C++)S[C]=~S[C]}else for(var R=0;R<this.width;R++)for(var E=0;E<this.height;E++)for(var T=0;T<this.components;T++){var L=this.getValueXY(R,E,T);this.setValueXY(R,E,T,this.maxValue-L)}}},{}],148:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth){var S=this.data;for(var C=0;C<S.length;C++)S[C]=~S[C]}else for(var R of this.pixels()){var E=R.index,T=R.pixel;for(var L=0;L<this.components;L++)this.setValue(E,L,this.maxValue-T[L])}}},{}],149:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("invertOneLoop",{bitDepth:[8,16]});var S=this.data;for(var C=0;C<S.length;C+=this.channels)for(var R=0;R<this.components;R++)S[C+R]=this.maxValue-S[C+R]}},{}],150:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("invertPixel",{bitDepth:[8,16]});for(var S=0;S<this.width;S++)for(var C=0;C<this.height;C++){var R=this.getPixelXY(S,C);for(var E=0;E<this.components;E++)R[E]=this.maxValue-R[E];this.setPixelXY(S,C,R)}}},{}],151:[function(_,P,D){"use strict";function I(E,T,L,O){var G=0.00001,Z=Array(E.channels);for(var W of O)Z[W]=0===T[W]&&L[W]===E.maxValue?0:L[W]===T[W]?0:(E.maxValue+1-G)/(L[W]-T[W]),T[W]+=(0.5-G/2)/Z[W];for(var Q=0;Q<O.length;Q++){var J=O[Q];if(0!==Z[J])for(var $=0;$<E.data.length;$+=E.channels)E.data[$+J]=Math.min(Math.max(0,0|(E.data[$+J]-T[J])*Z[J]+0.5),E.maxValue)}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var T=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],L=T.algorithm,O=void 0===L?"range":L,G=T.channels,Z=T.min,W=void 0===Z?this.min:Z,Q=T.max,J=void 0===Q?this.max:Q;switch(this.checkProcessable("level",{bitDepth:[8,16]}),G=(0,R.validateArrayOfChannels)(this,{channels:G}),O){case"range":0>W&&(W=0),J>this.maxValue&&(J=this.maxValue),Array.isArray(W)||(W=(0,C.default)(G.length,W)),Array.isArray(J)||(J=(0,C.default)(G.length,J)),I(this,W,J,G);break;default:throw new Error("level: algorithm not implement: "+O);}};var S=_("new-array"),C=function(T){return T&&T.__esModule?T:{default:T}}(S),R=_("../../util/channel")},{"../../util/channel":230,"new-array":108}],152:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var E=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],T=E.radius,L=void 0===T?1:T,O=E.channels,G=E.border,Z=void 0===G?"copy":G;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),1>L)throw new Error("Kernel radius should be greater than 0");O=(0,I.validateArrayOfChannels)(this,O,!0);var W=L,Q=L,J=C.default.createFrom(this),$=(2*W+1)*(2*Q+1),ee=Math.floor($/2),te=Array($);for(var ae=0;ae<O.length;ae++){var ie=O[ae];for(var ne=Q;ne<this.height-Q;ne++)for(var le=W;le<this.width-W;le++){var oe=0;for(var se=-Q;se<=Q;se++)for(var de=-W;de<=W;de++){var he=((ne+se)*this.width+le+de)*this.channels+ie;te[oe++]=this.data[he]}var ue=(ne*this.width+le)*this.channels+ie,me=te.sort((ce,pe)=>ce-pe)[ee];J.data[ue]=me}}if(this.alpha&&-1===O.indexOf(this.channels))for(var ge=this.components;ge<this.data.length;ge=ge+this.channels)J.data[ge]=this.data[ge];return J.setBorder({size:[W,Q],algorithm:Z}),J};var I=_("../../util/channel"),S=_("../image"),C=function(E){return E&&E.__esModule?E:{default:E}}(S)},{"../../util/channel":230,"../image":156}],153:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(E){var T=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],L=T.channels;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),0>=E)throw new Error("multiply: the value must be greater than 0");if(L=(0,I.validateArrayOfChannels)(this,{channels:L}),E=(0,C.checkNumberArray)(E),!isNaN(E))for(var O=0;O<L.length;O++){var G=L[O];for(var Z=0;Z<this.data.length;Z+=this.channels)this.data[Z+G]=Math.min(this.maxValue,this.data[Z+G]*E>>0)}else{if(this.data.length!==E.length)throw new Error("multiply: the data size is different");for(var W=0;W<L.length;W++){var Q=L[W];for(var J=0;J<this.data.length;J+=this.channels)this.data[J+Q]=Math.max(0,Math.min(this.maxValue,this.data[J+Q]*E[J+Q]>>0))}}};var I=_("../../util/channel"),S=_("../image");(function(E){return E&&E.__esModule?E:{default:E}})(S);var C=_("../../util/value")},{"../../util/channel":230,"../../util/value":239,"../image":156}],154:[function(_,P,D){"use strict";function I(T){return T&&T.__esModule?T:{default:T}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var L=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],O=L.kernelX,G=O===void 0?E.GRADIENT_X:O,Z=L.kernelY,W=Z===void 0?E.GRADIENT_Y:Z,Q=L.border,J=Q===void 0?"copy":Q,$=L.channels;this.checkProcessable("sobelFilter",{bitDepth:[8,16]});var ee=R.default.call(this,G,{channels:$,border:J,bitDepth:32}),te=R.default.call(this,W,{channels:$,border:J,bitDepth:32});return ee.hypotenuse(te,{bitDepth:this.bitDepth,channels:$})};var S=_("../image");I(S);var C=_("../operator/convolution"),R=I(C),E=_("../../util/kernels")},{"../../util/kernels":236,"../image":156,"../operator/convolution":162}],155:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(R){var E=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],T=E.channels;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),T=(0,I.validateArrayOfChannels)(this,{channels:T}),R=(0,S.checkNumberArray)(R),!isNaN(R))for(var L=0;L<T.length;L++){var O=T[L];for(var G=0;G<this.data.length;G+=this.channels)this.data[G+O]=Math.max(0,this.data[G+O]-R>>0)}else{if(this.data.length!==R.length)throw new Error("substract: the data size is different");for(var Z=0;Z<T.length;Z++){var W=T[Z];for(var Q=0;Q<this.data.length;Q+=this.channels)this.data[Q+W]=Math.max(0,Math.min(this.maxValue,this.data[Q+W]-R[Q+W]>>0))}}};var I=_("../../util/channel"),S=_("../../util/value")},{"../../util/channel":230,"../../util/value":239}],156:[function(_,P,D){"use strict";function I(de){return de&&de.__esModule?de:{default:de}}function S(de){if(Array.isArray(de)){for(var he=0,ue=Array(de.length);he<de.length;he++)ue[he]=de[he];return ue}return Array.from(de)}Object.defineProperty(D,"__esModule",{value:!0});var C=_("./kind"),R=_("./kindNames"),E=_("./environment"),T=_("./extend"),L=I(T),O=_("./bitMethods"),G=I(O),Z=_("fs"),W=_("./model/model"),Q=_("./roi/manager"),J=I(Q),$=_("./mediaTypes"),ee=_("extend"),te=I(ee),ae=_("./load"),ie=_("../stack/stack"),ne=I(ie),le=_("blob-util"),oe={configurable:!0,enumerable:!1,get:void 0};class se{constructor(de,he,ue,me){if(void 0===de&&(de=1),void 0===he&&(he=1),"object"==typeof de){var ge=de,ce=!0===he;de=ge.width,he=ge.height,ue=ce?ge.data.slice():ge.data,me={position:ge.position,components:ge.components,alpha:ge.alpha,bitDepth:ge.bitDepth,colorModel:ge.colorModel,parent:ge,meta:ge.meta}}if(ue&&!ue.length&&(me=ue,ue=null),void 0===me&&(me={}),this.width=de,this.height=he,0>=this.width)throw new RangeError("width must be greater than 0");if(0>=this.height)throw new RangeError("height must be greater than 0");Object.defineProperty(this,"parent",{enumerable:!1,writable:!0}),this.parent=me.parent,this.position=me.position||[0,0];var pe=void 0;if("string"!=typeof me.kind)pe=(0,C.getKind)(R.RGBA);else if(pe=(0,C.getKind)(me.kind),!pe)throw new RangeError("invalid image kind: "+me.kind);var fe=(0,te.default)({},pe,me);if(this.components=fe.components,this.alpha=fe.alpha+0,this.bitDepth=fe.bitDepth,this.colorModel=fe.colorModel,this.meta=me.meta||{},this.computed=null,this.initialize(),!ue)(0,C.createPixelArray)(this);else{var _e=(0,C.getTheoreticalPixelArraySize)(this);if(_e!==ue.length)throw new RangeError(`incorrect data size. Should be ${_e} and found ${ue.length}`);this.data=ue}}initialize(){this.size=this.width*this.height,this.sizes=[this.width,this.height],this.channels=this.components+this.alpha,this.maxValue=32===this.bitDepth?Number.MAX_VALUE:Math.pow(2,this.bitDepth)-1,this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=32>this.bitDepth,this.borderSizes=[0,0]}static load(de,he){return(0,ae.loadURL)(de,he)}static fromCanvas(de){var he=de.getContext("2d"),ue=he.getImageData(0,0,de.width,de.height);return new se(ue.width,ue.height,ue.data)}static extendMethod(de,he){var ue=2>=arguments.length||arguments[2]===void 0?{}:arguments[2],me=ue.inPlace,ge=me!==void 0&&me,ce=ue.returnThis,pe=!(ce!==void 0)||ce,fe=ue.partialArgs,_e=fe===void 0?[]:fe,be=ue.stack,xe=be!==void 0&&be;if(ge){if(se.prototype[de]=function(){this.computed=null;for(var we=arguments.length,ve=Array(we),Me=0;Me<we;Me++)ve[Me]=arguments[Me];var je=he.apply(this,[].concat(S(_e),ve));return pe?this:je},xe){var ye="string"==typeof xe?xe:de;ne.default.prototype[ye]=pe?function(){for(var we of this)we[de].apply(we,arguments);return this}:function(){var we=new ne.default(this.length);for(var ve=0;ve<this.length;ve++){var Me;we[ve]=(Me=this[ve])[de].apply(Me,arguments)}return we}}}else if(se.prototype[de]=function(){for(var we=arguments.length,ve=Array(we),Me=0;Me<we;Me++)ve[Me]=arguments[Me];return he.apply(this,[].concat(S(_e),ve))},xe){var ke="string"==typeof xe?xe:de;ne.default.prototype[ke]=function(){var we=new ne.default(this.length);for(var ve=0;ve<this.length;ve++){var Me;we[ve]=(Me=this[ve])[de].apply(Me,arguments)}return we}}return se}static extendProperty(de,he){var ue=2>=arguments.length||void 0===arguments[2]?{}:arguments[2],me=ue.partialArgs,ge=void 0===me?[]:me;return oe.get=function(){if(null===this.computed)this.computed={};else if(this.computed.hasOwnProperty(de))return this.computed[de];var ce=he.apply(this,ge);return this.computed[de]=ce,ce},Object.defineProperty(se.prototype,de,oe),se}static createFrom(de,he){var ue={width:de.width,height:de.height,position:de.position,components:de.components,alpha:de.alpha,colorModel:de.colorModel,bitDepth:de.bitDepth,parent:de};return(0,te.default)(ue,he),new se(ue.width,ue.height,ue)}static isTypeSupported(de){var he=1>=arguments.length||void 0===arguments[1]?"write":arguments[1];if("string"!=typeof de)throw new TypeError("type argument must be a string");if(de=(0,$.getType)(de),"write"===he)return(0,$.canWrite)(de);throw new TypeError("unknown operation: "+he)}getPixelIndex(de){var he=0;for(var ue=0;ue<de.length;ue++)he+=this.multipliers[ue]*de[ue];return he}setValueXY(de,he,ue,me){return this.data[(he*this.width+de)*this.channels+ue]=me,this.computed=null,this}getValueXY(de,he,ue){return this.data[(he*this.width+de)*this.channels+ue]}setValue(de,he,ue){return this.data[de*this.channels+he]=ue,this.computed=null,this}getValue(de,he){return this.data[de*this.channels+he]}setPixelXY(de,he,ue){return this.setPixel(he*this.width+de,ue)}getPixelXY(de,he){return this.getPixel(he*this.width+de)}setPixel(de,he){var ue=de*this.channels;for(var me=0;me<he.length;me++)this.data[ue+me]=he[me];return this.computed=null,this}getPixel(de){var he=Array(this.channels),ue=de*this.channels;for(var me=0;me<this.channels;me++)he[me]=this.data[ue+me];return he}toDataURL(){var de=0>=arguments.length||arguments[0]===void 0?"image/png":arguments[0];return this.getCanvas().toDataURL((0,$.getType)(de))}toBlob(){var de=0>=arguments.length||arguments[0]===void 0?"image/png":arguments[0],he=1>=arguments.length||arguments[1]===void 0?0.8:arguments[1];return(0,le.canvasToBlob)(this.getCanvas({originalData:!0}),de,he)}getCanvas(){var de=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],he=de.originalData,ue=void 0!==he&&he,me=void 0;ue?(this.checkProcessable("getInPlaceCanvas",{channels:[4],bitDepth:[8]}),me=new E.ImageData(this.data,this.width,this.height)):me=new E.ImageData(this.getRGBAData(),this.width,this.height);var ge=new E.Canvas(this.width,this.height),ce=ge.getContext("2d");return ce.putImageData(me,0,0),ge}getRGBAData(){this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16]});var de=this.size,he=new Uint8ClampedArray(4*(this.width*this.height));if(1===this.bitDepth)for(var ue=0;ue<de;ue++){var me=this.getBit(ue);he[4*ue]=255*me,he[4*ue+1]=255*me,he[4*ue+2]=255*me}else if(1===this.components)for(var ge=0;ge<de;ge++)he[4*ge]=this.data[ge*this.channels]>>>this.bitDepth-8,he[4*ge+1]=this.data[ge*this.channels]>>>this.bitDepth-8,he[4*ge+2]=this.data[ge*this.channels]>>>this.bitDepth-8;else if(3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[W.RGB]}),this.colorModel===W.RGB))for(var ce=0;ce<de;ce++)he[4*ce]=this.data[ce*this.channels]>>>this.bitDepth-8,he[4*ce+1]=this.data[ce*this.channels+1]>>>this.bitDepth-8,he[4*ce+2]=this.data[ce*this.channels+2]>>>this.bitDepth-8;if(this.alpha){this.checkProcessable("getRGBAData",{bitDepth:[8,16]});for(var pe=0;pe<de;pe++)he[4*pe+3]=this.data[pe*this.channels+this.components]>>this.bitDepth-8}else for(var fe=0;fe<de;fe++)he[4*fe+3]=255;return he}getROIManager(de,he){return new J.default(this,he)}clone(){var de=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],he=de.copyData,ue=!(he!==void 0)||he;return new se(this,ue)}save(de){var he=1>=arguments.length||arguments[1]===void 0?{}:arguments[1],ue=he.format,me=ue===void 0?"png":ue;return new Promise((ge,ce)=>{var pe=(0,Z.createWriteStream)(de),fe=this.getCanvas(),_e=void 0;switch(me.toLowerCase()){case"png":_e=fe.pngStream();break;case"jpg":case"jpeg":_e=fe.jpegStream();break;default:return ce(new RangeError("invalid output format: "+me));}pe.on("finish",ge),pe.on("error",ce),_e.pipe(pe)})}checkProcessable(de){var he=1>=arguments.length||arguments[1]===void 0?{}:arguments[1],ue=he.bitDepth,me=he.alpha,ge=he.colorModel,ce=he.components,pe=he.channels;if("string"!=typeof de)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(ue&&(Array.isArray(ue)||(ue=[ue]),-1===ue.indexOf(this.bitDepth)))throw new TypeError("The process: "+de+" can only be applied if bit depth is in: "+ue);if(me&&(Array.isArray(me)||(me=[me]),-1===me.indexOf(this.alpha)))throw new TypeError("The process: "+de+" can only be applied if alpha is in: "+me);if(ge&&(Array.isArray(ge)||(ge=[ge]),-1===ge.indexOf(this.colorModel)))throw new TypeError("The process: "+de+" can only be applied if color model is in: "+ge);if(ce&&(Array.isArray(ce)||(ce=[ce]),-1===ce.indexOf(this.components)))throw new TypeError("The process: "+de+" can only be applied if the number of channels is in: "+ce);if(pe&&(Array.isArray(pe)||(pe=[pe]),-1===pe.indexOf(this.channels)))throw new TypeError("The process: "+de+" can only be applied if the number of components is in: "+pe)}checkColumn(de){if(0>de||de>=this.width)throw new RangeError(`checkColumn: column should be included between 0 and ${this.width-1}. Current value: ${de}`)}checkRow(de){if(0>de||de>=this.height)throw new RangeError(`checkRow: row should be included between 0 and ${this.height-1}. Current value: ${de}`)}checkChannel(de){if(0>de||de>=this.channels)throw new RangeError(`checkChannel: channel should be included between 0 and ${this.channels-1}. Current value: ${de}`)}apply(de){for(var he=0;he<this.height;he++)for(var ue=0;ue<this.width;ue++){var me=(he*this.width+ue)*this.channels;de.call(this,me)}}}D.default=se,(0,L.default)(se),(0,G.default)(se)},{"../stack/stack":227,"./bitMethods":123,"./environment":136,"./extend":137,"./kind":157,"./kindNames":158,"./load":159,"./mediaTypes":160,"./model/model":161,"./roi/manager":174,"blob-util":2,extend:19,fs:4}],157:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.getKind=function(T){return R[T]},D.getTheoreticalPixelArraySize=function(T){var L=T.channels*T.size;return 1===T.bitDepth&&(L=Math.ceil(L/8)),L},D.createPixelArray=function(T){var L=T.channels*T.size,O=void 0;switch(T.bitDepth){case 1:O=new Uint8Array(Math.ceil(L/8));break;case 8:O=new Uint8ClampedArray(L);break;case 16:O=new Uint16Array(L);break;case 32:O=new Float32Array(L);break;default:throw new Error("Cannot create pixel array for bit depth "+T.bitDepth);}if(T.alpha)for(var G=T.components;G<O.length;G+=T.channels)O[G]=T.maxValue;T.data=O};var I=_("./kindNames"),S=function(T){if(T&&T.__esModule)return T;var L={};if(null!=T)for(var O in T)Object.prototype.hasOwnProperty.call(T,O)&&(L[O]=T[O]);return L.default=T,L}(I),C=_("./model/model"),R={};R[S.BINARY]={components:1,alpha:0,bitDepth:1},R[S.GREYA]={components:1,alpha:1,bitDepth:8},R[S.GREY]={components:1,alpha:0,bitDepth:8},R[S.RGBA]={components:3,alpha:1,bitDepth:8,colorModel:C.RGB},R[S.RGB]={components:3,alpha:0,bitDepth:8,colorModel:C.RGB},R[S.CMYK]={components:4,alpha:1,bitDepth:8,colorModel:C.CMYK},R[S.CMYKA]={components:4,alpha:0,bitDepth:8,colorModel:C.CMYK}},{"./kindNames":158,"./model/model":161}],158:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.BINARY="BINARY",D.GREYA="GREYA",D.RGBA="RGBA",D.RGB="RGB",D.GREY="GREY"},{}],159:[function(_,P,D){"use strict";function I(se){return se&&se.__esModule?se:{default:se}}function S(se){var de=new Uint8Array(se.length);for(var he=0;he<se.length;he++)de[he]=se.charCodeAt(he);return de}function C(se){return(255&se)<<8|255&se>>8}function R(se){var de=new $.PNGDecoder(se),he=de.decode(),ue=he.bitDepth,me=he.data.buffer,ge=void 0;if(8===ue)ge=new Uint8ClampedArray(me);else if(16===ue){ge=new Uint16Array(me);for(var ce=0;ce<ge.length;ce++)ge[ce]=C(ge[ce])}var pe=he.colourType,fe=void 0,_e=0;return 0===pe?fe=1:2===pe?fe=3:4===pe?(fe=1,_e=1):6===pe?(fe=3,_e=1):void 0,new Z.default(he.width,he.height,ge,{components:fe,alpha:_e,bitDepth:ue})}function E(se){var de=(0,te.decode)(se);return 1===de.length?L(de[0]):new Q.default(de.map(L))}function T(se){var de={tiff:se};return se.exif&&(de.exif=se.exif),se.gps&&(de.gps=se.gps),de}function L(se){return new Z.default(se.width,se.height,se.data,{components:1,alpha:0,colorModel:null,bitDepth:se.bitsPerSample,meta:T(se)})}function O(se,de){return de=de||{},new Promise(function(he,ue){var me=new J.DOMImage;(0,J.isDifferentOrigin)(se)&&(me.crossOrigin="Anonymous"),me.onload=function(){var ge=me.width,ce=me.height,pe=new J.Canvas(ge,ce),fe=pe.getContext("2d");fe.drawImage(me,0,0,ge,ce);var _e=fe.getImageData(0,0,ge,ce).data;he(new Z.default(ge,ce,_e,de))},me.onerror=function(){ue(new Error("Could not load "+se))},me.src=se})}Object.defineProperty(D,"__esModule",{value:!0}),D.loadURL=function(de,he){var ue=de.slice(0,64).match(oe),me=void 0;return me=ue?Promise.resolve(S((0,ie.default)(de.slice(ue[0].length)))):(0,J.loadBinary)(de,he),me.then(function(ge){var ce=new Uint8Array(ge),pe=(0,le.default)(ce);if(pe)switch(pe.ext){case"png":return R(ge);case"jpg":var fe=(0,ee.decode)(ge),_e=void 0;return fe.exif&&(_e=T(fe.exif)),O(de,{meta:_e});case"tif":return E(ge);}return O(de)})};var G=_("./image"),Z=I(G),W=_("../stack/stack"),Q=I(W),J=_("./environment"),$=_("fast-png"),ee=_("fast-jpeg"),te=_("tiff"),ae=_("atob-lite"),ie=I(ae),ne=_("image-type"),le=I(ne),oe=/^data:[a-z]+\/([a-z]+);base64,/},{"../stack/stack":227,"./environment":136,"./image":156,"atob-lite":1,"fast-jpeg":22,"fast-png":40,"image-type":42,tiff:115}],160:[function(_,P,D){"use strict";function I(W){return W&&W.__esModule?W:{default:W}}function S(W){G||(G=new R.default(1,1));var Q=O.get(W);return Q||(Q=new Z(W),O.set(W,Q)),Q}Object.defineProperty(D,"__esModule",{value:!0}),D.canWrite=function(Q){return"node"===E.env&&"image/png"!==Q?!1:S(Q).canWrite()},D.getType=function(Q){return(0,L.default)(Q,"/")||(Q="image/"+Q),Q};var C=_("./image"),R=I(C),E=_("./environment"),T=_("string-includes"),L=I(T),O=new Map,G=void 0;class Z{constructor(W){this.type=W,this._canWrite=null}canWrite(){return null===this._canWrite&&(this._canWrite=G.toDataURL(this.type).startsWith("data:"+this.type)),this._canWrite}}},{"./environment":136,"./image":156,"string-includes":110}],161:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.RGB="RGB",D.HSL="HSL",D.HSV="HSV",D.CMYK="CMYK"},{}],162:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(L){var O=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],G=O.channels,Z=O.bitDepth,W=O.normalize,Q=void 0!==W&&W,J=O.divisor,$=void 0===J?1:J,ee=O.border,te=void 0===ee?"copy":ee,ae=O.algorithm,ie=void 0===ae?"direct":ae,ne=S.default.createFrom(this,{bitDepth:Z});G=(0,C.validateArrayOfChannels)(this,G,!0);var le=(0,R.validateKernel)(L);le.kWidth,le.kHeight,L=le.kernel;var oe=Math.floor(L.length/2),se=Math.floor(L[0].length/2),de=ne.isClamped,he=Array(this.height*this.width),ue=void 0,me=void 0,ge=void 0,ce=void 0,pe=void 0,fe=void 0;for(ce=0;ce<G.length;ce++){for(pe=G[ce],ge=0;ge<this.height;ge++)for(me=0;me<this.width;me++)ue=ge*this.width+me,he[ue]=this.data[ue*this.channels+pe];for(fe="direct"===ie?E.direct(he,L,{rows:this.height,cols:this.width,normalize:Q,divisor:$}):E.fft(he,L,{rows:this.height,cols:this.width,normalize:Q,divisor:$}),ge=0;ge<this.height;ge++)for(me=0;me<this.width;me++)ue=ge*this.width+me,ne.data[ue*this.channels+pe]=de?Math.min(Math.max(fe[ue],0),ne.maxValue):fe[ue]}if(this.alpha&&-1===G.indexOf(this.channels))for(me=this.components;me<this.data.length;me=me+this.channels)ne.data[me]=this.data[me];return"periodic"!==te&&ne.setBorder({size:[se,oe],algorithm:te}),ne};var I=_("../image"),S=function(L){return L&&L.__esModule?L:{default:L}}(I),C=_("../../util/channel"),R=_("../../util/kernel"),E=_("ml-matrix-convolution")},{"../../util/channel":230,"../../util/kernel":235,"../image":156,"ml-matrix-convolution":71}],163:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S){var C=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];return C.algorithm="fft",this.convolution(S,C)}},{}],164:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(R){var E=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],T=E.position;if(this.checkProcessable("extract",{bitDepth:[8,16]}),!T&&(T=R.getRelativePosition(this),!T))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");var C=S.default.createFrom(this,{width:R.width,height:R.height,alpha:1,position:T,parent:this});for(var L=0;L<R.width;L++)for(var O=0;O<R.height;O++){for(var G=0;G<this.channels;G++){var Z=this.getValueXY(L+T[0],O+T[1],G);C.setValueXY(L,O,G,Z)}R.getBitXY(L,O)||C.setValueXY(L,O,this.components,0)}return C};var I=_("../image"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"../image":156}],165:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(R){var E=1>=arguments.length||arguments[1]===void 0?{}:arguments[1],T=E.color,L=T===void 0?[this.maxValue,0,0]:T,O=E.colors,G=E.alpha,Z=G===void 0?255:G,W=E.randomColors,Q=W!==void 0&&W,J=E.distinctColors,$=J!==void 0&&J;this.checkProcessable("paintMasks",{channels:4,bitDepth:[8,16],colorModel:I.RGB}),Array.isArray(L)||(L=(0,S.css2array)(L)),O&&(O=O.map(function(oe){if(!Array.isArray(oe)){var se=(0,S.css2array)(se);return se}})),Array.isArray(R)||(R=[R]),$&&(O=(0,S.getDistinctColors)(R.length));for(var ee=0;ee<R.length;ee++){var te=R[ee];O?L=O[ee%O.length]:Q&&(L=(0,S.getRandomColor)());for(var ae=0;ae<te.width;ae++)for(var ie=0;ie<te.height;ie++)if(te.getBitXY(ae,ie))for(var ne=0;ne<Math.min(this.components,L.length);ne++)if(255===Z)this.setValueXY(ae+te.position[0],ie+te.position[1],ne,L[ne]);else{var le=this.getValueXY(ae+te.position[0],ie+te.position[1],ne);le=Math.round((le*(255-Z)+L[ne]*Z)/255),this.setValueXY(ae+te.position[0],ie+te.position[1],ne,le)}}};var I=_("../model/model"),S=_("../../util/color")},{"../../util/color":231,"../model/model":161}],166:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(E){var T=1>=arguments.length||arguments[1]===void 0?{}:arguments[1],L=T.color,O=L===void 0?[this.maxValue,0,0]:L,G=T.shape;this.checkProcessable("paintPoints",{components:3,bitDepth:[8,16],colorModel:I.RGB});var Z=new C.default(G).getPoints(),W=Math.min(this.channels,O.length);for(var Q=0;Q<E.length;Q++){var J=E[Q][0],$=E[Q][1];for(var ee=0;ee<Z.length;ee++){var te=Z[ee][0],ae=Z[ee][1];if(0<=J+te&&0<=$+ae&&J+te<this.width&&$+ae<this.height){var ie=(J+te+($+ae)*this.width)*this.channels;for(var ne=0;ne<W;ne++)this.data[ie+ne]=O[ne]}}}};var I=_("../model/model"),S=_("../../util/shape"),C=function(E){return E&&E.__esModule?E:{default:E}}(S)},{"../../util/shape":238,"../model/model":161}],167:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0});class I{constructor(S,C){this.parent=S,this.width=S.width,this.height=S.height,this.pixels=C,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}}D.default=I},{}],168:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(R){var E=R.pixels,T={};R.positive=0,R.negative=0;for(var L=0;L<E.length;L++)E[L]&&!T[E[L]]&&(T[E[L]]=!0,0<E[L]?R.positive++:R.negative++);var O={};for(var G in T)O[G]=new S.default(R,1*G);var Z=R.width,W=R.height;for(var Q=0;Q<Z;Q++)for(var J=0;J<W;J++){var $=J*Z+Q;if(0!==E[$]){var ee=E[$];Q<O[ee].minX&&(O[ee].minX=Q),Q>O[ee].maxX&&(O[ee].maxX=Q),J<O[ee].minY&&(O[ee].minY=J),J>O[ee].maxY&&(O[ee].maxY=J),O[ee].meanX+=Q,O[ee].meanY+=J,O[ee].surface++}}var te=[];for(var ae in T)O[ae].meanX/=O[ae].surface,O[ae].meanY/=O[ae].surface,te.push(O[ae]);return te};var I=_("./roi"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"./roi":175}],169:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){function R(_e,be){var xe=he;ge=0,ce=1,ue[0]=_e,me[0]=be;for(var ye=!0;ge<ce;){var ke=ue[ge&le],we=me[ge&le];ye&=E(ke,we,J),ge++}if(!ye){for(var ve=0;ve<ce;ve++){var Me=ue[ve&le],je=me[ve&le],Pe=je*Q.width+Me;ae[Pe]=0}he=xe}return ye}function E(_e,be,xe){var ye=ae[be*Q.width+_e],ke=Q.data[be*Q.width+_e];ne[be*Q.width+_e];for(var we=be-1;we<=be+1;we++)for(var ve=_e-1;ve<=_e+1;ve++){var Me=we*Q.width+ve;if(0===ie[Me])switch(ie[Me]=1,ne[Me]=Q.data[Me]-ke,xe){case J:if(0===ne[Me]){if(0===ve||0===we||ve===Q.width-1||we===Q.height-1)return!1;ae[Me]=ye,ue[ce&le]=ve,me[ce&le]=we,ce++}else{if(0<ne[Me])return!1;G||(ae[Me]=ye,oe[he&le]=ve,se[he&le]=we,he++)}break;case $:0>=ne[Me]&&(ae[Me]=ye,oe[he&le]=ve,se[he&le]=we,he++);}}return!0}var T=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],L=T.allowCorner,O=!(L!==void 0)||L,G=T.onlyTop,Z=T.invert,W=Z!==void 0&&Z,Q=this;Q.checkProcessable("fromExtrema",{components:[1]});var J=1,$=2,ee=0,te=0,ae=new Int16Array(Q.size),ie=new Int8Array(Q.size),ne=new Float32Array(Q.size),le=1048575,oe=new Uint16Array(le+1),se=new Uint16Array(le+1),de=0,he=0,ue=new Uint16Array(le+1),me=new Uint16Array(le+1),ge=0,ce=0;for(function(be){var xe=be.maxima,ye=void 0===xe||xe;for(var ke=1;ke<Q.height-1;ke++)for(var we=1;we<Q.width-1;we++){var ve=we+ke*Q.width;if(0===ie[ve]){var Me=ye?Q.data[ve]:-Q.data[we+ke*Q.width];if(Q.data[ke*Q.width+we-1]>Me)continue;if(Q.data[ke*Q.width+we+1]>Me)continue;if(Q.data[(ke-1)*Q.width+we]>Me)continue;if(Q.data[(ke+1)*Q.width+we]>Me)continue;if(O){if(Q.data[(ke-1)*Q.width+we-1]>Me)continue;if(Q.data[(ke-1)*Q.width+we+1]>Me)continue;if(Q.data[(ke+1)*Q.width+we-1]>Me)continue;if(Q.data[(ke+1)*Q.width+we+1]>Me)continue}ae[ve]=ye?++ee:--te;var je=R(we,ke,J);je||(ye?--ee:++te)}}}(Q,{maxima:!W});de<he;){var pe=oe[de&le],fe=se[de&le];E(pe,fe,$),de++}return new S.default(Q,ae)};var I=_("./../ROIMap"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"./../ROIMap":167}],170:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(R){function E(ae,ie){var ne=0,le=0,oe=R.getBitXY(ae,ie),se=oe?++Z:--W;for(J[0]=ae,$[0]=ie;ne<=le;){var de=J[ne&Q],he=$[ne&Q];if(G[he*R.width+de]=se,0<de&&0===G[he*R.width+de-1]&&R.getBitXY(de-1,he)===oe&&(le++,J[le&Q]=de-1,$[le&Q]=he,G[he*R.width+de-1]=-32768),0<he&&0===G[(he-1)*R.width+de]&&R.getBitXY(de,he-1)===oe&&(le++,J[le&Q]=de,$[le&Q]=he-1,G[(he-1)*R.width+de]=-32768),de<R.width-1&&0===G[he*R.width+de+1]&&R.getBitXY(de+1,he)===oe&&(le++,J[le&Q]=de+1,$[le&Q]=he,G[he*R.width+de+1]=-32768),he<R.height-1&&0===G[(he+1)*R.width+de]&&R.getBitXY(de,he+1)===oe&&(le++,J[le&Q]=de,$[le&Q]=he+1,G[(he+1)*R.width+de]=-32768),O&&(0<de&&0<he&&0===G[(he-1)*R.width+de-1]&&R.getBitXY(de-1,he-1)===oe&&(le++,J[le&Q]=de-1,$[le&Q]=he-1,G[(he-1)*R.width+de-1]=-32768),de<R.width-1&&0<he&&0===G[(he-1)*R.width+de+1]&&R.getBitXY(de+1,he-1)===oe&&(le++,J[le&Q]=de+1,$[le&Q]=he-1,G[(he-1)*R.width+de+1]=-32768),0<de&&he<R.height-1&&0===G[(he+1)*R.width+de-1]&&R.getBitXY(de-1,he+1)===oe&&(le++,J[le&Q]=de-1,$[le&Q]=he+1,G[(he+1)*R.width+de-1]=-32768),de<R.width-1&&he<R.height-1&&0===G[(he+1)*R.width+de+1]&&R.getBitXY(de+1,he+1)===oe&&(le++,J[le&Q]=de+1,$[le&Q]=he+1,G[(he+1)*R.width+de+1]=-32768)),ne++,le-ne>Q)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}var T=1>=arguments.length||arguments[1]===void 0?{}:arguments[1],L=T.allowCorner,O=L!==void 0&&L,G=new Int16Array(R.size),Z=0,W=0,Q=65535,J=new Uint16Array(Q+1),$=new Uint16Array(Q+1);for(var ee=0;ee<R.width;ee++)for(var te=0;te<R.height;te++)0===G[te*R.width+ee]&&E(ee,te);return new S.default(R,G)};var I=_("./../ROIMap"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"./../ROIMap":167}],171:[function(_,P,D){"use strict";function I(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(J){var $=1>=arguments.length||arguments[1]===void 0?{}:arguments[1],ee=$.neighbours,te=ee===void 0?8:ee,ae=void 0,ie=void 0,ne=void 0;if(8===te)ae=G,ie=Z,ne=W;else if(4===te)ae=T,ie=L,ne=O;else throw new RangeError("unsupported neighbours count: "+te);var le=J.size,oe=J.width,se=J.height,de=Array(le),he=new Int16Array(le),ue=new C.default,me=1;for(var ge=0;ge<se;ge++)for(var ce=0;ce<oe;ce++){var pe=ce+ge*oe;if(J.getBit(pe)){var fe=null;for(var _e=0;_e<ne.length;_e++){var be=ce+ae[_e],xe=ge+ie[_e];if(0<=be&&0<=xe&&be<oe&&xe<se){var ye=de[be+xe*oe];ye?(ne[_e]=ye,(!fe||ne[_e].value<fe.value)&&(fe=ne[_e])):ne[_e]=null}}if(!fe)de[pe]=ue.add(me++);else{de[pe]=fe;for(var ke=0;ke<ne.length;ke++)ne[ke]&&ne[ke]!==fe&&ue.union(fe,ne[ke])}}}for(var we=0;we<se;we++)for(var ve=0;ve<oe;ve++){var Me=ve+we*oe;J.getBit(Me)&&(he[Me]=ue.find(de[Me]).value)}return new E.default(J,he)};var S=_("ml-disjoint-set"),C=I(S),R=_("./../ROIMap"),E=I(R),T=[-1,0],L=[0,-1],O=[null,null],G=[-1,-1,0,1],Z=[0,-1,-1,-1],W=[null,null,null,null]},{"./../ROIMap":167,"ml-disjoint-set":55}],172:[function(_,P,D){"use strict";function I(T){return T&&T.__esModule?T:{default:T}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(L){var O=1>=arguments.length||arguments[1]===void 0?{}:arguments[1],G=new E.default(O),Z=new Int16Array(this.size),W=0,Q=G.getPoints();for(var J=0;J<L.length;J++){W++;var $=L[J][0],ee=L[J][1];for(var te=0;te<Q.length;te++){var ae=Q[te][0],ie=Q[te][1];0<=$+ae&&0<=ee+ie&&$+ae<this.width&&ee+ie<this.height&&(Z[$+ae+(ee+ie)*this.width]=W)}}return new C.default(this,Z)};var S=_("./../ROIMap"),C=I(S),R=_("./../../../util/shape"),E=I(R)},{"./../../../util/shape":238,"./../ROIMap":167}],173:[function(_,P,D){"use strict";function I(L){return L&&L.__esModule?L:{default:L}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var O=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],G=O.fillMaxValue,Z=G===void 0?this.maxValue:G,W=O.points,Q=O.mask,J=this;J.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),W||(W=J.getLocalExtrema({algorithm:"min",mask:Q}));var $=new Int16Array(J.size),ee=J.width,te=J.height,ae=new E.default({comparator:function(pe,fe){return pe[2]-fe[2]},strategy:E.default.BinaryHeapStrategy});for(var ie=0;ie<W.length;ie++){var ne=W[ie][0]+W[ie][1]*ee;$[ne]=ie+1;var le=J.data[ne];le<=Z&&ae.queue([W[ie][0],W[ie][1],le])}for(;0<ae.length;){var oe=ae.dequeue(),se=oe[0]+oe[1]*ee;for(var de=0;4>de;de++){var he=oe[0]+T.dx[de],ue=oe[1]+T.dy[de];if(0<=he&&0<=ue&&he<ee&&ue<te){var me=he+ue*ee;if(!Q||Q.getBit(me)){var ge=J.data[me];ge<=Z&&0===$[me]&&($[me]=$[se],ae.queue([oe[0]+T.dx[de],oe[1]+T.dy[de],ge]))}}}}return new C.default(J,$)};var S=_("./../ROIMap"),C=I(S),R=_("js-priority-queue"),E=I(R),T=_("./../../../util/dxdy.js")},{"./../../../util/dxdy.js":233,"./../ROIMap":167,"js-priority-queue":48}],174:[function(_,P,D){"use strict";function I(oe){return oe&&oe.__esModule?oe:{default:oe}}Object.defineProperty(D,"__esModule",{value:!0});var S=_("./creator/fromMask"),C=I(S),R=_("./creator/fromMask2"),E=I(R),T=_("./creator/fromExtrema"),L=I(T),O=_("./creator/fromWaterShed"),G=I(O),Z=_("./creator/fromPoints"),W=I(Z),Q=_("./createROI"),J=I(Q),$=_("extend"),ee=I($),te=_("../image"),ae=I(te),ie=_("./ROIMap"),ne=I(ie);D.default=class{constructor(se){var de=1>=arguments.length||arguments[1]===void 0?{}:arguments[1];this._image=se,this._options=de,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromExtrema(){var se=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],de=(0,ee.default)({},this._options,se),he=L.default.call(this._image,se);this._layers[de.label]=new le(he,de)}fromPoints(se){var de=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],he=(0,ee.default)({},this._options,de),ue=W.default.call(this._image,se,de);return this._layers[he.label]=new le(ue,he),this}putMap(se){var de=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],he=new ne.default(this._image,se),ue=(0,ee.default)({},this._options,de);return this._layers[ue.label]=new le(he,ue),this}fromWaterShed(){var se=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],de=(0,ee.default)({},this._options,se),he=G.default.call(this._image,se);this._layers[de.label]=new le(he,de)}fromMask(se){var de=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],he=(0,ee.default)({},this._options,de),ue=C.default.call(this._image,se,de);return this._layers[he.label]=new le(ue,he),this}fromMask2(se){var de=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],he=(0,ee.default)({},this._options,de),ue=E.default.call(this._image,se,de);return this._layers[he.label]=new le(ue,he),this}getMap(){var se=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],de=(0,ee.default)({},this._options,se);if(this._layers[de.label])return this._layers[de.label].roiMap}getROIIDs(){var se=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],de=this.getROI(se);if(de){var he=Array(de.length);for(var ue=0;ue<de.length;ue++)he[ue]=de[ue].id;return he}}getROI(){var se=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],de=se.label,he=void 0===de?this._options.label:de,ue=se.positive,me=void 0===ue||ue,ge=se.negative,ce=void 0===ge||ge,pe=se.minSurface,fe=void 0===pe?0:pe,_e=se.maxSurface,be=void 0===_e?Number.POSITIVE_INFINITY:_e;if(!this._layers[he])throw new Error("getROI: This ROI layer ("+he+") does not exists.");var xe=this._layers[he].roi,ye=Array(xe.length),ke=0;for(var we=0;we<xe.length;we++){var ve=xe[we];(0>ve.id&&ce||0<ve.id&&me)&&ve.surface>=fe&&ve.surface<=be&&(ye[ke++]=ve)}return ye.length=ke,ye}getMasks(){var se=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],de=this.getROI(se),he=Array(de.length);for(var ue=0;ue<de.length;ue++)he[ue]=de[ue].getMask(se);return he}getPixels(){var se=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],de=(0,ee.default)({},this._options,se);if(this._layers[de.label])return this._layers[de.label].roiMap.pixels}paint(){var se=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],de=se.showLabels,he=se.labelColor,ue=void 0===he?"blue":he,me=se.labelFont,ge=void 0===me?"12px Helvetica":me;this._painted||(this._painted=this._image.rgba8());var ce=this.getMasks(se);if(this._painted.paintMasks(ce,se),de){!0===de&&(de="id");var pe=this._painted.getCanvas({originalData:!0}),fe=pe.getContext("2d");fe.fillStyle=ue,fe.font=ge;var _e=this.getROI(se);for(var be=0;be<_e.length;be++)fe.fillText(_e[be][de],_e[be].meanX-3,_e[be].meanY+3);this._painted.data=fe.getImageData(0,0,this._painted.width,this._painted.height).data}return this._painted}getMask(){var se=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],de=new ae.default(this._image.width,this._image.height,{kind:"BINARY"}),he=this.getMasks(se);for(var ue=0;ue<he.length;ue++){var me=he[ue];for(var ge=0;ge<me.width;ge++)for(var ce=0;ce<me.height;ce++)me.getBitXY(ge,ce)&&de.setBitXY(ge+me.position[0],ce+me.position[1])}return de}resetPainted(se){this._painted=se?this.image.rgba8():this._image.rgba8()}mergeROI(){var se=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],de=(0,ee.default)({},this._options,se),he=de.algorithm||"commonBorder",ue=de.minCommonBorderLength||5,me=this.getROI(de),ge=new Set;switch(he.toLowerCase()){case"commonborder":for(var ce=0;ce<me.length;ce++)for(var pe=0;pe<me[ce].borderIDs.length;pe++)0!==me[ce].borderIDs[pe]&&me[ce].borderIDs[pe]<me[ce].id&&me[ce].borderLengths[pe]*ue>=me[ce].border&&ge.add([me[ce].id,me[ce].borderIDs[pe]]);}var fe=this.getMap(de).pixels;for(var _e=0;_e<fe.length;_e++)if(0!==fe[_e])for(var be of ge)fe[_e]===be[0]&&(fe[_e]=be[1]);this.putMap(fe,de)}};class le{constructor(oe,se){this.roiMap=oe,this.options=se,this.roi=(0,J.default)(this.roiMap)}}},{"../image":156,"./ROIMap":167,"./createROI":168,"./creator/fromExtrema":169,"./creator/fromMask":170,"./creator/fromMask2":171,"./creator/fromPoints":172,"./creator/fromWaterShed":173,extend:19}],175:[function(_,P,D){"use strict";function I(ee){return ee&&ee.__esModule?ee:{default:ee}}function S(ee){var te=ee.map,ae=te.pixels,ie=new Set,ne=new Map,le=new Set,oe=[1,0,-1,0],se=[0,1,0,-1];for(var de=ee.minX;de<=ee.maxX;de++)for(var he=ee.minY;he<=ee.maxY;he++){var ue=de+he*te.width;if(ae[ue]===ee.id)for(var me=0;4>me;me++){var ge=de+oe[me],ce=he+se[me];if(0<=ge&&0<=ce&&ge<te.width&&ce<te.height){var pe=ge+ce*te.width;if(ae[pe]!==ee.id&&!le.has(pe)){le.add(pe),ie.add(ae[pe]);var fe=ne.get(ae[pe]);fe?ne.set(ae[pe],++fe):ne.set(ae[pe],1)}}}}var _e=Array.from(ie),be=_e.map(function(xe){return ne.get(xe)});return{ids:_e,lengths:be}}function C(ee){var te=new Set,ae=ee.map,ie=ae.pixels;for(var ne of[0,ee.height-1])for(var le=0;le<ee.width;le++){var oe=(ne+ee.minY)*ae.width+le+ee.minX;if(0<le-ee.minX&&ie[oe]===ee.id&&ie[oe-1]!==ee.id){var se=ie[oe-1];te.add(se)}if(1<ae.width-le-ee.minX&&ie[oe]===ee.id&&ie[oe+1]!==ee.id){var de=ie[oe+1];te.add(de)}}for(var he of[0,ee.width-1])for(var ue=0;ue<ee.height;ue++){var me=(ue+ee.minY)*ae.width+he+ee.minX;if(0<ue-ee.minY&&ie[me]===ee.id&&ie[me-ae.width]!==ee.id){var ge=ie[me-ae.width];te.add(ge)}if(1<ae.height-ue-ee.minY&&ie[me]===ee.id&&ie[me+ae.width]!==ee.id){var ce=ie[me+ae.width];te.add(ce)}}return Array.from(te)}function R(ee){var te=0,ae=ee.map,ie=ae.pixels,ne=[0];1<ee.height&&(ne[1]=ee.height-1);for(var le of ne)for(var oe=1;oe<ee.width-1;oe++){var se=(le+ee.minY)*ae.width+oe+ee.minX;ie[se]===ee.id&&te++}var de=[0];1<ee.width&&(de[1]=ee.width-1);for(var he of de)for(var ue=0;ue<ee.height;ue++){var me=(ue+ee.minY)*ae.width+he+ee.minX;ie[me]===ee.id&&te++}return te}function E(ee){var te=0,ae=ee.map,ie=ae.pixels;for(var ne=1;ne<ee.width-1;ne++)for(var le=1;le<ee.height-1;le++){var oe=(le+ee.minY)*ae.width+ne+ee.minX;ie[oe]===ee.id&&(ie[oe-1]!==ee.id||ie[oe+1]!==ee.id||ie[oe-ae.width]!==ee.id||ie[oe+ae.width]!==ee.id)&&te++}return te+ee.box}function T(ee){var te=0,ae=ee.map,ie=ae.pixels;for(var ne=1;ne<ee.width-1;ne++)for(var le=1;le<ee.height-1;le++){var oe=(le+ee.minY)*ae.width+ne+ee.minX;ie[oe]===ee.id&&(-1!==ee.externalIDs.indexOf(ie[oe-1])||-1!==ee.externalIDs.indexOf(ie[oe+1])||-1!==ee.externalIDs.indexOf(ie[oe-ae.width])||-1!==ee.externalIDs.indexOf(ie[oe+ae.width]))&&te++}return te+ee.box}function L(ee){var te=[ee.id],ae=ee.map,ie=ae.pixels;if(2<ee.height)for(var ne=0;ne<ee.width;ne++){var le=ee.minY*ae.width+ne+ee.minX;if(0<=te.indexOf(ie[le])){var oe=ie[le+ae.width];-1===te.indexOf(oe)&&-1===ee.boxIDs.indexOf(oe)&&te.push(oe)}}var se=[,,,,];for(var de=1;de<ee.width-1;de++)for(var he=1;he<ee.height-1;he++){var ue=(he+ee.minY)*ae.width+de+ee.minX;if(0<=te.indexOf(ie[ue])){se[0]=ie[ue-1],se[1]=ie[ue+1],se[2]=ie[ue-ae.width],se[3]=ie[ue+ae.width];for(var me=0;4>me;me++){var ge=se[me];-1===te.indexOf(ge)&&-1===ee.boxIDs.indexOf(ge)&&te.push(ge)}}}return te}Object.defineProperty(D,"__esModule",{value:!0});var O=_("../image"),G=I(O),Z=_("../kindNames"),W=function(te){if(te&&te.__esModule)return te;var ae={};if(null!=te)for(var ie in te)Object.prototype.hasOwnProperty.call(te,ie)&&(ae[ie]=te[ie]);return ae.default=te,ae}(Z),Q=_("../../util/shape"),J=I(Q);class ${constructor(ee,te){this.map=ee,this.id=te,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(){var ee=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],te=ee.scale,ae=void 0===te?1:te,ie=ee.kind,ne=void 0===ie?"":ie,le=void 0;return le="contour"===ne?this.contourMask:"box"===ne?this.boxMask:"filled"===ne?this.filledMask:"center"===ne?this.centerMask:this.mask,1>ae&&(le=le.resizeBinary(ae),le.parent=this.mask.parent,le.position[0]+=this.minX,le.position[1]+=this.minY),le}get mean(){throw new Error("ROI mean not implemented yet")}get center(){return this.computed.center?this.computed.center:this.computed.center=[this.width/2>>0,this.height/2>>0]}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}get externalIDs(){if(this.computed.externalIDs)return this.computed.externalIDs;var ee=this.borderIDs,te=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];var ae=this.internalIDs;for(var ie=0;ie<ee.length;ie++)-1===ae.indexOf(ee[ie])&&(this.computed.externalIDs.push(ee[ie]),this.computed.externalLengths.push(te[ie]));return this.computed.externalIDs}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this.externalIDs,this.computed.externalLengths)}get borderIDs(){if(this.computed.borderIDs)return this.computed.borderIDs;var ee=S(this);return this.computed.borderIDs=ee.ids,this.computed.borderLengths=ee.lengths,this.computed.borderIDs}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this.borderIDs,this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs?this.computed.boxIDs:this.computed.boxIDs=C(this)}get internalIDs(){return this.computed.internalIDs?this.computed.internalIDs:this.computed.internalIDs=L(this)}get box(){return this.computed.box?this.computed.box:this.computed.box=R(this)}get external(){return this.computed.external?this.computed.external:this.computed.external=T(this)}get border(){return this.computed.border?this.computed.border:this.computed.border=E(this)}get contourMask(){if(this.computed.contourMask)return this.computed.contourMask;var ee=new G.default(this.width,this.height,{kind:W.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var te=0;te<this.width;te++)for(var ae=0;ae<this.height;ae++)this.map.pixels[te+this.minX+(ae+this.minY)*this.map.width]===this.id&&(0<te&&te<this.width-1&&0<ae&&ae<this.height-1?(this.map.pixels[te-1+this.minX+(ae+this.minY)*this.map.width]!==this.id||this.map.pixels[te+1+this.minX+(ae+this.minY)*this.map.width]!==this.id||this.map.pixels[te+this.minX+(ae-1+this.minY)*this.map.width]!==this.id||this.map.pixels[te+this.minX+(ae+1+this.minY)*this.map.width]!==this.id)&&ee.setBitXY(te,ae):ee.setBitXY(te,ae));return this.computed.contour=ee}get boxMask(){if(this.computed.boxMask)return this.computed.boxMask;var ee=new G.default(this.width,this.height,{kind:W.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var te=0;te<this.width;te++)ee.setBitXY(te,0),ee.setBitXY(te,this.height-1);for(var ae=0;ae<this.height;ae++)ee.setBitXY(0,ae),ee.setBitXY(this.width-1,ae);return this.computed.boxMask=ee}get mask(){if(this.computed.mask)return this.computed.mask;var ee=new G.default(this.width,this.height,{kind:W.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var te=0;te<this.width;te++)for(var ae=0;ae<this.height;ae++)this.map.pixels[te+this.minX+(ae+this.minY)*this.map.width]===this.id&&ee.setBitXY(te,ae);return this.computed.mask=ee}get filledMask(){if(this.computed.filledMask)return this.computed.filledMask;var ee=new G.default(this.width,this.height,{kind:W.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var te=0;te<this.width;te++)for(var ae=0;ae<this.height;ae++){var ie=te+this.minX+(ae+this.minY)*this.map.width;0<=this.internalIDs.indexOf(this.map.pixels[ie])&&ee.setBitXY(te,ae)}return this.computed.filledMask=ee}get centerMask(){if(this.computed.centerMask)return this.computed.centerMask;var ee=new J.default({kind:"smallCross"}).getMask();return ee.parent=this.map.parent,ee.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=ee}get points(){if(this.computed.points)return this.computed.points;var ee=[];for(var te=0;te<this.height;te++)for(var ae=0;ae<this.width;ae++){var ie=(te+this.minY)*this.map.width+ae+this.minX;this.map.pixels[ie]===this.id&&ee.push([ae,te])}return this.computed.points=ee}get maxLengthPoints(){if(this.computed.maxLengthPoints)return this.computed.maxLengthPoints;var ee=0,te=void 0,ae=this.points;for(var ie=0;ie<ae.length;ie++)for(var ne=ie+1;ne<ae.length;ne++){var le=Math.pow(ae[ie][0]-ae[ne][0],2)+Math.pow(ae[ie][1]-ae[ne][1],2);le>=ee&&(ee=le,te=[ae[ie],ae[ne]])}return this.computed.maxLengthPoints=te}get maxLength(){if(this.computed.maxLength)return this.computed.maxLength;var ee=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));return this.computed.maxLength=ee}get angle(){if(this.computed.angle)return this.computed.angle;var ee=this.maxLengthPoints,te=180*-Math.atan2(ee[0][1]-ee[1][1],ee[0][0]-ee[1][0])/Math.PI;return this.computed.angle=te}}D.default=$},{"../../util/shape":238,"../image":156,"../kindNames":158}],176:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[I.RGB]});var E=C.default.createFrom(this,{components:4,colorModel:I.CMYK}),T=0,L=this.data;for(var O=0;O<L.length;O+=this.channels){var G=L[O],Z=L[O+1],W=L[O+2],Q=Math.min(this.maxValue-G,this.maxValue-Z,this.maxValue-W),J=(this.maxValue-G-Q)/(1-Q/this.maxValue),$=(this.maxValue-Z-Q)/(1-Q/this.maxValue),ee=(this.maxValue-W-Q)/(1-Q/this.maxValue);E.data[T++]=J,E.data[T++]=$,E.data[T++]=ee,E.data[T++]=Q,this.alpha&&(E.data[T++]=L[O+3])}return E};var I=_("../model/model"),S=_("../image"),C=function(E){return E&&E.__esModule?E:{default:E}}(S)},{"../image":156,"../model/model":161}],177:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var R=0>=arguments.length||void 0===arguments[0]?8:arguments[0];if(this.checkProcessable("colorDepth",{bitDepth:[8,16]}),!~[8,16].indexOf(R))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===R)return this.clone();var E=S.default.createFrom(this,{bitDepth:R});if(8===R)for(var T=0;T<this.data.length;T++)E.data[T]=this.data[T]>>8;else for(var L=0;L<this.data.length;L++)E.data[L]=this.data[L]<<8|this.data[L];return E};var I=_("../image"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"../image":156}],178:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var R=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],E=R.x,T=E===void 0?0:E,L=R.y,O=L===void 0?0:L,G=R.width,Z=G===void 0?this.width-T:G,W=R.height,Q=W===void 0?this.height-O:W;if(T>this.width-1||O>this.height-1)throw new RangeError(`crop: origin (x:${T}, y:${O}) out of range (${this.width-1}; ${this.height-1})`);if(0>=Z||0>=Q)throw new RangeError(`crop: width and height (width:${Z}; height:${Q}) must be positive numbers`);if(0>T||0>O)throw new RangeError(`crop: x and y (x:${T}, y:${O}) must be positive numbers`);if(Z>this.width-T||Q>this.height-O)throw new RangeError(`crop: (x: ${T}, y:${O}, width:${Z}, height:${Q}) size is out of range`);var J=S.default.createFrom(this,{width:Z,height:Q}),$=Z*this.channels,ee=0,te=T*this.channels;for(var ae=O;ae<O+Q;ae++)for(var ie=ae*this.width*this.channels+te,ne=ie+$;ie<ne;ie++)J.data[ee++]=this.data[ie];return J};var I=_("../image"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"../image":156}],179:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var T=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],L=T.algorithm,O=L===void 0?"luma709":L,G=T.keepAlpha,Z=G!==void 0&&G,W=T.mergeAlpha,Q=!(W!==void 0)||W,J=T.allowGrey,$=J!==void 0&&J,ee={bitDepth:[8,16],alpha:[0,1]};$||(ee.colorModel=[C.RGB],ee.components=[3]),this.checkProcessable("grey",ee),1===this.components&&(O="red"),Z&=this.alpha,Q&=this.alpha,Z&&(Q=!1);var te=S.default.createFrom(this,{components:1,alpha:Z,colorModel:null}),ae=R.methods[O.toLowerCase()];if(!ae)throw new Error("Unsupported grey algorithm: "+O);var ie=0;for(var ne=0;ne<this.data.length;ne+=this.channels)Q?te.data[ie++]=ae(this.data,ne,this)*this.data[ne+this.components]/this.maxValue:(te.data[ie++]=ae(this.data,ne,this),te.alpha&&(te.data[ie++]=this.data[ne+this.components]));return te};var I=_("../image"),S=function(T){return T&&T.__esModule?T:{default:T}}(I),C=_("../model/model"),R=_("./greyAlgorithms")},{"../image":156,"../model/model":161,"./greyAlgorithms":180}],180:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0});var I=D.methods={luma709:function(C,R){return 6966*C[R]+23436*C[R+1]+2366*C[R+2]>>15},luma601:function(C,R){return 9798*C[R]+19235*C[R+1]+3735*C[R+2]>>15},maximum:function(C,R){return Math.max(C[R],C[R+1],C[R+2])},minimum:function(C,R){return Math.min(C[R],C[R+1],C[R+2])},average:function(C,R){return(C[R]+C[R+1]+C[R+2])/3>>0},minmax:function(C,R){return(Math.max(C[R],C[R+1],C[R+2])+Math.min(C[R],C[R+1],C[R+2]))/2},red:function(C,R){return C[R]},green:function(C,R){return C[R+1]},blue:function(C,R){return C[R+2]},cyan:function(C,R,E){var T=I.black(C,R,E);return(E.maxValue-C[0]-T)/(1-T/E.maxValue)>>0},magenta:function(C,R,E){var T=I.black(C,R,E);return(E.maxValue-C[1]-T)/(1-T/E.maxValue)>>0},yellow:function(C,R,E){var T=I.black(C,R,E);return(E.maxValue-C[2]-T)/(1-T/E.maxValue)>>0},black:function(C,R,E){return Math.min(E.maxValue-C[R],E.maxValue-C[R+1],E.maxValue-C[R+2])},hue:function(C,R,E){var T=I.min(C,R),L=I.max(C,R);if(L===T)return 0;var S=0,O=L-T;return L===C[R]?S=(C[R+1]-C[R+2])/O+(C[R+1]<C[R+2]?6:0):L===C[R+1]?S=(C[R+2]-C[R])/O+2:L===C[R+2]?S=(C[R]-C[R+1])/O+4:void 0,S/6*E.maxValue>>0},saturation:function(C,R,E){var T=I.min(C,R),L=I.max(C,R);return 0===L?0:(L-T)/L*E.maxValue},lightness:function(C,R){var E=I.min(C,R),T=I.max(C,R);return(T+E)/2}};Object.defineProperty(I,"luminosity",{enumerable:!1,value:I.lightness}),Object.defineProperty(I,"luminance",{enumerable:!1,value:I.lightness}),Object.defineProperty(I,"min",{enumerable:!1,value:I.minimum}),Object.defineProperty(I,"max",{enumerable:!1,value:I.maximum}),Object.defineProperty(I,"brightness",{enumerable:!1,value:I.maximum}),D.names=Object.keys(I)},{}],181:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[I.RGB]});var E=C.default.createFrom(this,{colorModel:I.HSL}),T=Math.floor(this.maxValue/2),L=0,O=this.data;for(var G=0;G<O.length;G+=this.channels){var Z=O[G],W=O[G+1],Q=O[G+2],J=Math.max(Z,W,Q),$=Math.min(Z,W,Q),ee=0,te=0,ae=(J+$)/2;if(J!==$){var ie=J-$;te=ae>T?ie/(2-J-$):ie/(J+$);J===Z?ee=(W-Q)/ie+(W<Q?6:0):J===W?ee=(Q-Z)/ie+2:J===Q?ee=(Z-W)/ie+4:void 0;ee/=6}E.data[L++]=ee*this.maxValue,E.data[L++]=te*this.maxValue,E.data[L++]=ae,this.alpha&&(E.data[L++]=O[G+3])}return E};var I=_("../model/model"),S=_("../image"),C=function(E){return E&&E.__esModule?E:{default:E}}(S)},{"../image":156,"../model/model":161}],182:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[I.RGB]});var E=C.default.createFrom(this,{colorModel:I.HSV}),T=0,L=this.data;for(var O=0;O<L.length;O+=this.channels){var G=L[O],Z=L[O+1],W=L[O+2],Q=Math.min(G,Z,W),J=Math.max(G,Z,W),$=J-Q,ee=0,te=0===J?0:$/J;J!==Q&&(J===G?ee=(Z-W)/$+(Z<W?6:0):J===Z?ee=(W-G)/$+2:J===W?ee=(G-Z)/$+4:void 0,ee/=6);E.data[T++]=ee*this.maxValue,E.data[T++]=te*this.maxValue,E.data[T++]=J,this.alpha&&(E.data[T++]=L[O+3])}return E};var I=_("../model/model"),S=_("../image"),C=function(E){return E&&E.__esModule?E:{default:E}}(S)},{"../image":156,"../model/model":161}],183:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S){var C=0;for(var R=0;R<S.length;R++)if(0!==S[R]){C=R;break}var E=S.length-1;for(var T=S.length-1;T>=C;T--)if(0!==S[T]){E=T;break}var L=1/(E-C),O=Array(S.length),G=0,Z=0;for(var W=C;W<S.length;W++)G+=W*S[W],Z+=S[W],O[W]=G/Z;var Q=Array(S.length);G=Z=0;for(var J=E;0<J;J--)G+=J*S[J],Z+=S[J],Q[J-1]=G/Z;var $=-1,ee=Number.MAX_VALUE;for(var te=0;te<S.length;te++){var ae=0,ie=void 0;for(var ne=0;ne<=te;ne++)ie=1/(1+L*Math.abs(ne-O[te])),0.000001>ie||0.999999<ie||(ae+=S[ne]*(-ie*Math.log(ie)-(1-ie)*Math.log(1-ie)));for(var le=te+1;le<S.length;le++)ie=1/(1+L*Math.abs(le-Q[te])),0.000001>ie||0.999999<ie||(ae+=S[le]*(-ie*Math.log(ie)-(1-ie)*Math.log(1-ie)));ae<ee&&(ee=ae,$=te)}return $}},{}],184:[function(_,P,D){"use strict";function I(S){var C=!1,R=0;for(var E=1;E<S.length-1;E++)if(S[E-1]<S[E]&&S[E+1]<S[E]&&(R++,2<R))return!1;return 2==R&&(C=!0),C}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(C){for(var R=C.slice(),E=0;!I(R);){var T=0,L=0,O=R[0];for(var G=0;G<C.length-1;G++)T=L,L=O,O=R[G+1],R[G]=(T+L+O)/3;if(R[C.length-1]=(L+O)/3,E++,10000<E)throw new Error("Intermodes Threshold not found after 10000 iterations")}var Z=0;for(var W=1;W<C.length-1;W++)R[W-1]<R[W]&&R[W+1]<R[W]&&(Z+=W);return Math.floor(Z/2)}},{}],185:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S){var C=void 0,R=void 0,E=void 0,T=void 0,L=0;for(var O=1;O<S.length;O++)if(0<S[O]){L=O+1;break}for(;!0;){C=0,E=0;for(var G=0;G<L;G++)E=E+S[G],C=C+S[G]*G;T=0,R=0;for(var Z=L+1;Z<S.length;Z++)R+=S[Z],T+=S[Z]*Z;if(0<E&&0<R&&(C/=E,T/=R,L===Math.round((C+T)/2)))break;if(L++,L>S.length-2)throw new Error("Threshold not found")}return L}},{}],186:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S,C){var R=void 0,E=void 0,T=void 0,L=void 0,O=void 0,G=void 0,Z=void 0,W=void 0,Q=void 0,J=void 0,$=void 0,ee=void 0;$=0.5,J=0;for(var te=0;te<S.length;te++)J+=te*S[te];J/=C,Z=J;do{G=Z,R=0|G+0.5,E=0,L=0;for(var ae=0;ae<=R;ae++)E+=ae*S[ae],L+=S[ae];W=0===L?0:E/L,T=0,O=0;for(var ie=R+1;ie<S.length;ie++)T+=ie*S[ie],O+=S[ie];Q=0===O?0:T/O,ee=(W-Q)/(Math.log(W)-Math.log(Q)),Z=ee<-Number.EPSILON?0|ee-0.5:0|ee+0.5}while(Math.abs(Z-G)>$);return R}},{}],187:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var T=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],L=T.algorithm,O=void 0===L?"threshold":L,G=T.threshold,Z=void 0===G?0.5:G,W=T.useAlpha,Q=void 0===W||W,J=T.invert,$=void 0!==J&&J;if(this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),"threshold"===O)Z=(0,R.getThreshold)(Z,this.maxValue);else{var ee=C.methods[O];if(ee){var te=this.getHistogram();Z=ee(te,this.size)}else throw new Error("mask transform unknown algorithm: "+O)}var ae=new S.default(this.width,this.height,{kind:"BINARY",parent:this}),ie=0;if(this.alpha&&Q)for(var ne=0;ne<this.data.length;ne+=this.channels){var le=this.data[ne]+(this.maxValue-this.data[ne])*(this.maxValue-this.data[ne+1])/this.maxValue;($&&le<=Z||!$&&le>=Z)&&ae.setBit(ie),ie++}else for(var oe=0;oe<this.data.length;oe+=this.channels)($&&this.data[oe]<=Z||!$&&this.data[oe]>=Z)&&ae.setBit(ie),ie++;return ae};var I=_("../../image"),S=function(T){return T&&T.__esModule?T:{default:T}}(I),C=_("./maskAlgorithms"),R=_("../../../util/converter")},{"../../../util/converter":232,"../../image":156,"./maskAlgorithms":188}],188:[function(_,P,D){"use strict";function I(xe){return xe&&xe.__esModule?xe:{default:xe}}Object.defineProperty(D,"__esModule",{value:!0}),D.names=D.methods=void 0;var S=_("./huang"),C=I(S),R=_("./intermodes"),E=I(R),T=_("./isodata"),L=I(T),O=_("./li"),G=I(O),Z=_("./maxEntropy"),W=I(Z),Q=_("./mean"),J=I(Q),$=_("./minError"),ee=I($),te=_("./minimum"),ae=I(te),ie=_("./moments"),ne=I(ie),le=_("./otsu"),oe=I(le),se=_("./percentile"),de=I(se),he=_("./renyiEntropy.js"),ue=I(he),me=_("./shanbhag"),ge=I(me),ce=_("./triangle"),pe=I(ce),fe=_("./yen"),_e=I(fe),be=D.methods={huang:C.default,intermodes:E.default,isodata:L.default,li:G.default,maxEntropy:W.default,mean:J.default,minError:ee.default,minimum:ae.default,moments:ne.default,otsu:oe.default,percentile:de.default,renyiEntropy:ue.default,shanbhag:ge.default,triangle:pe.default,yen:_e.default};D.names=["threshold"].concat(Object.keys(be))},{"./huang":183,"./intermodes":184,"./isodata":185,"./li":186,"./maxEntropy":189,"./mean":190,"./minError":191,"./minimum":192,"./moments":193,"./otsu":194,"./percentile":195,"./renyiEntropy.js":196,"./shanbhag":197,"./triangle":198,"./yen":199}],189:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S,C){var R=Array(S.length);for(var E=0;E<S.length;E++)R[E]=S[E]/C;var T=Array(S.length),L=Array(S.length);T[0]=R[0],L[0]=1-T[0];for(var O=1;O<S.length;O++)T[O]=T[O-1]+R[O],L[O]=1-T[O];var G=0;for(var Z=0;Z<S.length;Z++)if(Math.abs(T[Z])>=Number.EPSILON){G=Z;break}var W=S.length-1;for(var Q=S.length-1;Q>=G;Q--)if(Math.abs(L[Q])>=Number.EPSILON){W=Q;break}var J=-1,$=void 0,ee=Number.MIN_VALUE,te=void 0,ae=void 0;for(var ie=G;ie<=W;ie++){te=0;for(var ne=0;ne<=ie;ne++)0!==S[ne]&&(te-=R[ne]/T[ie]*Math.log(R[ne]/T[ie]));ae=0;for(var le=ie+1;le<S.length;le++)0!==S[le]&&(ae-=R[le]/L[ie]*Math.log(R[le]/L[ie]));$=te+ae,ee<$&&(ee=$,J=ie)}return J}},{}],190:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S,C){var R=0;for(var E=0;E<S.length;E++)R+=E*S[E];return Math.floor(R/C)}},{}],191:[function(_,P,D){"use strict";function I(R,E){var T=0;for(var L=0;L<=E;L++)T+=R[L];return T}function S(R,E){var T=0;for(var L=0;L<=E;L++)T+=L*R[L];return T}function C(R,E){var T=0;for(var L=0;L<=E;L++)T+=L*L*R[L];return T}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(E,T){var L=void 0,O=-2,G=void 0,Z=void 0,W=void 0,Q=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,le=0;for(var oe=0;oe<E.length;oe++)le+=oe*E[oe];for(le/=T,L=le;L!==O;){var se=I(E,L),de=I(E,E.length-1),he=S(E,L),ue=S(E,E.length-1),me=C(E,L),ge=C(E,E.length-1);if(G=he/se,Z=(ue-he)/(de-se),W=se/de,Q=(de-se)/de,J=me/se-G*G,$=(ge-me)/(de-se)-Z*Z,ee=1/J-1/$,te=G/J-Z/$,ae=G*G/J-Z*Z/$+Math.log10(J*(Q*Q)/($*(W*W))),ie=te*te-ee*ae,0>ie)return L;O=L,ne=(te+Math.sqrt(ie))/ee,L=isNaN(ne)?O:Math.floor(ne)}return L}},{}],192:[function(_,P,D){"use strict";function I(R){var E=Array(R.length);for(var T=1;T<R.length-1;T++)E[T]=(R[T-1]+R[T]+R[T+1])/3;return E[0]=(R[0]+R[1])/3,E[R.length-1]=(R[R.length-2]+R[R.length-1])/3,E}function S(R,E){var T=void 0;for(var L=1;L<E;L++)if(R[L-1]>R[L]&&R[L+1]>=R[L]){T=L;break}return T}function C(R){var E=R.length,T=!1,L=0;for(var O=1;O<E-1;O++)if(R[O-1]<R[O]&&R[O+1]<R[O]&&(L++,2<L))return!1;return 2==L&&(T=!0),T}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(E){if(2>E.length)return 0;var T=0,L=-1,O=-1,G=Array(E.length);for(var Z=0;Z<E.length;Z++)G[Z]=E[Z],0<E[Z]&&(O=Z);for(;!C(G);)if(G=I(G),T++,10000<T)return L;return L=S(G,O),L}},{}],193:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S,C){var R=1,E=0,T=0,L=0,O=0,G=void 0,Z=void 0,W=void 0,Q=void 0,J=void 0,$=void 0,ee=-1,te=S.length,ae=Array(te);for(var ie=0;ie<te;ie++)ae[ie]=S[ie]/C;for(var ne=0;ne<te;ne++)E+=ne*ae[ne],T+=ne*ne*ae[ne],L+=ne*ne*ne*ae[ne];Z=R*T-E*E,W=(-T*T+E*L)/Z,Q=(R*-L+T*E)/Z,J=0.5*(-Q-Math.sqrt(Q*Q-4*W)),$=0.5*(-Q+Math.sqrt(Q*Q-4*W)),G=($-E)/($-J);for(var le=0;le<te;le++)if(O+=ae[le],O>G){ee=le;break}return ee}},{}],194:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S,C){var R=0,E=0,T=0,L=0,O=void 0,G=void 0,Z=0,W=0,Q=0;for(var J=1;J<S.length;++J)R+=J*S[J];for(var $=1;$<S.length;++$)if(T+=S[$],0!=T){if(L=C-T,0==L)break;E+=$*S[$],O=E/T,G=(R-E)/L,W=T*L*(O-G)*(O-G),W>=Z&&(Q=$,Z=W)}return Q}},{}],195:[function(_,P,D){"use strict";function I(S,C){var R=0;for(var E=0;E<=C;E++)R+=S[E];return R}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S){var C=-1,R=Array(S.length),E=I(S,S.length-1),T=1;for(var L=0;L<S.length;L++)R[L]=Math.abs(I(S,L)/E-0.5),R[L]<T&&(T=R[L],C=L);return C}},{}],196:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S,C){var R=void 0,E=void 0,T=void 0,L=Array(S.length),O=Array(S.length),G=Array(S.length),Z=0,W=0,Q=0,J=0,$=0,ee=0;for(var te=0;te<S.length;te++)L[te]=S[te]/C;O[0]=L[0],G[0]=1-O[0];for(var ae=1;ae<S.length;ae++)O[ae]=O[ae-1]+L[ae],G[ae]=1-O[ae];E=0;for(var ie=0;ie<S.length;ie++)if(Math.abs(O[ie])>=Number.EPSILON){E=ie;break}T=S.length-1;for(var ne=S.length-1;ne>=E;ne--)if(Math.abs(G[ne])>=Number.EPSILON){T=ne;break}for(var le=E;le<=T;le++){var oe=0,se=0,de=0;for(var he=0;he<=le;he++)0!==S[he]&&(oe-=L[he]/O[le]*Math.log(L[he]/O[le])),se+=Math.sqrt(L[he]/O[le]),de+=L[he]*L[he]/(O[le]*O[le]);var ue=0,me=0,ge=0;for(var ce=le+1;ce<S.length;ce++)0!==S[ce]&&(ue-=L[ce]/G[le]*Math.log(L[ce]/G[le])),me+=Math.sqrt(L[ce]/G[le]),ge+=L[ce]*L[ce]/(G[le]*G[le]);var pe=oe+ue,fe=2*(0<se*me?Math.log(se*me):0),_e=-1*(0<de*ge?Math.log(de*ge):0);pe>J&&(J=pe,Z=le),fe>$&&($=fe,W=le),_e>ee&&(ee=_e,Q=le)}var be=[Z,W,Q];be.sort((ke,we)=>ke-we);var xe=void 0;xe=5>=Math.abs(be[0]-be[1])?5>=Math.abs(be[1]-be[2])?[1,2,1]:[0,1,3]:5>=Math.abs(be[1]-be[2])?[3,1,0]:[1,2,1];var ye=O[be[2]]-O[be[0]];return R=Math.round(be[0]*(O[be[0]]+0.25*ye*xe[0])+0.25*be[1]*ye*xe[1]+be[2]*(G[be[2]]+0.25*ye*xe[2])),R}},{}],197:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S,C){var R=Array(S.length);for(var E=0;E<S.length;E++)R[E]=S[E]/C;var T=Array(S.length),L=Array(S.length);T[0]=R[0],L[0]=1-T[0];for(var O=1;O<S.length;O++)T[O]=T[O-1]+R[O],L[O]=1-T[O];var G=0;for(var Z=0;Z<S.length;Z++)if(Math.abs(T[Z])>=Number.EPSILON){G=Z;break}var W=S.length-1;for(var Q=S.length-1;Q>=G;Q--)if(Math.abs(L[Q])>=Number.EPSILON){W=Q;break}var J=-1,$=Number.MAX_VALUE,ee=void 0,te=void 0,ae=void 0,ie=void 0;for(var ne=G;ne<=W;ne++){ae=0,ee=0.5/T[ne];for(var le=1;le<=ne;le++)ae-=R[le]*Math.log(1-ee*T[le-1]);ae*=ee,ie=0,ee=0.5/L[ne];for(var oe=ne+1;oe<S.length;oe++)ie-=R[oe]*Math.log(1-ee*L[oe]);ie*=ee,te=Math.abs(ae-ie),te<$&&($=te,J=ne)}return J}},{}],198:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S){var C=0,R=0,E=0,T=0;for(var L=0;L<S.length;L++)if(0<S[L]){C=L;break}0<C&&C--;for(var O=S.length-1;0<O;O--)if(0<S[O]){T=O;break}T<S.length-1&&T++;for(var G=0;G<S.length;G++)S[G]>R&&(E=G,R=S[G]);var Z=!1;if(E-C<T-E){Z=!0;for(var W=0,Q=S.length-1;W<Q;){var J=S[W];S[W]=S[Q],S[Q]=J,W++,Q--}C=S.length-1-T,E=S.length-1-E}if(C===E)return C;var $=void 0,ee=void 0,te=void 0;$=S[E],ee=C-E,te=Math.sqrt($*$+ee*ee),$/=te,ee/=te,te=$*C+ee*S[C];var ae=C,ie=0;for(var ne=C+1;ne<=E;ne++){var le=$*ne+ee*S[ne]-te;le>ie&&(ae=ne,ie=le)}if(ae--,Z){for(var oe=0,se=S.length-1;oe<se;){var de=S[oe];S[oe]=S[se],S[se]=de,oe++,se--}return S.length-1-ae}return ae}},{}],199:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S,C){var R=Array(S.length);for(var E=0;E<S.length;E++)R[E]=S[E]/C;var T=Array(S.length);T[0]=R[0];for(var L=1;L<S.length;L++)T[L]=T[L-1]+R[L];var O=Array(S.length);O[0]=R[0]*R[0];for(var G=1;G<S.length;G++)O[G]=O[G-1]+R[G]*R[G];var Z=Array(S.length);Z[S.length-1]=0;for(var W=S.length-2;0<=W;W--)Z[W]=Z[W+1]+R[W+1]*R[W+1];var Q=-1,J=Number.MIN_VALUE,$=void 0;for(var ee=0;ee<S.length;ee++)$=-1*(0<O[ee]*Z[ee]?Math.log(O[ee]*Z[ee]):0)+2*(0<T[ee]*(1-T[ee])?Math.log(T[ee]*(1-T[ee])):0),$>J&&(J=$,Q=ee);return Q}},{}],200:[function(_,P,D){"use strict";function I(O){return O&&O.__esModule?O:{default:O}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var G=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],Z=G.size,W=void 0===Z?0:Z,Q=G.algorithm,J=void 0===Q?"copy":Q,$=G.color;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===J){if($.length!==this.channels)throw new Error("pad: the color array must have the same length as the number of channels. Here: "+this.channels);for(var ee=0;ee<$.length;ee++)0===$[ee]&&($[ee]=0.001)}else $=(0,E.default)(this.channels,null);Array.isArray(W)||(W=[W,W]);var te=this.width+2*W[0],ae=this.height+2*W[1],ie=this.channels,ne=C.default.createFrom(this,{width:te,height:ae});(0,L.default)(this,ne,W[0],W[1]);for(var le=W[0];le<te-W[0];le++)for(var oe=0;oe<ie;oe++){var se=$[oe]||ne.data[(W[1]*te+le)*ie+oe];for(var de=0;de<W[1];de++)ne.data[(de*te+le)*ie+oe]=se;se=$[oe]||ne.data[((ae-W[1]-1)*te+le)*ie+oe];for(var he=ae-W[1];he<ae;he++)ne.data[(he*te+le)*ie+oe]=se}for(var ue=0;ue<ae;ue++)for(var me=0;me<ie;me++){var ge=$[me]||ne.data[(ue*te+W[0])*ie+me];for(var ce=0;ce<W[0];ce++)ne.data[(ue*te+ce)*ie+me]=ge;ge=$[me]||ne.data[(ue*te+te-W[0]-1)*ie+me];for(var pe=te-W[0];pe<te;pe++)ne.data[(ue*te+pe)*ie+me]=ge}return ne};var S=_("../image"),C=I(S),R=_("new-array"),E=I(R),T=_("../utility/copy"),L=I(T)},{"../image":156,"../utility/copy":206,"new-array":108}],201:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var T=0>=arguments.length||arguments[0]===void 0?0.5:arguments[0];1>=arguments.length||arguments[1]===void 0?{}:arguments[1],this.checkProcessable("resizeBinary",{bitDepth:[1]});var L=Math.floor(this.width*T),O=Math.floor(this.height*T),G=Math.round((this.width-L)/2),Z=Math.round((this.height-O)/2),W=S.default.createFrom(this,{kind:R.BINARY,width:L,height:O,position:[G,Z],parent:this});for(var Q=0;Q<this.width;Q++)for(var J=0;J<this.height;J++)this.getBitXY(Q,J)&&W.setBitXY(Math.floor(Q*T),Math.floor(J*T));return W};var I=_("../image"),S=function(T){return T&&T.__esModule?T:{default:T}}(I),C=_("../kindNames"),R=function(T){if(T&&T.__esModule)return T;var L={};if(null!=T)for(var O in T)Object.prototype.hasOwnProperty.call(T,O)&&(L[O]=T[O]);return L.default=T,L}(C)},{"../image":156,"../kindNames":158}],202:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var R=new S.default(this.width,this.height,{kind:"RGBA"});return R.data=this.getRGBAData(),R};var I=_("../image"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"../image":156}],203:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S,C,R){var E=this.width/C,T=this.height/R;for(var L=0;L<C;L++){var O=Math.floor((L+0.5)*E);for(var G=0;G<R;G++){var Z=Math.floor((G+0.5)*T);for(var W=0;W<this.channels;W++)S.setValueXY(L,G,W,this.getValueXY(O,Z,W))}}}},{}],204:[function(_,P,D){"use strict";function I(L){return L&&L.__esModule?L:{default:L}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var O=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],G=O.width,Z=G===void 0?this.width:G,W=O.height,Q=W===void 0?this.height:W,J=O.factor,$=J===void 0?1:J,ee=O.algorithm,te=ee===void 0?"nearestNeighbor":ee,ae=(0,T.factorDimensions)($,Z,Q),ie=ae.width,ne=ae.height,le=C.default.createFrom(this,{width:ie,height:ne});switch(te.toLowerCase()){case"nearestneighbor":case"nearestneighbour":E.default.call(this,le,ie,ne);break;default:throw new Error("Unsupported scale algorithm: "+te);}return le};var S=_("../../image"),C=I(S),R=_("./nearestNeighbor"),E=I(R),T=_("../../../util/converter")},{"../../../util/converter":232,"../../image":156,"./nearestNeighbor":203}],205:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var R=0>=arguments.length||arguments[0]===void 0?function($){return($[0]+$[1]+$[2])/3}:arguments[0],E=1>=arguments.length||arguments[1]===void 0?{}:arguments[1],T=E.mergeAlpha,L=T!==void 0&&T,O=E.keepAlpha,G=O!==void 0&&O;L&=this.alpha,G&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});var Z=S.default.createFrom(this,{components:1,alpha:G,colorModel:null}),W=0;for(var Q=0;Q<this.size;Q++){var J=R(this.getPixel(Q));L?Z.data[W++]=J*this.data[Q*this.channels+this.components]/this.maxValue:(Z.data[W++]=J,G&&(Z.data[W++]=this.data[Q*this.channels+this.components]))}return Z};var I=_("../image"),S=function(R){return R&&R.__esModule?R:{default:R}}(I);_("./../../util/channel")},{"../image":156,"./../../util/channel":230}],206:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S,C,R,E){var T=S.width,L=S.height,O=C.width;C.height;var G=S.channels;for(var Z=0;Z<T;Z++)for(var W=0;W<L;W++)for(var Q=0;Q<G;Q++){var J=(W*T+Z)*G+Q,$=((E+W)*O+R+Z)*G+Q;C.data[$]=S.data[J]}}},{}],207:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(R){var E=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],T=E.border;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==R.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==R.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==R.colorModel)throw new Error("Both images must have the same colorModel");for(var L=new S.default(R.width,R.height,-(1/0)),O=Math.floor(R.width/2),G=Math.floor(R.height/2),Z=O,W=G,Q=!1;!Q;){var J=L.localSearch(O,G,-(1/0));for(var $=0;$<J.length;$++){var ee=J[$],te=this.getSimilarity(R,{border:T,shift:[Z-ee[0],W-ee[1]]});L[ee[0]][ee[1]]=te}var ae=L.localMax(O,G);ae.position[0]!==O||ae.position[1]!==G?(O=ae.position[0],G=ae.position[1]):Q=!0}return[O-Z,G-W]};var I=_("../../util/matrix"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"../../util/matrix":237}],208:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(E){var T=1>=arguments.length||arguments[1]===void 0?{}:arguments[1],L=T.keepAlpha,O=L!==void 0&&L,G=T.mergeAlpha,Z=G!==void 0&&G;O&=this.alpha,Z&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),E=(0,C.validateChannel)(this,E);var W=S.default.createFrom(this,{components:1,alpha:O,colorModel:null}),Q=0;for(var J=0;J<this.data.length;J+=this.channels)Z?W.data[Q++]=this.data[J+E]*this.data[J+this.components]/this.maxValue:(W.data[Q++]=this.data[J+E],O&&(W.data[Q++]=this.data[J+this.components]));return W};var I=_("../image"),S=function(E){return E&&E.__esModule?E:{default:E}}(I),C=_("./../../util/channel")},{"../image":156,"./../../util/channel":230}],209:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(C){var R=1>=arguments.length||arguments[1]===void 0?0:arguments[1];this.checkProcessable("getColumn",{bitDepth:[8,16]}),this.checkColumn(C),this.checkChannel(R);var E=Array(this.height),T=0,L=this.width*this.channels;for(var O=R+C*this.channels;O<this.data.length;O+=L)E[T++]=this.data[O];return E};var I=_("../image");(function(C){return C&&C.__esModule?C:{default:C}})(I),_("./../../util/channel")},{"../image":156,"./../../util/channel":230}],210:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var R=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],E=R.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===E){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");E=0}var T=new S.default(this.height,this.width);for(var L=0;L<this.height;L++)for(var O=0;O<this.width;O++)T.set(L,O,this.getValueXY(O,L,E));return T};var I=_("ml-matrix"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"ml-matrix":80}],211:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var S=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],C=S.sampling,R=void 0===C?[10,10]:C,E=S.painted,T=void 0!==E&&E,L=S.mask;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(R)||(R=[R,R]);var O=R[0],G=R[1],Z=O*G,W=Array(Z),Q=Array(Z),J=this.width/O,$=this.height/G,ee=Math.floor(J/2),te=0;for(var ae=0;ae<O;ae++){var ie=Math.floor($/2);for(var ne=0;ne<G;ne++){var le=Math.round(ee),oe=Math.round(ie);(!L||L.getBitXY(le,oe))&&(W[te]=[le,oe],Q[te]=this.getPixelXY(le,oe),te++),ie+=$}ee+=J}W.length=te,Q.length=te;var se={xyS:W,zS:Q};return T&&(se.painted=this.rgba8().paintPoints(W)),se}},{}],212:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(C){var R=1>=arguments.length||arguments[1]===void 0?0:arguments[1];this.checkProcessable("getRow",{bitDepth:[8,16]}),this.checkRow(C),this.checkChannel(R);var E=Array(this.width),T=0,L=C*this.width*this.channels+R,O=L+this.width*this.channels;for(var G=L;G<O;G+=this.channels)E[T++]=this.data[G];return E};var I=_("../image");(function(C){return C&&C.__esModule?C:{default:C}})(I),_("./../../util/channel")},{"../image":156,"./../../util/channel":230}],213:[function(_,P,D){"use strict";function I(T){return T&&T.__esModule?T:{default:T}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(L){var O=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],G=O.shift,Z=void 0===G?[0,0]:G,W=O.average,Q=O.channels,J=O.defaultAlpha,$=O.normalize,ee=O.border,te=void 0===ee?[0,0]:ee;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(te)||(te=[te,te]),Q=(0,C.validateArrayOfChannels)(this,{channels:Q,defaultAlpha:J}),this.bitDepth!==L.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==L.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==L.colorModel)throw new Error("Both images must have the same colorModel");"undefined"==typeof W&&(W=!0);var ae=Math.max(te[0],-Z[0]),ie=Math.min(this.width-te[0],this.width-Z[0]),ne=Math.max(te[1],-Z[1]),le=Math.min(this.height-te[1],this.height-Z[1]),oe=(0,E.default)(Q.length,0);for(var se=0;se<Q.length;se++){var de=Q[se],he=$?this.sum[de]:Math.max(this.sum[de],L.sum[de]),ue=$?L.sum[de]:Math.max(this.sum[de],L.sum[de]);if(0!==he&&0!==ue)for(var me=ae;me<ie;me++)for(var ge=ne;ge<le;ge++){var ce=me*this.multiplierX+ge*this.multiplierY+de,pe=ce+Z[0]*this.multiplierX+Z[1]*this.multiplierY;oe[se]+=Math.min(this.data[ce]/he,L.data[pe]/ue)}}return W?oe.reduce((fe,_e)=>fe+_e)/oe.length:oe};var S=_("../image");I(S);var C=_("./../../util/channel"),R=_("new-array"),E=I(R)},{"../image":156,"./../../util/channel":230,"new-array":108}],214:[function(_,P,D){"use strict";function I(E){return E&&E.__esModule?E:{default:E}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var T=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],L=T.size,O=void 0===L?0:L,G=T.algorithm,Z=void 0===G?"copy":G,W=T.color;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===Z){if(W.length!==this.channels)throw new Error("setBorder: the color array must have the same length as the number of channels. Here: "+this.channels);for(var Q=0;Q<W.length;Q++)0===W[Q]&&(W[Q]=0.001)}else W=(0,R.default)(this.channels,null);Array.isArray(O)||(O=[O,O]);var J=O[0],$=O[1],ee=this.channels;for(var te=J;te<this.width-J;te++)for(var ae=0;ae<ee;ae++){var ie=W[ae]||this.data[(te+this.width*$)*ee+ae];for(var ne=0;ne<$;ne++)this.data[(ne*this.width+te)*ee+ae]=ie;ie=W[ae]||this.data[(te+this.width*(this.height-$-1))*ee+ae];for(var le=this.height-$;le<this.height;le++)this.data[(le*this.width+te)*ee+ae]=ie}for(var oe=0;oe<this.height;oe++)for(var se=0;se<ee;se++){var de=W[se]||this.data[(oe*this.width+J)*ee+se];for(var he=0;he<J;he++)this.data[(oe*this.width+he)*ee+se]=de;de=W[se]||this.data[(oe*this.width+this.width-J-1)*ee+se];for(var ue=this.width-J;ue<this.width;ue++)this.data[(oe*this.width+ue)*ee+se]=de}};var S=_("../image");I(S);var C=_("new-array"),R=I(C)},{"../image":156,"new-array":108}],215:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(R,E){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),E.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),E.width!==this.width||E.height!==this.height)throw new Error("Images must have exactly the same width and height");R=(0,S.validateChannel)(this,R);var T=R;for(var L=0;L<E.data.length;L++)this.data[T]=E.data[L],T+=this.channels};var I=_("../image");(function(R){return R&&R.__esModule?R:{default:R}})(I);var S=_("./../../util/channel")},{"../image":156,"./../../util/channel":230}],216:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(C){var R=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],E=R.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===E){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");E=0}if(!C.length||!C[0].length||this.width!==C.columns||this.height!==C.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(var T=0;T<this.height;T++)for(var L=0;L<this.width;L++)this.setValueXY(L,T,E,C.get(T,L))};var I=_("ml-matrix");(function(C){return C&&C.__esModule?C:{default:C}})(I)},{"ml-matrix":80}],217:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var R=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],E=R.preserveAlpha,T=void 0===E||E;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return[this.clone()];var L=[],O=this.data;if(this.alpha&&T)for(var G=0;G<this.components;G++){var Z=S.default.createFrom(this,{components:1,alpha:!0,colorModel:null}),W=0;for(var Q=0;Q<O.length;Q+=this.channels)Z.data[W++]=O[Q+G],Z.data[W++]=O[Q+this.components];L.push(Z)}else for(var J=0;J<this.channels;J++){var $=S.default.createFrom(this,{components:1,alpha:!1,colorModel:null}),ee=0;for(var te=0;te<O.length;te+=this.channels)$.data[ee++]=O[te+J];L.push($)}return L};var I=_("../image"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"../image":156}],218:[function(_,P,D){"use strict";var I=_("./image/environment");P.exports=D=_("./image/image").default,D.Stack=_("./stack/stack").default,D.Shape=_("./util/shape").default,D.Kernel=_("./kernel/kernel"),D.Static={grey:_("./image/transform/greyAlgorithms").names,mask:_("./image/transform/mask/maskAlgorithms").names},"browser"===I.env&&(D.Worker=_("./worker/worker").default)},{"./image/environment":136,"./image/image":156,"./image/transform/greyAlgorithms":180,"./image/transform/mask/maskAlgorithms":188,"./kernel/kernel":219,"./stack/stack":227,"./util/shape":238,"./worker/worker":242}],219:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0});var I=_("../util/kernels");Object.keys(I).forEach(function(C){"default"===C||Object.defineProperty(D,C,{enumerable:!0,get:function(){return I[C]}})});var S=_("./laplacianOfGaussian");Object.defineProperty(D,"laplacianOfGaussian",{enumerable:!0,get:function(){return S.laplacianOfGaussian}})},{"../util/kernels":236,"./laplacianOfGaussian":220}],220:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.laplacianOfGaussian=function(S,C,R){var E=Array(C),T=void 0,L=void 0,O=void 0,G=void 0;R||(R=100),R*=-1;var Z=(C-1)/2,W=2*S*S;for(T=0;T<C;T++)for(E[T]=Array(C),G=(T-Z)*(T-Z),L=0;L<C;L++)O=(L-Z)*(L-Z),E[T][L]=Math.round(R*(1-(O+G)/W)*Math.exp(-(O+G)/W));return E}},{}],221:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S){this.checkProcessable("min",{bitDepth:[8,16]});var I=this[0].getHistogram(S);for(var C=1;C<this.length;C++){var R=this[C].getHistogram(S);for(var E=0;E<I.length;E++)I[E]+=R[E]}return I}},{}],222:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(S){this.checkProcessable("min",{bitDepth:[8,16]});var I=this[0].getHistograms(S),C=I[0].length;for(var R=1;R<this.length;R++){var E=this[R].getHistograms(S);for(var T=0;T<I.length;T++)for(var L=0;L<C;L++)I[T][L]+=E[T][L]}return I}},{}],223:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var I=this[0].max;for(var S=1;S<this.length;S++)for(var C=0;C<I.length;C++)I[C]=Math.max(I[C],this[S].max[C]);return I}},{}],224:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("median",{bitDepth:[8,16]});var C=this.getHistograms({maxSlots:this[0].maxValue+1}),R=Array(C.length);for(var E=0;E<C.length;E++){var T=C[E];R[E]=(0,I.median)(T)}return R};var I=_("../../util/histogram")},{"../../util/histogram":234}],225:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var I=this[0].min;for(var S=1;S<this.length;S++)for(var C=0;C<I.length;C++)I[C]=Math.min(I[C],this[S].min[C]);return I}},{}],226:[function(_,P,D){"use strict";function I(te){return te&&te.__esModule?te:{default:te}}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(ae){ae.extendMethod("matchAndCrop",C.default),ae.extendMethod("getMin",E.default),ae.extendMethod("getMax",L.default),ae.extendMethod("getMedian",G.default),ae.extendMethod("getHistogram",W.default),ae.extendMethod("getHistograms",J.default),ae.extendMethod("getAverage",ee.default)};var S=_("./transform/matchAndCrop"),C=I(S),R=_("./compute/min"),E=I(R),T=_("./compute/max"),L=I(T),O=_("./compute/median"),G=I(O),Z=_("./compute/histogram"),W=I(Z),Q=_("./compute/histograms"),J=I(Q),$=_("./utility/average"),ee=I($)},{"./compute/histogram":221,"./compute/histograms":222,"./compute/max":223,"./compute/median":224,"./compute/min":225,"./transform/matchAndCrop":228,"./utility/average":229}],227:[function(_,P,D){"use strict";function I(G){return G&&G.__esModule?G:{default:G}}function S(G){if(Array.isArray(G)){for(var Z=0,W=Array(G.length);Z<G.length;Z++)W[Z]=G[Z];return W}return Array.from(G)}Object.defineProperty(D,"__esModule",{value:!0});var C=_("./extend"),R=I(C),E=_("../image/image"),T=I(E),L={configurable:!0,enumerable:!1,get:void 0};class O extends Array{constructor(G){if(Array.isArray(G)){super(G.length);for(var Z=0;Z<G.length;Z++)this[Z]=G[Z]}else"number"==typeof G?super(G):super();this.computed=null}static load(G){return Promise.all(G.map(T.default.load)).then(Z=>new O(Z))}static extendMethod(G,Z){var W=2>=arguments.length||void 0===arguments[2]?{}:arguments[2],Q=W.inPlace,J=void 0!==Q&&Q,$=W.returnThis,ee=void 0===$||$,te=W.partialArgs,ae=void 0===te?[]:te;return O.prototype[G]=J?function(){this.computed=null;for(var ie=arguments.length,ne=Array(ie),le=0;le<ie;le++)ne[le]=arguments[le];var oe=Z.apply(this,[].concat(S(ae),ne));return ee?this:oe}:function(){for(var ie=arguments.length,ne=Array(ie),le=0;le<ie;le++)ne[le]=arguments[le];return Z.apply(this,[].concat(S(ae),ne))},O}static extendProperty(G,Z){var W=2>=arguments.length||void 0===arguments[2]?{}:arguments[2],Q=W.partialArgs,J=void 0===Q?[]:Q;return L.get=function(){if(null===this.computed)this.computed={};else if(this.computed.hasOwnProperty(G))return this.computed[G];var $=Z.apply(this,J);return this.computed[G]=$,$},Object.defineProperty(O.prototype,G,L),O}checkProcessable(G){var Z=1>=arguments.length||arguments[1]===void 0?{}:arguments[1];if("string"!=typeof G)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError("The process: "+G+" can not be applied on an empty stack");this[0].checkProcessable(G,Z);for(var W=1;W<this.length;W++){if((Z.sameSize===void 0||Z.sameSize)&&this[0].width!==this[W].width)throw new TypeError("The process: "+G+" can not be applied if width is not identical in all images");if((void 0===Z.sameSize||Z.sameSize)&&this[0].height!==this[W].height)throw new TypeError("The process: "+G+" can not be applied if height is not identical in all images");if((void 0===Z.sameAlpha||Z.sameAlpha)&&this[0].alpha!==this[W].alpha)throw new TypeError("The process: "+G+" can not be applied if alpha is not identical in all images");if((void 0===Z.sameBitDepth||Z.sameBitDepth)&&this[0].bitDepth!==this[W].bitDepth)throw new TypeError("The process: "+G+" can not be applied if bitDepth is not identical in all images");if((void 0===Z.sameColorModel||Z.sameColorModel)&&this[0].colorModel!==this[W].colorModel)throw new TypeError("The process: "+G+" can not be applied if colorModel is not identical in all images");if((void 0===Z.sameNumberChannels||Z.sameNumberChannels)&&this[0].channels!==this[W].channels)throw new TypeError("The process: "+G+" can not be applied if channels is not identical in all images")}}}D.default=O,Array[Symbol.species]||(O.prototype.map=function(G,Z){if("function"!=typeof G)throw new TypeError(G+" is not a function");var W=new O(this.length);for(var Q=0;Q<this.length;Q++)W[Q]=G.call(Z,this[Q],Q,this);return W}),(0,R.default)(O)},{"../image/image":156,"./extend":226}],228:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var R=0>=arguments.length||arguments[0]===void 0?{}:arguments[0],E=R.algorithm,T=E===void 0?"matchToPrevious":E,L=R.ignoreBorder,O=L===void 0?[0,0]:L;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});var G=!("matchToPrevious"!==T),Z=this[0],W=[];W[0]={position:[0,0],image:this[0]};var Q=[0,0];for(var J=1;J<this.length;J++){var $=Z.getBestMatch(this[J],{border:O});W[J]={position:[$[0]+Q[0],$[1]+Q[1]],image:this[J]},G&&(Q[0]+=$[0],Q[1]+=$[1],Z=this[J])}var ee=0,te=0,ae=0,ie=0;for(var ne=0;ne<W.length;ne++){var le=W[ne];le.position[0]>ee&&(ee=le.position[0]),le.position[0]<te&&(te=le.position[0]),le.position[1]>ae&&(ae=le.position[1]),le.position[1]<ie&&(ie=le.position[1])}te*=-1,ie*=-1;for(var oe=0;oe<W.length;oe++){var se=W[oe];se.crop=se.image.crop({x:ee-se.position[0],y:ae-se.position[1],width:Z.width-te-ee,height:Z.height-ie-ae})}var de=[];for(var he=0;he<W.length;he++)de[he]=W[he].crop;return new S.default(de)};var I=_("../stack"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"../stack":227}],229:[function(_,P,D){"use strict";function I(R){if(null==R)throw new TypeError("Cannot destructure undefined")}Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(){var E=0>=arguments.length||arguments[0]===void 0?{}:arguments[0];I(E),this.checkProcessable("average",{bitDepth:[8,16]});var T=new Uint32Array(this[0].data.length);for(var L=0;L<this.length;L++){var O=this[L];for(var G=0;G<this[0].data.length;G++)T[G]+=O.data[G]}var Z=C.default.createFrom(this[0]),W=Z.data;for(var Q=0;Q<this[0].data.length;Q++)W[Q]=T[Q]/this.length;return Z};var S=_("../../image/image"),C=function(E){return E&&E.__esModule?E:{default:E}}(S)},{"../../image/image":156}],230:[function(_,P,D){"use strict";function I(T,L){var O=L?T.channels:T.components,G=Array(O);for(var Z=0;Z<O;Z++)G[Z]=Z;return G}function S(T,L,O){Array.isArray(L)||(L=[L]);for(var G=0;G<L.length;G++)L[G]=C(T,L[G],O);return L}function C(T,L){var O=2>=arguments.length||arguments[2]===void 0||arguments[2];if(L===void 0)throw new RangeError("validateChannel : the channel has to be >=0 and <"+T.channels);if("string"==typeof L){if(-1<"rgb".indexOf(L)){if(T.colorModel!==E.RGB)throw new Error("getChannel : not a RGB image");"r"===L?L=0:"g"===L?L=1:"b"===L?L=2:"h"===L?L=0:"s"===L?L=1:"l"===L||"v"===L?L=2:"c"===L?L=0:"m"===L?L=1:"y"===L?L=2:"k"===L?L=3:void 0}if("a"===L){if(!T.alpha)throw new Error("validateChannel : the image does not contain alpha channel");L=T.components}if("string"==typeof L)throw new Error("validateChannel : undefined channel: "+L)}if(L>=T.channels)throw new RangeError("validateChannel : the channel has to be >=0 and <"+T.channels);if(!O&&L>=T.components)throw new RangeError("validateChannel : alpha channel may not be selected");return L}Object.defineProperty(D,"__esModule",{value:!0}),D.validateArrayOfChannels=function(L){var O=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],G=O.channels,Z=O.allowAlpha,W=O.defaultAlpha;return"boolean"!=typeof Z&&(Z=!0),"undefined"==typeof G?I(L,W):S(L,G,Z)},D.validateChannel=C;var R=_("../image/model/model"),E=function(L){if(L&&L.__esModule)return L;var O={};if(null!=L)for(var G in L)Object.prototype.hasOwnProperty.call(L,G)&&(O[G]=L[G]);return O.default=L,O}(R)},{"../image/model/model":161}],231:[function(_,P,D){"use strict";function I(R,E,T){return 0>T&&(T+=1),1<T&&(T-=1),T<1/6?R+6*(E-R)*T:T<1/2?E:T<2/3?R+6*((E-R)*(2/3-T)):R}function S(R,E,T){var L=void 0,O=void 0,G=void 0,Z=void 0,W=void 0,Q=void 0;return E/=100,T/=100,0===E?Z=W=Q=255*T:(O=0.5>=T?T*(E+1):T+E-T*E,L=2*T-O,G=R/360,Z=I(L,O,G+1/3),W=I(L,O,G),Q=I(L,O,G-1/3)),{r:Z,g:W,b:Q}}Object.defineProperty(D,"__esModule",{value:!0}),D.css2array=function(E){var T=(0,C.cssColor)(E);return[T.r,T.g,T.b,Math.round(255*T.a/100)]},D.getDistinctColors=function(E){var T=Array(E),L=0;for(var O=0;360>O;O+=360/E){L++;var G=S(O,100,30+15*(L%4));T[L-1]=[Math.round(255*G.r),Math.round(255*G.g),Math.round(255*G.b)]}return T},D.getRandomColor=function(){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]};var C=_("color-functions")},{"color-functions":5}],232:[function(_,P,D){"use strict";function I(S){if("string"==typeof S){var C=S[S.length-1];S=parseFloat(S),"%"===C&&(S/=100)}return S}Object.defineProperty(D,"__esModule",{value:!0}),D.getFactor=I,D.getThreshold=function(C,R){if(!R)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof C){var E=C[C.length-1];if("%"!==E)throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(C)/100*R}if("number"==typeof C)return 1>C?C*R:C;throw Error("getThreshold : the value is not valid")},D.factorDimensions=function(C,R,E){return C=I(C),{width:Math.round(C*R),height:Math.round(C*E)}}},{}],233:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.dx=[1,0,-1,0,1,1,-1,-1],D.dy=[0,1,0,-1,1,-1,1,-1]},{}],234:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.median=function(S){var C=S.reduce((O,G)=>O+G);if(0>=C)return void 0;for(var R=0,E=0,T=C/2,L=void 0;!0;){if(0<S[R]){if(void 0!=L)return(L+R)/2;if(E+=S[R],E>T)return R;E==T&&(L=R)}R++}},D.mean=function(S){var C=0,R=0;for(var E=0;E<S.length;E++)C+=S[E],R+=S[E]*E;return 0>=C?void 0:R/C}},{}],235:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.validateKernel=function(R){var E=void 0,T=void 0;if(!Array.isArray(R))throw new Error("validateKernel: Invalid Kernel: "+R);else if(!Array.isArray(R[0])){var L=Math.sqrt(R.length);if((0,S.default)(L))T=E=Math.floor(Math.sqrt(R.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");var O=Array(L);for(var G=0;G<L;G++){O[G]=Array(L);for(var Z=0;Z<L;Z++)O[G][Z]=R[G*L+Z]}R=O}else if(0==(1&R.length)||0==(1&R[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");else E=Math.floor(R.length/2),T=Math.floor(R[0].length/2);return{kernel:R,kWidth:T,kHeight:E}};var I=_("is-integer"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"is-integer":47}],236:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.DISCRETE_LAPLACE_4=[[0,1,0],[1,-4,1],[0,1,0]],D.DISCRETE_LAPLACE_8=[[1,1,1],[1,-8,1],[1,1,1]],D.GRADIENT_X=[[-1,0,1],[-2,0,2],[-1,0,1]],D.GRADIENT_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],D.SECOND_DERIVATIVE=[[-1,-2,0,2,1],[-2,-4,0,4,2],[0,0,0,0,0],[1,2,0,-2,-1],[2,4,0,-4,-2]],D.SECOND_DERIVATIVE_INV=[[1,2,0,-2,-1],[2,4,0,-4,-2],[0,0,0,0,0],[-2,-4,0,4,2],[-1,-2,0,2,1]]},{}],237:[function(_,P,D){"use strict";function I(S,C,R){var E=Array(S);for(var T=0;T<S;T++)E[T]=Array(C);if(R)for(var L=0;L<S;L++)for(var O=0;O<C;O++)E[L][O]=R;return E.width=S,E.height=C,E.__proto__=I.prototype,E}Object.defineProperty(D,"__esModule",{value:!0}),D.default=I,I.prototype.localMin=function(S,C){var R=this[S][C],E=[S,C];for(var T=Math.max(0,S-1);T<Math.min(this.length,S+2);T++)for(var L=Math.max(0,C-1);L<Math.min(this[0].length,C+2);L++)this[T][L]<R&&(R=this[T][L],E=[T,L]);return{position:E,value:R}},I.prototype.localMax=function(S,C){var R=this[S][C],E=[S,C];for(var T=Math.max(0,S-1);T<Math.min(this.length,S+2);T++)for(var L=Math.max(0,C-1);L<Math.min(this[0].length,C+2);L++)this[T][L]>R&&(R=this[T][L],E=[T,L]);return{position:E,value:R}},I.prototype.localSearch=function(S,C,R){var E=[];for(var T=Math.max(0,S-1);T<Math.min(this.length,S+2);T++)for(var L=Math.max(0,C-1);L<Math.min(this[0].length,C+2);L++)this[T][L]===R&&E.push([T,L]);return E}},{}],238:[function(_,P,D){"use strict";function I(J){return J&&J.__esModule?J:{default:J}}function S(J,$,ee){var te=T.default.zeros($,J);if(ee.filled)for(var ae=0;ae<$;ae++)for(var ie=0;ie<J;ie++)te.set(ae,ie,1);else{for(var ne of[0,$-1])for(var le=0;le<J;le++)te.set(ne,le,1);for(var oe=0;oe<$;oe++)for(var se of[0,J-1])te.set(oe,se,1)}return te}function C(J,$,ee){var te=T.default.zeros($,J,ee),ae=1-$%2,ie=Math.floor((J-1)/2),ne=Math.floor(($-1)/2),le=ie*ie,oe=ne*ne;if(ee.filled)for(var se=0;se<=ne;se++){var de=Math.floor(Math.sqrt(le-le*se*se/oe));for(var he=ie-de;he<=ie;he++)te.set(ne-se,he,1),te.set(ne+se+ae,he,1),te.set(ne-se,J-he-1,1),te.set(ne+se+ae,J-he-1,1)}else{for(var ue=0;ue<=ne;ue++){var me=Math.floor(Math.sqrt(le-le*ue*ue/oe)),ge=ie-me;te.set(ne-ue,ge,1),te.set(ne+ue+ae,ge,1),te.set(ne-ue,J-ge-1,1),te.set(ne+ue+ae,J-ge-1,1)}for(var ce=0;ce<=ie;ce++){var pe=Math.floor(Math.sqrt(oe-oe*ce*ce/le)),fe=ne-pe;te.set(ne-fe,ce,1),te.set(ne+fe+ae,ce,1),te.set(ne-fe,J-ce-1,1),te.set(ne+fe+ae,J-ce-1,1)}}return te}function R(J,$,ee){if(!ee.filled)throw new Error("Non filled triangle is not implemented");var te=T.default.zeros($,J,ee);for(var ae=0;ae<$;ae++){var ie=Math.floor((1-ae/$)*J/2);for(var ne=ie;ne<J-ie;ne++)te.set(ae,ne,1)}return te}Object.defineProperty(D,"__esModule",{value:!0});var E=_("ml-matrix"),T=I(E),L=_("../image/image"),O=I(L),G=_("../image/kindNames"),Z=function($){if($&&$.__esModule)return $;var ee={};if(null!=$)for(var te in $)Object.prototype.hasOwnProperty.call($,te)&&(ee[te]=$[te]);return ee.default=$,ee}(G),W=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],Q=[[0,1,0],[1,1,1],[0,1,0]];D.default=class{constructor(){var $=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],ee=$.kind,te=void 0===ee?"cross":ee,ae=$.shape,ie=$.size,ne=$.width,le=$.height,oe=$.filled,se=void 0===oe||oe;if(ae&&(te=void 0),ie&&(ne=ie,le=ie),te)"cross"===te?this.matrix=W:"smallCross"===te?this.matrix=Q:void 0;else switch(ae){case"square":case"rectangle":this.matrix=S(ne,le,{filled:se});break;case"circle":case"ellipse":this.matrix=C(ne,le,{filled:se});break;case"triangle":this.matrix=R(ne,le,{filled:se});break;default:}this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){var $=this.matrix,ee=[];for(var te=0;te<$.length;te++)for(var ae=0;ae<$[0].length;ae++)$[te][ae]&&ee.push([ae-this.halfWidth,te-this.halfHeight]);return ee}getMask(){var $=new O.default(this.width,this.height,{kind:Z.BINARY});for(var ee=0;ee<this.matrix.length;ee++)for(var te=0;te<this.matrix[0].length;te++)this.matrix[ee][te]&&$.setBitXY(te,ee);return $}}},{"../image/image":156,"../image/kindNames":158,"ml-matrix":80}],239:[function(_,P,D){"use strict";function I(T){return T&&T.__esModule?T:{default:T}}Object.defineProperty(D,"__esModule",{value:!0}),D.checkNumberArray=function(L){if(!isNaN(L)){if(0>=L)throw new Error("checkNumberArray: the value must be greater than 0");return L}if(L instanceof C.default)return L.data;if(!(0,E.default)(L))throw new Error("checkNumberArray: the value should be either a number, array or Image");return L};var S=_("../image/image"),C=I(S),R=_("is-array-type"),E=I(R)},{"../image/image":156,"is-array-type":45}],240:[function(_,P,D){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(R){R.extendMethod("background",S.default)};var I=_("./process/background"),S=function(R){return R&&R.__esModule?R:{default:R}}(I)},{"./process/background":241}],241:[function(_,P,D){"use strict";function I(O){return O&&O.__esModule?O:{default:O}}function S(O,G,Z){return O.post("data",[G,Z]).then(function(W){for(var Q in W)W[Q]=new T.default(W[Q]);return W})}Object.defineProperty(D,"__esModule",{value:!0});var C=_("extend"),R=I(C),E=_("../../image/image"),T=I(E),L={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:0.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};D.default={run:function(G,Z,W){Z=(0,R.default)({},L,Z);var Q=this.manager;return Array.isArray(G)?Promise.all(G.map(function(J){var $=S(Q,J,Z);return"function"==typeof W&&$.then(W),$})):S(Q,G,Z)},work:function(){worker.on("data",function(G,Z,W){function Q(de,he){-1!==W.include.indexOf(de)&&(J[de]=he,$.push(he.data.buffer))}Z=new IJS(Z);var J={},$=[],ee=Z.grey(),te=ee.sobelFilter();Q("sobel",te);var ae=te.level().mask({threshold:W.threshold});Q("mask",ae);var ie=te.getROIManager();ie.fromMask(ae);var ne=ie.getMask(W.roi);Q("realMask",ne);var le=ee.getPixelsGrid({sampling:W.sampling,mask:ne}),oe=Z.getBackground(le.xyS,le.zS,W.regression);Q("background",oe);var se=Z.subtract(oe);J.result=se,$.push(se.data.buffer),G(J,$)})}}},{"../../image/image":156,extend:19}],242:[function(_,P,D){"use strict";function I(O){return O&&O.__esModule?O:{default:O}}Object.defineProperty(D,"__esModule",{value:!0});var S=_("web-worker-manager"),C=I(S),R=_("../image/image");I(R);var E=_("./extend"),T=I(E);class L{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(O){if("string"!=typeof O)throw new TypeError("worker URL must be a string");this._url=O,this._deps[0]=O}static extendMethod(O,G){function Z(){var $;W||(this.checkUrl(),Q=this.url,W=new C.default(G.work,{deps:Q}),J.manager=W);for(var ee=arguments.length,te=Array(ee),ae=0;ae<ee;ae++)te[ae]=arguments[ae];return($=G.run).call.apply($,[J].concat(te))}var W=void 0,Q=void 0,J={};Z.reset=function(){W&&(W.terminate(),W=new C.default(G.work,{deps:Q}),J.manager=W)},L.prototype[O]=Z}}(0,T.default)(L),D.default=new L},{"../image/image":156,"./extend":240,"web-worker-manager":121}]},{},[218])(218)});

//# sourceMappingURL=image.min.js.map