(function(I){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=I();else if("function"==typeof define&&define.amd)define([],I);else{var R;R="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,R.IJS=I()}})(function(){var define;return function I(R,T,L){function E(Z,Q){if(!T[Z]){if(!R[Z]){var $="function"==typeof require&&require;if(!Q&&$)return $(Z,!0);if(G)return G(Z,!0);var J=new Error("Cannot find module '"+Z+"'");throw J.code="MODULE_NOT_FOUND",J}var ee=T[Z]={exports:{}};R[Z][0].call(ee.exports,function(te){var ae=R[Z][1][te];return E(ae?ae:te)},ee,ee.exports,I,R,T,L)}return T[Z].exports}for(var G="function"==typeof require&&require,W=0;W<L.length;W++)E(L[W]);return E}({1:[function(I,R){(function(L){"use strict";var E=I("es-abstract/es6"),G=Number.isNaN||function(Q){return Q!==Q},W=Number.isFinite||function(Q){return"number"==typeof Q&&L.isFinite(Q)},Z=Array.prototype.indexOf;R.exports=function($){var J=1<arguments.length?E.ToInteger(arguments[1]):0;if(Z&&!G($)&&W(J)&&"undefined"!=typeof $)return-1<Z.apply(this,arguments);var ee=E.ToObject(this),te=E.ToLength(ee.length);if(0===te)return!1;for(var ae=0<=J?J:Math.max(0,te+J);ae<te;){if(E.SameValueZero($,ee[ae]))return!0;ae+=1}return!1}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"es-abstract/es6":24}],2:[function(I,R){"use strict";var L=I("define-properties"),E=I("es-abstract/es6"),G=I("./implementation"),W=I("./polyfill"),Z=W(),Q=I("./shim"),$=Array.prototype.slice,J=function(te){return E.RequireObjectCoercible(te),Z.apply(te,$.call(arguments,1))};L(J,{implementation:G,getPolyfill:W,shim:Q}),R.exports=J},{"./implementation":1,"./polyfill":3,"./shim":4,"define-properties":22,"es-abstract/es6":24}],3:[function(I,R){"use strict";var L=I("./implementation");R.exports=function(){return Array.prototype.includes||L}},{"./implementation":1}],4:[function(I,R){"use strict";var L=I("define-properties"),E=I("./polyfill");R.exports=function(){var W=E();return Array.prototype.includes!==W&&L(Array.prototype,{includes:W}),W}},{"./polyfill":3,"define-properties":22}],5:[function(I,R){"use strict";function L(ce){for(var pe=ce.length,ge=new ArrayBuffer(pe),fe=new Uint8Array(ge),_e=-1;++_e<pe;)fe[_e]=ce.charCodeAt(_e);return ge}function E(ce){for(var pe="",ge=new Uint8Array(ce),fe=ge.byteLength,_e=-1;++_e<fe;)pe+=String.fromCharCode(ge[_e]);return pe}function G(ce,pe){return new he(function(ge,fe){var _e=new Image;pe&&(_e.crossOrigin=pe),_e.onload=function(){ge(_e)},_e.onerror=fe,_e.src=ce})}function W(ce){var pe=document.createElement("canvas");pe.width=ce.width,pe.height=ce.height;var ge=pe.getContext("2d");return ge.drawImage(ce,0,0,ce.width,ce.height,0,0,ce.width,ce.height),pe}function Z(ce,pe){return pe=pe||{},"string"==typeof pe&&(pe={type:pe}),new ue(ce,pe)}function J(ce){return new he(function(pe,ge){var fe=new FileReader,_e="function"==typeof fe.readAsBinaryString;fe.onloadend=function(be){var ye=be.target.result||"";return _e?pe(ye):void pe(E(ye))},fe.onerror=ge,_e?fe.readAsBinaryString(ce):fe.readAsArrayBuffer(ce)})}function ee(ce,pe){return he.resolve().then(function(){var ge=[L(atob(ce))];return pe?Z(ge,{type:pe}):Z(ge)})}function ie(ce){return he.resolve().then(function(){var pe=ce.match(/data:([^;]+)/)[1],ge=ce.replace(/^[^,]+,/,""),fe=L(atob(ge));return Z([fe],{type:pe})})}function oe(ce,pe,ge){return he.resolve().then(function(){return"function"==typeof ce.toBlob?new he(function(fe){ce.toBlob(fe,pe,ge)}):ie(ce.toDataURL(pe,ge))})}var ue=I("blob"),he=I("native-or-lie");R.exports={createBlob:Z,createObjectURL:function(ce){return(window.URL||window.webkitURL).createObjectURL(ce)},revokeObjectURL:function(ce){return(window.URL||window.webkitURL).revokeObjectURL(ce)},imgSrcToBlob:function(ce,pe,ge,fe){return pe=pe||"image/png",G(ce,ge).then(function(_e){return W(_e)}).then(function(_e){return oe(_e,pe,fe)})},imgSrcToDataURL:function(ce,pe,ge,fe){return pe=pe||"image/png",G(ce,ge).then(function(_e){return W(_e)}).then(function(_e){return _e.toDataURL(pe,fe)})},canvasToBlob:oe,dataURLToBlob:ie,blobToBase64String:function(ce){return J(ce).then(function(pe){return btoa(pe)})},base64StringToBlob:ee,binaryStringToBlob:function(ce,pe){return he.resolve().then(function(){return ee(btoa(ce),pe)})},blobToBinaryString:J,arrayBufferToBlob:function(ce,pe){return he.resolve().then(function(){return Z([ce],pe)})},blobToArrayBuffer:function(ce){return new he(function(pe,ge){var fe=new FileReader;fe.onloadend=function(_e){var be=_e.target.result||new ArrayBuffer(0);pe(be)},fe.onerror=ge,fe.readAsArrayBuffer(ce)})}}},{blob:6,"native-or-lie":117}],6:[function(I,R){(function(L){"use strict";function E(ee){for(var te=0,ae;te<ee.length;te++)if(ae=ee[te],ae.buffer instanceof ArrayBuffer){var ie=ae.buffer;if(ae.byteLength!==ie.byteLength){var ne=new Uint8Array(ae.byteLength);ne.set(new Uint8Array(ie,ae.byteOffset,ae.byteLength)),ie=ne.buffer}ee[te]=ie}}function G(ee,te){te=te||{};var ae=new Z;E(ee);for(var ie=0;ie<ee.length;ie++)ae.append(ee[ie]);return te.type?ae.getBlob(te.type):ae.getBlob()}function W(ee,te){return E(ee),new Blob(ee,te||{})}var Z=L.BlobBuilder||L.WebKitBlobBuilder||L.MSBlobBuilder||L.MozBlobBuilder,Q=function(){try{var ee=new Blob(["hi"]);return 2===ee.size}catch(te){return!1}}(),$=Q&&function(){try{var ee=new Blob([new Uint8Array([1,2])]);return 2===ee.size}catch(te){return!1}}(),J=Z&&Z.prototype.append&&Z.prototype.getBlob;R.exports=function(){return Q?$?L.Blob:W:J?G:void 0}()}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],7:[function(){"use strict"},{}],8:[function(I,R){"use strict";R.exports={hex2rgb:I("./lib/hex2rgb"),hsv2hex:I("./lib/hsv2hex"),hsv2rgb:I("./lib/hsv2rgb"),rgb2hex:I("./lib/rgb2hex"),rgb2hsv:I("./lib/rgb2hsv"),rgba:I("./lib/rgba"),rgba2rgb:I("./lib/rgba2rgb"),rgba2hex:I("./lib/rgba2hex"),hsl2hsv:I("./lib/hsl2hsv"),hsv2hsl:I("./lib/hsv2hsl"),hsl2rgb:I("./lib/hsl2rgb"),cssColor:I("./lib/css-color")}},{"./lib/css-color":10,"./lib/hex2rgb":11,"./lib/hsl2hsv":12,"./lib/hsl2rgb":13,"./lib/hsv2hex":14,"./lib/hsv2hsl":15,"./lib/hsv2rgb":16,"./lib/rgb2hex":17,"./lib/rgb2hsv":18,"./lib/rgba":19,"./lib/rgba2hex":20,"./lib/rgba2rgb":21}],9:[function(I,R){"use strict";R.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}},{}],10:[function(I,R){"use strict";function E(ae){var ie=te[ae.toLowerCase()];return ie?{r:ie[0],g:ie[1],b:ie[2],a:100}:void 0}function G(ae){if(0==ae.indexOf("rgb(")){ae=ae.match(/rgb\(([^)]+)\)/)[1];var ie=ae.split(/ *, */).map(Number);return{r:ie[0],g:ie[1],b:ie[2],a:100}}}function W(ae){if(0===ae.indexOf("rgba(")){ae=ae.match(/rgba\(([^)]+)\)/)[1];var ie=ae.split(/ *, */).map(Number);return{r:ie[0],g:ie[1],b:ie[2],a:100*ie[3]}}}function Z(ae){if("#"===ae[0]&&7===ae.length)return{r:parseInt(ae.slice(1,3),16),g:parseInt(ae.slice(3,5),16),b:parseInt(ae.slice(5,7),16),a:100}}function Q(ae){if("#"===ae[0]&&4===ae.length)return{r:parseInt(ae[1]+ae[1],16),g:parseInt(ae[2]+ae[2],16),b:parseInt(ae[3]+ae[3],16),a:100}}function $(ae){if(0===ae.indexOf("hsl(")){ae=ae.match(/hsl\(([^)]+)\)/)[1];var ie=ae.split(/ *, */),ne=parseInt(ie[0],10),oe=parseInt(ie[1],10),le=parseInt(ie[2],10),se=ee(ne,oe,le);return se.a=100,se}}function J(ae){if(0===ae.indexOf("hsla(")){ae=ae.match(/hsla\(([^)]+)\)/)[1];var ie=ae.split(/ *, */),ne=parseInt(ie[0],10),oe=parseInt(ie[1],10),le=parseInt(ie[2],10),se=parseInt(100*ie[3],10),de=ee(ne,oe,le);return de.a=se,de}}var ee=I("./hsl2rgb"),te=I("./_colors");R.exports=function(ae){return E(ae)||Q(ae)||Z(ae)||G(ae)||W(ae)||$(ae)||J(ae)}},{"./_colors":9,"./hsl2rgb":13}],11:[function(I,R){"use strict";R.exports=function(L){return("#"===L[0]&&(L=L.substr(1)),6===L.length)?{r:parseInt(L.substr(0,2),16),g:parseInt(L.substr(2,2),16),b:parseInt(L.substr(4,2),16)}:3===L.length?{r:parseInt(L[0]+L[0],16),g:parseInt(L[1]+L[1],16),b:parseInt(L[2]+L[2],16)}:void 0}},{}],12:[function(I,R){"use strict";R.exports=function(L,E,G){return E*=(50>G?G:100-G)/100,console.log("s",E),{h:L,s:100*(2*E/(G+E)),v:G+E}}},{}],13:[function(I,R){"use strict";var L=I("./hsl2hsv"),E=I("./hsv2rgb");R.exports=function(G,W,Z){var Q=L(G,W,Z);return E(Q.h,Q.s,Q.v)}},{"./hsl2hsv":12,"./hsv2rgb":16}],14:[function(I,R){"use strict";var L=I("./hsv2rgb"),E=I("./rgb2hex");R.exports=function(G,W,Z){var Q=L(G,W,Z);return E(Q.r,Q.g,Q.b)}},{"./hsv2rgb":16,"./rgb2hex":17}],15:[function(I,R){"use strict";R.exports=function(L,E,G){var W=(200-E)*G/100;return{h:L,s:E*G/(100>W?W:200-W),l:W/2}}},{}],16:[function(I,R){"use strict";R.exports=function(L,E,G){var E=E/100,G=G/100,W=[],Z=G*E,Q=L/60,$=Z*(1-Math.abs(Q%2-1)),J=G-Z;switch(parseInt(Q,10)){case 0:W=[Z,$,0];break;case 1:W=[$,Z,0];break;case 2:W=[0,Z,$];break;case 3:W=[0,$,Z];break;case 4:W=[$,0,Z];break;case 5:W=[Z,0,$];}return{r:Math.round(255*(W[0]+J)),g:Math.round(255*(W[1]+J)),b:Math.round(255*(W[2]+J))}}},{}],17:[function(I,R){"use strict";R.exports=function(L,E,G){function W(Z){var Q=Z.toString(16);return 1===Q.length?"0"+Q:Q}return[W(L),W(E),W(G)].join("")}},{}],18:[function(I,R){"use strict";R.exports=function(L,E,G){var $=Math.max(L,E,G),J=Math.min(L,E,G),ee=$-J,W,Z,Q;return 0==ee?W=0:L===$?W=(E-G)/ee%6:E===$?W=(G-L)/ee+2:G===$&&(W=(L-E)/ee+4),W=Math.round(60*W),0>W&&(W+=360),Z=Math.round(100*(0===$?0:ee/$)),Q=Math.round(100*($/255)),{h:W,s:Z,v:Q}}},{}],19:[function(I,R){"use strict";R.exports=function(L,E,G,W){return"rgba("+[L,E,G,W/100].join(",")+")"}},{}],20:[function(I,R){"use strict";var L=I("./rgba2rgb"),E=I("./rgb2hex");R.exports=function(G,W,Z,Q){var $=L(G,W,Z,Q);return E($.r,$.g,$.b)}},{"./rgb2hex":17,"./rgba2rgb":21}],21:[function(I,R){"use strict";R.exports=function(L,E,G,W){return W/=100,{r:parseInt(255*(1-W)+W*L,10),g:parseInt(255*(1-W)+W*E,10),b:parseInt(255*(1-W)+W*G,10)}}},{}],22:[function(I,R){"use strict";var L=I("object-keys"),E=I("foreach"),G="function"==typeof Symbol&&"symbol"==typeof Symbol(),W=Object.prototype.toString,Z=function(ae){return"function"==typeof ae&&"[object Function]"===W.call(ae)},$=Object.defineProperty&&function(){var ae={};try{for(var ie in Object.defineProperty(ae,"x",{enumerable:!1,value:ae}),ae)return!1;return ae.x===ae}catch(ne){return!1}}(),J=function(ae,ie,ne,oe){(!(ie in ae)||Z(oe)&&oe())&&($?Object.defineProperty(ae,ie,{configurable:!0,enumerable:!1,value:ne,writable:!0}):ae[ie]=ne)},ee=function(ae,ie){var ne=2<arguments.length?arguments[2]:{},oe=L(ie);G&&(oe=oe.concat(Object.getOwnPropertySymbols(ie))),E(oe,function(le){J(ae,le,ie[le],ne[le])})};ee.supportsDescriptors=!!$,R.exports=ee},{foreach:45,"object-keys":121}],23:[function(I,R){"use strict";var L=I("./helpers/isNaN"),E=I("./helpers/isFinite"),G=I("./helpers/sign"),W=I("./helpers/mod"),Z=I("is-callable"),Q=I("es-to-primitive/es5");R.exports={ToPrimitive:Q,ToBoolean:function(ee){return!!ee},ToNumber:function(ee){return+ee},ToInteger:function(ee){var te=this.ToNumber(ee);return L(te)?0:0!==te&&E(te)?G(te)*Math.floor(Math.abs(te)):te},ToInt32:function(ee){return this.ToNumber(ee)>>0},ToUint32:function(ee){return this.ToNumber(ee)>>>0},ToUint16:function(ee){var te=this.ToNumber(ee);if(L(te)||0===te||!E(te))return 0;var ae=G(te)*Math.floor(Math.abs(te));return W(ae,65536)},ToString:function(ee){return ee+""},ToObject:function(ee){return this.CheckObjectCoercible(ee),Object(ee)},CheckObjectCoercible:function(ee,te){if(null==ee)throw new TypeError(te||"Cannot call method on "+ee);return ee},IsCallable:Z,SameValue:function(ee,te){return ee===te?0!==ee||1/ee==1/te:L(ee)&&L(te)},Type:function(ee){return null===ee?"Null":"undefined"==typeof ee?"Undefined":"function"==typeof ee||"object"==typeof ee?"Object":"number"==typeof ee?"Number":"boolean"==typeof ee?"Boolean":"string"==typeof ee?"String":void 0}}},{"./helpers/isFinite":26,"./helpers/isNaN":27,"./helpers/mod":29,"./helpers/sign":30,"es-to-primitive/es5":31,"is-callable":54}],24:[function(I,R){"use strict";var L=Object.prototype.toString,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,G=E?Symbol.prototype.toString:L,W=I("./helpers/isNaN"),Z=I("./helpers/isFinite"),Q=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,$=I("./helpers/assign"),J=I("./helpers/sign"),ee=I("./helpers/mod"),te=I("./helpers/isPrimitive"),ae=I("es-to-primitive/es6"),ie=parseInt,ne=I("function-bind"),oe=ne.call(Function.call,String.prototype.slice),le=ne.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),se=ne.call(Function.call,RegExp.prototype.test,/^0o[0-7]+$/i),de=["\x85","\u200B","\uFFFE"].join(""),ue=new RegExp("["+de+"]","g"),he=ne.call(Function.call,RegExp.prototype.test,ue),ce=/^[\-\+]0x[0-9a-f]+$/i,pe=ne.call(Function.call,RegExp.prototype.test,ce),ge=["\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),fe=new RegExp("(^["+ge+"]+)|(["+ge+"]+$)","g"),_e=ne.call(Function.call,String.prototype.replace),be=function(ve){return _e(ve,fe,"")},ye=I("./es5"),xe=I("is-regex"),we=$($({},ye),{Call:function(ve,Me){var Pe=2<arguments.length?arguments[2]:[];if(!this.IsCallable(ve))throw new TypeError(ve+" is not a function");return ve.apply(Me,Pe)},ToPrimitive:ae,ToNumber:function(ve){var Me=te(ve)?ve:ae(ve,"number");if("symbol"==typeof Me)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof Me){if(le(Me))return this.ToNumber(ie(oe(Me,2),2));if(se(Me))return this.ToNumber(ie(oe(Me,2),8));if(he(Me)||pe(Me))return NaN;var Pe=be(Me);if(Pe!==Me)return this.ToNumber(Pe)}return+Me},ToInt16:function(ve){var Me=this.ToUint16(ve);return 32768<=Me?Me-65536:Me},ToInt8:function(ve){var Me=this.ToUint8(ve);return 128<=Me?Me-256:Me},ToUint8:function(ve){var Me=this.ToNumber(ve);if(W(Me)||0===Me||!Z(Me))return 0;var Pe=J(Me)*Math.floor(Math.abs(Me));return ee(Pe,256)},ToUint8Clamp:function(ve){var Me=this.ToNumber(ve);if(W(Me)||0>=Me)return 0;if(255<=Me)return 255;var Pe=Math.floor(ve);return Pe+0.5<Me?Pe+1:Me<Pe+0.5?Pe:0==Pe%2?Pe:Pe+1},ToString:function(ve){if("symbol"==typeof ve)throw new TypeError("Cannot convert a Symbol value to a string");return ve+""},ToObject:function(ve){return this.RequireObjectCoercible(ve),Object(ve)},ToPropertyKey:function(ve){var Me=this.ToPrimitive(ve,String);return"symbol"==typeof Me?G.call(Me):this.ToString(Me)},ToLength:function(ve){var Me=this.ToInteger(ve);return 0>=Me?0:Me>Q?Q:Me},CanonicalNumericIndexString:function(ve){if("[object String]"!==L.call(ve))throw new TypeError("must be a string");if("-0"===ve)return-0;var Me=this.ToNumber(ve);return this.SameValue(this.ToString(Me),ve)?Me:void 0},RequireObjectCoercible:ye.CheckObjectCoercible,IsArray:Array.isArray||function(ve){return"[object Array]"===L.call(ve)},IsConstructor:function(ve){return"function"==typeof ve&&!!ve.prototype},IsExtensible:function(ve){return!Object.preventExtensions||!te(ve)&&Object.isExtensible(ve)},IsInteger:function(ve){if("number"!=typeof ve||W(ve)||!Z(ve))return!1;var Me=Math.abs(ve);return Math.floor(Me)===Me},IsPropertyKey:function(ve){return"string"==typeof ve||"symbol"==typeof ve},IsRegExp:function(ve){if(!ve||"object"!=typeof ve)return!1;if(E){var Me=ve[Symbol.match];if("undefined"!=typeof Me)return ye.ToBoolean(Me)}return xe(ve)},SameValueZero:function(ve,Me){return ve===Me||W(ve)&&W(Me)},Type:function(ve){return"symbol"==typeof ve?"Symbol":ye.Type(ve)},SpeciesConstructor:function(ve,Me){if("Object"!==this.Type(ve))throw new TypeError("Assertion failed: Type(O) is not Object");var Pe=ve.constructor;if("undefined"==typeof Pe)return Me;if("Object"!==this.Type(Pe))throw new TypeError("O.constructor is not an Object");var je=E&&Symbol.species?Pe[Symbol.species]:void 0;if(null==je)return Me;if(this.IsConstructor(je))return je;throw new TypeError("no constructor found")}});delete we.CheckObjectCoercible,R.exports=we},{"./es5":23,"./helpers/assign":25,"./helpers/isFinite":26,"./helpers/isNaN":27,"./helpers/isPrimitive":28,"./helpers/mod":29,"./helpers/sign":30,"es-to-primitive/es6":32,"function-bind":47,"is-regex":58}],25:[function(I,R){"use strict";var L=Object.prototype.hasOwnProperty;R.exports=Object.assign||function(G,W){for(var Z in W)L.call(W,Z)&&(G[Z]=W[Z]);return G}},{}],26:[function(I,R){"use strict";var L=Number.isNaN||function(E){return E!==E};R.exports=Number.isFinite||function(E){return"number"==typeof E&&!L(E)&&E!==Infinity&&E!==-Infinity}},{}],27:[function(I,R){"use strict";R.exports=Number.isNaN||function(E){return E!==E}},{}],28:[function(I,R){"use strict";R.exports=function(E){return null===E||"function"!=typeof E&&"object"!=typeof E}},{}],29:[function(I,R){"use strict";R.exports=function(E,G){var W=E%G;return Math.floor(0<=W?W:W+G)}},{}],30:[function(I,R){"use strict";R.exports=function(E){return 0<=E?1:-1}},{}],31:[function(I,R){"use strict";var L=Object.prototype.toString,E=I("./helpers/isPrimitive"),G=I("is-callable"),W={"[[DefaultValue]]":function(Q,$){var J=$||("[object Date]"===L.call(Q)?String:Number);if(J===String||J===Number){var ee=J===String?["toString","valueOf"]:["valueOf","toString"],te,ae;for(ae=0;ae<ee.length;++ae)if(G(Q[ee[ae]])&&(te=Q[ee[ae]](),E(te)))return te;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};R.exports=function(Q,$){return E(Q)?Q:W["[[DefaultValue]]"](Q,$)}},{"./helpers/isPrimitive":33,"is-callable":54}],32:[function(I,R){"use strict";var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,E=I("./helpers/isPrimitive"),G=I("is-callable"),W=I("is-date-object"),Z=I("is-symbol"),Q=function(ee,te){if("undefined"==typeof ee||null===ee)throw new TypeError("Cannot call method on "+ee);if("string"!=typeof te||"number"!==te&&"string"!==te)throw new TypeError("hint must be \"string\" or \"number\"");var ae="string"===te?["toString","valueOf"]:["valueOf","toString"],ie,ne,oe;for(oe=0;oe<ae.length;++oe)if(ie=ee[ae[oe]],G(ie)&&(ne=ie.call(ee),E(ne)))return ne;throw new TypeError("No default value")},$=function(ee,te){var ae=ee[te];if(null!==ae&&"undefined"!=typeof ae){if(!G(ae))throw new TypeError(ae+" returned for property "+te+" of object "+ee+" is not a function");return ae}};R.exports=function(ee,te){if(E(ee))return ee;var ae="default";1<arguments.length&&(te===String?ae="string":te===Number&&(ae="number"));var ie;if(L&&(Symbol.toPrimitive?ie=$(ee,Symbol.toPrimitive):Z(ee)&&(ie=Symbol.prototype.valueOf)),"undefined"!=typeof ie){var ne=ie.call(ee,ae);if(E(ne))return ne;throw new TypeError("unable to convert exotic object to primitive")}return"default"==ae&&(W(ee)||Z(ee))&&(ae="string"),Q(ee,"default"==ae?"number":ae)}},{"./helpers/isPrimitive":33,"is-callable":54,"is-date-object":55,"is-symbol":59}],33:[function(I,R,T){arguments[4][28][0].apply(T,arguments)},{dup:28}],34:[function(I,R){"use strict";var L=Object.prototype.hasOwnProperty,E=Object.prototype.toString,G=function(Q){return"function"==typeof Array.isArray?Array.isArray(Q):"[object Array]"===E.call(Q)},W=function(Q){if(!Q||"[object Object]"!==E.call(Q))return!1;var $=L.call(Q,"constructor"),J=Q.constructor&&Q.constructor.prototype&&L.call(Q.constructor.prototype,"isPrototypeOf");if(Q.constructor&&!$&&!J)return!1;for(var ee in Q);return"undefined"==typeof ee||L.call(Q,ee)};R.exports=function Z(){var ie=arguments[0],ne=1,oe=arguments.length,le=!1,Q,$,J,ee,te,ae;for("boolean"==typeof ie?(le=ie,ie=arguments[1]||{},ne=2):("object"!=typeof ie&&"function"!=typeof ie||null==ie)&&(ie={});ne<oe;++ne)if(Q=arguments[ne],null!=Q)for($ in Q)J=ie[$],ee=Q[$],ie!==ee&&(le&&ee&&(W(ee)||(te=G(ee)))?(te?(te=!1,ae=J&&G(J)?J:[]):ae=J&&W(J)?J:{},ie[$]=Z(le,ae,ee)):"undefined"!=typeof ee&&(ie[$]=ee));return ie}},{}],35:[function(I,R){(function(L){"use strict";var E=I("utf8"),W=[];R.exports=class{constructor(Q,$){$=$||{};var J=!1;Q===void 0&&(Q=8192),"number"==typeof Q?Q=new ArrayBuffer(Q):(J=!0,this._lastWrittenByte=Q.byteLength);var ee=$.offset?$.offset>>>0:0,te=Q.byteLength-ee,ae=ee;Q.buffer&&(Q.byteLength!==Q.buffer.byteLength&&(ae=Q.byteOffset+ee),Q=Q.buffer),this._lastWrittenByte=J?te:0,this.buffer=Q,this.length=te,this.byteLength=te,this.byteOffset=ae,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,ae,te),this._mark=0,this._marks=[]}available(Q){return void 0===Q&&(Q=1),this.offset+Q<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(Q){return void 0===Q&&(Q=1),this.offset+=Q,this}seek(Q){return this.offset=Q,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){var Q=this._marks.pop();if(void 0===Q)throw new Error("Mark stack empty");return this.seek(Q),this}rewind(){return this.offset=0,this}ensureAvailable(Q){if(void 0===Q&&(Q=1),!this.available(Q)){var $=this.offset+Q,J=2*$,ee=new Uint8Array(J);ee.set(new Uint8Array(this.buffer)),this.buffer=ee.buffer,this.length=this.byteLength=J,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(Q){Q===void 0&&(Q=1);for(var $=new Uint8Array(Q),J=0;J<Q;J++)$[J]=this.readByte();return $}readInt16(){var Q=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,Q}readUint16(){var Q=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,Q}readInt32(){var Q=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,Q}readUint32(){var Q=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,Q}readFloat32(){var Q=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,Q}readFloat64(){var Q=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,Q}readChar(){return String.fromCharCode(this.readInt8())}readChars(Q){Q===void 0&&(Q=1),W.length=Q;for(var $=0;$<Q;$++)W[$]=this.readChar();return W.join("")}readUtf8(Q){Q===void 0&&(Q=1);var $=this.readChars(Q);return E.decode($)}writeBoolean(Q){return this.writeUint8(Q?255:0),this}writeInt8(Q){return this.ensureAvailable(1),this._data.setInt8(this.offset++,Q),this._updateLastWrittenByte(),this}writeUint8(Q){return this.ensureAvailable(1),this._data.setUint8(this.offset++,Q),this._updateLastWrittenByte(),this}writeByte(Q){return this.writeUint8(Q)}writeBytes(Q){this.ensureAvailable(Q.length);for(var $=0;$<Q.length;$++)this._data.setUint8(this.offset++,Q[$]);return this._updateLastWrittenByte(),this}writeInt16(Q){return this.ensureAvailable(2),this._data.setInt16(this.offset,Q,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(Q){return this.ensureAvailable(2),this._data.setUint16(this.offset,Q,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(Q){return this.ensureAvailable(4),this._data.setInt32(this.offset,Q,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(Q){return this.ensureAvailable(4),this._data.setUint32(this.offset,Q,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(Q){return this.ensureAvailable(4),this._data.setFloat32(this.offset,Q,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(Q){return this.ensureAvailable(8),this._data.setFloat64(this.offset,Q,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(Q){return this.writeUint8(Q.charCodeAt(0))}writeChars(Q){for(var $=0;$<Q.length;$++)this.writeUint8(Q.charCodeAt($));return this}writeUtf8(Q){var $=E.encode(Q);return this.writeChars($)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)}getBuffer(){return"undefined"==typeof L?this.toArray():L.from(this.toArray())}_updateLastWrittenByte(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)}}}).call(this,I("buffer").Buffer)},{buffer:7,utf8:148}],36:[function(I,R){"use strict";R.exports={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}},{}],37:[function(I,R){"use strict";function L(ee,te){var ae=4*Math.floor((te.bitDepth*te.width+31)/32),ie=Math.ceil(te.bitDepth*te.width/8),oe=te.bitDepth*te.width%8,le=0===oe?0:8-oe,se=ae*te.height,de,ue,he=new Z(te.data),ce=0,pe=0,ge=8;ee.mark(),ue=he.readUint8();for(var fe=te.height-1,_e;0<=fe;fe--){_e=0===fe,ee.reset(),ee.skip(fe*ae);for(var be=0,ye;be<ie;be++)ye=be===ie-1,pe<=le&&ye?(ee.writeByte(ue<<pe),(0==le||le==pe)&&!_e&&(de=ue,ue=he.readByte())):0==pe?(de=ue,ue=he.readUint8(),ee.writeByte(de)):(de=ue,ue=he.readUint8(),ee.writeByte(de<<pe&$[pe]|ue>>ge)),ye?(ce+=oe||8,ee.skip(ae-ie),pe=ce%8,ge=8-pe):ce+=8}ae>ie&&(ee.reset(),ee.skip(se-1),ee.writeUint8(0))}function E(ee,te){8<te.bitDepth||ee.writeUint32(0).writeUint32(16777215)}function G(ee,te){ee.writeChars("BM"),ee.writeInt32(ee._lastWrittenByte),ee.writeUint16(0),ee.writeUint16(0),ee.writeUint32(te)}function W(ee,te){ee.writeUint32(124).writeInt32(te.width).writeInt32(te.height).writeUint16(1).writeUint16(te.bitDepth).writeUint32(Q.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(te.width*te.height*te.bitDepth).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,te.bitDepth)).writeUint32(Math.pow(2,te.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(Q.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(Q.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}for(var Z=I("iobuffer"),Q=I("./constants"),$=[],J=0;8>=J;J++)$.push(255<<J);R.exports=function(ee){if(1!==ee.bitDepth)throw new Error("Only bitDepth of 1 is supported");if(!ee.height||!ee.width)throw new Error("ImageData width and height are required");if(1!==ee.components)throw new Error("Only 1 component is supported");if(1!==ee.channels)throw new Error("Only 1 channel is supported");var te=new Z;te.skip(14),W(te,ee),E(te,ee);var ae=te.offset;return L(te,ee),te.rewind(),G(te,ae),te.getBuffer()}},{"./constants":36,iobuffer:35}],38:[function(I,R,T){"use strict";T.encode=I("./encode")},{"./encode":37}],39:[function(I,R){"use strict";var E=I("iobuffer"),G=I("tiff");R.exports=function(W){var Z=new E(W),Q={};Z.setBigEndian();var $=Z.readUint16();if(65496!==$)throw new Error("SOI marker not found. Not a valid JPEG file");var J=Z.readUint16();if(65505===J){var ee=Z.readUint16(),te=Z.readBytes(6);if(69===te[0]&&120===te[1]&&105===te[2]&&102===te[3]&&0===te[4]&&0===te[5]){var ae=G.decode(Z,{onlyFirst:!0,ignoreImageData:!0,offset:Z.offset});Q.exif=ae}}return Q}},{iobuffer:52,tiff:142}],40:[function(I,R,T){"use strict";T.decode=I("./decode")},{"./decode":39}],41:[function(I,R,T){"use strict";(function(){function L(G,W,Z){this.next=Z,Z&&(Z.prev=this),this.prev=W,W&&(W.next=this),this.data=G}function E(){return this instanceof E?void(this._head=null,this._tail=null,this.length=0):new E}E.prototype={push:function(W){this._tail=new L(W,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0!==this.length){var W=this._tail;return this._tail=W.prev,W.prev&&(W.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),W.data}},unshift:function(W){this._head=new L(W,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0!==this.length){var W=this._head;return this._head=W.next,W.next&&(W.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),W.data}},item:function(W){0>W&&(W=this.length+W);for(var Z=this._head;0<W--&&Z;)Z=Z.next;return Z?Z.data:void 0},slice:function(W,Z){if(W||(W=0),Z||(Z=this.length),0>Z&&(Z=this.length+Z),0>W&&(W=this.length+W),Z===W)return[];if(Z<W)throw new Error("invalid offset: "+W+","+Z+" (length="+this.length+")");for(var Q=Z-W,$=Array(Q),J=0,ee=this._head;0<W--&&ee;)ee=ee.next;for(;J<Q&&ee;)$[J++]=ee.data,ee=ee.next;return $},drop:function(){E.call(this)},forEach:function(W,Z){for(var Q=this._head,$=0,J=this.length;$<J&&Q;)W.call(Z||this,Q.data,$,this),Q=Q.next,$++},map:function(W,Z){var Q=new E;return this.forEach(function($,J,ee){Q.push(W.call(Z||ee,$,J,ee))}),Q},filter:function(W,Z){var Q=new E;return this.forEach(function($,J,ee){W.call(Z||ee,$,J,ee)&&Q.push($)}),Q},reduce:function(W,Z,Q){var $=0,J=this._head,ee=this.length;for(Z||($=1,Z=J&&J.data,J=J&&J.next);$<ee&&J;)Z=W.call(Q||this,Z,J.data,this),$++,J=J.next;return Z}},"undefined"==typeof T?"function"==typeof define&&define.amd?define("FastList",function(){return E}):function(){return this}().FastList=E:R.exports=E})()},{}],42:[function(I,R){"use strict";function L(ne,oe,le){for(var se=0;se<le;se++)oe[se]=ne[se]}function E(ne,oe,le,se){for(var de=0;de<se;de++)oe[de]=ne[de];for(;de<le;de++)oe[de]=255&ne[de]+oe[de-se]}function G(ne,oe,le,se){var de=0;if(0===le.length)for(;de<se;de++)oe[de]=ne[de];else for(;de<se;de++)oe[de]=255&ne[de]+le[de]}function W(ne,oe,le,se,de){var ue=0;if(0===le.length){for(;ue<de;ue++)oe[ue]=ne[ue];for(;ue<se;ue++)oe[ue]=255&ne[ue]+(oe[ue-de]>>1)}else{for(;ue<de;ue++)oe[ue]=255&ne[ue]+(le[ue]>>1);for(;ue<se;ue++)oe[ue]=255&ne[ue]+(oe[ue-de]+le[ue]>>1)}}function Z(ne,oe,le,se,de){var ue=0;if(0===le.length){for(;ue<de;ue++)oe[ue]=ne[ue];for(;ue<se;ue++)oe[ue]=255&ne[ue]+oe[ue-de]}else{for(;ue<de;ue++)oe[ue]=255&ne[ue]+le[ue];for(;ue<se;ue++)oe[ue]=255&ne[ue]+Q(oe[ue-de],le[ue],le[ue-de])}}function Q(ne,oe,le){var se=ne+oe-le,de=Math.abs(se-ne),ue=Math.abs(se-oe),he=Math.abs(se-le);return de<=ue&&de<=he?ne:ue<=he?oe:le}var $=I("iobuffer"),J=I("pako").Inflate,ee=new Uint8Array(0),ae=[137,80,78,71,13,10,26,10];R.exports=class extends ${constructor(ne){super(ne),this._decoded=!1,this._inflator=new J,this._png=null,this._end=!1,this.setBigEndian()}decode(){if(this._decoded)return this._png;for(this._png={tEXt:{}},this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(var ne=0;8>ne;ne++)if(this.readUint8()!==ae[ne])throw new Error(`Wrong PNG signature. Byte at ${ne} should be ${ae[ne]}.`)}decodeChunk(){var ne=this.readUint32(),oe=this.readChars(4),le=this.offset;switch(oe){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(ne);break;case"IDAT":this.decodeIDAT(ne);break;case"tEXt":this.decodetEXt(ne);break;case"IEND":this._end=!0;break;default:this.skip(ne);}if(this.offset-le!==ne)throw new Error("Length mismatch while decoding chunk "+oe);this.readUint32()}decodeIHDR(){var ne=this._png;if(ne.width=this.readUint32(),ne.height=this.readUint32(),ne.bitDepth=this.readUint8(),ne.colourType=this.readUint8(),ne.compressionMethod=this.readUint8(),ne.filterMethod=this.readUint8(),ne.interlaceMethod=this.readUint8(),0!==this._png.compressionMethod)throw new Error("Unsupported compression method: "+ne.compressionMethod)}decodePLTE(ne){if(0!=ne%3)throw new RangeError("PLTE field length must be a multiple of 3. Got "+ne);var oe=ne/3;this._hasPalette=!0;for(var le=this._palette=Array(oe),se=0;se<oe;se++)le[se]=[this.readUint8(),this.readUint8(),this.readUint8()]}decodeIDAT(ne){this._inflator.push(new Uint8Array(this.buffer,this.offset,ne)),this.skip(ne)}decodetEXt(ne){for(var oe="",le;(le=this.readChar())!=="\0";)oe+=le;this._png.tEXt[oe]=this.readChars(ne-oe.length-1)}decodeImage(){if(this._inflator.push(ee,!0),this._inflator.err)throw new Error("Error while decompressing the data");var ne=this._inflator.result;if(this._inflator=null,0!==this._png.filterMethod)throw new Error("Filter method "+this._png.filterMethod+" not supported");if(0===this._png.interlaceMethod)this.decodeInterlaceNull(ne);else throw new Error("Interlace method "+this._png.interlaceMethod+" not supported")}decodeInterlaceNull(ne){var oe;switch(this._png.colourType){case 0:oe=1;break;case 2:oe=3;break;case 3:if(!this._hasPalette)throw new Error("Missing palette");oe=1;break;case 4:oe=2;break;case 6:oe=4;break;default:throw new Error("Unknown colour type: "+this._png.colourType);}for(var le=this._png.height,se=oe*this._png.bitDepth/8,de=this._png.width*se,ue=new Uint8Array(this._png.height*de),he=ee,ce=0,fe=0,pe,ge;fe<le;fe++){switch(pe=ne.subarray(ce+1,ce+1+de),ge=ue.subarray(fe*de,(fe+1)*de),ne[ce]){case 0:L(pe,ge,de);break;case 1:E(pe,ge,de,se);break;case 2:G(pe,ge,he,de);break;case 3:W(pe,ge,he,de,se);break;case 4:Z(pe,ge,he,de,se);break;default:throw new Error("Unsupported filter: "+ne[ce]);}he=ge,ce+=de+1}this._hasPalette&&(this._png.palette=this._palette),this._png.data=ue}}},{iobuffer:52,pako:123}],43:[function(I,R,T){"use strict";T.PNGDecoder=I("./PNGDecoder")},{"./PNGDecoder":42}],44:[function(I,R){"use strict";R.exports=function(L){return L&&1<L.length?255===L[0]&&216===L[1]&&255===L[2]?{ext:"jpg",mime:"image/jpeg"}:137===L[0]&&80===L[1]&&78===L[2]&&71===L[3]?{ext:"png",mime:"image/png"}:71===L[0]&&73===L[1]&&70===L[2]?{ext:"gif",mime:"image/gif"}:87===L[8]&&69===L[9]&&66===L[10]&&80===L[11]?{ext:"webp",mime:"image/webp"}:70===L[0]&&76===L[1]&&73===L[2]&&70===L[3]?{ext:"flif",mime:"image/flif"}:(73===L[0]&&73===L[1]&&42===L[2]&&0===L[3]||77===L[0]&&77===L[1]&&0===L[2]&&42===L[3])&&67===L[8]&&82===L[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===L[0]&&73===L[1]&&42===L[2]&&0===L[3]||77===L[0]&&77===L[1]&&0===L[2]&&42===L[3]?{ext:"tif",mime:"image/tiff"}:66===L[0]&&77===L[1]?{ext:"bmp",mime:"image/bmp"}:73===L[0]&&73===L[1]&&188===L[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===L[0]&&66===L[1]&&80===L[2]&&83===L[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===L[0]&&75===L[1]&&3===L[2]&&4===L[3]&&109===L[30]&&105===L[31]&&109===L[32]&&101===L[33]&&116===L[34]&&121===L[35]&&112===L[36]&&101===L[37]&&97===L[38]&&112===L[39]&&112===L[40]&&108===L[41]&&105===L[42]&&99===L[43]&&97===L[44]&&116===L[45]&&105===L[46]&&111===L[47]&&110===L[48]&&47===L[49]&&101===L[50]&&112===L[51]&&117===L[52]&&98===L[53]&&43===L[54]&&122===L[55]&&105===L[56]&&112===L[57]?{ext:"epub",mime:"application/epub+zip"}:80===L[0]&&75===L[1]&&3===L[2]&&4===L[3]&&77===L[30]&&69===L[31]&&84===L[32]&&65===L[33]&&45===L[34]&&73===L[35]&&78===L[36]&&70===L[37]&&47===L[38]&&109===L[39]&&111===L[40]&&122===L[41]&&105===L[42]&&108===L[43]&&108===L[44]&&97===L[45]&&46===L[46]&&114===L[47]&&115===L[48]&&97===L[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80===L[0]&&75===L[1]&&(3===L[2]||5===L[2]||7===L[2])&&(4===L[3]||6===L[3]||8===L[3])?{ext:"zip",mime:"application/zip"}:117===L[257]&&115===L[258]&&116===L[259]&&97===L[260]&&114===L[261]?{ext:"tar",mime:"application/x-tar"}:82===L[0]&&97===L[1]&&114===L[2]&&33===L[3]&&26===L[4]&&7===L[5]&&(0===L[6]||1===L[6])?{ext:"rar",mime:"application/x-rar-compressed"}:31===L[0]&&139===L[1]&&8===L[2]?{ext:"gz",mime:"application/gzip"}:66===L[0]&&90===L[1]&&104===L[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===L[0]&&122===L[1]&&188===L[2]&&175===L[3]&&39===L[4]&&28===L[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===L[0]&&1===L[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===L[0]&&0===L[1]&&0===L[2]&&(24===L[3]||32===L[3])&&102===L[4]&&116===L[5]&&121===L[6]&&112===L[7]||51===L[0]&&103===L[1]&&112===L[2]&&53===L[3]||0===L[0]&&0===L[1]&&0===L[2]&&28===L[3]&&102===L[4]&&116===L[5]&&121===L[6]&&112===L[7]&&109===L[8]&&112===L[9]&&52===L[10]&&50===L[11]&&109===L[16]&&112===L[17]&&52===L[18]&&49===L[19]&&109===L[20]&&112===L[21]&&52===L[22]&&50===L[23]&&105===L[24]&&115===L[25]&&111===L[26]&&109===L[27]||0===L[0]&&0===L[1]&&0===L[2]&&28===L[3]&&102===L[4]&&116===L[5]&&121===L[6]&&112===L[7]&&105===L[8]&&115===L[9]&&111===L[10]&&109===L[11]||0===L[0]&&0===L[1]&&0===L[2]&&28===L[3]&&102===L[4]&&116===L[5]&&121===L[6]&&112===L[7]&&109===L[8]&&112===L[9]&&52===L[10]&&50===L[11]&&0===L[12]&&0===L[13]&&0===L[14]&&0===L[15]?{ext:"mp4",mime:"video/mp4"}:0===L[0]&&0===L[1]&&0===L[2]&&28===L[3]&&102===L[4]&&116===L[5]&&121===L[6]&&112===L[7]&&77===L[8]&&52===L[9]&&86===L[10]?{ext:"m4v",mime:"video/x-m4v"}:77===L[0]&&84===L[1]&&104===L[2]&&100===L[3]?{ext:"mid",mime:"audio/midi"}:109===L[31]&&97===L[32]&&116===L[33]&&114===L[34]&&111===L[35]&&115===L[36]&&107===L[37]&&97===L[38]?{ext:"mkv",mime:"video/x-matroska"}:26===L[0]&&69===L[1]&&223===L[2]&&163===L[3]?{ext:"webm",mime:"video/webm"}:0===L[0]&&0===L[1]&&0===L[2]&&20===L[3]&&102===L[4]&&116===L[5]&&121===L[6]&&112===L[7]?{ext:"mov",mime:"video/quicktime"}:82===L[0]&&73===L[1]&&70===L[2]&&70===L[3]&&65===L[8]&&86===L[9]&&73===L[10]?{ext:"avi",mime:"video/x-msvideo"}:48===L[0]&&38===L[1]&&178===L[2]&&117===L[3]&&142===L[4]&&102===L[5]&&207===L[6]&&17===L[7]&&166===L[8]&&217===L[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===L[0]&&0===L[1]&&1===L[2]&&"b"===L[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===L[0]&&68===L[1]&&51===L[2]||255===L[0]&&251===L[1]?{ext:"mp3",mime:"audio/mpeg"}:102===L[4]&&116===L[5]&&121===L[6]&&112===L[7]&&77===L[8]&&52===L[9]&&65===L[10]||77===L[0]&&52===L[1]&&65===L[2]&&32===L[3]?{ext:"m4a",mime:"audio/m4a"}:79===L[28]&&112===L[29]&&117===L[30]&&115===L[31]&&72===L[32]&&101===L[33]&&97===L[34]&&100===L[35]?{ext:"opus",mime:"audio/opus"}:79===L[0]&&103===L[1]&&103===L[2]&&83===L[3]?{ext:"ogg",mime:"audio/ogg"}:102===L[0]&&76===L[1]&&97===L[2]&&67===L[3]?{ext:"flac",mime:"audio/x-flac"}:82===L[0]&&73===L[1]&&70===L[2]&&70===L[3]&&87===L[8]&&65===L[9]&&86===L[10]&&69===L[11]?{ext:"wav",mime:"audio/x-wav"}:35===L[0]&&33===L[1]&&65===L[2]&&77===L[3]&&82===L[4]&&10===L[5]?{ext:"amr",mime:"audio/amr"}:37===L[0]&&80===L[1]&&68===L[2]&&70===L[3]?{ext:"pdf",mime:"application/pdf"}:77===L[0]&&90===L[1]?{ext:"exe",mime:"application/x-msdownload"}:(67===L[0]||70===L[0])&&87===L[1]&&83===L[2]?{ext:"swf",mime:"application/x-shockwave-flash"}:123===L[0]&&92===L[1]&&114===L[2]&&116===L[3]&&102===L[4]?{ext:"rtf",mime:"application/rtf"}:119===L[0]&&79===L[1]&&70===L[2]&&70===L[3]&&(0===L[4]&&1===L[5]&&0===L[6]&&0===L[7]||79===L[4]&&84===L[5]&&84===L[6]&&79===L[7])?{ext:"woff",mime:"application/font-woff"}:119===L[0]&&79===L[1]&&70===L[2]&&50===L[3]&&(0===L[4]&&1===L[5]&&0===L[6]&&0===L[7]||79===L[4]&&84===L[5]&&84===L[6]&&79===L[7])?{ext:"woff2",mime:"application/font-woff"}:76===L[34]&&80===L[35]&&(0===L[8]&&0===L[9]&&1===L[10]||1===L[8]&&0===L[9]&&2===L[10]||2===L[8]&&0===L[9]&&2===L[10])?{ext:"eot",mime:"application/octet-stream"}:0===L[0]&&1===L[1]&&0===L[2]&&0===L[3]&&0===L[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===L[0]&&84===L[1]&&84===L[2]&&79===L[3]&&0===L[4]?{ext:"otf",mime:"application/font-sfnt"}:0===L[0]&&0===L[1]&&1===L[2]&&0===L[3]?{ext:"ico",mime:"image/x-icon"}:70===L[0]&&76===L[1]&&86===L[2]&&1===L[3]?{ext:"flv",mime:"video/x-flv"}:37===L[0]&&33===L[1]?{ext:"ps",mime:"application/postscript"}:253===L[0]&&55===L[1]&&122===L[2]&&88===L[3]&&90===L[4]&&0===L[5]?{ext:"xz",mime:"application/x-xz"}:83===L[0]&&81===L[1]&&76===L[2]&&105===L[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===L[0]&&69===L[1]&&83===L[2]&&26===L[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===L[0]&&114===L[1]&&50===L[2]&&52===L[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===L[0]&&83===L[1]&&67===L[2]&&70===L[3]||73===L[0]&&83===L[1]&&99===L[2]&&40===L[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===L[0]&&60===L[1]&&97===L[2]&&114===L[3]&&99===L[4]&&104===L[5]&&62===L[6]&&10===L[7]&&100===L[8]&&101===L[9]&&98===L[10]&&105===L[11]&&97===L[12]&&110===L[13]&&45===L[14]&&98===L[15]&&105===L[16]&&110===L[17]&&97===L[18]&&114===L[19]&&121===L[20]?{ext:"deb",mime:"application/x-deb"}:33===L[0]&&60===L[1]&&97===L[2]&&114===L[3]&&99===L[4]&&104===L[5]&&62===L[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===L[0]&&171===L[1]&&238===L[2]&&219===L[3]?{ext:"rpm",mime:"application/x-rpm"}:31===L[0]&&160===L[1]||31===L[0]&&157===L[1]?{ext:"Z",mime:"application/x-compress"}:76===L[0]&&90===L[1]&&73===L[2]&&80===L[3]?{ext:"lz",mime:"application/x-lzip"}:208===L[0]&&207===L[1]&&17===L[2]&&224===L[3]&&161===L[4]&&177===L[5]&&26===L[6]&&225===L[7]?{ext:"msi",mime:"application/x-msi"}:null:null}},{}],45:[function(I,R){"use strict";var L=Object.prototype.hasOwnProperty,E=Object.prototype.toString;R.exports=function(W,Z,Q){if("[object Function]"!==E.call(Z))throw new TypeError("iterator must be a function");var $=W.length;if($===+$)for(var J=0;J<$;J++)Z.call(Q,W[J],J,W);else for(var ee in W)L.call(W,ee)&&Z.call(Q,W[ee],ee,W)}},{}],46:[function(I,R){"use strict";var E=Array.prototype.slice,G=Object.prototype.toString;R.exports=function(Q){var $=this;if("function"!=typeof $||G.call($)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+$);for(var J=E.call(arguments,1),te=function(){if(this instanceof ee){var se=$.apply(this,J.concat(E.call(arguments)));return Object(se)===se?se:this}return $.apply(Q,J.concat(E.call(arguments)))},ae=Math.max(0,$.length-J.length),ie=[],ne=0,ee;ne<ae;ne++)ie.push("$"+ne);if(ee=Function("binder","return function ("+ie.join(",")+"){ return binder.apply(this,arguments); }")(te),$.prototype){var oe=function(){};oe.prototype=$.prototype,ee.prototype=new oe,oe.prototype=null}return ee}},{}],47:[function(I,R){"use strict";var L=I("./implementation");R.exports=Function.prototype.bind||L},{"./implementation":46}],48:[function(I,R,T){"use strict";var L=Object.prototype.hasOwnProperty;R.exports=T=function(G,W){return L.call(W,G)},T.version=I("./package").version},{"./package":49}],49:[function(I,R){R.exports={name:"has-own",version:"1.0.0",description:"A safer .hasOwnProperty() - hasOwn(name, obj)",main:"index.js",scripts:{test:"make test"},author:"Aaron Heckmann <aaron.heckmann+github@gmail.com>",license:"MIT",repository:{type:"git",url:"git://github.com/pebble/has-own.git"},homepage:"https://github.com/pebble/has-own/",devDependencies:{mocha:"^1.21.0"}}},{}],50:[function(I,R){"use strict";var L=I("file-type");R.exports=function(E){var W=L(E);return-1===["jpg","png","gif","webp","tif","bmp","jxr","psd"].indexOf(W&&W.ext)?null:W}},{"file-type":44}],51:[function(I,R){(function(L){"use strict";function E(){te=!0;for(var oe=ae.length,ie,ne;oe;){for(ne=ae,ae=[],ie=-1;++ie<oe;)ne[ie]();oe=ae.length}te=!1}var W=L.MutationObserver||L.WebKitMutationObserver,Z;if(W){var Q=0,$=new W(E),J=L.document.createTextNode("");$.observe(J,{characterData:!0}),Z=function(){J.data=Q=++Q%2}}else if(!L.setImmediate&&"undefined"!=typeof L.MessageChannel){var ee=new L.MessageChannel;ee.port1.onmessage=E,Z=function(){ee.port2.postMessage(0)}}else Z="document"in L&&"onreadystatechange"in L.document.createElement("script")?function(){var ne=L.document.createElement("script");ne.onreadystatechange=function(){E(),ne.onreadystatechange=null,ne.parentNode.removeChild(ne),ne=null},L.document.documentElement.appendChild(ne)}:function(){setTimeout(E,0)};var te,ae=[];R.exports=function(ie){1!==ae.push(ie)||te||Z()}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],52:[function(I,R){"use strict";var L=8192,E=[];R.exports=class{constructor(W,Z){Z=Z||{},W===void 0&&(W=L),"number"==typeof W&&(W=new ArrayBuffer(W));var Q=W.byteLength,$=Z.offset?Z.offset>>>0:0;W.buffer&&(Q=W.byteLength-$,W=W.byteLength===W.buffer.byteLength?$?W.buffer.slice($):W.buffer:W.buffer.slice(W.byteOffset+$,W.byteOffset+W.byteLength)),this.buffer=W,this.length=Q,this.byteLength=Q,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=Q||L,this._mark=0}available(W){return void 0===W&&(W=1),this.offset+W<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(W){W===void 0&&(W=1),this.offset+=W}seek(W){this.offset=W}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(W){if(void 0===W&&(W=1),!this.available(W)){var Z=this._increment+this._increment;this._increment=Z;var Q=this.length+Z,$=new Uint8Array(Q);$.set(new Uint8Array(this.buffer)),this.buffer=$.buffer,this.length=Q,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(W){W===void 0&&(W=1);for(var Z=new Uint8Array(W),Q=0;Q<W;Q++)Z[Q]=this.readByte();return Z}readInt16(){var W=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,W}readUint16(){var W=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,W}readInt32(){var W=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,W}readUint32(){var W=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,W}readFloat32(){var W=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,W}readFloat64(){var W=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,W}readChar(){return String.fromCharCode(this.readInt8())}readChars(W){W===void 0&&(W=1),E.length=W;for(var Z=0;Z<W;Z++)E[Z]=this.readChar();return E.join("")}writeBoolean(W){this.writeUint8(W?255:0)}writeInt8(W){this.ensureAvailable(1),this._data.setInt8(this.offset++,W)}writeUint8(W){this.ensureAvailable(1),this._data.setUint8(this.offset++,W)}writeByte(W){this.writeUint8(W)}writeBytes(W){this.ensureAvailable(W.length);for(var Z=0;Z<W.length;Z++)this._data.setUint8(this.offset++,W[Z])}writeInt16(W){this.ensureAvailable(2),this._data.setInt16(this.offset,W,this.littleEndian),this.offset+=2}writeUint16(W){this.ensureAvailable(2),this._data.setUint16(this.offset,W,this.littleEndian),this.offset+=2}writeInt32(W){this.ensureAvailable(4),this._data.setInt32(this.offset,W,this.littleEndian),this.offset+=4}writeUint32(W){this.ensureAvailable(4),this._data.setUint32(this.offset,W,this.littleEndian),this.offset+=4}writeFloat32(W){this.ensureAvailable(4),this._data.setFloat32(this.offset,W,this.littleEndian),this.offset+=4}writeFloat64(W){this.ensureAvailable(8),this._data.setFloat64(this.offset,W,this.littleEndian),this.offset+=8}writeChar(W){this.writeUint8(W.charCodeAt(0))}writeChars(W){for(var Z=0;Z<W.length;Z++)this.writeUint8(W.charCodeAt(Z))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},{}],53:[function(I,R){"use strict";var L=Object.prototype.toString;R.exports=function(G){return"Array"===L.call(G).substr(-6,5)}},{}],54:[function(I,R){"use strict";var L=Function.prototype.toString,E=/^\s*class /,G=function(te){try{var ae=L.call(te),ie=ae.replace(/\/\/.*\n/g,""),ne=ie.replace(/\/\*[.\s\S]*\*\//g,""),oe=ne.replace(/\n/mg," ").replace(/ {2}/g," ");return E.test(oe)}catch(le){return!1}},W=function(te){try{return!G(te)&&(L.call(te),!0)}catch(ae){return!1}},Z=Object.prototype.toString,J="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function(te){if(!te)return!1;if("function"!=typeof te&&"object"!=typeof te)return!1;if(J)return W(te);if(G(te))return!1;var ae=Z.call(te);return ae==="[object Function]"||ae==="[object GeneratorFunction]"}},{}],55:[function(I,R){"use strict";var L=Date.prototype.getDay,E=function($){try{return L.call($),!0}catch(J){return!1}},G=Object.prototype.toString,Z="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function($){return"object"!=typeof $||null===$?!1:Z?E($):G.call($)==="[object Date]"}},{}],56:[function(I,R){"use strict";var L=I("number-is-nan");R.exports=Number.isFinite||function(E){return!("number"!=typeof E||L(E)||E===Infinity||E===-Infinity)}},{"number-is-nan":120}],57:[function(I,R){"use strict";var L=I("is-finite");R.exports=Number.isInteger||function(E){return"number"==typeof E&&L(E)&&Math.floor(E)===E}},{"is-finite":56}],58:[function(I,R){"use strict";var L=RegExp.prototype.exec,E=function($){try{return L.call($),!0}catch(J){return!1}},G=Object.prototype.toString,Z="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function($){return!("object"!=typeof $)&&(Z?E($):G.call($)==="[object RegExp]")}},{}],59:[function(I,R){"use strict";var L=Object.prototype.toString,E="function"==typeof Symbol&&"symbol"==typeof Symbol();if(E){var G=Symbol.prototype.toString,W=/^Symbol\(.*\)$/,Z=function($){return!("symbol"!=typeof $.valueOf())&&W.test(G.call($))};R.exports=function($){if("symbol"==typeof $)return!0;if("[object Symbol]"!==L.call($))return!1;try{return Z($)}catch(J){return!1}}}else R.exports=function(){return!1}},{}],60:[function(I,R,T){(function(L){"use strict";(function(E){if("object"==typeof T&&"undefined"!=typeof R)R.exports=E();else if("function"==typeof define&&define.amd)define([],E);else{var G;G="undefined"==typeof window?"undefined"==typeof L?"undefined"==typeof self?this:self:L:window,G.PriorityQueue=E()}})(function(){return function Z(Q,$,J){function ee(ie,ne){if(!$[ie]){if(!Q[ie]){var oe="function"==typeof I&&I;if(!ne&&oe)return oe(ie,!0);if(te)return te(ie,!0);var le=new Error("Cannot find module '"+ie+"'");throw le.code="MODULE_NOT_FOUND",le}var se=$[ie]={exports:{}};Q[ie][0].call(se.exports,function(de){var ue=Q[ie][1][de];return ee(ue?ue:de)},se,se.exports,Z,Q,$,J)}return $[ie].exports}for(var te="function"==typeof I&&I,ae=0;ae<J.length;ae++)ee(J[ae]);return ee}({1:[function(Z,Q){var ne=function(se,de){function ue(){this.constructor=se}for(var he in de)oe.call(de,he)&&(se[he]=de[he]);return ue.prototype=de.prototype,se.prototype=new ue,se.__super__=de.prototype,se},oe={}.hasOwnProperty,J,ee,te,ae,ie;J=Z("./PriorityQueue/AbstractPriorityQueue"),ee=Z("./PriorityQueue/ArrayStrategy"),ae=Z("./PriorityQueue/BinaryHeapStrategy"),te=Z("./PriorityQueue/BHeapStrategy"),ie=function(le){function se(de){de||(de={}),de.strategy||(de.strategy=ae),de.comparator||(de.comparator=function(ue,he){return(ue||0)-(he||0)}),se.__super__.constructor.call(this,de)}return ne(se,le),se}(J),ie.ArrayStrategy=ee,ie.BinaryHeapStrategy=ae,ie.BHeapStrategy=te,Q.exports=ie},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(Z,Q){var J;Q.exports=J=function(){function ee(te){var ae;if(null==(null==te?void 0:te.strategy))throw"Must pass options.strategy, a strategy";if(null==(null==te?void 0:te.comparator))throw"Must pass options.comparator, a comparator";this.priv=new te.strategy(te),this.length=(null==te||null==(ae=te.initialValues)?void 0:ae.length)||0}return ee.prototype.queue=function(te){return this.length++,this.priv.queue(te),void 0},ee.prototype.dequeue=function(){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},ee.prototype.peek=function(){if(!this.length)throw"Empty queue";return this.priv.peek()},ee.prototype.clear=function(){return this.length=0,this.priv.clear()},ee}()},{}],3:[function(Z,Q){var J,ee;ee=function(ae,ie,ne){var oe,le,se;for(le=0,oe=ae.length;le<oe;)se=le+oe>>>1,0<=ne(ae[se],ie)?le=se+1:oe=se;return le},Q.exports=J=function(){function te(ae){var ie;this.options=ae,this.comparator=this.options.comparator,this.data=(null==(ie=this.options.initialValues)?void 0:ie.slice(0))||[],this.data.sort(this.comparator).reverse()}return te.prototype.queue=function(ae){var ie;return ie=ee(this.data,ae,this.comparator),this.data.splice(ie,0,ae),void 0},te.prototype.dequeue=function(){return this.data.pop()},te.prototype.peek=function(){return this.data[this.data.length-1]},te.prototype.clear=function(){return this.data.length=0,void 0},te}()},{}],4:[function(Z,Q){var J;Q.exports=J=function(){function ee(te){var ae,ie,ne,oe,le,se,de,ue,he;for(this.comparator=(null==te?void 0:te.comparator)||function(ce,pe){return ce-pe},this.pageSize=(null==te?void 0:te.pageSize)||512,this.length=0,ue=0;1<<ue<this.pageSize;)ue+=1;if(1<<ue!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=ue,this._emptyMemoryPageTemplate=ae=[],(ie=ne=0,se=this.pageSize);0<=se?ne<se:ne>se;ie=0<=se?++ne:--ne)ae.push(null);if(this._memory=[],this._mask=this.pageSize-1,te.initialValues)for(de=te.initialValues,oe=0,le=de.length;oe<le;oe++)he=de[oe],this.queue(he)}return ee.prototype.queue=function(te){return this.length+=1,this._write(this.length,te),this._bubbleUp(this.length,te),void 0},ee.prototype.dequeue=function(){var te,ae;return te=this._read(1),ae=this._read(this.length),this.length-=1,0<this.length&&(this._write(1,ae),this._bubbleDown(1,ae)),te},ee.prototype.peek=function(){return this._read(1)},ee.prototype.clear=function(){return this.length=0,this._memory.length=0,void 0},ee.prototype._write=function(te,ae){var ie;for(ie=te>>this._shift;ie>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[ie][te&this._mask]=ae},ee.prototype._read=function(te){return this._memory[te>>this._shift][te&this._mask]},ee.prototype._bubbleUp=function(te,ae){var ie,ne,oe,le;for(ie=this.comparator;1<te&&(ne=te&this._mask,te<this.pageSize||3<ne?oe=te&~this._mask|ne>>1:2>ne?(oe=te-this.pageSize>>this._shift,oe+=oe&~(this._mask>>1),oe|=this.pageSize>>1):oe=te-2,le=this._read(oe),!(0>ie(le,ae)));)this._write(oe,ae),this._write(te,le),te=oe},ee.prototype._bubbleDown=function(te,ae){var ie,ne,oe,le,se;for(se=this.comparator;te<this.length;)if(te>this._mask&&!(te&this._mask-1)?ie=ne=te+2:te&this.pageSize>>1?(ie=(te&~this._mask)>>1,ie|=te&this._mask>>1,ie=ie+1<<this._shift,ne=ie+1):(ie=te+(te&this._mask),ne=ie+1),ie!==ne&&ne<=this.length){if(oe=this._read(ie),le=this._read(ne),0>se(oe,ae)&&0>=se(oe,le))this._write(ie,ae),this._write(te,oe),te=ie;else if(0>se(le,ae))this._write(ne,ae),this._write(te,le),te=ne;else break;}else if(!(ie<=this.length))break;else if(oe=this._read(ie),0>se(oe,ae))this._write(ie,ae),this._write(te,oe),te=ie;else break},ee}()},{}],5:[function(Z,Q){var J;Q.exports=J=function(){function ee(te){var ae;this.comparator=(null==te?void 0:te.comparator)||function(ie,ne){return ie-ne},this.length=0,this.data=(null==(ae=te.initialValues)?void 0:ae.slice(0))||[],this._heapify()}return ee.prototype._heapify=function(){var te,ae,ie;if(0<this.data.length)for(te=ae=1,ie=this.data.length;1<=ie?ae<ie:ae>ie;te=1<=ie?++ae:--ae)this._bubbleUp(te)},ee.prototype.queue=function(te){return this.data.push(te),this._bubbleUp(this.data.length-1),void 0},ee.prototype.dequeue=function(){var te,ae;return ae=this.data[0],te=this.data.pop(),0<this.data.length&&(this.data[0]=te,this._bubbleDown(0)),ae},ee.prototype.peek=function(){return this.data[0]},ee.prototype.clear=function(){return this.length=0,this.data.length=0,void 0},ee.prototype._bubbleUp=function(te){for(var ae,ie;0<te&&(ae=te-1>>>1,0>this.comparator(this.data[te],this.data[ae]));)ie=this.data[ae],this.data[ae]=this.data[te],this.data[te]=ie,te=ae},ee.prototype._bubbleDown=function(te){var ae,ie,ne,oe,le;for(ae=this.data.length-1;ie=(te<<1)+1,oe=ie+1,ne=te,ie<=ae&&0>this.comparator(this.data[ie],this.data[ne])&&(ne=ie),oe<=ae&&0>this.comparator(this.data[oe],this.data[ne])&&(ne=oe),ne!==te;)le=this.data[ne],this.data[ne]=this.data[te],this.data[te]=le,te=ne},ee}()},{}]},{},[1])(1)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],61:[function(I,R){"use strict";function L(){}function E(de){if("function"!=typeof de)throw new TypeError("resolver must be a function");this.state=se,this.queue=[],this.outcome=void 0,de!==L&&Q(this,de)}function G(de,ue,he){this.promise=de,"function"==typeof ue&&(this.onFulfilled=ue,this.callFulfilled=this.otherCallFulfilled),"function"==typeof he&&(this.onRejected=he,this.callRejected=this.otherCallRejected)}function W(de,ue,he){ie(function(){var ce;try{ce=ue(he)}catch(pe){return ne.reject(de,pe)}ce===de?ne.reject(de,new TypeError("Cannot resolve promise with itself")):ne.resolve(de,ce)})}function Z(de){var ue=de&&de.then;if(de&&"object"==typeof de&&"function"==typeof ue)return function(){ue.apply(de,arguments)}}function Q(de,ue){function he(_e){ge||(ge=!0,ne.reject(de,_e))}function ce(_e){ge||(ge=!0,ne.resolve(de,_e))}var ge=!1,fe=$(function(){ue(ce,he)});"error"===fe.status&&he(fe.value)}function $(de,ue){var he={};try{he.value=de(ue),he.status="success"}catch(ce){he.status="error",he.value=ce}return he}var ie=I("immediate"),ne={},oe=["REJECTED"],le=["FULFILLED"],se=["PENDING"];R.exports=E,E.prototype["catch"]=function(de){return this.then(null,de)},E.prototype.then=function(de,ue){if("function"!=typeof de&&this.state===le||"function"!=typeof ue&&this.state===oe)return this;var he=new this.constructor(L);if(this.state!==se){var ce=this.state===le?de:ue;W(he,ce,this.outcome)}else this.queue.push(new G(he,de,ue));return he},G.prototype.callFulfilled=function(de){ne.resolve(this.promise,de)},G.prototype.otherCallFulfilled=function(de){W(this.promise,this.onFulfilled,de)},G.prototype.callRejected=function(de){ne.reject(this.promise,de)},G.prototype.otherCallRejected=function(de){W(this.promise,this.onRejected,de)},ne.resolve=function(de,ue){var he=$(Z,ue);if("error"===he.status)return ne.reject(de,he.value);var ce=he.value;if(ce)Q(de,ce);else{de.state=le,de.outcome=ue;for(var pe=-1,ge=de.queue.length;++pe<ge;)de.queue[pe].callFulfilled(ue)}return de},ne.reject=function(de,ue){de.state=oe,de.outcome=ue;for(var he=-1,ce=de.queue.length;++he<ce;)de.queue[he].callRejected(ue);return de},E.resolve=function(de){return de instanceof this?de:ne.resolve(new this(L),de)},E.reject=function(de){var ue=new this(L);return ne.reject(ue,de)},E.all=function(de){function ue(ye,xe){he.resolve(ye).then(function(ke){ge[xe]=ke,++fe!==ce||pe||(pe=!0,ne.resolve(be,ge))},function(ke){pe||(pe=!0,ne.reject(be,ke))})}var he=this;if("[object Array]"!==Object.prototype.toString.call(de))return this.reject(new TypeError("must be an array"));var ce=de.length,pe=!1;if(!ce)return this.resolve([]);for(var ge=Array(ce),fe=0,_e=-1,be=new this(L);++_e<ce;)ue(de[_e],_e);return be},E.race=function(de){function ue(_e){he.resolve(_e).then(function(be){pe||(pe=!0,ne.resolve(fe,be))},function(be){pe||(pe=!0,ne.reject(fe,be))})}var he=this;if("[object Array]"!==Object.prototype.toString.call(de))return this.reject(new TypeError("must be an array"));var ce=de.length,pe=!1;if(!ce)return this.resolve([]);for(var ge=-1,fe=new this(L);++ge<ce;)ue(de[ge]);return fe}},{immediate:51}],62:[function(I,R){"use strict";function W(ee){for(var te=Array(ee[0].length),ae=0;ae<te.length;++ae)te[ae]=Array(ee.length);for(ae=0;ae<ee.length;++ae)for(var ie=0;ie<ee[0].length;++ie)te[ie][ae]=ee[ae][ie];return te}var J=I("ml-stat").array;R.exports={coordArrayToPoints:function(ee,te){if(0!=ee.length%te)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var ae=ee.length/te,ie=Array(ae),ne=0,oe=0,le;oe<ee.length;oe+=te){le=Array(te);for(var se=0;se<te;++se)le[se]=ee[oe+se];ie[ne]=le,ne++}return ie},coordArrayToCoordMatrix:function(ee,te){if(0!=ee.length%te)throw new RangeError("Dimensions number must be accordance with the size of the array.");for(var ae=Array(te),ie=ee.length/te,ne=0;ne<ae.length;ne++)ae[ne]=Array(ie);for(ne=0;ne<ee.length;ne+=te)for(var oe=0,le;oe<te;++oe)le=Math.floor(ne/te),ae[oe][le]=ee[ne+oe];return ae},coordMatrixToCoordArray:function(ee){for(var te=Array(ee.length*ee[0].length),ae=0,ie=0;ie<ee[0].length;++ie)for(var ne=0;ne<ee.length;++ne)te[ae]=ee[ne][ie],++ae;return te},coordMatrixToPoints:W,pointsToCoordArray:function(ee){for(var te=Array(ee.length*ee[0].length),ae=0,ie=0;ie<ee.length;++ie)for(var ne=0;ne<ee[0].length;++ne)te[ae]=ee[ie][ne],++ae;return te},pointsToCoordMatrix:W,applyDotProduct:function(ee,te){var ae,ie;ee.length<=te.length?(ie=ee,ae=te):(ie=te,ae=ee);for(var ne=ae.length-ie.length+1,oe=Array(ne),le=0,se;le<ne;++le){se=0;for(var de=0;de<ie.length;++de)se+=ie[de]*ae[le+de];oe[le]=se}return oe},scale:function(ee,te){var ae=te.inPlace?ee:Array(ee.length);var ie=te.max,ne=te.min;if("number"==typeof ie){if("number"==typeof ne)for(var oe=J.minMax(ee),le=(ie-ne)/(oe.max-oe.min),se=0;se<ae.length;se++)ae[se]=(ee[se]-oe.min)*le+ne;else for(var de=J.max(ee),le=ie/de,se=0;se<ae.length;se++)ae[se]=ee[se]*le;}else if("number"==typeof ne)for(var de=J.min(ee),le=ne/de,se=0;se<ae.length;se++)ae[se]=ee[se]*le;return ae}}},{"ml-stat":115}],63:[function(I,R,T){"use strict";function E(Z,Q,$,J,ee){function te(Pe,je,Ie,De){return(De-je)/(Ie-Pe)}var ae=Z.length,ie=(J-$)/(ee-1),oe=$-ie/2,le=Array(ee),se=Z[1]-Z[0],de=Z[Z.length-1]-Z[Z.length-2],ue=oe,he=oe+ie,ce=Number.MIN_VALUE,pe=0,ge=Z[0]-se,fe=0,_e=0,be=0,ye=0,xe=0,we=0,ke=0,ve=0;main:for(;;){for(;0<=ge-he;){var Me=W(0,he-ce,be,pe);if(we=_e+Me,le[ve]=(we-xe)/ie,ve++,ve===ee)break main;ue=he,he+=ie,xe=we}ce<=ue&&ue<=ge&&(Me=W(0,ue-ce,be,pe),xe=_e+Me),_e+=W(ce,ge,be,ye),ce=ge,pe=fe,ke<ae?(ge=Z[ke],fe=Q[ke],ke++):ke===ae&&(ge+=de,fe=0),be=te(ce,pe,ge,fe),ye=-be*ce+pe}return le}function G(Z,Q,$,J,ee){var te=Z.length,ae=(J-$)/(ee-1),ne=Z[Z.length-1]-Z[Z.length-2],oe=$-ae/2,le=Array(ee),se=oe,de=oe+ae,ue=-Number.MAX_VALUE,he=0,ce=Z[0],pe=Q[0],ge=0,fe=!0,_e=0,be=0,ye=1,xe=0;main:for(;;){if(ue>=ce)throw new Error("x must be an increasing serie");for(;0<ue-de;){if(fe&&(be++,fe=!1),le[xe]=0>=be?0:_e/be,xe++,xe===ee)break main;se=de,de+=ae,_e=0,be=0}ue>se&&(_e+=he,be++),(ue==-Number.MAX_VALUE||1<ge)&&be--,ue=ce,he=pe,ye<te?(ce=Z[ye],pe=Q[ye],ye++):(ce+=ne,pe=0,ge++)}return le}function W(Z,Q,$,J){return 0.5*$*Q*Q+J*Q-(0.5*$*Z*Z+J*Z)}T.getEquallySpacedData=function(Z,Q,$){1<Z.length&&Z[0]>Z[1]&&(Z=Z.slice().reverse(),Q=Q.slice().reverse());var J=Z.length;if(J!==Q.length)throw new RangeError("the x and y vector doesn't have the same size.");$===void 0&&($={});var ee=$.from===void 0?Z[0]:$.from;if(isNaN(ee)||!isFinite(ee))throw new RangeError("'From' value must be a number");var te=$.to===void 0?Z[Z.length-1]:$.to;if(isNaN(te)||!isFinite(te))throw new RangeError("'To' value must be a number");var ae=ee>te;if(ae){var ie=ee;ee=te,te=ie}var ne=$.numberOfPoints===void 0?100:$.numberOfPoints;if(isNaN(ne)||!isFinite(ne))throw new RangeError("'Number of points' value must be a number");if(1>ne)throw new RangeError("the number of point must be higher than 1");var oe="slot"===$.variant?"slot":"smooth",le="slot"==oe?G(Z,Q,ee,te,ne):E(Z,Q,ee,te,ne);return ae?le.reverse():le},T.integral=W},{}],64:[function(I,R,T){"use strict";R.exports=T=I("./ArrayUtils"),T.getEquallySpacedData=I("./getEquallySpaced").getEquallySpacedData,T.SNV=I("./snv").SNV},{"./ArrayUtils":62,"./getEquallySpaced":63,"./snv":65}],65:[function(I,R,T){"use strict";T.SNV=function(G){for(var W=E.mean(G),Z=E.standardDeviation(G),Q=G.slice(),$=0;$<G.length;$++)Q[$]=(Q[$]-W)/Z;return Q};var E=I("ml-stat").array},{"ml-stat":115}],66:[function(I,R){"use strict";function L(G){this.value=G,this.parent=null,this.rank=0}R.exports=class{constructor(){this.nodes=new Map}add(G){var W=this.nodes.get(G);return W||(W=new L(G),this.nodes.set(G,W)),W}union(G,W){var Z=this.find(G),Q=this.find(W);Z===Q||(Z.rank<Q.rank?Z.parent=Q:Z.rank>Q.rank?Q.parent=Z:(Q.parent=Z,Z.rank++))}find(G){for(var W=G;null!==W.parent;)W=W.parent;for(var Z=G,Q;null!==Z.parent;)Q=Z,Z=Z.parent,Q.parent=W;return W}connected(G,W){return this.find(G)===this.find(W)}}},{}],67:[function(I,R){"use strict";function L(G,W){for(var Z=0,Q=0;Q<G.length;Q++)Z+=(G[Q]-W[Q])*(G[Q]-W[Q]);return Z}function E(G,W){return Math.sqrt(L(G,W))}R.exports=E,E.squared=L},{}],68:[function(I,R){"use strict";var L=I("./fftlib");R.exports={DEBUG:!1,ifft2DArray:function(W,Z,Q){var $=Array(Z*Q),J=Z/2,ee=2*(Q-1);L.init(J);for(var te={re:Array(J),im:Array(J)},ae=0;ae<Q;ae++){for(var ie=J-1;0<=ie;ie--)te.re[ie]=W[2*ie*Q+ae],te.im[ie]=W[(2*ie+1)*Q+ae];L.bt(te.re,te.im);for(var ie=J-1;0<=ie;ie--)$[2*ie*Q+ae]=te.re[ie],$[(2*ie+1)*Q+ae]=te.im[ie]}var ne=Array(J*ee);L.init(ee);for(var oe={re:Array(ee),im:Array(ee)},ie=0;ie<Z;ie+=2){oe.re[0]=$[ie*Q],oe.im[0]=$[(ie+1)*Q];for(var ae=1;ae<Q;ae++)oe.re[ae]=$[ie*Q+ae],oe.im[ae]=$[(ie+1)*Q+ae],oe.re[ee-ae]=$[ie*Q+ae],oe.im[ee-ae]=-$[(ie+1)*Q+ae];L.bt(oe.re,oe.im);for(var se=ie/2*ee,ae=ee-1;0<=ae;ae--)ne[se+ae]=oe.re[ae]/(ee*J)}return ne},fft2DArray:function(W,Z,Q){var J=Object.assign({},{inplace:!0}),ee=Q/2+1,te=2*Z,ae=Array(te*ee);L.init(Q);for(var ie={re:Array(Q),im:Array(Q)},ne={re:Array(Q),im:Array(Q)},oe={re:Array(Q),im:Array(Q)},ce=0,le,se,de,ue,he;ce<Z/2;ce++){le=2*ce*Q,ie.re=W.slice(le,le+Q),le=(2*ce+1)*Q,ie.im=W.slice(le,le+Q),L.fft1d(ie.re,ie.im),this.reconstructTwoRealFFT(ie,ne,oe),se=4*ce*ee,de=(4*ce+1)*ee,ue=(4*ce+2)*ee,he=(4*ce+3)*ee;for(var pe=ee-1;0<=pe;pe--)ae[se+pe]=ne.re[pe],ae[de+pe]=ne.im[pe],ae[ue+pe]=oe.re[pe],ae[he+pe]=oe.im[pe]}ne=null,oe=null;var ge=Array(te*ee);L.init(Z);for(var fe={re:Array(Z),im:Array(Z)},_e=ee-1;0<=_e;_e--){for(var ce=Z-1;0<=ce;ce--)fe.re[ce]=ae[2*ce*ee+_e],fe.im[ce]=ae[(2*ce+1)*ee+_e],isNaN(fe.re[ce])&&(fe.re[ce]=0),isNaN(fe.im[ce])&&(fe.im[ce]=0);L.fft1d(fe.re,fe.im);for(var ce=Z-1;0<=ce;ce--)ge[2*ce*ee+_e]=fe.re[ce],ge[(2*ce+1)*ee+_e]=fe.im[ce]}return ge},reconstructTwoRealFFT:function(W,Z,Q){var $=W.re.length;Z.re[0]=W.re[0],Z.im[0]=0,Q.re[0]=W.im[0],Q.im[0]=0;for(var ne=$/2,J,ee,te,ae,ie;0<ne;ne--)ie=$-ne,J=0.5*(W.re[ne]-W.re[ie]),ee=0.5*(W.re[ne]+W.re[ie]),te=0.5*(W.im[ne]-W.im[ie]),ae=0.5*(W.im[ne]+W.im[ie]),Z.re[ne]=ee,Z.im[ne]=te,Z.re[ie]=ee,Z.im[ie]=-te,Q.re[ne]=ae,Q.im[ne]=-J,Q.re[ie]=ae,Q.im[ie]=J},convolute2DI:function(W,Z,Q,$){for(var te=0,J,ee;te<Q/2;te++)for(var ae=0;ae<$;ae++)J=W[2*te*$+ae]*Z[2*te*$+ae]-W[(2*te+1)*$+ae]*Z[(2*te+1)*$+ae],ee=W[2*te*$+ae]*Z[(2*te+1)*$+ae]+W[(2*te+1)*$+ae]*Z[2*te*$+ae],W[2*te*$+ae]=J,W[(2*te+1)*$+ae]=ee},convolute:function(W,Z,Q,$){for(var ee=Array($*Q),te=0;te<Q*$;te++)ee[te]=W[te];ee=this.fft2DArray(ee,Q,$);for(var ae=Z.length,ie=Z[0].length,ne=Array($*Q),te=0;te<$*Q;te++)ne[te]=0;for(var se=Math.floor((ae-1)/2),de=Math.floor((ie-1)/2),ue=0,oe,le;ue<ae;ue++){oe=(ue-se+Q)%Q;for(var he=0;he<ie;he++)le=(he-de+$)%$,ne[oe*$+le]=Z[ue][he]}ne=this.fft2DArray(ne,Q,$);var ce=2*Q,pe=$/2+1;return this.convolute2DI(ee,ne,ce,pe),this.ifft2DArray(ee,ce,pe)},toRadix2:function(W,Z,Q){var $,J,ee,te,ae=Q,ie=Z,ne=0,oe=0;if(0===Q||0!=(Q&Q-1)){for(ae=0;0!=Q>>++ae;);ae=1<<ae,oe=ae-Q}if(0===Z||0!=(Z&Z-1)){for(ie=0;0!=Z>>++ie;);ie=1<<ie,ne=(ie-Z)*ae}if(ie==Z&&ae==Q)return{data:W,rows:Z,cols:Q};var le=Array(ie*ae),se=Math.floor((ie-Z)/2)-Z,de=Math.floor((ae-Q)/2)-Q;for($=0;$<ie;$++)for(ee=$*ae,te=($-se)%Z*Q,J=0;J<ae;J++)le[ee+J]=W[te+(J-de)%Q];return{data:le,rows:ie,cols:ae}},crop:function(W,Z,Q,$,J,ee){if(Z==$&&Q==J)return W;var te=Object.assign({},ee),ae=Array(J*$),ie=Math.floor((Z-$)/2),ne=Math.floor((Q-J)/2),oe,le,se,de;for(se=0;se<$;se++)for(oe=se*J,le=(se+ie)*Q,de=0;de<J;de++)ae[oe+de]=W[le+(de+ne)];return ae}}},{"./fftlib":69}],69:[function(I,R,T){"use strict";(function(){var E="undefined"==typeof T?{}:T;var G={release:"0.3.0",date:"2013-03"};E.toString=function(){return"version "+G.release+", released "+G.date};for(var W=0,Z=null,Q=null,$={init:function(ae){if(0!==ae&&0==(ae&ae-1))W=ae,$._initArray(),$._makeBitReversalTable(),$._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(ae,ie){$.fft(ae,ie,1)},ifft1d:function(ae,ie){var ne=1/W;$.fft(ae,ie,-1);for(var oe=0;oe<W;oe++)ae[oe]*=ne,ie[oe]*=ne},bt1d:function(ae,ie){$.fft(ae,ie,-1)},fft2d:function(ae,ie){for(var ne=[],oe=[],le=0,se=0;se<W;se++){le=se*W;for(var de=0;de<W;de++)ne[de]=ae[de+le],oe[de]=ie[de+le];$.fft1d(ne,oe);for(var ue=0;ue<W;ue++)ae[ue+le]=ne[ue],ie[ue+le]=oe[ue]}for(var he=0;he<W;he++){for(var ce=0;ce<W;ce++)le=he+ce*W,ne[ce]=ae[le],oe[ce]=ie[le];$.fft1d(ne,oe);for(var pe=0;pe<W;pe++)le=he+pe*W,ae[le]=ne[pe],ie[le]=oe[pe]}},ifft2d:function(ae,ie){for(var ne=[],oe=[],le=0,se=0;se<W;se++){le=se*W;for(var de=0;de<W;de++)ne[de]=ae[de+le],oe[de]=ie[de+le];$.ifft1d(ne,oe);for(var ue=0;ue<W;ue++)ae[ue+le]=ne[ue],ie[ue+le]=oe[ue]}for(var he=0;he<W;he++){for(var ce=0;ce<W;ce++)le=he+ce*W,ne[ce]=ae[le],oe[ce]=ie[le];$.ifft1d(ne,oe);for(var pe=0;pe<W;pe++)le=he+pe*W,ae[le]=ne[pe],ie[le]=oe[pe]}},fft:function(ae,ie,ne){for(var fe=W>>2,_e=0,oe,le,se,de,ue,he,ce,pe,ge;_e<W;_e++)de=Z[_e],_e<de&&(ue=ae[_e],ae[_e]=ae[de],ae[de]=ue,ue=ie[_e],ie[_e]=ie[de],ie[de]=ue);for(var be=1;be<W;be<<=1){le=0,oe=W/(be<<1);for(var ye=0;ye<be;ye++){he=Q[le+fe],ce=ne*Q[le];for(var xe=ye;xe<W;xe+=be<<1)se=xe+be,pe=he*ae[se]+ce*ie[se],ge=he*ie[se]-ce*ae[se],ae[se]=ae[xe]-pe,ae[xe]+=pe,ie[se]=ie[xe]-ge,ie[xe]+=ge;le+=oe}}},_initArray:function(){Z="undefined"==typeof Uint32Array?[]:new Uint32Array(W),Q="undefined"==typeof Float64Array?[]:new Float64Array(1.25*W)},_paddingZero:function(){},_makeBitReversalTable:function(){var ae=0,ie=0,ne=0;for(Z[0]=0;++ae<W;){for(ne=W>>1;ne<=ie;)ie-=ne,ne>>=1;ie+=ne,Z[ae]=ie}},_makeCosSinTable:function(){var ae=W>>1,ie=W>>2,ne=W>>3,le=Math.sin(Math.PI/W),se=2*le*le,de=Math.sqrt(se*(2-se)),ue=Q[ie]=1,he=Q[0]=0;le=2*se;for(var ce=1;ce<ne;ce++)ue-=se,se+=le*ue,he+=de,de-=le*he,Q[ce]=he,Q[ie-ce]=ue;0!=ne&&(Q[ne]=Math.sqrt(0.5));for(var pe=0;pe<ie;pe++)Q[ae-pe]=Q[pe];for(var ge=0;ge<ae+ie;ge++)Q[ge+ae]=-Q[ge]}},J=["init","fft1d","ifft1d","fft2d","ifft2d"],ee=0;ee<J.length;ee++)E[J[ee]]=$[J[ee]];return E.bt=$.bt1d,E.fft=$.fft1d,E.ifft=$.ifft1d,E}).call(void 0)},{}],70:[function(I,R,T){"use strict";T.FFTUtils=I("./FFTUtils"),T.FFT=I("./fftlib")},{"./FFTUtils":68,"./fftlib":69}],71:[function(I,R){"use strict";var L=I("ml-distance-euclidean").squared,E={sigma:1};R.exports=class{constructor(W){W=Object.assign({},E,W),this.sigma=W.sigma,this.divisor=2*W.sigma*W.sigma}compute(W,Z){var Q=L(W,Z);return Math.exp(-Q/this.divisor)}}},{"ml-distance-euclidean":67}],72:[function(I,R){"use strict";var L={degree:1,constant:1,scale:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.degree=G.degree,this.constant=G.constant,this.scale=G.scale}compute(G,W){for(var Z=0,Q=0;Q<G.length;Q++)Z+=G[Q]*W[Q];return Math.pow(this.scale*Z+this.constant,this.degree)}}},{}],73:[function(I,R){"use strict";var L={alpha:0.01,constant:-Math.E};R.exports=class{constructor(G){G=Object.assign({},L,G),this.alpha=G.alpha,this.constant=G.constant}compute(G,W){for(var Z=0,Q=0;Q<G.length;Q++)Z+=G[Q]*W[Q];return Math.tanh(this.alpha*Z+this.constant)}}},{}],74:[function(I,R){"use strict";var L=I("ml-matrix"),E=I("ml-kernel-gaussian"),G=I("ml-kernel-polynomial"),W=I("./kernels/anova-kernel"),Z=I("./kernels/cauchy-kernel"),Q=I("./kernels/exponential-kernel"),$=I("./kernels/histogram-intersection-kernel"),J=I("./kernels/laplacian-kernel"),ee=I("./kernels/multiquadratic-kernel"),te=I("./kernels/rational-quadratic-kernel"),ae=I("ml-kernel-sigmoid"),ie={gaussian:E,rbf:E,polynomial:G,poly:G,anova:W,cauchy:Z,exponential:Q,histogram:$,min:$,laplacian:J,multiquadratic:ee,rational:te,sigmoid:ae,mlp:ae};R.exports=class{constructor(oe,le){if(this.kernelType=oe,"linear"!==oe)if("string"==typeof oe){oe=oe.toLowerCase();var se=ie[oe];if(se)this.kernelFunction=new se(le);else throw new Error("unsupported kernel type: "+oe)}else if("object"==typeof oe&&"function"==typeof oe.compute)this.kernelFunction=oe;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(oe,le){if(void 0===le&&(le=oe),"linear"===this.kernelType){var se=new L(oe);return se.mmul(new L(le).transpose())}var de=new L(oe.length,le.length),ue,he;if(oe===le)for(ue=0;ue<oe.length;ue++)for(he=ue;he<oe.length;he++)de[ue][he]=de[he][ue]=this.kernelFunction.compute(oe[ue],oe[he]);else for(ue=0;ue<oe.length;ue++)for(he=0;he<le.length;he++)de[ue][he]=this.kernelFunction.compute(oe[ue],le[he]);return de}}},{"./kernels/anova-kernel":75,"./kernels/cauchy-kernel":76,"./kernels/exponential-kernel":77,"./kernels/histogram-intersection-kernel":78,"./kernels/laplacian-kernel":79,"./kernels/multiquadratic-kernel":80,"./kernels/rational-quadratic-kernel":81,"ml-kernel-gaussian":71,"ml-kernel-polynomial":72,"ml-kernel-sigmoid":73,"ml-matrix":91}],75:[function(I,R){"use strict";var L={sigma:1,degree:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma,this.degree=G.degree}compute(G,W){for(var Z=0,Q=Math.min(G.length,W.length),$=1;$<=Q;++$)Z+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(G[$-1],$)-Math.pow(W[$-1],$),2)),this.degree);return Z}}},{}],76:[function(I,R){"use strict";var L=I("ml-distance-euclidean").squared,E={sigma:1};R.exports=class{constructor(W){W=Object.assign({},E,W),this.sigma=W.sigma}compute(W,Z){return 1/(1+L(W,Z)/(this.sigma*this.sigma))}}},{"ml-distance-euclidean":67}],77:[function(I,R){"use strict";var L=I("ml-distance-euclidean"),E={sigma:1};R.exports=class{constructor(W){W=Object.assign({},E,W),this.sigma=W.sigma,this.divisor=2*W.sigma*W.sigma}compute(W,Z){var Q=L(W,Z);return Math.exp(-Q/this.divisor)}}},{"ml-distance-euclidean":67}],78:[function(I,R){"use strict";R.exports=class{compute(E,G){for(var W=Math.min(E.length,G.length),Z=0,Q=0;Q<W;++Q)Z+=Math.min(E[Q],G[Q]);return Z}}},{}],79:[function(I,R){"use strict";var L=I("ml-distance-euclidean"),E={sigma:1};R.exports=class{constructor(W){W=Object.assign({},E,W),this.sigma=W.sigma}compute(W,Z){var Q=L(W,Z);return Math.exp(-Q/this.sigma)}}},{"ml-distance-euclidean":67}],80:[function(I,R){"use strict";var L=I("ml-distance-euclidean").squared,E={constant:1};R.exports=class{constructor(W){W=Object.assign({},E,W),this.constant=W.constant}compute(W,Z){return Math.sqrt(L(W,Z)+this.constant*this.constant)}}},{"ml-distance-euclidean":67}],81:[function(I,R){"use strict";var L=I("ml-distance-euclidean").squared,E={constant:1};R.exports=class{constructor(W){W=Object.assign({},E,W),this.constant=W.constant}compute(W,Z){var Q=L(W,Z);return 1-Q/(Q+this.constant)}}},{"ml-distance-euclidean":67}],82:[function(I,R){"use strict";"use strict;";function W(Q){var $=Q,J,ee;if("number"!=typeof Q[0]){J=Q.length,ee=Q[0].length,$=Array(J*ee);for(var te=0;te<J;te++)for(var ae=0;ae<ee;ae++)$[te*ee+ae]=Q[te][ae]}else{var ie=Math.sqrt(Q.length);Number.isInteger(ie)&&(J=ie,ee=ie)}return{data:$,rows:J,cols:ee}}var Z=I("ml-fft").FFTUtils;R.exports={fft:function(Q,$,J){var ee=W(Q),te=ee.data,ae=Object.assign({normalize:!1,divisor:1,rows:ee.rows,cols:ee.cols},J),ie,ne;if(ae.rows&&ae.cols)ie=ae.rows,ne=ae.cols;else throw new Error("Invalid number of rows or columns "+ie+" "+ne);var oe=ae.divisor,de=$.length,ue=$[0].length,le,se;if(ae.normalize)for(oe=0,le=0;le<de;le++)for(se=0;se<ue;se++)oe+=$[le][se];if(0===oe)throw new RangeError("convolution: The divisor is equal to zero");var he=Z.toRadix2(te,ie,ne),ce=Z.convolute(he.data,$,he.rows,he.cols);if(ce=Z.crop(ce,he.rows,he.cols,ie,ne),0!=oe&&1!=oe)for(le=0;le<ce.length;le++)ce[le]/=oe;return ce},direct:function(Q,$,J){var ee=W(Q),te=ee.data,ae=Object.assign({normalize:!1,divisor:1,rows:ee.rows,cols:ee.cols},J),ie,ne;if(ae.rows&&ae.cols)ie=ae.rows,ne=ae.cols;else throw new Error("Invalid number of rows or columns "+ie+" "+ne);var oe=ae.divisor,le=$.length,se=$[0].length,de,ue,he,ce,pe,ge,fe,_e,be;if(ae.normalize)for(oe=0,de=0;de<le;de++)for(ue=0;ue<se;ue++)oe+=$[de][ue];if(0===oe)throw new RangeError("convolution: The divisor is equal to zero");var ye=Array(ie*ne),xe=Math.floor(le/2),we=Math.floor(se/2);for(ce=0;ce<ie;ce++)for(he=0;he<ne;he++){for(ge=0,ue=0;ue<le;ue++)for(de=0;de<se;de++)fe=$[le-ue-1][se-de-1],_e=(ce+ue-xe+ie)%ie,be=(he+de-we+ne)%ne,pe=_e*ne+be,ge+=te[pe]*fe;pe=ce*ne+he,ye[pe]=ge/oe}return ye},kernelFactory:{LoG:function(Q,$,J){var ee=1e3;J&&J.factor&&(ee=J.factor);var te=Array($),ae,ie,ne,oe;ee*=-1;var se=($-1)/2;for(ae=0;ae<$;ae++)for(te[ae]=Array($),oe=(ae-se)*(ae-se),ie=0;ie<$;ie++)ne=-((ie-se)*(ie-se)+oe)/(2*Q*Q),te[ae][ie]=Math.round(ee*(1+ne)*Math.exp(ne));return te}},matrix2Array:W}},{"ml-fft":70}],83:[function(require,module){"use strict";module.exports=function(superCtor){function compareNumbers(I,R){return I-R}function fillTemplateFunction(I,R){for(var T in R)I=I.replace(new RegExp("%"+T+"%","g"),R[T]);return I}superCtor===void 0&&(superCtor=Object);class I extends superCtor{static get[Symbol.species](){return this}static from1DArray(R,T,L){if(R*T!==L.length)throw new RangeError("Data length does not match given dimensions");for(var G=new this(R,T),W=0;W<R;W++)for(var Z=0;Z<T;Z++)G.set(W,Z,L[W*T+Z]);return G}static rowVector(R){for(var T=new this(1,R.length),L=0;L<R.length;L++)T.set(0,L,R[L]);return T}static columnVector(R){for(var T=new this(R.length,1),L=0;L<R.length;L++)T.set(L,0,R[L]);return T}static empty(R,T){return new this(R,T)}static zeros(R,T){return this.empty(R,T).fill(0)}static ones(R,T){return this.empty(R,T).fill(1)}static rand(R,T,L){L===void 0&&(L=Math.random);for(var E=this.empty(R,T),G=0;G<R;G++)for(var W=0;W<T;W++)E.set(G,W,L());return E}static randInt(R,T,L,E){L===void 0&&(L=1e3),E===void 0&&(E=Math.random);for(var G=this.empty(R,T),W=0;W<R;W++)for(var Z=0,Q;Z<T;Z++)Q=Math.floor(E()*L),G.set(W,Z,Q);return G}static eye(R,T,L){T===void 0&&(T=R),L===void 0&&(L=1);for(var E=Math.min(R,T),G=this.zeros(R,T),W=0;W<E;W++)G.set(W,W,L);return G}static diag(R,T,L){var E=R.length;T===void 0&&(T=E),L===void 0&&(L=T);for(var G=Math.min(E,T,L),W=this.zeros(T,L),Z=0;Z<G;Z++)W.set(Z,Z,R[Z]);return W}static min(R,T){R=this.checkMatrix(R),T=this.checkMatrix(T);for(var L=R.rows,E=R.columns,G=new this(L,E),W=0;W<L;W++)for(var Z=0;Z<E;Z++)G.set(W,Z,Math.min(R.get(W,Z),T.get(W,Z)));return G}static max(R,T){R=this.checkMatrix(R),T=this.checkMatrix(T);for(var L=R.rows,E=R.columns,G=new this(L,E),W=0;W<L;W++)for(var Z=0;Z<E;Z++)G.set(W,Z,Math.max(R.get(W,Z),T.get(W,Z)));return G}static checkMatrix(R){return I.isMatrix(R)?R:new this(R)}static isMatrix(R){return null!=R&&"Matrix"===R.klass}get size(){return this.rows*this.columns}apply(R){if("function"!=typeof R)throw new TypeError("callback must be a function");for(var T=this.rows,L=this.columns,E=0;E<T;E++)for(var G=0;G<L;G++)R.call(this,E,G);return this}to1DArray(){for(var R=Array(this.size),T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R[T*this.columns+L]=this.get(T,L);return R}to2DArray(){for(var R=Array(this.rows),T=0;T<this.rows;T++){R[T]=Array(this.columns);for(var L=0;L<this.columns;L++)R[T][L]=this.get(T,L)}return R}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var R=0;R<this.rows;R++)for(var T=0;T<=R;T++)if(this.get(R,T)!==this.get(T,R))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(R,T){R=R||1,T=T||1;for(var L=new this.constructor[Symbol.species](this.rows*R,this.columns*T),E=0;E<R;E++)for(var G=0;G<T;G++)L.setSubMatrix(this,this.rows*E,this.columns*G);return L}fill(R){for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,R);return this}neg(){return this.mulS(-1)}getRow(R){util.checkRowIndex(this,R);for(var T=Array(this.columns),L=0;L<this.columns;L++)T[L]=this.get(R,L);return T}getRowVector(R){return this.constructor.rowVector(this.getRow(R))}setRow(R,T){util.checkRowIndex(this,R),T=util.checkRowVector(this,T);for(var L=0;L<this.columns;L++)this.set(R,L,T[L]);return this}swapRows(R,T){util.checkRowIndex(this,R),util.checkRowIndex(this,T);for(var L=0,E;L<this.columns;L++)E=this.get(R,L),this.set(R,L,this.get(T,L)),this.set(T,L,E);return this}getColumn(R){util.checkColumnIndex(this,R);for(var T=Array(this.rows),L=0;L<this.rows;L++)T[L]=this.get(L,R);return T}getColumnVector(R){return this.constructor.columnVector(this.getColumn(R))}setColumn(R,T){util.checkColumnIndex(this,R),T=util.checkColumnVector(this,T);for(var L=0;L<this.rows;L++)this.set(L,R,T[L]);return this}swapColumns(R,T){util.checkColumnIndex(this,R),util.checkColumnIndex(this,T);for(var L=0,E;L<this.rows;L++)E=this.get(L,R),this.set(L,R,this.get(L,T)),this.set(L,T,E);return this}addRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)+R[L]);return this}subRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)-R[L]);return this}mulRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)*R[L]);return this}divRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)/R[L]);return this}addColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)+R[T]);return this}subColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)-R[T]);return this}mulColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)*R[T]);return this}divColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)/R[T]);return this}mulRow(R,T){util.checkRowIndex(this,R);for(var L=0;L<this.columns;L++)this.set(R,L,this.get(R,L)*T);return this}mulColumn(R,T){util.checkColumnIndex(this,R);for(var L=0;L<this.rows;L++)this.set(L,R,this.get(L,R)*T);return this}max(){for(var R=this.get(0,0),T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.get(T,L)>R&&(R=this.get(T,L));return R}maxIndex(){for(var R=this.get(0,0),T=[0,0],L=0;L<this.rows;L++)for(var E=0;E<this.columns;E++)this.get(L,E)>R&&(R=this.get(L,E),T[0]=L,T[1]=E);return T}min(){for(var R=this.get(0,0),T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.get(T,L)<R&&(R=this.get(T,L));return R}minIndex(){for(var R=this.get(0,0),T=[0,0],L=0;L<this.rows;L++)for(var E=0;E<this.columns;E++)this.get(L,E)<R&&(R=this.get(L,E),T[0]=L,T[1]=E);return T}maxRow(R){util.checkRowIndex(this,R);for(var T=this.get(R,0),L=1;L<this.columns;L++)this.get(R,L)>T&&(T=this.get(R,L));return T}maxRowIndex(R){util.checkRowIndex(this,R);for(var T=this.get(R,0),L=[R,0],E=1;E<this.columns;E++)this.get(R,E)>T&&(T=this.get(R,E),L[1]=E);return L}minRow(R){util.checkRowIndex(this,R);for(var T=this.get(R,0),L=1;L<this.columns;L++)this.get(R,L)<T&&(T=this.get(R,L));return T}minRowIndex(R){util.checkRowIndex(this,R);for(var T=this.get(R,0),L=[R,0],E=1;E<this.columns;E++)this.get(R,E)<T&&(T=this.get(R,E),L[1]=E);return L}maxColumn(R){util.checkColumnIndex(this,R);for(var T=this.get(0,R),L=1;L<this.rows;L++)this.get(L,R)>T&&(T=this.get(L,R));return T}maxColumnIndex(R){util.checkColumnIndex(this,R);for(var T=this.get(0,R),L=[0,R],E=1;E<this.rows;E++)this.get(E,R)>T&&(T=this.get(E,R),L[0]=E);return L}minColumn(R){util.checkColumnIndex(this,R);for(var T=this.get(0,R),L=1;L<this.rows;L++)this.get(L,R)<T&&(T=this.get(L,R));return T}minColumnIndex(R){util.checkColumnIndex(this,R);for(var T=this.get(0,R),L=[0,R],E=1;E<this.rows;E++)this.get(E,R)<T&&(T=this.get(E,R),L[0]=E);return L}diag(){for(var R=Math.min(this.rows,this.columns),T=Array(R),L=0;L<R;L++)T[L]=this.get(L,L);return T}sum(R){return"row"===R?util.sumByRow(this):"column"===R?util.sumByColumn(this):util.sumAll(this)}mean(){return this.sum()/this.size}prod(){for(var R=1,T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R*=this.get(T,L);return R}cumulativeSum(){for(var R=0,T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R+=this.get(T,L),this.set(T,L,R);return this}dot(R){I.isMatrix(R)&&(R=R.to1DArray());var T=this.to1DArray();if(T.length!==R.length)throw new RangeError("vectors do not have the same size");for(var L=0,E=0;E<T.length;E++)L+=T[E]*R[E];return L}mmul(R){R=this.constructor.checkMatrix(R),this.columns!==R.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var T=this.rows,L=this.columns,E=R.columns,G=new this.constructor[Symbol.species](T,E),W=Array(L),Z=0;Z<E;Z++){for(var Q=0;Q<L;Q++)W[Q]=R.get(Q,Z);for(var $=0,J;$<T;$++){for(J=0,Q=0;Q<L;Q++)J+=this.get($,Q)*W[Q];G.set($,Z,J)}}return G}strassen2x2(R){var T=new this.constructor[Symbol.species](2,2),L=this.get(0,0),E=R.get(0,0),G=this.get(0,1),W=R.get(0,1),Z=this.get(1,0),Q=R.get(1,0),$=this.get(1,1),J=R.get(1,1),ee=(L+$)*(E+J),te=(Z+$)*E,ae=L*(W-J),ie=$*(Q-E),ne=(L+G)*J;return T.set(0,0,ee+ie-ne+(G-$)*(Q+J)),T.set(0,1,ae+ne),T.set(1,0,te+ie),T.set(1,1,ee-te+ae+(Z-L)*(E+W)),T}strassen3x3(R){var T=new this.constructor[Symbol.species](3,3),L=this.get(0,0),E=this.get(0,1),G=this.get(0,2),W=this.get(1,0),Z=this.get(1,1),Q=this.get(1,2),$=this.get(2,0),J=this.get(2,1),ee=this.get(2,2),te=R.get(0,0),ae=R.get(0,1),ie=R.get(0,2),ne=R.get(1,0),oe=R.get(1,1),le=R.get(1,2),se=R.get(2,0),de=R.get(2,1),ue=R.get(2,2),ce=(L-W)*(-ae+oe),ge=(-L+W+Z)*(te-ae+oe),fe=(W+Z)*(-te+ae),_e=L*te,be=(-L+$+J)*(te-ie+le),ye=(-L+$)*(ie-le),xe=($+J)*(-te+ie),ve=(-G+J+ee)*(oe+se-de),Me=(G-ee)*(oe-de),Pe=G*se,je=(J+ee)*(-se+de),Ie=(-G+Z+Q)*(le+se-ue),De=(G-Q)*(le-ue),Se=(Z+Q)*(-se+ue);return T.set(0,0,_e+Pe+E*ne),T.set(0,1,(L+E+G-W-Z-J-ee)*oe+ge+fe+_e+ve+Pe+je),T.set(0,2,_e+be+xe+(L+E+G-Z-Q-$-J)*le+Pe+Ie+Se),T.set(1,0,ce+Z*(-te+ae+ne-oe-le-se+ue)+ge+_e+Pe+Ie+De),T.set(1,1,ce+ge+fe+_e+Q*de),T.set(1,2,Pe+Ie+De+Se+W*ie),T.set(2,0,_e+be+ye+J*(-te+ie+ne-oe-le-se+de)+ve+Me+Pe),T.set(2,1,ve+Me+Pe+je+$*ae),T.set(2,2,_e+be+ye+xe+ee*ue),T}mmulStrassen(R){function T(ee,te,ae){var ie=ee.rows,ne=ee.columns;if(ie===te&&ne===ae)return ee;var oe=I.zeros(te,ae);return oe=oe.setSubMatrix(ee,0,0),oe}function L(ee,te,ae,ie){if(512>=ae||512>=ie)return ee.mmul(te);1==ae%2&&1==ie%2?(ee=T(ee,ae+1,ie+1),te=T(te,ae+1,ie+1)):1==ae%2?(ee=T(ee,ae+1,ie),te=T(te,ae+1,ie)):1==ie%2&&(ee=T(ee,ae,ie+1),te=T(te,ae,ie+1));var ne=parseInt(ee.rows/2),oe=parseInt(ee.columns/2),le=ee.subMatrix(0,ne-1,0,oe-1),se=te.subMatrix(0,ne-1,0,oe-1),de=ee.subMatrix(0,ne-1,oe,ee.columns-1),ue=te.subMatrix(0,ne-1,oe,te.columns-1),he=ee.subMatrix(ne,ee.rows-1,0,oe-1),ce=te.subMatrix(ne,te.rows-1,0,oe-1),pe=ee.subMatrix(ne,ee.rows-1,oe,ee.columns-1),ge=te.subMatrix(ne,te.rows-1,oe,te.columns-1),fe=L(I.add(le,pe),I.add(se,ge),ne,oe),_e=L(I.add(he,pe),se,ne,oe),be=L(le,I.sub(ue,ge),ne,oe),ye=L(pe,I.sub(ce,se),ne,oe),xe=L(I.add(le,de),ge,ne,oe),we=L(I.sub(he,le),I.add(se,ue),ne,oe),ke=L(I.sub(de,pe),I.add(ce,ge),ne,oe),ve=I.add(fe,ye);ve.sub(xe),ve.add(ke);var Me=I.add(be,xe),Pe=I.add(_e,ye),je=I.sub(fe,_e);je.add(be),je.add(we);var Ie=I.zeros(2*ve.rows,2*ve.columns);return Ie=Ie.setSubMatrix(ve,0,0),Ie=Ie.setSubMatrix(Me,ve.rows,0),Ie=Ie.setSubMatrix(Pe,0,ve.columns),Ie=Ie.setSubMatrix(je,ve.rows,ve.columns),Ie.subMatrix(0,ae-1,0,ie-1)}var E=this.clone(),G=E.rows,W=E.columns,Z=R.rows,Q=R.columns;W!==Z&&console.warn(`Multiplying ${G} x ${W} and ${Z} x ${Q} matrix: dimensions do not match.`);var $=Math.max(G,Z),J=Math.max(W,Q);return E=T(E,$,J),R=T(R,$,J),L(E,R,$,J)}scaleRows(R,T){if(R=void 0===R?0:R,T=void 0===T?1:T,R>=T)throw new RangeError("min should be strictly smaller than max");for(var L=this.constructor.empty(this.rows,this.columns),E=0,G;E<this.rows;E++)G=arrayUtils.scale(this.getRow(E),{min:R,max:T}),L.setRow(E,G);return L}scaleColumns(R,T){if(R=void 0===R?0:R,T=void 0===T?1:T,R>=T)throw new RangeError("min should be strictly smaller than max");for(var L=this.constructor.empty(this.rows,this.columns),E=0,G;E<this.columns;E++)G=arrayUtils.scale(this.getColumn(E),{min:R,max:T}),L.setColumn(E,G);return L}kroneckerProduct(R){R=this.constructor.checkMatrix(R);for(var T=this.rows,L=this.columns,E=R.rows,G=R.columns,W=new this.constructor[Symbol.species](T*E,L*G),Z=0;Z<T;Z++)for(var Q=0;Q<L;Q++)for(var $=0;$<E;$++)for(var J=0;J<G;J++)W[E*Z+$][G*Q+J]=this.get(Z,Q)*R.get($,J);return W}transpose(){for(var R=new this.constructor[Symbol.species](this.columns,this.rows),T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R.set(L,T,this.get(T,L));return R}sortRows(R){R===void 0&&(R=compareNumbers);for(var T=0;T<this.rows;T++)this.setRow(T,this.getRow(T).sort(R));return this}sortColumns(R){R===void 0&&(R=compareNumbers);for(var T=0;T<this.columns;T++)this.setColumn(T,this.getColumn(T).sort(R));return this}subMatrix(R,T,L,E){util.checkRange(this,R,T,L,E);for(var G=new this.constructor[Symbol.species](T-R+1,E-L+1),W=R;W<=T;W++)for(var Z=L;Z<=E;Z++)G[W-R][Z-L]=this.get(W,Z);return G}subMatrixRow(R,T,L){if(void 0===T&&(T=0),void 0===L&&(L=this.columns-1),T>L||0>T||T>=this.columns||0>L||L>=this.columns)throw new RangeError("Argument out of range");for(var E=new this.constructor[Symbol.species](R.length,L-T+1),G=0;G<R.length;G++)for(var W=T;W<=L;W++){if(0>R[G]||R[G]>=this.rows)throw new RangeError("Row index out of range: "+R[G]);E.set(G,W-T,this.get(R[G],W))}return E}subMatrixColumn(R,T,L){if(void 0===T&&(T=0),void 0===L&&(L=this.rows-1),T>L||0>T||T>=this.rows||0>L||L>=this.rows)throw new RangeError("Argument out of range");for(var E=new this.constructor[Symbol.species](L-T+1,R.length),G=0;G<R.length;G++)for(var W=T;W<=L;W++){if(0>R[G]||R[G]>=this.columns)throw new RangeError("Column index out of range: "+R[G]);E.set(W-T,G,this.get(W,R[G]))}return E}setSubMatrix(R,T,L){R=this.constructor.checkMatrix(R);var E=T+R.rows-1,G=L+R.columns-1;util.checkRange(this,T,E,L,G);for(var W=0;W<R.rows;W++)for(var Z=0;Z<R.columns;Z++)this[T+W][L+Z]=R.get(W,Z);return this}selection(R,T){for(var L=util.checkIndices(this,R,T),E=new this.constructor[Symbol.species](R.length,T.length),G=0,W;G<L.row.length;G++){W=L.row[G];for(var Z=0,Q;Z<L.column.length;Z++)Q=L.column[Z],E[G][Z]=this.get(W,Q)}return E}trace(){for(var R=Math.min(this.rows,this.columns),T=0,L=0;L<R;L++)T+=this.get(L,L);return T}transposeView(){return new MatrixTransposeView(this)}rowView(R){return util.checkRowIndex(this,R),new MatrixRowView(this,R)}columnView(R){return util.checkColumnIndex(this,R),new MatrixColumnView(this,R)}flipRowView(){return new MatrixFlipRowView(this)}flipColumnView(){return new MatrixFlipColumnView(this)}subMatrixView(R,T,L,E){return new MatrixSubView(this,R,T,L,E)}selectionView(R,T){return new MatrixSelectionView(this,R,T)}det(){if(this.isSquare()){var R,T,L,E;if(2===this.columns)return R=this.get(0,0),T=this.get(0,1),L=this.get(1,0),E=this.get(1,1),R*E-T*L;if(3===this.columns){var G,W,Z;return G=this.selectionView([1,2],[1,2]),W=this.selectionView([1,2],[0,2]),Z=this.selectionView([1,2],[0,1]),R=this.get(0,0),T=this.get(0,1),L=this.get(0,2),R*G.det()-T*W.det()+L*Z.det()}return new LuDecomposition(this).determinant}throw Error("Determinant can only be calculated for a square matrix.")}}I.prototype.klass="Matrix",I.random=I.rand,I.diagonal=I.diag,I.prototype.diagonal=I.prototype.diag,I.identity=I.eye,I.prototype.negate=I.prototype.neg,I.prototype.tensorProduct=I.prototype.kroneckerProduct,I.prototype.determinant=I.prototype.det;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,inplaceMethodWithArgs=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,staticMethodWithArgs=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,inplaceMethodWithOneArgScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,inplaceMethodWithOneArgMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,inplaceMethodWithOneArg=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,operators=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],i,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError;try{for(var _iterator=operators[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var operator=_step.value,inplaceOp=eval(fillTemplateFunction(inplaceOperator,{name:operator[1],op:operator[0]})),inplaceOpS=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[1]+"S",op:operator[0]})),inplaceOpM=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[1]+"M",op:operator[0]})),staticOp=eval(fillTemplateFunction(staticOperator,{name:operator[1]}));for(i=1;i<operator.length;i++)I.prototype[operator[i]]=inplaceOp,I.prototype[operator[i]+"S"]=inplaceOpS,I.prototype[operator[i]+"M"]=inplaceOpM,I[operator[i]]=staticOp}}catch(I){_didIteratorError=!0,_iteratorError=I}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var methods=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(I){methods.push(["Math."+I,I])});var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2;try{for(var _iterator2=methods[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var method=_step2.value,inplaceMeth=eval(fillTemplateFunction(inplaceMethod,{name:method[1],method:method[0]})),staticMeth=eval(fillTemplateFunction(staticMethod,{name:method[1]}));for(i=1;i<method.length;i++)I.prototype[method[i]]=inplaceMeth,I[method[i]]=staticMeth}}catch(I){_didIteratorError2=!0,_iteratorError2=I}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}var methodsWithArgs=[["Math.pow",1,"pow"]],_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3;try{for(var _iterator3=methodsWithArgs[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var methodWithArg=_step3.value,args="arg0";for(i=1;i<methodWithArg[1];i++)args+=`, arg${i}`;if(1!==methodWithArg[1]){var inplaceMethWithArgs=eval(fillTemplateFunction(inplaceMethodWithArgs,{name:methodWithArg[2],method:methodWithArg[0],args:args})),staticMethWithArgs=eval(fillTemplateFunction(staticMethodWithArgs,{name:methodWithArg[2],args:args}));for(i=2;i<methodWithArg.length;i++)I.prototype[methodWithArg[i]]=inplaceMethWithArgs,I[methodWithArg[i]]=staticMethWithArgs}else{var tmplVar={name:methodWithArg[2],args:args,method:methodWithArg[0]},inplaceMethod2=eval(fillTemplateFunction(inplaceMethodWithOneArg,tmplVar)),inplaceMethodS=eval(fillTemplateFunction(inplaceMethodWithOneArgScalar,tmplVar)),inplaceMethodM=eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix,tmplVar)),staticMethod2=eval(fillTemplateFunction(staticMethodWithArgs,tmplVar));for(i=2;i<methodWithArg.length;i++)I.prototype[methodWithArg[i]]=inplaceMethod2,I.prototype[methodWithArg[i]+"M"]=inplaceMethodM,I.prototype[methodWithArg[i]+"S"]=inplaceMethodS,I[methodWithArg[i]]=staticMethod2}}}catch(I){_didIteratorError3=!0,_iteratorError3=I}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return I};var LuDecomposition=require("./dc/lu"),arrayUtils=require("ml-array-utils"),util=require("./util"),MatrixTransposeView=require("./views/transpose"),MatrixRowView=require("./views/row"),MatrixSubView=require("./views/sub"),MatrixSelectionView=require("./views/selection"),MatrixColumnView=require("./views/column"),MatrixFlipRowView=require("./views/flipRow"),MatrixFlipColumnView=require("./views/flipColumn")},{"./dc/lu":86,"./util":94,"./views/column":96,"./views/flipColumn":97,"./views/flipRow":98,"./views/row":99,"./views/selection":100,"./views/sub":101,"./views/transpose":102,"ml-array-utils":64}],84:[function(I,R){"use strict";function L(G){if(!(this instanceof L))return new L(G);if(G=E.checkMatrix(G),!G.isSymmetric())throw new Error("Matrix is not symmetric");var W=G,Z=W.rows,Q=new E(Z,Z),$=!0,J,ee,te;for(ee=0;ee<Z;ee++){var ae=Q[ee],ie=0;for(te=0;te<ee;te++){var ne=Q[te],oe=0;for(J=0;J<te;J++)oe+=ne[J]*ae[J];ae[te]=oe=(W[ee][te]-oe)/Q[te][te],ie+=oe*oe}for(ie=W[ee][ee]-ie,$&=0<ie,Q[ee][ee]=Math.sqrt(Math.max(ie,0)),te=ee+1;te<Z;te++)Q[ee][te]=0}if(!$)throw new Error("Matrix is not positive definite");this.L=Q}var E=I("../matrix").Matrix;L.prototype={get lowerTriangularMatrix(){return this.L},solve:function(W){W=E.checkMatrix(W);var Z=this.L,Q=Z.rows;if(W.rows!==Q)throw new Error("Matrix dimensions do not match");var $=W.columns,J=W.clone(),ee,te,ae;for(ae=0;ae<Q;ae++)for(te=0;te<$;te++){for(ee=0;ee<ae;ee++)J[ae][te]-=J[ee][te]*Z[ae][ee];J[ae][te]/=Z[ae][ae]}for(ae=Q-1;0<=ae;ae--)for(te=0;te<$;te++){for(ee=ae+1;ee<Q;ee++)J[ae][te]-=J[ee][te]*Z[ee][ae];J[ae][te]/=Z[ae][ae]}return J}},R.exports=L},{"../matrix":92}],85:[function(I,R){"use strict";function L(ie,ne){if(ne=Object.assign({},ae,ne),!(this instanceof L))return new L(ie,ne);if(ie=$.checkMatrix(ie),!ie.isSquare())throw new Error("Matrix is not a square matrix");var oe=ie.columns,le=te(oe,oe,0),se=Array(oe),de=Array(oe),ue=ie,pe=!1,he,ce;if(pe=!!ne.assumeSymmetric||ie.isSymmetric(),pe){for(he=0;he<oe;he++)for(ce=0;ce<oe;ce++)le[he][ce]=ue.get(he,ce);E(oe,de,se,le),G(oe,de,se,le)}else{var ge=te(oe,oe,0),fe=Array(oe);for(ce=0;ce<oe;ce++)for(he=0;he<oe;he++)ge[he][ce]=ue.get(he,ce);W(oe,ge,fe,le),Z(oe,de,se,le,ge)}this.n=oe,this.e=de,this.d=se,this.V=le}function E(ie,ne,oe,le){var se,de,ue,he,ce,pe,ge,fe;for(ce=0;ce<ie;ce++)oe[ce]=le[ie-1][ce];for(he=ie-1;0<he;he--){for(fe=0,ue=0,pe=0;pe<he;pe++)fe+=Math.abs(oe[pe]);if(0===fe)for(ne[he]=oe[he-1],ce=0;ce<he;ce++)oe[ce]=le[he-1][ce],le[he][ce]=0,le[ce][he]=0;else{for(pe=0;pe<he;pe++)oe[pe]/=fe,ue+=oe[pe]*oe[pe];for(se=oe[he-1],de=Math.sqrt(ue),0<se&&(de=-de),ne[he]=fe*de,ue-=se*de,oe[he-1]=se-de,ce=0;ce<he;ce++)ne[ce]=0;for(ce=0;ce<he;ce++){for(se=oe[ce],le[ce][he]=se,de=ne[ce]+le[ce][ce]*se,pe=ce+1;pe<=he-1;pe++)de+=le[pe][ce]*oe[pe],ne[pe]+=le[pe][ce]*se;ne[ce]=de}for(se=0,ce=0;ce<he;ce++)ne[ce]/=ue,se+=ne[ce]*oe[ce];for(ge=se/(ue+ue),ce=0;ce<he;ce++)ne[ce]-=ge*oe[ce];for(ce=0;ce<he;ce++){for(se=oe[ce],de=ne[ce],pe=ce;pe<=he-1;pe++)le[pe][ce]-=se*ne[pe]+de*oe[pe];oe[ce]=le[he-1][ce],le[he][ce]=0}}oe[he]=ue}for(he=0;he<ie-1;he++){if(le[ie-1][he]=le[he][he],le[he][he]=1,ue=oe[he+1],0!==ue){for(pe=0;pe<=he;pe++)oe[pe]=le[pe][he+1]/ue;for(ce=0;ce<=he;ce++){for(de=0,pe=0;pe<=he;pe++)de+=le[pe][he+1]*le[pe][ce];for(pe=0;pe<=he;pe++)le[pe][ce]-=de*oe[pe]}}for(pe=0;pe<=he;pe++)le[pe][he+1]=0}for(ce=0;ce<ie;ce++)oe[ce]=le[ie-1][ce],le[ie-1][ce]=0;le[ie-1][ie-1]=1,ne[0]=0}function G(ie,ne,oe,le){var se,de,ue,he,ce,pe,ge,fe,_e,be,ye,xe,we,ke,ve,Me,Pe;for(ue=1;ue<ie;ue++)ne[ue-1]=ne[ue];ne[ie-1]=0;var je=0,Ie=0,De=Math.pow(2,-52);for(pe=0;pe<ie;pe++){for(Ie=Math.max(Ie,Math.abs(oe[pe])+Math.abs(ne[pe])),ge=pe;ge<ie&&!(Math.abs(ne[ge])<=De*Ie);)ge++;if(ge>pe){Pe=0;do{for(++Pe,se=oe[pe],fe=(oe[pe+1]-se)/(2*ne[pe]),_e=ee(fe,1),0>fe&&(_e=-_e),oe[pe]=ne[pe]/(fe+_e),oe[pe+1]=ne[pe]*(fe+_e),be=oe[pe+1],de=se-oe[pe],ue=pe+2;ue<ie;ue++)oe[ue]-=de;for(je+=de,fe=oe[ge],ye=1,xe=ye,we=ye,ke=ne[pe+1],ve=0,Me=0,ue=ge-1;ue>=pe;ue--)for(we=xe,xe=ye,Me=ve,se=ye*ne[ue],de=ye*fe,_e=ee(fe,ne[ue]),ne[ue+1]=ve*_e,ve=ne[ue]/_e,ye=fe/_e,fe=ye*oe[ue]-ve*se,oe[ue+1]=de+ve*(ye*se+ve*oe[ue]),ce=0;ce<ie;ce++)de=le[ce][ue+1],le[ce][ue+1]=ve*le[ce][ue]+ye*de,le[ce][ue]=ye*le[ce][ue]-ve*de;fe=-ve*Me*we*ke*ne[pe]/be,ne[pe]=ve*fe,oe[pe]=ye*fe}while(Math.abs(ne[pe])>De*Ie)}oe[pe]+=je,ne[pe]=0}for(ue=0;ue<ie-1;ue++){for(ce=ue,fe=oe[ue],he=ue+1;he<ie;he++)oe[he]<fe&&(ce=he,fe=oe[he]);if(ce!==ue)for(oe[ce]=oe[ue],oe[ue]=fe,he=0;he<ie;he++)fe=le[he][ue],le[he][ue]=le[he][ce],le[he][ce]=fe}}function W(ie,ne,oe,le){var se=0,de=ie-1,ue,he,ce,pe,ge,fe,_e;for(fe=se+1;fe<=de-1;fe++){for(_e=0,pe=fe;pe<=de;pe++)_e+=Math.abs(ne[pe][fe-1]);if(0!==_e){for(ce=0,pe=de;pe>=fe;pe--)oe[pe]=ne[pe][fe-1]/_e,ce+=oe[pe]*oe[pe];for(he=Math.sqrt(ce),0<oe[fe]&&(he=-he),ce-=oe[fe]*he,oe[fe]-=he,ge=fe;ge<ie;ge++){for(ue=0,pe=de;pe>=fe;pe--)ue+=oe[pe]*ne[pe][ge];for(ue/=ce,pe=fe;pe<=de;pe++)ne[pe][ge]-=ue*oe[pe]}for(pe=0;pe<=de;pe++){for(ue=0,ge=de;ge>=fe;ge--)ue+=oe[ge]*ne[pe][ge];for(ue/=ce,ge=fe;ge<=de;ge++)ne[pe][ge]-=ue*oe[ge]}oe[fe]=_e*oe[fe],ne[fe][fe-1]=_e*he}}for(pe=0;pe<ie;pe++)for(ge=0;ge<ie;ge++)le[pe][ge]=pe===ge?1:0;for(fe=de-1;fe>=se+1;fe--)if(0!==ne[fe][fe-1]){for(pe=fe+1;pe<=de;pe++)oe[pe]=ne[pe][fe-1];for(ge=fe;ge<=de;ge++){for(he=0,pe=fe;pe<=de;pe++)he+=oe[pe]*le[pe][ge];for(he=he/oe[fe]/ne[fe][fe-1],pe=fe;pe<=de;pe++)le[pe][ge]+=he*oe[pe]}}}function Z(ie,ne,oe,le,se){var de=ie-1,ue=0,he=ie-1,ce=Math.pow(2,-52),pe=0,ge=0,fe=0,_e=0,be=0,ye=0,xe=0,we=0,ke,ve,Me,Pe,je,Ie,De,Se,Ce,Ae,Re,Be,Te,ze,Le;for(ke=0;ke<ie;ke++)for((ke<ue||ke>he)&&(oe[ke]=se[ke][ke],ne[ke]=0),ve=Math.max(ke-1,0);ve<ie;ve++)ge+=Math.abs(se[ke][ve]);for(;de>=ue;){for(Pe=de;Pe>ue&&(ye=Math.abs(se[Pe-1][Pe-1])+Math.abs(se[Pe][Pe]),0==ye&&(ye=ge),!(Math.abs(se[Pe][Pe-1])<ce*ye));)Pe--;if(Pe===de)se[de][de]+=pe,oe[de]=se[de][de],ne[de]=0,de--,we=0;else if(Pe===de-1){if(De=se[de][de-1]*se[de-1][de],fe=(se[de-1][de-1]-se[de][de])/2,_e=fe*fe+De,xe=Math.sqrt(Math.abs(_e)),se[de][de]+=pe,se[de-1][de-1]=se[de-1][de-1]+pe,Se=se[de][de],0<=_e){for(xe=0<=fe?fe+xe:fe-xe,oe[de-1]=Se+xe,oe[de]=oe[de-1],0!=xe&&(oe[de]=Se-De/xe),ne[de-1]=0,ne[de]=0,Se=se[de][de-1],ye=Math.abs(Se)+Math.abs(xe),fe=Se/ye,_e=xe/ye,be=Math.sqrt(fe*fe+_e*_e),fe/=be,_e/=be,ve=de-1;ve<ie;ve++)xe=se[de-1][ve],se[de-1][ve]=_e*xe+fe*se[de][ve],se[de][ve]=_e*se[de][ve]-fe*xe;for(ke=0;ke<=de;ke++)xe=se[ke][de-1],se[ke][de-1]=_e*xe+fe*se[ke][de],se[ke][de]=_e*se[ke][de]-fe*xe;for(ke=ue;ke<=he;ke++)xe=le[ke][de-1],le[ke][de-1]=_e*xe+fe*le[ke][de],le[ke][de]=_e*le[ke][de]-fe*xe}else oe[de-1]=Se+fe,oe[de]=Se+fe,ne[de-1]=xe,ne[de]=-xe;de-=2,we=0}else{if(Se=se[de][de],Ce=0,De=0,Pe<de&&(Ce=se[de-1][de-1],De=se[de][de-1]*se[de-1][de]),10==we){for(pe+=Se,ke=ue;ke<=de;ke++)se[ke][ke]-=Se;ye=Math.abs(se[de][de-1])+Math.abs(se[de-1][de-2]),Se=Ce=0.75*ye,De=-0.4375*ye*ye}if(30==we&&(ye=(Ce-Se)/2,ye=ye*ye+De,0<ye)){for(ye=Math.sqrt(ye),Ce<Se&&(ye=-ye),ye=Se-De/((Ce-Se)/2+ye),ke=ue;ke<=de;ke++)se[ke][ke]-=ye;pe+=ye,Se=Ce=De=0.964}for(++we,je=de-2;je>=Pe&&(xe=se[je][je],be=Se-xe,ye=Ce-xe,fe=(be*ye-De)/se[je+1][je]+se[je][je+1],_e=se[je+1][je+1]-xe-be-ye,be=se[je+2][je+1],ye=Math.abs(fe)+Math.abs(_e)+Math.abs(be),fe/=ye,_e/=ye,be/=ye,je!=Pe)&&!(Math.abs(se[je][je-1])*(Math.abs(_e)+Math.abs(be))<ce*(Math.abs(fe)*(Math.abs(se[je-1][je-1])+Math.abs(xe)+Math.abs(se[je+1][je+1]))));)je--;for(ke=je+2;ke<=de;ke++)se[ke][ke-2]=0,ke>je+2&&(se[ke][ke-3]=0);for(Me=je;Me<=de-1&&(ze=Me!==de-1,Me!=je&&(fe=se[Me][Me-1],_e=se[Me+1][Me-1],be=ze?se[Me+2][Me-1]:0,Se=Math.abs(fe)+Math.abs(_e)+Math.abs(be),0!==Se&&(fe/=Se,_e/=Se,be/=Se)),0!==Se);Me++)if(ye=Math.sqrt(fe*fe+_e*_e+be*be),0>fe&&(ye=-ye),0!==ye){for(Me==je?Pe!==je&&(se[Me][Me-1]=-se[Me][Me-1]):se[Me][Me-1]=-ye*Se,fe+=ye,Se=fe/ye,Ce=_e/ye,xe=be/ye,_e/=fe,be/=fe,ve=Me;ve<ie;ve++)fe=se[Me][ve]+_e*se[Me+1][ve],ze&&(fe+=be*se[Me+2][ve],se[Me+2][ve]=se[Me+2][ve]-fe*xe),se[Me][ve]-=fe*Se,se[Me+1][ve]=se[Me+1][ve]-fe*Ce;for(ke=0;ke<=Math.min(de,Me+3);ke++)fe=Se*se[ke][Me]+Ce*se[ke][Me+1],ze&&(fe+=xe*se[ke][Me+2],se[ke][Me+2]=se[ke][Me+2]-fe*be),se[ke][Me]-=fe,se[ke][Me+1]=se[ke][Me+1]-fe*_e;for(ke=ue;ke<=he;ke++)fe=Se*le[ke][Me]+Ce*le[ke][Me+1],ze&&(fe+=xe*le[ke][Me+2],le[ke][Me+2]=le[ke][Me+2]-fe*be),le[ke][Me]-=fe,le[ke][Me+1]=le[ke][Me+1]-fe*_e}}}if(0!==ge){for(de=ie-1;0<=de;de--)if(fe=oe[de],_e=ne[de],0===_e)for(Pe=de,se[de][de]=1,ke=de-1;0<=ke;ke--){for(De=se[ke][ke]-fe,be=0,ve=Pe;ve<=de;ve++)be+=se[ke][ve]*se[ve][de];if(0>ne[ke])xe=De,ye=be;else if(Pe=ke,0===ne[ke]?se[ke][de]=0===De?-be/(ce*ge):-be/De:(Se=se[ke][ke+1],Ce=se[ke+1][ke],_e=(oe[ke]-fe)*(oe[ke]-fe)+ne[ke]*ne[ke],Ie=(Se*ye-xe*be)/_e,se[ke][de]=Ie,se[ke+1][de]=Math.abs(Se)>Math.abs(xe)?(-be-De*Ie)/Se:(-ye-Ce*Ie)/xe),Ie=Math.abs(se[ke][de]),1<ce*Ie*Ie)for(ve=ke;ve<=de;ve++)se[ve][de]/=Ie}else if(0>_e)for(Pe=de-1,Math.abs(se[de][de-1])>Math.abs(se[de-1][de])?(se[de-1][de-1]=_e/se[de][de-1],se[de-1][de]=-(se[de][de]-fe)/se[de][de-1]):(Le=Q(0,-se[de-1][de],se[de-1][de-1]-fe,_e),se[de-1][de-1]=Le[0],se[de-1][de]=Le[1]),se[de][de-1]=0,se[de][de]=1,ke=de-2;0<=ke;ke--){for(Ae=0,Re=0,ve=Pe;ve<=de;ve++)Ae+=se[ke][ve]*se[ve][de-1],Re+=se[ke][ve]*se[ve][de];if(De=se[ke][ke]-fe,0>ne[ke])xe=De,be=Ae,ye=Re;else if(Pe=ke,0===ne[ke]?(Le=Q(-Ae,-Re,De,_e),se[ke][de-1]=Le[0],se[ke][de]=Le[1]):(Se=se[ke][ke+1],Ce=se[ke+1][ke],Be=(oe[ke]-fe)*(oe[ke]-fe)+ne[ke]*ne[ke]-_e*_e,Te=2*(oe[ke]-fe)*_e,0===Be&&0===Te&&(Be=ce*ge*(Math.abs(De)+Math.abs(_e)+Math.abs(Se)+Math.abs(Ce)+Math.abs(xe))),Le=Q(Se*be-xe*Ae+_e*Re,Se*ye-xe*Re-_e*Ae,Be,Te),se[ke][de-1]=Le[0],se[ke][de]=Le[1],Math.abs(Se)>Math.abs(xe)+Math.abs(_e)?(se[ke+1][de-1]=(-Ae-De*se[ke][de-1]+_e*se[ke][de])/Se,se[ke+1][de]=(-Re-De*se[ke][de]-_e*se[ke][de-1])/Se):(Le=Q(-be-Ce*se[ke][de-1],-ye-Ce*se[ke][de],xe,_e),se[ke+1][de-1]=Le[0],se[ke+1][de]=Le[1])),Ie=Math.max(Math.abs(se[ke][de-1]),Math.abs(se[ke][de])),1<ce*Ie*Ie)for(ve=ke;ve<=de;ve++)se[ve][de-1]=se[ve][de-1]/Ie,se[ve][de]/=Ie}for(ke=0;ke<ie;ke++)if(ke<ue||ke>he)for(ve=ke;ve<ie;ve++)le[ke][ve]=se[ke][ve];for(ve=ie-1;ve>=ue;ve--)for(ke=ue;ke<=he;ke++){for(xe=0,Me=ue;Me<=Math.min(ve,he);Me++)xe+=le[ke][Me]*se[Me][ve];le[ke][ve]=xe}}}function Q(ie,ne,oe,le){var se,de;return Math.abs(oe)>Math.abs(le)?(se=le/oe,de=oe+se*le,[(ie+se*ne)/de,(ne-se*ie)/de]):(se=oe/le,de=le+se*oe,[(se*ie+ne)/de,(se*ne-ie)/de])}var $=I("../matrix").Matrix,J=I("./util"),ee=J.hypotenuse,te=J.getFilled2DArray,ae={assumeSymmetric:!1};L.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return $.isMatrix(this.V)||(this.V=new $(this.V)),this.V},get diagonalMatrix(){var ie=this.n,ne=this.e,oe=this.d,le=new $(ie,ie),se,de;for(se=0;se<ie;se++){for(de=0;de<ie;de++)le[se][de]=0;le[se][se]=oe[se],0<ne[se]?le[se][se+1]=ne[se]:0>ne[se]&&(le[se][se-1]=ne[se])}return le}},R.exports=L},{"../matrix":92,"./util":89}],86:[function(I,R){"use strict";function L(G){if(!(this instanceof L))return new L(G);G=E.Matrix.checkMatrix(G);var W=G.clone(),Z=W.rows,Q=W.columns,$=Array(Z),J=1,ee,te,ae,ie,ne,oe,le,se,de,ue;for(ee=0;ee<Z;ee++)$[ee]=ee;for(de=Array(Z),te=0;te<Q;te++){for(ee=0;ee<Z;ee++)de[ee]=W[ee][te];for(ee=0;ee<Z;ee++){for(se=W[ee],ue=Math.min(ee,te),ne=0,ae=0;ae<ue;ae++)ne+=se[ae]*de[ae];se[te]=de[ee]-=ne}for(ie=te,ee=te+1;ee<Z;ee++)Math.abs(de[ee])>Math.abs(de[ie])&&(ie=ee);if(ie!==te){for(ae=0;ae<Q;ae++)oe=W[ie][ae],W[ie][ae]=W[te][ae],W[te][ae]=oe;le=$[ie],$[ie]=$[te],$[te]=le,J=-J}if(te<Z&&0!==W[te][te])for(ee=te+1;ee<Z;ee++)W[ee][te]/=W[te][te]}this.LU=W,this.pivotVector=$,this.pivotSign=J}var E=I("../matrix");L.prototype={isSingular:function(){for(var W=this.LU,Z=W.columns,Q=0;Q<Z;Q++)if(0===W[Q][Q])return!0;return!1},get determinant(){var G=this.LU;if(!G.isSquare())throw new Error("Matrix must be square");for(var W=this.pivotSign,Z=G.columns,Q=0;Q<Z;Q++)W*=G[Q][Q];return W},get lowerTriangularMatrix(){for(var G=this.LU,W=G.rows,Z=G.columns,Q=new E.Matrix(W,Z),$=0;$<W;$++)for(var J=0;J<Z;J++)Q[$][J]=$>J?G[$][J]:$===J?1:0;return Q},get upperTriangularMatrix(){for(var G=this.LU,W=G.rows,Z=G.columns,Q=new E.Matrix(W,Z),$=0;$<W;$++)for(var J=0;J<Z;J++)Q[$][J]=$<=J?G[$][J]:0;return Q},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(W){W=E.Matrix.checkMatrix(W);var Z=this.LU,Q=Z.rows;if(Q!==W.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var $=W.columns,J=W.subMatrixRow(this.pivotVector,0,$-1),ee=Z.columns,te,ae,ie;for(ie=0;ie<ee;ie++)for(te=ie+1;te<ee;te++)for(ae=0;ae<$;ae++)J[te][ae]-=J[ie][ae]*Z[te][ie];for(ie=ee-1;0<=ie;ie--){for(ae=0;ae<$;ae++)J[ie][ae]/=Z[ie][ie];for(te=0;te<ie;te++)for(ae=0;ae<$;ae++)J[te][ae]-=J[ie][ae]*Z[te][ie]}return J}},R.exports=L},{"../matrix":92}],87:[function(I,R){"use strict";function L(W){if(!(this instanceof L))return new L(W);W=E.checkMatrix(W);var Z=W.clone(),Q=W.rows,$=W.columns,J=Array($),ee,te,ae,ie;for(ae=0;ae<$;ae++){var ne=0;for(ee=ae;ee<Q;ee++)ne=G(ne,Z[ee][ae]);if(0!==ne){for(0>Z[ae][ae]&&(ne=-ne),ee=ae;ee<Q;ee++)Z[ee][ae]/=ne;for(Z[ae][ae]+=1,te=ae+1;te<$;te++){for(ie=0,ee=ae;ee<Q;ee++)ie+=Z[ee][ae]*Z[ee][te];for(ie=-ie/Z[ae][ae],ee=ae;ee<Q;ee++)Z[ee][te]+=ie*Z[ee][ae]}}J[ae]=-ne}this.QR=Z,this.Rdiag=J}var E=I("../matrix").Matrix,G=I("./util").hypotenuse;L.prototype={solve:function(Z){Z=E.checkMatrix(Z);var Q=this.QR,$=Q.rows;if(Z.rows!==$)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var J=Z.columns,ee=Z.clone(),te=Q.columns,ae,ie,ne,oe;for(ne=0;ne<te;ne++)for(ie=0;ie<J;ie++){for(oe=0,ae=ne;ae<$;ae++)oe+=Q[ae][ne]*ee[ae][ie];for(oe=-oe/Q[ne][ne],ae=ne;ae<$;ae++)ee[ae][ie]+=oe*Q[ae][ne]}for(ne=te-1;0<=ne;ne--){for(ie=0;ie<J;ie++)ee[ne][ie]/=this.Rdiag[ne];for(ae=0;ae<ne;ae++)for(ie=0;ie<J;ie++)ee[ae][ie]-=ee[ne][ie]*Q[ae][ne]}return ee.subMatrix(0,te-1,0,J-1)},isFullRank:function(){for(var Z=this.QR.columns,Q=0;Q<Z;Q++)if(0===this.Rdiag[Q])return!1;return!0},get upperTriangularMatrix(){var W=this.QR,Z=W.columns,Q=new E(Z,Z),$,J;for($=0;$<Z;$++)for(J=0;J<Z;J++)Q[$][J]=$<J?W[$][J]:$===J?this.Rdiag[$]:0;return Q},get orthogonalMatrix(){var W=this.QR,Z=W.rows,Q=W.columns,$=new E(Z,Q),J,ee,te,ae;for(te=Q-1;0<=te;te--){for(J=0;J<Z;J++)$[J][te]=0;for($[te][te]=1,ee=te;ee<Q;ee++)if(0!==W[te][te]){for(ae=0,J=te;J<Z;J++)ae+=W[J][te]*$[J][ee];for(ae=-ae/W[te][te],J=te;J<Z;J++)$[J][ee]+=ae*W[J][te]}}return $}},R.exports=L},{"../matrix":92,"./util":89}],88:[function(I,R){"use strict";function L(Q,$){if(!(this instanceof L))return new L(Q,$);Q=E.checkMatrix(Q),$=$||{};var J=Q.rows,ee=Q.columns,te=Math.min(J,ee),ae=!0,ie=!0;!1===$.computeLeftSingularVectors&&(ae=!1),!1===$.computeRightSingularVectors&&(ie=!1);var ne=!0===$.autoTranspose,oe=!1,le;if(!(J<ee))le=Q.clone();else if(!ne)le=Q.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{le=Q.transpose(),J=le.rows,ee=le.columns,oe=!0;var se=ae;ae=ie,ie=se}var de=Array(Math.min(J+1,ee)),ue=Z(J,te,0),he=Z(ee,ee,0),ce=Array(ee),pe=Array(J),ge=Math.min(J-1,ee),fe=Math.max(0,Math.min(ee-2,J)),_e,be,ye,xe,we,ke,ve,Me,Pe,je,Ie,De,Se,Ce,Ae,Re,Be,Te,ze,Le,Ee;for(ye=0,je=Math.max(ge,fe);ye<je;ye++){if(ye<ge){for(de[ye]=0,_e=ye;_e<J;_e++)de[ye]=W(de[ye],le[_e][ye]);if(0!==de[ye]){for(0>le[ye][ye]&&(de[ye]=-de[ye]),_e=ye;_e<J;_e++)le[_e][ye]/=de[ye];le[ye][ye]+=1}de[ye]=-de[ye]}for(be=ye+1;be<ee;be++){if(ye<ge&&0!==de[ye]){for(we=0,_e=ye;_e<J;_e++)we+=le[_e][ye]*le[_e][be];for(we=-we/le[ye][ye],_e=ye;_e<J;_e++)le[_e][be]+=we*le[_e][ye]}ce[be]=le[ye][be]}if(ae&&ye<ge)for(_e=ye;_e<J;_e++)ue[_e][ye]=le[_e][ye];if(ye<fe){for(ce[ye]=0,_e=ye+1;_e<ee;_e++)ce[ye]=W(ce[ye],ce[_e]);if(0!==ce[ye]){for(0>ce[ye+1]&&(ce[ye]=0-ce[ye]),_e=ye+1;_e<ee;_e++)ce[_e]/=ce[ye];ce[ye+1]+=1}if(ce[ye]=-ce[ye],ye+1<J&&0!==ce[ye]){for(_e=ye+1;_e<J;_e++)pe[_e]=0;for(be=ye+1;be<ee;be++)for(_e=ye+1;_e<J;_e++)pe[_e]+=ce[be]*le[_e][be];for(be=ye+1;be<ee;be++)for(we=-ce[be]/ce[ye+1],_e=ye+1;_e<J;_e++)le[_e][be]+=we*pe[_e]}if(ie)for(_e=ye+1;_e<ee;_e++)he[_e][ye]=ce[_e]}}if(xe=Math.min(ee,J+1),ge<ee&&(de[ge]=le[ge][ge]),J<xe&&(de[xe-1]=0),fe+1<xe&&(ce[fe]=le[fe][xe-1]),ce[xe-1]=0,ae){for(be=ge;be<te;be++){for(_e=0;_e<J;_e++)ue[_e][be]=0;ue[be][be]=1}for(ye=ge-1;0<=ye;ye--)if(0!==de[ye]){for(be=ye+1;be<te;be++){for(we=0,_e=ye;_e<J;_e++)we+=ue[_e][ye]*ue[_e][be];for(we=-we/ue[ye][ye],_e=ye;_e<J;_e++)ue[_e][be]+=we*ue[_e][ye]}for(_e=ye;_e<J;_e++)ue[_e][ye]=-ue[_e][ye];for(ue[ye][ye]=1+ue[ye][ye],_e=0;_e<ye-1;_e++)ue[_e][ye]=0}else{for(_e=0;_e<J;_e++)ue[_e][ye]=0;ue[ye][ye]=1}}if(ie)for(ye=ee-1;0<=ye;ye--){if(ye<fe&&0!==ce[ye])for(be=ye+1;be<ee;be++){for(we=0,_e=ye+1;_e<ee;_e++)we+=he[_e][ye]*he[_e][be];for(we=-we/he[ye+1][ye],_e=ye+1;_e<ee;_e++)he[_e][be]+=we*he[_e][ye]}for(_e=0;_e<ee;_e++)he[_e][ye]=0;he[ye][ye]=1}for(var Ve=xe-1,Fe=0,Ye=Math.pow(2,-52);0<xe;){for(ye=xe-2;-1<=ye&&-1!==ye;ye--)if(Math.abs(ce[ye])<=Ye*(Math.abs(de[ye])+Math.abs(de[ye+1]))){ce[ye]=0;break}if(ye===xe-2)Ie=4;else{for(ke=xe-1;ke>=ye&&ke!==ye;ke--)if(we=(ke===xe?0:Math.abs(ce[ke]))+(ke===ye+1?0:Math.abs(ce[ke-1])),Math.abs(de[ke])<=Ye*we){de[ke]=0;break}ke===ye?Ie=3:ke===xe-1?Ie=1:(Ie=2,ye=ke)}switch(ye++,Ie){case 1:{for(ve=ce[xe-2],ce[xe-2]=0,be=xe-2;be>=ye;be--)if(we=W(de[be],ve),Me=de[be]/we,Pe=ve/we,de[be]=we,be!==ye&&(ve=-Pe*ce[be-1],ce[be-1]=Me*ce[be-1]),ie)for(_e=0;_e<ee;_e++)we=Me*he[_e][be]+Pe*he[_e][xe-1],he[_e][xe-1]=-Pe*he[_e][be]+Me*he[_e][xe-1],he[_e][be]=we;break}case 2:{for(ve=ce[ye-1],ce[ye-1]=0,be=ye;be<xe;be++)if(we=W(de[be],ve),Me=de[be]/we,Pe=ve/we,de[be]=we,ve=-Pe*ce[be],ce[be]=Me*ce[be],ae)for(_e=0;_e<J;_e++)we=Me*ue[_e][be]+Pe*ue[_e][ye-1],ue[_e][ye-1]=-Pe*ue[_e][be]+Me*ue[_e][ye-1],ue[_e][be]=we;break}case 3:{for(De=Math.max(Math.max(Math.max(Math.max(Math.abs(de[xe-1]),Math.abs(de[xe-2])),Math.abs(ce[xe-2])),Math.abs(de[ye])),Math.abs(ce[ye])),Se=de[xe-1]/De,Ce=de[xe-2]/De,Ae=ce[xe-2]/De,Re=de[ye]/De,Be=ce[ye]/De,Te=((Ce+Se)*(Ce-Se)+Ae*Ae)/2,ze=Se*Ae*(Se*Ae),Le=0,(0!==Te||0!==ze)&&(Le=Math.sqrt(Te*Te+ze),0>Te&&(Le=-Le),Le=ze/(Te+Le)),ve=(Re+Se)*(Re-Se)+Le,Ee=Re*Be,be=ye;be<xe-1;be++){if(we=W(ve,Ee),Me=ve/we,Pe=Ee/we,be!==ye&&(ce[be-1]=we),ve=Me*de[be]+Pe*ce[be],ce[be]=Me*ce[be]-Pe*de[be],Ee=Pe*de[be+1],de[be+1]=Me*de[be+1],ie)for(_e=0;_e<ee;_e++)we=Me*he[_e][be]+Pe*he[_e][be+1],he[_e][be+1]=-Pe*he[_e][be]+Me*he[_e][be+1],he[_e][be]=we;if(we=W(ve,Ee),Me=ve/we,Pe=Ee/we,de[be]=we,ve=Me*ce[be]+Pe*de[be+1],de[be+1]=-Pe*ce[be]+Me*de[be+1],Ee=Pe*ce[be+1],ce[be+1]=Me*ce[be+1],ae&&be<J-1)for(_e=0;_e<J;_e++)we=Me*ue[_e][be]+Pe*ue[_e][be+1],ue[_e][be+1]=-Pe*ue[_e][be]+Me*ue[_e][be+1],ue[_e][be]=we}ce[xe-2]=ve,++Fe;break}case 4:{if(0>=de[ye]&&(de[ye]=0>de[ye]?-de[ye]:0,ie))for(_e=0;_e<=Ve;_e++)he[_e][ye]=-he[_e][ye];for(;ye<Ve&&!(de[ye]>=de[ye+1]);){if(we=de[ye],de[ye]=de[ye+1],de[ye+1]=we,ie&&ye<ee-1)for(_e=0;_e<ee;_e++)we=he[_e][ye+1],he[_e][ye+1]=he[_e][ye],he[_e][ye]=we;if(ae&&ye<J-1)for(_e=0;_e<J;_e++)we=ue[_e][ye+1],ue[_e][ye+1]=ue[_e][ye],ue[_e][ye]=we;ye++}Fe=0,xe--;break}}}if(oe){var Oe=he;he=ue,ue=Oe}this.m=J,this.n=ee,this.s=de,this.U=ue,this.V=he}var E=I("../matrix").Matrix,G=I("./util"),W=G.hypotenuse,Z=G.getFilled2DArray;L.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){for(var Q=Math.pow(2,-52),$=Math.max(this.m,this.n)*this.s[0]*Q,J=0,ee=this.s,te=0,ae=ee.length;te<ae;te++)ee[te]>$&&J++;return J},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return E.isMatrix(this.U)||(this.U=new E(this.U)),this.U},get rightSingularVectors(){return E.isMatrix(this.V)||(this.V=new E(this.V)),this.V},get diagonalMatrix(){return E.diag(this.s)},solve:function($){var ee=this.threshold,te=this.s.length,ae=E.zeros(te,te),ie;for(ie=0;ie<te;ie++)ae[ie][ie]=Math.abs(this.s[ie])<=ee?0:1/this.s[ie];var ne=this.U,oe=this.rightSingularVectors,le=oe.mmul(ae),se=oe.rows,de=ne.length,ue=E.zeros(se,de),he,ce,pe;for(ie=0;ie<se;ie++)for(he=0;he<de;he++){for(pe=0,ce=0;ce<te;ce++)pe+=le[ie][ce]*ne[he][ce];ue[ie][he]=pe}return ue.mmul($)},solveForDiagonal:function($){return this.solve(E.diag($))},inverse:function(){var $=this.V,J=this.threshold,ee=$.length,te=$[0].length,ae=new E(ee,this.s.length),ie,ne;for(ie=0;ie<ee;ie++)for(ne=0;ne<te;ne++)ae[ie][ne]=Math.abs(this.s[ne])>J?$[ie][ne]/this.s[ne]:0;var oe=this.U,le=oe.length,se=oe[0].length,de=new E(ee,le),ue,he;for(ie=0;ie<ee;ie++)for(ne=0;ne<le;ne++){for(he=0,ue=0;ue<se;ue++)he+=ae[ie][ue]*oe[ne][ue];de[ie][ne]=he}return de}},R.exports=L},{"../matrix":92,"./util":89}],89:[function(I,R,T){"use strict";T.hypotenuse=function(E,G){var W;return Math.abs(E)>Math.abs(G)?(W=G/E,Math.abs(E)*Math.sqrt(1+W*W)):0===G?0:(W=E/G,Math.abs(G)*Math.sqrt(1+W*W))},T.getEmpty2DArray=function(L,E){for(var G=Array(L),W=0;W<L;W++)G[W]=Array(E);return G},T.getFilled2DArray=function(L,E,G){for(var W=Array(L),Z=0;Z<L;Z++){W[Z]=Array(E);for(var Q=0;Q<E;Q++)W[Z][Q]=G}return W}},{}],90:[function(I,R){"use strict";function L(ee){return ee=G.checkMatrix(ee),E(ee,G.eye(ee.rows))}function E(ee,te){return ee=G.checkMatrix(ee),te=G.checkMatrix(te),ee.isSquare()?new Q(ee).solve(te):new $(ee).solve(te)}var G=I("./matrix").Matrix,W=I("./dc/svd"),Z=I("./dc/evd"),Q=I("./dc/lu"),$=I("./dc/qr"),J=I("./dc/cholesky");G.inverse=G.inv=L,G.prototype.inverse=G.prototype.inv=function(){return L(this)},G.solve=E,G.prototype.solve=function(ee){return E(this,ee)},R.exports={SingularValueDecomposition:W,SVD:W,EigenvalueDecomposition:Z,EVD:Z,LuDecomposition:Q,LU:Q,QrDecomposition:$,QR:$,CholeskyDecomposition:J,CHO:J,inverse:L,solve:E}},{"./dc/cholesky":84,"./dc/evd":85,"./dc/lu":86,"./dc/qr":87,"./dc/svd":88,"./matrix":92}],91:[function(I,R){"use strict";R.exports=I("./matrix").Matrix,R.exports.Decompositions=R.exports.DC=I("./decompositions")},{"./decompositions":90,"./matrix":92}],92:[function(I,R,T){"use strict";I("./symbol-species");var L=I("./abstractMatrix"),E=I("./util");class G extends L(Array){constructor(W,Z){var Q;if(1===arguments.length&&"number"==typeof W)return Array(W);if(G.isMatrix(W))return W.clone();if(Number.isInteger(W)&&0<W){if(super(W),Number.isInteger(Z)&&0<Z)for(Q=0;Q<W;Q++)this[Q]=Array(Z);else throw new TypeError("nColumns must be a positive integer");}else if(Array.isArray(W)){var $=W;if(W=$.length,Z=$[0].length,"number"!=typeof Z||0===Z)throw new TypeError("Data must be a 2D array with at least one element");for(super(W),Q=0;Q<W;Q++){if($[Q].length!==Z)throw new RangeError("Inconsistent array dimensions");this[Q]=[].concat($[Q])}}else throw new TypeError("First argument must be a positive number or an array");return this.rows=W,this.columns=Z,this}set(W,Z,Q){return this[W][Z]=Q,this}get(W,Z){return this[W][Z]}clone(){for(var W=new this.constructor[Symbol.species](this.rows,this.columns),Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)W.set(Z,Q,this.get(Z,Q));return W}removeRow(W){if(E.checkRowIndex(this,W),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(W,1),this.rows-=1,this}addRow(W,Z){return void 0===Z&&(Z=W,W=this.rows),E.checkRowIndex(this,W,!0),Z=E.checkRowVector(this,Z,!0),this.splice(W,0,Z),this.rows+=1,this}removeColumn(W){if(E.checkColumnIndex(this,W),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var Z=0;Z<this.rows;Z++)this[Z].splice(W,1);return this.columns-=1,this}addColumn(W,Z){"undefined"==typeof Z&&(Z=W,W=this.columns),E.checkColumnIndex(this,W,!0),Z=E.checkColumnVector(this,Z);for(var Q=0;Q<this.rows;Q++)this[Q].splice(W,0,Z[Q]);return this.columns+=1,this}}T.Matrix=G,G.abstractMatrix=L},{"./abstractMatrix":83,"./symbol-species":93,"./util":94}],93:[function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},{}],94:[function(I,R,T){"use strict";var L=I("./matrix");T.checkRowIndex=function(G,W,Z){var Q=Z?G.rows:G.rows-1;if(0>W||W>Q)throw new RangeError("Row index out of range")},T.checkColumnIndex=function(G,W,Z){var Q=Z?G.columns:G.columns-1;if(0>W||W>Q)throw new RangeError("Column index out of range")},T.checkRowVector=function(G,W){if(W.to1DArray&&(W=W.to1DArray()),W.length!==G.columns)throw new RangeError("vector size must be the same as the number of columns");return W},T.checkColumnVector=function(G,W){if(W.to1DArray&&(W=W.to1DArray()),W.length!==G.rows)throw new RangeError("vector size must be the same as the number of rows");return W},T.checkIndices=function(G,W,Z){var Q=W.some(J=>{return 0>J||J>=G.rows}),$=Z.some(J=>{return 0>J||J>=G.columns});if(Q||$)throw new RangeError("Indices are out of range");if("object"!=typeof W||"object"!=typeof Z)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(W)||(W=Array.from(W)),Array.isArray(Z)||(W=Array.from(Z)),{row:W,column:Z}},T.checkRange=function(G,W,Z,Q,$){if(5!==arguments.length)throw new TypeError("Invalid argument type");var J=Array.from(arguments).slice(1).some(function(ee){return"number"!=typeof ee});if(J)throw new TypeError("Invalid argument type");if(W>Z||Q>$||0>W||W>=G.rows||0>Z||Z>=G.rows||0>Q||Q>=G.columns||0>$||$>=G.columns)throw new RangeError("Submatrix indices are out of range")},T.getRange=function(G,W){for(var Z=Array(W-G+1),Q=0;Q<Z.length;Q++)Z[Q]=G+Q;return Z},T.sumByRow=function(G){for(var W=L.Matrix.zeros(G.rows,1),Z=0;Z<G.rows;++Z)for(var Q=0;Q<G.columns;++Q)W.set(Z,0,W.get(Z,0)+G.get(Z,Q));return W},T.sumByColumn=function(G){for(var W=L.Matrix.zeros(1,G.columns),Z=0;Z<G.rows;++Z)for(var Q=0;Q<G.columns;++Q)W.set(0,Q,W.get(0,Q)+G.get(Z,Q));return W},T.sumAll=function(G){for(var W=0,Z=0;Z<G.rows;Z++)for(var Q=0;Q<G.columns;Q++)W+=G.get(Z,Q);return W}},{"./matrix":92}],95:[function(I,R){"use strict";var L=I("../abstractMatrix"),E=I("../matrix");class G extends L(){constructor(W,Z,Q){super(),this.matrix=W,this.rows=Z,this.columns=Q}static get[Symbol.species](){return E.Matrix}}R.exports=G},{"../abstractMatrix":83,"../matrix":92}],96:[function(I,R){"use strict";var L=I("./base");R.exports=class extends L{constructor(G,W){super(G,G.rows,1),this.column=W}set(G,W,Z){return this.matrix.set(G,this.column,Z),this}get(G){return this.matrix.get(G,this.column)}}},{"./base":95}],97:[function(I,R){"use strict";var L=I("./base");R.exports=class extends L{constructor(G){super(G,G.rows,G.columns)}set(G,W,Z){return this.matrix.set(G,this.columns-W-1,Z),this}get(G,W){return this.matrix.get(G,this.columns-W-1)}}},{"./base":95}],98:[function(I,R){"use strict";var L=I("./base");R.exports=class extends L{constructor(G){super(G,G.rows,G.columns)}set(G,W,Z){return this.matrix.set(this.rows-G-1,W,Z),this}get(G,W){return this.matrix.get(this.rows-G-1,W)}}},{"./base":95}],99:[function(I,R){"use strict";var L=I("./base");R.exports=class extends L{constructor(G,W){super(G,1,G.columns),this.row=W}set(G,W,Z){return this.matrix.set(this.row,W,Z),this}get(G,W){return this.matrix.get(this.row,W)}}},{"./base":95}],100:[function(I,R){"use strict";var L=I("./base"),E=I("../util");R.exports=class extends L{constructor(W,Z,Q){var $=E.checkIndices(W,Z,Q);super(W,$.row.length,$.column.length),this.rowIndices=$.row,this.columnIndices=$.column}set(W,Z,Q){return this.matrix.set(this.rowIndices[W],this.columnIndices[Z],Q),this}get(W,Z){return this.matrix.get(this.rowIndices[W],this.columnIndices[Z])}}},{"../util":94,"./base":95}],101:[function(I,R){"use strict";var L=I("./base"),E=I("../util");R.exports=class extends L{constructor(W,Z,Q,$,J){E.checkRange(W,Z,Q,$,J),super(W,Q-Z+1,J-$+1),this.startRow=Z,this.startColumn=$}set(W,Z,Q){return this.matrix.set(this.startRow+W,this.startColumn+Z,Q),this}get(W,Z){return this.matrix.get(this.startRow+W,this.startColumn+Z)}}},{"../util":94,"./base":95}],102:[function(I,R){"use strict";var L=I("./base");R.exports=class extends L{constructor(G){super(G,G.columns,G.rows)}set(G,W,Z){return this.matrix.set(W,G,Z),this}get(G,W){return this.matrix.get(W,G)}}},{"./base":95}],103:[function(I,R,T){"use strict";T.SimpleLinearRegression=T.SLR=I("./regression/simple-linear-regression"),T.NonLinearRegression=T.NLR={PolynomialRegression:I("./regression/polynomial-regression"),PotentialRegression:I("./regression/potential-regression"),ExpRegression:I("./regression/exp-regression"),PowerRegression:I("./regression/power-regression")},T.KernelRidgeRegression=T.KRR=I("./regression/kernel-ridge-regression"),T.PolinomialFitting2D=I("./regression/poly-fit-regression2d"),T.TheilSenRegression=I("./regression/theil-sen-regression")},{"./regression/exp-regression":105,"./regression/kernel-ridge-regression":106,"./regression/poly-fit-regression2d":107,"./regression/polynomial-regression":108,"./regression/potential-regression":109,"./regression/power-regression":110,"./regression/simple-linear-regression":111,"./regression/theil-sen-regression":112}],104:[function(I,R){"use strict";R.exports=class{predict(E){var G;if(Array.isArray(E)){G=Array(E.length);for(var W=0;W<E.length;W++)G[W]=this._predict(E[W])}else if(Number.isFinite(E))G=this._predict(E);else throw new TypeError("x must be a number or array");return G}_predict(){throw new Error("_compute not implemented")}train(){}toString(){return""}toLaTeX(){return""}modelQuality(E,G){for(var W=E.length,Z=Array(W),Q=0;Q<W;Q++)Z[Q]=this._predict(E[Q]);for(var $=0,J=0,ee=0,te=0,ae=0,ie=0,ne=0,oe=0;oe<W;oe++)$+=Z[oe],J+=G[oe],ae+=Z[oe]*Z[oe],ie+=G[oe]*G[oe],ne+=Z[oe]*G[oe],0!==G[oe]&&(ee+=(G[oe]-Z[oe])*(G[oe]-Z[oe])/G[oe]),te=(G[oe]-Z[oe])*(G[oe]-Z[oe]);var le=(W*ne-$*J)/Math.sqrt((W*ae-$*$)*(W*ie-J*J));return{r:le,r2:le*le,chi2:ee,rmsd:te*te/W}}}},{}],105:[function(I,R){"use strict";var L=I("./util").maybeToPrecision,E=I("./simple-linear-regression"),G=I("./base-regression");class W extends G{constructor(Z,Q,$){super();if(!0===Z)this.A=Q.A,this.C=Q.C,Q.quality&&(this.quality=Q.quality);else{var ee=Z.length;if(ee!==Q.length)throw new RangeError("input and output array have a different length");for(var te=Array(ee),ae=0;ae<ee;ae++)te[ae]=Math.log(Q[ae]);var ie=new E(Z,te,{computeCoefficient:!1});this.A=ie.slope,this.C=Math.exp(ie.intercept),($||{}).computeQuality&&(this.quality=this.modelQuality(Z,Q))}}_predict(Z){return this.C*Math.exp(Z*this.A)}toJSON(){var Z={name:"expRegression",A:this.A,C:this.C};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"f(x) = "+L(this.C,Z)+" * exp("+L(this.A,Z)+" * x)"}toLaTeX(Z){return 0<=this.A?"f(x) = "+L(this.C,Z)+"e^{"+L(this.A,Z)+"x}":"f(x) = \\frac{"+L(this.C,Z)+"}{e^{"+L(-this.A,Z)+"x}}"}static load(Z){if("expRegression"!==Z.name)throw new TypeError("not a exp regression model");return new W(!0,Z)}}R.exports=W},{"./base-regression":104,"./simple-linear-regression":111,"./util":113}],106:[function(I,R){"use strict";var L=I("ml-matrix"),E=I("ml-kernel"),G=I("./base-regression"),W={lambda:0.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class Z extends G{constructor(Q,$,J){if(super(),!0===Q)this.alpha=$.alpha,this.inputs=$.inputs,this.kernelType=$.kernelType,this.kernelOptions=$.kernelOptions,this.kernel=new E($.kernelType,$.kernelOptions),$.quality&&(this.quality=$.quality);else{J=Object.assign({},W,J);var ee=new E(J.kernelType,J.kernelOptions),te=ee.compute(Q),ae=Q.length;te.add(L.eye(ae,ae).mul(J.lambda)),this.alpha=te.solve($),this.inputs=Q,this.kernelType=J.kernelType,this.kernelOptions=J.kernelOptions,this.kernel=ee,J.computeQuality&&(this.quality=this.modelQuality(Q,$))}}_predict(Q){return this.kernel.compute([Q],this.inputs).mmul(this.alpha)[0]}toJSON(){var Q={name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions};return this.quality&&(Q.quality=this.quality),Q}static load(Q){if("kernelRidgeRegression"!==Q.name)throw new TypeError("not a KRR model");return new Z(!0,Q)}}R.exports=Z},{"./base-regression":104,"ml-kernel":74,"ml-matrix":91}],107:[function(I,R){"use strict";function L(J,ee){for(var te=J.clone(),ae=0;ae<J.rows;++ae)te[ae][0]=Math.pow(te[ae][0],ee);return te}function E(J,ee){this[J][ee]=Math.abs(this[J][ee])}var G=I("ml-matrix"),W=G.DC.SingularValueDecomposition,Z=I("./base-regression"),Q={order:2};class $ extends Z{constructor(J,ee,te){super(),!0===J?(this.coefficients=G.columnVector(ee.coefficients),this.order=ee.order,ee.r&&(this.r=ee.r,this.r2=ee.r2),ee.chi2&&(this.chi2=ee.chi2)):(te=Object.assign({},Q,te),this.order=te.order,this.coefficients=[],this.X=J,this.y=ee,this.train(this.X,this.y,te),te.computeQuality&&(this.quality=this.modelQuality(J,ee)))}train(J,ee){if(G.isMatrix(J)||(J=new G(J)),G.isMatrix(ee)||(ee=G.columnVector(ee)),ee.rows!==J.rows&&(ee=ee.transpose()),2!==J.columns)throw new RangeError("You give X with "+J.columns+" columns and it must be 2");if(J.rows!==ee.rows)throw new RangeError("X and y must have the same rows");var te=J.rows,ae=(this.order+2)*(this.order+1)/2;this.coefficients=Array(ae);var ie=J.getColumnVector(0),ne=J.getColumnVector(1),oe=1/ie.clone().apply(E).max(),le=1/ne.clone().apply(E).max(),se=1/ee.clone().apply(E).max();ie.mulColumn(0,oe),ne.mulColumn(0,le),ee.mulColumn(0,se);for(var de=new G(te,ae),ue=0,he=0,ce;he<=this.order;++he){ce=this.order-he;for(var pe=0,ge;pe<=ce;++pe)ge=L(ie,he).mulColumnVector(L(ne,pe)),de.setColumn(ue,ge),ue++}var fe=new W(de.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),_e=G.rowVector(fe.diagonal);_e=_e.apply(function(we,ke){this[we][ke]=1e-15<=this[we][ke]?1/this[we][ke]:0});var be=G.zeros(te,ae);for(he=0;he<ae;++he)be[he][he]=_e[0][he];_e=be;var ye=fe.rightSingularVectors,xe=fe.leftSingularVectors;for(this.coefficients=xe.mmul(_e.transpose()).mmul(ye.transpose()).mmul(ee),ue=0,he=0;he<=ae;++he)for(ce=this.order-he,pe=0;pe<=ce;++pe)this.coefficients[ue][0]=this.coefficients[ue][0]*Math.pow(oe,he)*Math.pow(le,pe)/se,ue++}_predict(J){for(var ee=J[0],te=J[1],ae=0,ie=0,ne=0;ne<=this.order;ne++)for(var oe=0;oe<=this.order-ne;oe++)ae+=Math.pow(ee,ne)*Math.pow(te,oe)*this.coefficients[ie][0],ie++;return ae}toJSON(){var J={name:"polyfit2D",order:this.order,coefficients:this.coefficients};return this.quality&&(J.quality=this.quality),J}static load(J){if("polyfit2D"!==J.name)throw new TypeError("not a polyfit2D model");return new $(!0,J)}}R.exports=$},{"./base-regression":104,"ml-matrix":91}],108:[function(I,R){"use strict";var L=I("./util").maybeToPrecision,E=I("./base-regression"),G=I("ml-matrix");class W extends E{constructor(Z,Q,$,J){super();if(!0===Z)this.coefficients=Q.coefficients,this.powers=Q.powers,this.M=Q.M,Q.quality&&(this.quality=Q.quality);else{var te=Z.length;if(te!==Q.length)throw new RangeError("input and output array have a different length");var ae;if(Array.isArray($))ae=$,$=ae.length;else for($++,ae=Array($),oe=0;oe<$;oe++)ae[oe]=oe;var ie=new G(te,$),ne=new G([Q]),oe,le;for(oe=0;oe<$;oe++)for(le=0;le<te;le++)ie[le][oe]=0===ae[oe]?1:Math.pow(Z[le],ae[oe]);var se=ie.transposeView(),de=se.mmul(ie),ue=se.mmul(ne.transposeView());this.coefficients=de.solve(ue).to1DArray(),this.powers=ae,this.M=$-1,(J||{}).computeQuality&&(this.quality=this.modelQuality(Z,Q))}}_predict(Z){for(var Q=0,$=0;$<this.powers.length;$++)Q+=this.coefficients[$]*Math.pow(Z,this.powers[$]);return Q}toJSON(){var Z={name:"polynomialRegression",coefficients:this.coefficients,powers:this.powers,M:this.M};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return this._toFormula(Z,!1)}toLaTeX(Z){return this._toFormula(Z,!0)}_toFormula(Z,Q){var $="^",J="",ee=" * ";Q&&($="^{",J="}",ee="");for(var te="",ie=0,ae;ie<this.coefficients.length;ie++)ae="",0!==this.coefficients[ie]&&(ae=0===this.powers[ie]?L(this.coefficients[ie],Z):1===this.powers[ie]?L(this.coefficients[ie],Z)+ee+"x":L(this.coefficients[ie],Z)+ee+"x"+$+this.powers[ie]+J,0<this.coefficients[ie]&&ie!==this.coefficients.length-1?ae=" + "+ae:ie!==this.coefficients.length-1&&(ae=" "+ae)),te=ae+te;return" + "===te.charAt(0)&&(te=te.slice(1)),"f(x) = "+te}static load(Z){if("polynomialRegression"!==Z.name)throw new TypeError("not a polynomial regression model");return new W(!0,Z)}}R.exports=W},{"./base-regression":104,"./util":113,"ml-matrix":91}],109:[function(I,R){"use strict";var L=I("./util").maybeToPrecision,E=I("./polynomial-regression"),G=I("./base-regression");class W extends G{constructor(Z,Q,$,J){super();if(!0===Z)this.A=Q.A,this.M=Q.M,Q.quality&&(this.quality=Q.quality);else{var te=Z.length;if(te!==Q.length)throw new RangeError("input and output array have a different length");var ae=new E(Z,Q,[$],{computeCoefficient:!0});this.A=ae.coefficients[0],this.M=$,(J||{}).computeQuality&&(this.quality=this.modelQuality(Z,Q))}}_predict(Z){return this.A*Math.pow(Z,this.M)}toJSON(){var Z={name:"potentialRegression",A:this.A,M:this.M};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"f(x) = "+L(this.A,Z)+" * x^"+this.M}toLaTeX(Z){return 0<=this.M?"f(x) = "+L(this.A,Z)+"x^{"+this.M+"}":"f(x) = \\frac{"+L(this.A,Z)+"}{x^{"+-this.M+"}}"}static load(Z){if("potentialRegression"!==Z.name)throw new TypeError("not a potential regression model");return new W(!0,Z)}}R.exports=W},{"./base-regression":104,"./polynomial-regression":108,"./util":113}],110:[function(I,R){"use strict";var L=I("./util").maybeToPrecision,E=I("./simple-linear-regression"),G=I("./base-regression");class W extends G{constructor(Z,Q,$){super();if(!0===Z)this.A=Q.A,this.B=Q.B,this.quality=Q.quality||{},Q.quality.r&&(this.quality.r=Q.quality.r,this.quality.r2=Q.quality.r2),Q.quality.chi2&&(this.quality.chi2=Q.quality.chi2);else{var ee=Z.length;if(ee!==Q.length)throw new RangeError("input and output array have a different length");for(var te=Array(ee),ae=Array(ee),ie=0;ie<ee;ie++)te[ie]=Math.log(Z[ie]),ae[ie]=Math.log(Q[ie]);var ne=new E(te,ae,{computeCoefficient:!1});this.A=Math.exp(ne.intercept),this.B=ne.slope,($||{}).computeQuality&&(this.quality=this.modelQuality(Z,Q))}}_predict(Z){return this.A*Math.pow(Z,this.B)}toJSON(){var Z={name:"powerRegression",A:this.A,B:this.B};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"f(x) = "+L(this.A,Z)+" * x^"+L(this.B,Z)}toLaTeX(Z){return 0<=this.B?"f(x) = "+L(this.A,Z)+"x^{"+L(this.B,Z)+"}":"f(x) = \\frac{"+L(this.A,Z)+"}{x^{"+L(-this.B,Z)+"}}"}static load(Z){if("powerRegression"!==Z.name)throw new TypeError("not a power regression model");return new W(!0,Z)}}R.exports=W},{"./base-regression":104,"./simple-linear-regression":111,"./util":113}],111:[function(I,R){"use strict";var L=I("./util").maybeToPrecision,E=I("./base-regression");class G extends E{constructor(W,Z,Q){if(Q=Q||{},super(),!0===W)this.slope=Z.slope,this.intercept=Z.intercept,this.quality=Z.quality||{},Z.quality.r&&(this.quality.r=Z.quality.r,this.quality.r2=Z.quality.r2),Z.quality.chi2&&(this.quality.chi2=Z.quality.chi2);else{var $=W.length;if($!==Z.length)throw new RangeError("input and output array have a different length");for(var J=0,ee=0,te=0,ae=0,ie=0;ie<$;ie++)J+=W[ie],ee+=Z[ie],te+=W[ie]*W[ie],ae+=W[ie]*Z[ie];var ne=$*ae-J*ee;this.slope=ne/($*te-J*J),this.intercept=1/$*ee-this.slope*(1/$)*J,this.coefficients=[this.intercept,this.slope],Q.computeQuality&&(this.quality=this.modelQuality(W,Z))}}toJSON(){var W={name:"simpleLinearRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(W.quality=this.quality),W}_predict(W){return this.slope*W+this.intercept}computeX(W){return(W-this.intercept)/this.slope}toString(W){var Z="f(x) = ";if(this.slope){var Q=L(this.slope,W);if(Z+=(1e-5>Math.abs(Q-1)?"":Q+" * ")+"x",this.intercept){var $=Math.abs(this.intercept),J=$===this.intercept?"+":"-";Z+=" "+J+" "+L($,W)}}else Z+=L(this.intercept,W);return Z}toLaTeX(W){return this.toString(W)}static load(W){if("simpleLinearRegression"!==W.name)throw new TypeError("not a SLR model");return new G(!0,W)}}R.exports=G},{"./base-regression":104,"./util":113}],112:[function(I,R){"use strict";var L=I("./base-regression"),E=I("./util").maybeToPrecision,G=I("ml-stat/array").median;class W extends L{constructor(Z,Q,$){if($=$||{},super(),!0===Z)this.slope=Q.slope,this.intercept=Q.intercept,this.quality=Object.assign({},Q.quality,this.quality);else{var J=Z.length;if(J!==Q.length)throw new RangeError("Input and output array have a different length");for(var ee=Array(J*J),te=0,ae=0;ae<J;++ae)for(var ie=ae+1;ie<J;++ie)Z[ae]!==Z[ie]&&(ee[te++]=(Q[ie]-Q[ae])/(Z[ie]-Z[ae]));ee.length=te;for(var ne=G(ee),oe=Array(J),le=0;le<J;++le)oe[le]=Q[le]-ne*Z[le];this.slope=ne,this.intercept=G(oe),this.coefficients=[this.intercept,this.slope],$.computeQuality&&(this.quality=this.modelQuality(Z,Q))}}toJSON(){var Z={name:"TheilSenRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(Z.quality=this.quality),Z}_predict(Z){return this.slope*Z+this.intercept}computeX(Z){return(Z-this.intercept)/this.slope}toString(Z){var Q="f(x) = ";if(this.slope){var $=E(this.slope,Z);if(Q+=(1e-5>Math.abs($-1)?"":$+" * ")+"x",this.intercept){var J=Math.abs(this.intercept),ee=J===this.intercept?"+":"-";Q+=" "+ee+" "+E(J,Z)}}else Q+=E(this.intercept,Z);return Q}toLaTeX(Z){return this.toString(Z)}static load(Z){if("TheilSenRegression"!==Z.name)throw new TypeError("not a Theil-Sen model");return new W(!0,Z)}}R.exports=W},{"./base-regression":104,"./util":113,"ml-stat/array":114}],113:[function(I,R,T){"use strict";T.maybeToPrecision=function(E,G){return 0>E?(E=-1*E,G?"- "+E.toPrecision(G):"- "+E.toString()):G?E.toPrecision(G):E.toString()}},{}],114:[function(I,R,T){"use strict";function L(E,G){return E-G}T.sum=function(G){for(var E=0,W=0;W<G.length;W++)E+=G[W];return E},T.max=function(G){for(var E=G[0],W=G.length,Z=1;Z<W;Z++)G[Z]>E&&(E=G[Z]);return E},T.min=function(G){for(var E=G[0],W=G.length,Z=1;Z<W;Z++)G[Z]<E&&(E=G[Z]);return E},T.minMax=function(G){for(var W=G[0],Z=G[0],Q=G.length,$=1;$<Q;$++)G[$]<W&&(W=G[$]),G[$]>Z&&(Z=G[$]);return{min:W,max:Z}},T.arithmeticMean=function(G){for(var W=0,Z=G.length,Q=0;Q<Z;Q++)W+=G[Q];return W/Z},T.mean=T.arithmeticMean,T.geometricMean=function(G){for(var W=1,Z=G.length,Q=0;Q<Z;Q++)W*=G[Q];return Math.pow(W,1/Z)},T.logMean=function(G){for(var W=0,Z=G.length,Q=0;Q<Z;Q++)W+=Math.log(G[Q]);return W/Z},T.grandMean=function(G,W){for(var Z=0,Q=0,$=G.length,J=0;J<$;J++)Z+=W[J]*G[J],Q+=W[J];return Z/Q},T.truncatedMean=function(G,W,Z){Z===void 0&&(Z=!1),Z||(G=[].concat(G).sort(L));for(var Q=G.length,$=Math.floor(Q*W),J=0,ee=$;ee<Q-$;ee++)J+=G[ee];return J/(Q-2*$)},T.harmonicMean=function(G){for(var W=0,Z=G.length,Q=0;Q<Z;Q++){if(0===G[Q])throw new RangeError("value at index "+Q+"is zero");W+=1/G[Q]}return Z/W},T.contraHarmonicMean=function(G){for(var W=0,Z=0,Q=G.length,$=0;$<Q;$++)W+=G[$]*G[$],Z+=G[$];if(0>Z)throw new RangeError("sum of values is negative");return W/Z},T.median=function(G,W){W===void 0&&(W=!1),W||(G=[].concat(G).sort(L));var Z=G.length,Q=Math.floor(Z/2);return 0==Z%2?0.5*(G[Q-1]+G[Q]):G[Q]},T.variance=function(G,W){W===void 0&&(W=!0);for(var Z=T.mean(G),Q=0,$=G.length,J=0,ee;J<$;J++)ee=G[J]-Z,Q+=ee*ee;return W?Q/($-1):Q/$},T.standardDeviation=function(G,W){return Math.sqrt(T.variance(G,W))},T.standardError=function(G){return T.standardDeviation(G)/Math.sqrt(G.length)},T.robustMeanAndStdev=function(G){var W=0,Z=0,Q=G.length,$=0;for($=0;$<Q;$++)W+=G[$];W/=Q;var J=Array(Q);for($=0;$<Q;$++)J[$]=Math.abs(G[$]-W);return J.sort(L),Z=1==Q%2?J[(Q-1)/2]/0.6745:0.5*(J[Q/2]+J[Q/2-1])/0.6745,{mean:W,stdev:Z}},T.quartiles=function(G,W){"undefined"==typeof W&&(W=!1),W||(G=[].concat(G).sort(L));var Z=G.length/4,Q=G[Math.ceil(Z)-1],$=T.median(G,!0),J=G[Math.ceil(3*Z)-1];return{q1:Q,q2:$,q3:J}},T.pooledStandardDeviation=function(G,W){return Math.sqrt(T.pooledVariance(G,W))},T.pooledVariance=function(G,W){"undefined"==typeof W&&(W=!0);for(var Z=0,Q=0,$=G.length,J=0;J<$;J++){var ee=G[J],te=T.variance(ee);Z+=(ee.length-1)*te,Q+=W?ee.length-1:ee.length}return Z/Q},T.mode=function(G){var W=G.length,Z=Array(W),Q;for(Q=0;Q<W;Q++)Z[Q]=0;var $=Array(W),J=0;for(Q=0;Q<W;Q++){var ee=$.indexOf(G[Q]);0<=ee?Z[ee]++:($[J]=G[Q],Z[J]=1,J++)}var te=0,ae=0;for(Q=0;Q<J;Q++)Z[Q]>te&&(te=Z[Q],ae=Q);return $[ae]},T.covariance=function(G,W,Z){"undefined"==typeof Z&&(Z=!0);var Q=T.mean(G),$=T.mean(W);if(G.length!==W.length)throw"Vectors do not have the same dimensions";for(var J=0,ee=G.length,te=0;te<ee;te++){var ae=G[te]-Q,ie=W[te]-$;J+=ae*ie}return Z?J/(ee-1):J/ee},T.skewness=function(G,W){"undefined"==typeof W&&(W=!0);for(var Z=T.mean(G),Q=0,$=0,J=G.length,ee=0,te;ee<J;ee++)te=G[ee]-Z,Q+=te*te,$+=te*te*te;var ae=Q/J,ie=$/J,ne=ie/Math.pow(ae,3/2);if(W){var oe=Math.sqrt(J*(J-1));return oe/(J-2)*ne}return ne},T.kurtosis=function(G,W){"undefined"==typeof W&&(W=!0);for(var Z=T.mean(G),Q=G.length,$=0,J=0,ee=0,te;ee<Q;ee++)te=G[ee]-Z,$+=te*te,J+=te*te*te*te;var ae=$/Q,ie=J/Q;if(W){var ne=$/(Q-1),le=J/(ne*ne);return Q*(Q+1)/((Q-1)*(Q-2)*(Q-3))*le-3*((Q-1)*(Q-1)/((Q-2)*(Q-3)))}return ie/(ae*ae)-3},T.entropy=function(G,W){"undefined"==typeof W&&(W=0);for(var Z=0,Q=G.length,$=0;$<Q;$++)Z+=G[$]*Math.log(G[$]+W);return-Z},T.weightedMean=function(G,W){for(var Z=0,Q=G.length,$=0;$<Q;$++)Z+=G[$]*W[$];return Z},T.weightedStandardDeviation=function(G,W){return Math.sqrt(T.weightedVariance(G,W))},T.weightedVariance=function(G,W){for(var Z=T.weightedMean(G,W),Q=0,$=G.length,J=0,ee=0,te=0;te<$;te++){var ae=G[te]-Z,ie=W[te];Q+=ie*(ae*ae),ee+=ie,J+=ie*ie}return Q*(ee/(ee*ee-J))},T.center=function(G,W){"undefined"==typeof W&&(W=!1);var Z=G;W||(Z=[].concat(G));for(var Q=T.mean(Z),$=Z.length,J=0;J<$;J++)Z[J]-=Q},T.standardize=function(G,W,Z){"undefined"==typeof W&&(W=T.standardDeviation(G)),"undefined"==typeof Z&&(Z=!1);for(var Q=G.length,$=Z?G:Array(Q),J=0;J<Q;J++)$[J]=G[J]/W;return $},T.cumulativeSum=function(G){var W=G.length,Z=Array(W);Z[0]=G[0];for(var Q=1;Q<W;Q++)Z[Q]=Z[Q-1]+G[Q];return Z}},{}],115:[function(I,R,T){"use strict";T.array=I("./array"),T.matrix=I("./matrix")},{"./array":114,"./matrix":116}],116:[function(I,R,T){"use strict";function L(G,W){return G-W}var E=I("./array");T.max=function(W){for(var G=-Infinity,Z=0;Z<W.length;Z++)for(var Q=0;Q<W[Z].length;Q++)W[Z][Q]>G&&(G=W[Z][Q]);return G},T.min=function(W){for(var G=Infinity,Z=0;Z<W.length;Z++)for(var Q=0;Q<W[Z].length;Q++)W[Z][Q]<G&&(G=W[Z][Q]);return G},T.minMax=function(W){for(var Z=Infinity,Q=-Infinity,$=0;$<W.length;$++)for(var J=0;J<W[$].length;J++)W[$][J]<Z&&(Z=W[$][J]),W[$][J]>Q&&(Q=W[$][J]);return{min:Z,max:Q}},T.entropy=function(W,Z){"undefined"==typeof Z&&(Z=0);for(var Q=0,$=W.length,J=W[0].length,ee=0;ee<$;ee++)for(var te=0;te<J;te++)Q+=W[ee][te]*Math.log(W[ee][te]+Z);return-Q},T.mean=function(W,Z){"undefined"==typeof Z&&(Z=0);var Q=W.length,$=W[0].length,J,ee,te,ae;if(-1===Z){for(J=[0],ee=Q*$,te=0;te<Q;te++)for(ae=0;ae<$;ae++)J[0]+=W[te][ae];J[0]/=ee}else if(0===Z)for(J=Array($),ee=Q,ae=0;ae<$;ae++){for(J[ae]=0,te=0;te<Q;te++)J[ae]+=W[te][ae];J[ae]/=ee}else if(1===Z)for(J=Array(Q),ee=$,ae=0;ae<Q;ae++){for(J[ae]=0,te=0;te<$;te++)J[ae]+=W[ae][te];J[ae]/=ee}else throw new Error("Invalid dimension");return J},T.sum=function(W,Z){"undefined"==typeof Z&&(Z=0);var Q=W.length,$=W[0].length,J,ee,te;if(-1===Z)for(J=[0],ee=0;ee<Q;ee++)for(te=0;te<$;te++)J[0]+=W[ee][te];else if(0===Z)for(J=Array($),te=0;te<$;te++)for(J[te]=0,ee=0;ee<Q;ee++)J[te]+=W[ee][te];else if(1===Z)for(J=Array(Q),te=0;te<Q;te++)for(J[te]=0,ee=0;ee<$;ee++)J[te]+=W[te][ee];else throw new Error("Invalid dimension");return J},T.product=function(W,Z){"undefined"==typeof Z&&(Z=0);var Q=W.length,$=W[0].length,J,ee,te;if(-1===Z)for(J=[1],ee=0;ee<Q;ee++)for(te=0;te<$;te++)J[0]*=W[ee][te];else if(0===Z)for(J=Array($),te=0;te<$;te++)for(J[te]=1,ee=0;ee<Q;ee++)J[te]*=W[ee][te];else if(1===Z)for(J=Array(Q),te=0;te<Q;te++)for(J[te]=1,ee=0;ee<$;ee++)J[te]*=W[te][ee];else throw new Error("Invalid dimension");return J},T.standardDeviation=function(W,Z,Q){for(var $=T.variance(W,Z,Q),J=$.length,ee=0;ee<J;ee++)$[ee]=Math.sqrt($[ee]);return $},T.variance=function(W,Z,Q){"undefined"==typeof Q&&(Q=!0),Z=Z||T.mean(W);var $=W.length;if(0===$)return[];for(var J=W[0].length,ee=Array(J),te=0;te<J;te++){for(var ae=0,ie=0,ne=0,oe=0;oe<$;oe++)ne=W[oe][te]-Z[te],ae+=ne,ie+=ne*ne;ee[te]=Q?(ie-ae*ae/$)/($-1):(ie-ae*ae/$)/$}return ee},T.median=function(W){for(var Z=W.length,Q=W[0].length,$=Array(Q),J=0,ee;J<Q;J++){ee=Array(Z);for(var te=0;te<Z;te++)ee[te]=W[te][J];ee.sort(L);var ae=ee.length;$[J]=0==ae%2?0.5*(ee[ae/2]+ee[ae/2-1]):ee[Math.floor(ae/2)]}return $},T.mode=function(W){var Z=W.length,Q=W[0].length,$=Array(Q),J,ee;for(J=0;J<Q;J++){for(var te=Array(Z),ae=0;ae<Z;ae++)te[ae]=0;var ie=Array(Z),ne=0;for(ee=0;ee<Z;ee++){var oe=ie.indexOf(W[ee][J]);0<=oe?te[oe]++:(ie[ne]=W[ee][J],te[ne]=1,ne++)}var le=0,se=0;for(ee=0;ee<ne;ee++)te[ee]>le&&(le=te[ee],se=ee);$[J]=ie[se]}return $},T.skewness=function(W,Z){"undefined"==typeof Z&&(Z=!0);for(var Q=T.mean(W),$=W.length,J=Q.length,ee=Array(J),te=0;te<J;te++){for(var ae=0,ie=0,ne=0,oe;ne<$;ne++)oe=W[ne][te]-Q[te],ae+=oe*oe,ie+=oe*oe*oe;var le=ae/$,se=ie/$,de=se/Math.pow(le,3/2);if(Z){var ue=Math.sqrt($*($-1));ee[te]=ue/($-2)*de}else ee[te]=de}return ee},T.kurtosis=function(W,Z){"undefined"==typeof Z&&(Z=!0);for(var Q=T.mean(W),$=W.length,J=W[0].length,ee=Array(J),te=0;te<J;te++){for(var ae=0,ie=0,ne=0,oe;ne<$;ne++)oe=W[ne][te]-Q[te],ae+=oe*oe,ie+=oe*oe*oe*oe;var le=ae/$,se=ie/$;if(Z){var de=ae/($-1),he=ie/(de*de);ee[te]=$*($+1)/(($-1)*($-2)*($-3))*he-3*(($-1)*($-1)/(($-2)*($-3)))}else ee[te]=se/(le*le)-3}return ee},T.standardError=function(W){for(var Z=W.length,Q=T.standardDeviation(W),$=Q.length,J=Array($),ee=Math.sqrt(Z),te=0;te<$;te++)J[te]=Q[te]/ee;return J},T.covariance=function(W,Z){return T.scatter(W,void 0,Z)},T.scatter=function(W,Z,Q){"undefined"==typeof Q&&(Q=0),"undefined"==typeof Z&&(0===Q?Z=W.length-1:1==Q&&(Z=W[0].length-1));var $=T.mean(W,Q),J=W.length;if(0===J)return[[]];var ee=W[0].length,te,ae,ie,ne,oe;if(0===Q){for(te=Array(ee),ae=0;ae<ee;ae++)te[ae]=Array(ee);for(ae=0;ae<ee;ae++)for(ie=ae;ie<ee;ie++){for(ne=0,oe=0;oe<J;oe++)ne+=(W[oe][ie]-$[ie])*(W[oe][ae]-$[ae]);ne/=Z,te[ae][ie]=ne,te[ie][ae]=ne}}else if(1===Q){for(te=Array(J),ae=0;ae<J;ae++)te[ae]=Array(J);for(ae=0;ae<J;ae++)for(ie=ae;ie<J;ie++){for(ne=0,oe=0;oe<ee;oe++)ne+=(W[ie][oe]-$[ie])*(W[ae][oe]-$[ae]);ne/=Z,te[ae][ie]=ne,te[ie][ae]=ne}}else throw new Error("Invalid dimension");return te},T.correlation=function(W){var Z=T.mean(W),Q=T.standardDeviation(W,!0,Z),$=T.zScores(W,Z,Q),J=W.length,ee=W[0].length,te,ae,ie=Array(ee);for(te=0;te<ee;te++)ie[te]=Array(ee);for(te=0;te<ee;te++)for(ae=te;ae<ee;ae++){for(var ne=0,oe=0,le=$.length;oe<le;oe++)ne+=$[oe][ae]*$[oe][te];ne/=J-1,ie[te][ae]=ne,ie[ae][te]=ne}return ie},T.zScores=function(W,Z,Q){return Z=Z||T.mean(W),"undefined"==typeof Q&&(Q=T.standardDeviation(W,!0,Z)),T.standardize(T.center(W,Z,!1),Q,!0)},T.center=function(W,Z,Q){Z=Z||T.mean(W);var $=W,J=W.length,ee,te,ae;if(!Q)for($=Array(J),ee=0;ee<J;ee++)$[ee]=Array(W[ee].length);for(ee=0;ee<J;ee++){var ie=$[ee];for(te=0,ae=ie.length;te<ae;te++)ie[te]=W[ee][te]-Z[te]}return $},T.standardize=function(W,Z,Q){"undefined"==typeof Z&&(Z=T.standardDeviation(W));var $=W,J=W.length,ee,te,ae;if(!Q)for($=Array(J),ee=0;ee<J;ee++)$[ee]=Array(W[ee].length);for(ee=0;ee<J;ee++){var ie=$[ee],ne=W[ee];for(te=0,ae=ie.length;te<ae;te++)0===Z[te]||isNaN(Z[te])||(ie[te]=ne[te]/Z[te])}return $},T.weightedVariance=function(W,Z){var Q=T.mean(W),$=W.length;if(0===$)return[];for(var J=W[0].length,ee=Array(J),te=0;te<J;te++){for(var ae=0,ie=0,ne=0,oe=0;oe<$;oe++){var le=W[oe][te]-Q[te],se=Z[oe];ae+=se*(le*le),ne+=se,ie+=se*se}ee[te]=ae*(ne/(ne*ne-ie))}return ee},T.weightedMean=function(W,Z,Q){"undefined"==typeof Q&&(Q=0);var $=W.length;if(0===$)return[];var J=W[0].length,ee,te,ae,ie,ne,oe;if(0===Q){for(ee=Array(J),te=0;te<J;te++)ee[te]=0;for(te=0;te<$;te++)for(oe=W[te],ne=Z[te],ie=0;ie<J;ie++)ee[ie]+=oe[ie]*ne}else if(1===Q){for(ee=Array($),te=0;te<$;te++)ee[te]=0;for(ie=0;ie<$;ie++)for(oe=W[ie],ne=Z[ie],te=0;te<J;te++)ee[ie]+=oe[te]*ne}else throw new Error("Invalid dimension");var le=E.sum(Z);if(0!==le)for(te=0,ae=ee.length;te<ae;te++)ee[te]/=le;return ee},T.weightedCovariance=function(W,Z,Q,$){$=$||0,Q=Q||T.weightedMean(W,Z,$);for(var J=0,ee=0,te=0,ae=Z.length;te<ae;te++)J+=Z[te],ee+=Z[te]*Z[te];var ie=J/(J*J-ee);return T.weightedScatter(W,Z,Q,ie,$)},T.weightedScatter=function(W,Z,Q,$,J){J=J||0,Q=Q||T.weightedMean(W,Z,J),"undefined"==typeof $&&($=1);var ee=W.length;if(0===ee)return[[]];var te=W[0].length,ae,ie,ne,oe,le;if(0===J){for(ae=Array(te),ie=0;ie<te;ie++)ae[ie]=Array(te);for(ie=0;ie<te;ie++)for(ne=ie;ne<te;ne++){for(le=0,oe=0;oe<ee;oe++)le+=Z[oe]*(W[oe][ne]-Q[ne])*(W[oe][ie]-Q[ie]);ae[ie][ne]=le*$,ae[ne][ie]=le*$}}else if(1===J){for(ae=Array(ee),ie=0;ie<ee;ie++)ae[ie]=Array(ee);for(ie=0;ie<ee;ie++)for(ne=ie;ne<ee;ne++){for(le=0,oe=0;oe<te;oe++)le+=Z[oe]*(W[ne][oe]-Q[ne])*(W[ie][oe]-Q[ie]);ae[ie][ne]=le*$,ae[ne][ie]=le*$}}else throw new Error("Invalid dimension");return ae}},{"./array":114}],117:[function(I,R){"use strict";R.exports="function"==typeof Promise?Promise:I("lie")},{lie:61}],118:[function(I,R){"use strict";R.exports=function(E,G){E=E||0;for(var W=Array(E),Z=0;Z<E;Z++)W[Z]=G;return W}},{}],119:[function(I,R,T){"use strict";function L(G){if("number"!=typeof G||E(G))throw new TypeError("Expected a number")}var E=I("number-is-nan");T.asc=function(G,W){return L(G),L(W),G-W},T.desc=function(G,W){return L(G),L(W),W-G}},{"number-is-nan":120}],120:[function(I,R){"use strict";R.exports=Number.isNaN||function(L){return L!==L}},{}],121:[function(I,R){"use strict";var L=Object.prototype.hasOwnProperty,E=Object.prototype.toString,G=Array.prototype.slice,W=I("./isArguments"),Z=Object.prototype.propertyIsEnumerable,Q=!Z.call({toString:null},"toString"),$=Z.call(function(){},"prototype"),J=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ee=function(le){var se=le.constructor;return se&&se.prototype===le},te={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},ae=function(){if("undefined"==typeof window)return!1;for(var oe in window)try{if(!te["$"+oe]&&L.call(window,oe)&&null!==window[oe]&&"object"==typeof window[oe])try{ee(window[oe])}catch(le){return!0}}catch(le){return!0}return!1}(),ie=function(le){if("undefined"==typeof window||!ae)return ee(le);try{return ee(le)}catch(se){return!1}},ne=function(le){var se=null!==le&&"object"==typeof le,de="[object Function]"===E.call(le),ue=W(le),he=se&&"[object String]"===E.call(le),ce=[];if(!se&&!de&&!ue)throw new TypeError("Object.keys called on a non-object");if(he&&0<le.length&&!L.call(le,0))for(var ge=0;ge<le.length;++ge)ce.push(ge+"");if(ue&&0<le.length)for(var fe=0;fe<le.length;++fe)ce.push(fe+"");else for(var _e in le)!($&&de&&"prototype"===_e)&&L.call(le,_e)&&ce.push(_e+"");if(Q)for(var be=ie(le),ye=0;ye<J.length;++ye)!(be&&"constructor"===J[ye])&&L.call(le,J[ye])&&ce.push(J[ye]);return ce};ne.shim=function(){if(Object.keys){var le=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!le){var se=Object.keys;Object.keys=function(ue){return W(ue)?se(G.call(ue)):se(ue)}}}else Object.keys=ne;return Object.keys||ne},R.exports=ne},{"./isArguments":122}],122:[function(I,R){"use strict";var L=Object.prototype.toString;R.exports=function(G){var W=L.call(G),Z="[object Arguments]"===W;return Z||(Z="[object Array]"!==W&&null!==G&&"object"==typeof G&&"number"==typeof G.length&&0<=G.length&&"[object Function]"===L.call(G.callee)),Z}},{}],123:[function(I,R){"use strict";var L=I("./lib/utils/common").assign,E=I("./lib/deflate"),G=I("./lib/inflate"),W=I("./lib/zlib/constants"),Z={};L(Z,E,G,W),R.exports=Z},{"./lib/deflate":124,"./lib/inflate":125,"./lib/utils/common":126,"./lib/zlib/constants":129}],124:[function(I,R,T){"use strict";function L(he){if(!(this instanceof L))return new L(he);this.options=Q.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},he||{});var ce=this.options;ce.raw&&0<ce.windowBits?ce.windowBits=-ce.windowBits:ce.gzip&&0<ce.windowBits&&16>ce.windowBits&&(ce.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ee,this.strm.avail_out=0;var pe=Z.deflateInit2(this.strm,ce.level,ce.method,ce.windowBits,ce.memLevel,ce.strategy);if(pe!==ne)throw new Error(J[pe]);if(ce.header&&Z.deflateSetHeader(this.strm,ce.header),ce.dictionary){var ge;if(ge="string"==typeof ce.dictionary?$.string2buf(ce.dictionary):"[object ArrayBuffer]"===te.call(ce.dictionary)?new Uint8Array(ce.dictionary):ce.dictionary,pe=Z.deflateSetDictionary(this.strm,ge),pe!==ne)throw new Error(J[pe]);this._dict_set=!0}}function E(he,ce){var pe=new L(ce);if(pe.push(he,!0),pe.err)throw pe.msg||J[pe.err];return pe.result}var Z=I("./zlib/deflate"),Q=I("./utils/common"),$=I("./utils/strings"),J=I("./zlib/messages"),ee=I("./zlib/zstream"),te=Object.prototype.toString,ie=4,ne=0,oe=1,le=2;L.prototype.push=function(he,ce){var pe=this.strm,ge=this.options.chunkSize,fe,_e;if(this.ended)return!1;_e=ce===~~ce?ce:!0===ce?ie:0,pe.input="string"==typeof he?$.string2buf(he):"[object ArrayBuffer]"===te.call(he)?new Uint8Array(he):he,pe.next_in=0,pe.avail_in=pe.input.length;do{if(0===pe.avail_out&&(pe.output=new Q.Buf8(ge),pe.next_out=0,pe.avail_out=ge),fe=Z.deflate(pe,_e),fe!==oe&&fe!==ne)return this.onEnd(fe),this.ended=!0,!1;(0===pe.avail_out||0===pe.avail_in&&(_e===ie||_e===le))&&("string"===this.options.to?this.onData($.buf2binstring(Q.shrinkBuf(pe.output,pe.next_out))):this.onData(Q.shrinkBuf(pe.output,pe.next_out)))}while((0<pe.avail_in||0===pe.avail_out)&&fe!==oe);return _e===ie?(fe=Z.deflateEnd(this.strm),this.onEnd(fe),this.ended=!0,fe===ne):_e!==le||(this.onEnd(ne),pe.avail_out=0,!0)},L.prototype.onData=function(he){this.chunks.push(he)},L.prototype.onEnd=function(he){he===ne&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Q.flattenChunks(this.chunks)),this.chunks=[],this.err=he,this.msg=this.strm.msg},T.Deflate=L,T.deflate=E,T.deflateRaw=function(he,ce){return ce=ce||{},ce.raw=!0,E(he,ce)},T.gzip=function(he,ce){return ce=ce||{},ce.gzip=!0,E(he,ce)}},{"./utils/common":126,"./utils/strings":127,"./zlib/deflate":131,"./zlib/messages":136,"./zlib/zstream":138}],125:[function(I,R,T){"use strict";function L(ie){if(!(this instanceof L))return new L(ie);this.options=Z.assign({chunkSize:16384,windowBits:0,to:""},ie||{});var ne=this.options;ne.raw&&0<=ne.windowBits&&16>ne.windowBits&&(ne.windowBits=-ne.windowBits,0===ne.windowBits&&(ne.windowBits=-15)),0<=ne.windowBits&&16>ne.windowBits&&!(ie&&ie.windowBits)&&(ne.windowBits+=32),15<ne.windowBits&&48>ne.windowBits&&0==(15&ne.windowBits)&&(ne.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ee,this.strm.avail_out=0;var oe=W.inflateInit2(this.strm,ne.windowBits);if(oe!==$.Z_OK)throw new Error(J[oe]);this.header=new te,W.inflateGetHeader(this.strm,this.header)}function E(ie,ne){var oe=new L(ne);if(oe.push(ie,!0),oe.err)throw oe.msg||J[oe.err];return oe.result}var W=I("./zlib/inflate"),Z=I("./utils/common"),Q=I("./utils/strings"),$=I("./zlib/constants"),J=I("./zlib/messages"),ee=I("./zlib/zstream"),te=I("./zlib/gzheader"),ae=Object.prototype.toString;L.prototype.push=function(ie,ne){var oe=this.strm,le=this.options.chunkSize,se=this.options.dictionary,fe=!1,de,ue,he,ce,pe,ge;if(this.ended)return!1;ue=ne===~~ne?ne:!0===ne?$.Z_FINISH:$.Z_NO_FLUSH,oe.input="string"==typeof ie?Q.binstring2buf(ie):"[object ArrayBuffer]"===ae.call(ie)?new Uint8Array(ie):ie,oe.next_in=0,oe.avail_in=oe.input.length;do{if(0===oe.avail_out&&(oe.output=new Z.Buf8(le),oe.next_out=0,oe.avail_out=le),de=W.inflate(oe,$.Z_NO_FLUSH),de===$.Z_NEED_DICT&&se&&(ge="string"==typeof se?Q.string2buf(se):"[object ArrayBuffer]"===ae.call(se)?new Uint8Array(se):se,de=W.inflateSetDictionary(this.strm,ge)),de===$.Z_BUF_ERROR&&!0==fe&&(de=$.Z_OK,fe=!1),de!==$.Z_STREAM_END&&de!==$.Z_OK)return this.onEnd(de),this.ended=!0,!1;oe.next_out&&(0===oe.avail_out||de===$.Z_STREAM_END||0===oe.avail_in&&(ue===$.Z_FINISH||ue===$.Z_SYNC_FLUSH))&&("string"===this.options.to?(he=Q.utf8border(oe.output,oe.next_out),ce=oe.next_out-he,pe=Q.buf2string(oe.output,he),oe.next_out=ce,oe.avail_out=le-ce,ce&&Z.arraySet(oe.output,oe.output,he,ce,0),this.onData(pe)):this.onData(Z.shrinkBuf(oe.output,oe.next_out))),0===oe.avail_in&&0===oe.avail_out&&(fe=!0)}while((0<oe.avail_in||0===oe.avail_out)&&de!==$.Z_STREAM_END);return de===$.Z_STREAM_END&&(ue=$.Z_FINISH),ue===$.Z_FINISH?(de=W.inflateEnd(this.strm),this.onEnd(de),this.ended=!0,de===$.Z_OK):ue!==$.Z_SYNC_FLUSH||(this.onEnd($.Z_OK),oe.avail_out=0,!0)},L.prototype.onData=function(ie){this.chunks.push(ie)},L.prototype.onEnd=function(ie){ie===$.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Z.flattenChunks(this.chunks)),this.chunks=[],this.err=ie,this.msg=this.strm.msg},T.Inflate=L,T.inflate=E,T.inflateRaw=function(ie,ne){return ne=ne||{},ne.raw=!0,E(ie,ne)},T.ungzip=E},{"./utils/common":126,"./utils/strings":127,"./zlib/constants":129,"./zlib/gzheader":132,"./zlib/inflate":134,"./zlib/messages":136,"./zlib/zstream":138}],126:[function(I,R,T){"use strict";var L="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;T.assign=function(W){for(var Z=Array.prototype.slice.call(arguments,1),Q;Z.length;)if(Q=Z.shift(),!!Q){if("object"!=typeof Q)throw new TypeError(Q+"must be non-object");for(var $ in Q)Q.hasOwnProperty($)&&(W[$]=Q[$])}return W},T.shrinkBuf=function(W,Z){return W.length===Z?W:W.subarray?W.subarray(0,Z):(W.length=Z,W)};var E={arraySet:function(Z,Q,$,J,ee){if(Q.subarray&&Z.subarray)return void Z.set(Q.subarray($,$+J),ee);for(var te=0;te<J;te++)Z[ee+te]=Q[$+te]},flattenChunks:function(Z){var Q,$,J,ee,te,ae;for(J=0,Q=0,$=Z.length;Q<$;Q++)J+=Z[Q].length;for(ae=new Uint8Array(J),ee=0,(Q=0,$=Z.length);Q<$;Q++)te=Z[Q],ae.set(te,ee),ee+=te.length;return ae}},G={arraySet:function(Z,Q,$,J,ee){for(var te=0;te<J;te++)Z[ee+te]=Q[$+te]},flattenChunks:function(Z){return[].concat.apply([],Z)}};T.setTyped=function(W){W?(T.Buf8=Uint8Array,T.Buf16=Uint16Array,T.Buf32=Int32Array,T.assign(T,E)):(T.Buf8=Array,T.Buf16=Array,T.Buf32=Array,T.assign(T,G))},T.setTyped(L)},{}],127:[function(I,R,T){"use strict";function L($,J){if(65537>J&&($.subarray&&W||!$.subarray&&G))return String.fromCharCode.apply(null,E.shrinkBuf($,J));for(var ee="",te=0;te<J;te++)ee+=String.fromCharCode($[te]);return ee}var E=I("./common"),G=!0,W=!0;try{String.fromCharCode.apply(null,[0])}catch($){G=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch($){W=!1}for(var Z=new E.Buf8(256),Q=0;256>Q;Q++)Z[Q]=252<=Q?6:248<=Q?5:240<=Q?4:224<=Q?3:192<=Q?2:1;Z[254]=Z[254]=1,T.string2buf=function($){var ne=$.length,oe=0,J,ee,te,ae,ie;for(ae=0;ae<ne;ae++)ee=$.charCodeAt(ae),55296==(64512&ee)&&ae+1<ne&&(te=$.charCodeAt(ae+1),56320==(64512&te)&&(ee=65536+(ee-55296<<10)+(te-56320),ae++)),oe+=128>ee?1:2048>ee?2:65536>ee?3:4;for(J=new E.Buf8(oe),ie=0,ae=0;ie<oe;ae++)ee=$.charCodeAt(ae),55296==(64512&ee)&&ae+1<ne&&(te=$.charCodeAt(ae+1),56320==(64512&te)&&(ee=65536+(ee-55296<<10)+(te-56320),ae++)),128>ee?J[ie++]=ee:2048>ee?(J[ie++]=192|ee>>>6,J[ie++]=128|63&ee):65536>ee?(J[ie++]=224|ee>>>12,J[ie++]=128|63&ee>>>6,J[ie++]=128|63&ee):(J[ie++]=240|ee>>>18,J[ie++]=128|63&ee>>>12,J[ie++]=128|63&ee>>>6,J[ie++]=128|63&ee);return J},T.buf2binstring=function($){return L($,$.length)},T.binstring2buf=function($){for(var J=new E.Buf8($.length),ee=0,te=J.length;ee<te;ee++)J[ee]=$.charCodeAt(ee);return J},T.buf2string=function($,J){var ee,te,ae,ie,ne=J||$.length,oe=Array(2*ne);for(te=0,ee=0;ee<ne;){if(ae=$[ee++],128>ae){oe[te++]=ae;continue}if(ie=Z[ae],4<ie){oe[te++]=65533,ee+=ie-1;continue}for(ae&=2===ie?31:3===ie?15:7;1<ie&&ee<ne;)ae=ae<<6|63&$[ee++],ie--;if(1<ie){oe[te++]=65533;continue}65536>ae?oe[te++]=ae:(ae-=65536,oe[te++]=55296|1023&ae>>10,oe[te++]=56320|1023&ae)}return L(oe,te)},T.utf8border=function($,J){var ee;for(J=J||$.length,J>$.length&&(J=$.length),ee=J-1;0<=ee&&128==(192&$[ee]);)ee--;return 0>ee?J:0===ee?J:ee+Z[$[ee]]>J?ee:J}},{"./common":126}],128:[function(I,R){"use strict";R.exports=function(E,G,W,Z){for(var Q=0|65535&E,$=0|65535&E>>>16,J=0;0!==W;){J=2e3<W?2e3:W,W-=J;do Q=0|Q+G[Z++],$=0|$+Q;while(--J);Q%=65521,$%=65521}return 0|(Q|$<<16)}},{}],129:[function(I,R){"use strict";R.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],130:[function(I,R){"use strict";var G=function(){for(var Z=[],Q=0,W;256>Q;Q++){W=Q;for(var $=0;8>$;$++)W=1&W?3988292384^W>>>1:W>>>1;Z[Q]=W}return Z}();R.exports=function(W,Z,Q,$){W^=-1;for(var te=$;te<$+Q;te++)W=W>>>8^G[255&(W^Z[te])];return-1^W}},{}],131:[function(I,R,T){"use strict";function L(yt,xt){return yt.msg=Me[xt],xt}function E(yt){return(yt<<1)-(4<yt?9:0)}function G(yt){for(var xt=yt.length;0<=--xt;)yt[xt]=0}function W(yt){var xt=yt.state,wt=xt.pending;wt>yt.avail_out&&(wt=yt.avail_out);0===wt||(xe.arraySet(yt.output,xt.pending_buf,xt.pending_out,wt,yt.next_out),yt.next_out+=wt,xt.pending_out+=wt,yt.total_out+=wt,yt.avail_out-=wt,xt.pending-=wt,0===xt.pending&&(xt.pending_out=0))}function Z(yt,xt){we._tr_flush_block(yt,0<=yt.block_start?yt.block_start:-1,yt.strstart-yt.block_start,xt),yt.block_start=yt.strstart,W(yt.strm)}function Q(yt,xt){yt.pending_buf[yt.pending++]=xt}function $(yt,xt){yt.pending_buf[yt.pending++]=255&xt>>>8,yt.pending_buf[yt.pending++]=255&xt}function J(yt,xt,wt,kt){var vt=yt.avail_in;return(vt>kt&&(vt=kt),0===vt)?0:(yt.avail_in-=vt,xe.arraySet(xt,yt.input,yt.next_in,vt,wt),1===yt.state.wrap?yt.adler=ke(yt.adler,xt,vt,wt):2===yt.state.wrap&&(yt.adler=ve(yt.adler,xt,vt,wt)),yt.next_in+=vt,yt.total_in+=vt,vt)}function ee(yt,xt){var wt=yt.max_chain_length,kt=yt.strstart,vt,Mt,Pt=yt.prev_length,jt=yt.nice_match,It=yt.strstart>yt.w_size-at?yt.strstart-(yt.w_size-at):0,Dt=yt.window,St=yt.w_mask,Ct=yt.prev,At=yt.strstart+et,Rt=Dt[kt+Pt-1],Bt=Dt[kt+Pt];yt.prev_length>=yt.good_match&&(wt>>=2),jt>yt.lookahead&&(jt=yt.lookahead);do{if(vt=xt,Dt[vt+Pt]!==Bt||Dt[vt+Pt-1]!==Rt||Dt[vt]!==Dt[kt]||Dt[++vt]!==Dt[kt+1])continue;kt+=2,vt++;do;while(Dt[++kt]===Dt[++vt]&&Dt[++kt]===Dt[++vt]&&Dt[++kt]===Dt[++vt]&&Dt[++kt]===Dt[++vt]&&Dt[++kt]===Dt[++vt]&&Dt[++kt]===Dt[++vt]&&Dt[++kt]===Dt[++vt]&&Dt[++kt]===Dt[++vt]&&kt<At);if(Mt=et-(At-kt),kt=At-et,Mt>Pt){if(yt.match_start=xt,Pt=Mt,Mt>=jt)break;Rt=Dt[kt+Pt-1],Bt=Dt[kt+Pt]}}while((xt=Ct[xt&St])>It&&0!=--wt);return Pt<=yt.lookahead?Pt:yt.lookahead}function te(yt){var xt=yt.w_size,wt,kt,vt,Mt,Pt;do{if(Mt=yt.window_size-yt.lookahead-yt.strstart,yt.strstart>=xt+(xt-at)){xe.arraySet(yt.window,yt.window,xt,xt,0),yt.match_start-=xt,yt.strstart-=xt,yt.block_start-=xt,kt=yt.hash_size,wt=kt;do vt=yt.head[--wt],yt.head[wt]=vt>=xt?vt-xt:0;while(--kt);kt=xt,wt=kt;do vt=yt.prev[--wt],yt.prev[wt]=vt>=xt?vt-xt:0;while(--kt);Mt+=xt}if(0===yt.strm.avail_in)break;if(kt=J(yt.strm,yt.window,yt.strstart+yt.lookahead,Mt),yt.lookahead+=kt,yt.lookahead+yt.insert>=Je)for(Pt=yt.strstart-yt.insert,yt.ins_h=yt.window[Pt],yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[Pt+1])&yt.hash_mask;yt.insert&&(yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[Pt+Je-1])&yt.hash_mask,yt.prev[Pt&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=Pt,Pt++,yt.insert--,!(yt.lookahead+yt.insert<Je)););}while(yt.lookahead<at&&0!==yt.strm.avail_in)}function ie(yt,xt){for(var wt,kt;;){if(yt.lookahead<at){if(te(yt),yt.lookahead<at&&xt===Pe)return mt;if(0===yt.lookahead)break}if(wt=0,yt.lookahead>=Je&&(yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[yt.strstart+Je-1])&yt.hash_mask,wt=yt.prev[yt.strstart&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=yt.strstart),0!==wt&&yt.strstart-wt<=yt.w_size-at&&(yt.match_length=ee(yt,wt)),!(yt.match_length>=Je))kt=we._tr_tally(yt,0,yt.window[yt.strstart]),yt.lookahead--,yt.strstart++;else if(kt=we._tr_tally(yt,yt.strstart-yt.match_start,yt.match_length-Je),yt.lookahead-=yt.match_length,yt.match_length<=yt.max_lazy_match&&yt.lookahead>=Je){yt.match_length--;do yt.strstart++,yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[yt.strstart+Je-1])&yt.hash_mask,wt=yt.prev[yt.strstart&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=yt.strstart;while(0!=--yt.match_length);yt.strstart++}else yt.strstart+=yt.match_length,yt.match_length=0,yt.ins_h=yt.window[yt.strstart],yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[yt.strstart+1])&yt.hash_mask;if(kt&&(Z(yt,!1),0===yt.strm.avail_out))return mt}return yt.insert=yt.strstart<Je-1?yt.strstart:Je-1,xt===De?(Z(yt,!0),0===yt.strm.avail_out?pt:gt):yt.last_lit&&(Z(yt,!1),0===yt.strm.avail_out)?mt:ct}function ne(yt,xt){for(var wt,kt,vt;;){if(yt.lookahead<at){if(te(yt),yt.lookahead<at&&xt===Pe)return mt;if(0===yt.lookahead)break}if(wt=0,yt.lookahead>=Je&&(yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[yt.strstart+Je-1])&yt.hash_mask,wt=yt.prev[yt.strstart&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=yt.strstart),yt.prev_length=yt.match_length,yt.prev_match=yt.match_start,yt.match_length=Je-1,0!==wt&&yt.prev_length<yt.max_lazy_match&&yt.strstart-wt<=yt.w_size-at&&(yt.match_length=ee(yt,wt),5>=yt.match_length&&(yt.strategy===1||yt.match_length===Je&&4096<yt.strstart-yt.match_start)&&(yt.match_length=Je-1)),yt.prev_length>=Je&&yt.match_length<=yt.prev_length){vt=yt.strstart+yt.lookahead-Je,kt=we._tr_tally(yt,yt.strstart-1-yt.prev_match,yt.prev_length-Je),yt.lookahead-=yt.prev_length-1,yt.prev_length-=2;do++yt.strstart<=vt&&(yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[yt.strstart+Je-1])&yt.hash_mask,wt=yt.prev[yt.strstart&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=yt.strstart);while(0!=--yt.prev_length);if(yt.match_available=0,yt.match_length=Je-1,yt.strstart++,kt&&(Z(yt,!1),0===yt.strm.avail_out))return mt}else if(!yt.match_available)yt.match_available=1,yt.strstart++,yt.lookahead--;else if(kt=we._tr_tally(yt,0,yt.window[yt.strstart-1]),kt&&Z(yt,!1),yt.strstart++,yt.lookahead--,0===yt.strm.avail_out)return mt}return yt.match_available&&(kt=we._tr_tally(yt,0,yt.window[yt.strstart-1]),yt.match_available=0),yt.insert=yt.strstart<Je-1?yt.strstart:Je-1,xt===De?(Z(yt,!0),0===yt.strm.avail_out?pt:gt):yt.last_lit&&(Z(yt,!1),0===yt.strm.avail_out)?mt:ct}function oe(yt,xt){for(var Pt=yt.window,wt,kt,vt,Mt;;){if(yt.lookahead<=et){if(te(yt),yt.lookahead<=et&&xt===Pe)return mt;if(0===yt.lookahead)break}if(yt.match_length=0,yt.lookahead>=Je&&0<yt.strstart&&(vt=yt.strstart-1,kt=Pt[vt],kt===Pt[++vt]&&kt===Pt[++vt]&&kt===Pt[++vt])){Mt=yt.strstart+et;do;while(kt===Pt[++vt]&&kt===Pt[++vt]&&kt===Pt[++vt]&&kt===Pt[++vt]&&kt===Pt[++vt]&&kt===Pt[++vt]&&kt===Pt[++vt]&&kt===Pt[++vt]&&vt<Mt);yt.match_length=et-(Mt-vt),yt.match_length>yt.lookahead&&(yt.match_length=yt.lookahead)}if(yt.match_length>=Je?(wt=we._tr_tally(yt,1,yt.match_length-Je),yt.lookahead-=yt.match_length,yt.strstart+=yt.match_length,yt.match_length=0):(wt=we._tr_tally(yt,0,yt.window[yt.strstart]),yt.lookahead--,yt.strstart++),wt&&(Z(yt,!1),0===yt.strm.avail_out))return mt}return yt.insert=0,xt===De?(Z(yt,!0),0===yt.strm.avail_out?pt:gt):yt.last_lit&&(Z(yt,!1),0===yt.strm.avail_out)?mt:ct}function le(yt,xt){for(var wt;;){if(0===yt.lookahead&&(te(yt),0===yt.lookahead)){if(xt===Pe)return mt;break}if(yt.match_length=0,wt=we._tr_tally(yt,0,yt.window[yt.strstart]),yt.lookahead--,yt.strstart++,wt&&(Z(yt,!1),0===yt.strm.avail_out))return mt}return yt.insert=0,xt===De?(Z(yt,!0),0===yt.strm.avail_out?pt:gt):yt.last_lit&&(Z(yt,!1),0===yt.strm.avail_out)?mt:ct}function se(yt,xt,wt,kt,vt){this.good_length=yt,this.max_lazy=xt,this.nice_length=wt,this.max_chain=kt,this.func=vt}function de(yt){yt.window_size=2*yt.w_size,G(yt.head),yt.max_lazy_match=bt[yt.level].max_lazy,yt.good_match=bt[yt.level].good_length,yt.nice_match=bt[yt.level].nice_length,yt.max_chain_length=bt[yt.level].max_chain,yt.strstart=0,yt.block_start=0,yt.lookahead=0,yt.insert=0,yt.match_length=yt.prev_length=Je-1,yt.match_available=0,yt.ins_h=0}function ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ue,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new xe.Buf16(2*(2*We+1)),this.dyn_dtree=new xe.Buf16(2*(2*30+1)),this.bl_tree=new xe.Buf16(2*(2*19+1)),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new xe.Buf16(15+1),this.heap=new xe.Buf16(2*We+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new xe.Buf16(2*We+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(yt){var xt;return yt&&yt.state?(yt.total_in=yt.total_out=0,yt.data_type=2,xt=yt.state,xt.pending=0,xt.pending_out=0,0>xt.wrap&&(xt.wrap=-xt.wrap),xt.status=xt.wrap?rt:ut,yt.adler=2===xt.wrap?0:1,xt.last_flush=Pe,we._tr_init(xt),Ce):L(yt,Re)}function ce(yt){var xt=he(yt);return xt===Ce&&de(yt.state),xt}function ge(yt,xt,wt,kt,vt,Mt){if(!yt)return Re;var Pt=1;if(xt===-1&&(xt=6),0>kt?(Pt=0,kt=-kt):15<kt&&(Pt=2,kt-=16),1>vt||vt>9||wt!==Ue||8>kt||15<kt||0>xt||9<xt||0>Mt||Mt>4)return L(yt,Re);8===kt&&(kt=9);var jt=new ue;return yt.state=jt,jt.strm=yt,jt.wrap=Pt,jt.gzhead=null,jt.w_bits=kt,jt.w_size=1<<jt.w_bits,jt.w_mask=jt.w_size-1,jt.hash_bits=vt+7,jt.hash_size=1<<jt.hash_bits,jt.hash_mask=jt.hash_size-1,jt.hash_shift=~~((jt.hash_bits+Je-1)/Je),jt.window=new xe.Buf8(2*jt.w_size),jt.head=new xe.Buf16(jt.hash_size),jt.prev=new xe.Buf16(jt.w_size),jt.lit_bufsize=1<<vt+6,jt.pending_buf_size=4*jt.lit_bufsize,jt.pending_buf=new xe.Buf8(jt.pending_buf_size),jt.d_buf=1*jt.lit_bufsize,jt.l_buf=3*jt.lit_bufsize,jt.level=xt,jt.strategy=Mt,jt.method=wt,ce(yt)}var xe=I("../utils/common"),we=I("./trees"),ke=I("./adler32"),ve=I("./crc32"),Me=I("./messages"),Pe=0,De=4,Se=5,Ce=0,Ae=1,Re=-2,Te=-5,Ee=2,Ue=8,We=256+1+29,Je=3,et=258,at=et+Je+1,rt=42,ot=69,lt=73,st=91,dt=103,ut=113,ht=666,mt=1,ct=2,pt=3,gt=4,bt;bt=[new se(0,0,0,0,function(yt,xt){var wt=65535;for(wt>yt.pending_buf_size-5&&(wt=yt.pending_buf_size-5);;){if(1>=yt.lookahead){if(te(yt),0===yt.lookahead&&xt===Pe)return mt;if(0===yt.lookahead)break}yt.strstart+=yt.lookahead,yt.lookahead=0;var kt=yt.block_start+wt;if((0===yt.strstart||yt.strstart>=kt)&&(yt.lookahead=yt.strstart-kt,yt.strstart=kt,Z(yt,!1),0===yt.strm.avail_out))return mt;if(yt.strstart-yt.block_start>=yt.w_size-at&&(Z(yt,!1),0===yt.strm.avail_out))return mt}return yt.insert=0,xt===De?(Z(yt,!0),0===yt.strm.avail_out?pt:gt):yt.strstart>yt.block_start&&(Z(yt,!1),0===yt.strm.avail_out)?mt:mt}),new se(4,4,8,4,ie),new se(4,5,16,8,ie),new se(4,6,32,32,ie),new se(4,4,16,16,ne),new se(8,16,32,32,ne),new se(8,16,128,128,ne),new se(8,32,128,256,ne),new se(32,128,258,1024,ne),new se(32,258,258,4096,ne)],T.deflateInit=function(yt,xt){return ge(yt,xt,Ue,15,8,0)},T.deflateInit2=ge,T.deflateReset=ce,T.deflateResetKeep=he,T.deflateSetHeader=function(yt,xt){return yt&&yt.state?2===yt.state.wrap?(yt.state.gzhead=xt,Ce):Re:Re},T.deflate=function(yt,xt){var wt,kt,vt,Mt;if(!yt||!yt.state||xt>Se||0>xt)return yt?L(yt,Re):Re;if(kt=yt.state,!yt.output||!yt.input&&0!==yt.avail_in||kt.status===ht&&xt!==De)return L(yt,0===yt.avail_out?Te:Re);if(kt.strm=yt,wt=kt.last_flush,kt.last_flush=xt,kt.status===rt)if(2===kt.wrap)yt.adler=0,Q(kt,31),Q(kt,139),Q(kt,8),kt.gzhead?(Q(kt,(kt.gzhead.text?1:0)+(kt.gzhead.hcrc?2:0)+(kt.gzhead.extra?4:0)+(kt.gzhead.name?8:0)+(kt.gzhead.comment?16:0)),Q(kt,255&kt.gzhead.time),Q(kt,255&kt.gzhead.time>>8),Q(kt,255&kt.gzhead.time>>16),Q(kt,255&kt.gzhead.time>>24),Q(kt,9===kt.level?2:kt.strategy>=Ee||2>kt.level?4:0),Q(kt,255&kt.gzhead.os),kt.gzhead.extra&&kt.gzhead.extra.length&&(Q(kt,255&kt.gzhead.extra.length),Q(kt,255&kt.gzhead.extra.length>>8)),kt.gzhead.hcrc&&(yt.adler=ve(yt.adler,kt.pending_buf,kt.pending,0)),kt.gzindex=0,kt.status=ot):(Q(kt,0),Q(kt,0),Q(kt,0),Q(kt,0),Q(kt,0),Q(kt,9===kt.level?2:kt.strategy>=Ee||2>kt.level?4:0),Q(kt,3),kt.status=ut);else{var Pt=Ue+(kt.w_bits-8<<4)<<8,jt=-1;jt=kt.strategy>=Ee||2>kt.level?0:6>kt.level?1:6===kt.level?2:3,Pt|=jt<<6,0!==kt.strstart&&(Pt|=32),Pt+=31-Pt%31,kt.status=ut,$(kt,Pt),0!==kt.strstart&&($(kt,yt.adler>>>16),$(kt,65535&yt.adler)),yt.adler=1}if(kt.status===ot)if(kt.gzhead.extra){for(vt=kt.pending;kt.gzindex<(65535&kt.gzhead.extra.length)&&!(kt.pending===kt.pending_buf_size&&(kt.gzhead.hcrc&&kt.pending>vt&&(yt.adler=ve(yt.adler,kt.pending_buf,kt.pending-vt,vt)),W(yt),vt=kt.pending,kt.pending===kt.pending_buf_size));)Q(kt,255&kt.gzhead.extra[kt.gzindex]),kt.gzindex++;kt.gzhead.hcrc&&kt.pending>vt&&(yt.adler=ve(yt.adler,kt.pending_buf,kt.pending-vt,vt)),kt.gzindex===kt.gzhead.extra.length&&(kt.gzindex=0,kt.status=lt)}else kt.status=lt;if(kt.status===lt)if(kt.gzhead.name){vt=kt.pending;do{if(kt.pending===kt.pending_buf_size&&(kt.gzhead.hcrc&&kt.pending>vt&&(yt.adler=ve(yt.adler,kt.pending_buf,kt.pending-vt,vt)),W(yt),vt=kt.pending,kt.pending===kt.pending_buf_size)){Mt=1;break}Mt=kt.gzindex<kt.gzhead.name.length?255&kt.gzhead.name.charCodeAt(kt.gzindex++):0,Q(kt,Mt)}while(0!==Mt);kt.gzhead.hcrc&&kt.pending>vt&&(yt.adler=ve(yt.adler,kt.pending_buf,kt.pending-vt,vt)),0===Mt&&(kt.gzindex=0,kt.status=st)}else kt.status=st;if(kt.status===st)if(kt.gzhead.comment){vt=kt.pending;do{if(kt.pending===kt.pending_buf_size&&(kt.gzhead.hcrc&&kt.pending>vt&&(yt.adler=ve(yt.adler,kt.pending_buf,kt.pending-vt,vt)),W(yt),vt=kt.pending,kt.pending===kt.pending_buf_size)){Mt=1;break}Mt=kt.gzindex<kt.gzhead.comment.length?255&kt.gzhead.comment.charCodeAt(kt.gzindex++):0,Q(kt,Mt)}while(0!==Mt);kt.gzhead.hcrc&&kt.pending>vt&&(yt.adler=ve(yt.adler,kt.pending_buf,kt.pending-vt,vt)),0===Mt&&(kt.status=dt)}else kt.status=dt;if(kt.status===dt&&(kt.gzhead.hcrc?(kt.pending+2>kt.pending_buf_size&&W(yt),kt.pending+2<=kt.pending_buf_size&&(Q(kt,255&yt.adler),Q(kt,255&yt.adler>>8),yt.adler=0,kt.status=ut)):kt.status=ut),0!==kt.pending){if(W(yt),0===yt.avail_out)return kt.last_flush=-1,Ce;}else if(0===yt.avail_in&&E(xt)<=E(wt)&&xt!==De)return L(yt,Te);if(kt.status===ht&&0!==yt.avail_in)return L(yt,Te);if(0!==yt.avail_in||0!==kt.lookahead||xt!==Pe&&kt.status!==ht){var It=kt.strategy===Ee?le(kt,xt):kt.strategy===3?oe(kt,xt):bt[kt.level].func(kt,xt);if((It===pt||It===gt)&&(kt.status=ht),It===mt||It===pt)return 0===yt.avail_out&&(kt.last_flush=-1),Ce;if(It===ct&&(xt===1?we._tr_align(kt):xt!==Se&&(we._tr_stored_block(kt,0,0,!1),xt===3&&(G(kt.head),0===kt.lookahead&&(kt.strstart=0,kt.block_start=0,kt.insert=0))),W(yt),0===yt.avail_out))return kt.last_flush=-1,Ce}return xt===De?0>=kt.wrap?Ae:(2===kt.wrap?(Q(kt,255&yt.adler),Q(kt,255&yt.adler>>8),Q(kt,255&yt.adler>>16),Q(kt,255&yt.adler>>24),Q(kt,255&yt.total_in),Q(kt,255&yt.total_in>>8),Q(kt,255&yt.total_in>>16),Q(kt,255&yt.total_in>>24)):($(kt,yt.adler>>>16),$(kt,65535&yt.adler)),W(yt),0<kt.wrap&&(kt.wrap=-kt.wrap),0===kt.pending?Ae:Ce):Ce},T.deflateEnd=function(yt){var xt;return yt&&yt.state?(xt=yt.state.status,xt!==rt&&xt!==ot&&xt!==lt&&xt!==st&&xt!==dt&&xt!==ut&&xt!==ht)?L(yt,Re):(yt.state=null,xt===ut?L(yt,-3):Ce):Re},T.deflateSetDictionary=function(yt,xt){var wt=xt.length,kt,vt,Mt,Pt,jt,It,Dt,St;if(!yt||!yt.state)return Re;if(kt=yt.state,Pt=kt.wrap,2===Pt||1===Pt&&kt.status!==rt||kt.lookahead)return Re;for(1===Pt&&(yt.adler=ke(yt.adler,xt,wt,0)),kt.wrap=0,wt>=kt.w_size&&(0===Pt&&(G(kt.head),kt.strstart=0,kt.block_start=0,kt.insert=0),St=new xe.Buf8(kt.w_size),xe.arraySet(St,xt,wt-kt.w_size,kt.w_size,0),xt=St,wt=kt.w_size),jt=yt.avail_in,It=yt.next_in,Dt=yt.input,yt.avail_in=wt,yt.next_in=0,yt.input=xt,te(kt);kt.lookahead>=Je;){vt=kt.strstart,Mt=kt.lookahead-(Je-1);do kt.ins_h=(kt.ins_h<<kt.hash_shift^kt.window[vt+Je-1])&kt.hash_mask,kt.prev[vt&kt.w_mask]=kt.head[kt.ins_h],kt.head[kt.ins_h]=vt,vt++;while(--Mt);kt.strstart=vt,kt.lookahead=Je-1,te(kt)}return kt.strstart+=kt.lookahead,kt.block_start=kt.strstart,kt.insert=kt.lookahead,kt.lookahead=0,kt.match_length=kt.prev_length=Je-1,kt.match_available=0,yt.next_in=It,yt.input=Dt,yt.avail_in=jt,kt.wrap=Pt,Ce},T.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":126,"./adler32":128,"./crc32":130,"./messages":136,"./trees":137}],132:[function(I,R){"use strict";R.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],133:[function(I,R){"use strict";var L=30;R.exports=function(W,Z){var Q,$,J,ee,te,ae,ie,ne,oe,le,se,de,ue,he,ce,pe,ge,fe,_e,be,ye,xe,we,ke,ve;Q=W.state,$=W.next_in,ke=W.input,J=$+(W.avail_in-5),ee=W.next_out,ve=W.output,te=ee-(Z-W.avail_out),ae=ee+(W.avail_out-257),ie=Q.dmax,ne=Q.wsize,oe=Q.whave,le=Q.wnext,se=Q.window,de=Q.hold,ue=Q.bits,he=Q.lencode,ce=Q.distcode,pe=(1<<Q.lenbits)-1,ge=(1<<Q.distbits)-1;top:do{15>ue&&(de+=ke[$++]<<ue,ue+=8,de+=ke[$++]<<ue,ue+=8),fe=he[de&pe];dolen:for(;;){if(_e=fe>>>24,de>>>=_e,ue-=_e,_e=255&fe>>>16,0===_e)ve[ee++]=65535&fe;else if(16&_e){be=65535&fe,_e&=15,_e&&(ue<_e&&(de+=ke[$++]<<ue,ue+=8),be+=de&(1<<_e)-1,de>>>=_e,ue-=_e),15>ue&&(de+=ke[$++]<<ue,ue+=8,de+=ke[$++]<<ue,ue+=8),fe=ce[de&ge];dodist:for(;;){if(_e=fe>>>24,de>>>=_e,ue-=_e,_e=255&fe>>>16,16&_e){if(ye=65535&fe,_e&=15,ue<_e&&(de+=ke[$++]<<ue,ue+=8,ue<_e&&(de+=ke[$++]<<ue,ue+=8)),ye+=de&(1<<_e)-1,ye>ie){W.msg="invalid distance too far back",Q.mode=L;break top}if(de>>>=_e,ue-=_e,_e=ee-te,ye>_e){if(_e=ye-_e,_e>oe&&Q.sane){W.msg="invalid distance too far back",Q.mode=L;break top}if(xe=0,we=se,0===le){if(xe+=ne-_e,_e<be){be-=_e;do ve[ee++]=se[xe++];while(--_e);xe=ee-ye,we=ve}}else if(le<_e){if(xe+=ne+le-_e,_e-=le,_e<be){be-=_e;do ve[ee++]=se[xe++];while(--_e);if(xe=0,le<be){_e=le,be-=_e;do ve[ee++]=se[xe++];while(--_e);xe=ee-ye,we=ve}}}else if(xe+=le-_e,_e<be){be-=_e;do ve[ee++]=se[xe++];while(--_e);xe=ee-ye,we=ve}for(;2<be;)ve[ee++]=we[xe++],ve[ee++]=we[xe++],ve[ee++]=we[xe++],be-=3;be&&(ve[ee++]=we[xe++],1<be&&(ve[ee++]=we[xe++]))}else{xe=ee-ye;do ve[ee++]=ve[xe++],ve[ee++]=ve[xe++],ve[ee++]=ve[xe++],be-=3;while(2<be);be&&(ve[ee++]=ve[xe++],1<be&&(ve[ee++]=ve[xe++]))}}else if(0==(64&_e)){fe=ce[(65535&fe)+(de&(1<<_e)-1)];continue dodist}else{W.msg="invalid distance code",Q.mode=L;break top}break}}else if(0==(64&_e)){fe=he[(65535&fe)+(de&(1<<_e)-1)];continue dolen}else if(32&_e){Q.mode=12;break top}else{W.msg="invalid literal/length code",Q.mode=L;break top}break}}while($<J&&ee<ae);return be=ue>>3,$-=be,ue-=be<<3,de&=(1<<ue)-1,W.next_in=$,W.next_out=ee,W.avail_in=$<J?5+(J-$):5-($-J),W.avail_out=ee<ae?257+(ae-ee):257-(ee-ae),Q.hold=de,void(Q.bits=ue)}},{}],134:[function(I,R,T){"use strict";function L(ct){return(255&ct>>>24)+(65280&ct>>>8)+((65280&ct)<<8)+((255&ct)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new oe.Buf16(320),this.work=new oe.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function G(ct){var pt;return ct&&ct.state?(pt=ct.state,ct.total_in=ct.total_out=pt.total=0,ct.msg="",pt.wrap&&(ct.adler=1&pt.wrap),pt.mode=je,pt.last=0,pt.havedict=0,pt.dmax=32768,pt.head=null,pt.hold=0,pt.bits=0,pt.lencode=pt.lendyn=new oe.Buf32(852),pt.distcode=pt.distdyn=new oe.Buf32(592),pt.sane=1,pt.back=-1,be):we}function W(ct){var pt;return ct&&ct.state?(pt=ct.state,pt.wsize=0,pt.whave=0,pt.wnext=0,G(ct)):we}function Z(ct,pt){var gt,_t;return ct&&ct.state?(_t=ct.state,0>pt?(gt=0,pt=-pt):(gt=(pt>>4)+1,48>pt&&(pt&=15)),pt&&(8>pt||15<pt))?we:(null!==_t.window&&_t.wbits!==pt&&(_t.window=null),_t.wrap=gt,_t.wbits=pt,W(ct)):we}function Q(ct,pt){var gt,_t;return ct?(_t=new E,ct.state=_t,_t.window=null,gt=Z(ct,pt),gt!==be&&(ct.state=null),gt):we}function J(ct){if(ut){var pt;for(ht=new oe.Buf32(512),mt=new oe.Buf32(32),pt=0;144>pt;)ct.lens[pt++]=8;for(;256>pt;)ct.lens[pt++]=9;for(;280>pt;)ct.lens[pt++]=7;for(;288>pt;)ct.lens[pt++]=8;for(ue(ce,ct.lens,0,288,ht,0,ct.work,{bits:9}),pt=0;32>pt;)ct.lens[pt++]=5;ue(pe,ct.lens,0,32,mt,0,ct.work,{bits:5}),ut=!1}ct.lencode=ht,ct.lenbits=9,ct.distcode=mt,ct.distbits=5}function ee(ct,pt,gt,_t){var yt=ct.state,bt;return null===yt.window&&(yt.wsize=1<<yt.wbits,yt.wnext=0,yt.whave=0,yt.window=new oe.Buf8(yt.wsize)),_t>=yt.wsize?(oe.arraySet(yt.window,pt,gt-yt.wsize,yt.wsize,0),yt.wnext=0,yt.whave=yt.wsize):(bt=yt.wsize-yt.wnext,bt>_t&&(bt=_t),oe.arraySet(yt.window,pt,gt-_t,bt,yt.wnext),_t-=bt,_t?(oe.arraySet(yt.window,pt,gt-_t,_t,0),yt.wnext=_t,yt.whave=yt.wsize):(yt.wnext+=bt,yt.wnext===yt.wsize&&(yt.wnext=0),yt.whave<yt.wsize&&(yt.whave+=bt))),0}var oe=I("../utils/common"),le=I("./adler32"),se=I("./crc32"),de=I("./inffast"),ue=I("./inftrees"),ce=1,pe=2,ge=4,_e=6,be=0,we=-2,ke=-3,ve=-4,Pe=8,je=1,Ie=2,De=3,Se=4,Ce=5,Ae=6,Re=7,Be=8,Te=9,ze=10,Le=11,Ee=12,Ve=13,Fe=14,Ye=15,Oe=16,Ue=17,Ne=18,qe=19,Xe=20,Ge=21,He=22,We=23,Ze=24,Ke=25,Qe=26,$e=27,Je=28,et=29,at=30,nt=31,ut=!0,ht,mt;T.inflateReset=W,T.inflateReset2=Z,T.inflateResetKeep=G,T.inflateInit=function(ct){return Q(ct,15)},T.inflateInit2=Q,T.inflate=function(ct,pt){var Ct=0,Ft=new oe.Buf8(4),Ut=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],gt,_t,bt,yt,xt,wt,kt,vt,Mt,Pt,jt,It,Dt,St,At,Rt,Bt,Tt,zt,Lt,Et,Vt,Yt,Ot;if(!ct||!ct.state||!ct.output||!ct.input&&0!==ct.avail_in)return we;gt=ct.state,gt.mode===Ee&&(gt.mode=Ve),xt=ct.next_out,bt=ct.output,kt=ct.avail_out,yt=ct.next_in,_t=ct.input,wt=ct.avail_in,vt=gt.hold,Mt=gt.bits,Pt=wt,jt=kt,Vt=be;inf_leave:for(;;)switch(gt.mode){case je:if(0===gt.wrap){gt.mode=Ve;break}for(;16>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}if(2&gt.wrap&&35615===vt){gt.check=0,Ft[0]=255&vt,Ft[1]=255&vt>>>8,gt.check=se(gt.check,Ft,2,0),vt=0,Mt=0,gt.mode=Ie;break}if(gt.flags=0,gt.head&&(gt.head.done=!1),!(1&gt.wrap)||(((255&vt)<<8)+(vt>>8))%31){ct.msg="incorrect header check",gt.mode=at;break}if((15&vt)!==Pe){ct.msg="unknown compression method",gt.mode=at;break}if(vt>>>=4,Mt-=4,Et=(15&vt)+8,0===gt.wbits)gt.wbits=Et;else if(Et>gt.wbits){ct.msg="invalid window size",gt.mode=at;break}gt.dmax=1<<Et,ct.adler=gt.check=1,gt.mode=512&vt?ze:Ee,vt=0,Mt=0;break;case Ie:for(;16>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}if(gt.flags=vt,(255&gt.flags)!==Pe){ct.msg="unknown compression method",gt.mode=at;break}if(57344&gt.flags){ct.msg="unknown header flags set",gt.mode=at;break}gt.head&&(gt.head.text=1&vt>>8),512&gt.flags&&(Ft[0]=255&vt,Ft[1]=255&vt>>>8,gt.check=se(gt.check,Ft,2,0)),vt=0,Mt=0,gt.mode=De;case De:for(;32>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}gt.head&&(gt.head.time=vt),512&gt.flags&&(Ft[0]=255&vt,Ft[1]=255&vt>>>8,Ft[2]=255&vt>>>16,Ft[3]=255&vt>>>24,gt.check=se(gt.check,Ft,4,0)),vt=0,Mt=0,gt.mode=Se;case Se:for(;16>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}gt.head&&(gt.head.xflags=255&vt,gt.head.os=vt>>8),512&gt.flags&&(Ft[0]=255&vt,Ft[1]=255&vt>>>8,gt.check=se(gt.check,Ft,2,0)),vt=0,Mt=0,gt.mode=Ce;case Ce:if(1024&gt.flags){for(;16>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}gt.length=vt,gt.head&&(gt.head.extra_len=vt),512&gt.flags&&(Ft[0]=255&vt,Ft[1]=255&vt>>>8,gt.check=se(gt.check,Ft,2,0)),vt=0,Mt=0}else gt.head&&(gt.head.extra=null);gt.mode=Ae;case Ae:if(1024&gt.flags&&(It=gt.length,It>wt&&(It=wt),It&&(gt.head&&(Et=gt.head.extra_len-gt.length,!gt.head.extra&&(gt.head.extra=Array(gt.head.extra_len)),oe.arraySet(gt.head.extra,_t,yt,It,Et)),512&gt.flags&&(gt.check=se(gt.check,_t,It,yt)),wt-=It,yt+=It,gt.length-=It),gt.length))break inf_leave;gt.length=0,gt.mode=Re;case Re:if(2048&gt.flags){if(0===wt)break inf_leave;It=0;do Et=_t[yt+It++],gt.head&&Et&&65536>gt.length&&(gt.head.name+=String.fromCharCode(Et));while(Et&&It<wt);if(512&gt.flags&&(gt.check=se(gt.check,_t,It,yt)),wt-=It,yt+=It,Et)break inf_leave}else gt.head&&(gt.head.name=null);gt.length=0,gt.mode=Be;case Be:if(4096&gt.flags){if(0===wt)break inf_leave;It=0;do Et=_t[yt+It++],gt.head&&Et&&65536>gt.length&&(gt.head.comment+=String.fromCharCode(Et));while(Et&&It<wt);if(512&gt.flags&&(gt.check=se(gt.check,_t,It,yt)),wt-=It,yt+=It,Et)break inf_leave}else gt.head&&(gt.head.comment=null);gt.mode=Te;case Te:if(512&gt.flags){for(;16>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}if(vt!==(65535&gt.check)){ct.msg="header crc mismatch",gt.mode=at;break}vt=0,Mt=0}gt.head&&(gt.head.hcrc=1&gt.flags>>9,gt.head.done=!0),ct.adler=gt.check=0,gt.mode=Ee;break;case ze:for(;32>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}ct.adler=gt.check=L(vt),vt=0,Mt=0,gt.mode=Le;case Le:if(0===gt.havedict)return ct.next_out=xt,ct.avail_out=kt,ct.next_in=yt,ct.avail_in=wt,gt.hold=vt,gt.bits=Mt,2;ct.adler=gt.check=1,gt.mode=Ee;case Ee:if(pt===5||pt===_e)break inf_leave;case Ve:if(gt.last){vt>>>=7&Mt,Mt-=7&Mt,gt.mode=$e;break}for(;3>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}switch(gt.last=1&vt,vt>>>=1,Mt-=1,3&vt){case 0:gt.mode=Fe;break;case 1:if(J(gt),gt.mode=Xe,pt===_e){vt>>>=2,Mt-=2;break inf_leave}break;case 2:gt.mode=Ue;break;case 3:ct.msg="invalid block type",gt.mode=at;}vt>>>=2,Mt-=2;break;case Fe:for(vt>>>=7&Mt,Mt-=7&Mt;32>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}if((65535&vt)!=(65535^vt>>>16)){ct.msg="invalid stored block lengths",gt.mode=at;break}if(gt.length=65535&vt,vt=0,Mt=0,gt.mode=Ye,pt===_e)break inf_leave;case Ye:gt.mode=Oe;case Oe:if(It=gt.length,It){if(It>wt&&(It=wt),It>kt&&(It=kt),0===It)break inf_leave;oe.arraySet(bt,_t,yt,It,xt),wt-=It,yt+=It,kt-=It,xt+=It,gt.length-=It;break}gt.mode=Ee;break;case Ue:for(;14>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}if(gt.nlen=(31&vt)+257,vt>>>=5,Mt-=5,gt.ndist=(31&vt)+1,vt>>>=5,Mt-=5,gt.ncode=(15&vt)+4,vt>>>=4,Mt-=4,286<gt.nlen||30<gt.ndist){ct.msg="too many length or distance symbols",gt.mode=at;break}gt.have=0,gt.mode=Ne;case Ne:for(;gt.have<gt.ncode;){for(;3>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}gt.lens[Ut[gt.have++]]=7&vt,vt>>>=3,Mt-=3}for(;19>gt.have;)gt.lens[Ut[gt.have++]]=0;if(gt.lencode=gt.lendyn,gt.lenbits=7,Yt={bits:gt.lenbits},Vt=ue(0,gt.lens,0,19,gt.lencode,0,gt.work,Yt),gt.lenbits=Yt.bits,Vt){ct.msg="invalid code lengths set",gt.mode=at;break}gt.have=0,gt.mode=qe;case qe:for(;gt.have<gt.nlen+gt.ndist;){for(;;){if(Ct=gt.lencode[vt&(1<<gt.lenbits)-1],At=Ct>>>24,Rt=255&Ct>>>16,Bt=65535&Ct,At<=Mt)break;if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}if(16>Bt)vt>>>=At,Mt-=At,gt.lens[gt.have++]=Bt;else{if(16===Bt){for(Ot=At+2;Mt<Ot;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}if(vt>>>=At,Mt-=At,0===gt.have){ct.msg="invalid bit length repeat",gt.mode=at;break}Et=gt.lens[gt.have-1],It=3+(3&vt),vt>>>=2,Mt-=2}else if(17===Bt){for(Ot=At+3;Mt<Ot;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}vt>>>=At,Mt-=At,Et=0,It=3+(7&vt),vt>>>=3,Mt-=3}else{for(Ot=At+7;Mt<Ot;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}vt>>>=At,Mt-=At,Et=0,It=11+(127&vt),vt>>>=7,Mt-=7}if(gt.have+It>gt.nlen+gt.ndist){ct.msg="invalid bit length repeat",gt.mode=at;break}for(;It--;)gt.lens[gt.have++]=Et}}if(gt.mode===at)break;if(0===gt.lens[256]){ct.msg="invalid code -- missing end-of-block",gt.mode=at;break}if(gt.lenbits=9,Yt={bits:gt.lenbits},Vt=ue(ce,gt.lens,0,gt.nlen,gt.lencode,0,gt.work,Yt),gt.lenbits=Yt.bits,Vt){ct.msg="invalid literal/lengths set",gt.mode=at;break}if(gt.distbits=6,gt.distcode=gt.distdyn,Yt={bits:gt.distbits},Vt=ue(pe,gt.lens,gt.nlen,gt.ndist,gt.distcode,0,gt.work,Yt),gt.distbits=Yt.bits,Vt){ct.msg="invalid distances set",gt.mode=at;break}if(gt.mode=Xe,pt===_e)break inf_leave;case Xe:gt.mode=Ge;case Ge:if(6<=wt&&258<=kt){ct.next_out=xt,ct.avail_out=kt,ct.next_in=yt,ct.avail_in=wt,gt.hold=vt,gt.bits=Mt,de(ct,jt),xt=ct.next_out,bt=ct.output,kt=ct.avail_out,yt=ct.next_in,_t=ct.input,wt=ct.avail_in,vt=gt.hold,Mt=gt.bits,gt.mode===Ee&&(gt.back=-1);break}for(gt.back=0;;){if(Ct=gt.lencode[vt&(1<<gt.lenbits)-1],At=Ct>>>24,Rt=255&Ct>>>16,Bt=65535&Ct,At<=Mt)break;if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}if(Rt&&0==(240&Rt)){for(Tt=At,zt=Rt,Lt=Bt;;){if(Ct=gt.lencode[Lt+((vt&(1<<Tt+zt)-1)>>Tt)],At=Ct>>>24,Rt=255&Ct>>>16,Bt=65535&Ct,Tt+At<=Mt)break;if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}vt>>>=Tt,Mt-=Tt,gt.back+=Tt}if(vt>>>=At,Mt-=At,gt.back+=At,gt.length=Bt,0===Rt){gt.mode=Qe;break}if(32&Rt){gt.back=-1,gt.mode=Ee;break}if(64&Rt){ct.msg="invalid literal/length code",gt.mode=at;break}gt.extra=15&Rt,gt.mode=He;case He:if(gt.extra){for(Ot=gt.extra;Mt<Ot;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}gt.length+=vt&(1<<gt.extra)-1,vt>>>=gt.extra,Mt-=gt.extra,gt.back+=gt.extra}gt.was=gt.length,gt.mode=We;case We:for(;;){if(Ct=gt.distcode[vt&(1<<gt.distbits)-1],At=Ct>>>24,Rt=255&Ct>>>16,Bt=65535&Ct,At<=Mt)break;if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}if(0==(240&Rt)){for(Tt=At,zt=Rt,Lt=Bt;;){if(Ct=gt.distcode[Lt+((vt&(1<<Tt+zt)-1)>>Tt)],At=Ct>>>24,Rt=255&Ct>>>16,Bt=65535&Ct,Tt+At<=Mt)break;if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}vt>>>=Tt,Mt-=Tt,gt.back+=Tt}if(vt>>>=At,Mt-=At,gt.back+=At,64&Rt){ct.msg="invalid distance code",gt.mode=at;break}gt.offset=Bt,gt.extra=15&Rt,gt.mode=Ze;case Ze:if(gt.extra){for(Ot=gt.extra;Mt<Ot;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}gt.offset+=vt&(1<<gt.extra)-1,vt>>>=gt.extra,Mt-=gt.extra,gt.back+=gt.extra}if(gt.offset>gt.dmax){ct.msg="invalid distance too far back",gt.mode=at;break}gt.mode=Ke;case Ke:if(0===kt)break inf_leave;if(It=jt-kt,gt.offset>It){if(It=gt.offset-It,It>gt.whave&&gt.sane){ct.msg="invalid distance too far back",gt.mode=at;break}It>gt.wnext?(It-=gt.wnext,Dt=gt.wsize-It):Dt=gt.wnext-It,It>gt.length&&(It=gt.length),St=gt.window}else St=bt,Dt=xt-gt.offset,It=gt.length;It>kt&&(It=kt),kt-=It,gt.length-=It;do bt[xt++]=St[Dt++];while(--It);0===gt.length&&(gt.mode=Ge);break;case Qe:if(0===kt)break inf_leave;bt[xt++]=gt.length,kt--,gt.mode=Ge;break;case $e:if(gt.wrap){for(;32>Mt;){if(0===wt)break inf_leave;wt--,vt|=_t[yt++]<<Mt,Mt+=8}if(jt-=kt,ct.total_out+=jt,gt.total+=jt,jt&&(ct.adler=gt.check=gt.flags?se(gt.check,bt,jt,xt-jt):le(gt.check,bt,jt,xt-jt)),jt=kt,(gt.flags?vt:L(vt))!==gt.check){ct.msg="incorrect data check",gt.mode=at;break}vt=0,Mt=0}gt.mode=Je;case Je:if(gt.wrap&&gt.flags){for(;32>Mt;){if(0===wt)break inf_leave;wt--,vt+=_t[yt++]<<Mt,Mt+=8}if(vt!==(4294967295&gt.total)){ct.msg="incorrect length check",gt.mode=at;break}vt=0,Mt=0}gt.mode=et;case et:Vt=1;break inf_leave;case at:Vt=ke;break inf_leave;case nt:return ve;case 32:default:return we;}return(ct.next_out=xt,ct.avail_out=kt,ct.next_in=yt,ct.avail_in=wt,gt.hold=vt,gt.bits=Mt,(gt.wsize||jt!==ct.avail_out&&gt.mode<at&&(gt.mode<$e||pt!==ge))&&ee(ct,ct.output,ct.next_out,jt-ct.avail_out))?(gt.mode=nt,ve):(Pt-=ct.avail_in,jt-=ct.avail_out,ct.total_in+=Pt,ct.total_out+=jt,gt.total+=jt,gt.wrap&&jt&&(ct.adler=gt.check=gt.flags?se(gt.check,bt,jt,ct.next_out-jt):le(gt.check,bt,jt,ct.next_out-jt)),ct.data_type=gt.bits+(gt.last?64:0)+(gt.mode===Ee?128:0)+(gt.mode===Xe||gt.mode===Ye?256:0),(0===Pt&&0===jt||pt===ge)&&Vt===be&&(Vt=-5),Vt)},T.inflateEnd=function(ct){if(!ct||!ct.state)return we;var pt=ct.state;return pt.window&&(pt.window=null),ct.state=null,be},T.inflateGetHeader=function(ct,pt){var gt;return ct&&ct.state?(gt=ct.state,0==(2&gt.wrap))?we:(gt.head=pt,pt.done=!1,be):we},T.inflateSetDictionary=function(ct,pt){var gt=pt.length,_t,bt,yt;return ct&&ct.state?(_t=ct.state,0!==_t.wrap&&_t.mode!==Le)?we:_t.mode===Le&&(bt=1,bt=le(bt,pt,gt,0),bt!==_t.check)?ke:(yt=ee(ct,pt,gt,gt),yt)?(_t.mode=nt,ve):(_t.havedict=1,be):we},T.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":126,"./adler32":128,"./crc32":130,"./inffast":133,"./inftrees":135}],135:[function(I,R){"use strict";var L=I("../utils/common"),E=15,G=852,W=592,Z=0,Q=1,$=2,J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ee=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],te=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ae=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];R.exports=function(ne,oe,le,se,de,ue,he,ce){var pe=ce.bits,ge=0,fe=0,_e=0,be=0,ye=0,xe=0,we=0,ke=0,ve=0,Me=0,Ce=null,Ae=0,Be=new L.Buf16(E+1),Te=new L.Buf16(E+1),ze=null,Le=0,Pe,je,Ie,De,Se,Re,Ee,Ve,Fe;for(ge=0;ge<=E;ge++)Be[ge]=0;for(fe=0;fe<se;fe++)Be[oe[le+fe]]++;for(ye=pe,be=E;1<=be&&0===Be[be];be--);if(ye>be&&(ye=be),0==be)return de[ue++]=20971520,de[ue++]=20971520,ce.bits=1,0;for(_e=1;_e<be&&0===Be[_e];_e++);for(ye<_e&&(ye=_e),ke=1,ge=1;ge<=E;ge++)if(ke<<=1,ke-=Be[ge],0>ke)return-1;if(0<ke&&(ne===Z||1!=be))return-1;for(Te[1]=0,ge=1;ge<E;ge++)Te[ge+1]=Te[ge]+Be[ge];for(fe=0;fe<se;fe++)0!==oe[le+fe]&&(he[Te[oe[le+fe]]++]=fe);if(ne===Z?(Ce=ze=he,Re=19):ne===Q?(Ce=J,Ae-=257,ze=ee,Le-=257,Re=256):(Ce=te,ze=ae,Re=-1),Me=0,fe=0,ge=_e,Se=ue,xe=ye,we=0,Ie=-1,ve=1<<ye,De=ve-1,ne===Q&&ve>G||ne===$&&ve>W)return 1;for(;;){Ee=ge-we,he[fe]<Re?(Ve=0,Fe=he[fe]):he[fe]>Re?(Ve=ze[Le+he[fe]],Fe=Ce[Ae+he[fe]]):(Ve=96,Fe=0),Pe=1<<ge-we,je=1<<xe,_e=je;do je-=Pe,de[Se+(Me>>we)+je]=0|(Ee<<24|Ve<<16|Fe);while(0!==je);for(Pe=1<<ge-1;Me&Pe;)Pe>>=1;if(0===Pe?Me=0:(Me&=Pe-1,Me+=Pe),fe++,0==--Be[ge]){if(ge==be)break;ge=oe[le+he[fe]]}if(ge>ye&&(Me&De)!==Ie){for(0==we&&(we=ye),Se+=_e,xe=ge-we,ke=1<<xe;xe+we<be&&(ke-=Be[xe+we],!(0>=ke));)xe++,ke<<=1;if(ve+=1<<xe,ne===Q&&ve>G||ne===$&&ve>W)return 1;Ie=Me&De,de[Ie]=0|(ye<<24|xe<<16|Se-ue)}}return 0!=Me&&(de[Se+Me]=0|(4194304|ge-we<<24)),ce.bits=ye,0}},{"../utils/common":126}],136:[function(I,R){"use strict";R.exports={0:"",1:"stream end",2:"need dictionary","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],137:[function(I,R,T){"use strict";function L(dt){for(var ut=dt.length;0<=--ut;)dt[ut]=0}function E(dt,ut,ht,mt,ct){this.static_tree=dt,this.extra_bits=ut,this.extra_base=ht,this.elems=mt,this.max_length=ct,this.has_stree=dt&&dt.length}function G(dt,ut){this.dyn_tree=dt,this.max_code=0,this.stat_desc=ut}function W(dt){return 256>dt?Je[dt]:Je[256+(dt>>>7)]}function Z(dt,ut){dt.pending_buf[dt.pending++]=255&ut,dt.pending_buf[dt.pending++]=255&ut>>>8}function Q(dt,ut,ht){dt.bi_valid>Ye-ht?(dt.bi_buf|=65535&ut<<dt.bi_valid,Z(dt,dt.bi_buf),dt.bi_buf=ut>>Ye-dt.bi_valid,dt.bi_valid+=ht-Ye):(dt.bi_buf|=65535&ut<<dt.bi_valid,dt.bi_valid+=ht)}function $(dt,ut,ht){Q(dt,ht[2*ut],ht[2*ut+1])}function J(dt,ut){var ht=0;do ht|=1&dt,dt>>>=1,ht<<=1;while(0<--ut);return ht>>>1}function ee(dt){16===dt.bi_valid?(Z(dt,dt.bi_buf),dt.bi_buf=0,dt.bi_valid=0):8<=dt.bi_valid&&(dt.pending_buf[dt.pending++]=255&dt.bi_buf,dt.bi_buf>>=8,dt.bi_valid-=8)}function te(dt,ut){var ht=ut.dyn_tree,mt=ut.max_code,ct=ut.stat_desc.static_tree,pt=ut.stat_desc.has_stree,gt=ut.stat_desc.extra_bits,_t=ut.stat_desc.extra_base,bt=ut.stat_desc.max_length,yt,xt,wt,kt,vt,Mt,Pt=0;for(kt=0;kt<=Fe;kt++)dt.bl_count[kt]=0;for(ht[2*dt.heap[dt.heap_max]+1]=0,yt=dt.heap_max+1;yt<Ve;yt++)(xt=dt.heap[yt],kt=ht[2*ht[2*xt+1]+1]+1,kt>bt&&(kt=bt,Pt++),ht[2*xt+1]=kt,!(xt>mt))&&(dt.bl_count[kt]++,vt=0,xt>=_t&&(vt=gt[xt-_t]),Mt=ht[2*xt],dt.opt_len+=Mt*(kt+vt),pt&&(dt.static_len+=Mt*(ct[2*xt+1]+vt)));if(0!=Pt){do{for(kt=bt-1;0===dt.bl_count[kt];)kt--;dt.bl_count[kt]--,dt.bl_count[kt+1]+=2,dt.bl_count[bt]--,Pt-=2}while(0<Pt);for(kt=bt;0!==kt;kt--)for(xt=dt.bl_count[kt];0!==xt;)(wt=dt.heap[--yt],!(wt>mt))&&(ht[2*wt+1]!==kt&&(dt.opt_len+=(kt-ht[2*wt+1])*ht[2*wt],ht[2*wt+1]=kt),xt--)}}function ae(dt,ut,ht){var mt=Array(Fe+1),ct=0,pt,gt;for(pt=1;pt<=Fe;pt++)mt[pt]=ct=ct+ht[pt-1]<<1;for(gt=0;gt<=ut;gt++){var _t=dt[2*gt+1];0!==_t&&(dt[2*gt]=J(mt[_t]++,_t))}}function ie(){var dt,ut,ht,mt,ct,pt=Array(Fe+1);for(ht=0,mt=0;mt<Be-1;mt++)for(at[mt]=ht,dt=0;dt<1<<Ge[mt];dt++)et[ht++]=mt;for(et[ht-1]=mt,ct=0,mt=0;16>mt;mt++)for(nt[mt]=ct,dt=0;dt<1<<He[mt];dt++)Je[ct++]=mt;for(ct>>=7;mt<Le;mt++)for(nt[mt]=ct<<7,dt=0;dt<1<<He[mt]-7;dt++)Je[256+ct++]=mt;for(ut=0;ut<=Fe;ut++)pt[ut]=0;for(dt=0;143>=dt;)Qe[2*dt+1]=8,dt++,pt[8]++;for(;255>=dt;)Qe[2*dt+1]=9,dt++,pt[9]++;for(;279>=dt;)Qe[2*dt+1]=7,dt++,pt[7]++;for(;287>=dt;)Qe[2*dt+1]=8,dt++,pt[8]++;for(ae(Qe,ze+1,pt),dt=0;dt<Le;dt++)$e[2*dt+1]=5,$e[2*dt]=J(dt,5);rt=new E(Qe,Ge,Te+1,ze,Fe),ot=new E($e,He,0,Le,Fe),lt=new E([],We,0,Ee,7)}function ne(dt){var ut;for(ut=0;ut<ze;ut++)dt.dyn_ltree[2*ut]=0;for(ut=0;ut<Le;ut++)dt.dyn_dtree[2*ut]=0;for(ut=0;ut<Ee;ut++)dt.bl_tree[2*ut]=0;dt.dyn_ltree[2*Ue]=1,dt.opt_len=dt.static_len=0,dt.last_lit=dt.matches=0}function oe(dt){8<dt.bi_valid?Z(dt,dt.bi_buf):0<dt.bi_valid&&(dt.pending_buf[dt.pending++]=dt.bi_buf),dt.bi_buf=0,dt.bi_valid=0}function le(dt,ut,ht,mt){oe(dt),mt&&(Z(dt,ht),Z(dt,~ht)),ve.arraySet(dt.pending_buf,dt.window,ut,ht,dt.pending),dt.pending+=ht}function se(dt,ut,ht,mt){var ct=2*ut,pt=2*ht;return dt[ct]<dt[pt]||dt[ct]===dt[pt]&&mt[ut]<=mt[ht]}function de(dt,ut,ht){for(var mt=dt.heap[ht],ct=ht<<1;ct<=dt.heap_len&&(ct<dt.heap_len&&se(ut,dt.heap[ct+1],dt.heap[ct],dt.depth)&&ct++,!se(ut,mt,dt.heap[ct],dt.depth));)dt.heap[ht]=dt.heap[ct],ht=ct,ct<<=1;dt.heap[ht]=mt}function ue(dt,ut,ht){var mt,ct,pt=0,gt,_t;if(0!==dt.last_lit)do mt=dt.pending_buf[dt.d_buf+2*pt]<<8|dt.pending_buf[dt.d_buf+2*pt+1],ct=dt.pending_buf[dt.l_buf+pt],pt++,0===mt?$(dt,ct,ut):(gt=et[ct],$(dt,gt+Te+1,ut),_t=Ge[gt],0!==_t&&(ct-=at[gt],Q(dt,ct,_t)),mt--,gt=W(mt),$(dt,gt,ht),_t=He[gt],0!==_t&&(mt-=nt[gt],Q(dt,mt,_t)));while(pt<dt.last_lit);$(dt,Ue,ut)}function he(dt,ut){var ht=ut.dyn_tree,mt=ut.stat_desc.static_tree,ct=ut.stat_desc.has_stree,pt=ut.stat_desc.elems,gt,_t,bt=-1,yt;for(dt.heap_len=0,dt.heap_max=Ve,gt=0;gt<pt;gt++)0===ht[2*gt]?ht[2*gt+1]=0:(dt.heap[++dt.heap_len]=bt=gt,dt.depth[gt]=0);for(;2>dt.heap_len;)yt=dt.heap[++dt.heap_len]=2>bt?++bt:0,ht[2*yt]=1,dt.depth[yt]=0,dt.opt_len--,ct&&(dt.static_len-=mt[2*yt+1]);for(ut.max_code=bt,gt=dt.heap_len>>1;1<=gt;gt--)de(dt,ht,gt);yt=pt;do gt=dt.heap[1],dt.heap[1]=dt.heap[dt.heap_len--],de(dt,ht,1),_t=dt.heap[1],dt.heap[--dt.heap_max]=gt,dt.heap[--dt.heap_max]=_t,ht[2*yt]=ht[2*gt]+ht[2*_t],dt.depth[yt]=(dt.depth[gt]>=dt.depth[_t]?dt.depth[gt]:dt.depth[_t])+1,ht[2*gt+1]=ht[2*_t+1]=yt,dt.heap[1]=yt++,de(dt,ht,1);while(2<=dt.heap_len);dt.heap[--dt.heap_max]=dt.heap[1],te(dt,ut),ae(ht,bt,dt.bl_count)}function ce(dt,ut,ht){var mt,ct=-1,pt,gt=ut[1],_t=0,bt=7,yt=4;for(0===gt&&(bt=138,yt=3),ut[2*(ht+1)+1]=65535,mt=0;mt<=ht;mt++){if(pt=gt,gt=ut[2*(mt+1)+1],++_t<bt&&pt===gt)continue;else _t<yt?dt.bl_tree[2*pt]+=_t:0===pt?10>=_t?dt.bl_tree[2*qe]++:dt.bl_tree[2*Xe]++:(pt!==ct&&dt.bl_tree[2*pt]++,dt.bl_tree[2*Ne]++);_t=0,ct=pt,0===gt?(bt=138,yt=3):pt===gt?(bt=6,yt=3):(bt=7,yt=4)}}function pe(dt,ut,ht){var mt,ct=-1,pt,gt=ut[1],_t=0,bt=7,yt=4;for(0===gt&&(bt=138,yt=3),mt=0;mt<=ht;mt++){if(pt=gt,gt=ut[2*(mt+1)+1],++_t<bt&&pt===gt)continue;else if(_t<yt)do $(dt,pt,dt.bl_tree);while(0!=--_t);else 0===pt?10>=_t?($(dt,qe,dt.bl_tree),Q(dt,_t-3,3)):($(dt,Xe,dt.bl_tree),Q(dt,_t-11,7)):(pt!==ct&&($(dt,pt,dt.bl_tree),_t--),$(dt,Ne,dt.bl_tree),Q(dt,_t-3,2));_t=0,ct=pt,0===gt?(bt=138,yt=3):pt===gt?(bt=6,yt=3):(bt=7,yt=4)}}function ge(dt){var ut;for(ce(dt,dt.dyn_ltree,dt.l_desc.max_code),ce(dt,dt.dyn_dtree,dt.d_desc.max_code),he(dt,dt.bl_desc),ut=Ee-1;3<=ut&&0===dt.bl_tree[2*Ze[ut]+1];ut--);return dt.opt_len+=3*(ut+1)+5+5+4,ut}function fe(dt,ut,ht,mt){var ct;for(Q(dt,ut-257,5),Q(dt,ht-1,5),Q(dt,mt-4,4),ct=0;ct<mt;ct++)Q(dt,dt.bl_tree[2*Ze[ct]+1],3);pe(dt,dt.dyn_ltree,ut-1),pe(dt,dt.dyn_dtree,ht-1)}function _e(dt){var ut=4093624447,ht;for(ht=0;31>=ht;ht++,ut>>>=1)if(1&ut&&0!==dt.dyn_ltree[2*ht])return Pe;if(0!==dt.dyn_ltree[18]||0!==dt.dyn_ltree[20]||0!==dt.dyn_ltree[26])return je;for(ht=32;ht<Te;ht++)if(0!==dt.dyn_ltree[2*ht])return je;return Pe}function ye(dt,ut,ht,mt){Q(dt,(0<<1)+(mt?1:0),3),le(dt,ut,ht,!0)}var ve=I("../utils/common"),Pe=0,je=1,Se=1,Be=29,Te=256,ze=Te+1+Be,Le=30,Ee=19,Ve=2*ze+1,Fe=15,Ye=16,Ue=256,Ne=16,qe=17,Xe=18,Ge=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],He=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],We=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ze=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Qe=Array(2*(ze+2));L(Qe);var $e=Array(2*Le);L($e);var Je=Array(512);L(Je);var et=Array(258-3+1);L(et);var at=Array(Be);L(at);var nt=Array(Le);L(nt);var rt,ot,lt,st=!1;T._tr_init=function(dt){st||(ie(),st=!0),dt.l_desc=new G(dt.dyn_ltree,rt),dt.d_desc=new G(dt.dyn_dtree,ot),dt.bl_desc=new G(dt.bl_tree,lt),dt.bi_buf=0,dt.bi_valid=0,ne(dt)},T._tr_stored_block=ye,T._tr_flush_block=function(dt,ut,ht,mt){var ct,pt,gt=0;0<dt.level?(dt.strm.data_type===2&&(dt.strm.data_type=_e(dt)),he(dt,dt.l_desc),he(dt,dt.d_desc),gt=ge(dt),ct=dt.opt_len+3+7>>>3,pt=dt.static_len+3+7>>>3,pt<=ct&&(ct=pt)):ct=pt=ht+5,ht+4<=ct&&-1!==ut?ye(dt,ut,ht,mt):dt.strategy===4||pt===ct?(Q(dt,(Se<<1)+(mt?1:0),3),ue(dt,Qe,$e)):(Q(dt,(2<<1)+(mt?1:0),3),fe(dt,dt.l_desc.max_code+1,dt.d_desc.max_code+1,gt+1),ue(dt,dt.dyn_ltree,dt.dyn_dtree)),ne(dt),mt&&oe(dt)},T._tr_tally=function(dt,ut,ht){return dt.pending_buf[dt.d_buf+2*dt.last_lit]=255&ut>>>8,dt.pending_buf[dt.d_buf+2*dt.last_lit+1]=255&ut,dt.pending_buf[dt.l_buf+dt.last_lit]=255&ht,dt.last_lit++,0===ut?dt.dyn_ltree[2*ht]++:(dt.matches++,ut--,dt.dyn_ltree[2*(et[ht]+Te+1)]++,dt.dyn_dtree[2*W(ut)]++),dt.last_lit===dt.lit_bufsize-1},T._tr_align=function(dt){Q(dt,Se<<1,3),$(dt,Ue,Qe),ee(dt)}},{"../utils/common":126}],138:[function(I,R){"use strict";R.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],139:[function(I,R){"use strict";var L=I("./tiffDecoder");R.exports=function(G,W){var Z=new L(G,W);return Z.decode(W)}},{"./tiffDecoder":146}],140:[function(I,R){"use strict";var L={standard:I("./tags/standard"),exif:I("./tags/exif"),gps:I("./tags/gps")};class E{constructor(G){if(!G)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=G,this._map=null}get(G){if("number"==typeof G)return this.fields.get(G);if("string"==typeof G)return this.fields.get(L[this.kind].tagsByName[G]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};var G=L[this.kind].tagsById,W=!0,Z=!1,Q;try{for(var $=this.fields.keys()[Symbol.iterator](),J,ee;!(W=(J=$.next()).done);W=!0)ee=J.value,G[ee]&&(this._map[G[ee]]=this.fields.get(ee))}catch(te){Z=!0,Q=te}finally{try{!W&&$.return&&$.return()}finally{if(Z)throw Q}}}return this._map}}R.exports=E},{"./tags/exif":143,"./tags/gps":144,"./tags/standard":145}],141:[function(I,R,T){"use strict";function L(ne,oe){if(1===oe)return ne.readUint8();for(var le=new Uint8Array(oe),se=0;se<oe;se++)le[se]=ne.readUint8();return le}var ie=new Map([[1,[1,L]],[2,[1,function(ne,oe){for(var le=[],se="",de=0,ue;de<oe;de++)ue=String.fromCharCode(ne.readUint8()),"\0"===ue?(le.push(se),se=""):se+=ue;return 1===le.length?le[0]:le}]],[3,[2,function(ne,oe){if(1===oe)return ne.readUint16();for(var le=new Uint16Array(oe),se=0;se<oe;se++)le[se]=ne.readUint16();return le}]],[4,[4,function(ne,oe){if(1===oe)return ne.readUint32();for(var le=new Uint32Array(oe),se=0;se<oe;se++)le[se]=ne.readUint32();return le}]],[5,[8,function(ne,oe){if(1===oe)return ne.readUint32()/ne.readUint32();for(var le=Array(oe),se=0;se<oe;se++)le[se]=ne.readUint32()/ne.readUint32();return le}]],[6,[1,function(ne,oe){if(1===oe)return ne.readInt8();for(var le=new Int8Array(oe),se=0;se<oe;se++)le[se]=ne.readInt8();return le}]],[7,[1,L]],[8,[2,function(ne,oe){if(1===oe)return ne.readInt16();for(var le=new Int16Array(oe),se=0;se<oe;se++)le[se]=ne.readInt16();return le}]],[9,[4,function(ne,oe){if(1===oe)return ne.readInt32();for(var le=new Int32Array(oe),se=0;se<oe;se++)le[se]=ne.readInt32();return le}]],[10,[8,function(ne,oe){if(1===oe)return ne.readInt32()/ne.readInt32();for(var le=Array(oe),se=0;se<oe;se++)le[se]=ne.readInt32()/ne.readInt32();return le}]],[11,[4,function(ne,oe){if(1===oe)return ne.readFloat32();for(var le=new Float32Array(oe),se=0;se<oe;se++)le[se]=ne.readFloat32();return le}]],[12,[8,function(ne,oe){if(1===oe)return ne.readFloat64();for(var le=new Float64Array(oe),se=0;se<oe;se++)le[se]=ne.readFloat64();return le}]]]);T.getByteLength=function(ne,oe){return ie.get(ne)[0]*oe},T.readData=function(ne,oe,le){return ie.get(oe)[1](ne,le)}},{}],142:[function(I,R,T){arguments[4][40][0].apply(T,arguments)},{"./decode":139,dup:40}],143:[function(I,R){"use strict";var L={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},E={};for(var G in L)E[L[G]]=G;R.exports={tagsById:L,tagsByName:E}},{}],144:[function(I,R){"use strict";var L={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},E={};for(var G in L)E[L[G]]=G;R.exports={tagsById:L,tagsByName:E}},{}],145:[function(I,R){"use strict";var L={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",292:"T4Options",293:"T6Options",296:"ResolutionUnit",297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",338:"ExtraSamples",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",32932:"WangAnnotatio",33432:"Copyright",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34732:"ImageLayer",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},E={};for(var G in L)E[L[G]]=G;R.exports={tagsById:L,tagsByName:E}},{}],146:[function(I,R){"use strict";function L(ne,oe,le,se){return 8===le?new Uint8Array(ne*oe):16===le?new Uint16Array(ne*oe):32===le&&3===se?new Float32Array(ne*oe):Z("bit depth / sample format",le+" / "+se)}function E(ne,oe,le,se){for(var de=0;de<se;de++)ne[le++]=oe.getUint8(de);return le}function G(ne,oe,le,se,de){for(var ue=0;ue<2*se;ue+=2)ne[le++]=oe.getUint16(ue,de);return le}function W(ne,oe,le,se,de){for(var ue=0;ue<4*se;ue+=4)ne[le++]=oe.getFloat32(ue,de);return le}function Z(ne,oe){throw new Error("Unsupported "+ne+": "+oe)}function Q(ne){if(ne.length){var oe=ne;ne=oe[0];for(var le=0;le<oe.length;le++)oe[le]!==ne&&Z("bit depth",oe)}return ne}var $=I("iobuffer"),J=I("./ifd"),ee=I("./tiffIfd"),te=I("./ifdValue"),ae={ignoreImageData:!1,onlyFirst:!1};R.exports=class extends ${constructor(ne,oe){super(ne,oe),this._nextIFD=0}decode(ne){ne=Object.assign({},ae,ne);var oe=[];for(this.decodeHeader();this._nextIFD;)if(oe.push(this.decodeIFD(ne)),ne.onlyFirst)return oe[0];return oe}decodeHeader(){var ne=this.readUint16();if(18761===ne)this.setLittleEndian();else if(19789===ne)this.setBigEndian();else throw new Error("invalid byte order: 0x"+ne.toString(16));if(ne=this.readUint16(),42!==ne)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(ne){this.seek(this._nextIFD);var oe=ne.kind?new J(ne.kind):new ee;for(var le=this.readUint16(),se=0;se<le;se++)this.decodeIFDEntry(oe);return ne.ignoreImageData||this.decodeImageData(oe),this._nextIFD=this.readUint32(),oe}decodeIFDEntry(ne){var oe=this.offset,le=this.readUint16(),se=this.readUint16(),de=this.readUint32();if(1>se||12<se)return void this.skip(4);var ue=te.getByteLength(se,de);4<ue&&this.seek(this.readUint32());var he=te.readData(this,se,de);if(ne.fields.set(le,he),34665===le||34853===le){var ce=this.offset,pe;34665===le?pe="exif":34853===le&&(pe="gps"),this._nextIFD=he,ne[pe]=this.decodeIFD({kind:pe,ignoreImageData:!0}),this.offset=ce}this.seek(oe),this.skip(12)}decodeImageData(ne){var oe=ne.orientation;switch(oe&&1!==oe&&Z("orientation",oe),ne.type){case 1:case 2:this.readStripData(ne);break;default:Z("image type",ne.type);}}readStripData(ne){for(var oe=ne.width,le=ne.height,se=Q(ne.bitsPerSample),de=ne.sampleFormat,ue=oe*le,he=L(ue,1,se,de),ce=ne.compression,pe=ne.rowsPerStrip,ge=pe*oe,fe=ne.stripOffsets,_e=ne.stripByteCounts,be=0,ye=0;ye<fe.length;ye++){var xe=this.getStripData(ce,fe[ye],_e[ye]),we=ue>ge?ge:ue;ue-=we,8===se?be=E(he,xe,be,we):16===se?be=G(he,xe,be,we,this.isLittleEndian()):32===se&&3===de?be=W(he,xe,be,we,this.isLittleEndian()):Z("bitDepth",se)}ne.data=he}getStripData(ne,oe,le){switch(ne){case 1:return new DataView(this.buffer,oe,le);case 2:case 32773:return Z("Compression",ne);default:throw new Error("invalid compression: "+ne);}}}},{"./ifd":140,"./ifdValue":141,"./tiffIfd":147,iobuffer:52}],147:[function(I,R){"use strict";function L(Z){return"number"==typeof Z?[Z]:Z}var E=I("./ifd"),G=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class W extends E{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var Z=new Date,Q=G.exec(this.dateTime);return Z.setFullYear(Q[1],Q[2]-1,Q[3]),Z.setHours(Q[4],Q[5],Q[6]),Z}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return L(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return L(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}R.exports=W},{"./ifd":140}],148:[function(I,R,T){(function(L){"use strict";(function(E){function G(fe){for(var _e=[],be=0,ye=fe.length,xe,we;be<ye;)xe=fe.charCodeAt(be++),55296<=xe&&56319>=xe&&be<ye?(we=fe.charCodeAt(be++),56320==(64512&we)?_e.push(((1023&xe)<<10)+(1023&we)+65536):(_e.push(xe),be--)):_e.push(xe);return _e}function W(fe){for(var _e=fe.length,be=-1,xe="",ye;++be<_e;)ye=fe[be],65535<ye&&(ye-=65536,xe+=le(55296|1023&ye>>>10),ye=56320|1023&ye),xe+=le(ye);return xe}function Z(fe){if(55296<=fe&&57343>=fe)throw Error("Lone surrogate U+"+fe.toString(16).toUpperCase()+" is not a scalar value")}function Q(fe,_e){return le(128|63&fe>>_e)}function $(fe){if(0==(4294967168&fe))return le(fe);var _e="";return 0==(4294965248&fe)?_e=le(192|31&fe>>6):0==(4294901760&fe)?(Z(fe),_e=le(224|15&fe>>12),_e+=Q(fe,6)):0==(4292870144&fe)&&(_e=le(240|7&fe>>18),_e+=Q(fe,12),_e+=Q(fe,6)),_e+=le(128|63&fe),_e}function ee(){if(ue>=de)throw Error("Invalid byte index");var fe=255&se[ue];if(ue++,128==(192&fe))return 63&fe;throw Error("Invalid continuation byte")}function te(){var fe,_e,be,ye,xe;if(ue>de)throw Error("Invalid byte index");if(ue==de)return!1;if(fe=255&se[ue],ue++,0==(128&fe))return fe;if(192==(224&fe)){if(_e=ee(),xe=(31&fe)<<6|_e,128<=xe)return xe;throw Error("Invalid continuation byte")}if(224==(240&fe)){if(_e=ee(),be=ee(),xe=(15&fe)<<12|_e<<6|be,2048<=xe)return Z(xe),xe;throw Error("Invalid continuation byte")}if(240==(248&fe)&&(_e=ee(),be=ee(),ye=ee(),xe=(7&fe)<<18|_e<<12|be<<6|ye,65536<=xe&&1114111>=xe))return xe;throw Error("Invalid UTF-8 detected")}var ie="object"==typeof T&&T,ne="object"==typeof R&&R&&R.exports==ie&&R,oe="object"==typeof L&&L;(oe.global===oe||oe.window===oe)&&(E=oe);var le=String.fromCharCode,se,de,ue,he={version:"2.1.2",encode:function(fe){for(var _e=G(fe),be=_e.length,ye=-1,we="",xe;++ye<be;)xe=_e[ye],we+=$(xe);return we},decode:function(fe){se=G(fe),de=se.length,ue=0;for(var _e=[],be;!1!==(be=te());)_e.push(be);return W(_e)}};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return he});else if(!(ie&&!ie.nodeType))E.utf8=he;else if(ne)ne.exports=he;else{var pe={}.hasOwnProperty;for(var ge in he)pe.call(he,ge)&&(ie[ge]=he[ge])}})(void 0)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],149:[function(I,R){"use strict";function L(Z,Q){if("string"!=typeof Z&&"function"!=typeof Z)throw new TypeError("func argument must be a function");if(void 0===Q&&(Q={}),"object"!=typeof Q||null===Q)throw new TypeError("options argument must be an object");this._workerCode=Z.toString(),this._numWorkers=void 0===Q.maxWorkers||"auto"===Q.maxWorkers?Math.min(G-1,1):0<Q.maxWorkers?Math.min(Q.maxWorkers,G):G,this._workers=new Map,this._timeout=Q.timeout||0,this._terminateOnError=!!Q.terminateOnError;var $=Q.deps;"string"==typeof $&&($=[$]),Array.isArray($)||($=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init($)}var E=I("./workerTemplate"),G=navigator.hardwareConcurrency||1,W=Function.prototype;L.prototype._init=function(Z){for(var Q=E.newWorkerURL(this._workerCode,Z),$=0,J;$<this._numWorkers;$++)J=new Worker(Q),J.onmessage=this._onmessage.bind(this,J),J.onerror=this._onerror.bind(this,J),J.running=!1,J.id=$,this._workers.set(J,null);URL.revokeObjectURL(Q)},L.prototype._onerror=function(Z,Q){if(!this._terminated){this._working--,Z.running=!1;var $=this._workers.get(Z);$&&$[1](Q.message),this._workers.set(Z,null),this._terminateOnError?this.terminate():this._exec()}},L.prototype._onmessage=function(Z,Q){if(!this._terminated){this._working--,Z.running=!1;var $=this._workers.get(Z);$&&$[0](Q.data.data),this._workers.set(Z,null),this._exec()}},L.prototype._exec=function(){var Z=!0,Q=!1,$;try{for(var J=this._workers.keys()[Symbol.iterator](),ee,te;!(Z=(ee=J.next()).done);Z=!0){if(te=ee.value,this._working===this._numWorkers||0===this._waiting.length)return;if(!te.running)for(var ae=0,ie;ae<this._waiting.length;ae++)if(ie=this._waiting[ae],"number"!=typeof ie[4]||ie[4]===te.id){this._waiting.splice(ae,1),te.postMessage({action:"exec",event:ie[0],args:ie[1]},ie[2]),te.running=!0,te.time=Date.now(),this._workers.set(te,ie[3]),this._working++;break}}}catch(ne){Q=!0,$=ne}finally{try{!Z&&J.return&&J.return()}finally{if(Q)throw $}}},L.prototype.terminate=function(){if(!this._terminated){var Z=!0,Q=!1,$;try{for(var J=this._workers[Symbol.iterator](),ee,te;!(Z=(ee=J.next()).done);Z=!0)te=ee.value,te[0].terminate(),te[1]&&te[1][1](new Error("Terminated"))}catch(ae){Q=!0,$=ae}finally{try{!Z&&J.return&&J.return()}finally{if(Q)throw $}}this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},L.prototype.postAll=function(Z,Q){if(this._terminated)throw new Error("Cannot post (terminated)");var $=[],J=!0,ee=!1,te;try{for(var ae=this._workers.keys()[Symbol.iterator](),ie,ne;!(J=(ie=ae.next()).done);J=!0)ne=ie.value,$.push(this.post(Z,Q,[],ne.id))}catch(oe){ee=!0,te=oe}finally{try{!J&&ae.return&&ae.return()}finally{if(ee)throw te}}return Promise.all($)},L.prototype.post=function(Z,Q,$,J){Q===void 0&&(Q=[]),$===void 0&&($=[]),Array.isArray(Q)||(Q=[Q]),Array.isArray($)||($=[$]);var ee=this;return new Promise(function(te,ae){if(ee._terminated)throw new Error("Cannot post (terminated)");ee._waiting.push([Z,Q,$,[te,ae],J]),ee._exec()})},R.exports=L},{"./workerTemplate":150}],150:[function(I,R,T){"use strict";var E=function(){function W(){this._listeners={}}self.window=self;W.prototype.on=function(Q,$){if(this._listeners[Q])throw new RangeError("there is already a listener for "+Q);if("function"!=typeof $)throw new TypeError("callback argument must be a function");this._listeners[Q]=$},W.prototype._send=function(Q,$,J){J===void 0?J=[]:!Array.isArray(J)&&(J=[J]),self.postMessage({id:Q,data:$},J)},W.prototype._trigger=function(Q,$){if(!this._listeners[Q])throw new Error("event "+Q+" is not defined");this._listeners[Q].apply(null,$)};var G=new W;self.onmessage=function(Q){switch(Q.data.action){case"exec":Q.data.args.unshift(function($,J){G._send(Q.data.id,$,J)}),G._trigger(Q.data.event,Q.data.args);break;case"ping":G._send(Q.data.id,"pong");break;default:throw new Error("unexpected action: "+Q.data.action);}},"CODE"}.toString().split("\"CODE\";");T.newWorkerURL=function(W,Z){var Q=new Blob(["(",E[0],"importScripts.apply(self, "+JSON.stringify(Z)+");\n","(",W,")();",E[1],")();"],{type:"application/javascript"});return URL.createObjectURL(Q)}},{}],151:[function(I,R,T){(function(L){"use strict";function E(xe){return xe&&xe.__esModule?xe:{default:xe}}Object.defineProperty(T,"__esModule",{value:!0});var G=I("./kind"),W=I("./kindNames"),Z=I("./environment"),Q=I("./extend"),$=E(Q),J=I("./bitMethods"),ee=E(J),te=I("fs"),ae=I("./model/model"),ie=I("./roi/manager"),ne=E(ie),oe=I("./mediaTypes"),le=I("extend"),se=E(le),de=I("./load"),ue=I("../stack/Stack"),he=E(ue),ce=I("blob-util"),pe=I("has-own"),ge=E(pe),fe=I("fast-bmp"),_e=I("../util/base64"),be={configurable:!0,enumerable:!1,get:void 0};class ye{constructor(xe,we,ke,ve){if(void 0===xe&&(xe=1),void 0===we&&(we=1),"object"==typeof xe){var Me=xe,Pe=!0===we;xe=Me.width,we=Me.height,ke=Pe?Me.data.slice():Me.data,ve={position:Me.position,components:Me.components,alpha:Me.alpha,bitDepth:Me.bitDepth,colorModel:Me.colorModel,parent:Me,meta:Me.meta}}if(ke&&!ke.length&&(ve=ke,ke=null),void 0===ve&&(ve={}),this.width=xe,this.height=we,0>=this.width)throw new RangeError("width must be greater than 0");if(0>=this.height)throw new RangeError("height must be greater than 0");Object.defineProperty(this,"parent",{enumerable:!1,writable:!0}),this.parent=ve.parent,this.position=ve.position||[0,0];var je;if("string"!=typeof ve.kind)je=(0,G.getKind)(W.RGBA);else if(je=(0,G.getKind)(ve.kind),!je)throw new RangeError("invalid image kind: "+ve.kind);var Ie=(0,se.default)({},je,ve);this.components=Ie.components,this.alpha=Ie.alpha+0,this.bitDepth=Ie.bitDepth,this.colorModel=Ie.colorModel,this.meta=ve.meta||{},this.computed=null,this.initialize(),ke||(ke=(0,G.createPixelArray)(this)),this.setData(ke)}initialize(){this.size=this.width*this.height,this.sizes=[this.width,this.height],this.channels=this.components+this.alpha,this.maxValue=32===this.bitDepth?Number.MAX_VALUE:Math.pow(2,this.bitDepth)-1,this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=32>this.bitDepth,this.borderSizes=[0,0]}setData(xe){var we=(0,G.getTheoreticalPixelArraySize)(this);if(we!==xe.length)throw new RangeError(`incorrect data size. Should be ${we} and found ${xe.length}`);this.data=xe}static load(xe,we){return(0,de.loadImage)(xe,we)}static fromCanvas(xe){var we=xe.getContext("2d"),ke=we.getImageData(0,0,xe.width,xe.height);return new ye(ke.width,ke.height,ke.data)}static extendMethod(xe,we,ke={}){var ve=ke.inPlace,Pe=ke.returnThis,je=!(Pe!==void 0)||Pe,Ie=ke.partialArgs,De=Ie===void 0?[]:Ie,Se=ke.stack,Ce=Se!==void 0&&Se;if(ve!==void 0&&ve){if(ye.prototype[xe]=function(...Be){this.computed=null;var Te=we.apply(this,[...De,...Be]);return je?this:Te},Ce){var Ae="string"==typeof Ce?Ce:xe;he.default.prototype[Ae]=je?function(...Be){var Te=!0,ze=!1,Le;try{for(var Ee=this[Symbol.iterator](),Ve,Fe;!(Te=(Ve=Ee.next()).done);Te=!0)Fe=Ve.value,Fe[xe](...Be)}catch(Ye){ze=!0,Le=Ye}finally{try{!Te&&Ee.return&&Ee.return()}finally{if(ze)throw Le}}return this}:function(...Be){for(var Te=new he.default(this.length),ze=0;ze<this.length;ze++)Te[ze]=this[ze][xe](...Be);return Te}}}else if(ye.prototype[xe]=function(...Be){return we.apply(this,[...De,...Be])},Ce){var Re="string"==typeof Ce?Ce:xe;he.default.prototype[Re]=function(...Be){for(var Te=new he.default(this.length),ze=0;ze<this.length;ze++)Te[ze]=this[ze][xe](...Be);return Te}}return ye}static extendProperty(xe,we,ke={}){var ve=ke.partialArgs,Me=void 0===ve?[]:ve;return be.get=function(){if(null===this.computed)this.computed={};else if((0,ge.default)(xe,this.computed))return this.computed[xe];var Pe=we.apply(this,Me);return this.computed[xe]=Pe,Pe},Object.defineProperty(ye.prototype,xe,be),ye}static createFrom(xe,we){var ke={width:xe.width,height:xe.height,position:xe.position,components:xe.components,alpha:xe.alpha,colorModel:xe.colorModel,bitDepth:xe.bitDepth,parent:xe};return(0,se.default)(ke,we),new ye(ke.width,ke.height,ke)}static isTypeSupported(xe,we="write"){if("string"!=typeof xe)throw new TypeError("type argument must be a string");if(xe=(0,oe.getType)(xe),"write"===we)return(0,oe.canWrite)(xe);throw new TypeError("unknown operation: "+we)}getPixelIndex(xe){for(var we=0,ke=0;ke<xe.length;ke++)we+=this.multipliers[ke]*xe[ke];return we}setValueXY(xe,we,ke,ve){return this.data[(we*this.width+xe)*this.channels+ke]=ve,this.computed=null,this}getValueXY(xe,we,ke){return this.data[(we*this.width+xe)*this.channels+ke]}setValue(xe,we,ke){return this.data[xe*this.channels+we]=ke,this.computed=null,this}getValue(xe,we){return this.data[xe*this.channels+we]}setPixelXY(xe,we,ke){return this.setPixel(we*this.width+xe,ke)}getPixelXY(xe,we){return this.getPixel(we*this.width+xe)}setPixel(xe,we){for(var ke=xe*this.channels,ve=0;ve<we.length;ve++)this.data[ke+ve]=we[ve];return this.computed=null,this}getPixel(xe){for(var we=Array(this.channels),ke=xe*this.channels,ve=0;ve<this.channels;ve++)we[ve]=this.data[ke+ve];return we}toDataURL(xe="image/png",we=!1){function ke(ve){var Me=(0,fe.encode)(ve),Pe=(0,_e.encode)(Me);return`data:${xe};base64,${Pe}`}return xe=(0,oe.getType)(xe),we?new Promise((ve,Me)=>{"image/bmp"===xe?ve(ke(this)):this.getCanvas().toDataURL(xe,function(Pe,je){Pe?Me(Pe):ve(je)})}):"image/bmp"===xe?ke(this):this.getCanvas().toDataURL(xe)}toBase64(xe="image/png",we=!1){if(we)return this.toDataURL(xe,!0).then(function(ve){return ve.substring(ve.indexOf(",")+1)});var ke=this.toDataURL(xe);return ke.substring(ke.indexOf(",")+1)}toBlob(xe="image/png",we=0.8){return(0,ce.canvasToBlob)(this.getCanvas({originalData:!0}),xe,we)}getCanvas(xe={}){var we=xe.originalData,ve;void 0!==we&&we?(this.checkProcessable("getInPlaceCanvas",{channels:[4],bitDepth:[8]}),ve=new Z.ImageData(this.data,this.width,this.height)):ve=new Z.ImageData(this.getRGBAData(),this.width,this.height);var Me=new Z.Canvas(this.width,this.height),Pe=Me.getContext("2d");return Pe.putImageData(ve,0,0),Me}getRGBAData(){this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16]});var xe=this.size,we=new Uint8ClampedArray(4*(this.width*this.height));if(1===this.bitDepth)for(var ke=0,ve;ke<xe;ke++)ve=this.getBit(ke),we[4*ke]=255*ve,we[4*ke+1]=255*ve,we[4*ke+2]=255*ve;else if(1===this.components)for(var Me=0;Me<xe;Me++)we[4*Me]=this.data[Me*this.channels]>>>this.bitDepth-8,we[4*Me+1]=this.data[Me*this.channels]>>>this.bitDepth-8,we[4*Me+2]=this.data[Me*this.channels]>>>this.bitDepth-8;else if(3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[ae.RGB]}),this.colorModel===ae.RGB))for(var Pe=0;Pe<xe;Pe++)we[4*Pe]=this.data[Pe*this.channels]>>>this.bitDepth-8,we[4*Pe+1]=this.data[Pe*this.channels+1]>>>this.bitDepth-8,we[4*Pe+2]=this.data[Pe*this.channels+2]>>>this.bitDepth-8;if(this.alpha){this.checkProcessable("getRGBAData",{bitDepth:[8,16]});for(var je=0;je<xe;je++)we[4*je+3]=this.data[je*this.channels+this.components]>>this.bitDepth-8}else for(var Ie=0;Ie<xe;Ie++)we[4*Ie+3]=255;return we}getRoiManager(xe){return new ne.default(this,xe)}clone(xe={}){var we=xe.copyData;return new ye(this,!(we!==void 0)||we)}save(xe,we={}){var ke=we.format,ve=ke===void 0?"png":ke;return new Promise((Me,Pe)=>{var je=(0,te.createWriteStream)(xe),Ie,De;switch(ve.toLowerCase()){case"png":Ie=this.getCanvas().pngStream();break;case"jpg":case"jpeg":Ie=this.getCanvas().jpegStream();break;case"bmp":De=(0,fe.encode)(this);break;default:throw new RangeError("invalid output format: "+ve);}Ie?(je.on("finish",Me),je.on("error",Pe),Ie.pipe(je)):De&&(0,te.writeFile)(xe,L.from(De),Se=>{return Se?void Pe(Se):void Me()})})}checkProcessable(xe,we={}){var ke=we.bitDepth,ve=we.alpha,Me=we.colorModel,Pe=we.components,je=we.channels;if("string"!=typeof xe)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(ke&&(Array.isArray(ke)||(ke=[ke]),!ke.includes(this.bitDepth)))throw new TypeError("The process: "+xe+" can only be applied if bit depth is in: "+ke);if(ve&&(Array.isArray(ve)||(ve=[ve]),!ve.includes(this.alpha)))throw new TypeError("The process: "+xe+" can only be applied if alpha is in: "+ve);if(Me&&(Array.isArray(Me)||(Me=[Me]),!Me.includes(this.colorModel)))throw new TypeError("The process: "+xe+" can only be applied if color model is in: "+Me);if(Pe&&(Array.isArray(Pe)||(Pe=[Pe]),!Pe.includes(this.components)))throw new TypeError("The process: "+xe+" can only be applied if the number of components is in: "+Pe);if(je&&(Array.isArray(je)||(je=[je]),!je.includes(this.channels)))throw new TypeError("The process: "+xe+" can only be applied if the number of channels is in: "+je)}checkColumn(xe){if(0>xe||xe>=this.width)throw new RangeError(`checkColumn: column should be included between 0 and ${this.width-1}. Current value: ${xe}`)}checkRow(xe){if(0>xe||xe>=this.height)throw new RangeError(`checkRow: row should be included between 0 and ${this.height-1}. Current value: ${xe}`)}checkChannel(xe){if(0>xe||xe>=this.channels)throw new RangeError(`checkChannel: channel should be included between 0 and ${this.channels-1}. Current value: ${xe}`)}apply(xe){for(var we=0;we<this.height;we++)for(var ke=0,ve;ke<this.width;ke++)ve=(we*this.width+ke)*this.channels,xe.call(this,ve)}}T.default=ye,(0,$.default)(ye),(0,ee.default)(ye)}).call(this,I("buffer").Buffer)},{"../stack/Stack":258,"../util/base64":268,"./bitMethods":152,"./environment":165,"./extend":166,"./kind":187,"./kindNames":188,"./load":189,"./mediaTypes":190,"./model/model":191,"./roi/manager":207,"blob-util":5,buffer:7,extend:34,"fast-bmp":38,fs:7,"has-own":48}],152:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){for(var G in L)E.prototype[G]=L[G]};var L={setBitXY(E,G){var W=G*this.width+E;this.data[W>>3]|=1<<7-(7&W)},clearBitXY(E,G){var W=G*this.width+E;this.data[W>>3]&=~(1<<7-(7&W))},toggleBitXY(E,G){var W=G*this.width+E;this.data[W>>3]^=1<<7-(7&W)},getBitXY(E,G){var W=G*this.width+E;return this.data[W>>3]&1<<7-(7&W)?1:0},setBit(E){this.data[E>>3]|=1<<7-(7&E)},clearBit(E){this.data[E>>3]&=~(1<<7-(7&E))},toggleBit(E){this.data[E>>3]^=1<<7-(7&E)},getBit(E){return this.data[E>>3]&1<<7-(7&E)?1:0}}},{}],153:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z={}){var Q=Z.useAlpha,J=Z.nbSlots,ee=J===void 0?512:J;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});var te=Math.log(ee)/Math.log(8);if(te!==Math.floor(te))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");for(var ae=this.bitDepth-te,ie=this.data,ne=(0,W.default)(Math.pow(8,te),0),oe=Math.pow(2,2*te),le=Math.pow(2,te),se=0,de;se<ie.length;se+=this.channels)de=(ie[se]>>ae)*oe+(ie[se+1]>>ae)*le+(ie[se+2]>>ae),(!(Q!==void 0)||Q)&&this.alpha?ne[de]+=ie[se+this.channels-1]/this.maxValue:ne[de]++;return ne};var G=I("new-array"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"new-array":118}],154:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E={}){var G=E.alpha,W=G===void 0?1:G;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});var Z=0;if(W!==void 0){for(var Q=this.components;Q<this.data.length;Q+=this.channels)this.data[Q]===W&&Z++;return Z}return this.size}},{}],155:[function(I,R,T){"use strict";function L(ee){return ee&&ee.__esModule?ee:{default:ee}}function W(ee,te){var ae=te.useAlpha,ie=te.maxSlots;if(1===this.bitDepth){for(var ne=[0,0],oe=0;oe<this.height;oe++)for(var le=0,se;le<this.width;le++)se=this.getBitXY(oe,le),0===se?ne[0]+=1:1===se&&(ne[1]+=1);return ne}var de=Math.log2(ie);if(!(0,J.default)(de))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");var ue=0;this.bitDepth>de&&(ue=this.bitDepth-de);var he=this.data,ce=(0,Q.default)(Math.pow(2,Math.min(this.bitDepth,de)),0);if(ae&&this.alpha)for(var pe=this.channels-ee-1,ge=ee;ge<he.length;ge+=this.channels)ce[he[ge]>>ue]+=he[ge+pe]/this.maxValue;else for(var fe=ee;fe<he.length;fe+=this.channels)ce[he[fe]>>ue]++;return ce}Object.defineProperty(T,"__esModule",{value:!0}),T.getHistogram=function(ee={}){var te=ee.maxSlots,ae=void 0===te?256:te,ie=ee.channel,ne=ee.useAlpha;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),void 0===ie){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");ie=0}return W.call(this,ie,{useAlpha:void 0===ne||ne,maxSlots:ae})},T.getHistograms=function(ee={}){var te=ee.maxSlots,ae=te===void 0?256:te,ie=ee.useAlpha,ne=!(ie!==void 0)||ie;this.checkProcessable("getHistograms",{bitDepth:[8,16]});for(var oe=Array(ne?this.components:this.channels),le=0;le<oe.length;le++)oe[le]=W.call(this,le,{useAlpha:ne,maxSlots:ae});return oe};var Z=I("new-array"),Q=L(Z),$=I("is-integer"),J=L($)},{"is-integer":57,"new-array":118}],156:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E={}){var G=E.mask,W=E.region,Z=W===void 0?3:W,Q=E.removeClosePoints,$=Q===void 0?0:Q,J=E.invert,ee=J!==void 0&&J,te=E.maxEquals,ae=te===void 0?2:te,ie=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),Z*=4;for(var ne=ee?0:1,oe=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],le=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],se=8>=Z?1:2,de=[],ue=se;ue<ie.height-se;ue++)for(var he=se;he<ie.width-se;he++)if(!(G&&G.getBitXY(he,ue)!==ne)){for(var ce=0,pe=0,ge=ie.data[he+ue*ie.width],fe=0;fe<Z;fe++)ee?ie.data[he+oe[fe]+(ue+le[fe])*ie.width]>ge&&ce++:ie.data[he+oe[fe]+(ue+le[fe])*ie.width]<ge&&ce++,ie.data[he+oe[fe]+(ue+le[fe])*ie.width]===ge&&pe++;ce+pe===Z&&pe<=ae&&de.push([he,ue])}if(0<$)for(var _e=0;_e<de.length;_e++)for(var be=_e+1;be<de.length;be++)Math.sqrt(Math.pow(de[_e][0]-de[be][0],2)+Math.pow(de[_e][1]-de[be][1],2))<$&&(de[_e][0]=de[_e][0]+de[be][0]>>1,de[_e][1]=de[_e][1]+de[be][1]>>1,de.splice(be,1),be--);return de}},{}],157:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("max",{bitDepth:[8,16]});for(var Z=(0,W.default)(this.channels,-Infinity),Q=0;Q<this.data.length;Q+=this.channels)for(var $=0;$<this.channels;$++)this.data[Q+$]>Z[$]&&(Z[$]=this.data[Q+$]);return Z};var G=I("new-array"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"new-array":118}],158:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){for(var G=this.getHistograms({maxSlots:this.maxValue+1}),W=Array(G.length),Z=0,Q;Z<G.length;Z++)Q=G[Z],W[Z]=(0,E.mean)(Q);return W};var E=I("../../util/histogram")},{"../../util/histogram":273}],159:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){for(var G=this.getHistograms({maxSlots:this.maxValue+1}),W=Array(G.length),Z=0,Q;Z<G.length;Z++)Q=G[Z],W[Z]=(0,E.median)(Q);return W};var E=I("../../util/histogram")},{"../../util/histogram":273}],160:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});for(var Z=(0,W.default)(this.channels,+Infinity),Q=0;Q<this.data.length;Q+=this.channels)for(var $=0;$<this.channels;$++)this.data[Q+$]<Z[$]&&(Z[$]=this.data[Q+$]);return Z};var G=I("new-array"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"new-array":118}],161:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("points",{bitDepth:[1]});for(var E=Array(this.size),G=0,W=0;W<this.width;W++)for(var Z=0;Z<this.height;Z++)1===this.getBitXY(W,Z)&&(E[G++]=[W,Z]);return E.length=G,E}},{}],162:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G={}){if(this===E)return[0,0];for(var W=[0,0],Z=this;Z;){if(Z===E)return W;Z.position&&(W[0]+=Z.position[0],W[1]+=Z.position[1]),Z=Z.parent}return!!G.defaultFurther&&W}},{}],163:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("sum",{bitDepth:[8,16]});for(var Z=(0,W.default)(this.channels,0),Q=0;Q<this.data.length;Q+=this.channels)for(var $=0;$<this.channels;$++)Z[$]+=this.data[Q+$];return Z};var G=I("new-array"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"new-array":118}],164:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){return this.checkProcessable("getSvd",{bitDepth:[1]}),E.DC.SVD(this.points)};var E=I("ml-matrix")},{"ml-matrix":91}],165:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L,E,G,W,Z,Q;"undefined"==typeof self?"undefined"!=typeof R&&R.exports&&function(){T.env=Q="node",T.isDifferentOrigin=Z=()=>!1;var $=I("canvas");T.DOMImage=E=$.Image,T.Canvas=G=$,T.ImageData=W=$.ImageData;var J=I("fs");T.fetchBinary=L=function(te){return new Promise(function(ae,ie){J.readFile(te,function(ne,oe){ne?ie(ne):ae(oe.buffer)})})}}():function(){T.env=Q="browser";var $=self.location.origin;T.isDifferentOrigin=Z=function(ee){try{var te=new self.URL(ee);return te.origin!==$}catch(ae){return!1}},T.ImageData=W=self.ImageData,T.DOMImage=E=self.Image,T.Canvas=G=function(ee,te){var ae=self.document.createElement("canvas");return ae.width=ee,ae.height=te,ae},T.fetchBinary=L=function(ee,{withCredentials:te=!1}={}){return new Promise(function(ae,ie){var ne=new self.XMLHttpRequest;ne.open("GET",ee,!0),ne.responseType="arraybuffer",ne.withCredentials=te,ne.onload=function(oe){200===this.status?ae(this.response):ie(oe)},ne.onerror=ie,ne.send()})}}(),T.fetchBinary=L,T.DOMImage=E,T.Canvas=G,T.ImageData=W,T.isDifferentOrigin=Z,T.env=Q},{canvas:void 0,fs:7}],166:[function(I,R,T){"use strict";function L(Ma){return Ma&&Ma.__esModule?Ma:{default:Ma}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Ma){var Pa={inPlace:!0},Ia={stack:!0};Ma.extendMethod("invertGetSet",W.default,Pa),Ma.extendMethod("invertIterator",Q.default,Pa),Ma.extendMethod("invertPixel",te.default,Pa),Ma.extendMethod("invertOneLoop",J.default,Pa),Ma.extendMethod("invertApply",ie.default,Pa),Ma.extendMethod("invert",se.default,{inPlace:!0,stack:!0}),Ma.extendMethod("invertBinaryLoop",oe.default,Pa),Ma.extendMethod("level",ve.default,Pa),Ma.extendMethod("add",Pe.default,Pa),Ma.extendMethod("subtract",Ie.default,Pa),Ma.extendMethod("multiply",Ae.default,Pa),Ma.extendMethod("divide",Be.default,Pa),Ma.extendMethod("hypotenuse",Se.default),Ma.extendMethod("background",ze.default),Ma.extendMethod("flipX",ue.default),Ma.extendMethod("flipY",ce.default),Ma.extendMethod("blurFilter",ge.default),Ma.extendMethod("medianFilter",_e.default),Ma.extendMethod("gaussianFilter",ye.default),Ma.extendMethod("sobelFilter",we.default),Ma.extendMethod("crop",Ee.default,Ia),Ma.extendMethod("cropAlpha",Fe.default,Ia),Ma.extendMethod("scale",Oe.default,Ia),Ma.extendMethod("hsv",Ne.default),Ma.extendMethod("hsl",Xe.default),Ma.extendMethod("cmyk",He.default),Ma.extendMethod("rgba8",Ze.default),Ma.extendMethod("grey",Qe.default).extendMethod("gray",Qe.default),Ma.extendMethod("mask",Je.default),Ma.extendMethod("pad",at.default),Ma.extendMethod("colorDepth",rt.default),Ma.extendMethod("setBorder",st.default,Pa),Ma.extendMethod("rotate",ot.rotate),Ma.extendMethod("rotateLeft",ot.rotateLeft),Ma.extendMethod("rotateRight",ot.rotateRight),Ma.extendMethod("getRow",Pt.default),Ma.extendMethod("getColumn",It.default),Ma.extendMethod("getMatrix",St.default),Ma.extendMethod("setMatrix",At.default),Ma.extendMethod("getPixelsArray",Bt.default),Ma.extendMethod("getIntersection",zt.default),Ma.extendMethod("getClosestCommonParent",Et.default),Ma.extendMethod("split",ut.default),Ma.extendMethod("getChannel",mt.default),Ma.extendMethod("combineChannels",pt.default),Ma.extendMethod("setChannel",_t.default),Ma.extendMethod("getSimilarity",yt.default),Ma.extendMethod("getPixelsGrid",wt.default),Ma.extendMethod("getBestMatch",vt.default),Ma.extendMethod("paintMasks",Ft.default,Pa),Ma.extendMethod("paintLabels",Ot.default,Pa),Ma.extendMethod("paintPoints",Nt.default,Pa),Ma.extendMethod("extract",Xt.default),Ma.extendMethod("convolution",Ht.default),Ma.extendMethod("convolutionFft",Zt.default),Ma.extendMethod("floodFill",Qt.default),Ma.extendMethod("countAlphaPixels",va.default),Ma.extendMethod("getHistogram",$t.getHistogram).extendProperty("histogram",$t.getHistogram),Ma.extendMethod("getHistograms",$t.getHistograms).extendProperty("histograms",$t.getHistograms),Ma.extendMethod("getColorHistogram",ea.default).extendProperty("colorHistogram",ea.default),Ma.extendMethod("getMin",aa.default).extendProperty("min",aa.default),Ma.extendMethod("getMax",na.default).extendProperty("max",na.default),Ma.extendMethod("getSum",la.default).extendProperty("sum",la.default),Ma.extendMethod("getLocalMaxima",ua.default),Ma.extendMethod("getMedian",ga.default).extendProperty("median",ga.default),Ma.extendMethod("getMean",ma.default).extendProperty("mean",ma.default),Ma.extendMethod("getPoints",_a.default).extendProperty("points",_a.default),Ma.extendMethod("getRelativePosition",ya.default),Ma.extendMethod("getSvd",wa.default).extendProperty("svd",wa.default)};var G=I("./filter/invertGetSet"),W=L(G),Z=I("./filter/invertIterator"),Q=L(Z),$=I("./filter/invertOneLoop"),J=L($),ee=I("./filter/invertPixel"),te=L(ee),ae=I("./filter/invertApply"),ie=L(ae),ne=I("./filter/invertBinaryLoop"),oe=L(ne),le=I("./filter/invert"),se=L(le),de=I("./filter/flipX"),ue=L(de),he=I("./filter/flipY"),ce=L(he),pe=I("./filter/blurFilter"),ge=L(pe),fe=I("./filter/medianFilter"),_e=L(fe),be=I("./filter/gaussianFilter"),ye=L(be),xe=I("./filter/sobelFilter"),we=L(xe),ke=I("./filter/level"),ve=L(ke),Me=I("./filter/add"),Pe=L(Me),je=I("./filter/subtract"),Ie=L(je),De=I("./filter/hypotenuse"),Se=L(De),Ce=I("./filter/multiply"),Ae=L(Ce),Re=I("./filter/divide"),Be=L(Re),Te=I("./filter/background"),ze=L(Te),Le=I("./transform/crop"),Ee=L(Le),Ve=I("./transform/cropAlpha"),Fe=L(Ve),Ye=I("./transform/scale/scale"),Oe=L(Ye),Ue=I("./transform/hsv"),Ne=L(Ue),qe=I("./transform/hsl"),Xe=L(qe),Ge=I("./transform/cmyk"),He=L(Ge),We=I("./transform/rgba8"),Ze=L(We),Ke=I("./transform/grey"),Qe=L(Ke),$e=I("./transform/mask/mask"),Je=L($e),et=I("./transform/pad"),at=L(et),nt=I("./transform/colorDepth"),rt=L(nt),ot=I("./transform/rotate"),lt=I("./utility/setBorder"),st=L(lt),dt=I("./utility/split"),ut=L(dt),ht=I("./utility/getChannel"),mt=L(ht),ct=I("./utility/combineChannels"),pt=L(ct),gt=I("./utility/setChannel"),_t=L(gt),bt=I("./utility/getSimilarity"),yt=L(bt),xt=I("./utility/getPixelsGrid"),wt=L(xt),kt=I("./utility/getBestMatch"),vt=L(kt),Mt=I("./utility/getRow"),Pt=L(Mt),jt=I("./utility/getColumn"),It=L(jt),Dt=I("./utility/getMatrix"),St=L(Dt),Ct=I("./utility/setMatrix"),At=L(Ct),Rt=I("./utility/getPixelsArray"),Bt=L(Rt),Tt=I("./utility/getIntersection"),zt=L(Tt),Lt=I("./utility/getClosestCommonParent"),Et=L(Lt),Vt=I("./operator/paintMasks"),Ft=L(Vt),Yt=I("./operator/paintLabels"),Ot=L(Yt),Ut=I("./operator/paintPoints"),Nt=L(Ut),qt=I("./operator/extract"),Xt=L(qt),Gt=I("./operator/convolution"),Ht=L(Gt),Wt=I("./operator/convolutionFft"),Zt=L(Wt),Kt=I("./operator/floodFill"),Qt=L(Kt),$t=I("./compute/histogram"),Jt=I("./compute/colorHistogram"),ea=L(Jt),ta=I("./compute/min"),aa=L(ta),ia=I("./compute/max"),na=L(ia),oa=I("./compute/sum"),la=L(oa),da=I("./compute/localMaxima"),ua=L(da),ha=I("./compute/mean"),ma=L(ha),ca=I("./compute/median"),ga=L(ca),fa=I("./compute/points"),_a=L(fa),ba=I("./compute/relativePosition"),ya=L(ba),xa=I("./compute/svd"),wa=L(xa),ka=I("./compute/countAlphaPixels"),va=L(ka)},{"./compute/colorHistogram":153,"./compute/countAlphaPixels":154,"./compute/histogram":155,"./compute/localMaxima":156,"./compute/max":157,"./compute/mean":158,"./compute/median":159,"./compute/min":160,"./compute/points":161,"./compute/relativePosition":162,"./compute/sum":163,"./compute/svd":164,"./filter/add":167,"./filter/background":168,"./filter/blurFilter":169,"./filter/divide":170,"./filter/flipX":171,"./filter/flipY":172,"./filter/gaussianFilter":173,"./filter/hypotenuse":174,"./filter/invert":175,"./filter/invertApply":176,"./filter/invertBinaryLoop":177,"./filter/invertGetSet":178,"./filter/invertIterator":179,"./filter/invertOneLoop":180,"./filter/invertPixel":181,"./filter/level":182,"./filter/medianFilter":183,"./filter/multiply":184,"./filter/sobelFilter":185,"./filter/subtract":186,"./operator/convolution":192,"./operator/convolutionFft":193,"./operator/extract":194,"./operator/floodFill":195,"./operator/paintLabels":196,"./operator/paintMasks":197,"./operator/paintPoints":198,"./transform/cmyk":208,"./transform/colorDepth":209,"./transform/crop":210,"./transform/cropAlpha":211,"./transform/grey":212,"./transform/hsl":214,"./transform/hsv":215,"./transform/mask/mask":220,"./transform/pad":233,"./transform/rgba8":234,"./transform/rotate":235,"./transform/scale/scale":238,"./utility/combineChannels":239,"./utility/getBestMatch":241,"./utility/getChannel":242,"./utility/getClosestCommonParent":243,"./utility/getColumn":244,"./utility/getIntersection":245,"./utility/getMatrix":246,"./utility/getPixelsArray":247,"./utility/getPixelsGrid":248,"./utility/getRow":249,"./utility/getSimilarity":250,"./utility/setBorder":251,"./utility/setChannel":252,"./utility/setMatrix":253,"./utility/split":254}],167:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Z={}){var Q=Z.channels;if(this.checkProcessable("add",{bitDepth:[8,16]}),Q=(0,E.validateArrayOfChannels)(this,{channels:Q}),W=(0,G.checkNumberArray)(W),!isNaN(W))for(var $=0,J;$<Q.length;$++){J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]+W>>0)}else{if(this.data.length!==W.length)throw new Error("add: the data size is different");for(var te=0,ae;te<Q.length;te++){ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]+W[ie+ae]>>0))}}return this};var E=I("../../util/channel"),G=I("../../util/value")},{"../../util/channel":269,"../../util/value":277}],168:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Q,$,J){for(var ee=new G.KernelRidgeRegression(Q,$,J),te=Array(this.size),ae=0;ae<this.width;ae++)for(var ie=0;ie<this.height;ie++)te[ie*this.width+ae]=[ae,ie];for(var ne=ee.predict(te),oe=Z.default.createFrom(this),le=0;le<this.size;le++)oe.data[le]=Math.min(this.maxValue,Math.max(0,ne[le][0]));return oe};var G=I("ml-regression"),W=I("../Image"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(W)},{"../Image":151,"ml-regression":103}],169:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z={}){var Q=Z.radius,$=void 0===Q?1:Q;if(this.checkProcessable("meanFilter",{components:[1],bitDepth:[8,16]}),1>$)throw new Error("Number of neighbors should be grater than 0");for(var J=2*$+1,te=Array(J*J),ae=0;ae<te.length;ae++)te[ae]=1;return W.default.call(this,te)};var G=I("../operator/convolutionFft"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../operator/convolutionFft":193}],170:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Z={}){var Q=Z.channels;if(this.checkProcessable("divide",{bitDepth:[8,16]}),Q=(0,E.validateArrayOfChannels)(this,{channels:Q}),W=(0,G.checkNumberArray)(W),!isNaN(W))for(var $=0,J;$<Q.length;$++){J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]/W>>0)}else{if(this.data.length!==W.length)throw new Error("divide: the: the data size is different");for(var te=0,ae;te<Q.length;te++){ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]/W[ie+ae]>>0))}}return this};var E=I("../../util/channel"),G=I("../../util/value")},{"../../util/channel":269,"../../util/value":277}],171:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(var E=0,G;E<this.height;E++){G=E*this.width*this.channels;for(var W=0;W<Math.floor(this.width/2);W++)for(var Z=W*this.channels+G,Q=(this.width-W-1)*this.channels+G,$=0,J;$<this.channels;$++)J=this.data[Z+$],this.data[Z+$]=this.data[Q+$],this.data[Q+$]=J}return this}},{}],172:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(var E=0;E<Math.floor(this.height/2);E++)for(var G=0;G<this.width;G++)for(var W=G*this.channels+E*this.width*this.channels,Z=G*this.channels+(this.height-1-E)*this.channels*this.width,Q=0,$;Q<this.channels;Q++)$=this.data[W+Q],this.data[W+Q]=this.data[Z+Q],this.data[Z+Q]=$;return this}},{}],173:[function(I,R,T){"use strict";function G($,J){if(1>$)throw new RangeError("Radius should be grater than 0");for(var ee=2*$+1,te=Array(ee*ee),ae=2*(J*J),ie=Math.PI*ae,ne=0;ne<=$;ne++)for(var oe=ne,le;oe<=$;oe++)le=Math.exp(-(ne*ne+oe*oe)/ae)/ie,te[(ne+$)*ee+(oe+$)]=le,te[(ne+$)*ee+(-oe+$)]=le,te[(-ne+$)*ee+(oe+$)]=le,te[(-ne+$)*ee+(-oe+$)]=le,te[(oe+$)*ee+(ne+$)]=le,te[(oe+$)*ee+(-ne+$)]=le,te[(-oe+$)*ee+(ne+$)]=le,te[(-oe+$)*ee+(-ne+$)]=le;return te}function W($){if(0>=$)throw new RangeError("Sigma should be grater than 0");for(var J=2*($*$),ee=Math.PI*J,te=1/ee,ae=te,ie=0;0.99>ae;){ie++,te=Math.exp(-(ie*ie)/J)/ee,ae+=4*te;for(var ne=1;ne<ie;ne++)te=Math.exp(-(ne*ne+ie*ie)/J)/ee,ae+=8*te;te=4*Math.exp(-(2*ie*ie)/J)/ee,ae+=te}if(1<ae)throw new Error("unexpected sum over 1");return G(ie,$)}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($={}){var J=$.radius,ee=void 0===J?1:J,te=$.sigma,ae=$.channels,ie=$.border,ne=void 0===ie?"copy":ie,oe=$.algorithm,le=void 0===oe?"auto":oe;this.checkProcessable("gaussian",{bitDepth:[8,16]});var se;return te?se=W(te):(te=0.3*(ee-1)+0.8,se=G(ee,te)),Q.default.call(this,se,{border:ne,channels:ae,algorithm:le})};var Z=I("../operator/convolution"),Q=function($){return $&&$.__esModule?$:{default:$}}(Z)},{"../operator/convolution":192}],174:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Q,$={}){var J=$.bitDepth,ee=void 0===J?this.bitDepth:J,te=$.channels;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==Q.width||this.height!==Q.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==Q.alpha||this.bitDepth!==Q.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==Q.channels)throw new Error("hypotenuse: both images must have the same number of channels");var ae=Z.default.createFrom(this,{bitDepth:ee});te=(0,G.validateArrayOfChannels)(this,{channels:te});for(var ie=ae.isClamped,ne=0,oe;ne<te.length;ne++){oe=te[ne];for(var le=oe,se;le<this.data.length;le+=this.channels)se=Math.sqrt(this.data[le]*this.data[le]+Q.data[le]*Q.data[le]),ae.data[le]=ie?Math.min(Math.max(Math.round(se),0),ae.maxValue):se}return ae};var G=I("../../util/channel"),W=I("../Image"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(W)},{"../../util/channel":269,"../Image":151}],175:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G={}){var W=G.channels;if(this.checkProcessable("invertOneLoop",{bitDepth:[1,8,16]}),1===this.bitDepth)for(var Z=this.data,Q=0;Q<Z.length;Q++)Z[Q]=~Z[Q];else{W=(0,E.validateArrayOfChannels)(this,{channels:W});for(var $=0,J;$<W.length;$++){J=W[$];for(var ee=J;ee<this.data.length;ee+=this.channels)this.data[ee]=this.maxValue-this.data[ee]}}return this};var E=I("../../util/channel")},{"../../util/channel":269}],176:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(1===this.bitDepth)for(var E=this.data,G=0;G<E.length;G++)E[G]=~E[G];else this.checkProcessable("invertApply",{bitDepth:[8,16]}),this.apply(function(W){for(var Z=0;Z<this.components;Z++)this.data[W+Z]=this.maxValue-this.data[W+Z]})}},{}],177:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertBinaryLoop",{bitDepth:[1]});for(var E=0;E<this.size;E++)this.toggleBit(E)}},{}],178:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth)for(var E=this.data,G=0;G<E.length;G++)E[G]=~E[G];else for(var W=0;W<this.width;W++)for(var Z=0;Z<this.height;Z++)for(var Q=0,$;Q<this.components;Q++)$=this.getValueXY(W,Z,Q),this.setValueXY(W,Z,Q,this.maxValue-$)}},{}],179:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth)for(var E=this.data,G=0;G<E.length;G++)E[G]=~E[G];else{var W=!0,Z=!1,Q;try{for(var $=this.pixels()[Symbol.iterator](),J;!(W=(J=$.next()).done);W=!0)for(var ee=J.value,te=ee.index,ae=ee.pixel,ie=0;ie<this.components;ie++)this.setValue(te,ie,this.maxValue-ae[ie])}catch(ne){Z=!0,Q=ne}finally{try{!W&&$.return&&$.return()}finally{if(Z)throw Q}}}}},{}],180:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertOneLoop",{bitDepth:[8,16]});for(var E=this.data,G=0;G<E.length;G+=this.channels)for(var W=0;W<this.components;W++)E[G+W]=this.maxValue-E[G+W]}},{}],181:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertPixel",{bitDepth:[8,16]});for(var E=0;E<this.width;E++)for(var G=0,W;G<this.height;G++){W=this.getPixelXY(E,G);for(var Z=0;Z<this.components;Z++)W[Z]=this.maxValue-W[Z];this.setPixelXY(E,G,W)}}},{}],182:[function(I,R,T){"use strict";function G($,J,ee,te){var ae=1e-5,ie=Array($.channels),ne=!0,oe=!1,le;try{for(var se=te[Symbol.iterator](),de,ue;!(ne=(de=se.next()).done);ne=!0)ue=de.value,ie[ue]=0===J[ue]&&ee[ue]===$.maxValue?0:ee[ue]===J[ue]?0:($.maxValue+1-ae)/(ee[ue]-J[ue]),J[ue]+=(0.5-ae/2)/ie[ue]}catch(ge){oe=!0,le=ge}finally{try{!ne&&se.return&&se.return()}finally{if(oe)throw le}}for(var he=0,ce;he<te.length;he++)if(ce=te[he],0!==ie[ce])for(var pe=0;pe<$.data.length;pe+=$.channels)$.data[pe+ce]=Math.min(Math.max(0,0|($.data[pe+ce]-J[ce])*ie[ce]+0.5),$.maxValue)}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($={}){var J=$.algorithm,ee=void 0===J?"range":J,te=$.channels,ae=$.min,ie=void 0===ae?this.min:ae,ne=$.max,oe=void 0===ne?this.max:ne;switch(this.checkProcessable("level",{bitDepth:[8,16]}),te=(0,Q.validateArrayOfChannels)(this,{channels:te}),ee){case"range":0>ie&&(ie=0),oe>this.maxValue&&(oe=this.maxValue),Array.isArray(ie)||(ie=(0,Z.default)(te.length,ie)),Array.isArray(oe)||(oe=(0,Z.default)(te.length,oe)),G(this,ie,oe,te);break;default:throw new Error("level: algorithm not implement: "+ee);}return this};var W=I("new-array"),Z=function($){return $&&$.__esModule?$:{default:$}}(W),Q=I("../../util/channel")},{"../../util/channel":269,"new-array":118}],183:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($={}){var J=$.radius,ee=void 0===J?1:J,te=$.channels,ae=$.border,ie=void 0===ae?"copy":ae;if(this.checkProcessable("median",{bitDepth:[8,16]}),1>ee)throw new Error("Kernel radius should be greater than 0");te=(0,G.validateArrayOfChannels)(this,te,!0);for(var ne=ee,oe=ee,le=Q.default.createFrom(this),se=(2*ne+1)*(2*oe+1),de=Math.floor(se/2),ue=Array(se),he=0,ce;he<te.length;he++){ce=te[he];for(var pe=oe;pe<this.height-oe;pe++)for(var ge=ne,fe;ge<this.width-ne;ge++){fe=0;for(var _e=-oe;_e<=oe;_e++)for(var be=-ne,ye;be<=ne;be++)ye=((pe+_e)*this.width+ge+be)*this.channels+ce,ue[fe++]=this.data[ye];var xe=(pe*this.width+ge)*this.channels+ce,we=ue.sort(W.asc)[de];le.data[xe]=we}}if(this.alpha&&!te.includes(this.channels))for(var ke=this.components;ke<this.data.length;ke+=this.channels)le.data[ke]=this.data[ke];return le.setBorder({size:[ne,oe],algorithm:ie}),le};var G=I("../../util/channel"),W=I("num-sort"),Z=I("../Image"),Q=function($){return $&&$.__esModule?$:{default:$}}(Z)},{"../../util/channel":269,"../Image":151,"num-sort":119}],184:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Z={}){var Q=Z.channels;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),0>=W)throw new Error("multiply: the value must be greater than 0");if(Q=(0,E.validateArrayOfChannels)(this,{channels:Q}),W=(0,G.checkNumberArray)(W),!isNaN(W))for(var $=0,J;$<Q.length;$++){J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]*W>>0)}else{if(this.data.length!==W.length)throw new Error("multiply: the data size is different");for(var te=0,ae;te<Q.length;te++){ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]*W[ie+ae]>>0))}}return this};var E=I("../../util/channel"),G=I("../../util/value")},{"../../util/channel":269,"../../util/value":277}],185:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Q={}){var $=Q.kernelX,J=$===void 0?Z.GRADIENT_X:$,ee=Q.kernelY,te=ee===void 0?Z.GRADIENT_Y:ee,ae=Q.border,ie=ae===void 0?"copy":ae,ne=Q.channels;this.checkProcessable("sobel",{bitDepth:[8,16]});var oe=W.default.call(this,J,{channels:ne,border:ie,bitDepth:32}),le=W.default.call(this,te,{channels:ne,border:ie,bitDepth:32});return oe.hypotenuse(le,{bitDepth:this.bitDepth,channels:ne})};var G=I("../operator/convolution"),W=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(G),Z=I("../../util/kernels")},{"../../util/kernels":275,"../operator/convolution":192}],186:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Z={}){var Q=Z.channels;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),Q=(0,E.validateArrayOfChannels)(this,{channels:Q}),W=(0,G.checkNumberArray)(W),!isNaN(W))for(var $=0,J;$<Q.length;$++){J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.max(0,this.data[ee+J]-W>>0)}else{if(this.data.length!==W.length)throw new Error("substract: the data size is different");for(var te=0,ae;te<Q.length;te++){ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]-W[ie+ae]>>0))}}return this};var E=I("../../util/channel"),G=I("../../util/value")},{"../../util/channel":269,"../../util/value":277}],187:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getKind=function(ee){return J[ee]},T.getTheoreticalPixelArraySize=function(ee){var te=ee.channels*ee.size;return 1===ee.bitDepth&&(te=Math.ceil(te/8)),te},T.createPixelArray=function(ee){var te=ee.channels*ee.size,ae;switch(ee.bitDepth){case 1:ae=new Uint8Array(Math.ceil(te/8));break;case 8:ae=new Uint8ClampedArray(te);break;case 16:ae=new Uint16Array(te);break;case 32:ae=new Float32Array(te);break;default:throw new Error("Cannot create pixel array for bit depth "+ee.bitDepth);}if(ee.alpha)for(var ie=ee.components;ie<ae.length;ie+=ee.channels)ae[ie]=ee.maxValue;return ae};var Z=I("./kindNames"),Q=function(ee){if(ee&&ee.__esModule)return ee;var te={};if(null!=ee)for(var ae in ee)Object.prototype.hasOwnProperty.call(ee,ae)&&(te[ae]=ee[ae]);return te.default=ee,te}(Z),$=I("./model/model"),J={};J[Q.BINARY]={components:1,alpha:0,bitDepth:1,colorModel:$.GREY},J[Q.GREYA]={components:1,alpha:1,bitDepth:8,colorModel:$.GREY},J[Q.GREY]={components:1,alpha:0,bitDepth:8,colorModel:$.GREY},J[Q.RGBA]={components:3,alpha:1,bitDepth:8,colorModel:$.RGB},J[Q.RGB]={components:3,alpha:0,bitDepth:8,colorModel:$.RGB},J[Q.CMYK]={components:4,alpha:0,bitDepth:8,colorModel:$.CMYK},J[Q.CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:$.CMYK}},{"./kindNames":188,"./model/model":191}],188:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.BINARY="BINARY",E=T.GREY="GREY",G=T.GREYA="GREYA",W=T.RGB="RGB",Z=T.RGBA="RGBA",Q=T.CMYK="CMYK",$=T.CMYKA="CMYKA"},{}],189:[function(I,R,T){"use strict";function L(fe){return fe&&fe.__esModule?fe:{default:fe}}function E(fe){return(255&fe)<<8|255&fe>>8}function W(fe,_e,be){function ye(ve,Me){if(!ve)throw new Error(`This kind of image (${xe}) can only be loaded from URL.`);return te(ve,Me)}var xe=(0,ce.default)(fe);if(xe)switch(xe.ext){case"png":return Q(fe);case"jpg":{var we=(0,de.decode)(fe),ke;return we.exif&&(ke=J(we.exif)),ye(be,{meta:ke})}case"tif":return $(fe);}return ye(be)}function Z(fe,_e){var be=fe.slice(0,64).match(ge),ye;return ye=be?Promise.resolve((0,pe.decode)(fe.slice(be[0].length))):(0,le.fetchBinary)(fe,_e),ye.then(xe=>{var we=new Uint8Array(xe);return W(we,_e,fe)})}function Q(fe){var _e=new se.PNGDecoder(fe),be=_e.decode(),ye=be.bitDepth,xe=be.data.buffer,we;if(8===ye)we=new Uint8ClampedArray(xe);else if(16===ye){we=new Uint16Array(xe);for(var ke=0;ke<we.length;ke++)we[ke]=E(we[ke])}var ve=be.colourType,Me,Pe=0;switch(ve){case 0:Me=1;break;case 2:Me=3;break;case 4:Me=1,Pe=1;break;case 6:Me=3,Pe=1;break;default:throw new Error(`Unexpected colourType: ${ve}`);}return new ie.default(be.width,be.height,we,{components:Me,alpha:Pe,bitDepth:ye})}function $(fe){var _e=(0,ue.decode)(fe);return 1===_e.length?ee(_e[0]):new oe.default(_e.map(ee))}function J(fe){var _e={tiff:fe};return fe.exif&&(_e.exif=fe.exif),fe.gps&&(_e.gps=fe.gps),_e}function ee(fe){return new ie.default(fe.width,fe.height,fe.data,{components:1,alpha:0,colorModel:null,bitDepth:fe.bitsPerSample.length?fe.bitsPerSample[0]:fe.bitsPerSample,meta:J(fe)})}function te(fe,_e){return _e=_e||{},new Promise(function(be,ye){var xe=new le.DOMImage;(0,le.isDifferentOrigin)(fe)&&(xe.crossOrigin="Anonymous"),xe.onload=function(){var we=xe.width,ke=xe.height,ve=new le.Canvas(we,ke),Me=ve.getContext("2d");Me.drawImage(xe,0,0,we,ke);var Pe=Me.getImageData(0,0,we,ke).data;be(new ie.default(we,ke,Pe,_e))},xe.onerror=function(){ye(new Error("Could not load "+fe))},xe.src=fe})}Object.defineProperty(T,"__esModule",{value:!0}),T.loadImage=function(fe,_e){if("string"==typeof fe)return Z(fe,_e);if(fe instanceof ArrayBuffer)return Promise.resolve(W(new Uint8Array(fe),_e));if(fe.buffer)return Promise.resolve(W(fe,_e));throw new Error("argument to \"load\" must be a string or buffer.")};var ae=I("./Image"),ie=L(ae),ne=I("../stack/Stack"),oe=L(ne),le=I("./environment"),se=I("fast-png"),de=I("fast-jpeg"),ue=I("tiff"),he=I("image-type"),ce=L(he),pe=I("../util/base64"),ge=/^data:[a-z]+\/([a-z]+);base64,/},{"../stack/Stack":258,"../util/base64":268,"./Image":151,"./environment":165,"fast-jpeg":40,"fast-png":43,"image-type":50,tiff:142}],190:[function(I,R,T){"use strict";function E(ae){ee||(ee=new Q.default(1,1));var ie=J.get(ae);return ie||(ie=new te(ae),J.set(ae,ie)),ie}Object.defineProperty(T,"__esModule",{value:!0}),T.canWrite=function(ae){return"node"===$.env&&"image/png"!==ae?!1:E(ae).canWrite()},T.getType=function(ae){return ae.includes("/")||(ae="image/"+ae),ae};var Z=I("./Image"),Q=function(ae){return ae&&ae.__esModule?ae:{default:ae}}(Z),$=I("./environment"),J=new Map,ee=void 0;class te{constructor(ae){this.type=ae,this._canWrite=null}canWrite(){return null===this._canWrite&&(this._canWrite=ee.toDataURL(this.type).startsWith("data:"+this.type)),this._canWrite}}},{"./Image":151,"./environment":165}],191:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.RGB="RGB",E=T.HSL="HSL",G=T.HSV="HSV",W=T.CMYK="CMYK",Z=T.GREY="GREY"},{}],192:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(J,ee={}){var te=ee.channels,ae=ee.bitDepth,ie=ee.normalize,ne=void 0!==ie&&ie,oe=ee.divisor,le=void 0===oe?1:oe,se=ee.border,de=void 0===se?"copy":se,ue=ee.algorithm,he=void 0===ue?"auto":ue,ce=W.default.createFrom(this,{bitDepth:ae});te=(0,Z.validateArrayOfChannels)(this,te,!0);var pe=(0,Q.validateKernel)(J);J=pe.kernel,"auto"===he&&(9<J.length||9<J[0].length?he="fft":he="direct"),(4096<this.width||4096<this.height)&&(he="direct");var ge=Math.floor(J.length/2),fe=Math.floor(J[0].length/2),_e=ce.isClamped,be=Array(this.height*this.width),ye,xe,we,ke,ve,Me;for(ke=0;ke<te.length;ke++){for(ve=te[ke],we=0;we<this.height;we++)for(xe=0;xe<this.width;xe++)ye=we*this.width+xe,be[ye]=this.data[ye*this.channels+ve];for(Me="direct"===he?$.direct(be,J,{rows:this.height,cols:this.width,normalize:ne,divisor:le}):$.fft(be,J,{rows:this.height,cols:this.width,normalize:ne,divisor:le}),we=0;we<this.height;we++)for(xe=0;xe<this.width;xe++)ye=we*this.width+xe,ce.data[ye*this.channels+ve]=_e?Math.min(Math.max(Me[ye],0),ce.maxValue):Me[ye]}if(this.alpha&&!te.includes(this.channels))for(xe=this.components;xe<this.data.length;xe+=this.channels)ce.data[xe]=this.data[xe];return"periodic"!==de&&ce.setBorder({size:[fe,ge],algorithm:de}),ce};var G=I("../Image"),W=function(J){return J&&J.__esModule?J:{default:J}}(G),Z=I("../../util/channel"),Q=I("../../util/kernel"),$=I("ml-matrix-convolution")},{"../../util/channel":269,"../../util/kernel":274,"../Image":151,"ml-matrix-convolution":82}],193:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G={}){return G=Object.assign({},G),G.algorithm="fft",this.convolution(E,G)}},{}],194:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z,Q={}){var $=Q.position;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!$&&($=Z.getRelativePosition(this),!$))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(1<this.bitDepth){for(var J=W.default.createFrom(this,{width:Z.width,height:Z.height,alpha:1,position:$,parent:this}),ee=0;ee<Z.width;ee++)for(var te=0;te<Z.height;te++){for(var ae=0,ie;ae<this.channels;ae++)ie=this.getValueXY(ee+$[0],te+$[1],ae),J.setValueXY(ee,te,ae,ie);Z.getBitXY(ee,te)||J.setValueXY(ee,te,this.components,0)}return J}for(var ne=W.default.createFrom(this,{width:Z.width,height:Z.height,position:$,parent:this}),oe=0;oe<Z.height;oe++)for(var le=0;le<Z.width;le++)Z.getBitXY(le,oe)&&this.getBitXY(le+$[0],oe+$[1])&&ne.setBitXY(le,oe);return ne};var G=I("../Image"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../Image":151}],195:[function(I,R,T){"use strict";function L(J){return J&&J.__esModule?J:{default:J}}function G(J,ee){this.x=J,this.y=ee}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(J={}){var ee=J.x,te=void 0===ee?0:ee,ae=J.y,ie=void 0===ae?0:ae,ne=J.inPlace,le=void 0===ne||ne?this:$.default.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),1===this.bitDepth){var se=this.getBitXY(te,ie);if(se)return le;var de=new Z.default;for(de.push(new G(te,ie));0<de.length;){var ue=de.shift();le.setBitXY(ue.x,ue.y);for(var he=ue.x+1;he<this.width&&!le.getBitXY(he,ue.y)&&!this.getBitXY(he,ue.y);he++)le.setBitXY(he,ue.y),ue.y+1<this.height&&!this.getBitXY(he,ue.y+1)&&de.push(new G(he,ue.y+1)),0<=ue.y-1&&!this.getBitXY(he,ue.y-1)&&de.push(new G(he,ue.y-1));for(var ce=ue.x-1;0<=ce&&!le.getBitXY(ce,ue.y)&&!this.getBitXY(ce,ue.y);ce++)le.setBitXY(ce,ue.y),ue.y+1<this.height&&!this.getBitXY(ce,ue.y+1)&&de.push(new G(ce,ue.y+1)),0<=ue.y-1&&!this.getBitXY(ce,ue.y-1)&&de.push(new G(ce,ue.y-1))}}return le};var W=I("fast-list"),Z=L(W),Q=I("../Image"),$=L(Q)},{"../Image":151,"fast-list":41}],196:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Z,Q={}){var $=Q.color,J=void 0===$?"blue":$,ee=Q.colors,te=Q.font,ae=void 0===te?"12px Helvetica":te,ie=Q.rotate,ne=void 0===ie?0:ie;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:E.RGB}),!Array.isArray(W))throw Error("paintLabels: labels must be an array");if(!Array.isArray(Z))throw Error("paintLabels: positions must be an array");if(J&&!Array.isArray(J)&&(J=(0,G.css2array)(J)),ee=ee?ee.map(function(he){return Array.isArray(he)?he:(0,G.css2array)(he)}):[J],W.length!==Z.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(ae)||(ae=[ae]),Array.isArray(ne)||(ne=[ne]);for(var oe=this.getCanvas({originalData:!0}),le=oe.getContext("2d"),se=0;se<W.length;se++){le.save();var de=ee[se%ee.length];le.fillStyle=`rgba(${de[0]},${de[1]},${de[2]},${de[3]/this.maxValue})`,le.font=ae[se%ae.length];var ue=Z[se];le.translate(ue[0],ue[1]),le.rotate(ne[se%ne.length]/180*Math.PI),le.fillText(W[se],0,0),le.restore()}return this.setData(le.getImageData(0,0,this.width,this.height).data),this};var E=I("../model/model"),G=I("../../util/color")},{"../../util/color":270,"../model/model":191}],197:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Z={}){var Q=Z.color,$=Q===void 0?"red":Q,J=Z.colors,ee=Z.alpha,te=ee===void 0?255:ee,ae=Z.randomColors,ne=Z.distinctColors,le=Z.labels,se=le===void 0?[]:le,de=Z.labelsPosition,ue=de===void 0?[]:de,he=Z.labelColor,ce=he===void 0?"blue":he,pe=Z.labelFont,ge=pe===void 0?"12px Helvetica":pe;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:E.RGB}),$&&!Array.isArray($)&&($=(0,G.css2array)($)),J&&(J=J.map(function(je){return Array.isArray(je)?je:(0,G.css2array)(je)})),Array.isArray(W)||(W=[W]),ne!==void 0&&ne&&(J=(0,G.getDistinctColors)(W.length));for(var fe=0,_e;fe<W.length;fe++){_e=W[fe],J?$=J[fe%J.length]:ae!==void 0&&ae&&($=(0,G.getRandomColor)());for(var be=0;be<_e.width;be++)for(var ye=0;ye<_e.height;ye++)if(_e.getBitXY(be,ye))for(var xe=0;xe<Math.min(this.components,$.length);xe++)if(255===te)this.setValueXY(be+_e.position[0],ye+_e.position[1],xe,$[xe]);else{var we=this.getValueXY(be+_e.position[0],ye+_e.position[1],xe);we=Math.round((we*(255-te)+$[xe]*te)/255),this.setValueXY(be+_e.position[0],ye+_e.position[1],xe,we)}}if(Array.isArray(se)&&0<se.length){var ke=this.getCanvas({originalData:!0}),ve=ke.getContext("2d");ve.fillStyle=ce,ve.font=ge;for(var Me=0,Pe;Me<Math.min(W.length,se.length);Me++)Pe=ue[Me]?ue[Me]:W[Me].position,ve.fillText(se[Me],Pe[0],Pe[1]);this.setData(ve.getImageData(0,0,this.width,this.height).data)}return this};var E=I("../model/model"),G=I("../../util/color")},{"../../util/color":270,"../model/model":191}],198:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Q,$={}){var J=$.color,ee=J===void 0?[this.maxValue,0,0]:J,te=$.shape;this.checkProcessable("paintPoints",{components:3,bitDepth:[8,16],colorModel:G.RGB});for(var ae=new Z.default(te).getPoints(),ie=Math.min(this.channels,ee.length),ne=0;ne<Q.length;ne++)for(var oe=Q[ne][0],le=Q[ne][1],se=0;se<ae.length;se++){var de=ae[se][0],ue=ae[se][1];if(0<=oe+de&&0<=le+ue&&oe+de<this.width&&le+ue<this.height)for(var he=(oe+de+(le+ue)*this.width)*this.channels,ce=0;ce<ie;ce++)this.data[he+ce]=ee[ce]}return this};var G=I("../model/model"),W=I("../../util/Shape"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(W)},{"../../util/Shape":267,"../model/model":191}],199:[function(I,R,T){"use strict";function E(se){return se&&se.__esModule?se:{default:se}}function G(se){for(var de=se.map,ue=de.data,he=new Set,ce=new Map,pe=new Set,ge=[1,0,-1,0],fe=[0,1,0,-1],_e=se.minX;_e<=se.maxX;_e++)for(var be=se.minY,ye;be<=se.maxY;be++)if(ye=_e+be*de.width,ue[ye]===se.id)for(var xe=0;4>xe;xe++){var we=_e+ge[xe],ke=be+fe[xe];if(0<=we&&0<=ke&&we<de.width&&ke<de.height){var ve=we+ke*de.width;if(ue[ve]!==se.id&&!pe.has(ve)){pe.add(ve),he.add(ue[ve]);var Me=ce.get(ue[ve]);Me?ce.set(ue[ve],++Me):ce.set(ue[ve],1)}}}var Pe=Array.from(he),je=Pe.map(function(Ie){return ce.get(Ie)});return{ids:Pe,lengths:je}}function W(se){for(var de=new Set,ue=se.map,he=ue.data,ce=[0,se.height-1],pe=0,ge;pe<ce.length;pe++){ge=ce[pe];for(var fe=0,_e;fe<se.width;fe++){if(_e=(ge+se.minY)*ue.width+fe+se.minX,0<fe-se.minX&&he[_e]===se.id&&he[_e-1]!==se.id){var be=he[_e-1];de.add(be)}if(1<ue.width-fe-se.minX&&he[_e]===se.id&&he[_e+1]!==se.id){var ye=he[_e+1];de.add(ye)}}}for(var xe=[0,se.width-1],we=0,ke;we<xe.length;we++){ke=xe[we];for(var ve=0,Me;ve<se.height;ve++){if(Me=(ve+se.minY)*ue.width+ke+se.minX,0<ve-se.minY&&he[Me]===se.id&&he[Me-ue.width]!==se.id){var Pe=he[Me-ue.width];de.add(Pe)}if(1<ue.height-ve-se.minY&&he[Me]===se.id&&he[Me+ue.width]!==se.id){var je=he[Me+ue.width];de.add(je)}}}return Array.from(de)}function Z(se){var de=0,ue=se.map,he=ue.data,ce=[0];1<se.height&&(ce[1]=se.height-1);var pe=!0,ge=!1,fe;try{for(var _e=ce[Symbol.iterator](),be,ye;!(pe=(be=_e.next()).done);pe=!0){ye=be.value;for(var xe=1,we;xe<se.width-1;xe++)we=(ye+se.minY)*ue.width+xe+se.minX,he[we]===se.id&&de++}}catch(Ae){ge=!0,fe=Ae}finally{try{!pe&&_e.return&&_e.return()}finally{if(ge)throw fe}}var ke=[0];1<se.width&&(ke[1]=se.width-1);var ve=!0,Me=!1,Pe;try{for(var je=ke[Symbol.iterator](),Ie,De;!(ve=(Ie=je.next()).done);ve=!0){De=Ie.value;for(var Se=0,Ce;Se<se.height;Se++)Ce=(Se+se.minY)*ue.width+De+se.minX,he[Ce]===se.id&&de++}}catch(Ae){Me=!0,Pe=Ae}finally{try{!ve&&je.return&&je.return()}finally{if(Me)throw Pe}}return de}function Q(se){for(var de=0,ue=se.map,he=ue.data,ce=1;ce<se.width-1;ce++)for(var pe=1,ge;pe<se.height-1;pe++)ge=(pe+se.minY)*ue.width+ce+se.minX,he[ge]===se.id&&(he[ge-1]!==se.id||he[ge+1]!==se.id||he[ge-ue.width]!==se.id||he[ge+ue.width]!==se.id)&&de++;return de+se.box}function $(se){for(var de=0,ue=se.map,he=ue.data,ce=1;ce<se.width-1;ce++)for(var pe=1,ge;pe<se.height-1;pe++)ge=(pe+se.minY)*ue.width+ce+se.minX,he[ge]===se.id&&(se.externalIDs.includes(he[ge-1])||se.externalIDs.includes(he[ge+1])||se.externalIDs.includes(he[ge-ue.width])||se.externalIDs.includes(he[ge+ue.width]))&&de++;return de+se.box}function J(se){var de=[se.id],ue=se.map,he=ue.data;if(2<se.height)for(var ce=0,pe;ce<se.width;ce++)if(pe=se.minY*ue.width+ce+se.minX,de.includes(he[pe])){var ge=he[pe+ue.width];de.includes(ge)||se.boxIDs.includes(ge)||de.push(ge)}for(var fe=[,,,,],_e=1;_e<se.width-1;_e++)for(var be=1,ye;be<se.height-1;be++)if(ye=(be+se.minY)*ue.width+_e+se.minX,de.includes(he[ye])){fe[0]=he[ye-1],fe[1]=he[ye+1],fe[2]=he[ye-ue.width],fe[3]=he[ye+ue.width];for(var xe=0,we;4>xe;xe++)we=fe[xe],de.includes(we)||se.boxIDs.includes(we)||de.push(we)}return de}Object.defineProperty(T,"__esModule",{value:!0});var ee=I("../Image"),te=E(ee),ae=I("../kindNames"),ie=function(se){if(se&&se.__esModule)return se;var de={};if(null!=se)for(var ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&(de[ue]=se[ue]);return de.default=se,de}(ae),ne=I("../../util/Shape"),oe=E(ne);class le{constructor(se,de){this.map=se,this.id=de,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(se={}){var de=se.scale,ue=void 0===de?1:de,he=se.kind,ce=void 0===he?"":he,pe;return pe="contour"===ce?this.contourMask:"box"===ce?this.boxMask:"filled"===ce?this.filledMask:"center"===ce?this.centerMask:this.mask,1>ue&&(pe=pe.scale({factor:ue}),pe.parent=this.mask.parent,pe.position[0]+=this.minX,pe.position[1]+=this.minY),pe}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center?this.computed.center:this.computed.center=[this.width/2>>0,this.height/2>>0]}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){var se=this.borderIDs,de=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];for(var ue=this.internalIDs,he=0;he<se.length;he++)ue.includes(se[he])||(this.computed.externalIDs.push(se[he]),this.computed.externalLengths.push(de[he]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){var se=G(this);this.computed.borderIDs=se.ids,this.computed.borderLengths=se.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs?this.computed.boxIDs:this.computed.boxIDs=W(this)}get internalIDs(){return this.computed.internalIDs?this.computed.internalIDs:this.computed.internalIDs=J(this)}get box(){return this.computed.box?this.computed.box:this.computed.box=Z(this)}get external(){return this.computed.external?this.computed.external:this.computed.external=$(this)}get border(){return this.computed.border?this.computed.border:this.computed.border=Q(this)}get contourMask(){if(this.computed.contourMask)return this.computed.contourMask;for(var se=new te.default(this.width,this.height,{kind:ie.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),de=0;de<this.width;de++)for(var ue=0;ue<this.height;ue++)this.map.data[de+this.minX+(ue+this.minY)*this.map.width]===this.id&&(0<de&&de<this.width-1&&0<ue&&ue<this.height-1?(this.map.data[de-1+this.minX+(ue+this.minY)*this.map.width]!==this.id||this.map.data[de+1+this.minX+(ue+this.minY)*this.map.width]!==this.id||this.map.data[de+this.minX+(ue-1+this.minY)*this.map.width]!==this.id||this.map.data[de+this.minX+(ue+1+this.minY)*this.map.width]!==this.id)&&se.setBitXY(de,ue):se.setBitXY(de,ue));return this.computed.contour=se}get boxMask(){if(this.computed.boxMask)return this.computed.boxMask;for(var se=new te.default(this.width,this.height,{kind:ie.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),de=0;de<this.width;de++)se.setBitXY(de,0),se.setBitXY(de,this.height-1);for(var ue=0;ue<this.height;ue++)se.setBitXY(0,ue),se.setBitXY(this.width-1,ue);return this.computed.boxMask=se}get mask(){if(this.computed.mask)return this.computed.mask;for(var se=new te.default(this.width,this.height,{kind:ie.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),de=0;de<this.width;de++)for(var ue=0;ue<this.height;ue++)this.map.data[de+this.minX+(ue+this.minY)*this.map.width]===this.id&&se.setBitXY(de,ue);return this.computed.mask=se}get filledMask(){if(this.computed.filledMask)return this.computed.filledMask;for(var se=new te.default(this.width,this.height,{kind:ie.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),de=0;de<this.width;de++)for(var ue=0,he;ue<this.height;ue++)he=de+this.minX+(ue+this.minY)*this.map.width,this.internalIDs.includes(this.map.data[he])&&se.setBitXY(de,ue);return this.computed.filledMask=se}get centerMask(){if(this.computed.centerMask)return this.computed.centerMask;var se=new oe.default({kind:"smallCross"}).getMask();return se.parent=this.map.parent,se.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=se}get points(){if(this.computed.points)return this.computed.points;for(var se=[],de=0;de<this.height;de++)for(var ue=0,he;ue<this.width;ue++)he=(de+this.minY)*this.map.width+ue+this.minX,this.map.data[he]===this.id&&se.push([ue,de]);return this.computed.points=se}get maxLengthPoints(){if(this.computed.maxLengthPoints)return this.computed.maxLengthPoints;for(var se=0,de=void 0,ue=this.points,he=0;he<ue.length;he++)for(var ce=he+1,pe;ce<ue.length;ce++)pe=Math.pow(ue[he][0]-ue[ce][0],2)+Math.pow(ue[he][1]-ue[ce][1],2),pe>=se&&(se=pe,de=[ue[he],ue[ce]]);return this.computed.maxLengthPoints=de}get maxLength(){if(this.computed.maxLength)return this.computed.maxLength;var se=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));return this.computed.maxLength=se}get angle(){if(this.computed.angle)return this.computed.angle;var se=this.maxLengthPoints,de=180*-Math.atan2(se[0][1]-se[1][1],se[0][0]-se[1][0])/Math.PI;return this.computed.angle=de}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface}}}T.default=le},{"../../util/Shape":267,"../Image":151,"../kindNames":188}],200:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var E=I("./Roi"),G=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E);T.default=class{constructor(Z,Q){this.roiMap=Z,this.options=Q,this.roi=this.createRoi()}createRoi(){var Z=this.roiMap.data,Q={};this.roiMap.positive=0,this.roiMap.negative=0;for(var $=0;$<Z.length;$++)Z[$]&&!Q[Z[$]]&&(Q[Z[$]]=!0,0<Z[$]?this.roiMap.positive++:this.roiMap.negative++);var J={};for(var ee in Q)J[ee]=new G.default(this.roiMap,1*ee);for(var te=this.roiMap.width,ae=this.roiMap.height,ie=0;ie<te;ie++)for(var ne=0,oe;ne<ae;ne++)if(oe=ne*te+ie,0!==Z[oe]){var le=Z[oe],se=J[le];ie<se.minX&&(se.minX=ie),ie>se.maxX&&(se.maxX=ie),ne<se.minY&&(se.minY=ne),ne>se.maxY&&(se.maxY=ne),se.meanX+=ie,se.meanY+=ne,se.surface++}var de=[];for(var ue in Q)J[ue].meanX/=J[ue].surface,J[ue].meanY/=J[ue].surface,de.push(J[ue]);return de}}},{"./Roi":199}],201:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});class L{constructor(E,G){this.parent=E,this.width=E.width,this.height=E.height,this.data=G,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}}T.default=L},{}],202:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z,Q={}){function $(ue,he){var ce=0,pe=0,ge=Z.getBitXY(ue,he),fe=ge?++ae:--ie;for(oe[0]=ue,le[0]=he;ce<=pe;){var _e=oe[ce&ne],be=le[ce&ne];if(te[be*Z.width+_e]=fe,0<_e&&0===te[be*Z.width+_e-1]&&Z.getBitXY(_e-1,be)===ge&&(pe++,oe[pe&ne]=_e-1,le[pe&ne]=be,te[be*Z.width+_e-1]=-32768),0<be&&0===te[(be-1)*Z.width+_e]&&Z.getBitXY(_e,be-1)===ge&&(pe++,oe[pe&ne]=_e,le[pe&ne]=be-1,te[(be-1)*Z.width+_e]=-32768),_e<Z.width-1&&0===te[be*Z.width+_e+1]&&Z.getBitXY(_e+1,be)===ge&&(pe++,oe[pe&ne]=_e+1,le[pe&ne]=be,te[be*Z.width+_e+1]=-32768),be<Z.height-1&&0===te[(be+1)*Z.width+_e]&&Z.getBitXY(_e,be+1)===ge&&(pe++,oe[pe&ne]=_e,le[pe&ne]=be+1,te[(be+1)*Z.width+_e]=-32768),ee&&(0<_e&&0<be&&0===te[(be-1)*Z.width+_e-1]&&Z.getBitXY(_e-1,be-1)===ge&&(pe++,oe[pe&ne]=_e-1,le[pe&ne]=be-1,te[(be-1)*Z.width+_e-1]=-32768),_e<Z.width-1&&0<be&&0===te[(be-1)*Z.width+_e+1]&&Z.getBitXY(_e+1,be-1)===ge&&(pe++,oe[pe&ne]=_e+1,le[pe&ne]=be-1,te[(be-1)*Z.width+_e+1]=-32768),0<_e&&be<Z.height-1&&0===te[(be+1)*Z.width+_e-1]&&Z.getBitXY(_e-1,be+1)===ge&&(pe++,oe[pe&ne]=_e-1,le[pe&ne]=be+1,te[(be+1)*Z.width+_e-1]=-32768),_e<Z.width-1&&be<Z.height-1&&0===te[(be+1)*Z.width+_e+1]&&Z.getBitXY(_e+1,be+1)===ge&&(pe++,oe[pe&ne]=_e+1,le[pe&ne]=be+1,te[(be+1)*Z.width+_e+1]=-32768)),ce++,pe-ce>ne)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}for(var J=Q.allowCorners,ee=J!==void 0&&J,te=new Int16Array(Z.size),ae=0,ie=0,ne=65535,oe=new Uint16Array(ne+1),le=new Uint16Array(ne+1),se=0;se<Z.width;se++)for(var de=0;de<Z.height;de++)0===te[de*Z.width+se]&&$(se,de);return new W.default(Z,te)};var G=I("../RoiMap"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../RoiMap":201}],203:[function(I,R,T){"use strict";function L(ne){return ne&&ne.__esModule?ne:{default:ne}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(ne,oe={}){var le=oe.allowCorners,de=4;le!==void 0&&le&&(de=8);var ue,he,ce;if(8==de)ue=te,he=ae,ce=ie;else if(4==de)ue=$,he=J,ce=ee;else throw new RangeError("unsupported neighbours count: "+de);for(var pe=ne.size,ge=ne.width,fe=ne.height,_e=Array(pe),be=new Int16Array(pe),ye=new W.default,xe=1,we=0;we<fe;we++)for(var ke=0,ve;ke<ge;ke++)if(ve=ke+we*ge,ne.getBit(ve)){for(var Me=null,Pe=0;Pe<ce.length;Pe++){var je=ke+ue[Pe],Ie=we+he[Pe];if(0<=je&&0<=Ie&&je<ge&&Ie<fe){var Se=_e[je+Ie*ge];Se?(ce[Pe]=Se,(!Me||ce[Pe].value<Me.value)&&(Me=ce[Pe])):ce[Pe]=null}}if(!Me)_e[ve]=ye.add(xe++);else{_e[ve]=Me;for(var Ce=0;Ce<ce.length;Ce++)ce[Ce]&&ce[Ce]!==Me&&ye.union(Me,ce[Ce])}}for(var Ae=0;Ae<fe;Ae++)for(var Re=0,Be;Re<ge;Re++)Be=Re+Ae*ge,ne.getBit(Be)&&(be[Be]=ye.find(_e[Be]).value);return new Q.default(ne,be)};var G=I("ml-disjoint-set"),W=L(G),Z=I("../RoiMap"),Q=L(Z),$=[-1,0],J=[0,-1],ee=[null,null],te=[-1,-1,0,1],ae=[0,-1,-1,-1],ie=[null,null,null,null]},{"../RoiMap":201,"ml-disjoint-set":66}],204:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z={}){function Q({maxima:Ie=!0}){for(var De=1;De<le.height-1;De++)for(var Se=1,Ce;Se<le.width-1;Se++)if(Ce=Se+De*le.width,0===pe[Ce]){var Ae=Ie?le.data[Ce]:-le.data[Se+De*le.width];if(le.data[De*le.width+Se-1]>Ae)continue;if(le.data[De*le.width+Se+1]>Ae)continue;if(le.data[(De-1)*le.width+Se]>Ae)continue;if(le.data[(De+1)*le.width+Se]>Ae)continue;if(!(ee!==void 0)||ee){if(le.data[(De-1)*le.width+Se-1]>Ae)continue;if(le.data[(De-1)*le.width+Se+1]>Ae)continue;if(le.data[(De+1)*le.width+Se-1]>Ae)continue;if(le.data[(De+1)*le.width+Se+1]>Ae)continue}ce[Ce]=Ie?++ue:--he;var Re=$(Se,De,se);Re||(Ie?--ue:++he)}}function $(Ie,De){var Se=xe;ve=0,Me=1,we[0]=Ie,ke[0]=De;for(var Ce=!0;ve<Me;){var Ae=we[ve&fe],Re=ke[ve&fe];Ce&=J(Ae,Re,se),ve++}if(!Ce){for(var Be=0;Be<Me;Be++){var Te=we[Be&fe],ze=ke[Be&fe],Le=ze*le.width+Te;ce[Le]=0}xe=Se}return Ce}function J(Ie,De,Se){for(var Ce=ce[De*le.width+Ie],Ae=le.data[De*le.width+Ie],Re=De-1;Re<=De+1;Re++)for(var Be=Ie-1,Te;Be<=Ie+1;Be++)if(Te=Re*le.width+Be,0===pe[Te])switch(pe[Te]=1,ge[Te]=le.data[Te]-Ae,Se){case se:if(0===ge[Te]){if(0===Be||0===Re||Be===le.width-1||Re===le.height-1)return!1;ce[Te]=Ce,we[Me&fe]=Be,ke[Me&fe]=Re,Me++}else{if(0<ge[Te])return!1;ae!==void 0&&ae||(ce[Te]=Ce,_e[xe&fe]=Be,be[xe&fe]=Re,xe++)}break;case de:0>=ge[Te]&&(ce[Te]=Ce,_e[xe&fe]=Be,be[xe&fe]=Re,xe++);break;default:throw new Error("unreachable");}return!0}var ee=Z.allowCorner,ae=Z.onlyTop,ne=Z.invert,le=this;le.checkProcessable("fromMaxima",{components:[1]});var se=1,de=2,ue=0,he=0,ce=new Int16Array(le.size),pe=new Int8Array(le.size),ge=new Float32Array(le.size),fe=1048575,_e=new Uint16Array(fe+1),be=new Uint16Array(fe+1),ye=0,xe=0,we=new Uint16Array(fe+1),ke=new Uint16Array(fe+1),ve=0,Me=0;for(Q(le,{maxima:!(ne!==void 0&&ne)});ye<xe;){var Pe=_e[ye&fe],je=be[ye&fe];J(Pe,je,de),ye++}return new W.default(le,ce)};var G=I("../RoiMap"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../RoiMap":201}],205:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($,J={}){for(var ee=new Q.default(J),te=new Int16Array(this.size),ae=0,ie=ee.getPoints(),ne=0;ne<$.length;ne++){ae++;for(var oe=$[ne][0],le=$[ne][1],se=0;se<ie.length;se++){var de=ie[se][0],ue=ie[se][1];0<=oe+de&&0<=le+ue&&oe+de<this.width&&le+ue<this.height&&(te[oe+de+(le+ue)*this.width]=ae)}}return new W.default(this,te)};var G=I("../RoiMap"),W=L(G),Z=I("./../../../util/Shape"),Q=L(Z)},{"../RoiMap":201,"./../../../util/Shape":267}],206:[function(I,R,T){"use strict";function L(J){return J&&J.__esModule?J:{default:J}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(J={}){var ee=J.points,te=J.mask,ae=J.image,ie=J.fillMaxValue,ne=ie===void 0?this.maxValue:ie,oe=J.invert,le=oe!==void 0&&oe,se=ae||this;se.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),le=!le,ee||(ee=se.getLocalMaxima({invert:le,mask:te}));for(var de=le?0:1,ue=new Int16Array(se.size),he=se.width,ce=se.height,pe=new Q.default({comparator:(Pe,je)=>Pe[2]-je[2],strategy:Q.default.BinaryHeapStrategy}),ge=0,fe;ge<ee.length;ge++){fe=ee[ge][0]+ee[ge][1]*he,ue[fe]=ge+1;var _e=se.data[fe];(le&&_e<=ne||!le&&_e>=ne)&&pe.queue([ee[ge][0],ee[ge][1],_e])}for(;0<pe.length;)for(var be=pe.dequeue(),ye=be[0]+be[1]*he,xe=0;4>xe;xe++){var we=be[0]+$.dxs[xe],ke=be[1]+$.dys[xe];if(0<=we&&0<=ke&&we<he&&ke<ce){var ve=we+ke*he;if(!te||te.getBit(ve)===de){var Me=se.data[ve];(le&&Me<=ne||!le&&Me>=ne)&&0===ue[ve]&&(ue[ve]=ue[ye],pe.queue([be[0]+$.dxs[xe],be[1]+$.dys[xe],Me]))}}}return new W.default(se,ue)};var G=I("../RoiMap"),W=L(G),Z=I("js-priority-queue"),Q=L(Z),$=I("./../../../util/dxdy.js")},{"../RoiMap":201,"./../../../util/dxdy.js":272,"js-priority-queue":60}],207:[function(I,R,T){"use strict";function L(ge){return ge&&ge.__esModule?ge:{default:ge}}function E(ge,fe,_e,be,ye){for(var xe={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0},we=0;we<_e.length;we++){var ke=_e[we],ve=ke[0],Me=ke[1],Pe=ve+ge+(Me+fe)*be.width,je=be.data[Pe];(0<je||0>je)&&(xe.id.includes(je)?xe.surface[xe.id.indexOf(je)]+=1:(xe.id.push(je),xe.surface.push(1)))}for(var Ie=0,De;Ie<xe.id.length;Ie++)De=Math.sign(xe.id[Ie]),De===ye?xe.same+=xe.surface[Ie]:xe.opposite+=xe.surface[Ie],xe.roiSurfaceCovered[Ie]=xe.surface[Ie]/_e.length;return xe.total=xe.opposite+xe.same,xe}Object.defineProperty(T,"__esModule",{value:!0});var G=I("./creator/fromMask"),W=L(G),Z=I("./creator/fromMaskConnectedComponentLabelingAlgorithm"),Q=L(Z),$=I("./creator/fromMaxima"),J=L($),ee=I("./creator/fromWaterShed"),te=L(ee),ae=I("./creator/fromPoints"),ie=L(ae),ne=I("extend"),oe=L(ne),le=I("../Image"),se=L(le),de=I("./RoiMap"),ue=L(de),he=I("./RoiLayer"),ce=L(he);T.default=class{constructor(ge,fe={}){this._image=ge,this._options=fe,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(ge={}){var fe=(0,oe.default)({},this._options,ge),_e=J.default.call(this._image,ge);this._layers[fe.label]=new ce.default(_e,fe)}fromPoints(ge,fe={}){var _e=(0,oe.default)({},this._options,fe),be=ie.default.call(this._image,ge,fe);return this._layers[_e.label]=new ce.default(be,_e),this}putMap(ge,fe={}){var _e=new ue.default(this._image,ge),be=(0,oe.default)({},this._options,fe);return this._layers[be.label]=new ce.default(_e,be),this}fromWaterShed(ge={}){var fe=(0,oe.default)({},this._options,ge),_e=te.default.call(this._image,ge);this._layers[fe.label]=new ce.default(_e,fe)}fromMask(ge,fe={}){var _e=(0,oe.default)({},this._options,fe),be=W.default.call(this._image,ge,fe);return this._layers[_e.label]=new ce.default(be,_e),this}fromMaskConnectedComponentLabelingAlgorithm(ge,fe={}){var _e=(0,oe.default)({},this._options,fe),be=Q.default.call(this._image,ge,fe);return this._layers[_e.label]=new ce.default(be,_e),this}getMap(ge={}){var fe=(0,oe.default)({},this._options,ge);return this._assertLayerWithLabel(fe.label),this._layers[fe.label].roiMap}getRoiIds(ge={}){var fe=this.getRois(ge);if(fe){for(var _e=Array(fe.length),be=0;be<fe.length;be++)_e[be]=fe[be].id;return _e}throw new Error("ROIs not found")}getRois(ge={}){var fe=ge.label,_e=void 0===fe?this._options.label:fe,be=ge.positive,xe=ge.negative,ke=ge.minSurface,ve=void 0===ke?0:ke,Me=ge.maxSurface,Pe=void 0===Me?Number.POSITIVE_INFINITY:Me,je=ge.minWidth,Ie=void 0===je?0:je,De=ge.maxWidth,Se=void 0===De?Number.POSITIVE_INFINITY:De,Ce=ge.minHeight,Ae=void 0===Ce?0:Ce,Re=ge.maxHeight,Be=void 0===Re?Number.POSITIVE_INFINITY:Re;if(!this._layers[_e])throw new Error("getRoi: This Roi layer ("+_e+") does not exists.");for(var Te=this._layers[_e].roi,ze=Array(Te.length),Le=0,Ee=0,Ve;Ee<Te.length;Ee++)Ve=Te[Ee],(0>Ve.id&&(void 0===xe||xe)||0<Ve.id&&(void 0===be||be))&&Ve.surface>=ve&&Ve.surface<=Pe&&Ve.width>=Ie&&Ve.width<=Se&&Ve.height>=Ae&&Ve.height<=Be&&(ze[Le++]=Ve);return ze.length=Le,ze}getMasks(ge={}){for(var fe=this.getRois(ge),_e=Array(fe.length),be=0;be<fe.length;be++)_e[be]=fe[be].getMask(ge);return _e}getData(ge={}){var fe=(0,oe.default)({},this._options,ge);return this._assertLayerWithLabel(fe.label),this._layers[fe.label].roiMap.data}paint(ge={}){var fe=ge.labelProperty;this._painted||(this._painted=this._image.rgba8());var _e=this.getMasks(ge);if(fe){var be=this.getRois(ge);ge.labels=be.map(ye=>ye[fe]),ge.labelsPosition=be.map(ye=>[ye.meanX,ye.meanY])}return this._painted.paintMasks(_e,ge),this._painted}getMask(ge={}){for(var fe=new se.default(this._image.width,this._image.height,{kind:"BINARY"}),_e=this.getMasks(ge),be=0,ye;be<_e.length;be++){ye=_e[be];for(var xe=0;xe<ye.width;xe++)for(var we=0;we<ye.height;we++)ye.getBitXY(xe,we)&&fe.setBitXY(xe+ye.position[0],we+ye.position[1])}return fe}resetPainted(ge={}){var fe=ge.image;this._painted=fe?this.image.rgba8():this._image.rgba8()}mergeRoi(ge={}){var fe=(0,oe.default)({},this._options,ge),_e=ge.algorithm,be=void 0===_e?"commonBorder":_e,ye=ge.minCommonBorderLength,xe=void 0===ye?5:ye,we=this.getRois(fe),ke=new Set;switch(be.toLowerCase()){case"commonborder":for(var ve=0;ve<we.length;ve++)for(var Me=0;Me<we[ve].borderIDs.length;Me++)0!==we[ve].borderIDs[Me]&&we[ve].borderIDs[Me]<we[ve].id&&we[ve].borderLengths[Me]*xe>=we[ve].border&&ke.add([we[ve].id,we[ve].borderIDs[Me]]);break;default:throw new Error(`Unexpected algorithm: ${be}`);}for(var Pe=this.getMap(fe).data,je=0;je<Pe.length;je++)if(0!==Pe[je]){var Ie=!0,De=!1,Se=void 0;try{for(var Ce=ke[Symbol.iterator](),Ae,Re;!(Ie=(Ae=Ce.next()).done);Ie=!0)Re=Ae.value,Pe[je]===Re[0]&&(Pe[je]=Re[1])}catch(Be){De=!0,Se=Be}finally{try{!Ie&&Ce.return&&Ce.return()}finally{if(De)throw Se}}}return this.putMap(Pe,fe),this}findCorrespondingRoi(ge,fe={}){for(var _e=this.getRois(fe),be=[],ye=0;ye<_e.length;ye++){var xe=_e[ye],we=xe.minX,ke=xe.minY,ve=xe.points,Me=Math.sign(xe.id),Pe=E(we,ke,ve,ge,Me);be.push(Pe)}return be}_assertLayerWithLabel(ge){if(!this._layers[ge])throw new Error(`no layer with label ${ge}`)}}},{"../Image":151,"./RoiLayer":200,"./RoiMap":201,"./creator/fromMask":202,"./creator/fromMaskConnectedComponentLabelingAlgorithm":203,"./creator/fromMaxima":204,"./creator/fromPoints":205,"./creator/fromWaterShed":206,extend:34}],208:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[G.RGB]});for(var Q=Z.default.createFrom(this,{components:4,colorModel:G.CMYK}),$=0,J=this.data,ee=0;ee<J.length;ee+=this.channels){var te=J[ee],ae=J[ee+1],ie=J[ee+2],ne=Math.min(this.maxValue-te,this.maxValue-ae,this.maxValue-ie),oe=(this.maxValue-te-ne)/(1-ne/this.maxValue),le=(this.maxValue-ae-ne)/(1-ne/this.maxValue),se=(this.maxValue-ie-ne)/(1-ne/this.maxValue);Q.data[$++]=oe,Q.data[$++]=le,Q.data[$++]=se,Q.data[$++]=ne,this.alpha&&(Q.data[$++]=J[ee+3])}return Q};var G=I("../model/model"),W=I("../Image"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(W)},{"../Image":151,"../model/model":191}],209:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z=8){if(this.checkProcessable("colorDepth",{bitDepth:[8,16]}),![8,16].includes(Z))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===Z)return this.clone();var Q=W.default.createFrom(this,{bitDepth:Z});if(8===Z)for(var $=0;$<this.data.length;$++)Q.data[$]=this.data[$]>>8;else for(var J=0;J<this.data.length;J++)Q.data[J]=this.data[J]<<8|this.data[J];return Q};var G=I("../Image"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../Image":151}],210:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z={}){var Q=Z.x,$=void 0===Q?0:Q,J=Z.y,ee=void 0===J?0:J,te=Z.width,ae=void 0===te?this.width-$:te,ie=Z.height,ne=void 0===ie?this.height-ee:ie;if(this.checkProcessable("max",{bitDepth:[8,16]}),$=Math.round($),ee=Math.round(ee),ae=Math.round(ae),ne=Math.round(ne),$>this.width-1||ee>this.height-1)throw new RangeError(`crop: origin (x:${$}, y:${ee}) out of range (${this.width-1}; ${this.height-1})`);if(0>=ae||0>=ne)throw new RangeError(`crop: width and height (width:${ae}; height:${ne}) must be positive numbers`);if(0>$||0>ee)throw new RangeError(`crop: x and y (x:${$}, y:${ee}) must be positive numbers`);if(ae>this.width-$||ne>this.height-ee)throw new RangeError(`crop: (x: ${$}, y:${ee}, width:${ae}, height:${ne}) size is out of range`);for(var oe=W.default.createFrom(this,{width:ae,height:ne}),le=ae*this.channels,se=ee+ne,de=0,ue=$*this.channels,he=ee;he<se;he++)for(var ce=he*this.width*this.channels+ue,pe=ce+le;ce<pe;ce++)oe.data[de++]=this.data[ce];return oe};var G=I("../Image"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../Image":151}],211:[function(I,R,T){"use strict";function E(Q,$,J){for(var ee=0;ee<Q.width;ee++)for(var te=0;te<Q.height;te++)if(Q.getValueXY(ee,te,J)>=$)return ee;return-1}function G(Q,$,J,ee){for(var te=0;te<Q.height;te++)for(var ae=ee;ae<Q.width;ae++)if(Q.getValueXY(ae,te,J)>=$)return te;return-1}function W(Q,$,J,ee){for(var te=Q.height-1;0<=te;te--)for(var ae=ee;ae<Q.width;ae++)if(Q.getValueXY(ae,te,J)>=$)return te;return-1}function Z(Q,$,J,ee,te,ae){for(var ie=Q.width-1;ie>=ee;ie--)for(var ne=te;ne<=ae;ne++)if(Q.getValueXY(ie,ne,J)>=$)return ie;return-1}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Q={}){this.checkProcessable("cropAlpha",{alpha:1});var $=Q.threshold,J=$===void 0?this.maxValue:$,ee=E(this,J,this.components);if(-1===ee)throw new Error("Could not find new dimensions. Threshold may be too high.");var te=G(this,J,this.components,ee),ae=W(this,J,this.components,ee),ie=Z(this,J,this.components,ee,te,ae);return this.crop({x:ee,y:te,width:ie-ee+1,height:ae-te+1})}},{}],212:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($={}){var J=$.algorithm,ee=J===void 0?"luma709":J,te=$.keepAlpha,ae=te!==void 0&&te,ie=$.mergeAlpha,ne=!(ie!==void 0)||ie,oe=$.allowGrey,se={bitDepth:[8,16],alpha:[0,1]};oe!==void 0&&oe||(se.colorModel=[Z.RGB],se.components=[3]),this.checkProcessable("grey",se),1===this.components&&(ee="red"),ae&=this.alpha,ne&=this.alpha,ae&&(ne=!1);var de=W.default.createFrom(this,{components:1,alpha:ae,colorModel:null}),ue=Q.methods[ee.toLowerCase()];if(!ue)throw new Error("Unsupported grey algorithm: "+ee);for(var he=0,ce=0;ce<this.data.length;ce+=this.channels)ne?de.data[he++]=ue(this.data,ce,this)*this.data[ce+this.components]/this.maxValue:(de.data[he++]=ue(this.data,ce,this),de.alpha&&(de.data[he++]=this.data[ce+this.components]));return de};var G=I("../Image"),W=function($){return $&&$.__esModule?$:{default:$}}(G),Z=I("../model/model"),Q=I("./greyAlgorithms")},{"../Image":151,"../model/model":191,"./greyAlgorithms":213}],213:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.methods={luma709(G,W){return 6966*G[W]+23436*G[W+1]+2366*G[W+2]>>15},luma601(G,W){return 9798*G[W]+19235*G[W+1]+3735*G[W+2]>>15},maximum(G,W){return Math.max(G[W],G[W+1],G[W+2])},minimum(G,W){return Math.min(G[W],G[W+1],G[W+2])},average(G,W){return(G[W]+G[W+1]+G[W+2])/3>>0},minmax(G,W){return(Math.max(G[W],G[W+1],G[W+2])+Math.min(G[W],G[W+1],G[W+2]))/2},red(G,W){return G[W]},green(G,W){return G[W+1]},blue(G,W){return G[W+2]},cyan(G,W,Z){var Q=L.black(G,W,Z);return(Z.maxValue-G[0]-Q)/(1-Q/Z.maxValue)>>0},magenta(G,W,Z){var Q=L.black(G,W,Z);return(Z.maxValue-G[1]-Q)/(1-Q/Z.maxValue)>>0},yellow(G,W,Z){var Q=L.black(G,W,Z);return(Z.maxValue-G[2]-Q)/(1-Q/Z.maxValue)>>0},black(G,W,Z){return Math.min(Z.maxValue-G[W],Z.maxValue-G[W+1],Z.maxValue-G[W+2])},hue(G,W,Z){var Q=L.min(G,W),$=L.max(G,W);if($===Q)return 0;var J=0,ee=$-Q;switch($){case G[W]:J=(G[W+1]-G[W+2])/ee+(G[W+1]<G[W+2]?6:0);break;case G[W+1]:J=(G[W+2]-G[W])/ee+2;break;case G[W+2]:J=(G[W]-G[W+1])/ee+4;break;default:throw new Error("unreachable");}return J/6*Z.maxValue>>0},saturation(G,W,Z){var Q=L.min(G,W),$=L.max(G,W);return 0===$?0:($-Q)/$*Z.maxValue},lightness(G,W){var Z=L.min(G,W),Q=L.max(G,W);return(Q+Z)/2}};Object.defineProperty(L,"luminosity",{enumerable:!1,value:L.lightness}),Object.defineProperty(L,"luminance",{enumerable:!1,value:L.lightness}),Object.defineProperty(L,"min",{enumerable:!1,value:L.minimum}),Object.defineProperty(L,"max",{enumerable:!1,value:L.maximum}),Object.defineProperty(L,"brightness",{enumerable:!1,value:L.maximum});T.names=Object.keys(L)},{}],214:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[G.RGB]});for(var Q=Z.default.createFrom(this,{colorModel:G.HSL}),$=Math.floor(this.maxValue/2),J=0,ee=this.data,te=0;te<ee.length;te+=this.channels){var ae=ee[te],ie=ee[te+1],ne=ee[te+2],oe=Math.max(ae,ie,ne),le=Math.min(ae,ie,ne),se=0,de=0,ue=(oe+le)/2;if(oe!==le){var he=oe-le;switch(de=ue>$?he/(2-oe-le):he/(oe+le),oe){case ae:se=(ie-ne)/he+(ie<ne?6:0);break;case ie:se=(ne-ae)/he+2;break;case ne:se=(ae-ie)/he+4;break;default:throw new Error("unreachable");}se/=6}Q.data[J++]=se*this.maxValue,Q.data[J++]=de*this.maxValue,Q.data[J++]=ue,this.alpha&&(Q.data[J++]=ee[te+3])}return Q};var G=I("../model/model"),W=I("../Image"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(W)},{"../Image":151,"../model/model":191}],215:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[G.RGB]});for(var Q=Z.default.createFrom(this,{colorModel:G.HSV}),$=0,J=this.data,ee=0;ee<J.length;ee+=this.channels){var te=J[ee],ae=J[ee+1],ie=J[ee+2],ne=Math.min(te,ae,ie),oe=Math.max(te,ae,ie),le=oe-ne,se=0,de=0===oe?0:le/oe;if(oe!==ne){switch(oe){case te:se=(ae-ie)/le+(ae<ie?6:0);break;case ae:se=(ie-te)/le+2;break;case ie:se=(te-ae)/le+4;break;default:throw new Error("unreachable");}se/=6}Q.data[$++]=se*this.maxValue,Q.data[$++]=de*this.maxValue,Q.data[$++]=oe,this.alpha&&(Q.data[$++]=J[ee+3])}return Q};var G=I("../model/model"),W=I("../Image"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(W)},{"../Image":151,"../model/model":191}],216:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){for(var G=0,W=0;W<E.length;W++)if(0!==E[W]){G=W;break}for(var Z=E.length-1,Q=E.length-1;Q>=G;Q--)if(0!==E[Q]){Z=Q;break}for(var $=1/(Z-G),J=Array(E.length),ee=0,te=0,ae=G;ae<E.length;ae++)ee+=ae*E[ae],te+=E[ae],J[ae]=ee/te;var ie=Array(E.length);ee=te=0;for(var ne=Z;0<ne;ne--)ee+=ne*E[ne],te+=E[ne],ie[ne-1]=ee/te;for(var oe=-1,le=Number.MAX_VALUE,se=0;se<E.length;se++){for(var de=0,ue=void 0,he=0;he<=se;he++)ue=1/(1+$*Math.abs(he-J[se])),1e-6>ue||0.999999<ue||(de+=E[he]*(-ue*Math.log(ue)-(1-ue)*Math.log(1-ue)));for(var ce=se+1;ce<E.length;ce++)ue=1/(1+$*Math.abs(ce-ie[se])),1e-6>ue||0.999999<ue||(de+=E[ce]*(-ue*Math.log(ue)-(1-ue)*Math.log(1-ue)));de<le&&(le=de,oe=se)}return oe}},{}],217:[function(I,R,T){"use strict";function E(G){for(var W=!1,Z=0,Q=1;Q<G.length-1;Q++)if(G[Q-1]<G[Q]&&G[Q+1]<G[Q]&&(Z++,2<Z))return!1;return 2==Z&&(W=!0),W}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G){for(var W=G.slice(),Z=0;!E(W);){for(var Q=0,$=0,J=W[0],ee=0;ee<G.length-1;ee++)Q=$,$=J,J=W[ee+1],W[ee]=(Q+$+J)/3;if(W[G.length-1]=($+J)/3,Z++,1e4<Z)throw new Error("Intermodes Threshold not found after 10000 iterations")}for(var te=0,ae=1;ae<G.length-1;ae++)W[ae-1]<W[ae]&&W[ae+1]<W[ae]&&(te+=ae);return Math.floor(te/2)}},{}],218:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){for(var G,W,Z,Q,$=0,J=1;J<E.length;J++)if(0<E[J]){$=J+1;break}for(;;){G=0,Z=0;for(var ee=0;ee<$;ee++)Z+=E[ee],G+=E[ee]*ee;Q=0,W=0;for(var te=$+1;te<E.length;te++)W+=E[te],Q+=E[te]*te;if(0<Z&&0<W&&(G/=Z,Q/=W,$===Math.round((G+Q)/2)))break;if($++,$>E.length-2)throw new Error("Threshold not found")}return $}},{}],219:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var W,Z,Q,$,J,ee,te,ae,ie,ne,oe,le;oe=0.5,ne=0;for(var se=0;se<E.length;se++)ne+=se*E[se];ne/=G,te=ne;do{ee=te,W=0|ee+0.5,Z=0,$=0;for(var de=0;de<=W;de++)Z+=de*E[de],$+=E[de];ae=0===$?0:Z/$,Q=0,J=0;for(var ue=W+1;ue<E.length;ue++)Q+=ue*E[ue],J+=E[ue];ie=0===J?0:Q/J,le=(ae-ie)/(Math.log(ae)-Math.log(ie)),te=le<-Number.EPSILON?0|le-0.5:0|le+0.5}while(Math.abs(te-ee)>oe);return W}},{}],220:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($={}){var J=$.algorithm,ee=void 0===J?"threshold":J,te=$.threshold,ae=void 0===te?0.5:te,ie=$.useAlpha,oe=$.invert,le=void 0!==oe&&oe;if(this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),"threshold"===ee)ae=(0,Q.getThreshold)(ae,this.maxValue);else{var se=Z.methods[ee.toLowerCase()];if(se){var de=this.getHistogram();ae=se(de,this.size)}else throw new Error("mask transform unknown algorithm: "+ee)}var ue=new W.default(this.width,this.height,{kind:"BINARY",parent:this}),he=0;if(this.alpha&&(void 0===ie||ie))for(var ce=0,pe;ce<this.data.length;ce+=this.channels)pe=this.data[ce]+(this.maxValue-this.data[ce])*(this.maxValue-this.data[ce+1])/this.maxValue,(le&&pe<=ae||!le&&pe>=ae)&&ue.setBit(he),he++;else for(var ge=0;ge<this.data.length;ge+=this.channels)(le&&this.data[ge]<=ae||!le&&this.data[ge]>=ae)&&ue.setBit(he),he++;return ue};var G=I("../../Image"),W=function($){return $&&$.__esModule?$:{default:$}}(G),Z=I("./maskAlgorithms"),Q=I("../../../util/converter")},{"../../../util/converter":271,"../../Image":151,"./maskAlgorithms":221}],221:[function(I,R,T){"use strict";function L(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}}Object.defineProperty(T,"__esModule",{value:!0}),T.names=T.methods=void 0;var E=I("./huang"),G=L(E),W=I("./intermodes"),Z=L(W),Q=I("./isodata"),$=L(Q),J=I("./li"),ee=L(J),te=I("./maxEntropy"),ae=L(te),ie=I("./mean"),ne=L(ie),oe=I("./minError"),le=L(oe),se=I("./minimum"),de=L(se),ue=I("./moments"),he=L(ue),ce=I("./otsu"),pe=L(ce),ge=I("./percentile"),fe=L(ge),_e=I("./renyiEntropy.js"),be=L(_e),ye=I("./shanbhag"),xe=L(ye),we=I("./triangle"),ke=L(we),ve=I("./yen"),Me=L(ve),Pe=T.methods={huang:G.default,intermodes:Z.default,isodata:$.default,li:ee.default,maxentropy:ae.default,mean:ne.default,minerror:le.default,minimum:de.default,moments:he.default,otsu:pe.default,percentile:fe.default,renyientropy:be.default,shanbhag:xe.default,triangle:ke.default,yen:Me.default},je=T.names=["threshold"].concat(Object.keys(Pe))},{"./huang":216,"./intermodes":217,"./isodata":218,"./li":219,"./maxEntropy":222,"./mean":223,"./minError":224,"./minimum":225,"./moments":226,"./otsu":227,"./percentile":228,"./renyiEntropy.js":229,"./shanbhag":230,"./triangle":231,"./yen":232}],222:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){for(var W=Array(E.length),Z=0;Z<E.length;Z++)W[Z]=E[Z]/G;var Q=Array(E.length),$=Array(E.length);Q[0]=W[0],$[0]=1-Q[0];for(var J=1;J<E.length;J++)Q[J]=Q[J-1]+W[J],$[J]=1-Q[J];for(var ee=0,te=0;te<E.length;te++)if(Math.abs(Q[te])>=Number.EPSILON){ee=te;break}for(var ae=E.length-1,ie=E.length-1;ie>=ee;ie--)if(Math.abs($[ie])>=Number.EPSILON){ae=ie;break}for(var ne=-1,oe=void 0,le=Number.MIN_VALUE,se=void 0,de=void 0,ue=ee;ue<=ae;ue++){se=0;for(var he=0;he<=ue;he++)0!==E[he]&&(se-=W[he]/Q[ue]*Math.log(W[he]/Q[ue]));de=0;for(var ce=ue+1;ce<E.length;ce++)0!==E[ce]&&(de-=W[ce]/$[ue]*Math.log(W[ce]/$[ue]));oe=se+de,le<oe&&(le=oe,ne=ue)}return ne}},{}],223:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){for(var W=0,Z=0;Z<E.length;Z++)W+=Z*E[Z];return Math.floor(W/G)}},{}],224:[function(I,R,T){"use strict";function E(Z,Q){for(var $=0,J=0;J<=Q;J++)$+=Z[J];return $}function G(Z,Q){for(var $=0,J=0;J<=Q;J++)$+=J*Z[J];return $}function W(Z,Q){for(var $=0,J=0;J<=Q;J++)$+=J*J*Z[J];return $}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z,Q){for(var $,J=-2,ee,te,ae,ie,ne,oe,le,se,de,ue,he,ce=0,pe=0;pe<Z.length;pe++)ce+=pe*Z[pe];for(ce/=Q,$=ce;$!==J;){var ge=E(Z,$),fe=E(Z,Z.length-1),_e=G(Z,$),be=G(Z,Z.length-1),ye=W(Z,$),xe=W(Z,Z.length-1);if(ee=_e/ge,te=(be-_e)/(fe-ge),ae=ge/fe,ie=(fe-ge)/fe,ne=ye/ge-ee*ee,oe=(xe-ye)/(fe-ge)-te*te,le=1/ne-1/oe,se=ee/ne-te/oe,de=ee*ee/ne-te*te/oe+Math.log10(ne*(ie*ie)/(oe*(ae*ae))),ue=se*se-le*de,0>ue)return $;J=$,he=(se+Math.sqrt(ue))/le,$=isNaN(he)?J:Math.floor(he)}return $}},{}],225:[function(I,R,T){"use strict";function E(Z){for(var Q=Array(Z.length),$=1;$<Z.length-1;$++)Q[$]=(Z[$-1]+Z[$]+Z[$+1])/3;return Q[0]=(Z[0]+Z[1])/3,Q[Z.length-1]=(Z[Z.length-2]+Z[Z.length-1])/3,Q}function G(Z,Q){for(var $=void 0,J=1;J<Q;J++)if(Z[J-1]>Z[J]&&Z[J+1]>=Z[J]){$=J;break}return $}function W(Z){for(var Q=Z.length,$=!1,J=0,ee=1;ee<Q-1;ee++)if(Z[ee-1]<Z[ee]&&Z[ee+1]<Z[ee]&&(J++,2<J))return!1;return 2==J&&($=!0),$}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){if(2>Z.length)return 0;for(var Q=0,$=-1,J=-1,ee=Array(Z.length),te=0;te<Z.length;te++)ee[te]=Z[te],0<Z[te]&&(J=te);for(;!W(ee);)if(ee=E(ee),Q++,1e4<Q)return $;return $=G(ee,J),$}},{}],226:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){for(var W=1,Z=0,Q=0,$=0,J=0,ee,te,ae,ie,ne,oe,le=-1,se=E.length,de=Array(se),ue=0;ue<se;ue++)de[ue]=E[ue]/G;for(var he=0;he<se;he++)Z+=he*de[he],Q+=he*he*de[he],$+=he*he*he*de[he];te=W*Q-Z*Z,ae=(-Q*Q+Z*$)/te,ie=(W*-$+Q*Z)/te,ne=0.5*(-ie-Math.sqrt(ie*ie-4*ae)),oe=0.5*(-ie+Math.sqrt(ie*ie-4*ae)),ee=(oe-Z)/(oe-ne);for(var ce=0;ce<se;ce++)if(J+=de[ce],J>ee){le=ce;break}return le}},{}],227:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){for(var W=0,Z=0,Q=0,$=0,J,ee,te=0,ae=0,ie=0,ne=1;ne<E.length;++ne)W+=ne*E[ne];for(var oe=1;oe<E.length;++oe)if(Q+=E[oe],0!=Q){if($=G-Q,0==$)break;Z+=oe*E[oe],J=Z/Q,ee=(W-Z)/$,ae=Q*$*(J-ee)*(J-ee),ae>=te&&(ie=oe,te=ae)}return ie}},{}],228:[function(I,R,T){"use strict";function E(G,W){for(var Z=0,Q=0;Q<=W;Q++)Z+=G[Q];return Z}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G){for(var W=-1,Q=Array(G.length),$=E(G,G.length-1),J=1,ee=0;ee<G.length;ee++)Q[ee]=Math.abs(E(G,ee)/$-0.5),Q[ee]<J&&(J=Q[ee],W=ee);return W}},{}],229:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G,W){for(var J=Array(G.length),ee=Array(G.length),te=Array(G.length),ae=0,ie=0,ne=0,oe=0,le=0,se=0,ue=1/(1-0.5),ce=1/(1-2),pe=0,Z,Q,$;pe<G.length;pe++)J[pe]=G[pe]/W;ee[0]=J[0],te[0]=1-ee[0];for(var ge=1;ge<G.length;ge++)ee[ge]=ee[ge-1]+J[ge],te[ge]=1-ee[ge];Q=0;for(var fe=0;fe<G.length;fe++)if(Math.abs(ee[fe])>=Number.EPSILON){Q=fe;break}$=G.length-1;for(var _e=G.length-1;_e>=Q;_e--)if(Math.abs(te[_e])>=Number.EPSILON){$=_e;break}for(var be=Q;be<=$;be++){for(var ye=0,xe=0,we=0,ke=0;ke<=be;ke++)0!==G[ke]&&(ye-=J[ke]/ee[be]*Math.log(J[ke]/ee[be])),xe+=Math.sqrt(J[ke]/ee[be]),we+=J[ke]*J[ke]/(ee[be]*ee[be]);for(var ve=0,Me=0,Pe=0,je=be+1;je<G.length;je++)0!==G[je]&&(ve-=J[je]/te[be]*Math.log(J[je]/te[be])),Me+=Math.sqrt(J[je]/te[be]),Pe+=J[je]*J[je]/(te[be]*te[be]);var Ie=ye+ve,De=ue*(0<xe*Me?Math.log(xe*Me):0),Se=ce*(0<we*Pe?Math.log(we*Pe):0);Ie>oe&&(oe=Ie,ae=be),De>le&&(le=De,ie=be),Se>se&&(se=Se,ne=be)}var Ce=[ae,ie,ne];Ce.sort(E.asc);var Ae=5>=Math.abs(Ce[0]-Ce[1])?5>=Math.abs(Ce[1]-Ce[2])?[1,2,1]:[0,1,3]:5>=Math.abs(Ce[1]-Ce[2])?[3,1,0]:[1,2,1];var Re=ee[Ce[2]]-ee[Ce[0]];return Z=Math.round(Ce[0]*(ee[Ce[0]]+0.25*Re*Ae[0])+0.25*Ce[1]*Re*Ae[1]+Ce[2]*(te[Ce[2]]+0.25*Re*Ae[2])),Z};var E=I("num-sort")},{"num-sort":119}],230:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){for(var W=Array(E.length),Z=0;Z<E.length;Z++)W[Z]=E[Z]/G;var Q=Array(E.length),$=Array(E.length);Q[0]=W[0],$[0]=1-Q[0];for(var J=1;J<E.length;J++)Q[J]=Q[J-1]+W[J],$[J]=1-Q[J];for(var ee=0,te=0;te<E.length;te++)if(Math.abs(Q[te])>=Number.EPSILON){ee=te;break}for(var ae=E.length-1,ie=E.length-1;ie>=ee;ie--)if(Math.abs($[ie])>=Number.EPSILON){ae=ie;break}for(var ne=-1,oe=Number.MAX_VALUE,le=void 0,se=void 0,de=void 0,ue=void 0,he=ee;he<=ae;he++){de=0,le=0.5/Q[he];for(var ce=1;ce<=he;ce++)de-=W[ce]*Math.log(1-le*Q[ce-1]);de*=le,ue=0,le=0.5/$[he];for(var pe=he+1;pe<E.length;pe++)ue-=W[pe]*Math.log(1-le*$[pe]);ue*=le,se=Math.abs(de-ue),se<oe&&(oe=se,ne=he)}return ne}},{}],231:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){for(var G=0,W=0,Z=0,Q=0,$=0;$<E.length;$++)if(0<E[$]){G=$;break}0<G&&G--;for(var J=E.length-1;0<J;J--)if(0<E[J]){Q=J;break}Q<E.length-1&&Q++;for(var ee=0;ee<E.length;ee++)E[ee]>W&&(Z=ee,W=E[ee]);var te=!1;if(Z-G<Q-Z){te=!0;for(var ae=0,ie=E.length-1,ne;ae<ie;)ne=E[ae],E[ae]=E[ie],E[ie]=ne,ae++,ie--;G=E.length-1-Q,Z=E.length-1-Z}if(G===Z)return G;var oe,le,se;oe=E[Z],le=G-Z,se=Math.sqrt(oe*oe+le*le),oe/=se,le/=se,se=oe*G+le*E[G];for(var de=G,ue=0,he=G+1,ce;he<=Z;he++)ce=oe*he+le*E[he]-se,ce>ue&&(de=he,ue=ce);if(de--,te){for(var pe=0,ge=E.length-1,fe;pe<ge;)fe=E[pe],E[pe]=E[ge],E[ge]=fe,pe++,ge--;return E.length-1-de}return de}},{}],232:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){for(var W=Array(E.length),Z=0;Z<E.length;Z++)W[Z]=E[Z]/G;var Q=Array(E.length);Q[0]=W[0];for(var $=1;$<E.length;$++)Q[$]=Q[$-1]+W[$];var J=Array(E.length);J[0]=W[0]*W[0];for(var ee=1;ee<E.length;ee++)J[ee]=J[ee-1]+W[ee]*W[ee];var te=Array(E.length);te[E.length-1]=0;for(var ae=E.length-2;0<=ae;ae--)te[ae]=te[ae+1]+W[ae+1]*W[ae+1];for(var ie=-1,ne=Number.MIN_VALUE,oe=void 0,le=0;le<E.length;le++)oe=-1*(0<J[le]*te[le]?Math.log(J[le]*te[le]):0)+2*(0<Q[le]*(1-Q[le])?Math.log(Q[le]*(1-Q[le])):0),oe>ne&&(ne=oe,ie=le);return ie}},{}],233:[function(I,R,T){"use strict";function L(ee){return ee&&ee.__esModule?ee:{default:ee}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(ee={}){var te=ee.size,ae=void 0===te?0:te,ie=ee.algorithm,ne=void 0===ie?"copy":ie,oe=ee.color;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===ne){if(oe.length!==this.channels)throw new Error("pad: the color array must have the same length as the number of channels. Here: "+this.channels);for(var le=0;le<oe.length;le++)0===oe[le]&&(oe[le]=1e-3)}else oe=(0,Q.default)(this.channels,null);Array.isArray(ae)||(ae=[ae,ae]);var se=this.width+2*ae[0],de=this.height+2*ae[1],ue=this.channels,he=W.default.createFrom(this,{width:se,height:de});(0,J.default)(this,he,ae[0],ae[1]);for(var ce=ae[0];ce<se-ae[0];ce++)for(var pe=0,ge;pe<ue;pe++){ge=oe[pe]||he.data[(ae[1]*se+ce)*ue+pe];for(var fe=0;fe<ae[1];fe++)he.data[(fe*se+ce)*ue+pe]=ge;ge=oe[pe]||he.data[((de-ae[1]-1)*se+ce)*ue+pe];for(var _e=de-ae[1];_e<de;_e++)he.data[(_e*se+ce)*ue+pe]=ge}for(var be=0;be<de;be++)for(var ye=0,xe;ye<ue;ye++){xe=oe[ye]||he.data[(be*se+ae[0])*ue+ye];for(var we=0;we<ae[0];we++)he.data[(be*se+we)*ue+ye]=xe;xe=oe[ye]||he.data[(be*se+se-ae[0]-1)*ue+ye];for(var ke=se-ae[0];ke<se;ke++)he.data[(be*se+ke)*ue+ye]=xe}return he};var G=I("../Image"),W=L(G),Z=I("new-array"),Q=L(Z),$=I("../utility/copy"),J=L($)},{"../Image":151,"../utility/copy":240,"new-array":118}],234:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){return new W.default(this.width,this.height,this.getRGBAData(),{kind:"RGBA"})};var G=I("../Image"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../Image":151}],235:[function(I,R,T){"use strict";function L(te){return te&&te.__esModule?te:{default:te}}function G(){for(var te=$.default.createFrom(this,{width:this.height,height:this.width}),ae=te.height-1,ie=0;ie<this.height;ie++)for(var ne=0;ne<this.width;ne++)for(var oe=0;oe<this.channels;oe++)te.setValueXY(ie,ae-ne,oe,this.getValueXY(ne,ie,oe));return te}function W(){for(var te=$.default.createFrom(this,{width:this.height,height:this.width}),ae=te.width-1,ie=0;ie<this.height;ie++)for(var ne=0;ne<this.width;ne++)for(var oe=0;oe<this.channels;oe++)te.setValueXY(ae-ie,ne,oe,this.getValueXY(ne,ie,oe));return te}function Z(){for(var te=$.default.createFrom(this),ae=te.width-1,ie=te.height-1,ne=0;ne<this.height;ne++)for(var oe=0;oe<this.width;oe++)for(var le=0;le<this.channels;le++)te.setValueXY(ae-oe,ie-ne,le,this.getValueXY(oe,ne,le));return te}Object.defineProperty(T,"__esModule",{value:!0}),T.rotate=function(te,ae){if("number"!=typeof te)throw new TypeError("angle must be a number");switch(0>te&&(te=360*Math.ceil(-te/360)+te),te%360){case 0:return this.clone();case 90:return W.call(this);case 180:return Z.call(this);case 270:return G.call(this);default:return ee.default.call(this,te,ae);}},T.rotateLeft=G,T.rotateRight=W;var Q=I("../Image"),$=L(Q),J=I("./rotateFree"),ee=L(J)},{"../Image":151,"./rotateFree":236}],236:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z,Q={}){var $=Q.interpolation,J=$===void 0?"none":$,ee=Q.width,te=ee===void 0?this.width:ee,ae=Q.height,ie=ae===void 0?this.height:ae,ne=Z*Math.PI/180,oe=Math.floor(Math.abs(te*Math.cos(ne))+Math.abs(ie*Math.sin(ne))),le=Math.floor(Math.abs(ie*Math.cos(ne))+Math.abs(te*Math.sin(ne))),se=W.default.createFrom(this,{width:oe,height:le}),de=Math.cos(-ne),ue=Math.sin(-ne),he=oe/2,ce=le/2;0==oe%2?(he-=0.5,0==le%2?ce-=0.5:ce=Math.floor(ce)):(he=Math.floor(he),0==le%2?ce-=0.5:ce=Math.floor(ce));var pe=Math.floor(te/2-he),ge=Math.floor(ie/2-ce);if("bilinear"===J){for(var fe=this.width*this.channels,_e=0;_e<oe;_e+=1)for(var be=0;be<le;be+=1)for(var ye=(_e-he)*de-(be-ce)*ue+he+pe,xe=(be-ce)*de+(_e-he)*ue+ce+ge,we=0|ye,ke=0|xe,ve=ye-we,Me=xe-ke,Pe=0;Pe<this.channels;Pe++)if(0>ye||ye>=te||0>xe||xe>=ie)this.alpha?se.setValueXY(_e,be,Pe,this.alpha):se.setValueXY(_e,be,Pe,this.maxValue);else{var je=(ke*this.width+we)*this.channels+Pe,Ie=this.data[je],De=this.data[je+this.channels],Se=this.data[je+fe],Ce=this.data[je+fe+this.channels];se.setValueXY(_e,be,Pe,0|Ie+ve*(De-Ie)+Me*(Se-Ie)+ve*Me*(Ie-De-Se+Ce))}}else for(var Re=0;Re<oe;Re+=1)for(var Be=0;Be<le;Be+=1)for(var Te=0;Te<this.channels;Te++){var ze=Math.round((Re-he)*de-(Be-ce)*ue+he)+pe,Le=Math.round((Be-ce)*de+(Re-he)*ue+ce)+ge;0>ze||ze>=te||0>Le||Le>=ie?this.alpha?se.setValueXY(Re,Be,Te,this.alpha):se.setValueXY(Re,Be,Te,this.maxValue):se.setValueXY(Re,Be,Te,this.getValueXY(ze,Le,Te))}return se};var G=I("../Image"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../Image":151}],237:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G,W){var Z=this.width/G,Q=this.height/W;if(1<this.bitDepth)for(var $=0,J;$<G;$++){J=Math.floor(($+0.5)*Z);for(var ee=0,te;ee<W;ee++){te=Math.floor((ee+0.5)*Q);for(var ae=0;ae<this.channels;ae++)E.setValueXY($,ee,ae,this.getValueXY(J,te,ae))}}else for(var ie=0,ne;ie<G;ie++){ne=Math.floor((ie+0.5)*Z);for(var oe=0,le;oe<W;oe++)le=Math.floor((oe+0.5)*Q),this.getBitXY(ne,le)&&E.setBitXY(ie,oe)}}},{}],238:[function(I,R,T){"use strict";function L(J){return J&&J.__esModule?J:{default:J}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(J={}){var ee=J.factor,te=void 0===ee?1:ee,ae=J.algorithm,ie=void 0===ae?"nearestNeighbor":ae,ne=J.preserveAspectRatio,oe=void 0===ne||ne,le=J.width,se=J.height;le||(se&&oe?le=Math.round(se*(this.width/this.height)):le=this.width),se||(oe?se=Math.round(le*(this.height/this.width)):se=this.height);var de=(0,$.factorDimensions)(te,le,se);if(le=de.width,se=de.height,le===this.width&&se===this.height){var ue=this.clone();return ue.position=[0,0],ue}var he=Math.round((this.width-le)/2),ce=Math.round((this.height-se)/2),pe=W.default.createFrom(this,{width:le,height:se,position:[he,ce]});switch(ie.toLowerCase()){case"nearestneighbor":case"nearestneighbour":Q.default.call(this,pe,le,se);break;default:throw new Error("Unsupported scale algorithm: "+ie);}return pe};var G=I("../../Image"),W=L(G),Z=I("./nearestNeighbor"),Q=L(Z),$=I("../../../util/converter")},{"../../../util/converter":271,"../../Image":151,"./nearestNeighbor":237}],239:[function(I,R,T){"use strict";function G(Q){return(Q[0]+Q[1]+Q[2])/3}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Q=G,$={}){var J=$.mergeAlpha,ee=J!==void 0&&J,te=$.keepAlpha,ae=te!==void 0&&te;ee&=this.alpha,ae&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});for(var ie=Z.default.createFrom(this,{components:1,alpha:ae,colorModel:null}),ne=0,oe=0,le;oe<this.size;oe++)le=Q(this.getPixel(oe)),ee?ie.data[ne++]=le*this.data[oe*this.channels+this.components]/this.maxValue:(ie.data[ne++]=le,ae&&(ie.data[ne++]=this.data[oe*this.channels+this.components]));return ie};var W=I("../Image"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(W)},{"../Image":151}],240:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G,W,Z){for(var Q=E.width,$=E.height,J=G.width,ee=E.channels,te=0;te<Q;te++)for(var ae=0;ae<$;ae++)for(var ie=0;ie<ee;ie++){var ne=(ae*Q+te)*ee+ie,oe=((Z+ae)*J+W+te)*ee+ie;G.data[oe]=E.data[ne]}}},{}],241:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z,Q={}){var $=Q.border;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==Z.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==Z.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==Z.colorModel)throw new Error("Both images must have the same colorModel");for(var J=new W.default(Z.width,Z.height,-Infinity),ee=Math.floor(Z.width/2),te=Math.floor(Z.height/2),ae=ee,ie=te,ne=!1,oe;!ne;){oe=J.localSearch(ee,te,-Infinity);for(var le=0;le<oe.length;le++){var se=oe[le],de=this.getSimilarity(Z,{border:$,shift:[ae-se[0],ie-se[1]]});J[se[0]][se[1]]=de}var ue=J.localMax(ee,te);ue.position[0]!==ee||ue.position[1]!==te?(ee=ue.position[0],te=ue.position[1]):ne=!0}return[ee-ae,te-ie]};var G=I("../../util/matrix"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../../util/matrix":276}],242:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Q,$={}){var J=$.keepAlpha,ee=J!==void 0&&J,te=$.mergeAlpha,ae=te!==void 0&&te;ee&=this.alpha,ae&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),Q=(0,Z.validateChannel)(this,Q);for(var ie=W.default.createFrom(this,{components:1,alpha:ee,colorModel:null}),ne=0,oe=0;oe<this.data.length;oe+=this.channels)ae?ie.data[ne++]=this.data[oe+Q]*this.data[oe+this.components]/this.maxValue:(ie.data[ne++]=this.data[oe+Q],ee&&(ie.data[ne++]=this.data[oe+this.components]));return ie};var G=I("../Image"),W=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(G),Z=I("./../../util/channel")},{"../Image":151,"./../../util/channel":269}],243:[function(I,R,T){"use strict";function E(W){for(var Z=0,Q=W;null!=Q.parent;)Q=Q.parent,Z++;return Z}function G(W,Z){for(var Q=W;0<Z;)Q=Q.parent,--Z;return Q}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Z=E(this),Q=E(W),$;if($=Z>=Q?G(this,Z):G(W,Q),0===Z||0===Q)return $;for(var J=this,ee=W;Z!==Q;)if(Z>Q){if(J=J.parent,void 0===J)return $;--Z}else{if(ee=ee.parent,void 0===ee)return $;--Q}for(;J!==ee&&void 0!==typeof J&&void 0!==typeof ee;)if(J=J.parent,ee=ee.parent,void 0===J||void 0===ee)return $;return J===ee?J:$}},{}],244:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),this.checkColumn(E),this.checkChannel(G);for(var W=Array(this.height),Z=0,Q=this.width*this.channels,$=G+E*this.channels;$<this.data.length;$+=Q)W[Z++]=this.data[$];return W}},{}],245:[function(I,R,T){"use strict";function E(W,Z){for(var Q=[],$=0;$<W.height;$++)for(var J=0,ee;J<W.width;J++)ee=[$,J],Q.push([ee[0]+Z[0],ee[1]+Z[1]]);return Q}function G(W,Z){for(var Q=0,$=0,J=[];Q<W.length&&$<Z.length;)W[Q][0]===Z[$][0]&&W[Q][1]===Z[$][1]?(J.push(W[Q]),Q++,$++):W[Q][0]<Z[$][0]||W[Q][0]===Z[$][0]&&W[Q][1]<Z[$][1]?Q++:$++;return J}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){for(var Z=this,Q=Z.getClosestCommonParent(W),$=Z.getRelativePosition(Q,{defaultFurther:!0}),J=E(Z,$),ee=W.getRelativePosition(Q,{defaultFurther:!0}),te=E(W,ee),ae=G(J,te),ie={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]},ne=0;ne<ae.length;ne++){var oe=ae[ne],le=[oe[0]-$[0],oe[1]-$[1]],se=[oe[0]-ee[0],oe[1]-ee[1]],de=Z.getBitXY(le[0],le[1]),ue=W.getBitXY(se[0],se[1]);1===de&&1===ue&&ie.commonWhitePixels.push(oe)}for(var he=0;he<J.length;he++){var ce=void 0,pe=void 0;0!==he&&(ce=Math.floor(he/(Z.width-1)),pe=he%(Z.width-1)),1===Z.getBitXY(ce,pe)&&ie.whitePixelsMask1.push(J[he])}for(var ge=0;ge<te.length;ge++){var fe=0,_e=0;0!==ge&&(fe=Math.floor(ge/(W.width-1)),_e=ge%(W.width-1)),1===W.getBitXY(fe,_e)&&ie.whitePixelsMask2.push(te[ge])}return ie}},{}],246:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z={}){var Q=Z.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===Q){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");Q=0}for(var $=new W.default(this.height,this.width),J=0;J<this.height;J++)for(var ee=0;ee<this.width;ee++)$.set(J,ee,this.getValueXY(ee,J,Q));return $};var G=I("ml-matrix"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"ml-matrix":91}],247:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});for(var E=Array(this.size),G=0,W=0,Z;W<this.data.length;W+=this.channels){Z=Array(this.components);for(var Q=0;Q<this.components;Q++)Z[Q]=this.data[W+Q];E[G++]=Z}return E}},{}],248:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E={}){var G=E.sampling,W=void 0===G?[10,10]:G,Z=E.painted,$=E.mask;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(W)||(W=[W,W]);for(var J=W[0],ee=W[1],te=J*ee,ae=Array(te),ie=Array(te),ne=this.width/J,oe=this.height/ee,le=Math.floor(ne/2),se=0,de=0,ue;de<J;de++){ue=Math.floor(oe/2);for(var he=0;he<ee;he++){var ce=Math.round(le),pe=Math.round(ue);(!$||$.getBitXY(ce,pe))&&(ae[se]=[ce,pe],ie[se]=this.getPixelXY(ce,pe),se++),ue+=oe}le+=ne}ae.length=se,ie.length=se;var ge={xyS:ae,zS:ie};return void 0!==Z&&Z&&(ge.painted=this.rgba8().paintPoints(ae)),ge}},{}],249:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),this.checkRow(E),this.checkChannel(G);for(var W=Array(this.width),Z=0,Q=E*this.width*this.channels+G,$=Q+this.width*this.channels,J=Q;J<$;J+=this.channels)W[Z++]=this.data[J];return W}},{}],250:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Q,$={}){var J=$.shift,ee=void 0===J?[0,0]:J,te=$.average,ae=$.channels,ie=$.defaultAlpha,ne=$.normalize,oe=$.border,le=void 0===oe?[0,0]:oe;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(le)||(le=[le,le]),ae=(0,G.validateArrayOfChannels)(this,{channels:ae,defaultAlpha:ie}),this.bitDepth!==Q.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==Q.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==Q.colorModel)throw new Error("Both images must have the same colorModel");"undefined"==typeof te&&(te=!0);for(var se=Math.max(le[0],-ee[0]),de=Math.min(this.width-le[0],this.width-ee[0]),ue=Math.max(le[1],-ee[1]),he=Math.min(this.height-le[1],this.height-ee[1]),ce=(0,Z.default)(ae.length,0),pe=0;pe<ae.length;pe++){var ge=ae[pe],fe=ne?this.sum[ge]:Math.max(this.sum[ge],Q.sum[ge]),_e=ne?Q.sum[ge]:Math.max(this.sum[ge],Q.sum[ge]);if(0!==fe&&0!==_e)for(var be=se;be<de;be++)for(var ye=ue;ye<he;ye++){var xe=be*this.multiplierX+ye*this.multiplierY+ge,we=xe+ee[0]*this.multiplierX+ee[1]*this.multiplierY;ce[pe]+=Math.min(this.data[xe]/fe,Q.data[we]/_e)}}return te?ce.reduce((ke,ve)=>ke+ve)/ce.length:ce};var G=I("./../../util/channel"),W=I("new-array"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(W)},{"./../../util/channel":269,"new-array":118}],251:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z={}){var Q=Z.size,$=void 0===Q?0:Q,J=Z.algorithm,ee=void 0===J?"copy":J,te=Z.color;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===ee){if(te.length!==this.channels)throw new Error("setBorder: the color array must have the same length as the number of channels. Here: "+this.channels);for(var ae=0;ae<te.length;ae++)0===te[ae]&&(te[ae]=1e-3)}else te=(0,W.default)(this.channels,null);Array.isArray($)||($=[$,$]);for(var ie=$[0],ne=$[1],oe=this.channels,le=ie;le<this.width-ie;le++)for(var se=0,de;se<oe;se++){de=te[se]||this.data[(le+this.width*ne)*oe+se];for(var ue=0;ue<ne;ue++)this.data[(ue*this.width+le)*oe+se]=de;de=te[se]||this.data[(le+this.width*(this.height-ne-1))*oe+se];for(var he=this.height-ne;he<this.height;he++)this.data[(he*this.width+le)*oe+se]=de}for(var ce=0;ce<this.height;ce++)for(var pe=0,ge;pe<oe;pe++){ge=te[pe]||this.data[(ce*this.width+ie)*oe+pe];for(var fe=0;fe<ie;fe++)this.data[(ce*this.width+fe)*oe+pe]=ge;ge=te[pe]||this.data[(ce*this.width+this.width-ie-1)*oe+pe];for(var _e=this.width-ie;_e<this.width;_e++)this.data[(ce*this.width+_e)*oe+pe]=ge}return this};var G=I("new-array"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"new-array":118}],252:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G,W){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),W.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),W.width!==this.width||W.height!==this.height)throw new Error("Images must have exactly the same width and height");G=(0,E.validateChannel)(this,G);for(var Z=G,Q=0;Q<W.data.length;Q++)this.data[Z]=W.data[Q],Z+=this.channels;return this};var E=I("./../../util/channel")},{"./../../util/channel":269}],253:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G={}){var W=G.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===W){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");W=0}if(!E.length||!E[0].length||this.width!==E.columns||this.height!==E.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(var Z=0;Z<this.height;Z++)for(var Q=0;Q<this.width;Q++)this.setValueXY(Q,Z,W,E.get(Z,Q))}},{}],254:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($={}){var J=$.preserveAlpha;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new Q.default([this.clone()]);var te=new Q.default,ae=this.data;if(this.alpha&&(void 0===J||J))for(var ie=0;ie<this.components;ie++){for(var ne=W.default.createFrom(this,{components:1,alpha:!0,colorModel:null}),oe=0,le=0;le<ae.length;le+=this.channels)ne.data[oe++]=ae[le+ie],ne.data[oe++]=ae[le+this.components];te.push(ne)}else for(var se=0;se<this.channels;se++){for(var de=W.default.createFrom(this,{components:1,alpha:!1,colorModel:null}),ue=0,he=0;he<ae.length;he+=this.channels)de.data[ue++]=ae[he+se];te.push(de)}return te};var G=I("../Image"),W=L(G),Z=I("../../stack/Stack"),Q=L(Z)},{"../../stack/Stack":258,"../Image":151}],255:[function(I,R,T){"use strict";var E=I("./image/environment"),G=I("array-includes"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G);W.default.shim(),R.exports=T=I("./image/Image").default,T.Stack=I("./stack/Stack").default,T.Shape=I("./util/Shape").default,T.Kernel=I("./kernel/kernel"),T.Static={grey:I("./image/transform/greyAlgorithms").names,mask:I("./image/transform/mask/maskAlgorithms").names},"browser"===E.env&&(T.Worker=I("./worker/worker").default)},{"./image/Image":151,"./image/environment":165,"./image/transform/greyAlgorithms":213,"./image/transform/mask/maskAlgorithms":221,"./kernel/kernel":256,"./stack/Stack":258,"./util/Shape":267,"./worker/worker":280,"array-includes":2}],256:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=I("../util/kernels");Object.keys(L).forEach(function(G){"default"===G||"__esModule"===G||Object.defineProperty(T,G,{enumerable:!0,get:function(){return L[G]}})});var E=I("./laplacianOfGaussian");Object.defineProperty(T,"laplacianOfGaussian",{enumerable:!0,get:function(){return E.laplacianOfGaussian}})},{"../util/kernels":275,"./laplacianOfGaussian":257}],257:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.laplacianOfGaussian=function(E,G,W){var Z=Array(G),Q,$,J,ee;W||(W=100),W*=-1;var te=(G-1)/2,ae=2*E*E;for(Q=0;Q<G;Q++)for(Z[Q]=Array(G),ee=(Q-te)*(Q-te),$=0;$<G;$++)J=($-te)*($-te),Z[Q][$]=Math.round(W*(1-(J+ee)/ae)*Math.exp(-(J+ee)/ae));return Z}},{}],258:[function(I,R,T){"use strict";function L(te){return te&&te.__esModule?te:{default:te}}Object.defineProperty(T,"__esModule",{value:!0});var E=I("./extend"),G=L(E),W=I("../image/Image"),Z=L(W),Q=I("has-own"),$=L(Q),J={configurable:!0,enumerable:!1,get:void 0};class ee extends Array{constructor(te){if(Array.isArray(te)){super(te.length);for(var ae=0;ae<te.length;ae++)this[ae]=te[ae]}else"number"==typeof te?super(te):super();this.computed=null}static load(te){return Promise.all(te.map(Z.default.load)).then(ae=>new ee(ae))}static extendMethod(te,ae,ie={}){var ne=ie.inPlace,le=ie.returnThis,de=ie.partialArgs,ue=void 0===de?[]:de;return ee.prototype[te]=void 0!==ne&&ne?function(...he){this.computed=null;var ce=ae.apply(this,[...ue,...he]);return void 0===le||le?this:ce}:function(...he){return ae.apply(this,[...ue,...he])},ee}static extendProperty(te,ae,ie={}){var ne=ie.partialArgs,oe=void 0===ne?[]:ne;return J.get=function(){if(null===this.computed)this.computed={};else if((0,$.default)(te,this.computed))return this.computed[te];var le=ae.apply(this,oe);return this.computed[te]=le,le},Object.defineProperty(ee.prototype,te,J),ee}checkProcessable(te,ae={}){if("string"!=typeof te)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError("The process: "+te+" can not be applied on an empty stack");this[0].checkProcessable(te,ae);for(var ie=1;ie<this.length;ie++){if((ae.sameSize===void 0||ae.sameSize)&&this[0].width!==this[ie].width)throw new TypeError("The process: "+te+" can not be applied if width is not identical in all images");if((void 0===ae.sameSize||ae.sameSize)&&this[0].height!==this[ie].height)throw new TypeError("The process: "+te+" can not be applied if height is not identical in all images");if((void 0===ae.sameAlpha||ae.sameAlpha)&&this[0].alpha!==this[ie].alpha)throw new TypeError("The process: "+te+" can not be applied if alpha is not identical in all images");if((void 0===ae.sameBitDepth||ae.sameBitDepth)&&this[0].bitDepth!==this[ie].bitDepth)throw new TypeError("The process: "+te+" can not be applied if bitDepth is not identical in all images");if((void 0===ae.sameColorModel||ae.sameColorModel)&&this[0].colorModel!==this[ie].colorModel)throw new TypeError("The process: "+te+" can not be applied if colorModel is not identical in all images");if((void 0===ae.sameNumberChannels||ae.sameNumberChannels)&&this[0].channels!==this[ie].channels)throw new TypeError("The process: "+te+" can not be applied if channels is not identical in all images")}}}T.default=ee,Array[Symbol.species]||(ee.prototype.map=function(te,ae){if("function"!=typeof te)throw new TypeError(te+" is not a function");for(var ie=new ee(this.length),ne=0;ne<this.length;ne++)ie[ne]=te.call(ae,this[ne],ne,this);return ie}),(0,G.default)(ee)},{"../image/Image":151,"./extend":264,"has-own":48}],259:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){this.checkProcessable("min",{bitDepth:[8,16]});for(var G=this[0].getHistogram(E),W=1,Z;W<this.length;W++){Z=this[W].getHistogram(E);for(var Q=0;Q<G.length;Q++)G[Q]+=Z[Q]}return G}},{}],260:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){this.checkProcessable("min",{bitDepth:[8,16]});for(var G=this[0].getHistograms(E),W=G[0].length,Z=1,Q;Z<this.length;Z++){Q=this[Z].getHistograms(E);for(var $=0;$<G.length;$++)for(var J=0;J<W;J++)G[$][J]+=Q[$][J]}return G}},{}],261:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});for(var E=this[0].max,G=1;G<this.length;G++)for(var W=0;W<E.length;W++)E[W]=Math.max(E[W],this[G].max[W]);return E}},{}],262:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("median",{bitDepth:[8,16]});for(var G=this.getHistograms({maxSlots:this[0].maxValue+1}),W=Array(G.length),Z=0,Q;Z<G.length;Z++)Q=G[Z],W[Z]=(0,E.median)(Q);return W};var E=I("../../util/histogram")},{"../../util/histogram":273}],263:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});for(var E=this[0].min,G=1;G<this.length;G++)for(var W=0;W<E.length;W++)E[W]=Math.min(E[W],this[G].min[W]);return E}},{}],264:[function(I,R,T){"use strict";function L(de){return de&&de.__esModule?de:{default:de}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(de){de.extendMethod("matchAndCrop",W.default),de.extendMethod("getMin",Q.default),de.extendMethod("getMax",J.default),de.extendMethod("getMedian",te.default),de.extendMethod("getHistogram",ie.default),de.extendMethod("getHistograms",oe.default),de.extendMethod("getAverage",se.default)};var G=I("./transform/matchAndCrop"),W=L(G),Z=I("./compute/min"),Q=L(Z),$=I("./compute/max"),J=L($),ee=I("./compute/median"),te=L(ee),ae=I("./compute/histogram"),ie=L(ae),ne=I("./compute/histograms"),oe=L(ne),le=I("./utility/average"),se=L(le)},{"./compute/histogram":259,"./compute/histograms":260,"./compute/max":261,"./compute/median":262,"./compute/min":263,"./transform/matchAndCrop":265,"./utility/average":266}],265:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z={}){var Q=Z.algorithm,$=Q===void 0?"matchToPrevious":Q,J=Z.ignoreBorder,ee=J===void 0?[0,0]:J;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});var ae=this[0],ie=[];ie[0]={position:[0,0],image:this[0]};for(var ne=[0,0],oe=1,le;oe<this.length;oe++)le=ae.getBestMatch(this[oe],{border:ee}),ie[oe]={position:[le[0]+ne[0],le[1]+ne[1]],image:this[oe]},"matchToPrevious"===$&&(ne[0]+=le[0],ne[1]+=le[1],ae=this[oe]);for(var se=0,de=0,ue=0,he=0,ce=0,pe;ce<ie.length;ce++)pe=ie[ce],pe.position[0]>se&&(se=pe.position[0]),pe.position[0]<de&&(de=pe.position[0]),pe.position[1]>ue&&(ue=pe.position[1]),pe.position[1]<he&&(he=pe.position[1]);de=0-de,he=0-he;for(var ge=0,fe;ge<ie.length;ge++)fe=ie[ge],fe.crop=fe.image.crop({x:se-fe.position[0],y:ue-fe.position[1],width:ae.width-de-se,height:ae.height-he-ue});for(var _e=[],be=0;be<ie.length;be++)_e[be]=ie[be].crop;return new W.default(_e)};var G=I("../Stack"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../Stack":258}],266:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("average",{bitDepth:[8,16]});for(var Z=new Uint32Array(this[0].data.length),Q=0,$;Q<this.length;Q++){$=this[Q];for(var J=0;J<this[0].data.length;J++)Z[J]+=$.data[J]}for(var ee=W.default.createFrom(this[0]),te=ee.data,ae=0;ae<this[0].data.length;ae++)te[ae]=Z[ae]/this.length;return ee};var G=I("../../image/Image"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"../../image/Image":151}],267:[function(I,R,T){"use strict";function L(ne){return ne&&ne.__esModule?ne:{default:ne}}function E(ne,oe,le){var se=Q.default.zeros(oe,ne);if(le.filled)for(var de=0;de<oe;de++)for(var ue=0;ue<ne;ue++)se.set(de,ue,1);else{for(var he=[0,oe-1],ce=0,pe;ce<he.length;ce++){pe=he[ce];for(var ge=0;ge<ne;ge++)se.set(pe,ge,1)}for(var fe=0,_e;fe<oe;fe++){_e=[0,ne-1];for(var be=0,ye;be<_e.length;be++)ye=_e[be],se.set(fe,ye,1)}}return se}function G(ne,oe,le){var se=Q.default.zeros(oe,ne,le),de=1-oe%2,ue=1-ne%2,he=Math.floor((ne-1)/2),ce=Math.floor((oe-1)/2),pe=he*he,ge=ce*ce;if(le.filled)for(var fe=0,_e;fe<=ce;fe++){_e=Math.floor(Math.sqrt(pe-pe*fe*fe/ge));for(var be=he-_e;be<=he;be++)se.set(ce-fe,be,1),se.set(ce+fe+de,be,1),se.set(ce-fe,ne-be-1,1),se.set(ce+fe+de,ne-be-1,1)}else{for(var ye=0;ye<=ce;ye++){var xe=Math.floor(Math.sqrt(pe-pe*ye*ye/ge)),we=he-xe;se.set(ce-ye,we,1),se.set(ce+ye+de,we,1),se.set(ce-ye,ne-we-1,1),se.set(ce+ye+de,ne-we-1,1)}for(var ke=0;ke<=he;ke++){var ve=Math.floor(Math.sqrt(ge-ge*ke*ke/pe)),Me=ce-ve;se.set(Me,he-ke,1),se.set(Me,he+ke+ue,1),se.set(oe-Me-1,he-ke,1),se.set(oe-Me-1,he+ke+ue,1)}}return se}function W(ne,oe,le){if(!le.filled)throw new Error("Non filled triangle is not implemented");for(var se=Q.default.zeros(oe,ne,le),de=0,ue;de<oe;de++){ue=Math.floor((1-de/oe)*ne/2);for(var he=ue;he<ne-ue;he++)se.set(de,he,1)}return se}Object.defineProperty(T,"__esModule",{value:!0});var Z=I("ml-matrix"),Q=L(Z),$=I("../image/Image"),J=L($),ee=I("../image/kindNames"),te=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],ae=[[0,1,0],[1,1,1],[0,1,0]];T.default=class{constructor(ne={}){var oe=ne.kind,le=void 0===oe?"cross":oe,se=ne.shape,de=ne.size,ue=ne.width,he=ne.height,ce=ne.filled,pe=void 0===ce||ce;if(se)switch(se.toLowerCase()){case"square":case"rectangle":this.matrix=E(ue,he,{filled:pe});break;case"circle":case"ellipse":this.matrix=G(ue,he,{filled:pe});break;case"triangle":this.matrix=W(ue,he,{filled:pe});break;default:throw new Error(`Shape: unexpected shape: ${se}`);}else if(le)switch(le.toLowerCase()){case"cross":this.matrix=te;break;case"smallcross":this.matrix=ae;break;default:throw new Error(`Shape: unexpected kind: ${le}`);}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){for(var ne=this.matrix,oe=[],le=0;le<ne.length;le++)for(var se=0;se<ne[0].length;se++)ne[le][se]&&oe.push([se-this.halfWidth,le-this.halfHeight]);return oe}getMask(){for(var ne=new J.default(this.width,this.height,{kind:ee.BINARY}),oe=0;oe<this.matrix.length;oe++)for(var le=0;le<this.matrix[0].length;le++)this.matrix[oe][le]&&ne.setBitXY(le,oe);return ne}}},{"../image/Image":151,"../image/kindNames":188,"ml-matrix":91}],268:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.encode=function(Q){var J=Q.length,ee="",$;for($=0;$<J;$+=3)ee+=G[Q[$]>>2],ee+=G[(3&Q[$])<<4|Q[$+1]>>4],ee+=G[(15&Q[$+1])<<2|Q[$+2]>>6],ee+=G[63&Q[$+2]];return 2==J%3?ee=ee.substring(0,ee.length-1)+"=":1==J%3&&(ee=ee.substring(0,ee.length-2)+"=="),ee},T.decode=function(Q){var $=0.75*Q.length,J=Q.length,ee,te=0,ae,ie,ne,oe;"="===Q[Q.length-1]&&($--,"="===Q[Q.length-2]&&$--);var le=new Uint8Array($);for(ee=0;ee<J;ee+=4)ae=W[Q.charCodeAt(ee)],ie=W[Q.charCodeAt(ee+1)],ne=W[Q.charCodeAt(ee+2)],oe=W[Q.charCodeAt(ee+3)],le[te++]=ae<<2|ie>>4,le[te++]=(15&ie)<<4|ne>>2,le[te++]=(3&ne)<<6|63&oe;return le};for(var G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W=new Uint8Array(256),Z=0;Z<G.length;Z++)W[G.charCodeAt(Z)]=Z},{}],269:[function(I,R,T){"use strict";function G(J,ee){for(var te=ee?J.channels:J.components,ae=Array(te),ie=0;ie<te;ie++)ae[ie]=ie;return ae}function W(J,ee,te){Array.isArray(ee)||(ee=[ee]);for(var ae=0;ae<ee.length;ae++)ee[ae]=Z(J,ee[ae],te);return ee}function Z(J,ee,te=!0){if(ee===void 0)throw new RangeError("validateChannel : the channel has to be >=0 and <"+J.channels);if("string"==typeof ee){switch(J.colorModel){case $.GREY:break;case $.RGB:"rgb".includes(ee)&&("r"===ee?ee=0:"g"===ee?ee=1:"b"===ee?ee=2:void 0);break;case $.HSL:"hsl".includes(ee)&&("h"===ee?ee=0:"s"===ee?ee=1:"l"===ee?ee=2:void 0);break;case $.HSV:"hsv".includes(ee)&&("h"===ee?ee=0:"s"===ee?ee=1:"v"===ee?ee=2:void 0);break;case $.CMYK:"cmyk".includes(ee)&&("c"===ee?ee=0:"m"===ee?ee=1:"y"===ee?ee=2:"k"===ee?ee=3:void 0);break;default:throw new Error(`Unexpected color model: ${J.colorModel}`);}if("a"===ee){if(!J.alpha)throw new Error("validateChannel : the image does not contain alpha channel");ee=J.components}if("string"==typeof ee)throw new Error("validateChannel : undefined channel: "+ee)}if(ee>=J.channels)throw new RangeError("validateChannel : the channel has to be >=0 and <"+J.channels);if(!te&&ee>=J.components)throw new RangeError("validateChannel : alpha channel may not be selected");return ee}Object.defineProperty(T,"__esModule",{value:!0}),T.validateArrayOfChannels=function(J,ee={}){var te=ee.channels,ae=ee.allowAlpha,ie=ee.defaultAlpha;return"boolean"!=typeof ae&&(ae=!0),"undefined"==typeof te?G(J,ie):W(J,te,ae)},T.validateChannel=Z;var Q=I("../image/model/model"),$=function(J){if(J&&J.__esModule)return J;var ee={};if(null!=J)for(var te in J)Object.prototype.hasOwnProperty.call(J,te)&&(ee[te]=J[te]);return ee.default=J,ee}(Q)},{"../image/model/model":191}],270:[function(I,R,T){"use strict";function E($,J,ee){return 0>ee&&(ee+=1),1<ee&&(ee-=1),ee<1/6?$+6*(J-$)*ee:ee<1/2?J:ee<2/3?$+6*((J-$)*(2/3-ee)):$}function G($,J,ee){var te,ae,ie,ne,oe,le;return J/=100,ee/=100,0===J?ne=oe=le=255*ee:(ae=0.5>=ee?ee*(J+1):ee+J-ee*J,te=2*ee-ae,ie=$/360,ne=E(te,ae,ie+1/3),oe=E(te,ae,ie),le=E(te,ae,ie-1/3)),{r:ne,g:oe,b:le}}Object.defineProperty(T,"__esModule",{value:!0}),T.css2array=function($){var J=(0,Q.cssColor)($);return[J.r,J.g,J.b,Math.round(255*J.a/100)]},T.getDistinctColors=function($){for(var J=Array($),ee=0,te=0;360>te;te+=360/$){ee++;var ae=G(te,100,30+15*(ee%4));J[ee-1]=[Math.round(255*ae.r),Math.round(255*ae.g),Math.round(255*ae.b)]}return J},T.getRandomColor=function(){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]};var Q=I("color-functions")},{"color-functions":8}],271:[function(I,R,T){"use strict";function L(W){if("string"==typeof W){var Z=W[W.length-1];W=parseFloat(W),"%"===Z&&(W/=100)}return W}Object.defineProperty(T,"__esModule",{value:!0}),T.getFactor=L,T.getThreshold=function(W,Z){if(!Z)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof W){var Q=W[W.length-1];if("%"!==Q)throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(W)/100*Z}if("number"==typeof W)return 1>W?W*Z:W;throw Error("getThreshold : the value is not valid")},T.factorDimensions=function(W,Z,Q){W=L(W);var $=Math.round(W*Z),J=Math.round(W*Q);return 0>=$&&($=1),0>=J&&(J=1),{width:$,height:J}}},{}],272:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.dxs=[1,0,-1,0,1,1,-1,-1],E=T.dys=[0,1,0,-1,1,-1,1,-1]},{}],273:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.median=function(G){var W=G.reduce((ee,te)=>ee+te);if(0===W)throw new Error("unreachable");for(var Z=0,Q=0,$=W/2,J;;){if(0<G[Z]){if(void 0!=J)return(J+Z)/2;if(Q+=G[Z],Q>$)return Z;Q==$&&(J=Z)}Z++}},T.mean=function(G){for(var W=0,Z=0,Q=0;Q<G.length;Q++)W+=G[Q],Z+=G[Q]*Q;return 0===W?0:Z/W}},{}],274:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.validateKernel=function(Z){var Q,$;if(!Array.isArray(Z))throw new Error("validateKernel: Invalid Kernel: "+Z);else if(!Array.isArray(Z[0])){var J=Math.sqrt(Z.length);if((0,W.default)(J))$=Q=Math.floor(Math.sqrt(Z.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");for(var ee=Array(J),te=0;te<J;te++){ee[te]=Array(J);for(var ae=0;ae<J;ae++)ee[te][ae]=Z[te*J+ae]}Z=ee}else if(0==(1&Z.length)||0==(1&Z[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");else Q=Math.floor(Z.length/2),$=Math.floor(Z[0].length/2);return{kernel:Z,kWidth:$,kHeight:Q}};var G=I("is-integer"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"is-integer":57}],275:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.DISCRETE_LAPLACE_4=[[0,1,0],[1,-4,1],[0,1,0]],E=T.DISCRETE_LAPLACE_8=[[1,1,1],[1,-8,1],[1,1,1]],G=T.GRADIENT_X=[[-1,0,1],[-2,0,2],[-1,0,1]],W=T.GRADIENT_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],Z=T.SECOND_DERIVATIVE=[[-1,-2,0,2,1],[-2,-4,0,4,2],[0,0,0,0,0],[1,2,0,-2,-1],[2,4,0,-4,-2]],Q=T.SECOND_DERIVATIVE_INV=[[1,2,0,-2,-1],[2,4,0,-4,-2],[0,0,0,0,0],[-2,-4,0,4,2],[-1,-2,0,2,1]]},{}],276:[function(I,R,T){"use strict";function L(E,G,W){for(var Z=Array(E),Q=0;Q<E;Q++)Z[Q]=Array(G);if(W)for(var $=0;$<E;$++)for(var J=0;J<G;J++)Z[$][J]=W;return Z.width=E,Z.height=G,Z.__proto__=L.prototype,Z}Object.defineProperty(T,"__esModule",{value:!0}),T.default=L,L.prototype.localMin=function(E,G){for(var W=this[E][G],Z=[E,G],Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]<W&&(W=this[Q][$],Z=[Q,$]);return{position:Z,value:W}},L.prototype.localMax=function(E,G){for(var W=this[E][G],Z=[E,G],Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]>W&&(W=this[Q][$],Z=[Q,$]);return{position:Z,value:W}},L.prototype.localSearch=function(E,G,W){for(var Z=[],Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]===W&&Z.push([Q,$]);return Z}},{}],277:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0}),T.checkNumberArray=function($){if(!isNaN($)){if(0>=$)throw new Error("checkNumberArray: the value must be greater than 0");return $}if($ instanceof W.default)return $.data;if(!(0,Q.default)($))throw new Error("checkNumberArray: the value should be either a number, array or Image");return $};var G=I("../image/Image"),W=L(G),Z=I("is-array-type"),Q=L(Z)},{"../image/Image":151,"is-array-type":53}],278:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){Z.extendMethod("background",W.default)};var G=I("./process/background"),W=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G)},{"./process/background":279}],279:[function(I,R,T){"use strict";function L(te){return te&&te.__esModule?te:{default:te}}function G(te,ae,ie){return te.post("data",[ae,ie]).then(function(ne){for(var oe in ne)ne[oe]=new J.default(ne[oe]);return ne})}Object.defineProperty(T,"__esModule",{value:!0});var Z=I("extend"),Q=L(Z),$=I("../../image/Image"),J=L($),ee={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:0.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};T.default={run:function(te,ae,ie){ae=(0,Q.default)({},ee,ae);var ne=this.manager;return Array.isArray(te)?Promise.all(te.map(function(oe){var le=G(ne,oe,ae);return"function"==typeof ie&&le.then(ie),le})):G(ne,te,ae)},work:function(){worker.on("data",function(te,ae,ie){function ne(_e,be){ie.include.includes(_e)&&(oe[_e]=be,le.push(be.data.buffer))}ae=new IJS(ae);var oe={},le=[],se=ae.grey(),de=se.sobelFilter();ne("sobel",de);var ue=de.level().mask({threshold:ie.threshold});ne("mask",ue);var he=de.getRoiManager();he.fromMask(ue);var ce=he.getMask(ie.roi);ne("realMask",ce);var pe=se.getPixelsGrid({sampling:ie.sampling,mask:ce}),ge=ae.getBackground(pe.xyS,pe.zS,ie.regression);ne("background",ge);var fe=ae.subtract(ge);oe.result=fe,le.push(fe.data.buffer),te(oe,le)})}}},{"../../image/Image":151,extend:34}],280:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0});var E=I("web-worker-manager"),G=L(E),W=I("./extend"),Z=L(W);class Q{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url($){if("string"!=typeof $)throw new TypeError("worker URL must be a string");this._url=$,this._deps[0]=$}static extendMethod($,J){function ee(...ne){return te||(this.checkUrl(),ae=this.url,te=new G.default(J.work,{deps:ae}),ie.manager=te),J.run.call(ie,...ne)}var te,ae,ie={};ee.reset=function(){te&&(te.terminate(),te=new G.default(J.work,{deps:ae}),ie.manager=te)},Q.prototype[$]=ee}}(0,Z.default)(Q),T.default=new Q},{"./extend":278,"web-worker-manager":149}]},{},[255])(255)});

//# sourceMappingURL=image.min.js.map