(function(I){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=I();else if("function"==typeof define&&define.amd)define([],I);else{var R;R="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,R.IJS=I()}})(function(){var define;return function I(R,T,L){function E(W,Q){if(!T[W]){if(!R[W]){var $="function"==typeof require&&require;if(!Q&&$)return $(W,!0);if(G)return G(W,!0);var J=new Error("Cannot find module '"+W+"'");throw J.code="MODULE_NOT_FOUND",J}var ee=T[W]={exports:{}};R[W][0].call(ee.exports,function(te){var ae=R[W][1][te];return E(ae?ae:te)},ee,ee.exports,I,R,T,L)}return T[W].exports}var G="function"==typeof require&&require;for(var Z=0;Z<L.length;Z++)E(L[Z]);return E}({1:[function(I,R){(function(T){"use strict";var L=I("es-abstract/es6"),E=Number.isNaN||function(W){return W!==W},G=Number.isFinite||function(W){return"number"==typeof W&&T.isFinite(W)},Z=Array.prototype.indexOf;R.exports=function(Q){var $=1<arguments.length?L.ToInteger(arguments[1]):0;if(Z&&!E(Q)&&G($)&&"undefined"!=typeof Q)return-1<Z.apply(this,arguments);var J=L.ToObject(this),ee=L.ToLength(J.length);if(0===ee)return!1;for(var te=0<=$?$:Math.max(0,ee+$);te<ee;){if(L.SameValueZero(Q,J[te]))return!0;te+=1}return!1}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"es-abstract/es6":25}],2:[function(I,R){"use strict";var T=I("define-properties"),L=I("es-abstract/es6"),E=I("./implementation"),G=I("./polyfill"),Z=G(),W=I("./shim"),Q=Array.prototype.slice,$=function(ee){return L.RequireObjectCoercible(ee),Z.apply(ee,Q.call(arguments,1))};T($,{implementation:E,getPolyfill:G,shim:W}),R.exports=$},{"./implementation":1,"./polyfill":3,"./shim":4,"define-properties":23,"es-abstract/es6":25}],3:[function(I,R){"use strict";var T=I("./implementation");R.exports=function(){return Array.prototype.includes||T}},{"./implementation":1}],4:[function(I,R){"use strict";var T=I("define-properties"),L=I("./polyfill");R.exports=function(){var G=L();return Array.prototype.includes!==G&&T(Array.prototype,{includes:G}),G}},{"./polyfill":3,"define-properties":23}],5:[function(I,R){"use strict";R.exports=function(L){return atob(L)}},{}],6:[function(I,R){"use strict";function T(ae){for(var ie=ae.length,ne=new ArrayBuffer(ie),oe=new Uint8Array(ne),le=-1;++le<ie;)oe[le]=ae.charCodeAt(le);return ne}function L(ae){for(var ie="",ne=new Uint8Array(ae),oe=ne.byteLength,le=-1;++le<oe;)ie+=String.fromCharCode(ne[le]);return ie}function E(ae,ie){return new te(function(ne,oe){var le=new Image;ie&&(le.crossOrigin=ie),le.onload=function(){ne(le)},le.onerror=oe,le.src=ae})}function G(ae){var ie=document.createElement("canvas");ie.width=ae.width,ie.height=ae.height;var ne=ie.getContext("2d");return ne.drawImage(ae,0,0,ae.width,ae.height,0,0,ae.width,ae.height),ie}function Z(ae,ie){return ie=ie||{},"string"==typeof ie&&(ie={type:ie}),new ee(ae,ie)}function W(ae){return new te(function(ie,ne){var oe=new FileReader,le="function"==typeof oe.readAsBinaryString;oe.onloadend=function(se){var de=se.target.result||"";return le?ie(de):void ie(L(de))},oe.onerror=ne,le?oe.readAsBinaryString(ae):oe.readAsArrayBuffer(ae)})}function Q(ae,ie){return te.resolve().then(function(){var ne=[T(atob(ae))];return ie?Z(ne,{type:ie}):Z(ne)})}function $(ae){return te.resolve().then(function(){var ie=ae.match(/data:([^;]+)/)[1],ne=ae.replace(/^[^,]+,/,""),oe=T(atob(ne));return Z([oe],{type:ie})})}function J(ae,ie,ne){return te.resolve().then(function(){return"function"==typeof ae.toBlob?new te(function(oe){ae.toBlob(oe,ie,ne)}):$(ae.toDataURL(ie,ne))})}var ee=I("blob"),te=I("native-or-lie");R.exports={createBlob:Z,createObjectURL:function(ie){return(window.URL||window.webkitURL).createObjectURL(ie)},revokeObjectURL:function(ie){return(window.URL||window.webkitURL).revokeObjectURL(ie)},imgSrcToBlob:function(ie,ne,oe,le){return ne=ne||"image/png",E(ie,oe).then(function(se){return G(se)}).then(function(se){return J(se,ne,le)})},imgSrcToDataURL:function(ie,ne,oe,le){return ne=ne||"image/png",E(ie,oe).then(function(se){return G(se)}).then(function(se){return se.toDataURL(ne,le)})},canvasToBlob:J,dataURLToBlob:$,blobToBase64String:function(ie){return W(ie).then(function(ne){return btoa(ne)})},base64StringToBlob:Q,binaryStringToBlob:function(ie,ne){return te.resolve().then(function(){return Q(btoa(ie),ne)})},blobToBinaryString:W,arrayBufferToBlob:function(ie,ne){return te.resolve().then(function(){return Z([ie],ne)})},blobToArrayBuffer:function(ie){return new te(function(ne,oe){var le=new FileReader;le.onloadend=function(se){var de=se.target.result||new ArrayBuffer(0);ne(de)},le.onerror=oe,le.readAsArrayBuffer(ie)})}}},{blob:7,"native-or-lie":113}],7:[function(I,R){(function(T){"use strict";function L(J){for(var ee=0;ee<J.length;ee++){var te=J[ee];if(te.buffer instanceof ArrayBuffer){var ae=te.buffer;if(te.byteLength!==ae.byteLength){var ie=new Uint8Array(te.byteLength);ie.set(new Uint8Array(ae,te.byteOffset,te.byteLength)),ae=ie.buffer}J[ee]=ae}}}function E(J,ee){ee=ee||{};var te=new Z;L(J);for(var ae=0;ae<J.length;ae++)te.append(J[ae]);return ee.type?te.getBlob(ee.type):te.getBlob()}function G(J,ee){return L(J),new Blob(J,ee||{})}var Z=T.BlobBuilder||T.WebKitBlobBuilder||T.MSBlobBuilder||T.MozBlobBuilder,W=function(){try{var J=new Blob(["hi"]);return 2===J.size}catch(ee){return!1}}(),Q=W&&function(){try{var J=new Blob([new Uint8Array([1,2])]);return 2===J.size}catch(ee){return!1}}(),$=Z&&Z.prototype.append&&Z.prototype.getBlob;R.exports=function(){if(W)return Q?T.Blob:G;return $?E:void 0}()}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],8:[function(){},{}],9:[function(I,R){"use strict";R.exports={hex2rgb:I("./lib/hex2rgb"),hsv2hex:I("./lib/hsv2hex"),hsv2rgb:I("./lib/hsv2rgb"),rgb2hex:I("./lib/rgb2hex"),rgb2hsv:I("./lib/rgb2hsv"),rgba:I("./lib/rgba"),rgba2rgb:I("./lib/rgba2rgb"),rgba2hex:I("./lib/rgba2hex"),hsl2hsv:I("./lib/hsl2hsv"),hsv2hsl:I("./lib/hsv2hsl"),hsl2rgb:I("./lib/hsl2rgb"),cssColor:I("./lib/css-color")}},{"./lib/css-color":11,"./lib/hex2rgb":12,"./lib/hsl2hsv":13,"./lib/hsl2rgb":14,"./lib/hsv2hex":15,"./lib/hsv2hsl":16,"./lib/hsv2rgb":17,"./lib/rgb2hex":18,"./lib/rgb2hsv":19,"./lib/rgba":20,"./lib/rgba2hex":21,"./lib/rgba2rgb":22}],10:[function(I,R){"use strict";R.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}},{}],11:[function(I,R){"use strict";function T(ee){var te=J[ee.toLowerCase()];if(te)return{r:te[0],g:te[1],b:te[2],a:100}}function L(ee){if(0==ee.indexOf("rgb(")){ee=ee.match(/rgb\(([^)]+)\)/)[1];var te=ee.split(/ *, */).map(Number);return{r:te[0],g:te[1],b:te[2],a:100}}}function E(ee){if(0===ee.indexOf("rgba(")){ee=ee.match(/rgba\(([^)]+)\)/)[1];var te=ee.split(/ *, */).map(Number);return{r:te[0],g:te[1],b:te[2],a:100*te[3]}}}function G(ee){if("#"===ee[0]&&7===ee.length)return{r:parseInt(ee.slice(1,3),16),g:parseInt(ee.slice(3,5),16),b:parseInt(ee.slice(5,7),16),a:100}}function Z(ee){if("#"===ee[0]&&4===ee.length)return{r:parseInt(ee[1]+ee[1],16),g:parseInt(ee[2]+ee[2],16),b:parseInt(ee[3]+ee[3],16),a:100}}function W(ee){if(0===ee.indexOf("hsl(")){ee=ee.match(/hsl\(([^)]+)\)/)[1];var te=ee.split(/ *, */),ae=parseInt(te[0],10),ie=parseInt(te[1],10),ne=parseInt(te[2],10),oe=$(ae,ie,ne);return oe.a=100,oe}}function Q(ee){if(0===ee.indexOf("hsla(")){ee=ee.match(/hsla\(([^)]+)\)/)[1];var te=ee.split(/ *, */),ae=parseInt(te[0],10),ie=parseInt(te[1],10),ne=parseInt(te[2],10),oe=parseInt(100*te[3],10),le=$(ae,ie,ne);return le.a=oe,le}}var $=I("./hsl2rgb"),J=I("./_colors");R.exports=function(te){return T(te)||Z(te)||G(te)||L(te)||E(te)||W(te)||Q(te)}},{"./_colors":10,"./hsl2rgb":14}],12:[function(I,R){"use strict";R.exports=function(T){return("#"===T[0]&&(T=T.substr(1)),6===T.length)?{r:parseInt(T.substr(0,2),16),g:parseInt(T.substr(2,2),16),b:parseInt(T.substr(4,2),16)}:3===T.length?{r:parseInt(T[0]+T[0],16),g:parseInt(T[1]+T[1],16),b:parseInt(T[2]+T[2],16)}:void 0}},{}],13:[function(I,R){"use strict";R.exports=function(T,L,E){return L*=(50>E?E:100-E)/100,console.log("s",L),{h:T,s:100*(2*L/(E+L)),v:E+L}}},{}],14:[function(I,R){"use strict";var T=I("./hsl2hsv"),L=I("./hsv2rgb");R.exports=function(E,G,Z){var W=T(E,G,Z);return L(W.h,W.s,W.v)}},{"./hsl2hsv":13,"./hsv2rgb":17}],15:[function(I,R){"use strict";var T=I("./hsv2rgb"),L=I("./rgb2hex");R.exports=function(E,G,Z){var W=T(E,G,Z);return L(W.r,W.g,W.b)}},{"./hsv2rgb":17,"./rgb2hex":18}],16:[function(I,R){"use strict";R.exports=function(T,L,E){var G=(200-L)*E/100;return{h:T,s:L*E/(100>G?G:200-G),l:G/2}}},{}],17:[function(I,R){"use strict";R.exports=function(T,L,E){var L=L/100,E=E/100,G=[],Z=E*L,W=T/60,Q=Z*(1-Math.abs(W%2-1)),$=E-Z;switch(parseInt(W,10)){case 0:G=[Z,Q,0];break;case 1:G=[Q,Z,0];break;case 2:G=[0,Z,Q];break;case 3:G=[0,Q,Z];break;case 4:G=[Q,0,Z];break;case 5:G=[Z,0,Q];}return{r:Math.round(255*(G[0]+$)),g:Math.round(255*(G[1]+$)),b:Math.round(255*(G[2]+$))}}},{}],18:[function(I,R){"use strict";R.exports=function(T,L,E){function G(Z){var W=Z.toString(16);return 1===W.length?"0"+W:W}return[G(T),G(L),G(E)].join("")}},{}],19:[function(I,R){"use strict";R.exports=function(T,L,E){var Q=Math.max(T,L,E),$=Math.min(T,L,E),J=Q-$,G,Z,W;return 0==J?G=0:T===Q?G=(L-E)/J%6:L===Q?G=(E-T)/J+2:E===Q&&(G=(T-L)/J+4),G=Math.round(60*G),0>G&&(G+=360),Z=Math.round(100*(0===Q?0:J/Q)),W=Math.round(100*(Q/255)),{h:G,s:Z,v:W}}},{}],20:[function(I,R){"use strict";R.exports=function(T,L,E,G){return"rgba("+[T,L,E,G/100].join(",")+")"}},{}],21:[function(I,R){"use strict";var T=I("./rgba2rgb"),L=I("./rgb2hex");R.exports=function(E,G,Z,W){var Q=T(E,G,Z,W);return L(Q.r,Q.g,Q.b)}},{"./rgb2hex":18,"./rgba2rgb":22}],22:[function(I,R){"use strict";R.exports=function(T,L,E,G){return G=G/100,{r:parseInt(255*(1-G)+G*T,10),g:parseInt(255*(1-G)+G*L,10),b:parseInt(255*(1-G)+G*E,10)}}},{}],23:[function(I,R){"use strict";var T=I("object-keys"),L=I("foreach"),E="function"==typeof Symbol&&"symbol"==typeof Symbol(),G=Object.prototype.toString,Z=function(ee){return"function"==typeof ee&&"[object Function]"===G.call(ee)},W=Object.defineProperty&&function(){var ee={};try{for(var te in Object.defineProperty(ee,"x",{enumerable:!1,value:ee}),ee)return!1;return ee.x===ee}catch(ae){return!1}}(),Q=function(ee,te,ae,ie){(!(te in ee)||Z(ie)&&ie())&&(W?Object.defineProperty(ee,te,{configurable:!0,enumerable:!1,value:ae,writable:!0}):ee[te]=ae)},$=function(ee,te){var ae=2<arguments.length?arguments[2]:{},ie=T(te);E&&(ie=ie.concat(Object.getOwnPropertySymbols(te))),L(ie,function(ne){Q(ee,ne,te[ne],ae[ne])})};$.supportsDescriptors=!!W,R.exports=$},{foreach:41,"object-keys":117}],24:[function(I,R){"use strict";var T=I("./helpers/isNaN"),L=I("./helpers/isFinite"),E=I("./helpers/sign"),G=I("./helpers/mod"),Z=I("is-callable"),W=I("es-to-primitive/es5");R.exports={ToPrimitive:W,ToBoolean:function($){return!!$},ToNumber:function($){return+$},ToInteger:function($){var J=this.ToNumber($);return T(J)?0:0!==J&&L(J)?E(J)*Math.floor(Math.abs(J)):J},ToInt32:function($){return this.ToNumber($)>>0},ToUint32:function($){return this.ToNumber($)>>>0},ToUint16:function($){var J=this.ToNumber($);if(T(J)||0===J||!L(J))return 0;var ee=E(J)*Math.floor(Math.abs(J));return G(ee,65536)},ToString:function($){return $+""},ToObject:function($){return this.CheckObjectCoercible($),Object($)},CheckObjectCoercible:function($,J){if(null==$)throw new TypeError(J||"Cannot call method on "+$);return $},IsCallable:Z,SameValue:function($,J){return $===J?0!==$||1/$==1/J:T($)&&T(J)},Type:function($){return null===$?"Null":"undefined"==typeof $?"Undefined":"function"==typeof $||"object"==typeof $?"Object":"number"==typeof $?"Number":"boolean"==typeof $?"Boolean":"string"==typeof $?"String":void 0}}},{"./helpers/isFinite":27,"./helpers/isNaN":28,"./helpers/mod":30,"./helpers/sign":31,"es-to-primitive/es5":32,"is-callable":50}],25:[function(I,R){"use strict";var T=Object.prototype.toString,L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,E=L?Symbol.prototype.toString:T,G=I("./helpers/isNaN"),Z=I("./helpers/isFinite"),W=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Q=I("./helpers/assign"),$=I("./helpers/sign"),J=I("./helpers/mod"),ee=I("./helpers/isPrimitive"),te=I("es-to-primitive/es6"),ae=parseInt,ie=I("function-bind"),ne=ie.call(Function.call,String.prototype.slice),oe=ie.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),le=ie.call(Function.call,RegExp.prototype.test,/^0o[0-7]+$/i),se=["\x85","\u200B","\uFFFE"].join(""),de=new RegExp("["+se+"]","g"),ue=ie.call(Function.call,RegExp.prototype.test,de),he=/^[\-\+]0x[0-9a-f]+$/i,me=ie.call(Function.call,RegExp.prototype.test,he),ce=["\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),ge=new RegExp("(^["+ce+"]+)|(["+ce+"]+$)","g"),pe=ie.call(Function.call,String.prototype.replace),fe=function(ke){return pe(ke,ge,"")},_e=I("./es5"),be=I("is-regex"),ye=Q(Q({},_e),{Call:function(ke,we){var ve=2<arguments.length?arguments[2]:[];if(!this.IsCallable(ke))throw new TypeError(ke+" is not a function");return ke.apply(we,ve)},ToPrimitive:te,ToNumber:function(ke){var we=ee(ke)?ke:te(ke,"number");if("symbol"==typeof we)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof we){if(oe(we))return this.ToNumber(ae(ne(we,2),2));if(le(we))return this.ToNumber(ae(ne(we,2),8));if(ue(we)||me(we))return NaN;var ve=fe(we);if(ve!==we)return this.ToNumber(ve)}return+we},ToInt16:function(ke){var we=this.ToUint16(ke);return 32768<=we?we-65536:we},ToInt8:function(ke){var we=this.ToUint8(ke);return 128<=we?we-256:we},ToUint8:function(ke){var we=this.ToNumber(ke);if(G(we)||0===we||!Z(we))return 0;var ve=$(we)*Math.floor(Math.abs(we));return J(ve,256)},ToUint8Clamp:function(ke){var we=this.ToNumber(ke);if(G(we)||0>=we)return 0;if(255<=we)return 255;var ve=Math.floor(ke);return ve+0.5<we?ve+1:we<ve+0.5?ve:0==ve%2?ve:ve+1},ToString:function(ke){if("symbol"==typeof ke)throw new TypeError("Cannot convert a Symbol value to a string");return ke+""},ToObject:function(ke){return this.RequireObjectCoercible(ke),Object(ke)},ToPropertyKey:function(ke){var we=this.ToPrimitive(ke,String);return"symbol"==typeof we?E.call(we):this.ToString(we)},ToLength:function(ke){var we=this.ToInteger(ke);return 0>=we?0:we>W?W:we},CanonicalNumericIndexString:function(ke){if("[object String]"!==T.call(ke))throw new TypeError("must be a string");if("-0"===ke)return-0;var we=this.ToNumber(ke);return this.SameValue(this.ToString(we),ke)?we:void 0},RequireObjectCoercible:_e.CheckObjectCoercible,IsArray:Array.isArray||function(ke){return"[object Array]"===T.call(ke)},IsConstructor:function(ke){return"function"==typeof ke&&!!ke.prototype},IsExtensible:function(ke){return!Object.preventExtensions||!ee(ke)&&Object.isExtensible(ke)},IsInteger:function(ke){if("number"!=typeof ke||G(ke)||!Z(ke))return!1;var we=Math.abs(ke);return Math.floor(we)===we},IsPropertyKey:function(ke){return"string"==typeof ke||"symbol"==typeof ke},IsRegExp:function(ke){if(!ke||"object"!=typeof ke)return!1;if(L){var we=ke[Symbol.match];if("undefined"!=typeof we)return _e.ToBoolean(we)}return be(ke)},SameValueZero:function(ke,we){return ke===we||G(ke)&&G(we)},Type:function(ke){return"symbol"==typeof ke?"Symbol":_e.Type(ke)},SpeciesConstructor:function(ke,we){if("Object"!==this.Type(ke))throw new TypeError("Assertion failed: Type(O) is not Object");var ve=ke.constructor;if("undefined"==typeof ve)return we;if("Object"!==this.Type(ve))throw new TypeError("O.constructor is not an Object");var Me=L&&Symbol.species?ve[Symbol.species]:void 0;if(null==Me)return we;if(this.IsConstructor(Me))return Me;throw new TypeError("no constructor found")}});delete ye.CheckObjectCoercible,R.exports=ye},{"./es5":24,"./helpers/assign":26,"./helpers/isFinite":27,"./helpers/isNaN":28,"./helpers/isPrimitive":29,"./helpers/mod":30,"./helpers/sign":31,"es-to-primitive/es6":33,"function-bind":43,"is-regex":54}],26:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty;R.exports=Object.assign||function(E,G){for(var Z in G)T.call(G,Z)&&(E[Z]=G[Z]);return E}},{}],27:[function(I,R){"use strict";var T=Number.isNaN||function(L){return L!==L};R.exports=Number.isFinite||function(L){return"number"==typeof L&&!T(L)&&L!==1/0&&L!==-(1/0)}},{}],28:[function(I,R){"use strict";R.exports=Number.isNaN||function(L){return L!==L}},{}],29:[function(I,R){"use strict";R.exports=function(L){return null===L||"function"!=typeof L&&"object"!=typeof L}},{}],30:[function(I,R){"use strict";R.exports=function(L,E){var G=L%E;return Math.floor(0<=G?G:G+E)}},{}],31:[function(I,R){"use strict";R.exports=function(L){return 0<=L?1:-1}},{}],32:[function(I,R){"use strict";var T=Object.prototype.toString,L=I("./helpers/isPrimitive"),E=I("is-callable"),G={"[[DefaultValue]]":function(W,Q){var $=Q||("[object Date]"===T.call(W)?String:Number);if($===String||$===Number){var J=$===String?["toString","valueOf"]:["valueOf","toString"],ee,te;for(te=0;te<J.length;++te)if(E(W[J[te]])&&(ee=W[J[te]](),L(ee)))return ee;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};R.exports=function(W,Q){return L(W)?W:G["[[DefaultValue]]"](W,Q)}},{"./helpers/isPrimitive":34,"is-callable":50}],33:[function(I,R){"use strict";var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,L=I("./helpers/isPrimitive"),E=I("is-callable"),G=I("is-date-object"),Z=I("is-symbol"),W=function(J,ee){if("undefined"==typeof J||null===J)throw new TypeError("Cannot call method on "+J);if("string"!=typeof ee||"number"!==ee&&"string"!==ee)throw new TypeError("hint must be \"string\" or \"number\"");var te="string"===ee?["toString","valueOf"]:["valueOf","toString"],ae,ie,ne;for(ne=0;ne<te.length;++ne)if(ae=J[te[ne]],E(ae)&&(ie=ae.call(J),L(ie)))return ie;throw new TypeError("No default value")},Q=function(J,ee){var te=J[ee];if(null!==te&&"undefined"!=typeof te){if(!E(te))throw new TypeError(te+" returned for property "+ee+" of object "+J+" is not a function");return te}};R.exports=function(J,ee){if(L(J))return J;var te="default";1<arguments.length&&(ee===String?te="string":ee===Number&&(te="number"));var ae;if(T&&(Symbol.toPrimitive?ae=Q(J,Symbol.toPrimitive):Z(J)&&(ae=Symbol.prototype.valueOf)),"undefined"!=typeof ae){var ie=ae.call(J,te);if(L(ie))return ie;throw new TypeError("unable to convert exotic object to primitive")}return"default"==te&&(G(J)||Z(J))&&(te="string"),W(J,"default"==te?"number":te)}},{"./helpers/isPrimitive":34,"is-callable":50,"is-date-object":51,"is-symbol":55}],34:[function(I,R,T){arguments[4][29][0].apply(T,arguments)},{dup:29}],35:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty,L=Object.prototype.toString,E=function(W){return"function"==typeof Array.isArray?Array.isArray(W):"[object Array]"===L.call(W)},G=function(W){if(!W||"[object Object]"!==L.call(W))return!1;var Q=T.call(W,"constructor"),$=W.constructor&&W.constructor.prototype&&T.call(W.constructor.prototype,"isPrototypeOf");if(W.constructor&&!Q&&!$)return!1;for(var J in W);return"undefined"==typeof J||T.call(W,J)};R.exports=function Z(){var ae=arguments[0],ie=1,ne=arguments.length,oe=!1,W,Q,$,J,ee,te;for("boolean"==typeof ae?(oe=ae,ae=arguments[1]||{},ie=2):("object"!=typeof ae&&"function"!=typeof ae||null==ae)&&(ae={});ie<ne;++ie)if(W=arguments[ie],null!=W)for(Q in W)$=ae[Q],J=W[Q],ae!==J&&(oe&&J&&(G(J)||(ee=E(J)))?(ee?(ee=!1,te=$&&E($)?$:[]):te=$&&G($)?$:{},ae[Q]=Z(oe,te,J)):"undefined"!=typeof J&&(ae[Q]=J));return ae}},{}],36:[function(I,R){"use strict";var T=I("iobuffer"),L=I("tiff");R.exports=function(G){var Z=new T(G),W={};Z.setBigEndian();var Q=Z.readUint16();if(65496!==Q)throw new Error("SOI marker not found. Not a valid JPEG file");var $=Z.readUint16();if(65505===$){Z.readUint16();var J=Z.readBytes(6);if(69===J[0]&&120===J[1]&&105===J[2]&&102===J[3]&&0===J[4]&&0===J[5]){var ee=L.decode(Z,{onlyFirst:!0,ignoreImageData:!0,offset:Z.offset});W.exif=ee}}return W}},{iobuffer:48,tiff:138}],37:[function(I,R,T){"use strict";T.decode=I("./decode")},{"./decode":36}],38:[function(I,R){"use strict";function T(te,ae,ie){for(var ne=0;ne<ie;ne++)ae[ne]=te[ne]}function L(te,ae,ie,ne){for(var oe=0;oe<ne;oe++)ae[oe]=te[oe];for(;oe<ie;oe++)ae[oe]=255&te[oe]+ae[oe-ne]}function E(te,ae,ie,ne){var oe=0;if(0===ie.length)for(;oe<ne;oe++)ae[oe]=te[oe];else for(;oe<ne;oe++)ae[oe]=255&te[oe]+ie[oe]}function G(te,ae,ie,ne,oe){var le=0;if(0===ie.length){for(;le<oe;le++)ae[le]=te[le];for(;le<ne;le++)ae[le]=255&te[le]+(ae[le-oe]>>1)}else{for(;le<oe;le++)ae[le]=255&te[le]+(ie[le]>>1);for(;le<ne;le++)ae[le]=255&te[le]+(ae[le-oe]+ie[le]>>1)}}function Z(te,ae,ie,ne,oe){var le=0;if(0===ie.length){for(;le<oe;le++)ae[le]=te[le];for(;le<ne;le++)ae[le]=255&te[le]+ae[le-oe]}else{for(;le<oe;le++)ae[le]=255&te[le]+ie[le];for(;le<ne;le++)ae[le]=255&te[le]+W(ae[le-oe],ie[le],ie[le-oe])}}function W(te,ae,ie){var ne=te+ae-ie,oe=Math.abs(ne-te),le=Math.abs(ne-ae),se=Math.abs(ne-ie);if(oe<=le&&oe<=se)return te;return le<=se?ae:ie}var Q=I("iobuffer"),$=I("pako").Inflate,J=new Uint8Array(0),ee=[137,80,78,71,13,10,26,10];R.exports=class extends Q{constructor(ae){super(ae),this._decoded=!1,this._inflator=new $,this._png=null,this._end=!1,this.setBigEndian()}decode(){if(this._decoded)return this._png;for(this._png={tEXt:{}},this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(var ae=0;8>ae;ae++)if(this.readUint8()!==ee[ae])throw new Error(`Wrong PNG signature. Byte at ${ae} should be ${ee[ae]}.`)}decodeChunk(){var ae=this.readUint32(),ie=this.readChars(4),ne=this.offset;switch(ie){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(ae);break;case"IDAT":this.decodeIDAT(ae);break;case"tEXt":this.decodetEXt(ae);break;case"IEND":this._end=!0;break;default:this.skip(ae);}if(this.offset-ne!==ae)throw new Error("Length mismatch while decoding chunk "+ie);this.readUint32()}decodeIHDR(){var ae=this._png;if(ae.width=this.readUint32(),ae.height=this.readUint32(),ae.bitDepth=this.readUint8(),ae.colourType=this.readUint8(),ae.compressionMethod=this.readUint8(),ae.filterMethod=this.readUint8(),ae.interlaceMethod=this.readUint8(),0!==this._png.compressionMethod)throw new Error("Unsupported compression method: "+ae.compressionMethod)}decodePLTE(ae){if(0!=ae%3)throw new RangeError("PLTE field length must be a multiple of 3. Got "+ae);var ie=ae/3;this._hasPalette=!0;var ne=this._palette=Array(ie);for(var oe=0;oe<ie;oe++)ne[oe]=[this.readUint8(),this.readUint8(),this.readUint8()]}decodeIDAT(ae){this._inflator.push(new Uint8Array(this.buffer,this.offset,ae)),this.skip(ae)}decodetEXt(ae){for(var ie="",ne;"\0"!==(ne=this.readChar());)ie+=ne;this._png.tEXt[ie]=this.readChars(ae-ie.length-1)}decodeImage(){if(this._inflator.push(J,!0),this._inflator.err)throw new Error("Error while decompressing the data");var ae=this._inflator.result;if(this._inflator=null,0!==this._png.filterMethod)throw new Error("Filter method "+this._png.filterMethod+" not supported");if(0===this._png.interlaceMethod)this.decodeInterlaceNull(ae);else throw new Error("Interlace method "+this._png.interlaceMethod+" not supported")}decodeInterlaceNull(ae){var ie;switch(this._png.colourType){case 0:ie=1;break;case 2:ie=3;break;case 3:if(!this._hasPalette)throw new Error("Missing palette");ie=1;break;case 4:ie=2;break;case 6:ie=4;break;default:throw new Error("Unknown colour type: "+this._png.colourType);}var ne=this._png.height,oe=ie*this._png.bitDepth/8,le=this._png.width*oe,se=new Uint8Array(this._png.height*le),de=J,ue=0,he,me;for(var ce=0;ce<ne;ce++){switch(he=ae.subarray(ue+1,ue+1+le),me=se.subarray(ce*le,(ce+1)*le),ae[ue]){case 0:T(he,me,le);break;case 1:L(he,me,le,oe);break;case 2:E(he,me,de,le);break;case 3:G(he,me,de,le,oe);break;case 4:Z(he,me,de,le,oe);break;default:throw new Error("Unsupported filter: "+ae[ue]);}de=me,ue+=le+1}this._hasPalette&&(this._png.palette=this._palette),this._png.data=se}}},{iobuffer:48,pako:119}],39:[function(I,R,T){"use strict";T.PNGDecoder=I("./PNGDecoder")},{"./PNGDecoder":38}],40:[function(I,R){"use strict";R.exports=function(T){return T&&1<T.length?255===T[0]&&216===T[1]&&255===T[2]?{ext:"jpg",mime:"image/jpeg"}:137===T[0]&&80===T[1]&&78===T[2]&&71===T[3]?{ext:"png",mime:"image/png"}:71===T[0]&&73===T[1]&&70===T[2]?{ext:"gif",mime:"image/gif"}:87===T[8]&&69===T[9]&&66===T[10]&&80===T[11]?{ext:"webp",mime:"image/webp"}:70===T[0]&&76===T[1]&&73===T[2]&&70===T[3]?{ext:"flif",mime:"image/flif"}:(73===T[0]&&73===T[1]&&42===T[2]&&0===T[3]||77===T[0]&&77===T[1]&&0===T[2]&&42===T[3])&&67===T[8]&&82===T[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===T[0]&&73===T[1]&&42===T[2]&&0===T[3]||77===T[0]&&77===T[1]&&0===T[2]&&42===T[3]?{ext:"tif",mime:"image/tiff"}:66===T[0]&&77===T[1]?{ext:"bmp",mime:"image/bmp"}:73===T[0]&&73===T[1]&&188===T[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===T[0]&&66===T[1]&&80===T[2]&&83===T[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===T[0]&&75===T[1]&&3===T[2]&&4===T[3]&&109===T[30]&&105===T[31]&&109===T[32]&&101===T[33]&&116===T[34]&&121===T[35]&&112===T[36]&&101===T[37]&&97===T[38]&&112===T[39]&&112===T[40]&&108===T[41]&&105===T[42]&&99===T[43]&&97===T[44]&&116===T[45]&&105===T[46]&&111===T[47]&&110===T[48]&&47===T[49]&&101===T[50]&&112===T[51]&&117===T[52]&&98===T[53]&&43===T[54]&&122===T[55]&&105===T[56]&&112===T[57]?{ext:"epub",mime:"application/epub+zip"}:80===T[0]&&75===T[1]&&3===T[2]&&4===T[3]&&77===T[30]&&69===T[31]&&84===T[32]&&65===T[33]&&45===T[34]&&73===T[35]&&78===T[36]&&70===T[37]&&47===T[38]&&109===T[39]&&111===T[40]&&122===T[41]&&105===T[42]&&108===T[43]&&108===T[44]&&97===T[45]&&46===T[46]&&114===T[47]&&115===T[48]&&97===T[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80===T[0]&&75===T[1]&&(3===T[2]||5===T[2]||7===T[2])&&(4===T[3]||6===T[3]||8===T[3])?{ext:"zip",mime:"application/zip"}:117===T[257]&&115===T[258]&&116===T[259]&&97===T[260]&&114===T[261]?{ext:"tar",mime:"application/x-tar"}:82===T[0]&&97===T[1]&&114===T[2]&&33===T[3]&&26===T[4]&&7===T[5]&&(0===T[6]||1===T[6])?{ext:"rar",mime:"application/x-rar-compressed"}:31===T[0]&&139===T[1]&&8===T[2]?{ext:"gz",mime:"application/gzip"}:66===T[0]&&90===T[1]&&104===T[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===T[0]&&122===T[1]&&188===T[2]&&175===T[3]&&39===T[4]&&28===T[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===T[0]&&1===T[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===T[0]&&0===T[1]&&0===T[2]&&(24===T[3]||32===T[3])&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]||51===T[0]&&103===T[1]&&112===T[2]&&53===T[3]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&109===T[8]&&112===T[9]&&52===T[10]&&50===T[11]&&109===T[16]&&112===T[17]&&52===T[18]&&49===T[19]&&109===T[20]&&112===T[21]&&52===T[22]&&50===T[23]&&105===T[24]&&115===T[25]&&111===T[26]&&109===T[27]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&105===T[8]&&115===T[9]&&111===T[10]&&109===T[11]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&109===T[8]&&112===T[9]&&52===T[10]&&50===T[11]&&0===T[12]&&0===T[13]&&0===T[14]&&0===T[15]?{ext:"mp4",mime:"video/mp4"}:0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&77===T[8]&&52===T[9]&&86===T[10]?{ext:"m4v",mime:"video/x-m4v"}:77===T[0]&&84===T[1]&&104===T[2]&&100===T[3]?{ext:"mid",mime:"audio/midi"}:109===T[31]&&97===T[32]&&116===T[33]&&114===T[34]&&111===T[35]&&115===T[36]&&107===T[37]&&97===T[38]?{ext:"mkv",mime:"video/x-matroska"}:26===T[0]&&69===T[1]&&223===T[2]&&163===T[3]?{ext:"webm",mime:"video/webm"}:0===T[0]&&0===T[1]&&0===T[2]&&20===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]?{ext:"mov",mime:"video/quicktime"}:82===T[0]&&73===T[1]&&70===T[2]&&70===T[3]&&65===T[8]&&86===T[9]&&73===T[10]?{ext:"avi",mime:"video/x-msvideo"}:48===T[0]&&38===T[1]&&178===T[2]&&117===T[3]&&142===T[4]&&102===T[5]&&207===T[6]&&17===T[7]&&166===T[8]&&217===T[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===T[0]&&0===T[1]&&1===T[2]&&"b"===T[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===T[0]&&68===T[1]&&51===T[2]||255===T[0]&&251===T[1]?{ext:"mp3",mime:"audio/mpeg"}:102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&77===T[8]&&52===T[9]&&65===T[10]||77===T[0]&&52===T[1]&&65===T[2]&&32===T[3]?{ext:"m4a",mime:"audio/m4a"}:79===T[28]&&112===T[29]&&117===T[30]&&115===T[31]&&72===T[32]&&101===T[33]&&97===T[34]&&100===T[35]?{ext:"opus",mime:"audio/opus"}:79===T[0]&&103===T[1]&&103===T[2]&&83===T[3]?{ext:"ogg",mime:"audio/ogg"}:102===T[0]&&76===T[1]&&97===T[2]&&67===T[3]?{ext:"flac",mime:"audio/x-flac"}:82===T[0]&&73===T[1]&&70===T[2]&&70===T[3]&&87===T[8]&&65===T[9]&&86===T[10]&&69===T[11]?{ext:"wav",mime:"audio/x-wav"}:35===T[0]&&33===T[1]&&65===T[2]&&77===T[3]&&82===T[4]&&10===T[5]?{ext:"amr",mime:"audio/amr"}:37===T[0]&&80===T[1]&&68===T[2]&&70===T[3]?{ext:"pdf",mime:"application/pdf"}:77===T[0]&&90===T[1]?{ext:"exe",mime:"application/x-msdownload"}:(67===T[0]||70===T[0])&&87===T[1]&&83===T[2]?{ext:"swf",mime:"application/x-shockwave-flash"}:123===T[0]&&92===T[1]&&114===T[2]&&116===T[3]&&102===T[4]?{ext:"rtf",mime:"application/rtf"}:119===T[0]&&79===T[1]&&70===T[2]&&70===T[3]&&(0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]||79===T[4]&&84===T[5]&&84===T[6]&&79===T[7])?{ext:"woff",mime:"application/font-woff"}:119===T[0]&&79===T[1]&&70===T[2]&&50===T[3]&&(0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]||79===T[4]&&84===T[5]&&84===T[6]&&79===T[7])?{ext:"woff2",mime:"application/font-woff"}:76===T[34]&&80===T[35]&&(0===T[8]&&0===T[9]&&1===T[10]||1===T[8]&&0===T[9]&&2===T[10]||2===T[8]&&0===T[9]&&2===T[10])?{ext:"eot",mime:"application/octet-stream"}:0===T[0]&&1===T[1]&&0===T[2]&&0===T[3]&&0===T[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===T[0]&&84===T[1]&&84===T[2]&&79===T[3]&&0===T[4]?{ext:"otf",mime:"application/font-sfnt"}:0===T[0]&&0===T[1]&&1===T[2]&&0===T[3]?{ext:"ico",mime:"image/x-icon"}:70===T[0]&&76===T[1]&&86===T[2]&&1===T[3]?{ext:"flv",mime:"video/x-flv"}:37===T[0]&&33===T[1]?{ext:"ps",mime:"application/postscript"}:253===T[0]&&55===T[1]&&122===T[2]&&88===T[3]&&90===T[4]&&0===T[5]?{ext:"xz",mime:"application/x-xz"}:83===T[0]&&81===T[1]&&76===T[2]&&105===T[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===T[0]&&69===T[1]&&83===T[2]&&26===T[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===T[0]&&114===T[1]&&50===T[2]&&52===T[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===T[0]&&83===T[1]&&67===T[2]&&70===T[3]||73===T[0]&&83===T[1]&&99===T[2]&&40===T[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===T[0]&&60===T[1]&&97===T[2]&&114===T[3]&&99===T[4]&&104===T[5]&&62===T[6]&&10===T[7]&&100===T[8]&&101===T[9]&&98===T[10]&&105===T[11]&&97===T[12]&&110===T[13]&&45===T[14]&&98===T[15]&&105===T[16]&&110===T[17]&&97===T[18]&&114===T[19]&&121===T[20]?{ext:"deb",mime:"application/x-deb"}:33===T[0]&&60===T[1]&&97===T[2]&&114===T[3]&&99===T[4]&&104===T[5]&&62===T[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===T[0]&&171===T[1]&&238===T[2]&&219===T[3]?{ext:"rpm",mime:"application/x-rpm"}:31===T[0]&&160===T[1]||31===T[0]&&157===T[1]?{ext:"Z",mime:"application/x-compress"}:76===T[0]&&90===T[1]&&73===T[2]&&80===T[3]?{ext:"lz",mime:"application/x-lzip"}:208===T[0]&&207===T[1]&&17===T[2]&&224===T[3]&&161===T[4]&&177===T[5]&&26===T[6]&&225===T[7]?{ext:"msi",mime:"application/x-msi"}:null:null}},{}],41:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty,L=Object.prototype.toString;R.exports=function(G,Z,W){if("[object Function]"!==L.call(Z))throw new TypeError("iterator must be a function");var Q=G.length;if(Q===+Q)for(var $=0;$<Q;$++)Z.call(W,G[$],$,G);else for(var J in G)T.call(G,J)&&Z.call(W,G[J],J,G)}},{}],42:[function(I,R){"use strict";var T=Array.prototype.slice,L=Object.prototype.toString;R.exports=function(G){var Z=this;if("function"!=typeof Z||"[object Function]"!==L.call(Z))throw new TypeError("Function.prototype.bind called on incompatible "+Z);var W=T.call(arguments,1),$=Math.max(0,Z.length-W.length),J=[],Q;for(var ee=0;ee<$;ee++)J.push("$"+ee);if(Q=Function("binder","return function ("+J.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof Q){var ie=Z.apply(this,W.concat(T.call(arguments)));return Object(ie)===ie?ie:this}return Z.apply(G,W.concat(T.call(arguments)))}),Z.prototype){var te=function(){};te.prototype=Z.prototype,Q.prototype=new te,te.prototype=null}return Q}},{}],43:[function(I,R){"use strict";var T=I("./implementation");R.exports=Function.prototype.bind||T},{"./implementation":42}],44:[function(I,R,T){"use strict";var L=Object.prototype.hasOwnProperty;R.exports=T=function(G,Z){return L.call(Z,G)},T.version=I("./package").version},{"./package":45}],45:[function(I,R){R.exports={name:"has-own",version:"1.0.0",description:"A safer .hasOwnProperty() - hasOwn(name, obj)",main:"index.js",scripts:{test:"make test"},author:"Aaron Heckmann <aaron.heckmann+github@gmail.com>",license:"MIT",repository:{type:"git",url:"git://github.com/pebble/has-own.git"},homepage:"https://github.com/pebble/has-own/",devDependencies:{mocha:"^1.21.0"}}},{}],46:[function(I,R){"use strict";var T=I("file-type");R.exports=function(L){var E=T(L);return-1===["jpg","png","gif","webp","tif","bmp","jxr","psd"].indexOf(E&&E.ext)?null:E}},{"file-type":40}],47:[function(I,R){(function(T){"use strict";function L(){J=!0;for(var ie=ee.length,te,ae;ie;){for(ae=ee,ee=[],te=-1;++te<ie;)ae[te]();ie=ee.length}J=!1}var E=T.MutationObserver||T.WebKitMutationObserver,G;if(E){var Z=0,W=new E(L),Q=T.document.createTextNode("");W.observe(Q,{characterData:!0}),G=function(){Q.data=Z=++Z%2}}else if(!T.setImmediate&&"undefined"!=typeof T.MessageChannel){var $=new T.MessageChannel;$.port1.onmessage=L,G=function(){$.port2.postMessage(0)}}else G="document"in T&&"onreadystatechange"in T.document.createElement("script")?function(){var ae=T.document.createElement("script");ae.onreadystatechange=function(){L(),ae.onreadystatechange=null,ae.parentNode.removeChild(ae),ae=null},T.document.documentElement.appendChild(ae)}:function(){setTimeout(L,0)};var J,ee=[];R.exports=function(ae){1!==ee.push(ae)||J||G()}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],48:[function(I,R){"use strict";var T=8192,L=[];R.exports=class{constructor(G,Z){Z=Z||{},G===void 0&&(G=T),"number"==typeof G&&(G=new ArrayBuffer(G));var W=G.byteLength,Q=Z.offset?Z.offset>>>0:0;G.buffer&&(W=G.byteLength-Q,G=G.byteLength===G.buffer.byteLength?Q?G.buffer.slice(Q):G.buffer:G.buffer.slice(G.byteOffset+Q,G.byteOffset+G.byteLength)),this.buffer=G,this.length=W,this.byteLength=W,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=W||T,this._mark=0}available(G){return void 0===G&&(G=1),this.offset+G<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(G){G===void 0&&(G=1),this.offset+=G}seek(G){this.offset=G}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(G){if(void 0===G&&(G=1),!this.available(G)){var Z=this._increment+this._increment;this._increment=Z;var W=this.length+Z,Q=new Uint8Array(W);Q.set(new Uint8Array(this.buffer)),this.buffer=Q.buffer,this.length=W,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(G){G===void 0&&(G=1);var Z=new Uint8Array(G);for(var W=0;W<G;W++)Z[W]=this.readByte();return Z}readInt16(){var G=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,G}readUint16(){var G=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,G}readInt32(){var G=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,G}readUint32(){var G=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,G}readFloat32(){var G=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,G}readFloat64(){var G=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,G}readChar(){return String.fromCharCode(this.readInt8())}readChars(G){G===void 0&&(G=1),L.length=G;for(var Z=0;Z<G;Z++)L[Z]=this.readChar();return L.join("")}writeBoolean(G){this.writeUint8(G?255:0)}writeInt8(G){this.ensureAvailable(1),this._data.setInt8(this.offset++,G)}writeUint8(G){this.ensureAvailable(1),this._data.setUint8(this.offset++,G)}writeByte(G){this.writeUint8(G)}writeBytes(G){this.ensureAvailable(G.length);for(var Z=0;Z<G.length;Z++)this._data.setUint8(this.offset++,G[Z])}writeInt16(G){this.ensureAvailable(2),this._data.setInt16(this.offset,G,this.littleEndian),this.offset+=2}writeUint16(G){this.ensureAvailable(2),this._data.setUint16(this.offset,G,this.littleEndian),this.offset+=2}writeInt32(G){this.ensureAvailable(4),this._data.setInt32(this.offset,G,this.littleEndian),this.offset+=4}writeUint32(G){this.ensureAvailable(4),this._data.setUint32(this.offset,G,this.littleEndian),this.offset+=4}writeFloat32(G){this.ensureAvailable(4),this._data.setFloat32(this.offset,G,this.littleEndian),this.offset+=4}writeFloat64(G){this.ensureAvailable(8),this._data.setFloat64(this.offset,G,this.littleEndian),this.offset+=8}writeChar(G){this.writeUint8(G.charCodeAt(0))}writeChars(G){for(var Z=0;Z<G.length;Z++)this.writeUint8(G.charCodeAt(Z))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},{}],49:[function(I,R){"use strict";var T=Object.prototype.toString;R.exports=function(E){return"Array"===T.call(E).substr(-6,5)}},{}],50:[function(I,R){"use strict";var T=Function.prototype.toString,L=/^\s*class /,E=function($){try{var J=T.call($),ee=J.replace(/\/\/.*\n/g,""),te=ee.replace(/\/\*[.\s\S]*\*\//g,""),ae=te.replace(/\n/mg," ").replace(/ {2}/g," ");return L.test(ae)}catch(ie){return!1}},G=function($){try{return!E($)&&(T.call($),!0)}catch(J){return!1}},Z=Object.prototype.toString,W="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function($){if(!$)return!1;if("function"!=typeof $&&"object"!=typeof $)return!1;if(W)return G($);if(E($))return!1;var J=Z.call($);return"[object Function]"===J||"[object GeneratorFunction]"===J}},{}],51:[function(I,R){"use strict";var T=Date.prototype.getDay,L=function(W){try{return T.call(W),!0}catch(Q){return!1}},E=Object.prototype.toString,G="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function(W){return"object"!=typeof W||null===W?!1:G?L(W):"[object Date]"===E.call(W)}},{}],52:[function(I,R){"use strict";var T=I("number-is-nan");R.exports=Number.isFinite||function(L){return!("number"!=typeof L||T(L)||L===1/0||L===-(1/0))}},{"number-is-nan":116}],53:[function(I,R){"use strict";var T=I("is-finite");R.exports=Number.isInteger||function(L){return"number"==typeof L&&T(L)&&Math.floor(L)===L}},{"is-finite":52}],54:[function(I,R){"use strict";var T=RegExp.prototype.exec,L=function(W){try{return T.call(W),!0}catch(Q){return!1}},E=Object.prototype.toString,G="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;R.exports=function(W){return!("object"!=typeof W)&&(G?L(W):"[object RegExp]"===E.call(W))}},{}],55:[function(I,R){"use strict";var T=Object.prototype.toString,L="function"==typeof Symbol&&"symbol"==typeof Symbol();if(L){var E=Symbol.prototype.toString,G=/^Symbol\(.*\)$/,Z=function(Q){return!("symbol"!=typeof Q.valueOf())&&G.test(E.call(Q))};R.exports=function(Q){if("symbol"==typeof Q)return!0;if("[object Symbol]"!==T.call(Q))return!1;try{return Z(Q)}catch($){return!1}}}else R.exports=function(){return!1}},{}],56:[function(I,R,T){(function(L){"use strict";(function(E){if("object"==typeof T&&"undefined"!=typeof R)R.exports=E();else if("function"==typeof define&&define.amd)define([],E);else{var G;G="undefined"==typeof window?"undefined"==typeof L?"undefined"==typeof self?this:self:L:window,G.PriorityQueue=E()}})(function(){return function E(G,Z,W){function Q(ee,te){if(!Z[ee]){if(!G[ee]){var ae="function"==typeof I&&I;if(!te&&ae)return ae(ee,!0);if($)return $(ee,!0);var ie=new Error("Cannot find module '"+ee+"'");throw ie.code="MODULE_NOT_FOUND",ie}var ne=Z[ee]={exports:{}};G[ee][0].call(ne.exports,function(oe){var le=G[ee][1][oe];return Q(le?le:oe)},ne,ne.exports,E,G,Z,W)}return Z[ee].exports}var $="function"==typeof I&&I;for(var J=0;J<W.length;J++)Q(W[J]);return Q}({1:[function(E,G){var ee=function(ie,ne){function oe(){this.constructor=ie}for(var le in ne)te.call(ne,le)&&(ie[le]=ne[le]);return oe.prototype=ne.prototype,ie.prototype=new oe,ie.__super__=ne.prototype,ie},te={}.hasOwnProperty,Z,W,Q,$,J;Z=E("./PriorityQueue/AbstractPriorityQueue"),W=E("./PriorityQueue/ArrayStrategy"),$=E("./PriorityQueue/BinaryHeapStrategy"),Q=E("./PriorityQueue/BHeapStrategy"),J=function(ae){function ie(ne){ne||(ne={}),ne.strategy||(ne.strategy=$),ne.comparator||(ne.comparator=function(oe,le){return(oe||0)-(le||0)}),ie.__super__.constructor.call(this,ne)}return ee(ie,ae),ie}(Z),J.ArrayStrategy=W,J.BinaryHeapStrategy=$,J.BHeapStrategy=Q,G.exports=J},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(E,G){var Z;G.exports=Z=function(){function W(Q){var $;if(null==(null==Q?void 0:Q.strategy))throw"Must pass options.strategy, a strategy";if(null==(null==Q?void 0:Q.comparator))throw"Must pass options.comparator, a comparator";this.priv=new Q.strategy(Q),this.length=(null==Q||null==($=Q.initialValues)?void 0:$.length)||0}return W.prototype.queue=function(Q){return this.length++,this.priv.queue(Q),void 0},W.prototype.dequeue=function(){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},W.prototype.peek=function(){if(!this.length)throw"Empty queue";return this.priv.peek()},W.prototype.clear=function(){return this.length=0,this.priv.clear()},W}()},{}],3:[function(E,G){var Z,W;W=function($,J,ee){var te,ae,ie;for(ae=0,te=$.length;ae<te;)ie=ae+te>>>1,0<=ee($[ie],J)?ae=ie+1:te=ie;return ae},G.exports=Z=function(){function Q($){var J;this.options=$,this.comparator=this.options.comparator,this.data=(null==(J=this.options.initialValues)?void 0:J.slice(0))||[],this.data.sort(this.comparator).reverse()}return Q.prototype.queue=function($){var J=W(this.data,$,this.comparator);return this.data.splice(J,0,$),void 0},Q.prototype.dequeue=function(){return this.data.pop()},Q.prototype.peek=function(){return this.data[this.data.length-1]},Q.prototype.clear=function(){return this.data.length=0,void 0},Q}()},{}],4:[function(E,G){var Z;G.exports=Z=function(){function W(Q){var $,J,ee,te,ae,ie,ne,oe,le;for(this.comparator=(null==Q?void 0:Q.comparator)||function(se,de){return se-de},this.pageSize=(null==Q?void 0:Q.pageSize)||512,this.length=0,oe=0;1<<oe<this.pageSize;)oe+=1;if(1<<oe!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=oe,this._emptyMemoryPageTemplate=$=[],(J=ee=0,ie=this.pageSize);0<=ie?ee<ie:ee>ie;J=0<=ie?++ee:--ee)$.push(null);if(this._memory=[],this._mask=this.pageSize-1,Q.initialValues)for(ne=Q.initialValues,te=0,ae=ne.length;te<ae;te++)le=ne[te],this.queue(le)}return W.prototype.queue=function(Q){return this.length+=1,this._write(this.length,Q),this._bubbleUp(this.length,Q),void 0},W.prototype.dequeue=function(){var Q,$;return Q=this._read(1),$=this._read(this.length),this.length-=1,0<this.length&&(this._write(1,$),this._bubbleDown(1,$)),Q},W.prototype.peek=function(){return this._read(1)},W.prototype.clear=function(){return this.length=0,this._memory.length=0,void 0},W.prototype._write=function(Q,$){for(var J=Q>>this._shift;J>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[J][Q&this._mask]=$},W.prototype._read=function(Q){return this._memory[Q>>this._shift][Q&this._mask]},W.prototype._bubbleUp=function(Q,$){var J,ee,te,ae;for(J=this.comparator;1<Q&&(ee=Q&this._mask,Q<this.pageSize||3<ee?te=Q&~this._mask|ee>>1:2>ee?(te=Q-this.pageSize>>this._shift,te+=te&~(this._mask>>1),te|=this.pageSize>>1):te=Q-2,ae=this._read(te),!(0>J(ae,$)));)this._write(te,$),this._write(Q,ae),Q=te;0},W.prototype._bubbleDown=function(Q,$){var J,ee,te,ae,ie;for(ie=this.comparator;Q<this.length;)if(Q>this._mask&&!(Q&this._mask-1)?J=ee=Q+2:Q&this.pageSize>>1?(J=(Q&~this._mask)>>1,J|=Q&this._mask>>1,J=J+1<<this._shift,ee=J+1):(J=Q+(Q&this._mask),ee=J+1),J!==ee&&ee<=this.length){if(te=this._read(J),ae=this._read(ee),0>ie(te,$)&&0>=ie(te,ae))this._write(J,$),this._write(Q,te),Q=J;else if(0>ie(ae,$))this._write(ee,$),this._write(Q,ae),Q=ee;else break;}else if(!(J<=this.length))break;else if(te=this._read(J),0>ie(te,$))this._write(J,$),this._write(Q,te),Q=J;else break;0},W}()},{}],5:[function(E,G){var Z;G.exports=Z=function(){function W(Q){var $;this.comparator=(null==Q?void 0:Q.comparator)||function(J,ee){return J-ee},this.length=0,this.data=(null==($=Q.initialValues)?void 0:$.slice(0))||[],this._heapify()}return W.prototype._heapify=function(){var Q,$,J;if(0<this.data.length)for(Q=$=1,J=this.data.length;1<=J?$<J:$>J;Q=1<=J?++$:--$)this._bubbleUp(Q);0},W.prototype.queue=function(Q){return this.data.push(Q),this._bubbleUp(this.data.length-1),void 0},W.prototype.dequeue=function(){var Q,$;return $=this.data[0],Q=this.data.pop(),0<this.data.length&&(this.data[0]=Q,this._bubbleDown(0)),$},W.prototype.peek=function(){return this.data[0]},W.prototype.clear=function(){return this.length=0,this.data.length=0,void 0},W.prototype._bubbleUp=function(Q){for(var $,J;0<Q&&($=Q-1>>>1,0>this.comparator(this.data[Q],this.data[$]));)J=this.data[$],this.data[$]=this.data[Q],this.data[Q]=J,Q=$;0},W.prototype._bubbleDown=function(Q){var $,J,ee,te,ae;for($=this.data.length-1;J=(Q<<1)+1,te=J+1,ee=Q,J<=$&&0>this.comparator(this.data[J],this.data[ee])&&(ee=J),te<=$&&0>this.comparator(this.data[te],this.data[ee])&&(ee=te),ee!==Q;)ae=this.data[ee],this.data[ee]=this.data[Q],this.data[Q]=ae,Q=ee;0},W}()},{}]},{},[1])(1)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],57:[function(I,R){"use strict";function T(){}function L(ie){if("function"!=typeof ie)throw new TypeError("resolver must be a function");this.state=ae,this.queue=[],this.outcome=void 0,ie!==T&&W(this,ie)}function E(ie,ne,oe){this.promise=ie,"function"==typeof ne&&(this.onFulfilled=ne,this.callFulfilled=this.otherCallFulfilled),"function"==typeof oe&&(this.onRejected=oe,this.callRejected=this.otherCallRejected)}function G(ie,ne,oe){$(function(){var le;try{le=ne(oe)}catch(se){return J.reject(ie,se)}le===ie?J.reject(ie,new TypeError("Cannot resolve promise with itself")):J.resolve(ie,le)})}function Z(ie){var ne=ie&&ie.then;if(ie&&"object"==typeof ie&&"function"==typeof ne)return function(){ne.apply(ie,arguments)}}function W(ie,ne){function oe(ue){se||(se=!0,J.reject(ie,ue))}function le(ue){se||(se=!0,J.resolve(ie,ue))}var se=!1,de=Q(function(){ne(le,oe)});"error"===de.status&&oe(de.value)}function Q(ie,ne){var oe={};try{oe.value=ie(ne),oe.status="success"}catch(le){oe.status="error",oe.value=le}return oe}var $=I("immediate"),J={},ee=["REJECTED"],te=["FULFILLED"],ae=["PENDING"];R.exports=L,L.prototype["catch"]=function(ie){return this.then(null,ie)},L.prototype.then=function(ie,ne){if("function"!=typeof ie&&this.state===te||"function"!=typeof ne&&this.state===ee)return this;var oe=new this.constructor(T);if(this.state!==ae){var le=this.state===te?ie:ne;G(oe,le,this.outcome)}else this.queue.push(new E(oe,ie,ne));return oe},E.prototype.callFulfilled=function(ie){J.resolve(this.promise,ie)},E.prototype.otherCallFulfilled=function(ie){G(this.promise,this.onFulfilled,ie)},E.prototype.callRejected=function(ie){J.reject(this.promise,ie)},E.prototype.otherCallRejected=function(ie){G(this.promise,this.onRejected,ie)},J.resolve=function(ie,ne){var oe=Q(Z,ne);if("error"===oe.status)return J.reject(ie,oe.value);var le=oe.value;if(le)W(ie,le);else{ie.state=te,ie.outcome=ne;for(var se=-1,de=ie.queue.length;++se<de;)ie.queue[se].callFulfilled(ne)}return ie},J.reject=function(ie,ne){ie.state=ee,ie.outcome=ne;for(var oe=-1,le=ie.queue.length;++oe<le;)ie.queue[oe].callRejected(ne);return ie},L.resolve=function(ne){return ne instanceof this?ne:J.resolve(new this(T),ne)},L.reject=function(ne){var oe=new this(T);return J.reject(oe,ne)},L.all=function(ne){function oe(ge,pe){le.resolve(ge).then(function(_e){ue[pe]=_e,++he!==se||de||(de=!0,J.resolve(ce,ue))},function(fe){de||(de=!0,J.reject(ce,fe))})}var le=this;if("[object Array]"!==Object.prototype.toString.call(ne))return this.reject(new TypeError("must be an array"));var se=ne.length,de=!1;if(!se)return this.resolve([]);for(var ue=Array(se),he=0,me=-1,ce=new this(T);++me<se;)oe(ne[me],me);return ce},L.race=function(ne){function oe(me){le.resolve(me).then(function(ce){de||(de=!0,J.resolve(he,ce))},function(ce){de||(de=!0,J.reject(he,ce))})}var le=this;if("[object Array]"!==Object.prototype.toString.call(ne))return this.reject(new TypeError("must be an array"));var se=ne.length,de=!1;if(!se)return this.resolve([]);for(var ue=-1,he=new this(T);++ue<se;)oe(ne[ue]);return he}},{immediate:47}],58:[function(I,R){"use strict";function T(E){var G=Array(E[0].length);for(var Z=0;Z<G.length;++Z)G[Z]=Array(E.length);for(Z=0;Z<E.length;++Z)for(var W=0;W<E[0].length;++W)G[W][Z]=E[Z][W];return G}var L=I("ml-stat").array;R.exports={coordArrayToPoints:function(G,Z){if(0!=G.length%Z)throw new RangeError("Dimensions number must be accordance with the size of the array.");var W=G.length/Z,Q=Array(W),$=0;for(var J=0;J<G.length;J+=Z){var ee=Array(Z);for(var te=0;te<Z;++te)ee[te]=G[J+te];Q[$]=ee,$++}return Q},coordArrayToCoordMatrix:function(G,Z){if(0!=G.length%Z)throw new RangeError("Dimensions number must be accordance with the size of the array.");var W=Array(Z),Q=G.length/Z;for(var $=0;$<W.length;$++)W[$]=Array(Q);for($=0;$<G.length;$+=Z)for(var J=0;J<Z;++J){var ee=Math.floor($/Z);W[J][ee]=G[$+J]}return W},coordMatrixToCoordArray:function(G){var Z=Array(G.length*G[0].length),W=0;for(var Q=0;Q<G[0].length;++Q)for(var $=0;$<G.length;++$)Z[W]=G[$][Q],++W;return Z},coordMatrixToPoints:T,pointsToCoordArray:function(G){var Z=Array(G.length*G[0].length),W=0;for(var Q=0;Q<G.length;++Q)for(var $=0;$<G[0].length;++$)Z[W]=G[Q][$],++W;return Z},pointsToCoordMatrix:T,applyDotProduct:function(G,Z){var W,Q;G.length<=Z.length?(Q=G,W=Z):(Q=Z,W=G);var $=W.length-Q.length+1,J=Array($);for(var ee=0;ee<$;++ee){var te=0;for(var ae=0;ae<Q.length;++ae)te+=Q[ae]*W[ee+ae];J[ee]=te}return J},scale:function(G,Z){var W;W=Z.inPlace?G:Array(G.length);var Q=Z.max,$=Z.min;if("number"==typeof Q){if("number"==typeof $){var J=L.minMax(G),ee=(Q-$)/(J.max-J.min);for(var te=0;te<W.length;te++)W[te]=(G[te]-J.min)*ee+$}else{var ae=L.max(G),ee=Q/ae;for(var te=0;te<W.length;te++)W[te]=G[te]*ee}}else if("number"==typeof $){var ae=L.min(G),ee=$/ae;for(var te=0;te<W.length;te++)W[te]=G[te]*ee}return W}}},{"ml-stat":111}],59:[function(I,R,T){"use strict";function L(Z,W,Q,$,J){function ee(we,ve,Me,je){return(je-ve)/(Me-we)}var te=Z.length,ae=($-Q)/(J-1),ie=Q-ae/2,ne=Array(J),oe=Z[1]-Z[0],le=Z[Z.length-1]-Z[Z.length-2],se=ie,de=ie+ae,ue=Number.MIN_VALUE,he=0,me=Z[0]-oe,ce=0,ge=0,pe=0,fe=0,_e=0,be=0,ye=0,xe=0;main:for(;!0;){for(;0<=me-de;){var ke=G(0,de-ue,pe,he);if(be=ge+ke,ne[xe]=(be-_e)/ae,xe++,xe===J)break main;se=de,de+=ae,_e=be}ue<=se&&se<=me&&(ke=G(0,se-ue,pe,he),_e=ge+ke),ge+=G(ue,me,pe,fe),ue=me,he=ce,ye<te?(me=Z[ye],ce=W[ye],ye++):ye===te&&(me+=le,ce=0),pe=ee(ue,he,me,ce),fe=-pe*ue+he}return ne}function E(Z,W,Q,$,J){var ee=Z.length,te=($-Q)/(J-1),ae=Z[Z.length-1]-Z[Z.length-2],ie=Q-te/2,ne=Array(J),oe=ie,le=ie+te,se=-Number.MAX_VALUE,de=0,ue=Z[0],he=W[0],me=0,ce=!0,ge=0,pe=0,fe=1,_e=0;main:for(;!0;){if(se>=ue)throw new Error("x must be an increasing serie");for(;0<se-le;){if(ce&&(pe++,ce=!1),ne[_e]=0>=pe?0:ge/pe,_e++,_e===J)break main;oe=le,le+=te,ge=0,pe=0}se>oe&&(ge+=de,pe++),(se==-Number.MAX_VALUE||1<me)&&pe--,se=ue,de=he,fe<ee?(ue=Z[fe],he=W[fe],fe++):(ue+=ae,he=0,me++)}return ne}function G(Z,W,Q,$){return 0.5*Q*W*W+$*W-(0.5*Q*Z*Z+$*Z)}T.getEquallySpacedData=function(W,Q,$){1<W.length&&W[0]>W[1]&&(W=W.slice().reverse(),Q=Q.slice().reverse());var J=W.length;if(J!==Q.length)throw new RangeError("the x and y vector doesn't have the same size.");$===void 0&&($={});var ee=$.from===void 0?W[0]:$.from;if(isNaN(ee)||!isFinite(ee))throw new RangeError("'From' value must be a number");var te=$.to===void 0?W[W.length-1]:$.to;if(isNaN(te)||!isFinite(te))throw new RangeError("'To' value must be a number");var ae=ee>te;if(ae){var ie=ee;ee=te,te=ie}var ne=$.numberOfPoints===void 0?100:$.numberOfPoints;if(isNaN(ne)||!isFinite(ne))throw new RangeError("'Number of points' value must be a number");if(1>ne)throw new RangeError("the number of point must be higher than 1");var oe="slot"===$.variant?"slot":"smooth",le="slot"==oe?E(W,Q,ee,te,ne):L(W,Q,ee,te,ne);return ae?le.reverse():le},T.integral=G},{}],60:[function(I,R,T){"use strict";R.exports=T=I("./ArrayUtils"),T.getEquallySpacedData=I("./getEquallySpaced").getEquallySpacedData,T.SNV=I("./snv").SNV},{"./ArrayUtils":58,"./getEquallySpaced":59,"./snv":61}],61:[function(I,R,T){"use strict";T.SNV=function(G){var Z=L.mean(G),W=L.standardDeviation(G),Q=G.slice();for(var $=0;$<G.length;$++)Q[$]=(Q[$]-Z)/W;return Q};var L=I("ml-stat").array},{"ml-stat":111}],62:[function(I,R){"use strict";function T(L){this.value=L,this.parent=null,this.rank=0}R.exports=class{constructor(){this.nodes=new Map}add(E){var G=this.nodes.get(E);return G||(G=new T(E),this.nodes.set(E,G)),G}union(E,G){var Z=this.find(E),W=this.find(G);Z===W||(Z.rank<W.rank?Z.parent=W:Z.rank>W.rank?W.parent=Z:(W.parent=Z,Z.rank++))}find(E){for(var G=E;null!==G.parent;)G=G.parent;for(var Z=E;null!==Z.parent;){var W=Z;Z=Z.parent,W.parent=G}return G}connected(E,G){return this.find(E)===this.find(G)}}},{}],63:[function(I,R){"use strict";function T(E,G){var Z=0;for(var W=0;W<E.length;W++)Z+=(E[W]-G[W])*(E[W]-G[W]);return Z}function L(E,G){return Math.sqrt(T(E,G))}R.exports=L,L.squared=T},{}],64:[function(I,R){"use strict";var T=I("./fftlib");R.exports={DEBUG:!1,ifft2DArray:function(E,G,Z){var W=Array(G*Z),Q=G/2,$=2*(Z-1);T.init(Q);var J={re:Array(Q),im:Array(Q)};for(var ee=0;ee<Z;ee++){for(var te=Q-1;0<=te;te--)J.re[te]=E[2*te*Z+ee],J.im[te]=E[(2*te+1)*Z+ee];T.bt(J.re,J.im);for(var te=Q-1;0<=te;te--)W[2*te*Z+ee]=J.re[te],W[(2*te+1)*Z+ee]=J.im[te]}var ae=Array(Q*$);T.init($);var ie={re:Array($),im:Array($)};for(var te=0;te<G;te+=2){ie.re[0]=W[te*Z],ie.im[0]=W[(te+1)*Z];for(var ee=1;ee<Z;ee++)ie.re[ee]=W[te*Z+ee],ie.im[ee]=W[(te+1)*Z+ee],ie.re[$-ee]=W[te*Z+ee],ie.im[$-ee]=-W[(te+1)*Z+ee];T.bt(ie.re,ie.im);var ne=te/2*$;for(var ee=$-1;0<=ee;ee--)ae[ne+ee]=ie.re[ee]/($*Q)}return ae},fft2DArray:function(E,G,Z){Object.assign({},{inplace:!0});var W=Z/2+1,Q=2*G,$=Array(Q*W);T.init(Z);var J={re:Array(Z),im:Array(Z)},ee={re:Array(Z),im:Array(Z)},te={re:Array(Z),im:Array(Z)},ae,ie,ne,oe,le;for(var se=0;se<G/2;se++){ae=2*se*Z,J.re=E.slice(ae,ae+Z),ae=(2*se+1)*Z,J.im=E.slice(ae,ae+Z),T.fft1d(J.re,J.im),this.reconstructTwoRealFFT(J,ee,te),ie=4*se*W,ne=(4*se+1)*W,oe=(4*se+2)*W,le=(4*se+3)*W;for(var de=W-1;0<=de;de--)$[ie+de]=ee.re[de],$[ne+de]=ee.im[de],$[oe+de]=te.re[de],$[le+de]=te.im[de]}ee=null,te=null;var ue=Array(Q*W);T.init(G);var he={re:Array(G),im:Array(G)};for(var me=W-1;0<=me;me--){for(var se=G-1;0<=se;se--)he.re[se]=$[2*se*W+me],he.im[se]=$[(2*se+1)*W+me],isNaN(he.re[se])&&(he.re[se]=0),isNaN(he.im[se])&&(he.im[se]=0);T.fft1d(he.re,he.im);for(var se=G-1;0<=se;se--)ue[2*se*W+me]=he.re[se],ue[(2*se+1)*W+me]=he.im[se]}return ue},reconstructTwoRealFFT:function(E,G,Z){var W=E.re.length;G.re[0]=E.re[0],G.im[0]=0,Z.re[0]=E.im[0],Z.im[0]=0;var Q,$,J,ee,te;for(var ae=W/2;0<ae;ae--)te=W-ae,Q=0.5*(E.re[ae]-E.re[te]),$=0.5*(E.re[ae]+E.re[te]),J=0.5*(E.im[ae]-E.im[te]),ee=0.5*(E.im[ae]+E.im[te]),G.re[ae]=$,G.im[ae]=J,G.re[te]=$,G.im[te]=-J,Z.re[ae]=ee,Z.im[ae]=-Q,Z.re[te]=ee,Z.im[te]=Q},convolute2DI:function(E,G,Z,W){var Q,$;for(var J=0;J<Z/2;J++)for(var ee=0;ee<W;ee++)Q=E[2*J*W+ee]*G[2*J*W+ee]-E[(2*J+1)*W+ee]*G[(2*J+1)*W+ee],$=E[2*J*W+ee]*G[(2*J+1)*W+ee]+E[(2*J+1)*W+ee]*G[2*J*W+ee],E[2*J*W+ee]=Q,E[(2*J+1)*W+ee]=$},convolute:function(E,G,Z,W){var Q=Array(W*Z);for(var $=0;$<Z*W;$++)Q[$]=E[$];Q=this.fft2DArray(Q,Z,W);var J=G.length,ee=G[0].length,te=Array(W*Z);for(var $=0;$<W*Z;$++)te[$]=0;var ne=Math.floor((J-1)/2),oe=Math.floor((ee-1)/2),ae,ie;for(var le=0;le<J;le++){ae=(le-ne+Z)%Z;for(var se=0;se<ee;se++)ie=(se-oe+W)%W,te[ae*W+ie]=G[le][se]}te=this.fft2DArray(te,Z,W);var de=2*Z,ue=W/2+1;return this.convolute2DI(Q,te,de,ue),this.ifft2DArray(Q,de,ue)},toRadix2:function(E,G,Z){var W,Q,$,J,ee=Z,te=G;if(0===Z||0!=(Z&Z-1)){for(ee=0;0!=Z>>++ee;);ee=1<<ee}if(0===G||0!=(G&G-1)){for(te=0;0!=G>>++te;);te=1<<te}if(te==G&&ee==Z)return{data:E,rows:G,cols:Z};var ae=Array(te*ee),ie=Math.floor((te-G)/2)-G,ne=Math.floor((ee-Z)/2)-Z;for(W=0;W<te;W++)for($=W*ee,J=(W-ie)%G*Z,Q=0;Q<ee;Q++)ae[$+Q]=E[J+(Q-ne)%Z];return{data:ae,rows:te,cols:ee}},crop:function(E,G,Z,W,Q,$){if(G==W&&Z==Q)return E;Object.assign({},$);var J=Array(Q*W),ee=Math.floor((G-W)/2),te=Math.floor((Z-Q)/2),ae,ie,ne,oe;for(ne=0;ne<W;ne++)for(ae=ne*Q,ie=(ne+ee)*Z,oe=0;oe<Q;oe++)J[ae+oe]=E[ie+(oe+te)];return J}}},{"./fftlib":65}],65:[function(I,R,T){"use strict";(function(){var L;L="undefined"==typeof T?{}:T;var E={release:"0.3.0",date:"2013-03"};L.toString=function(){return"version "+E.release+", released "+E.date};var G=0,Z=null,W=null,Q={init:function(te){if(0!==te&&0==(te&te-1))G=te,Q._initArray(),Q._makeBitReversalTable(),Q._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(te,ae){Q.fft(te,ae,1)},ifft1d:function(te,ae){var ie=1/G;Q.fft(te,ae,-1);for(var ne=0;ne<G;ne++)te[ne]*=ie,ae[ne]*=ie},bt1d:function(te,ae){Q.fft(te,ae,-1)},fft2d:function(te,ae){var ie=[],ne=[],oe=0;for(var le=0;le<G;le++){oe=le*G;for(var se=0;se<G;se++)ie[se]=te[se+oe],ne[se]=ae[se+oe];Q.fft1d(ie,ne);for(var de=0;de<G;de++)te[de+oe]=ie[de],ae[de+oe]=ne[de]}for(var ue=0;ue<G;ue++){for(var he=0;he<G;he++)oe=ue+he*G,ie[he]=te[oe],ne[he]=ae[oe];Q.fft1d(ie,ne);for(var me=0;me<G;me++)oe=ue+me*G,te[oe]=ie[me],ae[oe]=ne[me]}},ifft2d:function(te,ae){var ie=[],ne=[],oe=0;for(var le=0;le<G;le++){oe=le*G;for(var se=0;se<G;se++)ie[se]=te[se+oe],ne[se]=ae[se+oe];Q.ifft1d(ie,ne);for(var de=0;de<G;de++)te[de+oe]=ie[de],ae[de+oe]=ne[de]}for(var ue=0;ue<G;ue++){for(var he=0;he<G;he++)oe=ue+he*G,ie[he]=te[oe],ne[he]=ae[oe];Q.ifft1d(ie,ne);for(var me=0;me<G;me++)oe=ue+me*G,te[oe]=ie[me],ae[oe]=ne[me]}},fft:function(te,ae,ie){var ge=G>>2,ne,oe,le,se,de,ue,he,me,ce;for(var pe=0;pe<G;pe++)se=Z[pe],pe<se&&(de=te[pe],te[pe]=te[se],te[se]=de,de=ae[pe],ae[pe]=ae[se],ae[se]=de);for(var fe=1;fe<G;fe<<=1){oe=0,ne=G/(fe<<1);for(var _e=0;_e<fe;_e++){ue=W[oe+ge],he=ie*W[oe];for(var be=_e;be<G;be+=fe<<1)le=be+fe,me=ue*te[le]+he*ae[le],ce=ue*ae[le]-he*te[le],te[le]=te[be]-me,te[be]+=me,ae[le]=ae[be]-ce,ae[be]+=ce;oe+=ne}}},_initArray:function(){Z="undefined"==typeof Uint32Array?[]:new Uint32Array(G),W="undefined"==typeof Float64Array?[]:new Float64Array(1.25*G)},_paddingZero:function(){},_makeBitReversalTable:function(){var te=0,ae=0,ie=0;for(Z[0]=0;++te<G;){for(ie=G>>1;ie<=ae;)ae-=ie,ie>>=1;ae+=ie,Z[te]=ae}},_makeCosSinTable:function(){var te=G>>1,ae=G>>2,ie=G>>3,ne=Math.sin(Math.PI/G),oe=2*ne*ne,le=Math.sqrt(oe*(2-oe)),se=W[ae]=1,de=W[0]=0;ne=2*oe;for(var ue=1;ue<ie;ue++)se-=oe,oe+=ne*se,de+=le,le-=ne*de,W[ue]=de,W[ae-ue]=se;0!=ie&&(W[ie]=Math.sqrt(0.5));for(var he=0;he<ae;he++)W[te-he]=W[he];for(var me=0;me<te+ae;me++)W[me+te]=-W[me]}},$=["init","fft1d","ifft1d","fft2d","ifft2d"];for(var J=0;J<$.length;J++)L[$[J]]=Q[$[J]];return L.bt=Q.bt1d,L.fft=Q.fft1d,L.ifft=Q.ifft1d,L}).call(void 0)},{}],66:[function(I,R,T){"use strict";T.FFTUtils=I("./FFTUtils"),T.FFT=I("./fftlib")},{"./FFTUtils":64,"./fftlib":65}],67:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma,this.divisor=2*G.sigma*G.sigma}compute(G,Z){var W=T(G,Z);return Math.exp(-W/this.divisor)}}},{"ml-distance-euclidean":63}],68:[function(I,R){"use strict";var T={degree:1,constant:1,scale:1};R.exports=class{constructor(E){E=Object.assign({},T,E),this.degree=E.degree,this.constant=E.constant,this.scale=E.scale}compute(E,G){var Z=0;for(var W=0;W<E.length;W++)Z+=E[W]*G[W];return Math.pow(this.scale*Z+this.constant,this.degree)}}},{}],69:[function(I,R){"use strict";var T={alpha:0.01,constant:-Math.E};R.exports=class{constructor(E){E=Object.assign({},T,E),this.alpha=E.alpha,this.constant=E.constant}compute(E,G){var Z=0;for(var W=0;W<E.length;W++)Z+=E[W]*G[W];return Math.tanh(this.alpha*Z+this.constant)}}},{}],70:[function(I,R){"use strict";var T=I("ml-matrix"),L=I("ml-kernel-gaussian"),E=I("ml-kernel-polynomial"),G=I("./kernels/anova-kernel"),Z=I("./kernels/cauchy-kernel"),W=I("./kernels/exponential-kernel"),Q=I("./kernels/histogram-intersection-kernel"),$=I("./kernels/laplacian-kernel"),J=I("./kernels/multiquadratic-kernel"),ee=I("./kernels/rational-quadratic-kernel"),te=I("ml-kernel-sigmoid"),ae={gaussian:L,rbf:L,polynomial:E,poly:E,anova:G,cauchy:Z,exponential:W,histogram:Q,min:Q,laplacian:$,multiquadratic:J,rational:ee,sigmoid:te,mlp:te};R.exports=class{constructor(ne,oe){if(this.kernelType=ne,"linear"!==ne)if("string"==typeof ne){ne=ne.toLowerCase();var le=ae[ne];if(le)this.kernelFunction=new le(oe);else throw new Error("unsupported kernel type: "+ne)}else if("object"==typeof ne&&"function"==typeof ne.compute)this.kernelFunction=ne;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(ne,oe){if(void 0===oe&&(oe=ne),"linear"===this.kernelType){var le=new T(ne);return le.mmul(new T(oe).transpose())}var se=new T(ne.length,oe.length),de,ue;if(ne===oe)for(de=0;de<ne.length;de++)for(ue=de;ue<ne.length;ue++)se[de][ue]=se[ue][de]=this.kernelFunction.compute(ne[de],ne[ue]);else for(de=0;de<ne.length;de++)for(ue=0;ue<oe.length;ue++)se[de][ue]=this.kernelFunction.compute(ne[de],oe[ue]);return se}}},{"./kernels/anova-kernel":71,"./kernels/cauchy-kernel":72,"./kernels/exponential-kernel":73,"./kernels/histogram-intersection-kernel":74,"./kernels/laplacian-kernel":75,"./kernels/multiquadratic-kernel":76,"./kernels/rational-quadratic-kernel":77,"ml-kernel-gaussian":67,"ml-kernel-polynomial":68,"ml-kernel-sigmoid":69,"ml-matrix":87}],71:[function(I,R){"use strict";var T={sigma:1,degree:1};R.exports=class{constructor(E){E=Object.assign({},T,E),this.sigma=E.sigma,this.degree=E.degree}compute(E,G){var Z=0,W=Math.min(E.length,G.length);for(var Q=1;Q<=W;++Q)Z+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(E[Q-1],Q)-Math.pow(G[Q-1],Q),2)),this.degree);return Z}}},{}],72:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma}compute(G,Z){return 1/(1+T(G,Z)/(this.sigma*this.sigma))}}},{"ml-distance-euclidean":63}],73:[function(I,R){"use strict";var T=I("ml-distance-euclidean"),L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma,this.divisor=2*G.sigma*G.sigma}compute(G,Z){var W=T(G,Z);return Math.exp(-W/this.divisor)}}},{"ml-distance-euclidean":63}],74:[function(I,R){"use strict";R.exports=class{compute(L,E){var G=Math.min(L.length,E.length),Z=0;for(var W=0;W<G;++W)Z+=Math.min(L[W],E[W]);return Z}}},{}],75:[function(I,R){"use strict";var T=I("ml-distance-euclidean"),L={sigma:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.sigma=G.sigma}compute(G,Z){var W=T(G,Z);return Math.exp(-W/this.sigma)}}},{"ml-distance-euclidean":63}],76:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={constant:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.constant=G.constant}compute(G,Z){return Math.sqrt(T(G,Z)+this.constant*this.constant)}}},{"ml-distance-euclidean":63}],77:[function(I,R){"use strict";var T=I("ml-distance-euclidean").squared,L={constant:1};R.exports=class{constructor(G){G=Object.assign({},L,G),this.constant=G.constant}compute(G,Z){var W=T(G,Z);return 1-W/(W+this.constant)}}},{"ml-distance-euclidean":63}],78:[function(I,R){"use strict";"use strict;";function T(E){var G=E,Z,W;if("number"!=typeof E[0]){Z=E.length,W=E[0].length,G=Array(Z*W);for(var Q=0;Q<Z;Q++)for(var $=0;$<W;$++)G[Q*W+$]=E[Q][$]}else{var J=Math.sqrt(E.length);Number.isInteger(J)&&(Z=J,W=J)}return{data:G,rows:Z,cols:W}}var L=I("ml-fft").FFTUtils;R.exports={fft:function(G,Z,W){var Q=T(G),$=Q.data,J=Object.assign({normalize:!1,divisor:1,rows:Q.rows,cols:Q.cols},W),ee,te;if(J.rows&&J.cols)ee=J.rows,te=J.cols;else throw new Error("Invalid number of rows or columns "+ee+" "+te);var ae=J.divisor,oe=Z.length,le=Z[0].length,ie,ne;if(J.normalize)for(ae=0,ie=0;ie<oe;ie++)for(ne=0;ne<le;ne++)ae+=Z[ie][ne];if(0===ae)throw new RangeError("convolution: The divisor is equal to zero");var se=L.toRadix2($,ee,te),de=L.convolute(se.data,Z,se.rows,se.cols);if(de=L.crop(de,se.rows,se.cols,ee,te),0!=ae&&1!=ae)for(ie=0;ie<de.length;ie++)de[ie]/=ae;return de},direct:function(G,Z,W){var Q=T(G),$=Q.data,J=Object.assign({normalize:!1,divisor:1,rows:Q.rows,cols:Q.cols},W),ee,te;if(J.rows&&J.cols)ee=J.rows,te=J.cols;else throw new Error("Invalid number of rows or columns "+ee+" "+te);var ae=J.divisor,ie=Z.length,ne=Z[0].length,oe,le,se,de,ue,he,me,ce,ge;if(J.normalize)for(ae=0,oe=0;oe<ie;oe++)for(le=0;le<ne;le++)ae+=Z[oe][le];if(0===ae)throw new RangeError("convolution: The divisor is equal to zero");var pe=Array(ee*te),fe=Math.floor(ie/2),_e=Math.floor(ne/2);for(de=0;de<ee;de++)for(se=0;se<te;se++){for(he=0,le=0;le<ie;le++)for(oe=0;oe<ne;oe++)me=Z[ie-le-1][ne-oe-1],ce=(de+le-fe+ee)%ee,ge=(se+oe-_e+te)%te,ue=ce*te+ge,he+=$[ue]*me;ue=de*te+se,pe[ue]=he/ae}return pe},kernelFactory:{LoG:function(G,Z,W){var Q=1e3;W&&W.factor&&(Q=W.factor);var $=Array(Z),J,ee,te,ae;Q*=-1;var ie=(Z-1)/2;for(J=0;J<Z;J++)for($[J]=Array(Z),ae=(J-ie)*(J-ie),ee=0;ee<Z;ee++)te=-((ee-ie)*(ee-ie)+ae)/(2*G*G),$[J][ee]=Math.round(Q*(1+te)*Math.exp(te));return $}},matrix2Array:T}},{"ml-fft":66}],79:[function(require,module){"use strict";module.exports=function(superCtor){function compareNumbers(I,R){return I-R}function fillTemplateFunction(I,R){for(var T in R)I=I.replace(new RegExp("%"+T+"%","g"),R[T]);return I}superCtor===void 0&&(superCtor=Object);class I extends superCtor{static get[Symbol.species](){return this}static from1DArray(R,T,L){if(R*T!==L.length)throw new RangeError("Data length does not match given dimensions");var E=new this(R,T);for(var G=0;G<R;G++)for(var Z=0;Z<T;Z++)E.set(G,Z,L[G*T+Z]);return E}static rowVector(R){var T=new this(1,R.length);for(var L=0;L<R.length;L++)T.set(0,L,R[L]);return T}static columnVector(R){var T=new this(R.length,1);for(var L=0;L<R.length;L++)T.set(L,0,R[L]);return T}static empty(R,T){return new this(R,T)}static zeros(R,T){return this.empty(R,T).fill(0)}static ones(R,T){return this.empty(R,T).fill(1)}static rand(R,T,L){L===void 0&&(L=Math.random);var E=this.empty(R,T);for(var G=0;G<R;G++)for(var Z=0;Z<T;Z++)E.set(G,Z,L());return E}static randInt(R,T,L,E){L===void 0&&(L=1e3),E===void 0&&(E=Math.random);var G=this.empty(R,T);for(var Z=0;Z<R;Z++)for(var W=0;W<T;W++){var Q=Math.floor(E()*L);G.set(Z,W,Q)}return G}static eye(R,T,L){L===void 0&&(L=1),T===void 0&&(T=R);var E=Math.min(R,T),G=this.zeros(R,T);for(var Z=0;Z<E;Z++)G.set(Z,Z,L);return G}static diag(R,T,L){var E=R.length;T===void 0&&(T=E),L===void 0&&(L=T);var G=Math.min(E,T,L),Z=this.zeros(T,L);for(var W=0;W<G;W++)Z.set(W,W,R[W]);return Z}static min(R,T){R=this.checkMatrix(R),T=this.checkMatrix(T);var L=R.rows,E=R.columns,G=new this(L,E);for(var Z=0;Z<L;Z++)for(var W=0;W<E;W++)G.set(Z,W,Math.min(R.get(Z,W),T.get(Z,W)));return G}static max(R,T){R=this.checkMatrix(R),T=this.checkMatrix(T);var L=R.rows,E=R.columns,G=new this(L,E);for(var Z=0;Z<L;Z++)for(var W=0;W<E;W++)G.set(Z,W,Math.max(R.get(Z,W),T.get(Z,W)));return G}static checkMatrix(R){return I.isMatrix(R)?R:new this(R)}static isMatrix(R){return null!=R&&"Matrix"===R.klass}get size(){return this.rows*this.columns}apply(R){if("function"!=typeof R)throw new TypeError("callback must be a function");var T=this.rows,L=this.columns;for(var E=0;E<T;E++)for(var G=0;G<L;G++)R.call(this,E,G);return this}to1DArray(){var R=Array(this.size);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R[T*this.columns+L]=this.get(T,L);return R}to2DArray(){var R=Array(this.rows);for(var T=0;T<this.rows;T++){R[T]=Array(this.columns);for(var L=0;L<this.columns;L++)R[T][L]=this.get(T,L)}return R}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var R=0;R<this.rows;R++)for(var T=0;T<=R;T++)if(this.get(R,T)!==this.get(T,R))return!1;return!0}return!1}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(R,T){R=R||1,T=T||1;var L=new this.constructor[Symbol.species](this.rows*R,this.columns*T);for(var E=0;E<R;E++)for(var G=0;G<T;G++)L.setSubMatrix(this,this.rows*E,this.columns*G);return L}fill(R){for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,R);return this}neg(){return this.mulS(-1)}getRow(R){util.checkRowIndex(this,R);var T=Array(this.columns);for(var L=0;L<this.columns;L++)T[L]=this.get(R,L);return T}getRowVector(R){return this.constructor.rowVector(this.getRow(R))}setRow(R,T){util.checkRowIndex(this,R),T=util.checkRowVector(this,T);for(var L=0;L<this.columns;L++)this.set(R,L,T[L]);return this}swapRows(R,T){util.checkRowIndex(this,R),util.checkRowIndex(this,T);for(var L=0;L<this.columns;L++){var E=this.get(R,L);this.set(R,L,this.get(T,L)),this.set(T,L,E)}return this}getColumn(R){util.checkColumnIndex(this,R);var T=Array(this.rows);for(var L=0;L<this.rows;L++)T[L]=this.get(L,R);return T}getColumnVector(R){return this.constructor.columnVector(this.getColumn(R))}setColumn(R,T){util.checkColumnIndex(this,R),T=util.checkColumnVector(this,T);for(var L=0;L<this.rows;L++)this.set(L,R,T[L]);return this}swapColumns(R,T){util.checkColumnIndex(this,R),util.checkColumnIndex(this,T);for(var L=0;L<this.rows;L++){var E=this.get(L,R);this.set(L,R,this.get(L,T)),this.set(L,T,E)}return this}addRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)+R[L]);return this}subRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)-R[L]);return this}mulRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)*R[L]);return this}divRowVector(R){R=util.checkRowVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)/R[L]);return this}addColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)+R[T]);return this}subColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)-R[T]);return this}mulColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)*R[T]);return this}divColumnVector(R){R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.set(T,L,this.get(T,L)/R[T]);return this}mulRow(R,T){util.checkRowIndex(this,R);for(var L=0;L<this.columns;L++)this.set(R,L,this.get(R,L)*T);return this}mulColumn(R,T){util.checkColumnIndex(this,R);for(var L=0;L<this.rows;L++)this.set(L,R,this.get(L,R)*T)}max(){var R=this.get(0,0);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.get(T,L)>R&&(R=this.get(T,L));return R}maxIndex(){var R=this.get(0,0),T=[0,0];for(var L=0;L<this.rows;L++)for(var E=0;E<this.columns;E++)this.get(L,E)>R&&(R=this.get(L,E),T[0]=L,T[1]=E);return T}min(){var R=this.get(0,0);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)this.get(T,L)<R&&(R=this.get(T,L));return R}minIndex(){var R=this.get(0,0),T=[0,0];for(var L=0;L<this.rows;L++)for(var E=0;E<this.columns;E++)this.get(L,E)<R&&(R=this.get(L,E),T[0]=L,T[1]=E);return T}maxRow(R){util.checkRowIndex(this,R);var T=this.get(R,0);for(var L=1;L<this.columns;L++)this.get(R,L)>T&&(T=this.get(R,L));return T}maxRowIndex(R){util.checkRowIndex(this,R);var T=this.get(R,0),L=[R,0];for(var E=1;E<this.columns;E++)this.get(R,E)>T&&(T=this.get(R,E),L[1]=E);return L}minRow(R){util.checkRowIndex(this,R);var T=this.get(R,0);for(var L=1;L<this.columns;L++)this.get(R,L)<T&&(T=this.get(R,L));return T}minRowIndex(R){util.checkRowIndex(this,R);var T=this.get(R,0),L=[R,0];for(var E=1;E<this.columns;E++)this.get(R,E)<T&&(T=this.get(R,E),L[1]=E);return L}maxColumn(R){util.checkColumnIndex(this,R);var T=this.get(0,R);for(var L=1;L<this.rows;L++)this.get(L,R)>T&&(T=this.get(L,R));return T}maxColumnIndex(R){util.checkColumnIndex(this,R);var T=this.get(0,R),L=[0,R];for(var E=1;E<this.rows;E++)this.get(E,R)>T&&(T=this.get(E,R),L[0]=E);return L}minColumn(R){util.checkColumnIndex(this,R);var T=this.get(0,R);for(var L=1;L<this.rows;L++)this.get(L,R)<T&&(T=this.get(L,R));return T}minColumnIndex(R){util.checkColumnIndex(this,R);var T=this.get(0,R),L=[0,R];for(var E=1;E<this.rows;E++)this.get(E,R)<T&&(T=this.get(E,R),L[0]=E);return L}diag(){var R=Math.min(this.rows,this.columns),T=Array(R);for(var L=0;L<R;L++)T[L]=this.get(L,L);return T}sum(){var R=0;for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R+=this.get(T,L);return R}mean(){return this.sum()/this.size}prod(){var R=1;for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R*=this.get(T,L);return R}cumulativeSum(){var R=0;for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R+=this.get(T,L),this.set(T,L,R);return this}dot(R){I.isMatrix(R)&&(R=R.to1DArray());var T=this.to1DArray();if(T.length!==R.length)throw new RangeError("vectors do not have the same size");var L=0;for(var E=0;E<T.length;E++)L+=T[E]*R[E];return L}mmul(R){R=this.constructor.checkMatrix(R),this.columns!==R.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");var T=this.rows,L=this.columns,E=R.columns,G=new this.constructor[Symbol.species](T,E),Z=Array(L);for(var W=0;W<E;W++){for(var Q=0;Q<L;Q++)Z[Q]=R.get(Q,W);for(var $=0;$<T;$++){var J=0;for(Q=0;Q<L;Q++)J+=this.get($,Q)*Z[Q];G.set($,W,J)}}return G}strassen_2x2(R){var T=new this.constructor[Symbol.species](2,2),L=this.get(0,0),E=R.get(0,0),G=this.get(0,1),Z=R.get(0,1),W=this.get(1,0),Q=R.get(1,0),$=this.get(1,1),J=R.get(1,1),ee=(L+$)*(E+J),te=(W+$)*E,ae=L*(Z-J),ie=$*(Q-E),ne=(L+G)*J;return T.set(0,0,ee+ie-ne+(G-$)*(Q+J)),T.set(0,1,ae+ne),T.set(1,0,te+ie),T.set(1,1,ee-te+ae+(W-L)*(E+Z)),T}strassen_3x3(R){var T=new this.constructor[Symbol.species](3,3),L=this.get(0,0),E=this.get(0,1),G=this.get(0,2),Z=this.get(1,0),W=this.get(1,1),Q=this.get(1,2),$=this.get(2,0),J=this.get(2,1),ee=this.get(2,2),te=R.get(0,0),ae=R.get(0,1),ie=R.get(0,2),ne=R.get(1,0),oe=R.get(1,1),le=R.get(1,2),se=R.get(2,0),de=R.get(2,1),ue=R.get(2,2),he=(L-Z)*(-ae+oe),me=(-L+Z+W)*(te-ae+oe),ce=(Z+W)*(-te+ae),ge=L*te,pe=(-L+$+J)*(te-ie+le),fe=(-L+$)*(ie-le),_e=($+J)*(-te+ie),be=(-G+J+ee)*(oe+se-de),ye=(G-ee)*(oe-de),xe=G*se,ke=(J+ee)*(-se+de),we=(-G+W+Q)*(le+se-ue),ve=(G-Q)*(le-ue),Me=(W+Q)*(-se+ue);return T.set(0,0,ge+xe+E*ne),T.set(0,1,(L+E+G-Z-W-J-ee)*oe+me+ce+ge+be+xe+ke),T.set(0,2,ge+pe+_e+(L+E+G-W-Q-$-J)*le+xe+we+Me),T.set(1,0,he+W*(-te+ae+ne-oe-le-se+ue)+me+ge+xe+we+ve),T.set(1,1,he+me+ce+ge+Q*de),T.set(1,2,xe+we+ve+Me+Z*ie),T.set(2,0,ge+pe+fe+J*(-te+ie+ne-oe-le-se+de)+be+ye+xe),T.set(2,1,be+ye+xe+ke+$*ae),T.set(2,2,ge+pe+fe+_e+ee*ue),T}mmul_strassen(R){function T(te,ae,ie){var ne=te.rows,oe=te.columns;if(ne==ae&&oe==ie)return te;var le=I.zeros(ae,ie);return le=le.setSubMatrix(te,0,0),le}function L(te,ae,ie,ne){if(512>=ie||512>=ne)return te.mmul(ae);1==ie%2&&1==ne%2?(te=T(te,ie+1,ne+1),ae=T(ae,ie+1,ne+1)):1==ie%2?(te=T(te,ie+1,ne),ae=T(ae,ie+1,ne)):1==ne%2&&(te=T(te,ie,ne+1),ae=T(ae,ie,ne+1));var oe=parseInt(te.rows/2),le=parseInt(te.columns/2),se=te.subMatrix(0,oe-1,0,le-1),de=ae.subMatrix(0,oe-1,0,le-1),ue=te.subMatrix(0,oe-1,le,te.columns-1),he=ae.subMatrix(0,oe-1,le,ae.columns-1),me=te.subMatrix(oe,te.rows-1,0,le-1),ce=ae.subMatrix(oe,ae.rows-1,0,le-1),ge=te.subMatrix(oe,te.rows-1,le,te.columns-1),pe=ae.subMatrix(oe,ae.rows-1,le,ae.columns-1),fe=L(I.add(se,ge),I.add(de,pe),oe,le),_e=L(I.add(me,ge),de,oe,le),be=L(se,I.sub(he,pe),oe,le),ye=L(ge,I.sub(ce,de),oe,le),xe=L(I.add(se,ue),pe,oe,le),ke=L(I.sub(me,se),I.add(de,he),oe,le),we=L(I.sub(ue,ge),I.add(ce,pe),oe,le),ve=I.add(fe,ye);ve.sub(xe),ve.add(we);var Me=I.add(be,xe),je=I.add(_e,ye),Pe=I.sub(fe,_e);Pe.add(be),Pe.add(ke);var De=I.zeros(2*ve.rows,2*ve.columns);return De=De.setSubMatrix(ve,0,0),De=De.setSubMatrix(Me,ve.rows,0),De=De.setSubMatrix(je,0,ve.columns),De=De.setSubMatrix(Pe,ve.rows,ve.columns),De.subMatrix(0,ie-1,0,ne-1)}var E=this.clone(),G=E.rows,Z=E.columns,W=R.rows,Q=R.columns;Z!=W&&console.log(`Multiplying ${G} x ${Z} and ${W} x ${Q} matrix: dimensions do not match.`);var $=Math.max(G,W),J=Math.max(Z,Q),E=T(E,$,J),R=T(R,$,J),ee=L(E,R,$,J);return ee}scaleRows(R,T){if(R=void 0===R?0:R,T=void 0===T?1:T,R>=T)throw new RangeError("min should be strictly smaller than max");var L=this.constructor.empty(this.rows,this.columns);for(var E=0;E<this.rows;E++){var G=arrayUtils.scale(this.getRow(E),{min:R,max:T});L.setRow(E,G)}return L}scaleColumns(R,T){if(R=void 0===R?0:R,T=void 0===T?1:T,R>=T)throw new RangeError("min should be strictly smaller than max");var L=this.constructor.empty(this.rows,this.columns);for(var E=0;E<this.columns;E++){var G=arrayUtils.scale(this.getColumn(E),{min:R,max:T});L.setColumn(E,G)}return L}kroneckerProduct(R){R=this.constructor.checkMatrix(R);var T=this.rows,L=this.columns,E=R.rows,G=R.columns,Z=new this.constructor[Symbol.species](T*E,L*G);for(var W=0;W<T;W++)for(var Q=0;Q<L;Q++)for(var $=0;$<E;$++)for(var J=0;J<G;J++)Z[E*W+$][G*Q+J]=this.get(W,Q)*R.get($,J);return Z}transpose(){var R=new this.constructor[Symbol.species](this.columns,this.rows);for(var T=0;T<this.rows;T++)for(var L=0;L<this.columns;L++)R.set(L,T,this.get(T,L));return R}sortRows(R){R===void 0&&(R=compareNumbers);for(var T=0;T<this.rows;T++)this.setRow(T,this.getRow(T).sort(R));return this}sortColumns(R){R===void 0&&(R=compareNumbers);for(var T=0;T<this.columns;T++)this.setColumn(T,this.getColumn(T).sort(R));return this}subMatrix(R,T,L,E){util.checkRange(this,R,T,L,E);var G=new this.constructor[Symbol.species](T-R+1,E-L+1);for(var Z=R;Z<=T;Z++)for(var W=L;W<=E;W++)G[Z-R][W-L]=this.get(Z,W);return G}subMatrixRow(R,T,L){if(void 0===T&&(T=0),void 0===L&&(L=this.columns-1),T>L||0>T||T>=this.columns||0>L||L>=this.columns)throw new RangeError("Argument out of range");var E=new this.constructor[Symbol.species](R.length,L-T+1);for(var G=0;G<R.length;G++)for(var Z=T;Z<=L;Z++){if(0>R[G]||R[G]>=this.rows)throw new RangeError("Row index out of range: "+R[G]);E.set(G,Z-T,this.get(R[G],Z))}return E}subMatrixColumn(R,T,L){if(void 0===T&&(T=0),void 0===L&&(L=this.rows-1),T>L||0>T||T>=this.rows||0>L||L>=this.rows)throw new RangeError("Argument out of range");var E=new this.constructor[Symbol.species](L-T+1,R.length);for(var G=0;G<R.length;G++)for(var Z=T;Z<=L;Z++){if(0>R[G]||R[G]>=this.columns)throw new RangeError("Column index out of range: "+R[G]);E.set(Z-T,G,this.get(Z,R[G]))}return E}setSubMatrix(R,T,L){R=this.constructor.checkMatrix(R);var E=T+R.rows-1,G=L+R.columns-1;util.checkRange(this,T,E,L,G);for(var Z=0;Z<R.rows;Z++)for(var W=0;W<R.columns;W++)this[T+Z][L+W]=R.get(Z,W);return this}selection(R,T){var L=util.checkIndices(this,R,T),E=new this.constructor[Symbol.species](R.length,T.length);for(var G=0;G<L.row.length;G++){var Z=L.row[G];for(var W=0;W<L.column.length;W++){var Q=L.column[W];E[G][W]=this.get(Z,Q)}}return E}trace(){var R=Math.min(this.rows,this.columns),T=0;for(var L=0;L<R;L++)T+=this.get(L,L);return T}transposeView(){return new MatrixTransposeView(this)}rowView(R){return util.checkRowIndex(this,R),new MatrixRowView(this,R)}columnView(R){return util.checkColumnIndex(this,R),new MatrixColumnView(this,R)}flipRowView(){return new MatrixFlipRowView(this)}flipColumnView(){return new MatrixFlipColumnView(this)}subMatrixView(R,T,L,E){return new MatrixSubView(this,R,T,L,E)}selectionView(R,T){return new MatrixSelectionView(this,R,T)}}I.prototype.klass="Matrix",I.random=I.rand,I.diagonal=I.diag,I.prototype.diagonal=I.prototype.diag,I.identity=I.eye,I.prototype.negate=I.prototype.neg,I.prototype.tensorProduct=I.prototype.kroneckerProduct;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,inplaceMethodWithArgs=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,staticMethodWithArgs=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,inplaceMethodWithOneArgScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,inplaceMethodWithOneArgMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,inplaceMethodWithOneArg=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,operators=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]];for(var operator of operators){var inplaceOp=eval(fillTemplateFunction(inplaceOperator,{name:operator[1],op:operator[0]})),inplaceOpS=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[1]+"S",op:operator[0]})),inplaceOpM=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[1]+"M",op:operator[0]})),staticOp=eval(fillTemplateFunction(staticOperator,{name:operator[1]}));for(var i=1;i<operator.length;i++)I.prototype[operator[i]]=inplaceOp,I.prototype[operator[i]+"S"]=inplaceOpS,I.prototype[operator[i]+"M"]=inplaceOpM,I[operator[i]]=staticOp}var methods=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(I){methods.push(["Math."+I,I])});for(var method of methods){var inplaceMeth=eval(fillTemplateFunction(inplaceMethod,{name:method[1],method:method[0]})),staticMeth=eval(fillTemplateFunction(staticMethod,{name:method[1]}));for(var i=1;i<method.length;i++)I.prototype[method[i]]=inplaceMeth,I[method[i]]=staticMeth}var methodsWithArgs=[["Math.pow",1,"pow"]];for(var methodWithArg of methodsWithArgs){var args="arg0";for(var i=1;i<methodWithArg[1];i++)args+=`, arg${i}`;if(1!==methodWithArg[1]){var inplaceMethWithArgs=eval(fillTemplateFunction(inplaceMethodWithArgs,{name:methodWithArg[2],method:methodWithArg[0],args:args})),staticMethWithArgs=eval(fillTemplateFunction(staticMethodWithArgs,{name:methodWithArg[2],args:args}));for(var i=2;i<methodWithArg.length;i++)I.prototype[methodWithArg[i]]=inplaceMethWithArgs,I[methodWithArg[i]]=staticMethWithArgs}else{var tmplVar={name:methodWithArg[2],args:args,method:methodWithArg[0]},inplaceMethod=eval(fillTemplateFunction(inplaceMethodWithOneArg,tmplVar)),inplaceMethodS=eval(fillTemplateFunction(inplaceMethodWithOneArgScalar,tmplVar)),inplaceMethodM=eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix,tmplVar)),staticMethod=eval(fillTemplateFunction(staticMethodWithArgs,tmplVar));for(var i=2;i<methodWithArg.length;i++)I.prototype[methodWithArg[i]]=inplaceMethod,I.prototype[methodWithArg[i]+"M"]=inplaceMethodM,I.prototype[methodWithArg[i]+"S"]=inplaceMethodS,I[methodWithArg[i]]=staticMethod}}return I};var arrayUtils=require("ml-array-utils"),util=require("./util"),MatrixTransposeView=require("./views/transpose"),MatrixRowView=require("./views/row"),MatrixSubView=require("./views/sub"),MatrixSelectionView=require("./views/selection"),MatrixColumnView=require("./views/column"),MatrixFlipRowView=require("./views/flipRow"),MatrixFlipColumnView=require("./views/flipColumn")},{"./util":90,"./views/column":92,"./views/flipColumn":93,"./views/flipRow":94,"./views/row":95,"./views/selection":96,"./views/sub":97,"./views/transpose":98,"ml-array-utils":60}],80:[function(I,R){"use strict";function T(E){if(!(this instanceof T))return new T(E);if(E=L.checkMatrix(E),!E.isSymmetric())throw new Error("Matrix is not symmetric");var G=E,Z=G.rows,W=new L(Z,Z),Q=!0,$,J,ee;for(J=0;J<Z;J++){var te=W[J],ae=0;for(ee=0;ee<J;ee++){var ie=W[ee],ne=0;for($=0;$<ee;$++)ne+=ie[$]*te[$];te[ee]=ne=(G[J][ee]-ne)/W[ee][ee],ae=ae+ne*ne}for(ae=G[J][J]-ae,Q&=0<ae,W[J][J]=Math.sqrt(Math.max(ae,0)),ee=J+1;ee<Z;ee++)W[J][ee]=0}if(!Q)throw new Error("Matrix is not positive definite");this.L=W}var L=I("../matrix");T.prototype={get lowerTriangularMatrix(){return this.L},solve:function(G){G=L.checkMatrix(G);var Z=this.L,W=Z.rows;if(G.rows!==W)throw new Error("Matrix dimensions do not match");var Q=G.columns,$=G.clone(),J,ee,te;for(te=0;te<W;te++)for(ee=0;ee<Q;ee++){for(J=0;J<te;J++)$[te][ee]-=$[J][ee]*Z[te][J];$[te][ee]/=Z[te][te]}for(te=W-1;0<=te;te--)for(ee=0;ee<Q;ee++){for(J=te+1;J<W;J++)$[te][ee]-=$[J][ee]*Z[J][te];$[te][ee]/=Z[te][te]}return $}},R.exports=T},{"../matrix":88}],81:[function(I,R){"use strict";function T(ae,ie){if(ie=Object.assign({},te,ie),!(this instanceof T))return new T(ae,ie);if(ae=Q.checkMatrix(ae),!ae.isSquare())throw new Error("Matrix is not a square matrix");var ne=ae.columns,oe=ee(ne,ne,0),le=Array(ne),se=Array(ne),de=ae,me=!1,ue,he;if(me=!!ie.assumeSymmetric||ae.isSymmetric(),me){for(ue=0;ue<ne;ue++)for(he=0;he<ne;he++)oe[ue][he]=de.get(ue,he);L(ne,se,le,oe),E(ne,se,le,oe)}else{var ce=ee(ne,ne,0),ge=Array(ne);for(he=0;he<ne;he++)for(ue=0;ue<ne;ue++)ce[ue][he]=de.get(ue,he);G(ne,ce,ge,oe),Z(ne,se,le,oe,ce)}this.n=ne,this.e=se,this.d=le,this.V=oe}function L(ae,ie,ne,oe){var le,se,de,ue,he,me,ce,ge;for(he=0;he<ae;he++)ne[he]=oe[ae-1][he];for(ue=ae-1;0<ue;ue--){for(ge=0,de=0,me=0;me<ue;me++)ge=ge+Math.abs(ne[me]);if(0===ge)for(ie[ue]=ne[ue-1],he=0;he<ue;he++)ne[he]=oe[ue-1][he],oe[ue][he]=0,oe[he][ue]=0;else{for(me=0;me<ue;me++)ne[me]/=ge,de+=ne[me]*ne[me];for(le=ne[ue-1],se=Math.sqrt(de),0<le&&(se=-se),ie[ue]=ge*se,de=de-le*se,ne[ue-1]=le-se,he=0;he<ue;he++)ie[he]=0;for(he=0;he<ue;he++){for(le=ne[he],oe[he][ue]=le,se=ie[he]+oe[he][he]*le,me=he+1;me<=ue-1;me++)se+=oe[me][he]*ne[me],ie[me]+=oe[me][he]*le;ie[he]=se}for(le=0,he=0;he<ue;he++)ie[he]/=de,le+=ie[he]*ne[he];for(ce=le/(de+de),he=0;he<ue;he++)ie[he]-=ce*ne[he];for(he=0;he<ue;he++){for(le=ne[he],se=ie[he],me=he;me<=ue-1;me++)oe[me][he]-=le*ie[me]+se*ne[me];ne[he]=oe[ue-1][he],oe[ue][he]=0}}ne[ue]=de}for(ue=0;ue<ae-1;ue++){if(oe[ae-1][ue]=oe[ue][ue],oe[ue][ue]=1,de=ne[ue+1],0!==de){for(me=0;me<=ue;me++)ne[me]=oe[me][ue+1]/de;for(he=0;he<=ue;he++){for(se=0,me=0;me<=ue;me++)se+=oe[me][ue+1]*oe[me][he];for(me=0;me<=ue;me++)oe[me][he]-=se*ne[me]}}for(me=0;me<=ue;me++)oe[me][ue+1]=0}for(he=0;he<ae;he++)ne[he]=oe[ae-1][he],oe[ae-1][he]=0;oe[ae-1][ae-1]=1,ie[0]=0}function E(ae,ie,ne,oe){var le,se,de,ue,he,me,ce,ge,pe,fe,_e,be,ye,xe,ke,we,ve;for(de=1;de<ae;de++)ie[de-1]=ie[de];ie[ae-1]=0;var Me=0,je=0,Pe=Math.pow(2,-52);for(me=0;me<ae;me++){for(je=Math.max(je,Math.abs(ne[me])+Math.abs(ie[me])),ce=me;ce<ae&&!(Math.abs(ie[ce])<=Pe*je);)ce++;if(ce>me){ve=0;do{for(ve=ve+1,le=ne[me],ge=(ne[me+1]-le)/(2*ie[me]),pe=J(ge,1),0>ge&&(pe=-pe),ne[me]=ie[me]/(ge+pe),ne[me+1]=ie[me]*(ge+pe),fe=ne[me+1],se=le-ne[me],de=me+2;de<ae;de++)ne[de]-=se;for(Me=Me+se,ge=ne[ce],_e=1,be=_e,ye=_e,xe=ie[me+1],ke=0,we=0,de=ce-1;de>=me;de--)for(ye=be,be=_e,we=ke,le=_e*ie[de],se=_e*ge,pe=J(ge,ie[de]),ie[de+1]=ke*pe,ke=ie[de]/pe,_e=ge/pe,ge=_e*ne[de]-ke*le,ne[de+1]=se+ke*(_e*le+ke*ne[de]),he=0;he<ae;he++)se=oe[he][de+1],oe[he][de+1]=ke*oe[he][de]+_e*se,oe[he][de]=_e*oe[he][de]-ke*se;ge=-ke*we*ye*xe*ie[me]/fe,ie[me]=ke*ge,ne[me]=_e*ge}while(Math.abs(ie[me])>Pe*je)}ne[me]=ne[me]+Me,ie[me]=0}for(de=0;de<ae-1;de++){for(he=de,ge=ne[de],ue=de+1;ue<ae;ue++)ne[ue]<ge&&(he=ue,ge=ne[ue]);if(he!==de)for(ne[he]=ne[de],ne[de]=ge,ue=0;ue<ae;ue++)ge=oe[ue][de],oe[ue][de]=oe[ue][he],oe[ue][he]=ge}}function G(ae,ie,ne,oe){var le=0,se=ae-1,de,ue,he,me,ce,ge,pe;for(ge=le+1;ge<=se-1;ge++){for(pe=0,me=ge;me<=se;me++)pe=pe+Math.abs(ie[me][ge-1]);if(0!==pe){for(he=0,me=se;me>=ge;me--)ne[me]=ie[me][ge-1]/pe,he+=ne[me]*ne[me];for(ue=Math.sqrt(he),0<ne[ge]&&(ue=-ue),he=he-ne[ge]*ue,ne[ge]=ne[ge]-ue,ce=ge;ce<ae;ce++){for(de=0,me=se;me>=ge;me--)de+=ne[me]*ie[me][ce];for(de=de/he,me=ge;me<=se;me++)ie[me][ce]-=de*ne[me]}for(me=0;me<=se;me++){for(de=0,ce=se;ce>=ge;ce--)de+=ne[ce]*ie[me][ce];for(de=de/he,ce=ge;ce<=se;ce++)ie[me][ce]-=de*ne[ce]}ne[ge]=pe*ne[ge],ie[ge][ge-1]=pe*ue}}for(me=0;me<ae;me++)for(ce=0;ce<ae;ce++)oe[me][ce]=me===ce?1:0;for(ge=se-1;ge>=le+1;ge--)if(0!==ie[ge][ge-1]){for(me=ge+1;me<=se;me++)ne[me]=ie[me][ge-1];for(ce=ge;ce<=se;ce++){for(ue=0,me=ge;me<=se;me++)ue+=ne[me]*oe[me][ce];for(ue=ue/ne[ge]/ie[ge][ge-1],me=ge;me<=se;me++)oe[me][ce]+=ue*ne[me]}}}function Z(ae,ie,ne,oe,le){var se=ae-1,de=0,ue=ae-1,he=Math.pow(2,-52),me=0,ce=0,ge=0,pe=0,fe=0,_e=0,be=0,ye=0,xe,ke,we,ve,Me,je,Pe,De,Ie,Se,Ce,Ae,Re,Be,ze;for(xe=0;xe<ae;xe++)for((xe<de||xe>ue)&&(ne[xe]=le[xe][xe],ie[xe]=0),ke=Math.max(xe-1,0);ke<ae;ke++)ce=ce+Math.abs(le[xe][ke]);for(;se>=de;){for(ve=se;ve>de&&(_e=Math.abs(le[ve-1][ve-1])+Math.abs(le[ve][ve]),0==_e&&(_e=ce),!(Math.abs(le[ve][ve-1])<he*_e));)ve--;if(ve===se)le[se][se]=le[se][se]+me,ne[se]=le[se][se],ie[se]=0,se--,ye=0;else if(ve===se-1){if(Pe=le[se][se-1]*le[se-1][se],ge=(le[se-1][se-1]-le[se][se])/2,pe=ge*ge+Pe,be=Math.sqrt(Math.abs(pe)),le[se][se]=le[se][se]+me,le[se-1][se-1]=le[se-1][se-1]+me,De=le[se][se],0<=pe){for(be=0<=ge?ge+be:ge-be,ne[se-1]=De+be,ne[se]=ne[se-1],0!=be&&(ne[se]=De-Pe/be),ie[se-1]=0,ie[se]=0,De=le[se][se-1],_e=Math.abs(De)+Math.abs(be),ge=De/_e,pe=be/_e,fe=Math.sqrt(ge*ge+pe*pe),ge=ge/fe,pe=pe/fe,ke=se-1;ke<ae;ke++)be=le[se-1][ke],le[se-1][ke]=pe*be+ge*le[se][ke],le[se][ke]=pe*le[se][ke]-ge*be;for(xe=0;xe<=se;xe++)be=le[xe][se-1],le[xe][se-1]=pe*be+ge*le[xe][se],le[xe][se]=pe*le[xe][se]-ge*be;for(xe=de;xe<=ue;xe++)be=oe[xe][se-1],oe[xe][se-1]=pe*be+ge*oe[xe][se],oe[xe][se]=pe*oe[xe][se]-ge*be}else ne[se-1]=De+ge,ne[se]=De+ge,ie[se-1]=be,ie[se]=-be;se=se-2,ye=0}else{if(De=le[se][se],Ie=0,Pe=0,ve<se&&(Ie=le[se-1][se-1],Pe=le[se][se-1]*le[se-1][se]),10==ye){for(me+=De,xe=de;xe<=se;xe++)le[xe][xe]-=De;_e=Math.abs(le[se][se-1])+Math.abs(le[se-1][se-2]),De=Ie=0.75*_e,Pe=-0.4375*_e*_e}if(30==ye&&(_e=(Ie-De)/2,_e=_e*_e+Pe,0<_e)){for(_e=Math.sqrt(_e),Ie<De&&(_e=-_e),_e=De-Pe/((Ie-De)/2+_e),xe=de;xe<=se;xe++)le[xe][xe]-=_e;me+=_e,De=Ie=Pe=0.964}for(ye=ye+1,Me=se-2;Me>=ve&&(be=le[Me][Me],fe=De-be,_e=Ie-be,ge=(fe*_e-Pe)/le[Me+1][Me]+le[Me][Me+1],pe=le[Me+1][Me+1]-be-fe-_e,fe=le[Me+2][Me+1],_e=Math.abs(ge)+Math.abs(pe)+Math.abs(fe),ge=ge/_e,pe=pe/_e,fe=fe/_e,Me!=ve)&&!(Math.abs(le[Me][Me-1])*(Math.abs(pe)+Math.abs(fe))<he*(Math.abs(ge)*(Math.abs(le[Me-1][Me-1])+Math.abs(be)+Math.abs(le[Me+1][Me+1]))));)Me--;for(xe=Me+2;xe<=se;xe++)le[xe][xe-2]=0,xe>Me+2&&(le[xe][xe-3]=0);for(we=Me;we<=se-1&&(Be=we!==se-1,we!=Me&&(ge=le[we][we-1],pe=le[we+1][we-1],fe=Be?le[we+2][we-1]:0,De=Math.abs(ge)+Math.abs(pe)+Math.abs(fe),0!==De&&(ge=ge/De,pe=pe/De,fe=fe/De)),0!==De);we++)if(_e=Math.sqrt(ge*ge+pe*pe+fe*fe),0>ge&&(_e=-_e),0!==_e){for(we==Me?ve!==Me&&(le[we][we-1]=-le[we][we-1]):le[we][we-1]=-_e*De,ge=ge+_e,De=ge/_e,Ie=pe/_e,be=fe/_e,pe=pe/ge,fe=fe/ge,ke=we;ke<ae;ke++)ge=le[we][ke]+pe*le[we+1][ke],Be&&(ge=ge+fe*le[we+2][ke],le[we+2][ke]=le[we+2][ke]-ge*be),le[we][ke]=le[we][ke]-ge*De,le[we+1][ke]=le[we+1][ke]-ge*Ie;for(xe=0;xe<=Math.min(se,we+3);xe++)ge=De*le[xe][we]+Ie*le[xe][we+1],Be&&(ge=ge+be*le[xe][we+2],le[xe][we+2]=le[xe][we+2]-ge*fe),le[xe][we]=le[xe][we]-ge,le[xe][we+1]=le[xe][we+1]-ge*pe;for(xe=de;xe<=ue;xe++)ge=De*oe[xe][we]+Ie*oe[xe][we+1],Be&&(ge=ge+be*oe[xe][we+2],oe[xe][we+2]=oe[xe][we+2]-ge*fe),oe[xe][we]=oe[xe][we]-ge,oe[xe][we+1]=oe[xe][we+1]-ge*pe}}}if(0!==ce){for(se=ae-1;0<=se;se--)if(ge=ne[se],pe=ie[se],0===pe)for(ve=se,le[se][se]=1,xe=se-1;0<=xe;xe--){for(Pe=le[xe][xe]-ge,fe=0,ke=ve;ke<=se;ke++)fe=fe+le[xe][ke]*le[ke][se];if(0>ie[xe])be=Pe,_e=fe;else if(ve=xe,0===ie[xe]?le[xe][se]=0===Pe?-fe/(he*ce):-fe/Pe:(De=le[xe][xe+1],Ie=le[xe+1][xe],pe=(ne[xe]-ge)*(ne[xe]-ge)+ie[xe]*ie[xe],je=(De*_e-be*fe)/pe,le[xe][se]=je,le[xe+1][se]=Math.abs(De)>Math.abs(be)?(-fe-Pe*je)/De:(-_e-Ie*je)/be),je=Math.abs(le[xe][se]),1<he*je*je)for(ke=xe;ke<=se;ke++)le[ke][se]=le[ke][se]/je}else if(0>pe)for(ve=se-1,Math.abs(le[se][se-1])>Math.abs(le[se-1][se])?(le[se-1][se-1]=pe/le[se][se-1],le[se-1][se]=-(le[se][se]-ge)/le[se][se-1]):(ze=W(0,-le[se-1][se],le[se-1][se-1]-ge,pe),le[se-1][se-1]=ze[0],le[se-1][se]=ze[1]),le[se][se-1]=0,le[se][se]=1,xe=se-2;0<=xe;xe--){for(Se=0,Ce=0,ke=ve;ke<=se;ke++)Se=Se+le[xe][ke]*le[ke][se-1],Ce=Ce+le[xe][ke]*le[ke][se];if(Pe=le[xe][xe]-ge,0>ie[xe])be=Pe,fe=Se,_e=Ce;else if(ve=xe,0===ie[xe]?(ze=W(-Se,-Ce,Pe,pe),le[xe][se-1]=ze[0],le[xe][se]=ze[1]):(De=le[xe][xe+1],Ie=le[xe+1][xe],Ae=(ne[xe]-ge)*(ne[xe]-ge)+ie[xe]*ie[xe]-pe*pe,Re=2*(ne[xe]-ge)*pe,0===Ae&&0===Re&&(Ae=he*ce*(Math.abs(Pe)+Math.abs(pe)+Math.abs(De)+Math.abs(Ie)+Math.abs(be))),ze=W(De*fe-be*Se+pe*Ce,De*_e-be*Ce-pe*Se,Ae,Re),le[xe][se-1]=ze[0],le[xe][se]=ze[1],Math.abs(De)>Math.abs(be)+Math.abs(pe)?(le[xe+1][se-1]=(-Se-Pe*le[xe][se-1]+pe*le[xe][se])/De,le[xe+1][se]=(-Ce-Pe*le[xe][se]-pe*le[xe][se-1])/De):(ze=W(-fe-Ie*le[xe][se-1],-_e-Ie*le[xe][se],be,pe),le[xe+1][se-1]=ze[0],le[xe+1][se]=ze[1])),je=Math.max(Math.abs(le[xe][se-1]),Math.abs(le[xe][se])),1<he*je*je)for(ke=xe;ke<=se;ke++)le[ke][se-1]=le[ke][se-1]/je,le[ke][se]=le[ke][se]/je}for(xe=0;xe<ae;xe++)if(xe<de||xe>ue)for(ke=xe;ke<ae;ke++)oe[xe][ke]=le[xe][ke];for(ke=ae-1;ke>=de;ke--)for(xe=de;xe<=ue;xe++){for(be=0,we=de;we<=Math.min(ke,ue);we++)be=be+oe[xe][we]*le[we][ke];oe[xe][ke]=be}}}function W(ae,ie,ne,oe){var le,se;return Math.abs(ne)>Math.abs(oe)?(le=oe/ne,se=ne+le*oe,[(ae+le*ie)/se,(ie-le*ae)/se]):(le=ne/oe,se=oe+le*ne,[(le*ae+ie)/se,(le*ie-ae)/se])}var Q=I("../matrix"),$=I("./util"),J=$.hypotenuse,ee=$.getFilled2DArray,te={assumeSymmetric:!1};T.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return Q.isMatrix(this.V)||(this.V=new Q(this.V)),this.V},get diagonalMatrix(){var ae=this.n,ie=this.e,ne=this.d,oe=new Q(ae,ae),le,se;for(le=0;le<ae;le++){for(se=0;se<ae;se++)oe[le][se]=0;oe[le][le]=ne[le],0<ie[le]?oe[le][le+1]=ie[le]:0>ie[le]&&(oe[le][le-1]=ie[le])}return oe}},R.exports=T},{"../matrix":88,"./util":85}],82:[function(I,R){"use strict";function T(E){if(!(this instanceof T))return new T(E);E=L.checkMatrix(E);var G=E.clone(),Z=G.rows,W=G.columns,Q=Array(Z),$=1,J,ee,te,ae,ie,ne,oe,le,se,de;for(J=0;J<Z;J++)Q[J]=J;for(se=Array(Z),ee=0;ee<W;ee++){for(J=0;J<Z;J++)se[J]=G[J][ee];for(J=0;J<Z;J++){for(le=G[J],de=Math.min(J,ee),ie=0,te=0;te<de;te++)ie+=le[te]*se[te];le[ee]=se[J]-=ie}for(ae=ee,J=ee+1;J<Z;J++)Math.abs(se[J])>Math.abs(se[ae])&&(ae=J);if(ae!==ee){for(te=0;te<W;te++)ne=G[ae][te],G[ae][te]=G[ee][te],G[ee][te]=ne;oe=Q[ae],Q[ae]=Q[ee],Q[ee]=oe,$=-$}if(ee<Z&&0!==G[ee][ee])for(J=ee+1;J<Z;J++)G[J][ee]/=G[ee][ee]}this.LU=G,this.pivotVector=Q,this.pivotSign=$}var L=I("../matrix");T.prototype={isSingular:function(){var G=this.LU,Z=G.columns;for(var W=0;W<Z;W++)if(0===G[W][W])return!0;return!1},get determinant(){var E=this.LU;if(!E.isSquare())throw new Error("Matrix must be square");var G=this.pivotSign,Z=E.columns;for(var W=0;W<Z;W++)G*=E[W][W];return G},get lowerTriangularMatrix(){var E=this.LU,G=E.rows,Z=E.columns,W=new L(G,Z);for(var Q=0;Q<G;Q++)for(var $=0;$<Z;$++)W[Q][$]=Q>$?E[Q][$]:Q===$?1:0;return W},get upperTriangularMatrix(){var E=this.LU,G=E.rows,Z=E.columns,W=new L(G,Z);for(var Q=0;Q<G;Q++)for(var $=0;$<Z;$++)W[Q][$]=Q<=$?E[Q][$]:0;return W},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(G){G=L.checkMatrix(G);var Z=this.LU,W=Z.rows;if(W!==G.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var Q=G.columns,$=G.subMatrixRow(this.pivotVector,0,Q-1),J=Z.columns,ee,te,ae;for(ae=0;ae<J;ae++)for(ee=ae+1;ee<J;ee++)for(te=0;te<Q;te++)$[ee][te]-=$[ae][te]*Z[ee][ae];for(ae=J-1;0<=ae;ae--){for(te=0;te<Q;te++)$[ae][te]/=Z[ae][ae];for(ee=0;ee<ae;ee++)for(te=0;te<Q;te++)$[ee][te]-=$[ae][te]*Z[ee][ae]}return $}},R.exports=T},{"../matrix":88}],83:[function(I,R){"use strict";function T(G){if(!(this instanceof T))return new T(G);G=L.checkMatrix(G);var Z=G.clone(),W=G.rows,Q=G.columns,$=Array(Q),J,ee,te,ae;for(te=0;te<Q;te++){var ie=0;for(J=te;J<W;J++)ie=E(ie,Z[J][te]);if(0!==ie){for(0>Z[te][te]&&(ie=-ie),J=te;J<W;J++)Z[J][te]/=ie;for(Z[te][te]+=1,ee=te+1;ee<Q;ee++){for(ae=0,J=te;J<W;J++)ae+=Z[J][te]*Z[J][ee];for(ae=-ae/Z[te][te],J=te;J<W;J++)Z[J][ee]+=ae*Z[J][te]}}$[te]=-ie}this.QR=Z,this.Rdiag=$}var L=I("../matrix"),E=I("./util").hypotenuse;T.prototype={solve:function(Z){Z=L.checkMatrix(Z);var W=this.QR,Q=W.rows;if(Z.rows!==Q)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var $=Z.columns,J=Z.clone(),ee=W.columns,te,ae,ie,ne;for(ie=0;ie<ee;ie++)for(ae=0;ae<$;ae++){for(ne=0,te=ie;te<Q;te++)ne+=W[te][ie]*J[te][ae];for(ne=-ne/W[ie][ie],te=ie;te<Q;te++)J[te][ae]+=ne*W[te][ie]}for(ie=ee-1;0<=ie;ie--){for(ae=0;ae<$;ae++)J[ie][ae]/=this.Rdiag[ie];for(te=0;te<ie;te++)for(ae=0;ae<$;ae++)J[te][ae]-=J[ie][ae]*W[te][ie]}return J.subMatrix(0,ee-1,0,$-1)},isFullRank:function(){var Z=this.QR.columns;for(var W=0;W<Z;W++)if(0===this.Rdiag[W])return!1;return!0},get upperTriangularMatrix(){var G=this.QR,Z=G.columns,W=new L(Z,Z),Q,$;for(Q=0;Q<Z;Q++)for($=0;$<Z;$++)W[Q][$]=Q<$?G[Q][$]:Q===$?this.Rdiag[Q]:0;return W},get orthogonalMatrix(){var G=this.QR,Z=G.rows,W=G.columns,Q=new L(Z,W),$,J,ee,te;for(ee=W-1;0<=ee;ee--){for($=0;$<Z;$++)Q[$][ee]=0;for(Q[ee][ee]=1,J=ee;J<W;J++)if(0!==G[ee][ee]){for(te=0,$=ee;$<Z;$++)te+=G[$][ee]*Q[$][J];for(te=-te/G[ee][ee],$=ee;$<Z;$++)Q[$][J]+=te*G[$][ee]}}return Q}},R.exports=T},{"../matrix":88,"./util":85}],84:[function(I,R){"use strict";function T(W,Q){if(!(this instanceof T))return new T(W,Q);W=L.checkMatrix(W),Q=Q||{};var $=W.rows,J=W.columns,ee=Math.min($,J),te=!0,ae=!0;!1===Q.computeLeftSingularVectors&&(te=!1),!1===Q.computeRightSingularVectors&&(ae=!1);var ie=!0===Q.autoTranspose,ne=!1,oe;if(!($<J))oe=W.clone();else if(!ie)oe=W.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{oe=W.transpose(),$=oe.rows,J=oe.columns,ne=!0;var le=te;te=ae,ae=le}var se=Array(Math.min($+1,J)),de=Z($,ee,0),ue=Z(J,J,0),he=Array(J),me=Array($),ce=Math.min($-1,J),ge=Math.max(0,Math.min(J-2,$)),pe,fe,_e,be,ye,xe,ke,we,ve,Me,je,Pe,De,Ie,Se,Ce,Ae,Re,Be,ze,Te;for(_e=0,Me=Math.max(ce,ge);_e<Me;_e++){if(_e<ce){for(se[_e]=0,pe=_e;pe<$;pe++)se[_e]=G(se[_e],oe[pe][_e]);if(0!==se[_e]){for(0>oe[_e][_e]&&(se[_e]=-se[_e]),pe=_e;pe<$;pe++)oe[pe][_e]/=se[_e];oe[_e][_e]+=1}se[_e]=-se[_e]}for(fe=_e+1;fe<J;fe++){if(_e<ce&&0!==se[_e]){for(ye=0,pe=_e;pe<$;pe++)ye+=oe[pe][_e]*oe[pe][fe];for(ye=-ye/oe[_e][_e],pe=_e;pe<$;pe++)oe[pe][fe]+=ye*oe[pe][_e]}he[fe]=oe[_e][fe]}if(te&&_e<ce)for(pe=_e;pe<$;pe++)de[pe][_e]=oe[pe][_e];if(_e<ge){for(he[_e]=0,pe=_e+1;pe<J;pe++)he[_e]=G(he[_e],he[pe]);if(0!==he[_e]){for(0>he[_e+1]&&(he[_e]=-he[_e]),pe=_e+1;pe<J;pe++)he[pe]/=he[_e];he[_e+1]+=1}if(he[_e]=-he[_e],_e+1<$&&0!==he[_e]){for(pe=_e+1;pe<$;pe++)me[pe]=0;for(fe=_e+1;fe<J;fe++)for(pe=_e+1;pe<$;pe++)me[pe]+=he[fe]*oe[pe][fe];for(fe=_e+1;fe<J;fe++)for(ye=-he[fe]/he[_e+1],pe=_e+1;pe<$;pe++)oe[pe][fe]+=ye*me[pe]}if(ae)for(pe=_e+1;pe<J;pe++)ue[pe][_e]=he[pe]}}if(be=Math.min(J,$+1),ce<J&&(se[ce]=oe[ce][ce]),$<be&&(se[be-1]=0),ge+1<be&&(he[ge]=oe[ge][be-1]),he[be-1]=0,te){for(fe=ce;fe<ee;fe++){for(pe=0;pe<$;pe++)de[pe][fe]=0;de[fe][fe]=1}for(_e=ce-1;0<=_e;_e--)if(0!==se[_e]){for(fe=_e+1;fe<ee;fe++){for(ye=0,pe=_e;pe<$;pe++)ye+=de[pe][_e]*de[pe][fe];for(ye=-ye/de[_e][_e],pe=_e;pe<$;pe++)de[pe][fe]+=ye*de[pe][_e]}for(pe=_e;pe<$;pe++)de[pe][_e]=-de[pe][_e];for(de[_e][_e]=1+de[_e][_e],pe=0;pe<_e-1;pe++)de[pe][_e]=0}else{for(pe=0;pe<$;pe++)de[pe][_e]=0;de[_e][_e]=1}}if(ae)for(_e=J-1;0<=_e;_e--){if(_e<ge&&0!==he[_e])for(fe=_e+1;fe<J;fe++){for(ye=0,pe=_e+1;pe<J;pe++)ye+=ue[pe][_e]*ue[pe][fe];for(ye=-ye/ue[_e+1][_e],pe=_e+1;pe<J;pe++)ue[pe][fe]+=ye*ue[pe][_e]}for(pe=0;pe<J;pe++)ue[pe][_e]=0;ue[_e][_e]=1}for(var Le=be-1,Ee=0,Ve=Math.pow(2,-52);0<be;){for(_e=be-2;-1<=_e&&-1!==_e;_e--)if(Math.abs(he[_e])<=Ve*(Math.abs(se[_e])+Math.abs(se[_e+1]))){he[_e]=0;break}if(_e===be-2)je=4;else{for(xe=be-1;xe>=_e&&xe!==_e;xe--)if(ye=(xe===be?0:Math.abs(he[xe]))+(xe===_e+1?0:Math.abs(he[xe-1])),Math.abs(se[xe])<=Ve*ye){se[xe]=0;break}xe===_e?je=3:xe===be-1?je=1:(je=2,_e=xe)}switch(_e++,je){case 1:{for(ke=he[be-2],he[be-2]=0,fe=be-2;fe>=_e;fe--)if(ye=G(se[fe],ke),we=se[fe]/ye,ve=ke/ye,se[fe]=ye,fe!==_e&&(ke=-ve*he[fe-1],he[fe-1]=we*he[fe-1]),ae)for(pe=0;pe<J;pe++)ye=we*ue[pe][fe]+ve*ue[pe][be-1],ue[pe][be-1]=-ve*ue[pe][fe]+we*ue[pe][be-1],ue[pe][fe]=ye;break}case 2:{for(ke=he[_e-1],he[_e-1]=0,fe=_e;fe<be;fe++)if(ye=G(se[fe],ke),we=se[fe]/ye,ve=ke/ye,se[fe]=ye,ke=-ve*he[fe],he[fe]=we*he[fe],te)for(pe=0;pe<$;pe++)ye=we*de[pe][fe]+ve*de[pe][_e-1],de[pe][_e-1]=-ve*de[pe][fe]+we*de[pe][_e-1],de[pe][fe]=ye;break}case 3:{for(Pe=Math.max(Math.max(Math.max(Math.max(Math.abs(se[be-1]),Math.abs(se[be-2])),Math.abs(he[be-2])),Math.abs(se[_e])),Math.abs(he[_e])),De=se[be-1]/Pe,Ie=se[be-2]/Pe,Se=he[be-2]/Pe,Ce=se[_e]/Pe,Ae=he[_e]/Pe,Re=((Ie+De)*(Ie-De)+Se*Se)/2,Be=De*Se*(De*Se),ze=0,(0!==Re||0!==Be)&&(ze=Math.sqrt(Re*Re+Be),0>Re&&(ze=-ze),ze=Be/(Re+ze)),ke=(Ce+De)*(Ce-De)+ze,Te=Ce*Ae,fe=_e;fe<be-1;fe++){if(ye=G(ke,Te),we=ke/ye,ve=Te/ye,fe!==_e&&(he[fe-1]=ye),ke=we*se[fe]+ve*he[fe],he[fe]=we*he[fe]-ve*se[fe],Te=ve*se[fe+1],se[fe+1]=we*se[fe+1],ae)for(pe=0;pe<J;pe++)ye=we*ue[pe][fe]+ve*ue[pe][fe+1],ue[pe][fe+1]=-ve*ue[pe][fe]+we*ue[pe][fe+1],ue[pe][fe]=ye;if(ye=G(ke,Te),we=ke/ye,ve=Te/ye,se[fe]=ye,ke=we*he[fe]+ve*se[fe+1],se[fe+1]=-ve*he[fe]+we*se[fe+1],Te=ve*he[fe+1],he[fe+1]=we*he[fe+1],te&&fe<$-1)for(pe=0;pe<$;pe++)ye=we*de[pe][fe]+ve*de[pe][fe+1],de[pe][fe+1]=-ve*de[pe][fe]+we*de[pe][fe+1],de[pe][fe]=ye}he[be-2]=ke,Ee=Ee+1;break}case 4:{if(0>=se[_e]&&(se[_e]=0>se[_e]?-se[_e]:0,ae))for(pe=0;pe<=Le;pe++)ue[pe][_e]=-ue[pe][_e];for(;_e<Le&&!(se[_e]>=se[_e+1]);){if(ye=se[_e],se[_e]=se[_e+1],se[_e+1]=ye,ae&&_e<J-1)for(pe=0;pe<J;pe++)ye=ue[pe][_e+1],ue[pe][_e+1]=ue[pe][_e],ue[pe][_e]=ye;if(te&&_e<$-1)for(pe=0;pe<$;pe++)ye=de[pe][_e+1],de[pe][_e+1]=de[pe][_e],de[pe][_e]=ye;_e++}Ee=0,be--;break}}}if(ne){var Fe=ue;ue=de,de=Fe}this.m=$,this.n=J,this.s=se,this.U=de,this.V=ue}var L=I("../matrix"),E=I("./util"),G=E.hypotenuse,Z=E.getFilled2DArray;T.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){var W=Math.pow(2,-52),Q=Math.max(this.m,this.n)*this.s[0]*W,$=0,J=this.s;for(var ee=0,te=J.length;ee<te;ee++)J[ee]>Q&&$++;return $},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return L.isMatrix(this.U)||(this.U=new L(this.U)),this.U},get rightSingularVectors(){return L.isMatrix(this.V)||(this.V=new L(this.V)),this.V},get diagonalMatrix(){return L.diag(this.s)},solve:function(Q){var $=this.threshold,J=this.s.length,ee=L.zeros(J,J),te;for(te=0;te<J;te++)ee[te][te]=Math.abs(this.s[te])<=$?0:1/this.s[te];var ae=this.U,ie=this.rightSingularVectors,ne=ie.mmul(ee),oe=ie.rows,le=ae.length,se=L.zeros(oe,le),de,ue,he;for(te=0;te<oe;te++)for(de=0;de<le;de++){for(he=0,ue=0;ue<J;ue++)he+=ne[te][ue]*ae[de][ue];se[te][de]=he}return se.mmul(Q)},solveForDiagonal:function(Q){return this.solve(L.diag(Q))},inverse:function(){var Q=this.V,$=this.threshold,J=Q.length,ee=Q[0].length,te=new L(J,this.s.length),ae,ie;for(ae=0;ae<J;ae++)for(ie=0;ie<ee;ie++)te[ae][ie]=Math.abs(this.s[ie])>$?Q[ae][ie]/this.s[ie]:0;var ne=this.U,oe=ne.length,le=ne[0].length,se=new L(J,oe),de,ue;for(ae=0;ae<J;ae++)for(ie=0;ie<oe;ie++){for(ue=0,de=0;de<le;de++)ue+=te[ae][de]*ne[ie][de];se[ae][ie]=ue}return se}},R.exports=T},{"../matrix":88,"./util":85}],85:[function(I,R,T){"use strict";T.hypotenuse=function(E,G){if(Math.abs(E)>Math.abs(G)){var Z=G/E;return Math.abs(E)*Math.sqrt(1+Z*Z)}if(0!==G){var Z=E/G;return Math.abs(G)*Math.sqrt(1+Z*Z)}return 0},T.getEmpty2DArray=function(L,E){var G=Array(L);for(var Z=0;Z<L;Z++)G[Z]=Array(E);return G},T.getFilled2DArray=function(L,E,G){var Z=Array(L);for(var W=0;W<L;W++){Z[W]=Array(E);for(var Q=0;Q<E;Q++)Z[W][Q]=G}return Z}},{}],86:[function(I,R){"use strict";function T(J){return J=E.checkMatrix(J),L(J,E.eye(J.rows))}function L(J,ee){return J=E.checkMatrix(J),ee=E.checkMatrix(ee),J.isSquare()?new W(J).solve(ee):new Q(J).solve(ee)}var E=I("./matrix"),G=I("./dc/svd"),Z=I("./dc/evd"),W=I("./dc/lu"),Q=I("./dc/qr"),$=I("./dc/cholesky");E.inverse=E.inv=T,E.prototype.inverse=E.prototype.inv=function(){return T(this)},E.solve=L,E.prototype.solve=function(J){return L(this,J)},R.exports={SingularValueDecomposition:G,SVD:G,EigenvalueDecomposition:Z,EVD:Z,LuDecomposition:W,LU:W,QrDecomposition:Q,QR:Q,CholeskyDecomposition:$,CHO:$,inverse:T,solve:L}},{"./dc/cholesky":80,"./dc/evd":81,"./dc/lu":82,"./dc/qr":83,"./dc/svd":84,"./matrix":88}],87:[function(I,R){"use strict";R.exports=I("./matrix"),R.exports.Decompositions=R.exports.DC=I("./decompositions")},{"./decompositions":86,"./matrix":88}],88:[function(I,R){"use strict";I("./symbol-species");var T=I("./abstractMatrix"),L=I("./util");class E extends T(Array){constructor(G,Z){if(1===arguments.length&&"number"==typeof G)return Array(G);if(E.isMatrix(G))return G.clone();if(Number.isInteger(G)&&0<G){if(super(G),Number.isInteger(Z)&&0<Z)for(var W=0;W<G;W++)this[W]=Array(Z);else throw new TypeError("nColumns must be a positive integer");}else if(Array.isArray(G)){var Q=G;if(G=Q.length,Z=Q[0].length,"number"!=typeof Z||0===Z)throw new TypeError("Data must be a 2D array with at least one element");super(G);for(var W=0;W<G;W++){if(Q[W].length!==Z)throw new RangeError("Inconsistent array dimensions");this[W]=[].concat(Q[W])}}else throw new TypeError("First argument must be a positive number or an array");this.rows=G,this.columns=Z}set(G,Z,W){return this[G][Z]=W,this}get(G,Z){return this[G][Z]}clone(){var G=new this.constructor[Symbol.species](this.rows,this.columns);for(var Z=0;Z<this.rows;Z++)for(var W=0;W<this.columns;W++)G.set(Z,W,this.get(Z,W));return G}removeRow(G){if(L.checkRowIndex(this,G),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(G,1),this.rows-=1,this}addRow(G,Z){return void 0===Z&&(Z=G,G=this.rows),L.checkRowIndex(this,G,!0),Z=L.checkRowVector(this,Z,!0),this.splice(G,0,Z),this.rows+=1,this}removeColumn(G){if(L.checkColumnIndex(this,G),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var Z=0;Z<this.rows;Z++)this[Z].splice(G,1);return this.columns-=1,this}addColumn(G,Z){"undefined"==typeof Z&&(Z=G,G=this.columns),L.checkColumnIndex(this,G,!0),Z=L.checkColumnVector(this,Z);for(var W=0;W<this.rows;W++)this[W].splice(G,0,Z[W]);return this.columns+=1,this}}R.exports=E,E.abstractMatrix=T},{"./abstractMatrix":79,"./symbol-species":89,"./util":90}],89:[function(){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},{}],90:[function(I,R,T){"use strict";T.checkRowIndex=function(E,G,Z){var W=Z?E.rows:E.rows-1;if(0>G||G>W)throw new RangeError("Row index out of range")},T.checkColumnIndex=function(E,G,Z){var W=Z?E.columns:E.columns-1;if(0>G||G>W)throw new RangeError("Column index out of range")},T.checkRowVector=function(E,G){if(G.to1DArray&&(G=G.to1DArray()),G.length!==E.columns)throw new RangeError("vector size must be the same as the number of columns");return G},T.checkColumnVector=function(E,G){if(G.to1DArray&&(G=G.to1DArray()),G.length!==E.rows)throw new RangeError("vector size must be the same as the number of rows");return G},T.checkIndices=function(E,G,Z){var W=G.some($=>{return 0>$||$>=E.rows}),Q=Z.some($=>{return 0>$||$>=E.columns});if(W||Q)throw new RangeError("Indices are out of range");if("object"!=typeof G||"object"!=typeof Z)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(G)||(G=Array.from(G)),Array.isArray(Z)||(G=Array.from(Z)),{row:G,column:Z}},T.checkRange=function(E,G,Z,W,Q){if(5!==arguments.length)throw new TypeError("Invalid argument type");var $=Array.from(arguments).slice(1).some(function(J){return"number"!=typeof J});if($)throw new TypeError("Invalid argument type");if(G>Z||W>Q||0>G||G>=E.rows||0>Z||Z>=E.rows||0>W||W>=E.columns||0>Q||Q>=E.columns)throw new RangeError("Submatrix indices are out of range")},T.getRange=function(E,G){var Z=Array(G-E+1);for(var W=0;W<Z.length;W++)Z[W]=E+W;return Z}},{}],91:[function(I,R){"use strict";var T=I("../abstractMatrix"),L;class E extends T(){constructor(G,Z,W){super(),this.matrix=G,this.rows=Z,this.columns=W}static get[Symbol.species](){return L||(L=I("../matrix")),L}}R.exports=E},{"../abstractMatrix":79,"../matrix":88}],92:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E,G){super(E,E.rows,1),this.column=G}set(E,G,Z){return this.matrix.set(E,this.column,Z),this}get(E){return this.matrix.get(E,this.column)}}},{"./base":91}],93:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E){super(E,E.rows,E.columns)}set(E,G,Z){return this.matrix.set(E,this.columns-G-1,Z),this}get(E,G){return this.matrix.get(E,this.columns-G-1)}}},{"./base":91}],94:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E){super(E,E.rows,E.columns)}set(E,G,Z){return this.matrix.set(this.rows-E-1,G,Z),this}get(E,G){return this.matrix.get(this.rows-E-1,G)}}},{"./base":91}],95:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E,G){super(E,1,E.columns),this.row=G}set(E,G,Z){return this.matrix.set(this.row,G,Z),this}get(E,G){return this.matrix.get(this.row,G)}}},{"./base":91}],96:[function(I,R){"use strict";var T=I("./base"),L=I("../util");R.exports=class extends T{constructor(G,Z,W){var Q=L.checkIndices(G,Z,W);super(G,Q.row.length,Q.column.length),this.rowIndices=Q.row,this.columnIndices=Q.column}set(G,Z,W){return this.matrix.set(this.rowIndices[G],this.columnIndices[Z],W),this}get(G,Z){return this.matrix.get(this.rowIndices[G],this.columnIndices[Z])}}},{"../util":90,"./base":91}],97:[function(I,R){"use strict";var T=I("./base"),L=I("../util");R.exports=class extends T{constructor(G,Z,W,Q,$){L.checkRange(G,Z,W,Q,$),super(G,W-Z+1,$-Q+1),this.startRow=Z,this.startColumn=Q}set(G,Z,W){return this.matrix.set(this.startRow+G,this.startColumn+Z,W),this}get(G,Z){return this.matrix.get(this.startRow+G,this.startColumn+Z)}}},{"../util":90,"./base":91}],98:[function(I,R){"use strict";var T=I("./base");R.exports=class extends T{constructor(E){super(E,E.columns,E.rows)}set(E,G,Z){return this.matrix.set(G,E,Z),this}get(E,G){return this.matrix.get(G,E)}}},{"./base":91}],99:[function(I,R,T){"use strict";T.SimpleLinearRegression=T.SLR=I("./regression/simple-linear-regression"),T.NonLinearRegression=T.NLR={PolynomialRegression:I("./regression/polynomial-regression"),PotentialRegression:I("./regression/potential-regression"),ExpRegression:I("./regression/exp-regression"),PowerRegression:I("./regression/power-regression")},T.KernelRidgeRegression=T.KRR=I("./regression/kernel-ridge-regression"),T.PolinomialFitting2D=I("./regression/poly-fit-regression2d"),T.TheilSenRegression=I("./regression/theil-sen-regression")},{"./regression/exp-regression":101,"./regression/kernel-ridge-regression":102,"./regression/poly-fit-regression2d":103,"./regression/polynomial-regression":104,"./regression/potential-regression":105,"./regression/power-regression":106,"./regression/simple-linear-regression":107,"./regression/theil-sen-regression":108}],100:[function(I,R){"use strict";R.exports=class{predict(L){var E;if(Array.isArray(L)){E=Array(L.length);for(var G=0;G<L.length;G++)E[G]=this._predict(L[G])}else if(Number.isFinite(L))E=this._predict(L);else throw new TypeError("x must be a number or array");return E}_predict(){throw new Error("_compute not implemented")}train(){}toString(){return""}toLaTeX(){return""}modelQuality(L,E){var G=L.length,Z=Array(G);for(var W=0;W<G;W++)Z[W]=this._predict(L[W]);var Q=0,$=0,J=0,ee=0,te=0,ae=0,ie=0;for(var ne=0;ne<G;ne++)Q+=Z[ne],$+=E[ne],te+=Z[ne]*Z[ne],ae+=E[ne]*E[ne],ie+=Z[ne]*E[ne],0!==E[ne]&&(J+=(E[ne]-Z[ne])*(E[ne]-Z[ne])/E[ne]),ee=(E[ne]-Z[ne])*(E[ne]-Z[ne]);var oe=(G*ie-Q*$)/Math.sqrt((G*te-Q*Q)*(G*ae-$*$));return{r:oe,r2:oe*oe,chi2:J,rmsd:ee*ee/G}}}},{}],101:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./simple-linear-regression"),E=I("./base-regression");class G extends E{constructor(Z,W,Q){if(super(),!0===Z)this.A=W.A,this.C=W.C,W.quality&&(this.quality=W.quality);else{var $=Z.length;if($!==W.length)throw new RangeError("input and output array have a different length");var J=Array($);for(var ee=0;ee<$;ee++)J[ee]=Math.log(W[ee]);var te=new L(Z,J,{computeCoefficient:!1});this.A=te.slope,this.C=Math.exp(te.intercept),(Q||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){return this.C*Math.exp(Z*this.A)}toJSON(){var Z={name:"expRegression",A:this.A,C:this.C};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"f(x) = "+T(this.C,Z)+" * exp("+T(this.A,Z)+" * x)"}toLaTeX(Z){return 0<=this.A?"f(x) = "+T(this.C,Z)+"e^{"+T(this.A,Z)+"x}":"f(x) = \\frac{"+T(this.C,Z)+"}{e^{"+T(-this.A,Z)+"x}}"}static load(Z){if("expRegression"!==Z.name)throw new TypeError("not a exp regression model");return new G(!0,Z)}}R.exports=G},{"./base-regression":100,"./simple-linear-regression":107,"./util":109}],102:[function(I,R){"use strict";var T=I("ml-matrix"),L=I("ml-kernel"),E=I("./base-regression"),G={lambda:0.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class Z extends E{constructor(W,Q,$){if(super(),!0===W)this.alpha=Q.alpha,this.inputs=Q.inputs,this.kernelType=Q.kernelType,this.kernelOptions=Q.kernelOptions,this.kernel=new L(Q.kernelType,Q.kernelOptions),Q.quality&&(this.quality=Q.quality);else{$=Object.assign({},G,$);var J=new L($.kernelType,$.kernelOptions),ee=J.compute(W),te=W.length;ee.add(T.eye(te,te).mul($.lambda)),this.alpha=ee.solve(Q),this.inputs=W,this.kernelType=$.kernelType,this.kernelOptions=$.kernelOptions,this.kernel=J,$.computeQuality&&(this.quality=this.modelQuality(W,Q))}}_predict(W){return this.kernel.compute([W],this.inputs).mmul(this.alpha)[0]}toJSON(){var W={name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions};return this.quality&&(W.quality=this.quality),W}static load(W){if("kernelRidgeRegression"!==W.name)throw new TypeError("not a KRR model");return new Z(!0,W)}}R.exports=Z},{"./base-regression":100,"ml-kernel":70,"ml-matrix":87}],103:[function(I,R){"use strict";function T($,J){var ee=$.clone();for(var te=0;te<$.rows;++te)ee[te][0]=Math.pow(ee[te][0],J);return ee}function L($,J){this[$][J]=Math.abs(this[$][J])}var E=I("ml-matrix"),G=E.DC.SingularValueDecomposition,Z=I("./base-regression"),W={order:2};class Q extends Z{constructor($,J,ee){super(),!0===$?(this.coefficients=E.columnVector(J.coefficients),this.order=J.order,J.r&&(this.r=J.r,this.r2=J.r2),J.chi2&&(this.chi2=J.chi2)):(ee=Object.assign({},W,ee),this.order=ee.order,this.coefficients=[],this.X=$,this.y=J,this.train(this.X,this.y,ee),ee.computeQuality&&(this.quality=this.modelQuality($,J)))}train($,J){if(E.isMatrix($)||($=new E($)),E.isMatrix(J)||(J=E.columnVector(J)),J.rows!==$.rows&&(J=J.transpose()),2!==$.columns)throw new RangeError("You give X with "+$.columns+" columns and it must be 2");if($.rows!==J.rows)throw new RangeError("X and y must have the same rows");var ee=$.rows,te=(this.order+2)*(this.order+1)/2;this.coefficients=Array(te);var ae=$.getColumnVector(0),ie=$.getColumnVector(1),ne=1/ae.clone().apply(L).max(),oe=1/ie.clone().apply(L).max(),le=1/J.clone().apply(L).max();ae.mulColumn(0,ne),ie.mulColumn(0,oe),J.mulColumn(0,le);var se=new E(ee,te),de=0;for(var ue=0;ue<=this.order;++ue){var he=this.order-ue;for(var me=0;me<=he;++me){var ce=T(ae,ue).mulColumnVector(T(ie,me));se.setColumn(de,ce),de++}}var ge=new G(se.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),pe=E.rowVector(ge.diagonal);pe=pe.apply(function(ye,xe){this[ye][xe]=1e-15<=this[ye][xe]?1/this[ye][xe]:0});var fe=E.zeros(ee,te);for(ue=0;ue<te;++ue)fe[ue][ue]=pe[0][ue];pe=fe;var _e=ge.rightSingularVectors,be=ge.leftSingularVectors;for(this.coefficients=be.mmul(pe.transpose()).mmul(_e.transpose()).mmul(J),de=0,ue=0;ue<=te;++ue)for(he=this.order-ue,me=0;me<=he;++me)this.coefficients[de][0]=this.coefficients[de][0]*Math.pow(ne,ue)*Math.pow(oe,me)/le,de++}_predict($){var J=$[0],ee=$[1],te=0,ae=0;for(var ie=0;ie<=this.order;ie++)for(var ne=0;ne<=this.order-ie;ne++)te+=Math.pow(J,ie)*Math.pow(ee,ne)*this.coefficients[ae][0],ae++;return te}toJSON(){var $={name:"polyfit2D",order:this.order,coefficients:this.coefficients};return this.quality&&($.quality=this.quality),$}static load($){if("polyfit2D"!==$.name)throw new TypeError("not a polyfit2D model");return new Q(!0,$)}}R.exports=Q},{"./base-regression":100,"ml-matrix":87}],104:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./base-regression"),E=I("ml-matrix");class G extends L{constructor(Z,W,Q,$){if(super(),!0===Z)this.coefficients=W.coefficients,this.powers=W.powers,this.M=W.M,W.quality&&(this.quality=W.quality);else{var J=Z.length;if(J!==W.length)throw new RangeError("input and output array have a different length");var ee=void 0;if(Array.isArray(Q))ee=Q,Q=ee.length;else for(Q++,ee=Array(Q),ie=0;ie<Q;ie++)ee[ie]=ie;var te=new E(J,Q),ae=new E([W]),ie,ne;for(ie=0;ie<Q;ie++)for(ne=0;ne<J;ne++)te[ne][ie]=0===ee[ie]?1:Math.pow(Z[ne],ee[ie]);var oe=te.transposeView(),le=oe.mmul(te),se=oe.mmul(ae.transposeView());this.coefficients=le.solve(se).to1DArray(),this.powers=ee,this.M=Q-1,($||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){var W=0;for(var Q=0;Q<this.powers.length;Q++)W+=this.coefficients[Q]*Math.pow(Z,this.powers[Q]);return W}toJSON(){var Z={name:"polynomialRegression",coefficients:this.coefficients,powers:this.powers,M:this.M};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return this._toFormula(Z,!1)}toLaTeX(Z){return this._toFormula(Z,!0)}_toFormula(Z,W){var Q="^",$="",J=" * ";W&&(Q="^{",$="}",J="");var ee="",te;for(var ae=0;ae<this.coefficients.length;ae++)te="",0!==this.coefficients[ae]&&(te=0===this.powers[ae]?T(this.coefficients[ae],Z):1===this.powers[ae]?T(this.coefficients[ae],Z)+J+"x":T(this.coefficients[ae],Z)+J+"x"+Q+this.powers[ae]+$,0<this.coefficients[ae]&&ae!==this.coefficients.length-1?te=" + "+te:ae!==this.coefficients.length-1&&(te=" "+te)),ee=te+ee;return" + "===ee.charAt(0)&&(ee=ee.slice(1)),"f(x) = "+ee}static load(Z){if("polynomialRegression"!==Z.name)throw new TypeError("not a polynomial regression model");return new G(!0,Z)}}R.exports=G},{"./base-regression":100,"./util":109,"ml-matrix":87}],105:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./polynomial-regression"),E=I("./base-regression");class G extends E{constructor(Z,W,Q,$){if(super(),!0===Z)this.A=W.A,this.M=W.M,W.quality&&(this.quality=W.quality);else{var J=Z.length;if(J!==W.length)throw new RangeError("input and output array have a different length");var ee=new L(Z,W,[Q],{computeCoefficient:!0});this.A=ee.coefficients[0],this.M=Q,($||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){return this.A*Math.pow(Z,this.M)}toJSON(){var Z={name:"potentialRegression",A:this.A,M:this.M};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"f(x) = "+T(this.A,Z)+" * x^"+this.M}toLaTeX(Z){return 0<=this.M?"f(x) = "+T(this.A,Z)+"x^{"+this.M+"}":"f(x) = \\frac{"+T(this.A,Z)+"}{x^{"+-this.M+"}}"}static load(Z){if("potentialRegression"!==Z.name)throw new TypeError("not a potential regression model");return new G(!0,Z)}}R.exports=G},{"./base-regression":100,"./polynomial-regression":104,"./util":109}],106:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./simple-linear-regression"),E=I("./base-regression");class G extends E{constructor(Z,W,Q){if(super(),!0===Z)this.A=W.A,this.B=W.B,this.quality=W.quality||{},W.quality.r&&(this.quality.r=W.quality.r,this.quality.r2=W.quality.r2),W.quality.chi2&&(this.quality.chi2=W.quality.chi2);else{var $=Z.length;if($!==W.length)throw new RangeError("input and output array have a different length");var J=Array($),ee=Array($);for(var te=0;te<$;te++)J[te]=Math.log(Z[te]),ee[te]=Math.log(W[te]);var ae=new L(J,ee,{computeCoefficient:!1});this.A=Math.exp(ae.intercept),this.B=ae.slope,(Q||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){return this.A*Math.pow(Z,this.B)}toJSON(){var Z={name:"powerRegression",A:this.A,B:this.B};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"f(x) = "+T(this.A,Z)+" * x^"+T(this.B,Z)}toLaTeX(Z){return 0<=this.B?"f(x) = "+T(this.A,Z)+"x^{"+T(this.B,Z)+"}":"f(x) = \\frac{"+T(this.A,Z)+"}{x^{"+T(-this.B,Z)+"}}"}static load(Z){if("powerRegression"!==Z.name)throw new TypeError("not a power regression model");return new G(!0,Z)}}R.exports=G},{"./base-regression":100,"./simple-linear-regression":107,"./util":109}],107:[function(I,R){"use strict";var T=I("./util").maybeToPrecision,L=I("./base-regression");class E extends L{constructor(G,Z,W){if(W=W||{},super(),!0===G)this.slope=Z.slope,this.intercept=Z.intercept,this.quality=Z.quality||{},Z.quality.r&&(this.quality.r=Z.quality.r,this.quality.r2=Z.quality.r2),Z.quality.chi2&&(this.quality.chi2=Z.quality.chi2);else{var Q=G.length;if(Q!==Z.length)throw new RangeError("input and output array have a different length");var $=0,J=0,ee=0,te=0;for(var ae=0;ae<Q;ae++)$+=G[ae],J+=Z[ae],ee+=G[ae]*G[ae],te+=G[ae]*Z[ae];var ie=Q*te-$*J;this.slope=ie/(Q*ee-$*$),this.intercept=1/Q*J-this.slope*(1/Q)*$,this.coefficients=[this.intercept,this.slope],W.computeQuality&&(this.quality=this.modelQuality(G,Z))}}toJSON(){var G={name:"simpleLinearRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(G.quality=this.quality),G}_predict(G){return this.slope*G+this.intercept}computeX(G){return(G-this.intercept)/this.slope}toString(G){var Z="f(x) = ";if(this.slope){var W=T(this.slope,G);if(Z+=(1e-5>Math.abs(W-1)?"":W+" * ")+"x",this.intercept){var Q=Math.abs(this.intercept),$=Q===this.intercept?"+":"-";Z+=" "+$+" "+T(Q,G)}}else Z+=T(this.intercept,G);return Z}toLaTeX(G){return this.toString(G)}static load(G){if("simpleLinearRegression"!==G.name)throw new TypeError("not a SLR model");return new E(!0,G)}}R.exports=E},{"./base-regression":100,"./util":109}],108:[function(I,R){"use strict";var T=I("./base-regression"),L=I("./util").maybeToPrecision,E=I("ml-stat/array").median;class G extends T{constructor(Z,W,Q){if(Q=Q||{},super(),!0===Z)this.slope=W.slope,this.intercept=W.intercept,this.quality=Object.assign({},W.quality,this.quality);else{var $=Z.length;if($!==W.length)throw new RangeError("Input and output array have a different length");var J=Array($*$),ee=0;for(var te=0;te<$;++te)for(var ae=te+1;ae<$;++ae)Z[te]!==Z[ae]&&(J[ee++]=(W[ae]-W[te])/(Z[ae]-Z[te]));J.length=ee;var ie=E(J),ne=Array($);for(var oe=0;oe<$;++oe)ne[oe]=W[oe]-ie*Z[oe];this.slope=ie,this.intercept=E(ne),this.coefficients=[this.intercept,this.slope],Q.computeQuality&&(this.quality=this.modelQuality(Z,W))}}toJSON(){var Z={name:"TheilSenRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(Z.quality=this.quality),Z}_predict(Z){return this.slope*Z+this.intercept}computeX(Z){return(Z-this.intercept)/this.slope}toString(Z){var W="f(x) = ";if(this.slope){var Q=L(this.slope,Z);if(W+=(1e-5>Math.abs(Q-1)?"":Q+" * ")+"x",this.intercept){var $=Math.abs(this.intercept),J=$===this.intercept?"+":"-";W+=" "+J+" "+L($,Z)}}else W+=L(this.intercept,Z);return W}toLaTeX(Z){return this.toString(Z)}static load(Z){if("TheilSenRegression"!==Z.name)throw new TypeError("not a Theil-Sen model");return new G(!0,Z)}}R.exports=G},{"./base-regression":100,"./util":109,"ml-stat/array":110}],109:[function(I,R,T){"use strict";T.maybeToPrecision=function(E,G){return 0>E?(E=-1*E,G)?"- "+E.toPrecision(G):"- "+E.toString():G?E.toPrecision(G):E.toString()}},{}],110:[function(I,R,T){"use strict";function L(E,G){return E-G}T.sum=function(G){var E=0;for(var Z=0;Z<G.length;Z++)E+=G[Z];return E},T.max=function(G){var E=G[0],Z=G.length;for(var W=1;W<Z;W++)G[W]>E&&(E=G[W]);return E},T.min=function(G){var E=G[0],Z=G.length;for(var W=1;W<Z;W++)G[W]<E&&(E=G[W]);return E},T.minMax=function(G){var Z=G[0],W=G[0],Q=G.length;for(var $=1;$<Q;$++)G[$]<Z&&(Z=G[$]),G[$]>W&&(W=G[$]);return{min:Z,max:W}},T.arithmeticMean=function(G){var Z=0,W=G.length;for(var Q=0;Q<W;Q++)Z+=G[Q];return Z/W},T.mean=T.arithmeticMean,T.geometricMean=function(G){var Z=1,W=G.length;for(var Q=0;Q<W;Q++)Z*=G[Q];return Math.pow(Z,1/W)},T.logMean=function(G){var Z=0,W=G.length;for(var Q=0;Q<W;Q++)Z+=Math.log(G[Q]);return Z/W},T.grandMean=function(G,Z){var W=0,Q=0,$=G.length;for(var J=0;J<$;J++)W+=Z[J]*G[J],Q+=Z[J];return W/Q},T.truncatedMean=function(G,Z,W){W===void 0&&(W=!1),W||(G=[].concat(G).sort(L));var Q=G.length,$=Math.floor(Q*Z),J=0;for(var ee=$;ee<Q-$;ee++)J+=G[ee];return J/(Q-2*$)},T.harmonicMean=function(G){var Z=0,W=G.length;for(var Q=0;Q<W;Q++){if(0===G[Q])throw new RangeError("value at index "+Q+"is zero");Z+=1/G[Q]}return W/Z},T.contraHarmonicMean=function(G){var Z=0,W=0,Q=G.length;for(var $=0;$<Q;$++)Z+=G[$]*G[$],W+=G[$];if(0>W)throw new RangeError("sum of values is negative");return Z/W},T.median=function(G,Z){Z===void 0&&(Z=!1),Z||(G=[].concat(G).sort(L));var W=G.length,Q=Math.floor(W/2);return 0==W%2?0.5*(G[Q-1]+G[Q]):G[Q]},T.variance=function(G,Z){Z===void 0&&(Z=!0);var W=T.mean(G),Q=0,$=G.length;for(var J=0;J<$;J++){var ee=G[J]-W;Q+=ee*ee}return Z?Q/($-1):Q/$},T.standardDeviation=function(G,Z){return Math.sqrt(T.variance(G,Z))},T.standardError=function(G){return T.standardDeviation(G)/Math.sqrt(G.length)},T.robustMeanAndStdev=function(G){var Z=0,W=0,Q=G.length,$=0;for($=0;$<Q;$++)Z+=G[$];Z/=Q;var J=Array(Q);for($=0;$<Q;$++)J[$]=Math.abs(G[$]-Z);return J.sort(L),W=1==Q%2?J[(Q-1)/2]/0.6745:0.5*(J[Q/2]+J[Q/2-1])/0.6745,{mean:Z,stdev:W}},T.quartiles=function(G,Z){"undefined"==typeof Z&&(Z=!1),Z||(G=[].concat(G).sort(L));var W=G.length/4,Q=G[Math.ceil(W)-1],$=T.median(G,!0),J=G[Math.ceil(3*W)-1];return{q1:Q,q2:$,q3:J}},T.pooledStandardDeviation=function(G,Z){return Math.sqrt(T.pooledVariance(G,Z))},T.pooledVariance=function(G,Z){"undefined"==typeof Z&&(Z=!0);var W=0,Q=0,$=G.length;for(var J=0;J<$;J++){var ee=G[J],te=T.variance(ee);W+=(ee.length-1)*te,Q+=Z?ee.length-1:ee.length}return W/Q},T.mode=function(G){var Z=G.length,W=Array(Z),Q;for(Q=0;Q<Z;Q++)W[Q]=0;var $=Array(Z),J=0;for(Q=0;Q<Z;Q++){var ee=$.indexOf(G[Q]);0<=ee?W[ee]++:($[J]=G[Q],W[J]=1,J++)}var te=0,ae=0;for(Q=0;Q<J;Q++)W[Q]>te&&(te=W[Q],ae=Q);return $[ae]},T.covariance=function(G,Z,W){"undefined"==typeof W&&(W=!0);var Q=T.mean(G),$=T.mean(Z);if(G.length!==Z.length)throw"Vectors do not have the same dimensions";var J=0,ee=G.length;for(var te=0;te<ee;te++){var ae=G[te]-Q,ie=Z[te]-$;J+=ae*ie}return W?J/(ee-1):J/ee},T.skewness=function(G,Z){"undefined"==typeof Z&&(Z=!0);var W=T.mean(G),Q=0,$=0,J=G.length;for(var ee=0;ee<J;ee++){var te=G[ee]-W;Q+=te*te,$+=te*te*te}var ae=Q/J,ie=$/J,ne=ie/Math.pow(ae,3/2);if(Z){var oe=Math.sqrt(J*(J-1));return oe/(J-2)*ne}return ne},T.kurtosis=function(G,Z){"undefined"==typeof Z&&(Z=!0);var W=T.mean(G),Q=G.length,$=0,J=0;for(var ee=0;ee<Q;ee++){var te=G[ee]-W;$+=te*te,J+=te*te*te*te}var ae=$/Q,ie=J/Q;if(Z){var ne=$/(Q-1),oe=J/(ne*ne);return Q*(Q+1)/((Q-1)*(Q-2)*(Q-3))*oe-3*((Q-1)*(Q-1)/((Q-2)*(Q-3)))}return ie/(ae*ae)-3},T.entropy=function(G,Z){"undefined"==typeof Z&&(Z=0);var W=0,Q=G.length;for(var $=0;$<Q;$++)W+=G[$]*Math.log(G[$]+Z);return-W},T.weightedMean=function(G,Z){var W=0,Q=G.length;for(var $=0;$<Q;$++)W+=G[$]*Z[$];return W},T.weightedStandardDeviation=function(G,Z){return Math.sqrt(T.weightedVariance(G,Z))},T.weightedVariance=function(G,Z){var W=T.weightedMean(G,Z),Q=0,$=G.length,J=0,ee=0;for(var te=0;te<$;te++){var ae=G[te]-W,ie=Z[te];Q+=ie*(ae*ae),ee+=ie,J+=ie*ie}return Q*(ee/(ee*ee-J))},T.center=function(G,Z){"undefined"==typeof Z&&(Z=!1);var W=G;Z||(W=[].concat(G));var Q=T.mean(W),$=W.length;for(var J=0;J<$;J++)W[J]-=Q},T.standardize=function(G,Z,W){"undefined"==typeof Z&&(Z=T.standardDeviation(G)),"undefined"==typeof W&&(W=!1);var Q=G.length,$=W?G:Array(Q);for(var J=0;J<Q;J++)$[J]=G[J]/Z;return $},T.cumulativeSum=function(G){var Z=G.length,W=Array(Z);W[0]=G[0];for(var Q=1;Q<Z;Q++)W[Q]=W[Q-1]+G[Q];return W}},{}],111:[function(I,R,T){"use strict";T.array=I("./array"),T.matrix=I("./matrix")},{"./array":110,"./matrix":112}],112:[function(I,R,T){"use strict";function L(G,Z){return G-Z}var E=I("./array");T.max=function(Z){var G=-(1/0);for(var W=0;W<Z.length;W++)for(var Q=0;Q<Z[W].length;Q++)Z[W][Q]>G&&(G=Z[W][Q]);return G},T.min=function(Z){var G=1/0;for(var W=0;W<Z.length;W++)for(var Q=0;Q<Z[W].length;Q++)Z[W][Q]<G&&(G=Z[W][Q]);return G},T.minMax=function(Z){var W=1/0,Q=-(1/0);for(var $=0;$<Z.length;$++)for(var J=0;J<Z[$].length;J++)Z[$][J]<W&&(W=Z[$][J]),Z[$][J]>Q&&(Q=Z[$][J]);return{min:W,max:Q}},T.entropy=function(Z,W){"undefined"==typeof W&&(W=0);var Q=0,$=Z.length,J=Z[0].length;for(var ee=0;ee<$;ee++)for(var te=0;te<J;te++)Q+=Z[ee][te]*Math.log(Z[ee][te]+W);return-Q},T.mean=function(Z,W){"undefined"==typeof W&&(W=0);var Q=Z.length,$=Z[0].length,J,ee,te,ae;if(-1===W){for(J=[0],ee=Q*$,te=0;te<Q;te++)for(ae=0;ae<$;ae++)J[0]+=Z[te][ae];J[0]/=ee}else if(0===W)for(J=Array($),ee=Q,ae=0;ae<$;ae++){for(J[ae]=0,te=0;te<Q;te++)J[ae]+=Z[te][ae];J[ae]/=ee}else if(1===W)for(J=Array(Q),ee=$,ae=0;ae<Q;ae++){for(J[ae]=0,te=0;te<$;te++)J[ae]+=Z[ae][te];J[ae]/=ee}else throw new Error("Invalid dimension");return J},T.sum=function(Z,W){"undefined"==typeof W&&(W=0);var Q=Z.length,$=Z[0].length,J,ee,te;if(-1===W)for(J=[0],ee=0;ee<Q;ee++)for(te=0;te<$;te++)J[0]+=Z[ee][te];else if(0===W)for(J=Array($),te=0;te<$;te++)for(J[te]=0,ee=0;ee<Q;ee++)J[te]+=Z[ee][te];else if(1===W)for(J=Array(Q),te=0;te<Q;te++)for(J[te]=0,ee=0;ee<$;ee++)J[te]+=Z[te][ee];else throw new Error("Invalid dimension");return J},T.product=function(Z,W){"undefined"==typeof W&&(W=0);var Q=Z.length,$=Z[0].length,J,ee,te;if(-1===W)for(J=[1],ee=0;ee<Q;ee++)for(te=0;te<$;te++)J[0]*=Z[ee][te];else if(0===W)for(J=Array($),te=0;te<$;te++)for(J[te]=1,ee=0;ee<Q;ee++)J[te]*=Z[ee][te];else if(1===W)for(J=Array(Q),te=0;te<Q;te++)for(J[te]=1,ee=0;ee<$;ee++)J[te]*=Z[te][ee];else throw new Error("Invalid dimension");return J},T.standardDeviation=function(Z,W,Q){var $=T.variance(Z,W,Q),J=$.length;for(var ee=0;ee<J;ee++)$[ee]=Math.sqrt($[ee]);return $},T.variance=function(Z,W,Q){"undefined"==typeof Q&&(Q=!0),W=W||T.mean(Z);var $=Z.length;if(0===$)return[];var J=Z[0].length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0,ne=0;for(var oe=0;oe<$;oe++)ne=Z[oe][te]-W[te],ae+=ne,ie+=ne*ne;ee[te]=Q?(ie-ae*ae/$)/($-1):(ie-ae*ae/$)/$}return ee},T.median=function(Z){var W=Z.length,Q=Z[0].length,$=Array(Q);for(var J=0;J<Q;J++){var ee=Array(W);for(var te=0;te<W;te++)ee[te]=Z[te][J];ee.sort(L);var ae=ee.length;$[J]=0==ae%2?0.5*(ee[ae/2]+ee[ae/2-1]):ee[Math.floor(ae/2)]}return $},T.mode=function(Z){var W=Z.length,Q=Z[0].length,$=Array(Q),J,ee;for(J=0;J<Q;J++){var te=Array(W);for(var ae=0;ae<W;ae++)te[ae]=0;var ie=Array(W),ne=0;for(ee=0;ee<W;ee++){var oe=ie.indexOf(Z[ee][J]);0<=oe?te[oe]++:(ie[ne]=Z[ee][J],te[ne]=1,ne++)}var le=0,se=0;for(ee=0;ee<ne;ee++)te[ee]>le&&(le=te[ee],se=ee);$[J]=ie[se]}return $},T.skewness=function(Z,W){"undefined"==typeof W&&(W=!0);var Q=T.mean(Z),$=Z.length,J=Q.length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0;for(var ne=0;ne<$;ne++){var oe=Z[ne][te]-Q[te];ae+=oe*oe,ie+=oe*oe*oe}var le=ae/$,se=ie/$,de=se/Math.pow(le,3/2);if(W){var ue=Math.sqrt($*($-1));ee[te]=ue/($-2)*de}else ee[te]=de}return ee},T.kurtosis=function(Z,W){"undefined"==typeof W&&(W=!0);var Q=T.mean(Z),$=Z.length,J=Z[0].length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0;for(var ne=0;ne<$;ne++){var oe=Z[ne][te]-Q[te];ae+=oe*oe,ie+=oe*oe*oe*oe}var le=ae/$,se=ie/$;if(W){var de=ae/($-1),ue=ie/(de*de);ee[te]=$*($+1)/(($-1)*($-2)*($-3))*ue-3*(($-1)*($-1)/(($-2)*($-3)))}else ee[te]=se/(le*le)-3}return ee},T.standardError=function(Z){var W=Z.length,Q=T.standardDeviation(Z),$=Q.length,J=Array($),ee=Math.sqrt(W);for(var te=0;te<$;te++)J[te]=Q[te]/ee;return J},T.covariance=function(Z,W){return T.scatter(Z,void 0,W)},T.scatter=function(Z,W,Q){"undefined"==typeof Q&&(Q=0),"undefined"==typeof W&&(0===Q?W=Z.length-1:1==Q&&(W=Z[0].length-1));var $=T.mean(Z,Q),J=Z.length;if(0===J)return[[]];var ee=Z[0].length,te,ae,ie,ne,oe;if(0===Q){for(te=Array(ee),ae=0;ae<ee;ae++)te[ae]=Array(ee);for(ae=0;ae<ee;ae++)for(ie=ae;ie<ee;ie++){for(ne=0,oe=0;oe<J;oe++)ne+=(Z[oe][ie]-$[ie])*(Z[oe][ae]-$[ae]);ne/=W,te[ae][ie]=ne,te[ie][ae]=ne}}else if(1===Q){for(te=Array(J),ae=0;ae<J;ae++)te[ae]=Array(J);for(ae=0;ae<J;ae++)for(ie=ae;ie<J;ie++){for(ne=0,oe=0;oe<ee;oe++)ne+=(Z[ie][oe]-$[ie])*(Z[ae][oe]-$[ae]);ne/=W,te[ae][ie]=ne,te[ie][ae]=ne}}else throw new Error("Invalid dimension");return te},T.correlation=function(Z){var W=T.mean(Z),Q=T.standardDeviation(Z,!0,W),$=T.zScores(Z,W,Q),J=Z.length,ee=Z[0].length,te,ae,ie=Array(ee);for(te=0;te<ee;te++)ie[te]=Array(ee);for(te=0;te<ee;te++)for(ae=te;ae<ee;ae++){var ne=0;for(var oe=0,le=$.length;oe<le;oe++)ne+=$[oe][ae]*$[oe][te];ne/=J-1,ie[te][ae]=ne,ie[ae][te]=ne}return ie},T.zScores=function(Z,W,Q){return W=W||T.mean(Z),"undefined"==typeof Q&&(Q=T.standardDeviation(Z,!0,W)),T.standardize(T.center(Z,W,!1),Q,!0)},T.center=function(Z,W,Q){W=W||T.mean(Z);var $=Z,J=Z.length,ee,te,ae;if(!Q)for($=Array(J),ee=0;ee<J;ee++)$[ee]=Array(Z[ee].length);for(ee=0;ee<J;ee++){var ie=$[ee];for(te=0,ae=ie.length;te<ae;te++)ie[te]=Z[ee][te]-W[te]}return $},T.standardize=function(Z,W,Q){"undefined"==typeof W&&(W=T.standardDeviation(Z));var $=Z,J=Z.length,ee,te,ae;if(!Q)for($=Array(J),ee=0;ee<J;ee++)$[ee]=Array(Z[ee].length);for(ee=0;ee<J;ee++){var ie=$[ee],ne=Z[ee];for(te=0,ae=ie.length;te<ae;te++)0===W[te]||isNaN(W[te])||(ie[te]=ne[te]/W[te])}return $},T.weightedVariance=function(Z,W){var Q=T.mean(Z),$=Z.length;if(0===$)return[];var J=Z[0].length,ee=Array(J);for(var te=0;te<J;te++){var ae=0,ie=0,ne=0;for(var oe=0;oe<$;oe++){var le=Z[oe][te]-Q[te],se=W[oe];ae+=se*(le*le),ne+=se,ie+=se*se}ee[te]=ae*(ne/(ne*ne-ie))}return ee},T.weightedMean=function(Z,W,Q){"undefined"==typeof Q&&(Q=0);var $=Z.length;if(0===$)return[];var J=Z[0].length,ee,te,ae,ie,ne,oe;if(0===Q){for(ee=Array(J),te=0;te<J;te++)ee[te]=0;for(te=0;te<$;te++)for(oe=Z[te],ne=W[te],ie=0;ie<J;ie++)ee[ie]+=oe[ie]*ne}else if(1===Q){for(ee=Array($),te=0;te<$;te++)ee[te]=0;for(ie=0;ie<$;ie++)for(oe=Z[ie],ne=W[ie],te=0;te<J;te++)ee[ie]+=oe[te]*ne}else throw new Error("Invalid dimension");var le=E.sum(W);if(0!==le)for(te=0,ae=ee.length;te<ae;te++)ee[te]/=le;return ee},T.weightedCovariance=function(Z,W,Q,$){$=$||0,Q=Q||T.weightedMean(Z,W,$);var J=0,ee=0;for(var te=0,ae=W.length;te<ae;te++)J+=W[te],ee+=W[te]*W[te];var ie=J/(J*J-ee);return T.weightedScatter(Z,W,Q,ie,$)},T.weightedScatter=function(Z,W,Q,$,J){J=J||0,Q=Q||T.weightedMean(Z,W,J),"undefined"==typeof $&&($=1);var ee=Z.length;if(0===ee)return[[]];var te=Z[0].length,ae,ie,ne,oe,le;if(0===J){for(ae=Array(te),ie=0;ie<te;ie++)ae[ie]=Array(te);for(ie=0;ie<te;ie++)for(ne=ie;ne<te;ne++){for(le=0,oe=0;oe<ee;oe++)le+=W[oe]*(Z[oe][ne]-Q[ne])*(Z[oe][ie]-Q[ie]);ae[ie][ne]=le*$,ae[ne][ie]=le*$}}else if(1===J){for(ae=Array(ee),ie=0;ie<ee;ie++)ae[ie]=Array(ee);for(ie=0;ie<ee;ie++)for(ne=ie;ne<ee;ne++){for(le=0,oe=0;oe<te;oe++)le+=W[oe]*(Z[ne][oe]-Q[ne])*(Z[ie][oe]-Q[ie]);ae[ie][ne]=le*$,ae[ne][ie]=le*$}}else throw new Error("Invalid dimension");return ae}},{"./array":110}],113:[function(I,R){"use strict";R.exports="function"==typeof Promise?Promise:I("lie")},{lie:57}],114:[function(I,R){"use strict";R.exports=function(L,E){L=L||0;var G=Array(L);for(var Z=0;Z<L;Z++)G[Z]=E;return G}},{}],115:[function(I,R,T){"use strict";function L(G){if("number"!=typeof G||E(G))throw new TypeError("Expected a number")}var E=I("number-is-nan");T.asc=function(G,Z){return L(G),L(Z),G-Z},T.desc=function(G,Z){return L(G),L(Z),Z-G}},{"number-is-nan":116}],116:[function(I,R){"use strict";R.exports=Number.isNaN||function(T){return T!==T}},{}],117:[function(I,R){"use strict";var T=Object.prototype.hasOwnProperty,L=Object.prototype.toString,E=Array.prototype.slice,G=I("./isArguments"),Z=Object.prototype.propertyIsEnumerable,W=!Z.call({toString:null},"toString"),Q=Z.call(function(){},"prototype"),$=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],J=function(oe){var le=oe.constructor;return le&&le.prototype===oe},ee={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},te=function(){if("undefined"==typeof window)return!1;for(var ne in window)try{if(!ee["$"+ne]&&T.call(window,ne)&&null!==window[ne]&&"object"==typeof window[ne])try{J(window[ne])}catch(oe){return!0}}catch(oe){return!0}return!1}(),ae=function(oe){if("undefined"==typeof window||!te)return J(oe);try{return J(oe)}catch(le){return!1}},ie=function(oe){var le=null!==oe&&"object"==typeof oe,se="[object Function]"===L.call(oe),de=G(oe),ue=le&&"[object String]"===L.call(oe),he=[];if(!le&&!se&&!de)throw new TypeError("Object.keys called on a non-object");if(ue&&0<oe.length&&!T.call(oe,0))for(var me=0;me<oe.length;++me)he.push(me+"");if(de&&0<oe.length)for(var ce=0;ce<oe.length;++ce)he.push(ce+"");else for(var ge in oe)!(Q&&se&&"prototype"===ge)&&T.call(oe,ge)&&he.push(ge+"");if(W){var pe=ae(oe);for(var fe=0;fe<$.length;++fe)!(pe&&"constructor"===$[fe])&&T.call(oe,$[fe])&&he.push($[fe])}return he};ie.shim=function(){if(Object.keys){var oe=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!oe){var le=Object.keys;Object.keys=function(de){return G(de)?le(E.call(de)):le(de)}}}else Object.keys=ie;return Object.keys||ie},R.exports=ie},{"./isArguments":118}],118:[function(I,R){"use strict";var T=Object.prototype.toString;R.exports=function(E){var G=T.call(E),Z="[object Arguments]"===G;return Z||(Z="[object Array]"!==G&&null!==E&&"object"==typeof E&&"number"==typeof E.length&&0<=E.length&&"[object Function]"===T.call(E.callee)),Z}},{}],119:[function(I,R){"use strict";var T=I("./lib/utils/common").assign,L=I("./lib/deflate"),E=I("./lib/inflate"),G=I("./lib/zlib/constants"),Z={};T(Z,L,E,G),R.exports=Z},{"./lib/deflate":120,"./lib/inflate":121,"./lib/utils/common":122,"./lib/zlib/constants":125}],120:[function(I,R,T){"use strict";function L(ne){if(!(this instanceof L))return new L(ne);this.options=Z.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},ne||{});var oe=this.options;oe.raw&&0<oe.windowBits?oe.windowBits=-oe.windowBits:oe.gzip&&0<oe.windowBits&&16>oe.windowBits&&(oe.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $,this.strm.avail_out=0;var le=G.deflateInit2(this.strm,oe.level,oe.method,oe.windowBits,oe.memLevel,oe.strategy);if(le!==te)throw new Error(Q[le]);if(oe.header&&G.deflateSetHeader(this.strm,oe.header),oe.dictionary){var se;if(se="string"==typeof oe.dictionary?W.string2buf(oe.dictionary):"[object ArrayBuffer]"===J.call(oe.dictionary)?new Uint8Array(oe.dictionary):oe.dictionary,le=G.deflateSetDictionary(this.strm,se),le!==te)throw new Error(Q[le]);this._dict_set=!0}}function E(ne,oe){var le=new L(oe);if(le.push(ne,!0),le.err)throw le.msg;return le.result}var G=I("./zlib/deflate"),Z=I("./utils/common"),W=I("./utils/strings"),Q=I("./zlib/messages"),$=I("./zlib/zstream"),J=Object.prototype.toString,ee=4,te=0,ae=1,ie=2;L.prototype.push=function(ne,oe){var le=this.strm,se=this.options.chunkSize,de,ue;if(this.ended)return!1;ue=oe===~~oe?oe:!0===oe?ee:0,le.input="string"==typeof ne?W.string2buf(ne):"[object ArrayBuffer]"===J.call(ne)?new Uint8Array(ne):ne,le.next_in=0,le.avail_in=le.input.length;do{if(0===le.avail_out&&(le.output=new Z.Buf8(se),le.next_out=0,le.avail_out=se),de=G.deflate(le,ue),de!==ae&&de!==te)return this.onEnd(de),this.ended=!0,!1;(0===le.avail_out||0===le.avail_in&&(ue===ee||ue===ie))&&("string"===this.options.to?this.onData(W.buf2binstring(Z.shrinkBuf(le.output,le.next_out))):this.onData(Z.shrinkBuf(le.output,le.next_out)))}while((0<le.avail_in||0===le.avail_out)&&de!==ae);return ue===ee?(de=G.deflateEnd(this.strm),this.onEnd(de),this.ended=!0,de===te):ue!==ie||(this.onEnd(te),le.avail_out=0,!0)},L.prototype.onData=function(ne){this.chunks.push(ne)},L.prototype.onEnd=function(ne){ne===te&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Z.flattenChunks(this.chunks)),this.chunks=[],this.err=ne,this.msg=this.strm.msg},T.Deflate=L,T.deflate=E,T.deflateRaw=function(oe,le){return le=le||{},le.raw=!0,E(oe,le)},T.gzip=function(oe,le){return le=le||{},le.gzip=!0,E(oe,le)}},{"./utils/common":122,"./utils/strings":123,"./zlib/deflate":127,"./zlib/messages":132,"./zlib/zstream":134}],121:[function(I,R,T){"use strict";function L(ae){if(!(this instanceof L))return new L(ae);this.options=Z.assign({chunkSize:16384,windowBits:0,to:""},ae||{});var ie=this.options;ie.raw&&0<=ie.windowBits&&16>ie.windowBits&&(ie.windowBits=-ie.windowBits,0===ie.windowBits&&(ie.windowBits=-15)),0<=ie.windowBits&&16>ie.windowBits&&!(ae&&ae.windowBits)&&(ie.windowBits+=32),15<ie.windowBits&&48>ie.windowBits&&0==(15&ie.windowBits)&&(ie.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new J,this.strm.avail_out=0;var ne=G.inflateInit2(this.strm,ie.windowBits);if(ne!==Q.Z_OK)throw new Error($[ne]);this.header=new ee,G.inflateGetHeader(this.strm,this.header)}function E(ae,ie){var ne=new L(ie);if(ne.push(ae,!0),ne.err)throw ne.msg;return ne.result}var G=I("./zlib/inflate"),Z=I("./utils/common"),W=I("./utils/strings"),Q=I("./zlib/constants"),$=I("./zlib/messages"),J=I("./zlib/zstream"),ee=I("./zlib/gzheader"),te=Object.prototype.toString;L.prototype.push=function(ae,ie){var ne=this.strm,oe=this.options.chunkSize,le=this.options.dictionary,ge=!1,se,de,ue,he,me,ce;if(this.ended)return!1;de=ie===~~ie?ie:!0===ie?Q.Z_FINISH:Q.Z_NO_FLUSH,ne.input="string"==typeof ae?W.binstring2buf(ae):"[object ArrayBuffer]"===te.call(ae)?new Uint8Array(ae):ae,ne.next_in=0,ne.avail_in=ne.input.length;do{if(0===ne.avail_out&&(ne.output=new Z.Buf8(oe),ne.next_out=0,ne.avail_out=oe),se=G.inflate(ne,Q.Z_NO_FLUSH),se===Q.Z_NEED_DICT&&le&&(ce="string"==typeof le?W.string2buf(le):"[object ArrayBuffer]"===te.call(le)?new Uint8Array(le):le,se=G.inflateSetDictionary(this.strm,ce)),se===Q.Z_BUF_ERROR&&!0==ge&&(se=Q.Z_OK,ge=!1),se!==Q.Z_STREAM_END&&se!==Q.Z_OK)return this.onEnd(se),this.ended=!0,!1;ne.next_out&&(0===ne.avail_out||se===Q.Z_STREAM_END||0===ne.avail_in&&(de===Q.Z_FINISH||de===Q.Z_SYNC_FLUSH))&&("string"===this.options.to?(ue=W.utf8border(ne.output,ne.next_out),he=ne.next_out-ue,me=W.buf2string(ne.output,ue),ne.next_out=he,ne.avail_out=oe-he,he&&Z.arraySet(ne.output,ne.output,ue,he,0),this.onData(me)):this.onData(Z.shrinkBuf(ne.output,ne.next_out))),0===ne.avail_in&&0===ne.avail_out&&(ge=!0)}while((0<ne.avail_in||0===ne.avail_out)&&se!==Q.Z_STREAM_END);return se===Q.Z_STREAM_END&&(de=Q.Z_FINISH),de===Q.Z_FINISH?(se=G.inflateEnd(this.strm),this.onEnd(se),this.ended=!0,se===Q.Z_OK):de!==Q.Z_SYNC_FLUSH||(this.onEnd(Q.Z_OK),ne.avail_out=0,!0)},L.prototype.onData=function(ae){this.chunks.push(ae)},L.prototype.onEnd=function(ae){ae===Q.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Z.flattenChunks(this.chunks)),this.chunks=[],this.err=ae,this.msg=this.strm.msg},T.Inflate=L,T.inflate=E,T.inflateRaw=function(ie,ne){return ne=ne||{},ne.raw=!0,E(ie,ne)},T.ungzip=E},{"./utils/common":122,"./utils/strings":123,"./zlib/constants":125,"./zlib/gzheader":128,"./zlib/inflate":130,"./zlib/messages":132,"./zlib/zstream":134}],122:[function(I,R,T){"use strict";var L="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;T.assign=function(Z){for(var W=Array.prototype.slice.call(arguments,1);W.length;){var Q=W.shift();if(Q){if("object"!=typeof Q)throw new TypeError(Q+"must be non-object");for(var $ in Q)Q.hasOwnProperty($)&&(Z[$]=Q[$])}}return Z},T.shrinkBuf=function(Z,W){return Z.length===W?Z:Z.subarray?Z.subarray(0,W):(Z.length=W,Z)};var E={arraySet:function(W,Q,$,J,ee){if(Q.subarray&&W.subarray)return void W.set(Q.subarray($,$+J),ee);for(var te=0;te<J;te++)W[ee+te]=Q[$+te]},flattenChunks:function(W){var Q,$,J,ee,te,ae;for(J=0,Q=0,$=W.length;Q<$;Q++)J+=W[Q].length;for(ae=new Uint8Array(J),ee=0,(Q=0,$=W.length);Q<$;Q++)te=W[Q],ae.set(te,ee),ee+=te.length;return ae}},G={arraySet:function(W,Q,$,J,ee){for(var te=0;te<J;te++)W[ee+te]=Q[$+te]},flattenChunks:function(W){return[].concat.apply([],W)}};T.setTyped=function(Z){Z?(T.Buf8=Uint8Array,T.Buf16=Uint16Array,T.Buf32=Int32Array,T.assign(T,E)):(T.Buf8=Array,T.Buf16=Array,T.Buf32=Array,T.assign(T,G))},T.setTyped(L)},{}],123:[function(I,R,T){"use strict";function L($,J){if(65537>J&&($.subarray&&Z||!$.subarray&&G))return String.fromCharCode.apply(null,E.shrinkBuf($,J));var ee="";for(var te=0;te<J;te++)ee+=String.fromCharCode($[te]);return ee}var E=I("./common"),G=!0,Z=!0;try{String.fromCharCode.apply(null,[0])}catch($){G=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch($){Z=!1}var W=new E.Buf8(256);for(var Q=0;256>Q;Q++)W[Q]=252<=Q?6:248<=Q?5:240<=Q?4:224<=Q?3:192<=Q?2:1;W[254]=W[254]=1,T.string2buf=function($){var ne=$.length,oe=0,J,ee,te,ae,ie;for(ae=0;ae<ne;ae++)ee=$.charCodeAt(ae),55296==(64512&ee)&&ae+1<ne&&(te=$.charCodeAt(ae+1),56320==(64512&te)&&(ee=65536+(ee-55296<<10)+(te-56320),ae++)),oe+=128>ee?1:2048>ee?2:65536>ee?3:4;for(J=new E.Buf8(oe),ie=0,ae=0;ie<oe;ae++)ee=$.charCodeAt(ae),55296==(64512&ee)&&ae+1<ne&&(te=$.charCodeAt(ae+1),56320==(64512&te)&&(ee=65536+(ee-55296<<10)+(te-56320),ae++)),128>ee?J[ie++]=ee:2048>ee?(J[ie++]=192|ee>>>6,J[ie++]=128|63&ee):65536>ee?(J[ie++]=224|ee>>>12,J[ie++]=128|63&ee>>>6,J[ie++]=128|63&ee):(J[ie++]=240|ee>>>18,J[ie++]=128|63&ee>>>12,J[ie++]=128|63&ee>>>6,J[ie++]=128|63&ee);return J},T.buf2binstring=function($){return L($,$.length)},T.binstring2buf=function($){var J=new E.Buf8($.length);for(var ee=0,te=J.length;ee<te;ee++)J[ee]=$.charCodeAt(ee);return J},T.buf2string=function($,J){var ee,te,ae,ie,ne=J||$.length,oe=Array(2*ne);for(te=0,ee=0;ee<ne;){if(ae=$[ee++],128>ae){oe[te++]=ae;continue}if(ie=W[ae],4<ie){oe[te++]=65533,ee+=ie-1;continue}for(ae&=2===ie?31:3===ie?15:7;1<ie&&ee<ne;)ae=ae<<6|63&$[ee++],ie--;if(1<ie){oe[te++]=65533;continue}65536>ae?oe[te++]=ae:(ae-=65536,oe[te++]=55296|1023&ae>>10,oe[te++]=56320|1023&ae)}return L(oe,te)},T.utf8border=function($,J){var ee;for(J=J||$.length,J>$.length&&(J=$.length),ee=J-1;0<=ee&&128==(192&$[ee]);)ee--;return 0>ee?J:0===ee?J:ee+W[$[ee]]>J?ee:J}},{"./common":122}],124:[function(I,R){"use strict";R.exports=function(L,E,G,Z){for(var W=0|65535&L,Q=0|65535&L>>>16,$=0;0!==G;){$=2e3<G?2e3:G,G-=$;do W=0|W+E[Z++],Q=0|Q+W;while(--$);W%=65521,Q%=65521}return 0|(W|Q<<16)}},{}],125:[function(I,R){"use strict";R.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],126:[function(I,R){"use strict";var T=function(){var G=[],E;for(var Z=0;256>Z;Z++){E=Z;for(var W=0;8>W;W++)E=1&E?3988292384^E>>>1:E>>>1;G[Z]=E}return G}();R.exports=function(E,G,Z,W){E^=-1;for(var Q=W;Q<W+Z;Q++)E=E>>>8^T[255&(E^G[Q])];return-1^E}},{}],127:[function(I,R,T){"use strict";function L(qe,Ue){return qe.msg=_e[Ue],Ue}function E(qe){return(qe<<1)-(4<qe?9:0)}function G(qe){for(var Ue=qe.length;0<=--Ue;)qe[Ue]=0}function Z(qe){var Ue=qe.state,Xe=Ue.pending;Xe>qe.avail_out&&(Xe=qe.avail_out);0===Xe||(ce.arraySet(qe.output,Ue.pending_buf,Ue.pending_out,Xe,qe.next_out),qe.next_out+=Xe,Ue.pending_out+=Xe,qe.total_out+=Xe,qe.avail_out-=Xe,Ue.pending-=Xe,0===Ue.pending&&(Ue.pending_out=0))}function W(qe,Ue){ge._tr_flush_block(qe,0<=qe.block_start?qe.block_start:-1,qe.strstart-qe.block_start,Ue),qe.block_start=qe.strstart,Z(qe.strm)}function Q(qe,Ue){qe.pending_buf[qe.pending++]=Ue}function $(qe,Ue){qe.pending_buf[qe.pending++]=255&Ue>>>8,qe.pending_buf[qe.pending++]=255&Ue}function J(qe,Ue,Xe,Ge){var He=qe.avail_in;return(He>Ge&&(He=Ge),0===He)?0:(qe.avail_in-=He,ce.arraySet(Ue,qe.input,qe.next_in,He,Xe),1===qe.state.wrap?qe.adler=pe(qe.adler,Ue,He,Xe):2===qe.state.wrap&&(qe.adler=fe(qe.adler,Ue,He,Xe)),qe.next_in+=He,qe.total_in+=He,He)}function ee(qe,Ue){var Xe=qe.max_chain_length,Ge=qe.strstart,He,Ze,We=qe.prev_length,Ke=qe.nice_match,Qe=qe.strstart>qe.w_size-Ce?qe.strstart-(qe.w_size-Ce):0,$e=qe.window,Je=qe.w_mask,et=qe.prev,at=qe.strstart+Se,nt=$e[Ge+We-1],ot=$e[Ge+We];qe.prev_length>=qe.good_match&&(Xe>>=2),Ke>qe.lookahead&&(Ke=qe.lookahead);do{if(He=Ue,$e[He+We]!==ot||$e[He+We-1]!==nt||$e[He]!==$e[Ge]||$e[++He]!==$e[Ge+1])continue;Ge+=2,He++;do;while($e[++Ge]===$e[++He]&&$e[++Ge]===$e[++He]&&$e[++Ge]===$e[++He]&&$e[++Ge]===$e[++He]&&$e[++Ge]===$e[++He]&&$e[++Ge]===$e[++He]&&$e[++Ge]===$e[++He]&&$e[++Ge]===$e[++He]&&Ge<at);if(Ze=Se-(at-Ge),Ge=at-Se,Ze>We){if(qe.match_start=Ue,We=Ze,Ze>=Ke)break;nt=$e[Ge+We-1],ot=$e[Ge+We]}}while((Ue=et[Ue&Je])>Qe&&0!=--Xe);return We<=qe.lookahead?We:qe.lookahead}function te(qe){var Ue=qe.w_size,Xe,Ge,He,Ze,We;do{if(Ze=qe.window_size-qe.lookahead-qe.strstart,qe.strstart>=Ue+(Ue-Ce)){ce.arraySet(qe.window,qe.window,Ue,Ue,0),qe.match_start-=Ue,qe.strstart-=Ue,qe.block_start-=Ue,Ge=qe.hash_size,Xe=Ge;do He=qe.head[--Xe],qe.head[Xe]=He>=Ue?He-Ue:0;while(--Ge);Ge=Ue,Xe=Ge;do He=qe.prev[--Xe],qe.prev[Xe]=He>=Ue?He-Ue:0;while(--Ge);Ze+=Ue}if(0===qe.strm.avail_in)break;if(Ge=J(qe.strm,qe.window,qe.strstart+qe.lookahead,Ze),qe.lookahead+=Ge,qe.lookahead+qe.insert>=Ie)for(We=qe.strstart-qe.insert,qe.ins_h=qe.window[We],qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[We+1])&qe.hash_mask;qe.insert&&(qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[We+Ie-1])&qe.hash_mask,qe.prev[We&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=We,We++,qe.insert--,!(qe.lookahead+qe.insert<Ie)););}while(qe.lookahead<Ce&&0!==qe.strm.avail_in)}function ae(qe,Ue){for(var Xe,Ge;;){if(qe.lookahead<Ce){if(te(qe),qe.lookahead<Ce&&Ue===be)return Ve;if(0===qe.lookahead)break}if(Xe=0,qe.lookahead>=Ie&&(qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[qe.strstart+Ie-1])&qe.hash_mask,Xe=qe.prev[qe.strstart&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=qe.strstart),0!==Xe&&qe.strstart-Xe<=qe.w_size-Ce&&(qe.match_length=ee(qe,Xe)),!(qe.match_length>=Ie))Ge=ge._tr_tally(qe,0,qe.window[qe.strstart]),qe.lookahead--,qe.strstart++;else if(Ge=ge._tr_tally(qe,qe.strstart-qe.match_start,qe.match_length-Ie),qe.lookahead-=qe.match_length,qe.match_length<=qe.max_lazy_match&&qe.lookahead>=Ie){qe.match_length--;do qe.strstart++,qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[qe.strstart+Ie-1])&qe.hash_mask,Xe=qe.prev[qe.strstart&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=qe.strstart;while(0!=--qe.match_length);qe.strstart++}else qe.strstart+=qe.match_length,qe.match_length=0,qe.ins_h=qe.window[qe.strstart],qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[qe.strstart+1])&qe.hash_mask;if(Ge&&(W(qe,!1),0===qe.strm.avail_out))return Ve}return qe.insert=qe.strstart<Ie-1?qe.strstart:Ie-1,Ue===ye?(W(qe,!0),0===qe.strm.avail_out?Ne:Oe):qe.last_lit&&(W(qe,!1),0===qe.strm.avail_out)?Ve:Fe}function ie(qe,Ue){for(var Xe,Ge,He;;){if(qe.lookahead<Ce){if(te(qe),qe.lookahead<Ce&&Ue===be)return Ve;if(0===qe.lookahead)break}if(Xe=0,qe.lookahead>=Ie&&(qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[qe.strstart+Ie-1])&qe.hash_mask,Xe=qe.prev[qe.strstart&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=qe.strstart),qe.prev_length=qe.match_length,qe.prev_match=qe.match_start,qe.match_length=Ie-1,0!==Xe&&qe.prev_length<qe.max_lazy_match&&qe.strstart-Xe<=qe.w_size-Ce&&(qe.match_length=ee(qe,Xe),5>=qe.match_length&&(1===qe.strategy||qe.match_length===Ie&&4096<qe.strstart-qe.match_start)&&(qe.match_length=Ie-1)),qe.prev_length>=Ie&&qe.match_length<=qe.prev_length){He=qe.strstart+qe.lookahead-Ie,Ge=ge._tr_tally(qe,qe.strstart-1-qe.prev_match,qe.prev_length-Ie),qe.lookahead-=qe.prev_length-1,qe.prev_length-=2;do++qe.strstart<=He&&(qe.ins_h=(qe.ins_h<<qe.hash_shift^qe.window[qe.strstart+Ie-1])&qe.hash_mask,Xe=qe.prev[qe.strstart&qe.w_mask]=qe.head[qe.ins_h],qe.head[qe.ins_h]=qe.strstart);while(0!=--qe.prev_length);if(qe.match_available=0,qe.match_length=Ie-1,qe.strstart++,Ge&&(W(qe,!1),0===qe.strm.avail_out))return Ve}else if(!qe.match_available)qe.match_available=1,qe.strstart++,qe.lookahead--;else if(Ge=ge._tr_tally(qe,0,qe.window[qe.strstart-1]),Ge&&W(qe,!1),qe.strstart++,qe.lookahead--,0===qe.strm.avail_out)return Ve}return qe.match_available&&(Ge=ge._tr_tally(qe,0,qe.window[qe.strstart-1]),qe.match_available=0),qe.insert=qe.strstart<Ie-1?qe.strstart:Ie-1,Ue===ye?(W(qe,!0),0===qe.strm.avail_out?Ne:Oe):qe.last_lit&&(W(qe,!1),0===qe.strm.avail_out)?Ve:Fe}function ne(qe,Ue){for(var We=qe.window,Xe,Ge,He,Ze;;){if(qe.lookahead<=Se){if(te(qe),qe.lookahead<=Se&&Ue===be)return Ve;if(0===qe.lookahead)break}if(qe.match_length=0,qe.lookahead>=Ie&&0<qe.strstart&&(He=qe.strstart-1,Ge=We[He],Ge===We[++He]&&Ge===We[++He]&&Ge===We[++He])){Ze=qe.strstart+Se;do;while(Ge===We[++He]&&Ge===We[++He]&&Ge===We[++He]&&Ge===We[++He]&&Ge===We[++He]&&Ge===We[++He]&&Ge===We[++He]&&Ge===We[++He]&&He<Ze);qe.match_length=Se-(Ze-He),qe.match_length>qe.lookahead&&(qe.match_length=qe.lookahead)}if(qe.match_length>=Ie?(Xe=ge._tr_tally(qe,1,qe.match_length-Ie),qe.lookahead-=qe.match_length,qe.strstart+=qe.match_length,qe.match_length=0):(Xe=ge._tr_tally(qe,0,qe.window[qe.strstart]),qe.lookahead--,qe.strstart++),Xe&&(W(qe,!1),0===qe.strm.avail_out))return Ve}return qe.insert=0,Ue===ye?(W(qe,!0),0===qe.strm.avail_out?Ne:Oe):qe.last_lit&&(W(qe,!1),0===qe.strm.avail_out)?Ve:Fe}function oe(qe,Ue){for(var Xe;;){if(0===qe.lookahead&&(te(qe),0===qe.lookahead)){if(Ue===be)return Ve;break}if(qe.match_length=0,Xe=ge._tr_tally(qe,0,qe.window[qe.strstart]),qe.lookahead--,qe.strstart++,Xe&&(W(qe,!1),0===qe.strm.avail_out))return Ve}return qe.insert=0,Ue===ye?(W(qe,!0),0===qe.strm.avail_out?Ne:Oe):qe.last_lit&&(W(qe,!1),0===qe.strm.avail_out)?Ve:Fe}function le(qe,Ue,Xe,Ge,He){this.good_length=qe,this.max_lazy=Ue,this.nice_length=Xe,this.max_chain=Ge,this.func=He}function se(qe){qe.window_size=2*qe.w_size,G(qe.head),qe.max_lazy_match=Ye[qe.level].max_lazy,qe.good_match=Ye[qe.level].good_length,qe.nice_match=Ye[qe.level].nice_length,qe.max_chain_length=Ye[qe.level].max_chain,qe.strstart=0,qe.block_start=0,qe.lookahead=0,qe.insert=0,qe.match_length=qe.prev_length=Ie-1,qe.match_available=0,qe.ins_h=0}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Pe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ce.Buf16(2*(2*De+1)),this.dyn_dtree=new ce.Buf16(122),this.bl_tree=new ce.Buf16(78),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ce.Buf16(16),this.heap=new ce.Buf16(2*De+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ce.Buf16(2*De+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ue(qe){var Ue;return qe&&qe.state?(qe.total_in=qe.total_out=0,qe.data_type=2,Ue=qe.state,Ue.pending=0,Ue.pending_out=0,0>Ue.wrap&&(Ue.wrap=-Ue.wrap),Ue.status=Ue.wrap?Ae:Le,qe.adler=2===Ue.wrap?0:1,Ue.last_flush=be,ge._tr_init(Ue),ke):L(qe,ve)}function he(qe){var Ue=ue(qe);return Ue===ke&&se(qe.state),Ue}function me(qe,Ue,Xe,Ge,He,Ze){if(!qe)return ve;var We=1;if(-1===Ue&&(Ue=6),0>Ge?(We=0,Ge=-Ge):15<Ge&&(We=2,Ge-=16),1>He||9<He||Xe!==Pe||8>Ge||15<Ge||0>Ue||9<Ue||0>Ze||4<Ze)return L(qe,ve);8===Ge&&(Ge=9);var Ke=new de;return qe.state=Ke,Ke.strm=qe,Ke.wrap=We,Ke.gzhead=null,Ke.w_bits=Ge,Ke.w_size=1<<Ke.w_bits,Ke.w_mask=Ke.w_size-1,Ke.hash_bits=He+7,Ke.hash_size=1<<Ke.hash_bits,Ke.hash_mask=Ke.hash_size-1,Ke.hash_shift=~~((Ke.hash_bits+Ie-1)/Ie),Ke.window=new ce.Buf8(2*Ke.w_size),Ke.head=new ce.Buf16(Ke.hash_size),Ke.prev=new ce.Buf16(Ke.w_size),Ke.lit_bufsize=1<<He+6,Ke.pending_buf_size=4*Ke.lit_bufsize,Ke.pending_buf=new ce.Buf8(Ke.pending_buf_size),Ke.d_buf=1*Ke.lit_bufsize,Ke.l_buf=3*Ke.lit_bufsize,Ke.level=Ue,Ke.strategy=Ze,Ke.method=Xe,he(qe)}var ce=I("../utils/common"),ge=I("./trees"),pe=I("./adler32"),fe=I("./crc32"),_e=I("./messages"),be=0,ye=4,xe=5,ke=0,we=1,ve=-2,Me=-5,je=2,Pe=8,De=286,Ie=3,Se=258,Ce=Se+Ie+1,Ae=42,Re=69,Be=73,ze=91,Te=103,Le=113,Ee=666,Ve=1,Fe=2,Ne=3,Oe=4,Ye=[new le(0,0,0,0,function(Ue,Xe){var Ge=65535;for(Ge>Ue.pending_buf_size-5&&(Ge=Ue.pending_buf_size-5);;){if(1>=Ue.lookahead){if(te(Ue),0===Ue.lookahead&&Xe===be)return Ve;if(0===Ue.lookahead)break}Ue.strstart+=Ue.lookahead,Ue.lookahead=0;var He=Ue.block_start+Ge;if((0===Ue.strstart||Ue.strstart>=He)&&(Ue.lookahead=Ue.strstart-He,Ue.strstart=He,W(Ue,!1),0===Ue.strm.avail_out))return Ve;if(Ue.strstart-Ue.block_start>=Ue.w_size-Ce&&(W(Ue,!1),0===Ue.strm.avail_out))return Ve}return Ue.insert=0,Xe===ye?(W(Ue,!0),0===Ue.strm.avail_out?Ne:Oe):Ue.strstart>Ue.block_start&&(W(Ue,!1),0===Ue.strm.avail_out)?Ve:Ve}),new le(4,4,8,4,ae),new le(4,5,16,8,ae),new le(4,6,32,32,ae),new le(4,4,16,16,ie),new le(8,16,32,32,ie),new le(8,16,128,128,ie),new le(8,32,128,256,ie),new le(32,128,258,1024,ie),new le(32,258,258,4096,ie)];T.deflateInit=function(Ue,Xe){return me(Ue,Xe,Pe,15,8,0)},T.deflateInit2=me,T.deflateReset=he,T.deflateResetKeep=ue,T.deflateSetHeader=function(Ue,Xe){return Ue&&Ue.state?2===Ue.state.wrap?(Ue.state.gzhead=Xe,ke):ve:ve},T.deflate=function(Ue,Xe){var Ge,He,Ze,We;if(!Ue||!Ue.state||Xe>xe||0>Xe)return Ue?L(Ue,ve):ve;if(He=Ue.state,!Ue.output||!Ue.input&&0!==Ue.avail_in||He.status===Ee&&Xe!==ye)return L(Ue,0===Ue.avail_out?Me:ve);if(He.strm=Ue,Ge=He.last_flush,He.last_flush=Xe,He.status===Ae)if(2===He.wrap)Ue.adler=0,Q(He,31),Q(He,139),Q(He,8),He.gzhead?(Q(He,(He.gzhead.text?1:0)+(He.gzhead.hcrc?2:0)+(He.gzhead.extra?4:0)+(He.gzhead.name?8:0)+(He.gzhead.comment?16:0)),Q(He,255&He.gzhead.time),Q(He,255&He.gzhead.time>>8),Q(He,255&He.gzhead.time>>16),Q(He,255&He.gzhead.time>>24),Q(He,9===He.level?2:He.strategy>=je||2>He.level?4:0),Q(He,255&He.gzhead.os),He.gzhead.extra&&He.gzhead.extra.length&&(Q(He,255&He.gzhead.extra.length),Q(He,255&He.gzhead.extra.length>>8)),He.gzhead.hcrc&&(Ue.adler=fe(Ue.adler,He.pending_buf,He.pending,0)),He.gzindex=0,He.status=Re):(Q(He,0),Q(He,0),Q(He,0),Q(He,0),Q(He,0),Q(He,9===He.level?2:He.strategy>=je||2>He.level?4:0),Q(He,3),He.status=Le);else{var Ke=Pe+(He.w_bits-8<<4)<<8,Qe=-1;Qe=He.strategy>=je||2>He.level?0:6>He.level?1:6===He.level?2:3,Ke|=Qe<<6,0!==He.strstart&&(Ke|=32),Ke+=31-Ke%31,He.status=Le,$(He,Ke),0!==He.strstart&&($(He,Ue.adler>>>16),$(He,65535&Ue.adler)),Ue.adler=1}if(He.status===Re)if(He.gzhead.extra){for(Ze=He.pending;He.gzindex<(65535&He.gzhead.extra.length)&&!(He.pending===He.pending_buf_size&&(He.gzhead.hcrc&&He.pending>Ze&&(Ue.adler=fe(Ue.adler,He.pending_buf,He.pending-Ze,Ze)),Z(Ue),Ze=He.pending,He.pending===He.pending_buf_size));)Q(He,255&He.gzhead.extra[He.gzindex]),He.gzindex++;He.gzhead.hcrc&&He.pending>Ze&&(Ue.adler=fe(Ue.adler,He.pending_buf,He.pending-Ze,Ze)),He.gzindex===He.gzhead.extra.length&&(He.gzindex=0,He.status=Be)}else He.status=Be;if(He.status===Be)if(He.gzhead.name){Ze=He.pending;do{if(He.pending===He.pending_buf_size&&(He.gzhead.hcrc&&He.pending>Ze&&(Ue.adler=fe(Ue.adler,He.pending_buf,He.pending-Ze,Ze)),Z(Ue),Ze=He.pending,He.pending===He.pending_buf_size)){We=1;break}We=He.gzindex<He.gzhead.name.length?255&He.gzhead.name.charCodeAt(He.gzindex++):0,Q(He,We)}while(0!==We);He.gzhead.hcrc&&He.pending>Ze&&(Ue.adler=fe(Ue.adler,He.pending_buf,He.pending-Ze,Ze)),0===We&&(He.gzindex=0,He.status=ze)}else He.status=ze;if(He.status===ze)if(He.gzhead.comment){Ze=He.pending;do{if(He.pending===He.pending_buf_size&&(He.gzhead.hcrc&&He.pending>Ze&&(Ue.adler=fe(Ue.adler,He.pending_buf,He.pending-Ze,Ze)),Z(Ue),Ze=He.pending,He.pending===He.pending_buf_size)){We=1;break}We=He.gzindex<He.gzhead.comment.length?255&He.gzhead.comment.charCodeAt(He.gzindex++):0,Q(He,We)}while(0!==We);He.gzhead.hcrc&&He.pending>Ze&&(Ue.adler=fe(Ue.adler,He.pending_buf,He.pending-Ze,Ze)),0===We&&(He.status=Te)}else He.status=Te;if(He.status===Te&&(He.gzhead.hcrc?(He.pending+2>He.pending_buf_size&&Z(Ue),He.pending+2<=He.pending_buf_size&&(Q(He,255&Ue.adler),Q(He,255&Ue.adler>>8),Ue.adler=0,He.status=Le)):He.status=Le),0!==He.pending){if(Z(Ue),0===Ue.avail_out)return He.last_flush=-1,ke;}else if(0===Ue.avail_in&&E(Xe)<=E(Ge)&&Xe!==ye)return L(Ue,Me);if(He.status===Ee&&0!==Ue.avail_in)return L(Ue,Me);if(0!==Ue.avail_in||0!==He.lookahead||Xe!==be&&He.status!==Ee){var $e=He.strategy===je?oe(He,Xe):3===He.strategy?ne(He,Xe):Ye[He.level].func(He,Xe);if(($e===Ne||$e===Oe)&&(He.status=Ee),$e===Ve||$e===Ne)return 0===Ue.avail_out&&(He.last_flush=-1),ke;if($e===Fe&&(1===Xe?ge._tr_align(He):Xe!=xe&&(ge._tr_stored_block(He,0,0,!1),3==Xe&&(G(He.head),0===He.lookahead&&(He.strstart=0,He.block_start=0,He.insert=0))),Z(Ue),0===Ue.avail_out))return He.last_flush=-1,ke}return Xe===ye?0>=He.wrap?we:(2===He.wrap?(Q(He,255&Ue.adler),Q(He,255&Ue.adler>>8),Q(He,255&Ue.adler>>16),Q(He,255&Ue.adler>>24),Q(He,255&Ue.total_in),Q(He,255&Ue.total_in>>8),Q(He,255&Ue.total_in>>16),Q(He,255&Ue.total_in>>24)):($(He,Ue.adler>>>16),$(He,65535&Ue.adler)),Z(Ue),0<He.wrap&&(He.wrap=-He.wrap),0===He.pending?we:ke):ke},T.deflateEnd=function(Ue){var Xe;return Ue&&Ue.state?(Xe=Ue.state.status,Xe!==Ae&&Xe!==Re&&Xe!==Be&&Xe!==ze&&Xe!==Te&&Xe!==Le&&Xe!==Ee)?L(Ue,ve):(Ue.state=null,Xe===Le?L(Ue,-3):ke):ve},T.deflateSetDictionary=function(Ue,Xe){var Ge=Xe.length,He,Ze,We,Ke,Qe,$e,Je,et;if(!Ue||!Ue.state)return ve;if(He=Ue.state,Ke=He.wrap,2===Ke||1===Ke&&He.status!==Ae||He.lookahead)return ve;for(1===Ke&&(Ue.adler=pe(Ue.adler,Xe,Ge,0)),He.wrap=0,Ge>=He.w_size&&(0===Ke&&(G(He.head),He.strstart=0,He.block_start=0,He.insert=0),et=new ce.Buf8(He.w_size),ce.arraySet(et,Xe,Ge-He.w_size,He.w_size,0),Xe=et,Ge=He.w_size),Qe=Ue.avail_in,$e=Ue.next_in,Je=Ue.input,Ue.avail_in=Ge,Ue.next_in=0,Ue.input=Xe,te(He);He.lookahead>=Ie;){Ze=He.strstart,We=He.lookahead-(Ie-1);do He.ins_h=(He.ins_h<<He.hash_shift^He.window[Ze+Ie-1])&He.hash_mask,He.prev[Ze&He.w_mask]=He.head[He.ins_h],He.head[He.ins_h]=Ze,Ze++;while(--We);He.strstart=Ze,He.lookahead=Ie-1,te(He)}return He.strstart+=He.lookahead,He.block_start=He.strstart,He.insert=He.lookahead,He.lookahead=0,He.match_length=He.prev_length=Ie-1,He.match_available=0,Ue.next_in=$e,Ue.input=Je,Ue.avail_in=Qe,He.wrap=Ke,ke},T.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":122,"./adler32":124,"./crc32":126,"./messages":132,"./trees":133}],128:[function(I,R){"use strict";R.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],129:[function(I,R){"use strict";var T=30;R.exports=function(E,G){var Z,W,Q,$,J,ee,te,ae,ie,ne,oe,le,se,de,ue,he,me,ce,ge,pe,fe,_e,be,ye,xe;Z=E.state,W=E.next_in,ye=E.input,Q=W+(E.avail_in-5),$=E.next_out,xe=E.output,J=$-(G-E.avail_out),ee=$+(E.avail_out-257),te=Z.dmax,ae=Z.wsize,ie=Z.whave,ne=Z.wnext,oe=Z.window,le=Z.hold,se=Z.bits,de=Z.lencode,ue=Z.distcode,he=(1<<Z.lenbits)-1,me=(1<<Z.distbits)-1;top:do{15>se&&(le+=ye[W++]<<se,se+=8,le+=ye[W++]<<se,se+=8),ce=de[le&he];dolen:for(;;){if(ge=ce>>>24,le>>>=ge,se-=ge,ge=255&ce>>>16,0===ge)xe[$++]=65535&ce;else if(16&ge){pe=65535&ce,ge&=15,ge&&(se<ge&&(le+=ye[W++]<<se,se+=8),pe+=le&(1<<ge)-1,le>>>=ge,se-=ge),15>se&&(le+=ye[W++]<<se,se+=8,le+=ye[W++]<<se,se+=8),ce=ue[le&me];dodist:for(;;){if(ge=ce>>>24,le>>>=ge,se-=ge,ge=255&ce>>>16,16&ge){if(fe=65535&ce,ge&=15,se<ge&&(le+=ye[W++]<<se,se+=8,se<ge&&(le+=ye[W++]<<se,se+=8)),fe+=le&(1<<ge)-1,fe>te){E.msg="invalid distance too far back",Z.mode=T;break top}if(le>>>=ge,se-=ge,ge=$-J,fe>ge){if(ge=fe-ge,ge>ie&&Z.sane){E.msg="invalid distance too far back",Z.mode=T;break top}if(_e=0,be=oe,0===ne){if(_e+=ae-ge,ge<pe){pe-=ge;do xe[$++]=oe[_e++];while(--ge);_e=$-fe,be=xe}}else if(ne<ge){if(_e+=ae+ne-ge,ge-=ne,ge<pe){pe-=ge;do xe[$++]=oe[_e++];while(--ge);if(_e=0,ne<pe){ge=ne,pe-=ge;do xe[$++]=oe[_e++];while(--ge);_e=$-fe,be=xe}}}else if(_e+=ne-ge,ge<pe){pe-=ge;do xe[$++]=oe[_e++];while(--ge);_e=$-fe,be=xe}for(;2<pe;)xe[$++]=be[_e++],xe[$++]=be[_e++],xe[$++]=be[_e++],pe-=3;pe&&(xe[$++]=be[_e++],1<pe&&(xe[$++]=be[_e++]))}else{_e=$-fe;do xe[$++]=xe[_e++],xe[$++]=xe[_e++],xe[$++]=xe[_e++],pe-=3;while(2<pe);pe&&(xe[$++]=xe[_e++],1<pe&&(xe[$++]=xe[_e++]))}}else if(0==(64&ge)){ce=ue[(65535&ce)+(le&(1<<ge)-1)];continue dodist}else{E.msg="invalid distance code",Z.mode=T;break top}break}}else if(0==(64&ge)){ce=de[(65535&ce)+(le&(1<<ge)-1)];continue dolen}else if(32&ge){Z.mode=12;break top}else{E.msg="invalid literal/length code",Z.mode=T;break top}break}}while(W<Q&&$<ee);pe=se>>3,W-=pe,se-=pe<<3,le&=(1<<se)-1,E.next_in=W,E.next_out=$,E.avail_in=W<Q?5+(Q-W):5-(W-Q),E.avail_out=$<ee?257+(ee-$):257-($-ee),Z.hold=le,Z.bits=se}},{}],130:[function(I,R,T){"use strict";function L(We){return(255&We>>>24)+(65280&We>>>8)+((65280&We)<<8)+((255&We)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ee.Buf16(320),this.work=new ee.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function G(We){var Ke;return We&&We.state?(Ke=We.state,We.total_in=We.total_out=Ke.total=0,We.msg="",Ke.wrap&&(We.adler=1&Ke.wrap),Ke.mode=pe,Ke.last=0,Ke.havedict=0,Ke.dmax=32768,Ke.head=null,Ke.hold=0,Ke.bits=0,Ke.lencode=Ke.lendyn=new ee.Buf32(852),Ke.distcode=Ke.distdyn=new ee.Buf32(592),Ke.sane=1,Ke.back=-1,ue):he}function Z(We){var Ke;return We&&We.state?(Ke=We.state,Ke.wsize=0,Ke.whave=0,Ke.wnext=0,G(We)):he}function W(We,Ke){var Qe,$e;return We&&We.state?($e=We.state,0>Ke?(Qe=0,Ke=-Ke):(Qe=(Ke>>4)+1,48>Ke&&(Ke&=15)),Ke&&(8>Ke||15<Ke))?he:(null!==$e.window&&$e.wbits!==Ke&&($e.window=null),$e.wrap=Qe,$e.wbits=Ke,Z(We)):he}function Q(We,Ke){var Qe,$e;return We?($e=new E,We.state=$e,$e.window=null,Qe=W(We,Ke),Qe!==ue&&(We.state=null),Qe):he}function $(We){if(Ge){var Ke;for(He=new ee.Buf32(512),Ze=new ee.Buf32(32),Ke=0;144>Ke;)We.lens[Ke++]=8;for(;256>Ke;)We.lens[Ke++]=9;for(;280>Ke;)We.lens[Ke++]=7;for(;288>Ke;)We.lens[Ke++]=8;for(ne(oe,We.lens,0,288,He,0,We.work,{bits:9}),Ke=0;32>Ke;)We.lens[Ke++]=5;ne(le,We.lens,0,32,Ze,0,We.work,{bits:5}),Ge=!1}We.lencode=He,We.lenbits=9,We.distcode=Ze,We.distbits=5}function J(We,Ke,Qe,$e){var et=We.state,Je;return null===et.window&&(et.wsize=1<<et.wbits,et.wnext=0,et.whave=0,et.window=new ee.Buf8(et.wsize)),$e>=et.wsize?(ee.arraySet(et.window,Ke,Qe-et.wsize,et.wsize,0),et.wnext=0,et.whave=et.wsize):(Je=et.wsize-et.wnext,Je>$e&&(Je=$e),ee.arraySet(et.window,Ke,Qe-$e,Je,et.wnext),$e-=Je,$e?(ee.arraySet(et.window,Ke,Qe-$e,$e,0),et.wnext=$e,et.whave=et.wsize):(et.wnext+=Je,et.wnext===et.wsize&&(et.wnext=0),et.whave<et.wsize&&(et.whave+=Je))),0}var ee=I("../utils/common"),te=I("./adler32"),ae=I("./crc32"),ie=I("./inffast"),ne=I("./inftrees"),oe=1,le=2,se=4,de=6,ue=0,he=-2,me=-3,ce=-4,ge=8,pe=1,fe=2,_e=3,be=4,ye=5,xe=6,ke=7,we=8,ve=9,Me=10,je=11,Pe=12,De=13,Ie=14,Se=15,Ce=16,Ae=17,Re=18,Be=19,ze=20,Te=21,Le=22,Ee=23,Ve=24,Fe=25,Ne=26,Oe=27,Ye=28,qe=29,Ue=30,Xe=31,Ge=!0,He,Ze;T.inflateReset=Z,T.inflateReset2=W,T.inflateResetKeep=G,T.inflateInit=function(Ke){return Q(Ke,15)},T.inflateInit2=Q,T.inflate=function(Ke,Qe){var gt=0,Mt=new ee.Buf8(4),Dt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$e,Je,et,at,nt,ot,lt,rt,st,dt,ut,ht,mt,ct,pt,_t,bt,yt,xt,kt,wt,vt,jt,Pt;if(!Ke||!Ke.state||!Ke.output||!Ke.input&&0!==Ke.avail_in)return he;$e=Ke.state,$e.mode===Pe&&($e.mode=De),nt=Ke.next_out,et=Ke.output,lt=Ke.avail_out,at=Ke.next_in,Je=Ke.input,ot=Ke.avail_in,rt=$e.hold,st=$e.bits,dt=ot,ut=lt,vt=ue;inf_leave:for(;;)switch($e.mode){case pe:if(0===$e.wrap){$e.mode=De;break}for(;16>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}if(2&$e.wrap&&35615===rt){$e.check=0,Mt[0]=255&rt,Mt[1]=255&rt>>>8,$e.check=ae($e.check,Mt,2,0),rt=0,st=0,$e.mode=fe;break}if($e.flags=0,$e.head&&($e.head.done=!1),!(1&$e.wrap)||(((255&rt)<<8)+(rt>>8))%31){Ke.msg="incorrect header check",$e.mode=Ue;break}if((15&rt)!=ge){Ke.msg="unknown compression method",$e.mode=Ue;break}if(rt>>>=4,st-=4,wt=(15&rt)+8,0===$e.wbits)$e.wbits=wt;else if(wt>$e.wbits){Ke.msg="invalid window size",$e.mode=Ue;break}$e.dmax=1<<wt,Ke.adler=$e.check=1,$e.mode=512&rt?Me:Pe,rt=0,st=0;break;case fe:for(;16>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}if($e.flags=rt,(255&$e.flags)!=ge){Ke.msg="unknown compression method",$e.mode=Ue;break}if(57344&$e.flags){Ke.msg="unknown header flags set",$e.mode=Ue;break}$e.head&&($e.head.text=1&rt>>8),512&$e.flags&&(Mt[0]=255&rt,Mt[1]=255&rt>>>8,$e.check=ae($e.check,Mt,2,0)),rt=0,st=0,$e.mode=_e;case _e:for(;32>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}$e.head&&($e.head.time=rt),512&$e.flags&&(Mt[0]=255&rt,Mt[1]=255&rt>>>8,Mt[2]=255&rt>>>16,Mt[3]=255&rt>>>24,$e.check=ae($e.check,Mt,4,0)),rt=0,st=0,$e.mode=be;case be:for(;16>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}$e.head&&($e.head.xflags=255&rt,$e.head.os=rt>>8),512&$e.flags&&(Mt[0]=255&rt,Mt[1]=255&rt>>>8,$e.check=ae($e.check,Mt,2,0)),rt=0,st=0,$e.mode=ye;case ye:if(1024&$e.flags){for(;16>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}$e.length=rt,$e.head&&($e.head.extra_len=rt),512&$e.flags&&(Mt[0]=255&rt,Mt[1]=255&rt>>>8,$e.check=ae($e.check,Mt,2,0)),rt=0,st=0}else $e.head&&($e.head.extra=null);$e.mode=xe;case xe:if(1024&$e.flags&&(ht=$e.length,ht>ot&&(ht=ot),ht&&($e.head&&(wt=$e.head.extra_len-$e.length,!$e.head.extra&&($e.head.extra=Array($e.head.extra_len)),ee.arraySet($e.head.extra,Je,at,ht,wt)),512&$e.flags&&($e.check=ae($e.check,Je,ht,at)),ot-=ht,at+=ht,$e.length-=ht),$e.length))break inf_leave;$e.length=0,$e.mode=ke;case ke:if(2048&$e.flags){if(0===ot)break inf_leave;ht=0;do wt=Je[at+ht++],$e.head&&wt&&65536>$e.length&&($e.head.name+=String.fromCharCode(wt));while(wt&&ht<ot);if(512&$e.flags&&($e.check=ae($e.check,Je,ht,at)),ot-=ht,at+=ht,wt)break inf_leave}else $e.head&&($e.head.name=null);$e.length=0,$e.mode=we;case we:if(4096&$e.flags){if(0===ot)break inf_leave;ht=0;do wt=Je[at+ht++],$e.head&&wt&&65536>$e.length&&($e.head.comment+=String.fromCharCode(wt));while(wt&&ht<ot);if(512&$e.flags&&($e.check=ae($e.check,Je,ht,at)),ot-=ht,at+=ht,wt)break inf_leave}else $e.head&&($e.head.comment=null);$e.mode=ve;case ve:if(512&$e.flags){for(;16>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}if(rt!==(65535&$e.check)){Ke.msg="header crc mismatch",$e.mode=Ue;break}rt=0,st=0}$e.head&&($e.head.hcrc=1&$e.flags>>9,$e.head.done=!0),Ke.adler=$e.check=0,$e.mode=Pe;break;case Me:for(;32>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}Ke.adler=$e.check=L(rt),rt=0,st=0,$e.mode=je;case je:if(0===$e.havedict)return Ke.next_out=nt,Ke.avail_out=lt,Ke.next_in=at,Ke.avail_in=ot,$e.hold=rt,$e.bits=st,2;Ke.adler=$e.check=1,$e.mode=Pe;case Pe:if(5===Qe||Qe===de)break inf_leave;case De:if($e.last){rt>>>=7&st,st-=7&st,$e.mode=Oe;break}for(;3>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}switch($e.last=1&rt,rt>>>=1,st-=1,3&rt){case 0:$e.mode=Ie;break;case 1:if($($e),$e.mode=ze,Qe===de){rt>>>=2,st-=2;break inf_leave}break;case 2:$e.mode=Ae;break;case 3:Ke.msg="invalid block type",$e.mode=Ue;}rt>>>=2,st-=2;break;case Ie:for(rt>>>=7&st,st-=7&st;32>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}if((65535&rt)!=(65535^rt>>>16)){Ke.msg="invalid stored block lengths",$e.mode=Ue;break}if($e.length=65535&rt,rt=0,st=0,$e.mode=Se,Qe===de)break inf_leave;case Se:$e.mode=Ce;case Ce:if(ht=$e.length,ht){if(ht>ot&&(ht=ot),ht>lt&&(ht=lt),0===ht)break inf_leave;ee.arraySet(et,Je,at,ht,nt),ot-=ht,at+=ht,lt-=ht,nt+=ht,$e.length-=ht;break}$e.mode=Pe;break;case Ae:for(;14>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}if($e.nlen=(31&rt)+257,rt>>>=5,st-=5,$e.ndist=(31&rt)+1,rt>>>=5,st-=5,$e.ncode=(15&rt)+4,rt>>>=4,st-=4,286<$e.nlen||30<$e.ndist){Ke.msg="too many length or distance symbols",$e.mode=Ue;break}$e.have=0,$e.mode=Re;case Re:for(;$e.have<$e.ncode;){for(;3>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}$e.lens[Dt[$e.have++]]=7&rt,rt>>>=3,st-=3}for(;19>$e.have;)$e.lens[Dt[$e.have++]]=0;if($e.lencode=$e.lendyn,$e.lenbits=7,jt={bits:$e.lenbits},vt=ne(0,$e.lens,0,19,$e.lencode,0,$e.work,jt),$e.lenbits=jt.bits,vt){Ke.msg="invalid code lengths set",$e.mode=Ue;break}$e.have=0,$e.mode=Be;case Be:for(;$e.have<$e.nlen+$e.ndist;){for(;;){if(gt=$e.lencode[rt&(1<<$e.lenbits)-1],pt=gt>>>24,_t=255&gt>>>16,bt=65535&gt,pt<=st)break;if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}if(16>bt)rt>>>=pt,st-=pt,$e.lens[$e.have++]=bt;else{if(16===bt){for(Pt=pt+2;st<Pt;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}if(rt>>>=pt,st-=pt,0===$e.have){Ke.msg="invalid bit length repeat",$e.mode=Ue;break}wt=$e.lens[$e.have-1],ht=3+(3&rt),rt>>>=2,st-=2}else if(17===bt){for(Pt=pt+3;st<Pt;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}rt>>>=pt,st-=pt,wt=0,ht=3+(7&rt),rt>>>=3,st-=3}else{for(Pt=pt+7;st<Pt;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}rt>>>=pt,st-=pt,wt=0,ht=11+(127&rt),rt>>>=7,st-=7}if($e.have+ht>$e.nlen+$e.ndist){Ke.msg="invalid bit length repeat",$e.mode=Ue;break}for(;ht--;)$e.lens[$e.have++]=wt}}if($e.mode===Ue)break;if(0===$e.lens[256]){Ke.msg="invalid code -- missing end-of-block",$e.mode=Ue;break}if($e.lenbits=9,jt={bits:$e.lenbits},vt=ne(oe,$e.lens,0,$e.nlen,$e.lencode,0,$e.work,jt),$e.lenbits=jt.bits,vt){Ke.msg="invalid literal/lengths set",$e.mode=Ue;break}if($e.distbits=6,$e.distcode=$e.distdyn,jt={bits:$e.distbits},vt=ne(le,$e.lens,$e.nlen,$e.ndist,$e.distcode,0,$e.work,jt),$e.distbits=jt.bits,vt){Ke.msg="invalid distances set",$e.mode=Ue;break}if($e.mode=ze,Qe===de)break inf_leave;case ze:$e.mode=Te;case Te:if(6<=ot&&258<=lt){Ke.next_out=nt,Ke.avail_out=lt,Ke.next_in=at,Ke.avail_in=ot,$e.hold=rt,$e.bits=st,ie(Ke,ut),nt=Ke.next_out,et=Ke.output,lt=Ke.avail_out,at=Ke.next_in,Je=Ke.input,ot=Ke.avail_in,rt=$e.hold,st=$e.bits,$e.mode===Pe&&($e.back=-1);break}for($e.back=0;;){if(gt=$e.lencode[rt&(1<<$e.lenbits)-1],pt=gt>>>24,_t=255&gt>>>16,bt=65535&gt,pt<=st)break;if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}if(_t&&0==(240&_t)){for(yt=pt,xt=_t,kt=bt;;){if(gt=$e.lencode[kt+((rt&(1<<yt+xt)-1)>>yt)],pt=gt>>>24,_t=255&gt>>>16,bt=65535&gt,yt+pt<=st)break;if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}rt>>>=yt,st-=yt,$e.back+=yt}if(rt>>>=pt,st-=pt,$e.back+=pt,$e.length=bt,0===_t){$e.mode=Ne;break}if(32&_t){$e.back=-1,$e.mode=Pe;break}if(64&_t){Ke.msg="invalid literal/length code",$e.mode=Ue;break}$e.extra=15&_t,$e.mode=Le;case Le:if($e.extra){for(Pt=$e.extra;st<Pt;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}$e.length+=rt&(1<<$e.extra)-1,rt>>>=$e.extra,st-=$e.extra,$e.back+=$e.extra}$e.was=$e.length,$e.mode=Ee;case Ee:for(;;){if(gt=$e.distcode[rt&(1<<$e.distbits)-1],pt=gt>>>24,_t=255&gt>>>16,bt=65535&gt,pt<=st)break;if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}if(0==(240&_t)){for(yt=pt,xt=_t,kt=bt;;){if(gt=$e.distcode[kt+((rt&(1<<yt+xt)-1)>>yt)],pt=gt>>>24,_t=255&gt>>>16,bt=65535&gt,yt+pt<=st)break;if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}rt>>>=yt,st-=yt,$e.back+=yt}if(rt>>>=pt,st-=pt,$e.back+=pt,64&_t){Ke.msg="invalid distance code",$e.mode=Ue;break}$e.offset=bt,$e.extra=15&_t,$e.mode=Ve;case Ve:if($e.extra){for(Pt=$e.extra;st<Pt;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}$e.offset+=rt&(1<<$e.extra)-1,rt>>>=$e.extra,st-=$e.extra,$e.back+=$e.extra}if($e.offset>$e.dmax){Ke.msg="invalid distance too far back",$e.mode=Ue;break}$e.mode=Fe;case Fe:if(0===lt)break inf_leave;if(ht=ut-lt,$e.offset>ht){if(ht=$e.offset-ht,ht>$e.whave&&$e.sane){Ke.msg="invalid distance too far back",$e.mode=Ue;break}ht>$e.wnext?(ht-=$e.wnext,mt=$e.wsize-ht):mt=$e.wnext-ht,ht>$e.length&&(ht=$e.length),ct=$e.window}else ct=et,mt=nt-$e.offset,ht=$e.length;ht>lt&&(ht=lt),lt-=ht,$e.length-=ht;do et[nt++]=ct[mt++];while(--ht);0===$e.length&&($e.mode=Te);break;case Ne:if(0===lt)break inf_leave;et[nt++]=$e.length,lt--,$e.mode=Te;break;case Oe:if($e.wrap){for(;32>st;){if(0===ot)break inf_leave;ot--,rt|=Je[at++]<<st,st+=8}if(ut-=lt,Ke.total_out+=ut,$e.total+=ut,ut&&(Ke.adler=$e.check=$e.flags?ae($e.check,et,ut,nt-ut):te($e.check,et,ut,nt-ut)),ut=lt,($e.flags?rt:L(rt))!==$e.check){Ke.msg="incorrect data check",$e.mode=Ue;break}rt=0,st=0}$e.mode=Ye;case Ye:if($e.wrap&&$e.flags){for(;32>st;){if(0===ot)break inf_leave;ot--,rt+=Je[at++]<<st,st+=8}if(rt!==(4294967295&$e.total)){Ke.msg="incorrect length check",$e.mode=Ue;break}rt=0,st=0}$e.mode=qe;case qe:vt=1;break inf_leave;case Ue:vt=me;break inf_leave;case Xe:return ce;case 32:default:return he;}return(Ke.next_out=nt,Ke.avail_out=lt,Ke.next_in=at,Ke.avail_in=ot,$e.hold=rt,$e.bits=st,($e.wsize||ut!==Ke.avail_out&&$e.mode<Ue&&($e.mode<Oe||Qe!==se))&&J(Ke,Ke.output,Ke.next_out,ut-Ke.avail_out))?($e.mode=Xe,ce):(dt-=Ke.avail_in,ut-=Ke.avail_out,Ke.total_in+=dt,Ke.total_out+=ut,$e.total+=ut,$e.wrap&&ut&&(Ke.adler=$e.check=$e.flags?ae($e.check,et,ut,Ke.next_out-ut):te($e.check,et,ut,Ke.next_out-ut)),Ke.data_type=$e.bits+($e.last?64:0)+($e.mode===Pe?128:0)+($e.mode===ze||$e.mode===Se?256:0),(0===dt&&0===ut||Qe===se)&&vt===ue&&(vt=-5),vt)},T.inflateEnd=function(Ke){if(!Ke||!Ke.state)return he;var Qe=Ke.state;return Qe.window&&(Qe.window=null),Ke.state=null,ue},T.inflateGetHeader=function(Ke,Qe){var $e;return Ke&&Ke.state?($e=Ke.state,0==(2&$e.wrap))?he:($e.head=Qe,Qe.done=!1,ue):he},T.inflateSetDictionary=function(Ke,Qe){var $e=Qe.length,Je,et,at;return Ke&&Ke.state?(Je=Ke.state,0!==Je.wrap&&Je.mode!==je)?he:Je.mode===je&&(et=1,et=te(et,Qe,$e,0),et!==Je.check)?me:(at=J(Ke,Qe,$e,$e),at)?(Je.mode=Xe,ce):(Je.havedict=1,ue):he},T.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":122,"./adler32":124,"./crc32":126,"./inffast":129,"./inftrees":131}],131:[function(I,R){"use strict";var T=I("../utils/common"),L=15,E=852,G=592,Z=0,W=1,Q=2,$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],J=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],te=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];R.exports=function(ie,ne,oe,le,se,de,ue,he){var me=he.bits,ce=0,ge=0,pe=0,fe=0,_e=0,be=0,ye=0,xe=0,ke=0,we=0,Ie=null,Se=0,Ae=new T.Buf16(L+1),Re=new T.Buf16(L+1),Be=null,ze=0,ve,Me,je,Pe,De,Ce,Te,Le,Ee;for(ce=0;ce<=L;ce++)Ae[ce]=0;for(ge=0;ge<le;ge++)Ae[ne[oe+ge]]++;for(_e=me,fe=L;1<=fe&&0===Ae[fe];fe--);if(_e>fe&&(_e=fe),0==fe)return se[de++]=20971520,se[de++]=20971520,he.bits=1,0;for(pe=1;pe<fe&&0===Ae[pe];pe++);for(_e<pe&&(_e=pe),xe=1,ce=1;ce<=L;ce++)if(xe<<=1,xe-=Ae[ce],0>xe)return-1;if(0<xe&&(ie===Z||1!=fe))return-1;for(Re[1]=0,ce=1;ce<L;ce++)Re[ce+1]=Re[ce]+Ae[ce];for(ge=0;ge<le;ge++)0!==ne[oe+ge]&&(ue[Re[ne[oe+ge]]++]=ge);if(ie===Z?(Ie=Be=ue,Ce=19):ie===W?(Ie=$,Se-=257,Be=J,ze-=257,Ce=256):(Ie=ee,Be=te,Ce=-1),we=0,ge=0,ce=pe,De=de,be=_e,ye=0,je=-1,ke=1<<_e,Pe=ke-1,ie===W&&ke>E||ie===Q&&ke>G)return 1;for(var Ve=0;;){Ve++,Te=ce-ye,ue[ge]<Ce?(Le=0,Ee=ue[ge]):ue[ge]>Ce?(Le=Be[ze+ue[ge]],Ee=Ie[Se+ue[ge]]):(Le=96,Ee=0),ve=1<<ce-ye,Me=1<<be,pe=Me;do Me-=ve,se[De+(we>>ye)+Me]=0|(Te<<24|Le<<16|Ee);while(0!==Me);for(ve=1<<ce-1;we&ve;)ve>>=1;if(0===ve?we=0:(we&=ve-1,we+=ve),ge++,0==--Ae[ce]){if(ce==fe)break;ce=ne[oe+ue[ge]]}if(ce>_e&&(we&Pe)!==je){for(0==ye&&(ye=_e),De+=pe,be=ce-ye,xe=1<<be;be+ye<fe&&(xe-=Ae[be+ye],!(0>=xe));)be++,xe<<=1;if(ke+=1<<be,ie===W&&ke>E||ie===Q&&ke>G)return 1;je=we&Pe,se[je]=0|(_e<<24|be<<16|De-de)}}return 0!=we&&(se[De+we]=0|(4194304|ce-ye<<24)),he.bits=_e,0}},{"../utils/common":122}],132:[function(I,R){"use strict";R.exports={"0":"","1":"stream end","2":"need dictionary","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],133:[function(I,R,T){"use strict";function L(Ze){for(var We=Ze.length;0<=--We;)Ze[We]=0}function E(Ze,We,Ke,Qe,$e){this.static_tree=Ze,this.extra_bits=We,this.extra_base=Ke,this.elems=Qe,this.max_length=$e,this.has_stree=Ze&&Ze.length}function G(Ze,We){this.dyn_tree=Ze,this.max_code=0,this.stat_desc=We}function Z(Ze){return 256>Ze?Ne[Ze]:Ne[256+(Ze>>>7)]}function W(Ze,We){Ze.pending_buf[Ze.pending++]=255&We,Ze.pending_buf[Ze.pending++]=255&We>>>8}function Q(Ze,We,Ke){Ze.bi_valid>Se-Ke?(Ze.bi_buf|=65535&We<<Ze.bi_valid,W(Ze,Ze.bi_buf),Ze.bi_buf=We>>Se-Ze.bi_valid,Ze.bi_valid+=Ke-Se):(Ze.bi_buf|=65535&We<<Ze.bi_valid,Ze.bi_valid+=Ke)}function $(Ze,We,Ke){Q(Ze,Ke[2*We],Ke[2*We+1])}function J(Ze,We){var Ke=0;do Ke|=1&Ze,Ze>>>=1,Ke<<=1;while(0<--We);return Ke>>>1}function ee(Ze){16===Ze.bi_valid?(W(Ze,Ze.bi_buf),Ze.bi_buf=0,Ze.bi_valid=0):8<=Ze.bi_valid&&(Ze.pending_buf[Ze.pending++]=255&Ze.bi_buf,Ze.bi_buf>>=8,Ze.bi_valid-=8)}function te(Ze,We){var Ke=We.dyn_tree,Qe=We.max_code,$e=We.stat_desc.static_tree,Je=We.stat_desc.has_stree,et=We.stat_desc.extra_bits,at=We.stat_desc.extra_base,nt=We.stat_desc.max_length,ot,lt,rt,st,dt,ut,ht=0;for(st=0;st<=Ie;st++)Ze.bl_count[st]=0;for(Ke[2*Ze.heap[Ze.heap_max]+1]=0,ot=Ze.heap_max+1;ot<De;ot++)(lt=Ze.heap[ot],st=Ke[2*Ke[2*lt+1]+1]+1,st>nt&&(st=nt,ht++),Ke[2*lt+1]=st,!(lt>Qe))&&(Ze.bl_count[st]++,dt=0,lt>=at&&(dt=et[lt-at]),ut=Ke[2*lt],Ze.opt_len+=ut*(st+dt),Je&&(Ze.static_len+=ut*($e[2*lt+1]+dt)));if(0!=ht){do{for(st=nt-1;0===Ze.bl_count[st];)st--;Ze.bl_count[st]--,Ze.bl_count[st+1]+=2,Ze.bl_count[nt]--,ht-=2}while(0<ht);for(st=nt;0!==st;st--)for(lt=Ze.bl_count[st];0!==lt;)(rt=Ze.heap[--ot],!(rt>Qe))&&(Ke[2*rt+1]!==st&&(Ze.opt_len+=(st-Ke[2*rt+1])*Ke[2*rt],Ke[2*rt+1]=st),lt--)}}function ae(Ze,We,Ke){var Qe=Array(Ie+1),$e=0,Je,et;for(Je=1;Je<=Ie;Je++)Qe[Je]=$e=$e+Ke[Je-1]<<1;for(et=0;et<=We;et++){var at=Ze[2*et+1];0!==at&&(Ze[2*et]=J(Qe[at]++,at))}}function ie(){var Ze,We,Ke,Qe,$e,Je=Array(Ie+1);for(Ke=0,Qe=0;Qe<we-1;Qe++)for(Ye[Qe]=Ke,Ze=0;Ze<1<<ze[Qe];Ze++)Oe[Ke++]=Qe;for(Oe[Ke-1]=Qe,$e=0,Qe=0;16>Qe;Qe++)for(qe[Qe]=$e,Ze=0;Ze<1<<Te[Qe];Ze++)Ne[$e++]=Qe;for($e>>=7;Qe<je;Qe++)for(qe[Qe]=$e<<7,Ze=0;Ze<1<<Te[Qe]-7;Ze++)Ne[256+$e++]=Qe;for(We=0;We<=Ie;We++)Je[We]=0;for(Ze=0;143>=Ze;)Ve[2*Ze+1]=8,Ze++,Je[8]++;for(;255>=Ze;)Ve[2*Ze+1]=9,Ze++,Je[9]++;for(;279>=Ze;)Ve[2*Ze+1]=7,Ze++,Je[7]++;for(;287>=Ze;)Ve[2*Ze+1]=8,Ze++,Je[8]++;for(ae(Ve,Me+1,Je),Ze=0;Ze<je;Ze++)Fe[2*Ze+1]=5,Fe[2*Ze]=J(Ze,5);Ue=new E(Ve,ze,ve+1,Me,Ie),Xe=new E(Fe,Te,0,je,Ie),Ge=new E([],Le,0,Pe,7)}function ne(Ze){var We;for(We=0;We<Me;We++)Ze.dyn_ltree[2*We]=0;for(We=0;We<je;We++)Ze.dyn_dtree[2*We]=0;for(We=0;We<Pe;We++)Ze.bl_tree[2*We]=0;Ze.dyn_ltree[2*Ce]=1,Ze.opt_len=Ze.static_len=0,Ze.last_lit=Ze.matches=0}function oe(Ze){8<Ze.bi_valid?W(Ze,Ze.bi_buf):0<Ze.bi_valid&&(Ze.pending_buf[Ze.pending++]=Ze.bi_buf),Ze.bi_buf=0,Ze.bi_valid=0}function le(Ze,We,Ke,Qe){oe(Ze),Qe&&(W(Ze,Ke),W(Ze,~Ke)),be.arraySet(Ze.pending_buf,Ze.window,We,Ke,Ze.pending),Ze.pending+=Ke}function se(Ze,We,Ke,Qe){var $e=2*We,Je=2*Ke;return Ze[$e]<Ze[Je]||Ze[$e]===Ze[Je]&&Qe[We]<=Qe[Ke]}function de(Ze,We,Ke){for(var Qe=Ze.heap[Ke],$e=Ke<<1;$e<=Ze.heap_len&&($e<Ze.heap_len&&se(We,Ze.heap[$e+1],Ze.heap[$e],Ze.depth)&&$e++,!se(We,Qe,Ze.heap[$e],Ze.depth));)Ze.heap[Ke]=Ze.heap[$e],Ke=$e,$e<<=1;Ze.heap[Ke]=Qe}function ue(Ze,We,Ke){var Qe,$e,Je=0,et,at;if(0!==Ze.last_lit)do Qe=Ze.pending_buf[Ze.d_buf+2*Je]<<8|Ze.pending_buf[Ze.d_buf+2*Je+1],$e=Ze.pending_buf[Ze.l_buf+Je],Je++,0===Qe?$(Ze,$e,We):(et=Oe[$e],$(Ze,et+ve+1,We),at=ze[et],0!==at&&($e-=Ye[et],Q(Ze,$e,at)),Qe--,et=Z(Qe),$(Ze,et,Ke),at=Te[et],0!==at&&(Qe-=qe[et],Q(Ze,Qe,at)));while(Je<Ze.last_lit);$(Ze,Ce,We)}function he(Ze,We){var Ke=We.dyn_tree,Qe=We.stat_desc.static_tree,$e=We.stat_desc.has_stree,Je=We.stat_desc.elems,et,at,nt=-1,ot;for(Ze.heap_len=0,Ze.heap_max=De,et=0;et<Je;et++)0===Ke[2*et]?Ke[2*et+1]=0:(Ze.heap[++Ze.heap_len]=nt=et,Ze.depth[et]=0);for(;2>Ze.heap_len;)ot=Ze.heap[++Ze.heap_len]=2>nt?++nt:0,Ke[2*ot]=1,Ze.depth[ot]=0,Ze.opt_len--,$e&&(Ze.static_len-=Qe[2*ot+1]);for(We.max_code=nt,et=Ze.heap_len>>1;1<=et;et--)de(Ze,Ke,et);ot=Je;do et=Ze.heap[1],Ze.heap[1]=Ze.heap[Ze.heap_len--],de(Ze,Ke,1),at=Ze.heap[1],Ze.heap[--Ze.heap_max]=et,Ze.heap[--Ze.heap_max]=at,Ke[2*ot]=Ke[2*et]+Ke[2*at],Ze.depth[ot]=(Ze.depth[et]>=Ze.depth[at]?Ze.depth[et]:Ze.depth[at])+1,Ke[2*et+1]=Ke[2*at+1]=ot,Ze.heap[1]=ot++,de(Ze,Ke,1);while(2<=Ze.heap_len);Ze.heap[--Ze.heap_max]=Ze.heap[1],te(Ze,We),ae(Ke,nt,Ze.bl_count)}function me(Ze,We,Ke){var Qe,$e=-1,Je,et=We[1],at=0,nt=7,ot=4;for(0===et&&(nt=138,ot=3),We[2*(Ke+1)+1]=65535,Qe=0;Qe<=Ke;Qe++){if(Je=et,et=We[2*(Qe+1)+1],++at<nt&&Je===et)continue;else at<ot?Ze.bl_tree[2*Je]+=at:0===Je?10>=at?Ze.bl_tree[2*Re]++:Ze.bl_tree[2*Be]++:(Je!==$e&&Ze.bl_tree[2*Je]++,Ze.bl_tree[2*Ae]++);at=0,$e=Je,0===et?(nt=138,ot=3):Je===et?(nt=6,ot=3):(nt=7,ot=4)}}function ce(Ze,We,Ke){var Qe,$e=-1,Je,et=We[1],at=0,nt=7,ot=4;for(0===et&&(nt=138,ot=3),Qe=0;Qe<=Ke;Qe++){if(Je=et,et=We[2*(Qe+1)+1],++at<nt&&Je===et)continue;else if(at<ot)do $(Ze,Je,Ze.bl_tree);while(0!=--at);else 0===Je?10>=at?($(Ze,Re,Ze.bl_tree),Q(Ze,at-3,3)):($(Ze,Be,Ze.bl_tree),Q(Ze,at-11,7)):(Je!==$e&&($(Ze,Je,Ze.bl_tree),at--),$(Ze,Ae,Ze.bl_tree),Q(Ze,at-3,2));at=0,$e=Je,0===et?(nt=138,ot=3):Je===et?(nt=6,ot=3):(nt=7,ot=4)}}function ge(Ze){var We;for(me(Ze,Ze.dyn_ltree,Ze.l_desc.max_code),me(Ze,Ze.dyn_dtree,Ze.d_desc.max_code),he(Ze,Ze.bl_desc),We=Pe-1;3<=We&&0===Ze.bl_tree[2*Ee[We]+1];We--);return Ze.opt_len+=3*(We+1)+5+5+4,We}function pe(Ze,We,Ke,Qe){var $e;for(Q(Ze,We-257,5),Q(Ze,Ke-1,5),Q(Ze,Qe-4,4),$e=0;$e<Qe;$e++)Q(Ze,Ze.bl_tree[2*Ee[$e]+1],3);ce(Ze,Ze.dyn_ltree,We-1),ce(Ze,Ze.dyn_dtree,Ke-1)}function fe(Ze){var We=4093624447,Ke;for(Ke=0;31>=Ke;Ke++,We>>>=1)if(1&We&&0!==Ze.dyn_ltree[2*Ke])return ye;if(0!==Ze.dyn_ltree[18]||0!==Ze.dyn_ltree[20]||0!==Ze.dyn_ltree[26])return xe;for(Ke=32;Ke<ve;Ke++)if(0!==Ze.dyn_ltree[2*Ke])return xe;return ye}function _e(Ze,We,Ke,Qe){Q(Ze,0+(Qe?1:0),3),le(Ze,We,Ke,!0)}var be=I("../utils/common"),ye=0,xe=1,ke=1,we=29,ve=256,Me=ve+1+we,je=30,Pe=19,De=2*Me+1,Ie=15,Se=16,Ce=256,Ae=16,Re=17,Be=18,ze=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Te=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ve=Array(2*(Me+2));L(Ve);var Fe=Array(2*je);L(Fe);var Ne=Array(512);L(Ne);var Oe=Array(256);L(Oe);var Ye=Array(we);L(Ye);var qe=Array(je);L(qe);var Ue,Xe,Ge,He=!1;T._tr_init=function(We){He||(ie(),He=!0),We.l_desc=new G(We.dyn_ltree,Ue),We.d_desc=new G(We.dyn_dtree,Xe),We.bl_desc=new G(We.bl_tree,Ge),We.bi_buf=0,We.bi_valid=0,ne(We)},T._tr_stored_block=_e,T._tr_flush_block=function(We,Ke,Qe,$e){var Je,et,at=0;0<We.level?(2===We.strm.data_type&&(We.strm.data_type=fe(We)),he(We,We.l_desc),he(We,We.d_desc),at=ge(We),Je=We.opt_len+3+7>>>3,et=We.static_len+3+7>>>3,et<=Je&&(Je=et)):Je=et=Qe+5,Qe+4<=Je&&-1!==Ke?_e(We,Ke,Qe,$e):4===We.strategy||et===Je?(Q(We,(ke<<1)+($e?1:0),3),ue(We,Ve,Fe)):(Q(We,4+($e?1:0),3),pe(We,We.l_desc.max_code+1,We.d_desc.max_code+1,at+1),ue(We,We.dyn_ltree,We.dyn_dtree)),ne(We),$e&&oe(We)},T._tr_tally=function(We,Ke,Qe){return We.pending_buf[We.d_buf+2*We.last_lit]=255&Ke>>>8,We.pending_buf[We.d_buf+2*We.last_lit+1]=255&Ke,We.pending_buf[We.l_buf+We.last_lit]=255&Qe,We.last_lit++,0===Ke?We.dyn_ltree[2*Qe]++:(We.matches++,Ke--,We.dyn_ltree[2*(Oe[Qe]+ve+1)]++,We.dyn_dtree[2*Z(Ke)]++),We.last_lit===We.lit_bufsize-1},T._tr_align=function(We){Q(We,ke<<1,3),$(We,Ce,Ve),ee(We)}},{"../utils/common":122}],134:[function(I,R){"use strict";R.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],135:[function(I,R){"use strict";var T=I("./tiffDecoder");R.exports=function(E,G){var Z=new T(E,G);return Z.decode(G)}},{"./tiffDecoder":142}],136:[function(I,R){"use strict";var T={standard:I("./tags/standard"),exif:I("./tags/exif"),gps:I("./tags/gps")};class L{constructor(E){if(!E)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=E,this._map=null}get(E){if("number"==typeof E)return this.fields.get(E);if("string"==typeof E)return this.fields.get(T[this.kind].tagsByName[E]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};var E=T[this.kind].tagsById;for(var G of this.fields.keys())E[G]&&(this._map[E[G]]=this.fields.get(G))}return this._map}}R.exports=L},{"./tags/exif":139,"./tags/gps":140,"./tags/standard":141}],137:[function(I,R,T){"use strict";function L(G,Z){if(1===Z)return G.readUint8();var W=new Uint8Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readUint8();return W}var E=new Map([[1,[1,L]],[2,[1,function(Z,W){var Q=[],$="";for(var J=0;J<W;J++){var ee=String.fromCharCode(Z.readUint8());"\0"===ee?(Q.push($),$=""):$+=ee}return 1===Q.length?Q[0]:Q}]],[3,[2,function(Z,W){if(1===W)return Z.readUint16();var Q=new Uint16Array(W);for(var $=0;$<W;$++)Q[$]=Z.readUint16();return Q}]],[4,[4,function(Z,W){if(1===W)return Z.readUint32();var Q=new Uint32Array(W);for(var $=0;$<W;$++)Q[$]=Z.readUint32();return Q}]],[5,[8,function(Z,W){if(1===W)return Z.readUint32()/Z.readUint32();var Q=Array(W);for(var $=0;$<W;$++)Q[$]=Z.readUint32()/Z.readUint32();return Q}]],[6,[1,function(Z,W){if(1===W)return Z.readInt8();var Q=new Int8Array(W);for(var $=0;$<W;$++)Q[$]=Z.readInt8();return Q}]],[7,[1,L]],[8,[2,function(Z,W){if(1===W)return Z.readInt16();var Q=new Int16Array(W);for(var $=0;$<W;$++)Q[$]=Z.readInt16();return Q}]],[9,[4,function(Z,W){if(1===W)return Z.readInt32();var Q=new Int32Array(W);for(var $=0;$<W;$++)Q[$]=Z.readInt32();return Q}]],[10,[8,function(Z,W){if(1===W)return Z.readInt32()/Z.readInt32();var Q=Array(W);for(var $=0;$<W;$++)Q[$]=Z.readInt32()/Z.readInt32();return Q}]],[11,[4,function(Z,W){if(1===W)return Z.readFloat32();var Q=new Float32Array(W);for(var $=0;$<W;$++)Q[$]=Z.readFloat32();return Q}]],[12,[8,function(Z,W){if(1===W)return Z.readFloat64();var Q=new Float64Array(W);for(var $=0;$<W;$++)Q[$]=Z.readFloat64();return Q}]]]);T.getByteLength=function(G,Z){return E.get(G)[0]*Z},T.readData=function(G,Z,W){return E.get(Z)[1](G,W)}},{}],138:[function(I,R,T){arguments[4][37][0].apply(T,arguments)},{"./decode":135,dup:37}],139:[function(I,R){"use strict";var T={"33434":"ExposureTime","33437":"FNumber","34850":"ExposureProgram","34852":"SpectralSensitivity","34855":"ISOSpeedRatings","34856":"OECF","34864":"SensitivityType","34865":"StandardOutputSensitivity","34866":"RecommendedExposureIndex","34867":"ISOSpeed","34868":"ISOSpeedLatitudeyyy","34869":"ISOSpeedLatitudezzz","36864":"ExifVersion","36867":"DateTimeOriginal","36868":"DateTimeDigitized","37121":"ComponentsConfiguration","37122":"CompressedBitsPerPixel","37377":"ShutterSpeedValue","37378":"ApertureValue","37379":"BrightnessValue","37380":"ExposureBiasValue","37381":"MaxApertureValue","37382":"SubjectDistance","37383":"MeteringMode","37384":"LightSource","37385":"Flash","37386":"FocalLength","37396":"SubjectArea","37500":"MakerNote","37510":"UserComment","37520":"SubsecTime","37521":"SubsecTimeOriginal","37522":"SubsecTimeDigitized","40960":"FlashpixVersion","40961":"ColorSpace","40962":"PixelXDimension","40963":"PixelYDimension","40964":"RelatedSoundFile","41483":"FlashEnergy","41484":"SpatialFrequencyResponse","41486":"FocalPlaneXResolution","41487":"FocalPlaneYResolution","41488":"FocalPlaneResolutionUnit","41492":"SubjectLocation","41493":"ExposureIndex","41495":"SensingMethod","41728":"FileSource","41729":"SceneType","41730":"CFAPattern","41985":"CustomRendered","41986":"ExposureMode","41987":"WhiteBalance","41988":"DigitalZoomRatio","41989":"FocalLengthIn35mmFilm","41990":"SceneCaptureType","41991":"GainControl","41992":"Contrast","41993":"Saturation","41994":"Sharpness","41995":"DeviceSettingDescription","41996":"SubjectDistanceRange","42016":"ImageUniqueID","42032":"CameraOwnerName","42033":"BodySerialNumber","42034":"LensSpecification","42035":"LensMake","42036":"LensModel","42037":"LensSerialNumber","42240":"Gamma"},L={};for(var E in T)L[T[E]]=E;R.exports={tagsById:T,tagsByName:L}},{}],140:[function(I,R){"use strict";var T={"0":"GPSVersionID","1":"GPSLatitudeRef","2":"GPSLatitude","3":"GPSLongitudeRef","4":"GPSLongitude","5":"GPSAltitudeRef","6":"GPSAltitude","7":"GPSTimeStamp","8":"GPSSatellites","9":"GPSStatus","10":"GPSMeasureMode","11":"GPSDOP","12":"GPSSpeedRef","13":"GPSSpeed","14":"GPSTrackRef","15":"GPSTrack","16":"GPSImgDirectionRef","17":"GPSImgDirection","18":"GPSMapDatum","19":"GPSDestLatitudeRef","20":"GPSDestLatitude","21":"GPSDestLongitudeRef","22":"GPSDestLongitude","23":"GPSDestBearingRef","24":"GPSDestBearing","25":"GPSDestDistanceRef","26":"GPSDestDistance","27":"GPSProcessingMethod","28":"GPSAreaInformation","29":"GPSDateStamp","30":"GPSDifferential","31":"GPSHPositioningError"},L={};for(var E in T)L[T[E]]=E;R.exports={tagsById:T,tagsByName:L}},{}],141:[function(I,R){"use strict";var T={"254":"NewSubfileType","255":"SubfileType","256":"ImageWidth","257":"ImageLength","258":"BitsPerSample","259":"Compression","262":"PhotometricInterpretation","263":"Threshholding","264":"CellWidth","265":"CellLength","266":"FillOrder","269":"DocumentName","270":"ImageDescription","271":"Make","272":"Model","273":"StripOffsets","274":"Orientation","277":"SamplesPerPixel","278":"RowsPerStrip","279":"StripByteCounts","280":"MinSampleValue","281":"MaxSampleValue","282":"XResolution","283":"YResolution","284":"PlanarConfiguration","285":"PageName","286":"XPosition","287":"YPosition","288":"FreeOffsets","289":"FreeByteCounts","290":"GrayResponseUnit","291":"GrayResponseCurve","292":"T4Options","293":"T6Options","296":"ResolutionUnit","297":"PageNumber","301":"TransferFunction","305":"Software","306":"DateTime","315":"Artist","316":"HostComputer","317":"Predictor","318":"WhitePoint","319":"PrimaryChromaticities","320":"ColorMap","321":"HalftoneHints","322":"TileWidth","323":"TileLength","324":"TileOffsets","325":"TileByteCounts","326":"BadFaxLines","327":"CleanFaxData","328":"ConsecutiveBadFaxLines","330":"SubIFDs","332":"InkSet","333":"InkNames","334":"NumberOfInks","336":"DotRange","337":"TargetPrinter","338":"ExtraSamples","339":"SampleFormat","340":"SMinSampleValue","341":"SMaxSampleValue","342":"TransferRange","343":"ClipPath","344":"XClipPathUnits","345":"YClipPathUnits","346":"Indexed","347":"JPEGTables","351":"OPIProxy","400":"GlobalParametersIFD","401":"ProfileType","402":"FaxProfile","403":"CodingMethods","404":"VersionYear","405":"ModeNumber","433":"Decode","434":"DefaultImageColor","512":"JPEGProc","513":"JPEGInterchangeFormat","514":"JPEGInterchangeFormatLength","515":"JPEGRestartInterval","517":"JPEGLosslessPredictors","518":"JPEGPointTransforms","519":"JPEGQTables","520":"JPEGDCTables","521":"JPEGACTables","529":"YCbCrCoefficients","530":"YCbCrSubSampling","531":"YCbCrPositioning","532":"ReferenceBlackWhite","559":"StripRowCounts","700":"XMP","32781":"ImageID","32932":"WangAnnotatio","33432":"Copyright","33445":"MDFileTag","33446":"MDScalePixel","33447":"MDColorTable","33448":"MDLabName","33449":"MDSampleInfo","33450":"MDPrepDate","33451":"MDPrepTime","33452":"MDFileUnits","33550":"ModelPixelScaleTag","33723":"IPTC","33918":"INGRPacketDataTag","33919":"INGRFlagRegisters","33920":"IrasBTransformationMatrix","33922":"ModelTiepointTag","34264":"ModelTransformationTag","34377":"Photoshop","34665":"ExifIFD","34675":"ICCProfile","34732":"ImageLayer","34735":"GeoKeyDirectoryTag","34736":"GeoDoubleParamsTag","34737":"GeoAsciiParamsTag","34853":"GPSIFD","34908":"HylaFAXFaxRecvParams","34909":"HylaFAXFaxSubAddress","34910":"HylaFAXFaxRecvTime","37724":"ImageSourceData","40965":"InteroperabilityIFD","42112":"GDAL_METADATA","42113":"GDAL_NODATA","50215":"OceScanjobDescription","50216":"OceApplicationSelector","50217":"OceIdentificationNumber","50218":"OceImageLogicCharacteristics","50706":"DNGVersion","50707":"DNGBackwardVersion","50708":"UniqueCameraModel","50709":"LocalizedCameraModel","50710":"CFAPlaneColor","50711":"CFALayout","50712":"LinearizationTable","50713":"BlackLevelRepeatDim","50714":"BlackLevel","50715":"BlackLevelDeltaH","50716":"BlackLevelDeltaV","50717":"WhiteLevel","50718":"DefaultScale","50719":"DefaultCropOrigin","50720":"DefaultCropSize","50721":"ColorMatrix1","50722":"ColorMatrix2","50723":"CameraCalibration1","50724":"CameraCalibration2","50725":"ReductionMatrix1","50726":"ReductionMatrix2","50727":"AnalogBalance","50728":"AsShotNeutral","50729":"AsShotWhiteXY","50730":"BaselineExposure","50731":"BaselineNoise","50732":"BaselineSharpness","50733":"BayerGreenSplit","50734":"LinearResponseLimit","50735":"CameraSerialNumber","50736":"LensInfo","50737":"ChromaBlurRadius","50738":"AntiAliasStrength","50740":"DNGPrivateData","50741":"MakerNoteSafety","50778":"CalibrationIlluminant1","50779":"CalibrationIlluminant2","50780":"BestQualityScale","50784":"AliasLayerMetadata"},L={};for(var E in T)L[T[E]]=E;R.exports={tagsById:T,tagsByName:L}},{}],142:[function(I,R){"use strict";function T(ae,ie,ne,oe){if(8===ne)return new Uint8Array(ae*ie);return 16===ne?new Uint16Array(ae*ie):32===ne&&3===oe?new Float32Array(ae*ie):Z("bit depth / sample format",ne+" / "+oe)}function L(ae,ie,ne,oe){for(var le=0;le<oe;le++)ae[ne++]=ie.getUint8(le);return ne}function E(ae,ie,ne,oe,le){for(var se=0;se<2*oe;se+=2)ae[ne++]=ie.getUint16(se,le);return ne}function G(ae,ie,ne,oe,le){for(var se=0;se<4*oe;se+=4)ae[ne++]=ie.getFloat32(se,le);return ne}function Z(ae,ie){throw new Error("Unsupported "+ae+": "+ie)}function W(ae){if(ae.length){var ie=ae;ae=ie[0];for(var ne=0;ne<ie.length;ne++)ie[ne]!==ae&&Z("bit depth",ie)}return ae}var Q=I("iobuffer"),$=I("./ifd"),J=I("./tiffIfd"),ee=I("./ifdValue"),te={ignoreImageData:!1,onlyFirst:!1};R.exports=class extends Q{constructor(ie,ne){super(ie,ne),this._nextIFD=0}decode(ie){ie=Object.assign({},te,ie);var ne=[];for(this.decodeHeader();this._nextIFD;)if(ne.push(this.decodeIFD(ie)),ie.onlyFirst)return ne[0];return ne}decodeHeader(){var ie=this.readUint16();if(18761===ie)this.setLittleEndian();else if(19789===ie)this.setBigEndian();else throw new Error("invalid byte order: 0x"+ie.toString(16));if(ie=this.readUint16(),42!==ie)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(ie){this.seek(this._nextIFD);var ne;ne=ie.kind?new $(ie.kind):new J;var oe=this.readUint16();for(var le=0;le<oe;le++)this.decodeIFDEntry(ne);return ie.ignoreImageData||this.decodeImageData(ne),this._nextIFD=this.readUint32(),ne}decodeIFDEntry(ie){var ne=this.offset,oe=this.readUint16(),le=this.readUint16(),se=this.readUint32();if(1>le||12<le)return void this.skip(4);var de=ee.getByteLength(le,se);4<de&&this.seek(this.readUint32());var ue=ee.readData(this,le,se);if(ie.fields.set(oe,ue),34665===oe||34853===oe){var he=this.offset,me=void 0;34665===oe?me="exif":34853===oe&&(me="gps"),this._nextIFD=ue,ie[me]=this.decodeIFD({kind:me,ignoreImageData:!0}),this.offset=he}this.seek(ne),this.skip(12)}decodeImageData(ie){var ne=ie.orientation;switch(ne&&1!==ne&&Z("orientation",ne),ie.type){case 1:case 2:this.readStripData(ie);break;default:Z("image type",ie.type);}}readStripData(ie){var ne=ie.width,oe=ie.height,le=W(ie.bitsPerSample),se=ie.sampleFormat,de=ne*oe,ue=T(de,1,le,se),he=ie.compression,me=ie.rowsPerStrip,ce=me*ne,ge=ie.stripOffsets,pe=ie.stripByteCounts,fe=0;for(var _e=0;_e<ge.length;_e++){var be=this.getStripData(he,ge[_e],pe[_e]),ye=de>ce?ce:de;de-=ye,8===le?fe=L(ue,be,fe,ye):16===le?fe=E(ue,be,fe,ye,this.isLittleEndian()):32===le&&3===se?fe=G(ue,be,fe,ye,this.isLittleEndian()):Z("bitDepth",le)}ie.data=ue}getStripData(ie,ne,oe){switch(ie){case 1:return new DataView(this.buffer,ne,oe);case 2:case 32773:return Z("Compression",ie);default:throw new Error("invalid compression: "+ie);}}}},{"./ifd":136,"./ifdValue":137,"./tiffIfd":143,iobuffer:48}],143:[function(I,R){"use strict";function T(Z){return"number"==typeof Z?[Z]:Z}var L=I("./ifd"),E=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class G extends L{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var Z=new Date,W=E.exec(this.dateTime);return Z.setFullYear(W[1],W[2]-1,W[3]),Z.setHours(W[4],W[5],W[6]),Z}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return T(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return T(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}R.exports=G},{"./ifd":136}],144:[function(I,R){"use strict";function T(G,Z){if("string"!=typeof G&&"function"!=typeof G)throw new TypeError("func argument must be a function");if(void 0===Z&&(Z={}),"object"!=typeof Z||null===Z)throw new TypeError("options argument must be an object");this._workerCode=G.toString(),this._numWorkers=void 0===Z.maxWorkers||"auto"===Z.maxWorkers?Math.min(E-1,1):0<Z.maxWorkers?Math.min(Z.maxWorkers,E):E,this._workers=new Map,this._timeout=Z.timeout||0,this._terminateOnError=!!Z.terminateOnError;var W=Z.deps;"string"==typeof W&&(W=[W]),Array.isArray(W)||(W=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(W)}var L=I("./workerTemplate"),E=navigator.hardwareConcurrency||1;Function.prototype,T.prototype._init=function(G){var Z=L.newWorkerURL(this._workerCode,G);for(var W=0;W<this._numWorkers;W++){var Q=new Worker(Z);Q.onmessage=this._onmessage.bind(this,Q),Q.onerror=this._onerror.bind(this,Q),Q.running=!1,Q.id=W,this._workers.set(Q,null)}URL.revokeObjectURL(Z)},T.prototype._onerror=function(G,Z){if(!this._terminated){this._working--,G.running=!1;var W=this._workers.get(G);W&&W[1](Z.message),this._workers.set(G,null),this._terminateOnError?this.terminate():this._exec()}},T.prototype._onmessage=function(G,Z){if(!this._terminated){this._working--,G.running=!1;var W=this._workers.get(G);W&&W[0](Z.data.data),this._workers.set(G,null),this._exec()}},T.prototype._exec=function(){for(var G of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!G.running)for(var Z=0;Z<this._waiting.length;Z++){var W=this._waiting[Z];if("number"!=typeof W[4]||W[4]===G.id){this._waiting.splice(Z,1),G.postMessage({action:"exec",event:W[0],args:W[1]},W[2]),G.running=!0,G.time=Date.now(),this._workers.set(G,W[3]),this._working++;break}}}},T.prototype.terminate=function(){if(!this._terminated){for(var G of this._workers)G[0].terminate(),G[1]&&G[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},T.prototype.postAll=function(G,Z){if(this._terminated)throw new Error("Cannot post (terminated)");var W=[];for(var Q of this._workers.keys())W.push(this.post(G,Z,[],Q.id));return Promise.all(W)},T.prototype.post=function(G,Z,W,Q){Z===void 0&&(Z=[]),W===void 0&&(W=[]),Array.isArray(Z)||(Z=[Z]),Array.isArray(W)||(W=[W]);var $=this;return new Promise(function(J,ee){if($._terminated)throw new Error("Cannot post (terminated)");$._waiting.push([G,Z,W,[J,ee],Q]),$._exec()})},R.exports=T},{"./workerTemplate":145}],145:[function(I,R,T){"use strict";var L=function(){function G(){this._listeners={}}self.window=self,G.prototype.on=function(Z,W){if(this._listeners[Z])throw new RangeError("there is already a listener for "+Z);if("function"!=typeof W)throw new TypeError("callback argument must be a function");this._listeners[Z]=W},G.prototype._send=function(Z,W,Q){Q===void 0?Q=[]:!Array.isArray(Q)&&(Q=[Q]),self.postMessage({id:Z,data:W},Q)},G.prototype._trigger=function(Z,W){if(!this._listeners[Z])throw new Error("event "+Z+" is not defined");this._listeners[Z].apply(null,W)};var E=new G;self.onmessage=function(Z){switch(Z.data.action){case"exec":Z.data.args.unshift(function(W,Q){E._send(Z.data.id,W,Q)}),E._trigger(Z.data.event,Z.data.args);break;case"ping":E._send(Z.data.id,"pong");break;default:throw new Error("unexpected action: "+Z.data.action);}}}.toString().split("\"CODE\";");T.newWorkerURL=function(G,Z){var W=new Blob(["(",L[0],"importScripts.apply(self, "+JSON.stringify(Z)+");\n","(",G,")();",L[1],")();"],{type:"application/javascript"});return URL.createObjectURL(W)}},{}],146:[function(I,R,T){"use strict";function L(_e){return _e&&_e.__esModule?_e:{default:_e}}function E(_e){if(Array.isArray(_e)){for(var be=0,ye=Array(_e.length);be<_e.length;be++)ye[be]=_e[be];return ye}return Array.from(_e)}Object.defineProperty(T,"__esModule",{value:!0});var G=I("./kind"),Z=I("./kindNames"),W=I("./environment"),Q=I("./extend"),$=L(Q),J=I("./bitMethods"),ee=L(J),te=I("fs"),ae=I("./model/model"),ie=I("./roi/manager"),ne=L(ie),oe=I("./mediaTypes"),le=I("extend"),se=L(le),de=I("./load"),ue=I("../stack/Stack"),he=L(ue),me=I("blob-util"),ce=I("has-own"),ge=L(ce),pe={configurable:!0,enumerable:!1,get:void 0};class fe{constructor(_e,be,ye,xe){if(void 0===_e&&(_e=1),void 0===be&&(be=1),"object"==typeof _e){var ke=_e,we=!0===be;_e=ke.width,be=ke.height,ye=we?ke.data.slice():ke.data,xe={position:ke.position,components:ke.components,alpha:ke.alpha,bitDepth:ke.bitDepth,colorModel:ke.colorModel,parent:ke,meta:ke.meta}}if(ye&&!ye.length&&(xe=ye,ye=null),void 0===xe&&(xe={}),this.width=_e,this.height=be,0>=this.width)throw new RangeError("width must be greater than 0");if(0>=this.height)throw new RangeError("height must be greater than 0");Object.defineProperty(this,"parent",{enumerable:!1,writable:!0}),this.parent=xe.parent,this.position=xe.position||[0,0];var ve=void 0;if("string"!=typeof xe.kind)ve=(0,G.getKind)(Z.RGBA);else if(ve=(0,G.getKind)(xe.kind),!ve)throw new RangeError("invalid image kind: "+xe.kind);var Me=(0,se.default)({},ve,xe);this.components=Me.components,this.alpha=Me.alpha+0,this.bitDepth=Me.bitDepth,this.colorModel=Me.colorModel,this.meta=xe.meta||{},this.computed=null,this.initialize(),ye||(ye=(0,G.createPixelArray)(this)),this.setData(ye)}initialize(){this.size=this.width*this.height,this.sizes=[this.width,this.height],this.channels=this.components+this.alpha,this.maxValue=32===this.bitDepth?Number.MAX_VALUE:Math.pow(2,this.bitDepth)-1,this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=32>this.bitDepth,this.borderSizes=[0,0]}setData(_e){var be=(0,G.getTheoreticalPixelArraySize)(this);if(be!==_e.length)throw new RangeError(`incorrect data size. Should be ${be} and found ${_e.length}`);this.data=_e}static load(_e,be){return(0,de.loadImage)(_e,be)}static fromCanvas(_e){var be=_e.getContext("2d"),ye=be.getImageData(0,0,_e.width,_e.height);return new fe(ye.width,ye.height,ye.data)}static extendMethod(_e,be){var ye=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},xe=ye.inPlace,ke=xe!==void 0&&xe,we=ye.returnThis,ve=!(we!==void 0)||we,Me=ye.partialArgs,je=Me===void 0?[]:Me,Pe=ye.stack,De=Pe!==void 0&&Pe;if(ke){if(fe.prototype[_e]=function(){this.computed=null;for(var Ce=arguments.length,Ae=Array(Ce),Re=0;Re<Ce;Re++)Ae[Re]=arguments[Re];var Be=be.apply(this,[].concat(E(je),Ae));return ve?this:Be},De){var Ie="string"==typeof De?De:_e;he.default.prototype[Ie]=ve?function(){for(var Ce of this)Ce[_e].apply(Ce,arguments);return this}:function(){var Ce=new he.default(this.length);for(var Ae=0;Ae<this.length;Ae++){var Re;Ce[Ae]=(Re=this[Ae])[_e].apply(Re,arguments)}return Ce}}}else if(fe.prototype[_e]=function(){for(var Ce=arguments.length,Ae=Array(Ce),Re=0;Re<Ce;Re++)Ae[Re]=arguments[Re];return be.apply(this,[].concat(E(je),Ae))},De){var Se="string"==typeof De?De:_e;he.default.prototype[Se]=function(){var Ce=new he.default(this.length);for(var Ae=0;Ae<this.length;Ae++){var Re;Ce[Ae]=(Re=this[Ae])[_e].apply(Re,arguments)}return Ce}}return fe}static extendProperty(_e,be){var ye=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},xe=ye.partialArgs,ke=void 0===xe?[]:xe;return pe.get=function(){if(null===this.computed)this.computed={};else if((0,ge.default)(_e,this.computed))return this.computed[_e];var we=be.apply(this,ke);return this.computed[_e]=we,we},Object.defineProperty(fe.prototype,_e,pe),fe}static createFrom(_e,be){var ye={width:_e.width,height:_e.height,position:_e.position,components:_e.components,alpha:_e.alpha,colorModel:_e.colorModel,bitDepth:_e.bitDepth,parent:_e};return(0,se.default)(ye,be),new fe(ye.width,ye.height,ye)}static isTypeSupported(_e){var be=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"write";if("string"!=typeof _e)throw new TypeError("type argument must be a string");if(_e=(0,oe.getType)(_e),"write"===be)return(0,oe.canWrite)(_e);throw new TypeError("unknown operation: "+be)}getPixelIndex(_e){var be=0;for(var ye=0;ye<_e.length;ye++)be+=this.multipliers[ye]*_e[ye];return be}setValueXY(_e,be,ye,xe){return this.data[(be*this.width+_e)*this.channels+ye]=xe,this.computed=null,this}getValueXY(_e,be,ye){return this.data[(be*this.width+_e)*this.channels+ye]}setValue(_e,be,ye){return this.data[_e*this.channels+be]=ye,this.computed=null,this}getValue(_e,be){return this.data[_e*this.channels+be]}setPixelXY(_e,be,ye){return this.setPixel(be*this.width+_e,ye)}getPixelXY(_e,be){return this.getPixel(be*this.width+_e)}setPixel(_e,be){var ye=_e*this.channels;for(var xe=0;xe<be.length;xe++)this.data[ye+xe]=be[xe];return this.computed=null,this}getPixel(_e){var be=Array(this.channels),ye=_e*this.channels;for(var xe=0;xe<this.channels;xe++)be[xe]=this.data[ye+xe];return be}toDataURL(){var _e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"image/png",be=1<arguments.length&&arguments[1]!==void 0&&arguments[1];return be?new Promise((ye,xe)=>{this.getCanvas().toDataURL((0,oe.getType)(_e),function(ke,we){ke?xe(ke):ye(we)})}):this.getCanvas().toDataURL((0,oe.getType)(_e))}toBase64(){var _e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"image/png",be=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(be)return this.toDataURL(_e,!0).then(function(xe){return xe.substring(xe.indexOf(",")+1)});var ye=this.toDataURL(_e);return ye.substring(ye.indexOf(",")+1)}toBlob(){var _e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"image/png",be=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0.8;return(0,me.canvasToBlob)(this.getCanvas({originalData:!0}),_e,be)}getCanvas(){var _e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},be=_e.originalData,ye=void 0!==be&&be,xe=void 0;ye?(this.checkProcessable("getInPlaceCanvas",{channels:[4],bitDepth:[8]}),xe=new W.ImageData(this.data,this.width,this.height)):xe=new W.ImageData(this.getRGBAData(),this.width,this.height);var ke=new W.Canvas(this.width,this.height),we=ke.getContext("2d");return we.putImageData(xe,0,0),ke}getRGBAData(){this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16]});var _e=this.size,be=new Uint8ClampedArray(4*(this.width*this.height));if(1===this.bitDepth)for(var ye=0;ye<_e;ye++){var xe=this.getBit(ye);be[4*ye]=255*xe,be[4*ye+1]=255*xe,be[4*ye+2]=255*xe}else if(1===this.components)for(var ke=0;ke<_e;ke++)be[4*ke]=this.data[ke*this.channels]>>>this.bitDepth-8,be[4*ke+1]=this.data[ke*this.channels]>>>this.bitDepth-8,be[4*ke+2]=this.data[ke*this.channels]>>>this.bitDepth-8;else if(3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[ae.RGB]}),this.colorModel===ae.RGB))for(var we=0;we<_e;we++)be[4*we]=this.data[we*this.channels]>>>this.bitDepth-8,be[4*we+1]=this.data[we*this.channels+1]>>>this.bitDepth-8,be[4*we+2]=this.data[we*this.channels+2]>>>this.bitDepth-8;if(this.alpha){this.checkProcessable("getRGBAData",{bitDepth:[8,16]});for(var ve=0;ve<_e;ve++)be[4*ve+3]=this.data[ve*this.channels+this.components]>>this.bitDepth-8}else for(var Me=0;Me<_e;Me++)be[4*Me+3]=255;return be}getRoiManager(_e){return new ne.default(this,_e)}clone(){var _e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},be=_e.copyData,ye=!(be!==void 0)||be;return new fe(this,ye)}save(_e){var be=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ye=be.format,xe=ye===void 0?"png":ye;return new Promise((ke,we)=>{var ve=this.getCanvas(),Me=(0,te.createWriteStream)(_e),je=void 0;switch(xe.toLowerCase()){case"png":je=ve.pngStream();break;case"jpg":case"jpeg":je=ve.jpegStream();break;default:throw new RangeError("invalid output format: "+xe);}Me.on("finish",ke),Me.on("error",we),je.pipe(Me)})}checkProcessable(_e){var be=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ye=be.bitDepth,xe=be.alpha,ke=be.colorModel,we=be.components,ve=be.channels;if("string"!=typeof _e)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(ye&&(Array.isArray(ye)||(ye=[ye]),!ye.includes(this.bitDepth)))throw new TypeError("The process: "+_e+" can only be applied if bit depth is in: "+ye);if(xe&&(Array.isArray(xe)||(xe=[xe]),!xe.includes(this.alpha)))throw new TypeError("The process: "+_e+" can only be applied if alpha is in: "+xe);if(ke&&(Array.isArray(ke)||(ke=[ke]),!ke.includes(this.colorModel)))throw new TypeError("The process: "+_e+" can only be applied if color model is in: "+ke);if(we&&(Array.isArray(we)||(we=[we]),!we.includes(this.components)))throw new TypeError("The process: "+_e+" can only be applied if the number of components is in: "+we);if(ve&&(Array.isArray(ve)||(ve=[ve]),!ve.includes(this.channels)))throw new TypeError("The process: "+_e+" can only be applied if the number of channels is in: "+ve)}checkColumn(_e){if(0>_e||_e>=this.width)throw new RangeError(`checkColumn: column should be included between 0 and ${this.width-1}. Current value: ${_e}`)}checkRow(_e){if(0>_e||_e>=this.height)throw new RangeError(`checkRow: row should be included between 0 and ${this.height-1}. Current value: ${_e}`)}checkChannel(_e){if(0>_e||_e>=this.channels)throw new RangeError(`checkChannel: channel should be included between 0 and ${this.channels-1}. Current value: ${_e}`)}apply(_e){for(var be=0;be<this.height;be++)for(var ye=0;ye<this.width;ye++){var xe=(be*this.width+ye)*this.channels;_e.call(this,xe)}}}T.default=fe,(0,$.default)(fe),(0,ee.default)(fe)},{"../stack/Stack":250,"./bitMethods":147,"./environment":160,"./extend":161,"./kind":182,"./kindNames":183,"./load":184,"./mediaTypes":185,"./model/model":186,"./roi/manager":201,"blob-util":6,extend:35,fs:8,"has-own":44}],147:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){for(var G in L)E.prototype[G]=L[G]};var L={setBitXY:function(G,Z){var W=Z*this.width+G;this.data[W>>3]|=1<<7-(7&W)},clearBitXY:function(G,Z){var W=Z*this.width+G;this.data[W>>3]&=~(1<<7-(7&W))},toggleBitXY:function(G,Z){var W=Z*this.width+G;this.data[W>>3]^=1<<7-(7&W)},getBitXY:function(G,Z){var W=Z*this.width+G;return this.data[W>>3]&1<<7-(7&W)?1:0},setBit:function(G){this.data[G>>3]|=1<<7-(7&G)},clearBit:function(G){this.data[G>>3]&=~(1<<7-(7&G))},toggleBit:function(G){this.data[G>>3]^=1<<7-(7&G)},getBit:function(G){return this.data[G>>3]&1<<7-(7&G)?1:0}}},{}],148:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},W=Z.useAlpha,Q=!(W!==void 0)||W,$=Z.nbSlots,J=$===void 0?512:$;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});var ee=Math.log(J)/Math.log(8);if(ee!==Math.floor(ee))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");var te=this.bitDepth-ee,ae=this.data,ie=(0,E.default)(Math.pow(8,ee),0),ne=Math.pow(2,2*ee),oe=Math.pow(2,ee);for(var le=0;le<ae.length;le+=this.channels){var se=(ae[le]>>te)*ne+(ae[le+1]>>te)*oe+(ae[le+2]>>te);Q&&this.alpha?ie[se]+=ae[le+this.channels-1]/this.maxValue:ie[se]++}return ie};var L=I("new-array"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"new-array":114}],149:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},G=E.alpha,Z=G===void 0?1:G;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});var W=0;if(Z!==void 0){for(var Q=this.components;Q<this.data.length;Q+=this.channels)this.data[Q]===Z&&W++;return W}return this.size}},{}],150:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}function E($,J){var ee=J.useAlpha,te=J.maxSlots,ae=Math.log2(te);if(!(0,Q.default)(ae))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");var ie=0;this.bitDepth>ae&&(ie=this.bitDepth-ae);var ne=this.data,oe=(0,Z.default)(Math.pow(2,Math.min(this.bitDepth,ae)),0);if(ee&&this.alpha){var le=this.channels-$-1;for(var se=$;se<ne.length;se+=this.channels)oe[ne[se]>>ie]+=ne[se+le]/this.maxValue}else for(var de=$;de<ne.length;de+=this.channels)oe[ne[de]>>ie]++;return oe}Object.defineProperty(T,"__esModule",{value:!0}),T.getHistogram=function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ee=J.maxSlots,te=void 0===ee?256:ee,ae=J.channel,ie=J.useAlpha,ne=void 0===ie||ie;if(this.checkProcessable("getHistogram",{bitDepth:[8,16]}),void 0===ae){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");ae=0}return E.call(this,ae,{useAlpha:ne,maxSlots:te})},T.getHistograms=function(){var J=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ee=J.maxSlots,te=ee===void 0?256:ee,ae=J.useAlpha,ie=!(ae!==void 0)||ae;this.checkProcessable("getHistograms",{bitDepth:[8,16]});var ne=Array(ie?this.components:this.channels);for(var oe=0;oe<ne.length;oe++)ne[oe]=E.call(this,oe,{useAlpha:ie,maxSlots:te});return ne};var G=I("new-array"),Z=L(G),W=I("is-integer"),Q=L(W)},{"is-integer":53,"new-array":114}],151:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},G=E.mask,Z=E.region,W=Z===void 0?3:Z,Q=E.removeClosePoints,$=Q===void 0?0:Q,J=E.invert,ee=J!==void 0&&J,te=E.maxEquals,ae=te===void 0?2:te,ie=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),W*=4;var ne=ee?0:1,oe=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],le=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],se=8>=W?1:2,de=[];for(var ue=se;ue<ie.height-se;ue++)for(var he=se;he<ie.width-se;he++)if(!(G&&G.getBitXY(he,ue)!==ne)){var me=0,ce=0,ge=ie.data[he+ue*ie.width];for(var pe=0;pe<W;pe++)ee?ie.data[he+oe[pe]+(ue+le[pe])*ie.width]>ge&&me++:ie.data[he+oe[pe]+(ue+le[pe])*ie.width]<ge&&me++,ie.data[he+oe[pe]+(ue+le[pe])*ie.width]===ge&&ce++;me+ce===W&&ce<=ae&&de.push([he,ue])}if(0<$)for(var fe=0;fe<de.length;fe++)for(var _e=fe+1;_e<de.length;_e++)Math.sqrt(Math.pow(de[fe][0]-de[_e][0],2)+Math.pow(de[fe][1]-de[_e][1],2))<$&&(de[fe][0]=de[fe][0]+de[_e][0]>>1,de[fe][1]=de[fe][1]+de[_e][1]>>1,de.splice(_e,1),_e--);return de}},{}],152:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("max",{bitDepth:[8,16]});var Z=(0,E.default)(this.channels,-(1/0));for(var W=0;W<this.data.length;W+=this.channels)for(var Q=0;Q<this.channels;Q++)this.data[W+Q]>Z[Q]&&(Z[Q]=this.data[W+Q]);return Z};var L=I("new-array"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"new-array":114}],153:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var G=this.getHistograms({maxSlots:this.maxValue+1}),Z=Array(G.length);for(var W=0;W<G.length;W++){var Q=G[W];Z[W]=(0,L.mean)(Q)}return Z};var L=I("../../util/histogram")},{"../../util/histogram":263}],154:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var G=this.getHistograms({maxSlots:this.maxValue+1}),Z=Array(G.length);for(var W=0;W<G.length;W++){var Q=G[W];Z[W]=(0,L.median)(Q)}return Z};var L=I("../../util/histogram")},{"../../util/histogram":263}],155:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var Z=(0,E.default)(this.channels,+(1/0));for(var W=0;W<this.data.length;W+=this.channels)for(var Q=0;Q<this.channels;Q++)this.data[W+Q]<Z[Q]&&(Z[Q]=this.data[W+Q]);return Z};var L=I("new-array"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"new-array":114}],156:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("points",{bitDepth:[1]});var E=Array(this.size),G=0;for(var Z=0;Z<this.width;Z++)for(var W=0;W<this.height;W++)1===this.getBitXY(Z,W)&&(E[G++]=[Z,W]);return E.length=G,E}},{}],157:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){if(this===E)return[0,0];for(var G=[0,0],Z=this;Z;){if(Z===E)return G;Z.position&&(G[0]+=Z.position[0],G[1]+=Z.position[1]),Z=Z.parent}return!1}},{}],158:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("sum",{bitDepth:[8,16]});var Z=(0,E.default)(this.channels,0);for(var W=0;W<this.data.length;W+=this.channels)for(var Q=0;Q<this.channels;Q++)Z[Q]+=this.data[W+Q];return Z};var L=I("new-array"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"new-array":114}],159:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){return this.checkProcessable("getSvd",{bitDepth:[1]}),L.DC.SVD(this.points)};var L=I("ml-matrix")},{"ml-matrix":87}],160:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=void 0,E=void 0,G=void 0,Z=void 0,W=void 0,Q=void 0;"undefined"==typeof self?"undefined"!=typeof R&&R.exports&&function(){T.env=Q="node",T.isDifferentOrigin=W=()=>!1;var $=I("canvas");T.DOMImage=E=$.Image,T.Canvas=G=$,T.ImageData=Z=$.ImageData;var J=I("fs");T.fetchBinary=L=function(te){return new Promise(function(ae,ie){J.readFile(te,function(ne,oe){ne?ie(ne):ae(oe.buffer)})})}}():function(){T.env=Q="browser";var $=self.location.origin;T.isDifferentOrigin=W=function(ee){try{var te=new self.URL(ee);return te.origin!==$}catch(ae){return!1}},T.ImageData=Z=self.ImageData,T.DOMImage=E=self.Image,T.Canvas=G=function(ee,te){var ae=self.document.createElement("canvas");return ae.width=ee,ae.height=te,ae},T.fetchBinary=L=function(ee){var te=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ae=te.withCredentials,ie=ae!==void 0&&ae;return new Promise(function(ne,oe){var le=new self.XMLHttpRequest;le.open("GET",ee,!0),le.responseType="arraybuffer",le.withCredentials=ie,le.onload=function(se){200===this.status?ne(this.response):oe(se)},le.onerror=oe,le.send()})}}(),T.fetchBinary=L,T.DOMImage=E,T.Canvas=G,T.ImageData=Z,T.isDifferentOrigin=W,T.env=Q},{canvas:void 0,fs:8}],161:[function(I,R,T){"use strict";function L(fa){return fa&&fa.__esModule?fa:{default:fa}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(_a){var ba={inPlace:!0},ya={stack:!0};_a.extendMethod("invertGetSet",G.default,ba),_a.extendMethod("invertIterator",W.default,ba),_a.extendMethod("invertPixel",ee.default,ba),_a.extendMethod("invertOneLoop",$.default,ba),_a.extendMethod("invertApply",ae.default,ba),_a.extendMethod("invert",le.default,{inPlace:!0,stack:!0}),_a.extendMethod("invertBinaryLoop",ne.default,ba),_a.extendMethod("level",ke.default,ba),_a.extendMethod("add",ve.default,ba),_a.extendMethod("subtract",je.default,ba),_a.extendMethod("multiply",Se.default,ba),_a.extendMethod("divide",Ae.default,ba),_a.extendMethod("hypotenuse",De.default),_a.extendMethod("background",Be.default),_a.extendMethod("flipX",de.default),_a.extendMethod("flipY",he.default),_a.extendMethod("blurFilter",ce.default),_a.extendMethod("medianFilter",pe.default),_a.extendMethod("gaussianFilter",_e.default),_a.extendMethod("sobelFilter",ye.default),_a.extendMethod("crop",Te.default,ya),_a.extendMethod("scale",Ee.default,ya),_a.extendMethod("hsv",Fe.default),_a.extendMethod("hsl",Oe.default),_a.extendMethod("cmyk",qe.default),_a.extendMethod("rgba8",Xe.default),_a.extendMethod("grey",He.default).extendMethod("gray",He.default),_a.extendMethod("mask",We.default),_a.extendMethod("pad",Qe.default),_a.extendMethod("resizeBinary",Je.default),_a.extendMethod("colorDepth",at.default),_a.extendMethod("setBorder",lt.default,ba),_a.extendMethod("rotate",nt.rotate),_a.extendMethod("rotateLeft",nt.rotateLeft),_a.extendMethod("rotateRight",nt.rotateRight),_a.extendMethod("getRow",vt.default),_a.extendMethod("getColumn",jt.default),_a.extendMethod("getMatrix",Dt.default),_a.extendMethod("setMatrix",St.default),_a.extendMethod("getPixelsArray",At.default),_a.extendMethod("split",st.default),_a.extendMethod("getChannel",ut.default),_a.extendMethod("combineChannels",mt.default),_a.extendMethod("setChannel",gt.default),_a.extendMethod("getSimilarity",_t.default),_a.extendMethod("getPixelsGrid",yt.default),_a.extendMethod("getBestMatch",kt.default),_a.extendMethod("paintMasks",Bt.default,ba),_a.extendMethod("paintLabels",Tt.default,ba),_a.extendMethod("paintPoints",Et.default,ba),_a.extendMethod("extract",Ft.default),_a.extendMethod("convolution",Ot.default),_a.extendMethod("convolutionFft",qt.default),_a.extendMethod("countAlphaPixels",ga.default),_a.extendMethod("getHistogram",Ut.getHistogram).extendProperty("histogram",Ut.getHistogram),_a.extendMethod("getHistograms",Ut.getHistograms).extendProperty("histograms",Ut.getHistograms),_a.extendMethod("getColorHistogram",Gt.default).extendProperty("colorHistogram",Gt.default),_a.extendMethod("getMin",Zt.default).extendProperty("min",Zt.default),_a.extendMethod("getMax",Kt.default).extendProperty("max",Kt.default),_a.extendMethod("getSum",$t.default).extendProperty("sum",$t.default),_a.extendMethod("getLocalMaxima",ea.default),_a.extendMethod("getMedian",na.default).extendProperty("median",na.default),_a.extendMethod("getMean",aa.default).extendProperty("mean",aa.default),_a.extendMethod("getPoints",la.default).extendProperty("points",la.default),_a.extendMethod("getRelativePosition",ua.default),_a.extendMethod("getSvd",ma.default).extendProperty("svd",ma.default)};var E=I("./filter/invertGetSet"),G=L(E),Z=I("./filter/invertIterator"),W=L(Z),Q=I("./filter/invertOneLoop"),$=L(Q),J=I("./filter/invertPixel"),ee=L(J),te=I("./filter/invertApply"),ae=L(te),ie=I("./filter/invertBinaryLoop"),ne=L(ie),oe=I("./filter/invert"),le=L(oe),se=I("./filter/flipX"),de=L(se),ue=I("./filter/flipY"),he=L(ue),me=I("./filter/blurFilter"),ce=L(me),ge=I("./filter/medianFilter"),pe=L(ge),fe=I("./filter/gaussianFilter"),_e=L(fe),be=I("./filter/sobelFilter"),ye=L(be),xe=I("./filter/level"),ke=L(xe),we=I("./filter/add"),ve=L(we),Me=I("./filter/subtract"),je=L(Me),Pe=I("./filter/hypotenuse"),De=L(Pe),Ie=I("./filter/multiply"),Se=L(Ie),Ce=I("./filter/divide"),Ae=L(Ce),Re=I("./filter/background"),Be=L(Re),ze=I("./transform/crop"),Te=L(ze),Le=I("./transform/scale/scale"),Ee=L(Le),Ve=I("./transform/hsv"),Fe=L(Ve),Ne=I("./transform/hsl"),Oe=L(Ne),Ye=I("./transform/cmyk"),qe=L(Ye),Ue=I("./transform/rgba8"),Xe=L(Ue),Ge=I("./transform/grey"),He=L(Ge),Ze=I("./transform/mask/mask"),We=L(Ze),Ke=I("./transform/pad"),Qe=L(Ke),$e=I("./transform/resizeBinary"),Je=L($e),et=I("./transform/colorDepth"),at=L(et),nt=I("./transform/rotate"),ot=I("./utility/setBorder"),lt=L(ot),rt=I("./utility/split"),st=L(rt),dt=I("./utility/getChannel"),ut=L(dt),ht=I("./utility/combineChannels"),mt=L(ht),ct=I("./utility/setChannel"),gt=L(ct),pt=I("./utility/getSimilarity"),_t=L(pt),bt=I("./utility/getPixelsGrid"),yt=L(bt),xt=I("./utility/getBestMatch"),kt=L(xt),wt=I("./utility/getRow"),vt=L(wt),Mt=I("./utility/getColumn"),jt=L(Mt),Pt=I("./utility/getMatrix"),Dt=L(Pt),It=I("./utility/setMatrix"),St=L(It),Ct=I("./utility/getPixelsArray"),At=L(Ct),Rt=I("./operator/paintMasks"),Bt=L(Rt),zt=I("./operator/paintLabels"),Tt=L(zt),Lt=I("./operator/paintPoints"),Et=L(Lt),Vt=I("./operator/extract"),Ft=L(Vt),Nt=I("./operator/convolution"),Ot=L(Nt),Yt=I("./operator/convolutionFft"),qt=L(Yt),Ut=I("./compute/histogram"),Xt=I("./compute/colorHistogram"),Gt=L(Xt),Ht=I("./compute/min"),Zt=L(Ht),Wt=I("./compute/max"),Kt=L(Wt),Qt=I("./compute/sum"),$t=L(Qt),Jt=I("./compute/localMaxima"),ea=L(Jt),ta=I("./compute/mean"),aa=L(ta),ia=I("./compute/median"),na=L(ia),oa=I("./compute/points"),la=L(oa),da=I("./compute/relativePosition"),ua=L(da),ha=I("./compute/svd"),ma=L(ha),ca=I("./compute/countAlphaPixels"),ga=L(ca)},{"./compute/colorHistogram":148,"./compute/countAlphaPixels":149,"./compute/histogram":150,"./compute/localMaxima":151,"./compute/max":152,"./compute/mean":153,"./compute/median":154,"./compute/min":155,"./compute/points":156,"./compute/relativePosition":157,"./compute/sum":158,"./compute/svd":159,"./filter/add":162,"./filter/background":163,"./filter/blurFilter":164,"./filter/divide":165,"./filter/flipX":166,"./filter/flipY":167,"./filter/gaussianFilter":168,"./filter/hypotenuse":169,"./filter/invert":170,"./filter/invertApply":171,"./filter/invertBinaryLoop":172,"./filter/invertGetSet":173,"./filter/invertIterator":174,"./filter/invertOneLoop":175,"./filter/invertPixel":176,"./filter/level":177,"./filter/medianFilter":178,"./filter/multiply":179,"./filter/sobelFilter":180,"./filter/subtract":181,"./operator/convolution":187,"./operator/convolutionFft":188,"./operator/extract":189,"./operator/paintLabels":190,"./operator/paintMasks":191,"./operator/paintPoints":192,"./transform/cmyk":202,"./transform/colorDepth":203,"./transform/crop":204,"./transform/grey":205,"./transform/hsl":207,"./transform/hsv":208,"./transform/mask/mask":213,"./transform/pad":226,"./transform/resizeBinary":227,"./transform/rgba8":228,"./transform/rotate":229,"./transform/scale/scale":232,"./utility/combineChannels":233,"./utility/getBestMatch":235,"./utility/getChannel":236,"./utility/getColumn":237,"./utility/getMatrix":238,"./utility/getPixelsArray":239,"./utility/getPixelsGrid":240,"./utility/getRow":241,"./utility/getSimilarity":242,"./utility/setBorder":243,"./utility/setChannel":244,"./utility/setMatrix":245,"./utility/split":246}],162:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.channels;if(this.checkProcessable("add",{bitDepth:[8,16]}),Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),Z=(0,E.checkNumberArray)(Z),!isNaN(Z))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]+Z>>0)}else{if(this.data.length!==Z.length)throw new Error("add: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]+Z[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":259,"../../util/value":268}],163:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Q,$){var J=new L.KernelRidgeRegression(W,Q,$),ee=Array(this.size);for(var te=0;te<this.width;te++)for(var ae=0;ae<this.height;ae++)ee[ae*this.width+te]=[te,ae];var ie=J.predict(ee),Z=G.default.createFrom(this);for(var ne=0;ne<this.size;ne++)Z.data[ne]=Math.min(this.maxValue,Math.max(0,ie[ne][0]));return Z};var L=I("ml-regression"),E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../Image":146,"ml-regression":99}],164:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},W=Z.radius,Q=void 0===W?1:W;if(this.checkProcessable("meanFilter",{components:[1],bitDepth:[8,16]}),1>Q)throw new Error("Number of neighbors should be grater than 0");var $=2*Q+1,J=Array($*$);for(var ee=0;ee<J.length;ee++)J[ee]=1;return E.default.call(this,J)};var L=I("../operator/convolutionFft"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../operator/convolutionFft":188}],165:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.channels;if(this.checkProcessable("divide",{bitDepth:[8,16]}),Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),Z=(0,E.checkNumberArray)(Z),!isNaN(Z))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]/Z>>0)}else{if(this.data.length!==Z.length)throw new Error("divide: the: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]/Z[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":259,"../../util/value":268}],166:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(var E=0;E<this.height;E++){var G=E*this.width*this.channels;for(var Z=0;Z<Math.floor(this.width/2);Z++){var W=Z*this.channels+G,Q=(this.width-Z-1)*this.channels+G;for(var $=0;$<this.channels;$++){var J=this.data[W+$];this.data[W+$]=this.data[Q+$],this.data[Q+$]=J}}}return this}},{}],167:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(var E=0;E<Math.floor(this.height/2);E++)for(var G=0;G<this.width;G++){var Z=G*this.channels+E*this.width*this.channels,W=G*this.channels+(this.height-1-E)*this.channels*this.width;for(var Q=0;Q<this.channels;Q++){var $=this.data[Z+Q];this.data[Z+Q]=this.data[W+Q],this.data[W+Q]=$}}return this}},{}],168:[function(I,R,T){"use strict";function L(W,Q){if(1>W)throw new RangeError("Radius should be grater than 0");var $=2*W+1,J=Array($*$),ee=2*(Q*Q),te=Math.PI*ee;for(var ae=0;ae<=W;ae++)for(var ie=ae;ie<=W;ie++){var ne=Math.exp(-(ae*ae+ie*ie)/ee)/te;J[(ae+W)*$+(ie+W)]=ne,J[(ae+W)*$+(-ie+W)]=ne,J[(-ae+W)*$+(ie+W)]=ne,J[(-ae+W)*$+(-ie+W)]=ne,J[(ie+W)*$+(ae+W)]=ne,J[(ie+W)*$+(-ae+W)]=ne,J[(-ie+W)*$+(ae+W)]=ne,J[(-ie+W)*$+(-ae+W)]=ne}return J}function E(W){if(0>=W)throw new RangeError("Sigma should be grater than 0");for(var Q=2*(W*W),$=Math.PI*Q,J=1/$,ee=J,te=0;0.99>ee;){te++,J=Math.exp(-(te*te)/Q)/$,ee+=4*J;for(var ae=1;ae<te;ae++)J=Math.exp(-(ae*ae+te*te)/Q)/$,ee+=8*J;J=4*Math.exp(-(2*te*te)/Q)/$,ee+=J}if(1<ee)throw new Error("unexpected sum over 1");return L(te,W)}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.radius,J=void 0===$?1:$,ee=Q.sigma,te=Q.channels,ae=Q.border,ie=void 0===ae?"copy":ae,ne=Q.algorithm,oe=void 0===ne?"auto":ne;this.checkProcessable("gaussian",{bitDepth:[8,16]});var le=void 0;return ee?le=E(ee):(ee=0.3*(J-1)+0.8,le=L(J,ee)),Z.default.call(this,le,{border:ie,channels:te,algorithm:oe})};var G=I("../operator/convolution"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(G)},{"../operator/convolution":187}],169:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},$=Q.bitDepth,J=void 0===$?this.bitDepth:$,ee=Q.channels;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==W.width||this.height!==W.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==W.alpha||this.bitDepth!==W.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==W.channels)throw new Error("hypotenuse: both images must have the same number of channels");var te=G.default.createFrom(this,{bitDepth:J});ee=(0,L.validateArrayOfChannels)(this,{channels:ee});var ae=te.isClamped;for(var ie=0;ie<ee.length;ie++){var ne=ee[ie];for(var oe=ne;oe<this.data.length;oe+=this.channels){var le=Math.sqrt(this.data[oe]*this.data[oe]+W.data[oe]*W.data[oe]);te.data[oe]=ae?Math.min(Math.max(Math.round(le),0),te.maxValue):le}}return te};var L=I("../../util/channel"),E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../../util/channel":259,"../Image":146}],170:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=G.channels;if(this.checkProcessable("invertOneLoop",{bitDepth:[1,8,16]}),1===this.bitDepth){var W=this.data;for(var Q=0;Q<W.length;Q++)W[Q]=~W[Q]}else{Z=(0,L.validateArrayOfChannels)(this,{channels:Z});for(var $=0;$<Z.length;$++){var J=Z[$];for(var ee=J;ee<this.data.length;ee+=this.channels)this.data[ee]=this.maxValue-this.data[ee]}}return this};var L=I("../../util/channel")},{"../../util/channel":259}],171:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(1===this.bitDepth){var E=this.data;for(var G=0;G<E.length;G++)E[G]=~E[G]}else this.checkProcessable("invertApply",{bitDepth:[8,16]}),this.apply(function(Z){for(var W=0;W<this.components;W++)this.data[Z+W]=this.maxValue-this.data[Z+W]})}},{}],172:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertBinaryLoop",{bitDepth:[1]});for(var E=0;E<this.size;E++)this.toggleBit(E)}},{}],173:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth){var E=this.data;for(var G=0;G<E.length;G++)E[G]=~E[G]}else for(var Z=0;Z<this.width;Z++)for(var W=0;W<this.height;W++)for(var Q=0;Q<this.components;Q++){var $=this.getValueXY(Z,W,Q);this.setValueXY(Z,W,Q,this.maxValue-$)}}},{}],174:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth){var E=this.data;for(var G=0;G<E.length;G++)E[G]=~E[G]}else for(var Z of this.pixels()){var W=Z.index,Q=Z.pixel;for(var $=0;$<this.components;$++)this.setValue(W,$,this.maxValue-Q[$])}}},{}],175:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertOneLoop",{bitDepth:[8,16]});var E=this.data;for(var G=0;G<E.length;G+=this.channels)for(var Z=0;Z<this.components;Z++)E[G+Z]=this.maxValue-E[G+Z]}},{}],176:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("invertPixel",{bitDepth:[8,16]});for(var E=0;E<this.width;E++)for(var G=0;G<this.height;G++){var Z=this.getPixelXY(E,G);for(var W=0;W<this.components;W++)Z[W]=this.maxValue-Z[W];this.setPixelXY(E,G,Z)}}},{}],177:[function(I,R,T){"use strict";function L(W,Q,$,J){var ee=1e-5,te=Array(W.channels);for(var ae of J)te[ae]=0===Q[ae]&&$[ae]===W.maxValue?0:$[ae]===Q[ae]?0:(W.maxValue+1-ee)/($[ae]-Q[ae]),Q[ae]+=(0.5-ee/2)/te[ae];for(var ie=0;ie<J.length;ie++){var ne=J[ie];if(0!==te[ne])for(var oe=0;oe<W.data.length;oe+=W.channels)W.data[oe+ne]=Math.min(Math.max(0,0|(W.data[oe+ne]-Q[ne])*te[ne]+0.5),W.maxValue)}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.algorithm,J=void 0===$?"range":$,ee=Q.channels,te=Q.min,ae=void 0===te?this.min:te,ie=Q.max,ne=void 0===ie?this.max:ie;switch(this.checkProcessable("level",{bitDepth:[8,16]}),ee=(0,Z.validateArrayOfChannels)(this,{channels:ee}),J){case"range":0>ae&&(ae=0),ne>this.maxValue&&(ne=this.maxValue),Array.isArray(ae)||(ae=(0,G.default)(ee.length,ae)),Array.isArray(ne)||(ne=(0,G.default)(ee.length,ne)),L(this,ae,ne,ee);break;default:throw new Error("level: algorithm not implement: "+J);}return this};var E=I("new-array"),G=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(E),Z=I("../../util/channel")},{"../../util/channel":259,"new-array":114}],178:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.radius,J=void 0===$?1:$,ee=Q.channels,te=Q.border,ae=void 0===te?"copy":te;if(this.checkProcessable("median",{bitDepth:[8,16]}),1>J)throw new Error("Kernel radius should be greater than 0");ee=(0,L.validateArrayOfChannels)(this,ee,!0);var ie=J,ne=J,oe=Z.default.createFrom(this),le=(2*ie+1)*(2*ne+1),se=Math.floor(le/2),de=Array(le);for(var ue=0;ue<ee.length;ue++){var he=ee[ue];for(var me=ne;me<this.height-ne;me++)for(var ce=ie;ce<this.width-ie;ce++){var ge=0;for(var pe=-ne;pe<=ne;pe++)for(var fe=-ie;fe<=ie;fe++){var _e=((me+pe)*this.width+ce+fe)*this.channels+he;de[ge++]=this.data[_e]}var be=(me*this.width+ce)*this.channels+he,ye=de.sort(E.asc)[se];oe.data[be]=ye}}if(this.alpha&&!ee.includes(this.channels))for(var xe=this.components;xe<this.data.length;xe=xe+this.channels)oe.data[xe]=this.data[xe];return oe.setBorder({size:[ie,ne],algorithm:ae}),oe};var L=I("../../util/channel"),E=I("num-sort"),G=I("../Image"),Z=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(G)},{"../../util/channel":259,"../Image":146,"num-sort":115}],179:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.channels;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),0>=Z)throw new Error("multiply: the value must be greater than 0");if(Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),Z=(0,E.checkNumberArray)(Z),!isNaN(Z))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.min(this.maxValue,this.data[ee+J]*Z>>0)}else{if(this.data.length!==Z.length)throw new Error("multiply: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]*Z[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":259,"../../util/value":268}],180:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},Q=W.kernelX,$=Q===void 0?G.GRADIENT_X:Q,J=W.kernelY,ee=J===void 0?G.GRADIENT_Y:J,te=W.border,ae=te===void 0?"copy":te,ie=W.channels;this.checkProcessable("sobel",{bitDepth:[8,16]});var ne=E.default.call(this,$,{channels:ie,border:ae,bitDepth:32}),oe=E.default.call(this,ee,{channels:ie,border:ae,bitDepth:32});return ne.hypotenuse(oe,{bitDepth:this.bitDepth,channels:ie})};var L=I("../operator/convolution"),E=function(W){return W&&W.__esModule?W:{default:W}}(L),G=I("../../util/kernels")},{"../../util/kernels":265,"../operator/convolution":187}],181:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.channels;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),Q=(0,L.validateArrayOfChannels)(this,{channels:Q}),Z=(0,E.checkNumberArray)(Z),!isNaN(Z))for(var $=0;$<Q.length;$++){var J=Q[$];for(var ee=0;ee<this.data.length;ee+=this.channels)this.data[ee+J]=Math.max(0,this.data[ee+J]-Z>>0)}else{if(this.data.length!==Z.length)throw new Error("substract: the data size is different");for(var te=0;te<Q.length;te++){var ae=Q[te];for(var ie=0;ie<this.data.length;ie+=this.channels)this.data[ie+ae]=Math.max(0,Math.min(this.maxValue,this.data[ie+ae]-Z[ie+ae]>>0))}}return this};var L=I("../../util/channel"),E=I("../../util/value")},{"../../util/channel":259,"../../util/value":268}],182:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getKind=function(Q){return Z[Q]},T.getTheoreticalPixelArraySize=function(Q){var $=Q.channels*Q.size;return 1===Q.bitDepth&&($=Math.ceil($/8)),$},T.createPixelArray=function(Q){var $=Q.channels*Q.size,J=void 0;switch(Q.bitDepth){case 1:J=new Uint8Array(Math.ceil($/8));break;case 8:J=new Uint8ClampedArray($);break;case 16:J=new Uint16Array($);break;case 32:J=new Float32Array($);break;default:throw new Error("Cannot create pixel array for bit depth "+Q.bitDepth);}if(Q.alpha)for(var ee=Q.components;ee<J.length;ee+=Q.channels)J[ee]=Q.maxValue;return J};var L=I("./kindNames"),E=function(Q){if(Q&&Q.__esModule)return Q;var $={};if(null!=Q)for(var J in Q)Object.prototype.hasOwnProperty.call(Q,J)&&($[J]=Q[J]);return $.default=Q,$}(L),G=I("./model/model"),Z={};Z[E.BINARY]={components:1,alpha:0,bitDepth:1,colorModel:G.GREY},Z[E.GREYA]={components:1,alpha:1,bitDepth:8,colorModel:G.GREY},Z[E.GREY]={components:1,alpha:0,bitDepth:8,colorModel:G.GREY},Z[E.RGBA]={components:3,alpha:1,bitDepth:8,colorModel:G.RGB},Z[E.RGB]={components:3,alpha:0,bitDepth:8,colorModel:G.RGB},Z[E.CMYK]={components:4,alpha:0,bitDepth:8,colorModel:G.CMYK},Z[E.CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:G.CMYK}},{"./kindNames":183,"./model/model":186}],183:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BINARY="BINARY",T.GREY="GREY",T.GREYA="GREYA",T.RGB="RGB",T.RGBA="RGBA",T.CMYK="CMYK",T.CMYKA="CMYKA"},{}],184:[function(I,R,T){"use strict";function L(fe){return fe&&fe.__esModule?fe:{default:fe}}function E(fe){var _e=new Uint8Array(fe.length);for(var be=0;be<fe.length;be++)_e[be]=fe.charCodeAt(be);return _e}function G(fe){return(255&fe)<<8|255&fe>>8}function Z(fe,_e,be){function ye(ve,Me){if(!ve)throw new Error(`This kind of image (${xe}) can only be loaded from URL.`);return te(ve,Me)}var xe=(0,ge.default)(fe);if(xe)switch(xe.ext){case"png":return Q(fe);case"jpg":{var ke=(0,de.decode)(fe),we=void 0;return ke.exif&&(we=J(ke.exif)),ye(be,{meta:we})}case"tif":return $(fe);}return ye(be)}function W(fe,_e){var be=fe.slice(0,64).match(pe),ye=void 0;return ye=be?Promise.resolve(E((0,me.default)(fe.slice(be[0].length)))):(0,le.fetchBinary)(fe,_e),ye.then(xe=>{var ke=new Uint8Array(xe);return Z(ke,_e,fe)})}function Q(fe){var _e=new se.PNGDecoder(fe),be=_e.decode(),ye=be.bitDepth,xe=be.data.buffer,ke=void 0;if(8===ye)ke=new Uint8ClampedArray(xe);else if(16===ye){ke=new Uint16Array(xe);for(var we=0;we<ke.length;we++)ke[we]=G(ke[we])}var ve=be.colourType,Me=void 0,je=0;switch(ve){case 0:Me=1;break;case 2:Me=3;break;case 4:Me=1,je=1;break;case 6:Me=3,je=1;break;default:throw new Error(`Unexpected colourType: ${ve}`);}return new ie.default(be.width,be.height,ke,{components:Me,alpha:je,bitDepth:ye})}function $(fe){var _e=(0,ue.decode)(fe);return 1===_e.length?ee(_e[0]):new oe.default(_e.map(ee))}function J(fe){var _e={tiff:fe};return fe.exif&&(_e.exif=fe.exif),fe.gps&&(_e.gps=fe.gps),_e}function ee(fe){return new ie.default(fe.width,fe.height,fe.data,{components:1,alpha:0,colorModel:null,bitDepth:fe.bitsPerSample.length?fe.bitsPerSample[0]:fe.bitsPerSample,meta:J(fe)})}function te(fe,_e){return _e=_e||{},new Promise(function(be,ye){var xe=new le.DOMImage;(0,le.isDifferentOrigin)(fe)&&(xe.crossOrigin="Anonymous"),xe.onload=function(){var ke=xe.width,we=xe.height,ve=new le.Canvas(ke,we),Me=ve.getContext("2d");Me.drawImage(xe,0,0,ke,we);var je=Me.getImageData(0,0,ke,we).data;be(new ie.default(ke,we,je,_e))},xe.onerror=function(){ye(new Error("Could not load "+fe))},xe.src=fe})}Object.defineProperty(T,"__esModule",{value:!0}),T.loadImage=function(_e,be){if("string"==typeof _e)return W(_e,be);if(_e instanceof ArrayBuffer)return Promise.resolve(Z(new Uint8Array(_e),be));if(_e.buffer)return Promise.resolve(Z(_e,be));throw new Error("argument to \"load\" must be a string or buffer.")};var ae=I("./Image"),ie=L(ae),ne=I("../stack/Stack"),oe=L(ne),le=I("./environment"),se=I("fast-png"),de=I("fast-jpeg"),ue=I("tiff"),he=I("atob-lite"),me=L(he),ce=I("image-type"),ge=L(ce),pe=/^data:[a-z]+\/([a-z]+);base64,/},{"../stack/Stack":250,"./Image":146,"./environment":160,"atob-lite":5,"fast-jpeg":37,"fast-png":39,"image-type":46,tiff:138}],185:[function(I,R,T){"use strict";function L(J){Q||(Q=new G.default(1,1));var ee=W.get(J);return ee||(ee=new $(J),W.set(J,ee)),ee}Object.defineProperty(T,"__esModule",{value:!0}),T.canWrite=function(ee){return"node"===Z.env&&"image/png"!==ee?!1:L(ee).canWrite()},T.getType=function(ee){return ee.includes("/")||(ee="image/"+ee),ee};var E=I("./Image"),G=function(ee){return ee&&ee.__esModule?ee:{default:ee}}(E),Z=I("./environment"),W=new Map,Q=void 0;class ${constructor(J){this.type=J,this._canWrite=null}canWrite(){return null===this._canWrite&&(this._canWrite=Q.toDataURL(this.type).startsWith("data:"+this.type)),this._canWrite}}},{"./Image":146,"./environment":160}],186:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.RGB="RGB",T.HSL="HSL",T.HSV="HSV",T.CMYK="CMYK",T.GREY="GREY"},{}],187:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($){var J=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},ee=J.channels,te=J.bitDepth,ae=J.normalize,ie=void 0!==ae&&ae,ne=J.divisor,oe=void 0===ne?1:ne,le=J.border,se=void 0===le?"copy":le,de=J.algorithm,ue=void 0===de?"auto":de,he=E.default.createFrom(this,{bitDepth:te});ee=(0,G.validateArrayOfChannels)(this,ee,!0);var me=(0,Z.validateKernel)($);$=me.kernel,"auto"===ue&&(9<$.length||9<$[0].length?ue="fft":ue="direct"),(4096<this.width||4096<this.height)&&(ue="direct");var ce=Math.floor($.length/2),ge=Math.floor($[0].length/2),pe=he.isClamped,fe=Array(this.height*this.width),_e=void 0,be=void 0,ye=void 0,xe=void 0,ke=void 0,we=void 0;for(xe=0;xe<ee.length;xe++){for(ke=ee[xe],ye=0;ye<this.height;ye++)for(be=0;be<this.width;be++)_e=ye*this.width+be,fe[_e]=this.data[_e*this.channels+ke];for(we="direct"===ue?W.direct(fe,$,{rows:this.height,cols:this.width,normalize:ie,divisor:oe}):W.fft(fe,$,{rows:this.height,cols:this.width,normalize:ie,divisor:oe}),ye=0;ye<this.height;ye++)for(be=0;be<this.width;be++)_e=ye*this.width+be,he.data[_e*this.channels+ke]=pe?Math.min(Math.max(we[_e],0),he.maxValue):we[_e]}if(this.alpha&&!ee.includes(this.channels))for(be=this.components;be<this.data.length;be=be+this.channels)he.data[be]=this.data[be];return"periodic"!==se&&he.setBorder({size:[ge,ce],algorithm:se}),he};var L=I("../Image"),E=function($){return $&&$.__esModule?$:{default:$}}(L),G=I("../../util/channel"),Z=I("../../util/kernel"),W=I("ml-matrix-convolution")},{"../../util/channel":259,"../../util/kernel":264,"../Image":146,"ml-matrix-convolution":78}],188:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return G=Object.assign({},G),G.algorithm="fft",this.convolution(E,G)}},{}],189:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.position;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!Q&&(Q=Z.getRelativePosition(this),!Q))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(1<this.bitDepth){var $=E.default.createFrom(this,{width:Z.width,height:Z.height,alpha:1,position:Q,parent:this});for(var J=0;J<Z.width;J++)for(var ee=0;ee<Z.height;ee++){for(var te=0;te<this.channels;te++){var ae=this.getValueXY(J+Q[0],ee+Q[1],te);$.setValueXY(J,ee,te,ae)}Z.getBitXY(J,ee)||$.setValueXY(J,ee,this.components,0)}return $}var ie=E.default.createFrom(this,{width:Z.width,height:Z.height,position:Q,parent:this});for(var ne=0;ne<Z.height;ne++)for(var oe=0;oe<Z.width;oe++)Z.getBitXY(oe,ne)&&this.getBitXY(oe+Q[0],ne+Q[1])&&ie.setBitXY(oe,ne);return ie};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Image":146}],190:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z,W){var Q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},$=Q.color,J=void 0===$?"blue":$,ee=Q.colors,te=Q.font,ae=void 0===te?"12px Helvetica":te,ie=Q.rotate,ne=void 0===ie?0:ie;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:L.RGB}),!Array.isArray(Z))throw Error("paintLabels: labels must be an array");if(!Array.isArray(W))throw Error("paintLabels: positions must be an array");if(J&&!Array.isArray(J)&&(J=(0,E.css2array)(J)),ee=ee?ee.map(function(he){return Array.isArray(he)?he:(0,E.css2array)(he)}):[J],Z.length!==W.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(ae)||(ae=[ae]),Array.isArray(ne)||(ne=[ne]);var oe=this.getCanvas({originalData:!0}),le=oe.getContext("2d");for(var se=0;se<Z.length;se++){le.save();var de=ee[se%ee.length];le.fillStyle=`rgba(${de[0]},${de[1]},${de[2]},${de[3]/this.maxValue})`,le.font=ae[se%ae.length];var ue=W[se];le.translate(ue[0],ue[1]),le.rotate(ne[se%ne.length]/180*Math.PI),le.fillText(Z[se],0,0),le.restore()}return this.setData(le.getImageData(0,0,this.width,this.height).data),this};var L=I("../model/model"),E=I("../../util/color")},{"../../util/color":260,"../model/model":186}],191:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},Q=W.color,$=Q===void 0?"red":Q,J=W.colors,ee=W.alpha,te=ee===void 0?255:ee,ae=W.randomColors,ie=ae!==void 0&&ae,ne=W.distinctColors,oe=ne!==void 0&&ne,le=W.labels,se=le===void 0?[]:le,de=W.labelsPosition,ue=de===void 0?[]:de,he=W.labelColor,me=he===void 0?"blue":he,ce=W.labelFont,ge=ce===void 0?"12px Helvetica":ce;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:L.RGB}),$&&!Array.isArray($)&&($=(0,E.css2array)($)),J&&(J=J.map(function(je){return Array.isArray(je)?je:(0,E.css2array)(je)})),Array.isArray(Z)||(Z=[Z]),oe&&(J=(0,E.getDistinctColors)(Z.length));for(var pe=0;pe<Z.length;pe++){var fe=Z[pe];J?$=J[pe%J.length]:ie&&($=(0,E.getRandomColor)());for(var _e=0;_e<fe.width;_e++)for(var be=0;be<fe.height;be++)if(fe.getBitXY(_e,be))for(var ye=0;ye<Math.min(this.components,$.length);ye++)if(255===te)this.setValueXY(_e+fe.position[0],be+fe.position[1],ye,$[ye]);else{var xe=this.getValueXY(_e+fe.position[0],be+fe.position[1],ye);xe=Math.round((xe*(255-te)+$[ye]*te)/255),this.setValueXY(_e+fe.position[0],be+fe.position[1],ye,xe)}}if(Array.isArray(se)&&0<se.length){var ke=this.getCanvas({originalData:!0}),we=ke.getContext("2d");we.fillStyle=me,we.font=ge;for(var ve=0;ve<Math.min(Z.length,se.length);ve++){var Me=ue[ve]?ue[ve]:Z[ve].position;we.fillText(se[ve],Me[0],Me[1])}this.setData(we.getImageData(0,0,this.width,this.height).data)}return this};var L=I("../model/model"),E=I("../../util/color")},{"../../util/color":260,"../model/model":186}],192:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.color,J=$===void 0?[this.maxValue,0,0]:$,ee=Q.shape;this.checkProcessable("paintPoints",{components:3,bitDepth:[8,16],colorModel:L.RGB});var te=new G.default(ee).getPoints(),ae=Math.min(this.channels,J.length);for(var ie=0;ie<W.length;ie++){var ne=W[ie][0],oe=W[ie][1];for(var le=0;le<te.length;le++){var se=te[le][0],de=te[le][1];if(0<=ne+se&&0<=oe+de&&ne+se<this.width&&oe+de<this.height){var ue=(ne+se+(oe+de)*this.width)*this.channels;for(var he=0;he<ae;he++)this.data[ue+he]=J[he]}}}return this};var L=I("../model/model"),E=I("../../util/shape"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../../util/shape":267,"../model/model":186}],193:[function(I,R,T){"use strict";function L(le){return le&&le.__esModule?le:{default:le}}function E(le){var se=le.map,de=se.data,ue=new Set,he=new Map,me=new Set,ce=[1,0,-1,0],ge=[0,1,0,-1];for(var pe=le.minX;pe<=le.maxX;pe++)for(var fe=le.minY;fe<=le.maxY;fe++){var _e=pe+fe*se.width;if(de[_e]===le.id)for(var be=0;4>be;be++){var ye=pe+ce[be],xe=fe+ge[be];if(0<=ye&&0<=xe&&ye<se.width&&xe<se.height){var ke=ye+xe*se.width;if(de[ke]!==le.id&&!me.has(ke)){me.add(ke),ue.add(de[ke]);var we=he.get(de[ke]);we?he.set(de[ke],++we):he.set(de[ke],1)}}}}var ve=Array.from(ue),Me=ve.map(function(je){return he.get(je)});return{ids:ve,lengths:Me}}function G(le){var se=new Set,de=le.map,ue=de.data;for(var he of[0,le.height-1])for(var me=0;me<le.width;me++){var ce=(he+le.minY)*de.width+me+le.minX;if(0<me-le.minX&&ue[ce]===le.id&&ue[ce-1]!==le.id){var ge=ue[ce-1];se.add(ge)}if(1<de.width-me-le.minX&&ue[ce]===le.id&&ue[ce+1]!==le.id){var pe=ue[ce+1];se.add(pe)}}for(var fe of[0,le.width-1])for(var _e=0;_e<le.height;_e++){var be=(_e+le.minY)*de.width+fe+le.minX;if(0<_e-le.minY&&ue[be]===le.id&&ue[be-de.width]!==le.id){var ye=ue[be-de.width];se.add(ye)}if(1<de.height-_e-le.minY&&ue[be]===le.id&&ue[be+de.width]!==le.id){var xe=ue[be+de.width];se.add(xe)}}return Array.from(se)}function Z(le){var se=0,de=le.map,ue=de.data,he=[0];1<le.height&&(he[1]=le.height-1);for(var me of he)for(var ce=1;ce<le.width-1;ce++){var ge=(me+le.minY)*de.width+ce+le.minX;ue[ge]===le.id&&se++}var pe=[0];1<le.width&&(pe[1]=le.width-1);for(var fe of pe)for(var _e=0;_e<le.height;_e++){var be=(_e+le.minY)*de.width+fe+le.minX;ue[be]===le.id&&se++}return se}function W(le){var se=0,de=le.map,ue=de.data;for(var he=1;he<le.width-1;he++)for(var me=1;me<le.height-1;me++){var ce=(me+le.minY)*de.width+he+le.minX;ue[ce]===le.id&&(ue[ce-1]!==le.id||ue[ce+1]!==le.id||ue[ce-de.width]!==le.id||ue[ce+de.width]!==le.id)&&se++}return se+le.box}function Q(le){var se=0,de=le.map,ue=de.data;for(var he=1;he<le.width-1;he++)for(var me=1;me<le.height-1;me++){var ce=(me+le.minY)*de.width+he+le.minX;ue[ce]===le.id&&(le.externalIDs.includes(ue[ce-1])||le.externalIDs.includes(ue[ce+1])||le.externalIDs.includes(ue[ce-de.width])||le.externalIDs.includes(ue[ce+de.width]))&&se++}return se+le.box}function $(le){var se=[le.id],de=le.map,ue=de.data;if(2<le.height)for(var he=0;he<le.width;he++){var me=le.minY*de.width+he+le.minX;if(se.includes(ue[me])){var ce=ue[me+de.width];se.includes(ce)||le.boxIDs.includes(ce)||se.push(ce)}}var ge=[,,,,];for(var pe=1;pe<le.width-1;pe++)for(var fe=1;fe<le.height-1;fe++){var _e=(fe+le.minY)*de.width+pe+le.minX;if(se.includes(ue[_e])){ge[0]=ue[_e-1],ge[1]=ue[_e+1],ge[2]=ue[_e-de.width],ge[3]=ue[_e+de.width];for(var be=0;4>be;be++){var ye=ge[be];se.includes(ye)||le.boxIDs.includes(ye)||se.push(ye)}}}return se}Object.defineProperty(T,"__esModule",{value:!0});var J=I("../Image"),ee=L(J),te=I("../kindNames"),ae=function(se){if(se&&se.__esModule)return se;var de={};if(null!=se)for(var ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&(de[ue]=se[ue]);return de.default=se,de}(te),ie=I("../../util/shape"),ne=L(ie);class oe{constructor(le,se){this.map=le,this.id=se,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(){var le=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},se=le.scale,de=void 0===se?1:se,ue=le.kind,he=void 0===ue?"":ue,me=void 0;return me="contour"===he?this.contourMask:"box"===he?this.boxMask:"filled"===he?this.filledMask:"center"===he?this.centerMask:this.mask,1>de&&(me=me.resizeBinary(de),me.parent=this.mask.parent,me.position[0]+=this.minX,me.position[1]+=this.minY),me}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center?this.computed.center:this.computed.center=[this.width/2>>0,this.height/2>>0]}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){var le=this.borderIDs,se=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];var de=this.internalIDs;for(var ue=0;ue<le.length;ue++)de.includes(le[ue])||(this.computed.externalIDs.push(le[ue]),this.computed.externalLengths.push(se[ue]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){var le=E(this);this.computed.borderIDs=le.ids,this.computed.borderLengths=le.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs?this.computed.boxIDs:this.computed.boxIDs=G(this)}get internalIDs(){return this.computed.internalIDs?this.computed.internalIDs:this.computed.internalIDs=$(this)}get box(){return this.computed.box?this.computed.box:this.computed.box=Z(this)}get external(){return this.computed.external?this.computed.external:this.computed.external=Q(this)}get border(){return this.computed.border?this.computed.border:this.computed.border=W(this)}get contourMask(){if(this.computed.contourMask)return this.computed.contourMask;var le=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)for(var de=0;de<this.height;de++)this.map.data[se+this.minX+(de+this.minY)*this.map.width]===this.id&&(0<se&&se<this.width-1&&0<de&&de<this.height-1?(this.map.data[se-1+this.minX+(de+this.minY)*this.map.width]!==this.id||this.map.data[se+1+this.minX+(de+this.minY)*this.map.width]!==this.id||this.map.data[se+this.minX+(de-1+this.minY)*this.map.width]!==this.id||this.map.data[se+this.minX+(de+1+this.minY)*this.map.width]!==this.id)&&le.setBitXY(se,de):le.setBitXY(se,de));return this.computed.contour=le}get boxMask(){if(this.computed.boxMask)return this.computed.boxMask;var le=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)le.setBitXY(se,0),le.setBitXY(se,this.height-1);for(var de=0;de<this.height;de++)le.setBitXY(0,de),le.setBitXY(this.width-1,de);return this.computed.boxMask=le}get mask(){if(this.computed.mask)return this.computed.mask;var le=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)for(var de=0;de<this.height;de++)this.map.data[se+this.minX+(de+this.minY)*this.map.width]===this.id&&le.setBitXY(se,de);return this.computed.mask=le}get filledMask(){if(this.computed.filledMask)return this.computed.filledMask;var le=new ee.default(this.width,this.height,{kind:ae.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var se=0;se<this.width;se++)for(var de=0;de<this.height;de++){var ue=se+this.minX+(de+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[ue])&&le.setBitXY(se,de)}return this.computed.filledMask=le}get centerMask(){if(this.computed.centerMask)return this.computed.centerMask;var le=new ne.default({kind:"smallCross"}).getMask();return le.parent=this.map.parent,le.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=le}get points(){if(this.computed.points)return this.computed.points;var le=[];for(var se=0;se<this.height;se++)for(var de=0;de<this.width;de++){var ue=(se+this.minY)*this.map.width+de+this.minX;this.map.data[ue]===this.id&&le.push([de,se])}return this.computed.points=le}get maxLengthPoints(){if(this.computed.maxLengthPoints)return this.computed.maxLengthPoints;var le=0,se=void 0,de=this.points;for(var ue=0;ue<de.length;ue++)for(var he=ue+1;he<de.length;he++){var me=Math.pow(de[ue][0]-de[he][0],2)+Math.pow(de[ue][1]-de[he][1],2);me>=le&&(le=me,se=[de[ue],de[he]])}return this.computed.maxLengthPoints=se}get maxLength(){if(this.computed.maxLength)return this.computed.maxLength;var le=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));return this.computed.maxLength=le}get angle(){if(this.computed.angle)return this.computed.angle;var le=this.maxLengthPoints,se=180*-Math.atan2(le[0][1]-le[1][1],le[0][0]-le[1][0])/Math.PI;return this.computed.angle=se}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface}}}T.default=oe},{"../../util/shape":267,"../Image":146,"../kindNames":183}],194:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=I("./Roi"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L);T.default=class{constructor(Z,W){this.roiMap=Z,this.options=W,this.roi=this.createRoi()}createRoi(){var Z=this.roiMap.data,W={};this.roiMap.positive=0,this.roiMap.negative=0;for(var Q=0;Q<Z.length;Q++)Z[Q]&&!W[Z[Q]]&&(W[Z[Q]]=!0,0<Z[Q]?this.roiMap.positive++:this.roiMap.negative++);var $={};for(var J in W)$[J]=new E.default(this.roiMap,1*J);var ee=this.roiMap.width,te=this.roiMap.height;for(var ae=0;ae<ee;ae++)for(var ie=0;ie<te;ie++){var ne=ie*ee+ae;if(0!==Z[ne]){var oe=Z[ne],le=$[oe];ae<le.minX&&(le.minX=ae),ae>le.maxX&&(le.maxX=ae),ie<le.minY&&(le.minY=ie),ie>le.maxY&&(le.maxY=ie),le.meanX+=ae,le.meanY+=ie,le.surface++}}var se=[];for(var de in W)$[de].meanX/=$[de].surface,$[de].meanY/=$[de].surface,se.push($[de]);return se}}},{"./Roi":193}],195:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});class L{constructor(E,G){this.parent=E,this.width=E.width,this.height=E.height,this.data=G,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}}T.default=L},{}],196:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){function W(de,ue){var he=0,me=0,ce=Z.getBitXY(de,ue),ge=ce?++te:--ae;for(ne[0]=de,oe[0]=ue;he<=me;){var pe=ne[he&ie],fe=oe[he&ie];if(ee[fe*Z.width+pe]=ge,0<pe&&0===ee[fe*Z.width+pe-1]&&Z.getBitXY(pe-1,fe)===ce&&(me++,ne[me&ie]=pe-1,oe[me&ie]=fe,ee[fe*Z.width+pe-1]=-32768),0<fe&&0===ee[(fe-1)*Z.width+pe]&&Z.getBitXY(pe,fe-1)===ce&&(me++,ne[me&ie]=pe,oe[me&ie]=fe-1,ee[(fe-1)*Z.width+pe]=-32768),pe<Z.width-1&&0===ee[fe*Z.width+pe+1]&&Z.getBitXY(pe+1,fe)===ce&&(me++,ne[me&ie]=pe+1,oe[me&ie]=fe,ee[fe*Z.width+pe+1]=-32768),fe<Z.height-1&&0===ee[(fe+1)*Z.width+pe]&&Z.getBitXY(pe,fe+1)===ce&&(me++,ne[me&ie]=pe,oe[me&ie]=fe+1,ee[(fe+1)*Z.width+pe]=-32768),J&&(0<pe&&0<fe&&0===ee[(fe-1)*Z.width+pe-1]&&Z.getBitXY(pe-1,fe-1)===ce&&(me++,ne[me&ie]=pe-1,oe[me&ie]=fe-1,ee[(fe-1)*Z.width+pe-1]=-32768),pe<Z.width-1&&0<fe&&0===ee[(fe-1)*Z.width+pe+1]&&Z.getBitXY(pe+1,fe-1)===ce&&(me++,ne[me&ie]=pe+1,oe[me&ie]=fe-1,ee[(fe-1)*Z.width+pe+1]=-32768),0<pe&&fe<Z.height-1&&0===ee[(fe+1)*Z.width+pe-1]&&Z.getBitXY(pe-1,fe+1)===ce&&(me++,ne[me&ie]=pe-1,oe[me&ie]=fe+1,ee[(fe+1)*Z.width+pe-1]=-32768),pe<Z.width-1&&fe<Z.height-1&&0===ee[(fe+1)*Z.width+pe+1]&&Z.getBitXY(pe+1,fe+1)===ce&&(me++,ne[me&ie]=pe+1,oe[me&ie]=fe+1,ee[(fe+1)*Z.width+pe+1]=-32768)),he++,me-he>ie)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}var Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.allowCorners,J=$!==void 0&&$,ee=new Int16Array(Z.size),te=0,ae=0,ie=65535,ne=new Uint16Array(ie+1),oe=new Uint16Array(ie+1);for(var le=0;le<Z.width;le++)for(var se=0;se<Z.height;se++)0===ee[se*Z.width+le]&&W(le,se);return new E.default(Z,ee)};var L=I("../RoiMap"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../RoiMap":195}],197:[function(I,R,T){"use strict";function L(ie){return ie&&ie.__esModule?ie:{default:ie}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(ne){var oe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},le=oe.allowCorners,se=le!==void 0&&le,de=4;se&&(de=8);var ue=void 0,he=void 0,me=void 0;if(8==de)ue=ee,he=te,me=ae;else if(4==de)ue=Q,he=$,me=J;else throw new RangeError("unsupported neighbours count: "+de);var ce=ne.size,ge=ne.width,pe=ne.height,fe=Array(ce),_e=new Int16Array(ce),be=new G.default,ye=1;for(var xe=0;xe<pe;xe++)for(var ke=0;ke<ge;ke++){var we=ke+xe*ge;if(ne.getBit(we)){var ve=null;for(var Me=0;Me<me.length;Me++){var je=ke+ue[Me],Pe=xe+he[Me];if(0<=je&&0<=Pe&&je<ge&&Pe<pe){var De=fe[je+Pe*ge];De?(me[Me]=De,(!ve||me[Me].value<ve.value)&&(ve=me[Me])):me[Me]=null}}if(!ve)fe[we]=be.add(ye++);else{fe[we]=ve;for(var Ie=0;Ie<me.length;Ie++)me[Ie]&&me[Ie]!==ve&&be.union(ve,me[Ie])}}}for(var Se=0;Se<pe;Se++)for(var Ce=0;Ce<ge;Ce++){var Ae=Ce+Se*ge;ne.getBit(Ae)&&(_e[Ae]=be.find(fe[Ae]).value)}return new W.default(ne,_e)};var E=I("ml-disjoint-set"),G=L(E),Z=I("../RoiMap"),W=L(Z),Q=[-1,0],$=[0,-1],J=[null,null],ee=[-1,-1,0,1],te=[0,-1,-1,-1],ae=[null,null,null,null]},{"../RoiMap":195,"ml-disjoint-set":62}],198:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){function Z(Me,je){var Pe=_e;xe=0,ke=1,be[0]=Me,ye[0]=je;for(var De=!0;xe<ke;){var Ie=be[xe&ce],Se=ye[xe&ce];De&=W(Ie,Se,oe),xe++}if(!De){for(var Ce=0;Ce<ke;Ce++){var Ae=be[Ce&ce],Re=ye[Ce&ce],Be=Re*ne.width+Ae;ue[Be]=0}_e=Pe}return De}function W(Me,je,Pe){var De=ue[je*ne.width+Me],Ie=ne.data[je*ne.width+Me];for(var Se=je-1;Se<=je+1;Se++)for(var Ce=Me-1;Ce<=Me+1;Ce++){var Ae=Se*ne.width+Ce;if(0===he[Ae])switch(he[Ae]=1,me[Ae]=ne.data[Ae]-Ie,Pe){case oe:if(0===me[Ae]){if(0===Ce||0===Se||Ce===ne.width-1||Se===ne.height-1)return!1;ue[Ae]=De,be[ke&ce]=Ce,ye[ke&ce]=Se,ke++}else{if(0<me[Ae])return!1;te||(ue[Ae]=De,ge[_e&ce]=Ce,pe[_e&ce]=Se,_e++)}break;case le:0>=me[Ae]&&(ue[Ae]=De,ge[_e&ce]=Ce,pe[_e&ce]=Se,_e++);break;default:throw new Error("unreachable");}}return!0}var Q=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},$=Q.allowCorner,J=!($!==void 0)||$,ee=Q.onlyTop,te=ee!==void 0&&ee,ae=Q.invert,ie=ae!==void 0&&ae,ne=this;ne.checkProcessable("fromMaxima",{components:[1]});var oe=1,le=2,se=0,de=0,ue=new Int16Array(ne.size),he=new Int8Array(ne.size),me=new Float32Array(ne.size),ce=1048575,ge=new Uint16Array(ce+1),pe=new Uint16Array(ce+1),fe=0,_e=0,be=new Uint16Array(ce+1),ye=new Uint16Array(ce+1),xe=0,ke=0;for(function(je){var Pe=je.maxima,De=void 0===Pe||Pe;for(var Ie=1;Ie<ne.height-1;Ie++)for(var Se=1;Se<ne.width-1;Se++){var Ce=Se+Ie*ne.width;if(0===he[Ce]){var Ae=De?ne.data[Ce]:-ne.data[Se+Ie*ne.width];if(ne.data[Ie*ne.width+Se-1]>Ae)continue;if(ne.data[Ie*ne.width+Se+1]>Ae)continue;if(ne.data[(Ie-1)*ne.width+Se]>Ae)continue;if(ne.data[(Ie+1)*ne.width+Se]>Ae)continue;if(J){if(ne.data[(Ie-1)*ne.width+Se-1]>Ae)continue;if(ne.data[(Ie-1)*ne.width+Se+1]>Ae)continue;if(ne.data[(Ie+1)*ne.width+Se-1]>Ae)continue;if(ne.data[(Ie+1)*ne.width+Se+1]>Ae)continue}ue[Ce]=De?++se:--de;var Re=Z(Se,Ie,oe);Re||(De?--se:++de)}}}(ne,{maxima:!ie});fe<_e;){var we=ge[fe&ce],ve=pe[fe&ce];W(we,ve,le),fe++}return new E.default(ne,ue)};var L=I("../RoiMap"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../RoiMap":195}],199:[function(I,R,T){"use strict";function L(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function($){var J=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},ee=new W.default(J),te=new Int16Array(this.size),ae=0,ie=ee.getPoints();for(var ne=0;ne<$.length;ne++){ae++;var oe=$[ne][0],le=$[ne][1];for(var se=0;se<ie.length;se++){var de=ie[se][0],ue=ie[se][1];0<=oe+de&&0<=le+ue&&oe+de<this.width&&le+ue<this.height&&(te[oe+de+(le+ue)*this.width]=ae)}}return new G.default(this,te)};var E=I("../RoiMap"),G=L(E),Z=I("./../../../util/shape"),W=L(Z)},{"../RoiMap":195,"./../../../util/shape":267}],200:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var J=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},ee=J.points,te=J.mask,ae=J.image,ie=J.fillMaxValue,ne=ie===void 0?this.maxValue:ie,oe=J.invert,le=oe!==void 0&&oe,se=ae||this;se.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),le=!le,ee||(ee=se.getLocalMaxima({invert:le,mask:te}));var de=le?0:1,ue=new Int16Array(se.size),he=se.width,me=se.height,ce=new W.default({comparator:(Me,je)=>Me[2]-je[2],strategy:W.default.BinaryHeapStrategy});for(var ge=0;ge<ee.length;ge++){var pe=ee[ge][0]+ee[ge][1]*he;ue[pe]=ge+1;var fe=se.data[pe];(le&&fe<=ne||!le&&fe>=ne)&&ce.queue([ee[ge][0],ee[ge][1],fe])}for(;0<ce.length;){var _e=ce.dequeue(),be=_e[0]+_e[1]*he;for(var ye=0;4>ye;ye++){var xe=_e[0]+Q.dxs[ye],ke=_e[1]+Q.dys[ye];if(0<=xe&&0<=ke&&xe<he&&ke<me){var we=xe+ke*he;if(!te||te.getBit(we)===de){var ve=se.data[we];(le&&ve<=ne||!le&&ve>=ne)&&0===ue[we]&&(ue[we]=ue[be],ce.queue([_e[0]+Q.dxs[ye],_e[1]+Q.dys[ye],ve]))}}}}return new G.default(se,ue)};var E=I("../RoiMap"),G=L(E),Z=I("js-priority-queue"),W=L(Z),Q=I("./../../../util/dxdy.js")},{"../RoiMap":195,"./../../../util/dxdy.js":262,"js-priority-queue":56}],201:[function(I,R,T){"use strict";function L(ce){return ce&&ce.__esModule?ce:{default:ce}}function E(ce,ge,pe,fe,_e){var be={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(var ye=0;ye<pe.length;ye++){var xe=pe[ye],ke=xe[0],we=xe[1],ve=ke+ce+(we+ge)*fe.width,Me=fe.data[ve];(0<Me||0>Me)&&(be.id.includes(Me)?be.surface[be.id.indexOf(Me)]+=1:(be.id.push(Me),be.surface.push(1)))}for(var je=0;je<be.id.length;je++){var Pe=Math.sign(be.id[je]);Pe===_e?be.same+=be.surface[je]:be.opposite+=be.surface[je],be.roiSurfaceCovered[je]=be.surface[je]/pe.length}return be.total=be.opposite+be.same,be}Object.defineProperty(T,"__esModule",{value:!0});var G=I("./creator/fromMask"),Z=L(G),W=I("./creator/fromMaskConnectedComponentLabelingAlgorithm"),Q=L(W),$=I("./creator/fromMaxima"),J=L($),ee=I("./creator/fromWaterShed"),te=L(ee),ae=I("./creator/fromPoints"),ie=L(ae),ne=I("extend"),oe=L(ne),le=I("../Image"),se=L(le),de=I("./RoiMap"),ue=L(de),he=I("./RoiLayer"),me=L(he);T.default=class{constructor(ge){var pe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this._image=ge,this._options=pe,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(){var ge=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},pe=(0,oe.default)({},this._options,ge),fe=J.default.call(this._image,ge);this._layers[pe.label]=new me.default(fe,pe)}fromPoints(ge){var pe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},fe=(0,oe.default)({},this._options,pe),_e=ie.default.call(this._image,ge,pe);return this._layers[fe.label]=new me.default(_e,fe),this}putMap(ge){var pe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},fe=new ue.default(this._image,ge),_e=(0,oe.default)({},this._options,pe);return this._layers[_e.label]=new me.default(fe,_e),this}fromWaterShed(){var ge=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},pe=(0,oe.default)({},this._options,ge),fe=te.default.call(this._image,ge);this._layers[pe.label]=new me.default(fe,pe)}fromMask(ge){var pe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},fe=(0,oe.default)({},this._options,pe),_e=Z.default.call(this._image,ge,pe);return this._layers[fe.label]=new me.default(_e,fe),this}fromMaskConnectedComponentLabelingAlgorithm(ge){var pe=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},fe=(0,oe.default)({},this._options,pe),_e=Q.default.call(this._image,ge,pe);return this._layers[fe.label]=new me.default(_e,fe),this}getMap(){var ge=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},pe=(0,oe.default)({},this._options,ge);return this._assertLayerWithLabel(pe.label),this._layers[pe.label].roiMap}getRoiIds(){var ge=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},pe=this.getRois(ge);if(pe){var fe=Array(pe.length);for(var _e=0;_e<pe.length;_e++)fe[_e]=pe[_e].id;return fe}throw new Error("ROIs not found")}getRois(){var ge=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},pe=ge.label,fe=void 0===pe?this._options.label:pe,_e=ge.positive,be=void 0===_e||_e,ye=ge.negative,xe=void 0===ye||ye,ke=ge.minSurface,we=void 0===ke?0:ke,ve=ge.maxSurface,Me=void 0===ve?Number.POSITIVE_INFINITY:ve,je=ge.minWidth,Pe=void 0===je?0:je,De=ge.maxWidth,Ie=void 0===De?Number.POSITIVE_INFINITY:De,Se=ge.minHeight,Ce=void 0===Se?0:Se,Ae=ge.maxHeight,Re=void 0===Ae?Number.POSITIVE_INFINITY:Ae;if(!this._layers[fe])throw new Error("getRoi: This Roi layer ("+fe+") does not exists.");var Be=this._layers[fe].roi,ze=Array(Be.length),Te=0;for(var Le=0;Le<Be.length;Le++){var Ee=Be[Le];(0>Ee.id&&xe||0<Ee.id&&be)&&Ee.surface>=we&&Ee.surface<=Me&&Ee.width>=Pe&&Ee.width<=Ie&&Ee.height>=Ce&&Ee.height<=Re&&(ze[Te++]=Ee)}return ze.length=Te,ze}getMasks(){var ge=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},pe=this.getRois(ge),fe=Array(pe.length);for(var _e=0;_e<pe.length;_e++)fe[_e]=pe[_e].getMask(ge);return fe}getData(){var ge=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},pe=(0,oe.default)({},this._options,ge);return this._assertLayerWithLabel(pe.label),this._layers[pe.label].roiMap.data}paint(){var ge=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},pe=ge.labelProperty;this._painted||(this._painted=this._image.rgba8());var fe=this.getMasks(ge);if(pe){var _e=this.getRois(ge);ge.labels=_e.map(be=>be[pe]),ge.labelsPosition=_e.map(be=>[be.meanX,be.meanY])}return this._painted.paintMasks(fe,ge),this._painted}getMask(){var ge=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},pe=new se.default(this._image.width,this._image.height,{kind:"BINARY"}),fe=this.getMasks(ge);for(var _e=0;_e<fe.length;_e++){var be=fe[_e];for(var ye=0;ye<be.width;ye++)for(var xe=0;xe<be.height;xe++)be.getBitXY(ye,xe)&&pe.setBitXY(ye+be.position[0],xe+be.position[1])}return pe}resetPainted(){var ge=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},pe=ge.image;this._painted=pe?this.image.rgba8():this._image.rgba8()}mergeRoi(){var ge=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},pe=(0,oe.default)({},this._options,ge),fe=ge.algorithm,_e=void 0===fe?"commonBorder":fe,be=ge.minCommonBorderLength,ye=void 0===be?5:be,xe=this.getRois(pe),ke=new Set;switch(_e.toLowerCase()){case"commonborder":for(var we=0;we<xe.length;we++)for(var ve=0;ve<xe[we].borderIDs.length;ve++)0!==xe[we].borderIDs[ve]&&xe[we].borderIDs[ve]<xe[we].id&&xe[we].borderLengths[ve]*ye>=xe[we].border&&ke.add([xe[we].id,xe[we].borderIDs[ve]]);break;default:throw new Error(`Unexpected algorithm: ${_e}`);}var Me=this.getMap(pe).data;for(var je=0;je<Me.length;je++)if(0!==Me[je])for(var Pe of ke)Me[je]===Pe[0]&&(Me[je]=Pe[1]);return this.putMap(Me,pe),this}findCorrespondingRoi(ge){var pe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},fe=this.getRois(pe),_e=[];for(var be=0;be<fe.length;be++){var ye=fe[be],xe=ye.minX,ke=ye.minY,we=ye.points,ve=Math.sign(ye.id),Me=E(xe,ke,we,ge,ve);_e.push(Me)}return _e}_assertLayerWithLabel(ge){if(!this._layers[ge])throw new Error(`no layer with label ${ge}`)}}},{"../Image":146,"./RoiLayer":194,"./RoiMap":195,"./creator/fromMask":196,"./creator/fromMaskConnectedComponentLabelingAlgorithm":197,"./creator/fromMaxima":198,"./creator/fromPoints":199,"./creator/fromWaterShed":200,extend:35}],202:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});var W=G.default.createFrom(this,{components:4,colorModel:L.CMYK}),Q=0,$=this.data;for(var J=0;J<$.length;J+=this.channels){var ee=$[J],te=$[J+1],ae=$[J+2],ie=Math.min(this.maxValue-ee,this.maxValue-te,this.maxValue-ae),ne=(this.maxValue-ee-ie)/(1-ie/this.maxValue),oe=(this.maxValue-te-ie)/(1-ie/this.maxValue),le=(this.maxValue-ae-ie)/(1-ie/this.maxValue);W.data[Q++]=ne,W.data[Q++]=oe,W.data[Q++]=le,W.data[Q++]=ie,this.alpha&&(W.data[Q++]=$[J+3])}return W};var L=I("../model/model"),E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../Image":146,"../model/model":186}],203:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8;if(this.checkProcessable("colorDepth",{bitDepth:[8,16]}),![8,16].includes(Z))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===Z)return this.clone();var W=E.default.createFrom(this,{bitDepth:Z});if(8===Z)for(var Q=0;Q<this.data.length;Q++)W.data[Q]=this.data[Q]>>8;else for(var $=0;$<this.data.length;$++)W.data[$]=this.data[$]<<8|this.data[$];return W};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Image":146}],204:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},W=Z.x,Q=void 0===W?0:W,$=Z.y,J=void 0===$?0:$,ee=Z.width,te=void 0===ee?this.width-Q:ee,ae=Z.height,ie=void 0===ae?this.height-J:ae;if(Q=Math.round(Q),J=Math.round(J),te=Math.round(te),ie=Math.round(ie),Q>this.width-1||J>this.height-1)throw new RangeError(`crop: origin (x:${Q}, y:${J}) out of range (${this.width-1}; ${this.height-1})`);if(0>=te||0>=ie)throw new RangeError(`crop: width and height (width:${te}; height:${ie}) must be positive numbers`);if(0>Q||0>J)throw new RangeError(`crop: x and y (x:${Q}, y:${J}) must be positive numbers`);if(te>this.width-Q||ie>this.height-J)throw new RangeError(`crop: (x: ${Q}, y:${J}, width:${te}, height:${ie}) size is out of range`);var ne=E.default.createFrom(this,{width:te,height:ie}),oe=te*this.channels,le=J+ie,se=0,de=Q*this.channels;for(var ue=J;ue<le;ue++)for(var he=ue*this.width*this.channels+de,me=he+oe;he<me;he++)ne.data[se++]=this.data[he];return ne};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Image":146}],205:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},$=Q.algorithm,J=$===void 0?"luma709":$,ee=Q.keepAlpha,te=ee!==void 0&&ee,ae=Q.mergeAlpha,ie=!(ae!==void 0)||ae,ne=Q.allowGrey,oe=ne!==void 0&&ne,le={bitDepth:[8,16],alpha:[0,1]};oe||(le.colorModel=[G.RGB],le.components=[3]),this.checkProcessable("grey",le),1===this.components&&(J="red"),te&=this.alpha,ie&=this.alpha,te&&(ie=!1);var se=E.default.createFrom(this,{components:1,alpha:te,colorModel:null}),de=Z.methods[J.toLowerCase()];if(!de)throw new Error("Unsupported grey algorithm: "+J);var ue=0;for(var he=0;he<this.data.length;he+=this.channels)ie?se.data[ue++]=de(this.data,he,this)*this.data[he+this.components]/this.maxValue:(se.data[ue++]=de(this.data,he,this),se.alpha&&(se.data[ue++]=this.data[he+this.components]));return se};var L=I("../Image"),E=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(L),G=I("../model/model"),Z=I("./greyAlgorithms")},{"../Image":146,"../model/model":186,"./greyAlgorithms":206}],206:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.methods={luma709:function(G,Z){return 6966*G[Z]+23436*G[Z+1]+2366*G[Z+2]>>15},luma601:function(G,Z){return 9798*G[Z]+19235*G[Z+1]+3735*G[Z+2]>>15},maximum:function(G,Z){return Math.max(G[Z],G[Z+1],G[Z+2])},minimum:function(G,Z){return Math.min(G[Z],G[Z+1],G[Z+2])},average:function(G,Z){return(G[Z]+G[Z+1]+G[Z+2])/3>>0},minmax:function(G,Z){return(Math.max(G[Z],G[Z+1],G[Z+2])+Math.min(G[Z],G[Z+1],G[Z+2]))/2},red:function(G,Z){return G[Z]},green:function(G,Z){return G[Z+1]},blue:function(G,Z){return G[Z+2]},cyan:function(G,Z,W){var Q=L.black(G,Z,W);return(W.maxValue-G[0]-Q)/(1-Q/W.maxValue)>>0},magenta:function(G,Z,W){var Q=L.black(G,Z,W);return(W.maxValue-G[1]-Q)/(1-Q/W.maxValue)>>0},yellow:function(G,Z,W){var Q=L.black(G,Z,W);return(W.maxValue-G[2]-Q)/(1-Q/W.maxValue)>>0},black:function(G,Z,W){return Math.min(W.maxValue-G[Z],W.maxValue-G[Z+1],W.maxValue-G[Z+2])},hue:function(G,Z,W){var Q=L.min(G,Z),$=L.max(G,Z);if($===Q)return 0;var E=0,J=$-Q;switch($){case G[Z]:E=(G[Z+1]-G[Z+2])/J+(G[Z+1]<G[Z+2]?6:0);break;case G[Z+1]:E=(G[Z+2]-G[Z])/J+2;break;case G[Z+2]:E=(G[Z]-G[Z+1])/J+4;break;default:throw new Error("unreachable");}return E/6*W.maxValue>>0},saturation:function(G,Z,W){var Q=L.min(G,Z),$=L.max(G,Z);return 0===$?0:($-Q)/$*W.maxValue},lightness:function(G,Z){var W=L.min(G,Z),Q=L.max(G,Z);return(Q+W)/2}};Object.defineProperty(L,"luminosity",{enumerable:!1,value:L.lightness}),Object.defineProperty(L,"luminance",{enumerable:!1,value:L.lightness}),Object.defineProperty(L,"min",{enumerable:!1,value:L.minimum}),Object.defineProperty(L,"max",{enumerable:!1,value:L.maximum}),Object.defineProperty(L,"brightness",{enumerable:!1,value:L.maximum}),T.names=Object.keys(L)},{}],207:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});var W=G.default.createFrom(this,{colorModel:L.HSL}),Q=Math.floor(this.maxValue/2),$=0,J=this.data;for(var ee=0;ee<J.length;ee+=this.channels){var te=J[ee],ae=J[ee+1],ie=J[ee+2],ne=Math.max(te,ae,ie),oe=Math.min(te,ae,ie),le=0,se=0,de=(ne+oe)/2;if(ne!==oe){var ue=ne-oe;switch(se=de>Q?ue/(2-ne-oe):ue/(ne+oe),ne){case te:le=(ae-ie)/ue+(ae<ie?6:0);break;case ae:le=(ie-te)/ue+2;break;case ie:le=(te-ae)/ue+4;break;default:throw new Error("unreachable");}le/=6}W.data[$++]=le*this.maxValue,W.data[$++]=se*this.maxValue,W.data[$++]=de,this.alpha&&(W.data[$++]=J[ee+3])}return W};var L=I("../model/model"),E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../Image":146,"../model/model":186}],208:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[L.RGB]});var W=G.default.createFrom(this,{colorModel:L.HSV}),Q=0,$=this.data;for(var J=0;J<$.length;J+=this.channels){var ee=$[J],te=$[J+1],ae=$[J+2],ie=Math.min(ee,te,ae),ne=Math.max(ee,te,ae),oe=ne-ie,le=0,se=0===ne?0:oe/ne;if(ne!==ie){switch(ne){case ee:le=(te-ae)/oe+(te<ae?6:0);break;case te:le=(ae-ee)/oe+2;break;case ae:le=(ee-te)/oe+4;break;default:throw new Error("unreachable");}le/=6}W.data[Q++]=le*this.maxValue,W.data[Q++]=se*this.maxValue,W.data[Q++]=ne,this.alpha&&(W.data[Q++]=$[J+3])}return W};var L=I("../model/model"),E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../Image":146,"../model/model":186}],209:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=0;for(var Z=0;Z<E.length;Z++)if(0!==E[Z]){G=Z;break}var W=E.length-1;for(var Q=E.length-1;Q>=G;Q--)if(0!==E[Q]){W=Q;break}var $=1/(W-G),J=Array(E.length),ee=0,te=0;for(var ae=G;ae<E.length;ae++)ee+=ae*E[ae],te+=E[ae],J[ae]=ee/te;var ie=Array(E.length);ee=te=0;for(var ne=W;0<ne;ne--)ee+=ne*E[ne],te+=E[ne],ie[ne-1]=ee/te;var oe=-1,le=Number.MAX_VALUE;for(var se=0;se<E.length;se++){var de=0,ue=void 0;for(var he=0;he<=se;he++)ue=1/(1+$*Math.abs(he-J[se])),1e-6>ue||0.999999<ue||(de+=E[he]*(-ue*Math.log(ue)-(1-ue)*Math.log(1-ue)));for(var me=se+1;me<E.length;me++)ue=1/(1+$*Math.abs(me-ie[se])),1e-6>ue||0.999999<ue||(de+=E[me]*(-ue*Math.log(ue)-(1-ue)*Math.log(1-ue)));de<le&&(le=de,oe=se)}return oe}},{}],210:[function(I,R,T){"use strict";function L(E){var G=!1,Z=0;for(var W=1;W<E.length-1;W++)if(E[W-1]<E[W]&&E[W+1]<E[W]&&(Z++,2<Z))return!1;return 2==Z&&(G=!0),G}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G){for(var Z=G.slice(),W=0;!L(Z);){var Q=0,$=0,J=Z[0];for(var ee=0;ee<G.length-1;ee++)Q=$,$=J,J=Z[ee+1],Z[ee]=(Q+$+J)/3;if(Z[G.length-1]=($+J)/3,W++,1e4<W)throw new Error("Intermodes Threshold not found after 10000 iterations")}var te=0;for(var ae=1;ae<G.length-1;ae++)Z[ae-1]<Z[ae]&&Z[ae+1]<Z[ae]&&(te+=ae);return Math.floor(te/2)}},{}],211:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=void 0,Z=void 0,W=void 0,Q=void 0,$=0;for(var J=1;J<E.length;J++)if(0<E[J]){$=J+1;break}for(;!0;){G=0,W=0;for(var ee=0;ee<$;ee++)W=W+E[ee],G=G+E[ee]*ee;Q=0,Z=0;for(var te=$+1;te<E.length;te++)Z+=E[te],Q+=E[te]*te;if(0<W&&0<Z&&(G/=W,Q/=Z,$===Math.round((G+Q)/2)))break;if($++,$>E.length-2)throw new Error("Threshold not found")}return $}},{}],212:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=void 0,W=void 0,Q=void 0,$=void 0,J=void 0,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,oe=void 0,le=void 0;oe=0.5,ne=0;for(var se=0;se<E.length;se++)ne+=se*E[se];ne/=G,te=ne;do{ee=te,Z=0|ee+0.5,W=0,$=0;for(var de=0;de<=Z;de++)W+=de*E[de],$+=E[de];ae=0===$?0:W/$,Q=0,J=0;for(var ue=Z+1;ue<E.length;ue++)Q+=ue*E[ue],J+=E[ue];ie=0===J?0:Q/J,le=(ae-ie)/(Math.log(ae)-Math.log(ie)),te=le<-Number.EPSILON?0|le-0.5:0|le+0.5}while(Math.abs(te-ee)>oe);return Z}},{}],213:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},$=Q.algorithm,J=void 0===$?"threshold":$,ee=Q.threshold,te=void 0===ee?0.5:ee,ae=Q.useAlpha,ie=void 0===ae||ae,ne=Q.invert,oe=void 0!==ne&&ne;if(this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),"threshold"===J)te=(0,Z.getThreshold)(te,this.maxValue);else{var le=G.methods[J.toLowerCase()];if(le){var se=this.getHistogram();te=le(se,this.size)}else throw new Error("mask transform unknown algorithm: "+J)}var de=new E.default(this.width,this.height,{kind:"BINARY",parent:this}),ue=0;if(this.alpha&&ie)for(var he=0;he<this.data.length;he+=this.channels){var me=this.data[he]+(this.maxValue-this.data[he])*(this.maxValue-this.data[he+1])/this.maxValue;(oe&&me<=te||!oe&&me>=te)&&de.setBit(ue),ue++}else for(var ce=0;ce<this.data.length;ce+=this.channels)(oe&&this.data[ce]<=te||!oe&&this.data[ce]>=te)&&de.setBit(ue),ue++;return de};var L=I("../../Image"),E=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(L),G=I("./maskAlgorithms"),Z=I("../../../util/converter")},{"../../../util/converter":261,"../../Image":146,"./maskAlgorithms":214}],214:[function(I,R,T){"use strict";function L(je){return je&&je.__esModule?je:{default:je}}Object.defineProperty(T,"__esModule",{value:!0}),T.names=T.methods=void 0;var E=I("./huang"),G=L(E),Z=I("./intermodes"),W=L(Z),Q=I("./isodata"),$=L(Q),J=I("./li"),ee=L(J),te=I("./maxEntropy"),ae=L(te),ie=I("./mean"),ne=L(ie),oe=I("./minError"),le=L(oe),se=I("./minimum"),de=L(se),ue=I("./moments"),he=L(ue),me=I("./otsu"),ce=L(me),ge=I("./percentile"),pe=L(ge),fe=I("./renyiEntropy.js"),_e=L(fe),be=I("./shanbhag"),ye=L(be),xe=I("./triangle"),ke=L(xe),we=I("./yen"),ve=L(we),Me=T.methods={huang:G.default,intermodes:W.default,isodata:$.default,li:ee.default,maxentropy:ae.default,mean:ne.default,minerror:le.default,minimum:de.default,moments:he.default,otsu:ce.default,percentile:pe.default,renyientropy:_e.default,shanbhag:ye.default,triangle:ke.default,yen:ve.default};T.names=["threshold"].concat(Object.keys(Me))},{"./huang":209,"./intermodes":210,"./isodata":211,"./li":212,"./maxEntropy":215,"./mean":216,"./minError":217,"./minimum":218,"./moments":219,"./otsu":220,"./percentile":221,"./renyiEntropy.js":222,"./shanbhag":223,"./triangle":224,"./yen":225}],215:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=Array(E.length);for(var W=0;W<E.length;W++)Z[W]=E[W]/G;var Q=Array(E.length),$=Array(E.length);Q[0]=Z[0],$[0]=1-Q[0];for(var J=1;J<E.length;J++)Q[J]=Q[J-1]+Z[J],$[J]=1-Q[J];var ee=0;for(var te=0;te<E.length;te++)if(Math.abs(Q[te])>=Number.EPSILON){ee=te;break}var ae=E.length-1;for(var ie=E.length-1;ie>=ee;ie--)if(Math.abs($[ie])>=Number.EPSILON){ae=ie;break}var ne=-1,oe=void 0,le=Number.MIN_VALUE,se=void 0,de=void 0;for(var ue=ee;ue<=ae;ue++){se=0;for(var he=0;he<=ue;he++)0!==E[he]&&(se-=Z[he]/Q[ue]*Math.log(Z[he]/Q[ue]));de=0;for(var me=ue+1;me<E.length;me++)0!==E[me]&&(de-=Z[me]/$[ue]*Math.log(Z[me]/$[ue]));oe=se+de,le<oe&&(le=oe,ne=ue)}return ne}},{}],216:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=0;for(var W=0;W<E.length;W++)Z+=W*E[W];return Math.floor(Z/G)}},{}],217:[function(I,R,T){"use strict";function L(Z,W){var Q=0;for(var $=0;$<=W;$++)Q+=Z[$];return Q}function E(Z,W){var Q=0;for(var $=0;$<=W;$++)Q+=$*Z[$];return Q}function G(Z,W){var Q=0;for(var $=0;$<=W;$++)Q+=$*$*Z[$];return Q}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W,Q){var $=void 0,J=-2,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,oe=void 0,le=void 0,se=void 0,de=void 0,ue=void 0,he=void 0,me=0;for(var ce=0;ce<W.length;ce++)me+=ce*W[ce];for(me/=Q,$=me;$!==J;){var ge=L(W,$),pe=L(W,W.length-1),fe=E(W,$),_e=E(W,W.length-1),be=G(W,$),ye=G(W,W.length-1);if(ee=fe/ge,te=(_e-fe)/(pe-ge),ae=ge/pe,ie=(pe-ge)/pe,ne=be/ge-ee*ee,oe=(ye-be)/(pe-ge)-te*te,le=1/ne-1/oe,se=ee/ne-te/oe,de=ee*ee/ne-te*te/oe+Math.log10(ne*(ie*ie)/(oe*(ae*ae))),ue=se*se-le*de,0>ue)return $;J=$,he=(se+Math.sqrt(ue))/le,$=isNaN(he)?J:Math.floor(he)}return $}},{}],218:[function(I,R,T){"use strict";function L(Z){var W=Array(Z.length);for(var Q=1;Q<Z.length-1;Q++)W[Q]=(Z[Q-1]+Z[Q]+Z[Q+1])/3;return W[0]=(Z[0]+Z[1])/3,W[Z.length-1]=(Z[Z.length-2]+Z[Z.length-1])/3,W}function E(Z,W){var Q=void 0;for(var $=1;$<W;$++)if(Z[$-1]>Z[$]&&Z[$+1]>=Z[$]){Q=$;break}return Q}function G(Z){var W=Z.length,Q=!1,$=0;for(var J=1;J<W-1;J++)if(Z[J-1]<Z[J]&&Z[J+1]<Z[J]&&($++,2<$))return!1;return 2==$&&(Q=!0),Q}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){if(2>W.length)return 0;var Q=0,$=-1,J=-1,ee=Array(W.length);for(var te=0;te<W.length;te++)ee[te]=W[te],0<W[te]&&(J=te);for(;!G(ee);)if(ee=L(ee),Q++,1e4<Q)return $;return $=E(ee,J),$}},{}],219:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=1,W=0,Q=0,$=0,J=0,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,oe=void 0,le=-1,se=E.length,de=Array(se);for(var ue=0;ue<se;ue++)de[ue]=E[ue]/G;for(var he=0;he<se;he++)W+=he*de[he],Q+=he*he*de[he],$+=he*he*he*de[he];te=Z*Q-W*W,ae=(-Q*Q+W*$)/te,ie=(Z*-$+Q*W)/te,ne=0.5*(-ie-Math.sqrt(ie*ie-4*ae)),oe=0.5*(-ie+Math.sqrt(ie*ie-4*ae)),ee=(oe-W)/(oe-ne);for(var me=0;me<se;me++)if(J+=de[me],J>ee){le=me;break}return le}},{}],220:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=0,W=0,Q=0,$=0,J=void 0,ee=void 0,te=0,ae=0,ie=0;for(var ne=1;ne<E.length;++ne)Z+=ne*E[ne];for(var oe=1;oe<E.length;++oe)if(Q+=E[oe],0!=Q){if($=G-Q,0==$)break;W+=oe*E[oe],J=W/Q,ee=(Z-W)/$,ae=Q*$*(J-ee)*(J-ee),ae>=te&&(ie=oe,te=ae)}return ie}},{}],221:[function(I,R,T){"use strict";function L(E,G){var Z=0;for(var W=0;W<=G;W++)Z+=E[W];return Z}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=-1,Z=Array(E.length),W=L(E,E.length-1),Q=1;for(var $=0;$<E.length;$++)Z[$]=Math.abs(L(E,$)/W-0.5),Z[$]<Q&&(Q=Z[$],G=$);return G}},{}],222:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G,Z){var W=void 0,Q=void 0,$=void 0,J=Array(G.length),ee=Array(G.length),te=Array(G.length),ae=0,ie=0,ne=0,oe=0,le=0,se=0;for(var de=0;de<G.length;de++)J[de]=G[de]/Z;ee[0]=J[0],te[0]=1-ee[0];for(var ue=1;ue<G.length;ue++)ee[ue]=ee[ue-1]+J[ue],te[ue]=1-ee[ue];Q=0;for(var he=0;he<G.length;he++)if(Math.abs(ee[he])>=Number.EPSILON){Q=he;break}$=G.length-1;for(var me=G.length-1;me>=Q;me--)if(Math.abs(te[me])>=Number.EPSILON){$=me;break}for(var ce=Q;ce<=$;ce++){var ge=0,pe=0,fe=0;for(var _e=0;_e<=ce;_e++)0!==G[_e]&&(ge-=J[_e]/ee[ce]*Math.log(J[_e]/ee[ce])),pe+=Math.sqrt(J[_e]/ee[ce]),fe+=J[_e]*J[_e]/(ee[ce]*ee[ce]);var be=0,ye=0,xe=0;for(var ke=ce+1;ke<G.length;ke++)0!==G[ke]&&(be-=J[ke]/te[ce]*Math.log(J[ke]/te[ce])),ye+=Math.sqrt(J[ke]/te[ce]),xe+=J[ke]*J[ke]/(te[ce]*te[ce]);var we=ge+be,ve=2*(0<pe*ye?Math.log(pe*ye):0),Me=-1*(0<fe*xe?Math.log(fe*xe):0);we>oe&&(oe=we,ae=ce),ve>le&&(le=ve,ie=ce),Me>se&&(se=Me,ne=ce)}var je=[ae,ie,ne];je.sort(L.asc);var Pe=void 0;Pe=5>=Math.abs(je[0]-je[1])?5>=Math.abs(je[1]-je[2])?[1,2,1]:[0,1,3]:5>=Math.abs(je[1]-je[2])?[3,1,0]:[1,2,1];var De=ee[je[2]]-ee[je[0]];return W=Math.round(je[0]*(ee[je[0]]+0.25*De*Pe[0])+0.25*je[1]*De*Pe[1]+je[2]*(te[je[2]]+0.25*De*Pe[2])),W};var L=I("num-sort")},{"num-sort":115}],223:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=Array(E.length);for(var W=0;W<E.length;W++)Z[W]=E[W]/G;var Q=Array(E.length),$=Array(E.length);Q[0]=Z[0],$[0]=1-Q[0];for(var J=1;J<E.length;J++)Q[J]=Q[J-1]+Z[J],$[J]=1-Q[J];var ee=0;for(var te=0;te<E.length;te++)if(Math.abs(Q[te])>=Number.EPSILON){ee=te;break}var ae=E.length-1;for(var ie=E.length-1;ie>=ee;ie--)if(Math.abs($[ie])>=Number.EPSILON){ae=ie;break}var ne=-1,oe=Number.MAX_VALUE,le=void 0,se=void 0,de=void 0,ue=void 0;for(var he=ee;he<=ae;he++){de=0,le=0.5/Q[he];for(var me=1;me<=he;me++)de-=Z[me]*Math.log(1-le*Q[me-1]);de*=le,ue=0,le=0.5/$[he];for(var ce=he+1;ce<E.length;ce++)ue-=Z[ce]*Math.log(1-le*$[ce]);ue*=le,se=Math.abs(de-ue),se<oe&&(oe=se,ne=he)}return ne}},{}],224:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=0,Z=0,W=0,Q=0;for(var $=0;$<E.length;$++)if(0<E[$]){G=$;break}0<G&&G--;for(var J=E.length-1;0<J;J--)if(0<E[J]){Q=J;break}Q<E.length-1&&Q++;for(var ee=0;ee<E.length;ee++)E[ee]>Z&&(W=ee,Z=E[ee]);var te=!1;if(W-G<Q-W){te=!0;for(var ae=0,ie=E.length-1;ae<ie;){var ne=E[ae];E[ae]=E[ie],E[ie]=ne,ae++,ie--}G=E.length-1-Q,W=E.length-1-W}if(G===W)return G;var oe=void 0,le=void 0,se=void 0;oe=E[W],le=G-W,se=Math.sqrt(oe*oe+le*le),oe/=se,le/=se,se=oe*G+le*E[G];var de=G,ue=0;for(var he=G+1;he<=W;he++){var me=oe*he+le*E[he]-se;me>ue&&(de=he,ue=me)}if(de--,te){for(var ce=0,ge=E.length-1;ce<ge;){var pe=E[ce];E[ce]=E[ge],E[ge]=pe,ce++,ge--}return E.length-1-de}return de}},{}],225:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G){var Z=Array(E.length);for(var W=0;W<E.length;W++)Z[W]=E[W]/G;var Q=Array(E.length);Q[0]=Z[0];for(var $=1;$<E.length;$++)Q[$]=Q[$-1]+Z[$];var J=Array(E.length);J[0]=Z[0]*Z[0];for(var ee=1;ee<E.length;ee++)J[ee]=J[ee-1]+Z[ee]*Z[ee];var te=Array(E.length);te[E.length-1]=0;for(var ae=E.length-2;0<=ae;ae--)te[ae]=te[ae+1]+Z[ae+1]*Z[ae+1];var ie=-1,ne=Number.MIN_VALUE,oe=void 0;for(var le=0;le<E.length;le++)oe=-1*(0<J[le]*te[le]?Math.log(J[le]*te[le]):0)+2*(0<Q[le]*(1-Q[le])?Math.log(Q[le]*(1-Q[le])):0),oe>ne&&(ne=oe,ie=le);return ie}},{}],226:[function(I,R,T){"use strict";function L(J){return J&&J.__esModule?J:{default:J}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var ee=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},te=ee.size,ae=void 0===te?0:te,ie=ee.algorithm,ne=void 0===ie?"copy":ie,oe=ee.color;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===ne){if(oe.length!==this.channels)throw new Error("pad: the color array must have the same length as the number of channels. Here: "+this.channels);for(var le=0;le<oe.length;le++)0===oe[le]&&(oe[le]=1e-3)}else oe=(0,W.default)(this.channels,null);Array.isArray(ae)||(ae=[ae,ae]);var se=this.width+2*ae[0],de=this.height+2*ae[1],ue=this.channels,he=G.default.createFrom(this,{width:se,height:de});(0,$.default)(this,he,ae[0],ae[1]);for(var me=ae[0];me<se-ae[0];me++)for(var ce=0;ce<ue;ce++){var ge=oe[ce]||he.data[(ae[1]*se+me)*ue+ce];for(var pe=0;pe<ae[1];pe++)he.data[(pe*se+me)*ue+ce]=ge;ge=oe[ce]||he.data[((de-ae[1]-1)*se+me)*ue+ce];for(var fe=de-ae[1];fe<de;fe++)he.data[(fe*se+me)*ue+ce]=ge}for(var _e=0;_e<de;_e++)for(var be=0;be<ue;be++){var ye=oe[be]||he.data[(_e*se+ae[0])*ue+be];for(var xe=0;xe<ae[0];xe++)he.data[(_e*se+xe)*ue+be]=ye;ye=oe[be]||he.data[(_e*se+se-ae[0]-1)*ue+be];for(var ke=se-ae[0];ke<se;ke++)he.data[(_e*se+ke)*ue+be]=ye}return he};var E=I("../Image"),G=L(E),Z=I("new-array"),W=L(Z),Q=I("../utility/copy"),$=L(Q)},{"../Image":146,"../utility/copy":234,"new-array":114}],227:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0.5;this.checkProcessable("resizeBinary",{bitDepth:[1]});var Q=Math.max(Math.floor(this.width*W),1),$=Math.max(Math.floor(this.height*W),1),J=Math.round((this.width-Q)/2),ee=Math.round((this.height-$)/2),te=E.default.createFrom(this,{kind:G.BINARY,width:Q,height:$,position:[J,ee],parent:this});for(var ae=0;ae<this.width;ae++)for(var ie=0;ie<this.height;ie++)this.getBitXY(ae,ie)&&te.setBitXY(Math.floor(ae*W),Math.floor(ie*W));return te};var L=I("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(L),G=I("../kindNames")},{"../Image":146,"../kindNames":183}],228:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){return new E.default(this.width,this.height,this.getRGBAData(),{kind:"RGBA"})};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Image":146}],229:[function(I,R,T){"use strict";function L(ee){return ee&&ee.__esModule?ee:{default:ee}}function E(){var ee=Q.default.createFrom(this,{width:this.height,height:this.width}),te=ee.height-1;for(var ae=0;ae<this.height;ae++)for(var ie=0;ie<this.width;ie++)for(var ne=0;ne<this.channels;ne++)ee.setValueXY(ae,te-ie,ne,this.getValueXY(ie,ae,ne));return ee}function G(){var ee=Q.default.createFrom(this,{width:this.height,height:this.width}),te=ee.width-1;for(var ae=0;ae<this.height;ae++)for(var ie=0;ie<this.width;ie++)for(var ne=0;ne<this.channels;ne++)ee.setValueXY(te-ae,ie,ne,this.getValueXY(ie,ae,ne));return ee}function Z(){var ee=Q.default.createFrom(this),te=ee.width-1,ae=ee.height-1;for(var ie=0;ie<this.height;ie++)for(var ne=0;ne<this.width;ne++)for(var oe=0;oe<this.channels;oe++)ee.setValueXY(te-ne,ae-ie,oe,this.getValueXY(ne,ie,oe));return ee}Object.defineProperty(T,"__esModule",{value:!0}),T.rotate=function(te,ae){if("number"!=typeof te)throw new TypeError("angle must be a number");switch(0>te&&(te=360*Math.ceil(-te/360)+te),te%360){case 0:return this.clone();case 90:return G.call(this);case 180:return Z.call(this);case 270:return E.call(this);default:return J.default.call(this,te,ae);}},T.rotateLeft=E,T.rotateRight=G;var W=I("../Image"),Q=L(W),$=I("./rotateFree"),J=L($)},{"../Image":146,"./rotateFree":230}],230:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},Q=W.interpolation,$=Q===void 0?"none":Q,J=W.width,ee=J===void 0?this.width:J,te=W.height,ae=te===void 0?this.height:te,ie=Z*Math.PI/180,ne=Math.floor(Math.abs(ee*Math.cos(ie))+Math.abs(ae*Math.sin(ie))),oe=Math.floor(Math.abs(ae*Math.cos(ie))+Math.abs(ee*Math.sin(ie))),le=E.default.createFrom(this,{width:ne,height:oe}),se=Math.cos(-ie),de=Math.sin(-ie),ue=ne/2,he=oe/2;0==ne%2?(ue=ue-0.5,he=0==oe%2?he-0.5:Math.floor(he)):(ue=Math.floor(ue),he=0==oe%2?he-0.5:Math.floor(he));var me=Math.floor(ee/2-ue),ce=Math.floor(ae/2-he);if("bilinear"===$)for(var ge=0;ge<ne;ge+=1)for(var pe=0;pe<oe;pe+=1){var fe=(ge-ue)*se-(pe-he)*de+ue+me,_e=(pe-he)*se+(ge-ue)*de+he+ce,be=0|fe,ye=0|_e,xe=fe-be,ke=_e-ye;for(var we=0;we<this.channels;we++)if(0>fe||fe>ee||0>_e||_e>ae)this.alpha?le.setValueXY(ge,pe,we,this.alpha):le.setValueXY(ge,pe,we,this.maxValue);else{var ve=(ye*this.width+be)*this.channels+we,Me=this.data[ve],je=this.data[ve+this.channels],Pe=this.data[ve+this.width*this.channels],De=this.data[ve+this.width*this.channels+this.channels];le.setValueXY(ge,pe,we,0|Me*(1-xe)*(1-ke)+je*xe*(1-ke)+Pe*ke*(1-xe)+De*(xe*ke))}}else for(var Ie=0;Ie<ne;Ie+=1)for(var Se=0;Se<oe;Se+=1)for(var Ce=0;Ce<this.channels;Ce++){var Ae=Math.round((Ie-ue)*se-(Se-he)*de+ue)+me,Re=Math.round((Se-he)*se+(Ie-ue)*de+he)+ce;0>Ae||Ae>=ee||0>Re||Re>=ae?this.alpha?le.setValueXY(Ie,Se,Ce,this.alpha):le.setValueXY(Ie,Se,Ce,this.maxValue):le.setValueXY(Ie,Se,Ce,this.getValueXY(Ae,Re,Ce))}return le};var L=I("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Image":146}],231:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G,Z){var W=this.width/G,Q=this.height/Z;if(1<this.bitDepth)for(var $=0;$<G;$++){var J=Math.floor(($+0.5)*W);for(var ee=0;ee<Z;ee++){var te=Math.floor((ee+0.5)*Q);for(var ae=0;ae<this.channels;ae++)E.setValueXY($,ee,ae,this.getValueXY(J,te,ae))}}else for(var ie=0;ie<G;ie++){var ne=Math.floor((ie+0.5)*W);for(var oe=0;oe<Z;oe++){var le=Math.floor((oe+0.5)*Q);this.getBitXY(ne,le)&&E.setBitXY(ie,oe)}}}},{}],232:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ee=J.factor,te=void 0===ee?1:ee,ae=J.algorithm,ie=void 0===ae?"nearestNeighbor":ae,ne=J.preserveAspectRatio,oe=void 0===ne||ne,le=J.width,se=J.height;le||(se&&oe?le=Math.round(se*(this.width/this.height)):le=this.width),se||(oe?se=Math.round(le*(this.height/this.width)):se=this.height);var de=(0,Q.factorDimensions)(te,le,se);if(le=de.width,se=de.height,le===this.width&&se===this.height)return this.clone();var ue=G.default.createFrom(this,{width:le,height:se});switch(ie.toLowerCase()){case"nearestneighbor":case"nearestneighbour":W.default.call(this,ue,le,se);break;default:throw new Error("Unsupported scale algorithm: "+ie);}return ue};var E=I("../../Image"),G=L(E),Z=I("./nearestNeighbor"),W=L(Z),Q=I("../../../util/converter")},{"../../../util/converter":261,"../../Image":146,"./nearestNeighbor":231}],233:[function(I,R,T){"use strict";function L(Z){return(Z[0]+Z[1]+Z[2])/3}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:L,Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.mergeAlpha,J=$!==void 0&&$,ee=Q.keepAlpha,te=ee!==void 0&&ee;J&=this.alpha,te&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});var ae=G.default.createFrom(this,{components:1,alpha:te,colorModel:null}),ie=0;for(var ne=0;ne<this.size;ne++){var oe=W(this.getPixel(ne));J?ae.data[ie++]=oe*this.data[ne*this.channels+this.components]/this.maxValue:(ae.data[ie++]=oe,te&&(ae.data[ie++]=this.data[ne*this.channels+this.components]))}return ae};var E=I("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"../Image":146}],234:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E,G,Z,W){var Q=E.width,$=E.height,J=G.width,ee=E.channels;for(var te=0;te<Q;te++)for(var ae=0;ae<$;ae++)for(var ie=0;ie<ee;ie++){var ne=(ae*Q+te)*ee+ie,oe=((W+ae)*J+Z+te)*ee+ie;G.data[oe]=E.data[ne]}}},{}],235:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.border;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==Z.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==Z.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==Z.colorModel)throw new Error("Both images must have the same colorModel");for(var $=new E.default(Z.width,Z.height,-(1/0)),J=Math.floor(Z.width/2),ee=Math.floor(Z.height/2),te=J,ae=ee,ie=!1;!ie;){var ne=$.localSearch(J,ee,-(1/0));for(var oe=0;oe<ne.length;oe++){var le=ne[oe],se=this.getSimilarity(Z,{border:Q,shift:[te-le[0],ae-le[1]]});$[le[0]][le[1]]=se}var de=$.localMax(J,ee);de.position[0]!==J||de.position[1]!==ee?(J=de.position[0],ee=de.position[1]):ie=!0}return[J-te,ee-ae]};var L=I("../../util/matrix"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../../util/matrix":266}],236:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Q=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},$=Q.keepAlpha,J=$!==void 0&&$,ee=Q.mergeAlpha,te=ee!==void 0&&ee;J&=this.alpha,te&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),W=(0,G.validateChannel)(this,W);var ae=E.default.createFrom(this,{components:1,alpha:J,colorModel:null}),ie=0;for(var ne=0;ne<this.data.length;ne+=this.channels)te?ae.data[ie++]=this.data[ne+W]*this.data[ne+this.components]/this.maxValue:(ae.data[ie++]=this.data[ne+W],J&&(ae.data[ie++]=this.data[ne+this.components]));return ae};var L=I("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(L),G=I("./../../util/channel")},{"../Image":146,"./../../util/channel":259}],237:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;this.checkProcessable("getColumn",{bitDepth:[8,16]}),this.checkColumn(E),this.checkChannel(G);var Z=Array(this.height),W=0,Q=this.width*this.channels;for(var $=G+E*this.channels;$<this.data.length;$+=Q)Z[W++]=this.data[$];return Z}},{}],238:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},W=Z.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===W){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");W=0}var Q=new E.default(this.height,this.width);for(var $=0;$<this.height;$++)for(var J=0;J<this.width;J++)Q.set($,J,this.getValueXY(J,$,W));return Q};var L=I("ml-matrix"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"ml-matrix":87}],239:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});var E=Array(this.size),G=0;for(var Z=0;Z<this.data.length;Z+=this.channels){var W=Array(this.components);for(var Q=0;Q<this.components;Q++)W[Q]=this.data[Z+Q];E[G++]=W}return E}},{}],240:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},G=E.sampling,Z=void 0===G?[10,10]:G,W=E.painted,Q=void 0!==W&&W,$=E.mask;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(Z)||(Z=[Z,Z]);var J=Z[0],ee=Z[1],te=J*ee,ae=Array(te),ie=Array(te),ne=this.width/J,oe=this.height/ee,le=Math.floor(ne/2),se=0;for(var de=0;de<J;de++){var ue=Math.floor(oe/2);for(var he=0;he<ee;he++){var me=Math.round(le),ce=Math.round(ue);(!$||$.getBitXY(me,ce))&&(ae[se]=[me,ce],ie[se]=this.getPixelXY(me,ce),se++),ue+=oe}le+=ne}ae.length=se,ie.length=se;var ge={xyS:ae,zS:ie};return Q&&(ge.painted=this.rgba8().paintPoints(ae)),ge}},{}],241:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;this.checkProcessable("getRow",{bitDepth:[8,16]}),this.checkRow(E),this.checkChannel(G);var Z=Array(this.width),W=0,Q=E*this.width*this.channels+G,$=Q+this.width*this.channels;for(var J=Q;J<$;J+=this.channels)Z[W++]=this.data[J];return Z}},{}],242:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(W){var Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},$=Q.shift,J=void 0===$?[0,0]:$,ee=Q.average,te=Q.channels,ae=Q.defaultAlpha,ie=Q.normalize,ne=Q.border,oe=void 0===ne?[0,0]:ne;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(oe)||(oe=[oe,oe]),te=(0,L.validateArrayOfChannels)(this,{channels:te,defaultAlpha:ae}),this.bitDepth!==W.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==W.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==W.colorModel)throw new Error("Both images must have the same colorModel");"undefined"==typeof ee&&(ee=!0);var le=Math.max(oe[0],-J[0]),se=Math.min(this.width-oe[0],this.width-J[0]),de=Math.max(oe[1],-J[1]),ue=Math.min(this.height-oe[1],this.height-J[1]),he=(0,G.default)(te.length,0);for(var me=0;me<te.length;me++){var ce=te[me],ge=ie?this.sum[ce]:Math.max(this.sum[ce],W.sum[ce]),pe=ie?W.sum[ce]:Math.max(this.sum[ce],W.sum[ce]);if(0!==ge&&0!==pe)for(var fe=le;fe<se;fe++)for(var _e=de;_e<ue;_e++){var be=fe*this.multiplierX+_e*this.multiplierY+ce,ye=be+J[0]*this.multiplierX+J[1]*this.multiplierY;he[me]+=Math.min(this.data[be]/ge,W.data[ye]/pe)}}return ee?he.reduce((xe,ke)=>xe+ke)/he.length:he};var L=I("./../../util/channel"),E=I("new-array"),G=function(W){return W&&W.__esModule?W:{default:W}}(E)},{"./../../util/channel":259,"new-array":114}],243:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},W=Z.size,Q=void 0===W?0:W,$=Z.algorithm,J=void 0===$?"copy":$,ee=Z.color;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===J){if(ee.length!==this.channels)throw new Error("setBorder: the color array must have the same length as the number of channels. Here: "+this.channels);for(var te=0;te<ee.length;te++)0===ee[te]&&(ee[te]=1e-3)}else ee=(0,E.default)(this.channels,null);Array.isArray(Q)||(Q=[Q,Q]);var ae=Q[0],ie=Q[1],ne=this.channels;for(var oe=ae;oe<this.width-ae;oe++)for(var le=0;le<ne;le++){var se=ee[le]||this.data[(oe+this.width*ie)*ne+le];for(var de=0;de<ie;de++)this.data[(de*this.width+oe)*ne+le]=se;se=ee[le]||this.data[(oe+this.width*(this.height-ie-1))*ne+le];for(var ue=this.height-ie;ue<this.height;ue++)this.data[(ue*this.width+oe)*ne+le]=se}for(var he=0;he<this.height;he++)for(var me=0;me<ne;me++){var ce=ee[me]||this.data[(he*this.width+ae)*ne+me];for(var ge=0;ge<ae;ge++)this.data[(he*this.width+ge)*ne+me]=ce;ce=ee[me]||this.data[(he*this.width+this.width-ae-1)*ne+me];for(var pe=this.width-ae;pe<this.width;pe++)this.data[(he*this.width+pe)*ne+me]=ce}return this};var L=I("new-array"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"new-array":114}],244:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(G,Z){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),Z.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),Z.width!==this.width||Z.height!==this.height)throw new Error("Images must have exactly the same width and height");G=(0,L.validateChannel)(this,G);var W=G;for(var Q=0;Q<Z.data.length;Q++)this.data[W]=Z.data[Q],W+=this.channels;return this};var L=I("./../../util/channel")},{"./../../util/channel":259}],245:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){var G=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Z=G.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===Z){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");Z=0}if(!E.length||!E[0].length||this.width!==E.columns||this.height!==E.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(var W=0;W<this.height;W++)for(var Q=0;Q<this.width;Q++)this.setValueXY(Q,W,Z,E.get(W,Q))}},{}],246:[function(I,R,T){"use strict";function L(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var $=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},J=$.preserveAlpha,ee=void 0===J||J;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new W.default([this.clone()]);var te=new W.default,ae=this.data;if(this.alpha&&ee)for(var ie=0;ie<this.components;ie++){var ne=G.default.createFrom(this,{components:1,alpha:!0,colorModel:null}),oe=0;for(var le=0;le<ae.length;le+=this.channels)ne.data[oe++]=ae[le+ie],ne.data[oe++]=ae[le+this.components];te.push(ne)}else for(var se=0;se<this.channels;se++){var de=G.default.createFrom(this,{components:1,alpha:!1,colorModel:null}),ue=0;for(var he=0;he<ae.length;he+=this.channels)de.data[ue++]=ae[he+se];te.push(de)}return te};var E=I("../Image"),G=L(E),Z=I("../../stack/Stack"),W=L(Z)},{"../../stack/Stack":250,"../Image":146}],247:[function(I,R,T){"use strict";var L=I("./image/environment"),E=I("array-includes"),G=function(W){return W&&W.__esModule?W:{default:W}}(E);G.default.shim(),R.exports=T=I("./image/Image").default,T.Stack=I("./stack/Stack").default,T.Shape=I("./util/shape").default,T.Kernel=I("./kernel/kernel"),T.Static={grey:I("./image/transform/greyAlgorithms").names,mask:I("./image/transform/mask/maskAlgorithms").names},"browser"===L.env&&(T.Worker=I("./worker/worker").default)},{"./image/Image":146,"./image/environment":160,"./image/transform/greyAlgorithms":206,"./image/transform/mask/maskAlgorithms":214,"./kernel/kernel":248,"./stack/Stack":250,"./util/shape":267,"./worker/worker":271,"array-includes":2}],248:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=I("../util/kernels");Object.keys(L).forEach(function(G){"default"===G||"__esModule"===G||Object.defineProperty(T,G,{enumerable:!0,get:function(){return L[G]}})});var E=I("./laplacianOfGaussian");Object.defineProperty(T,"laplacianOfGaussian",{enumerable:!0,get:function(){return E.laplacianOfGaussian}})},{"../util/kernels":265,"./laplacianOfGaussian":249}],249:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.laplacianOfGaussian=function(E,G,Z){var W=Array(G),Q=void 0,$=void 0,J=void 0,ee=void 0;Z||(Z=100),Z*=-1;var te=(G-1)/2,ae=2*E*E;for(Q=0;Q<G;Q++)for(W[Q]=Array(G),ee=(Q-te)*(Q-te),$=0;$<G;$++)J=($-te)*($-te),W[Q][$]=Math.round(Z*(1-(J+ee)/ae)*Math.exp(-(J+ee)/ae));return W}},{}],250:[function(I,R,T){"use strict";function L(ae){return ae&&ae.__esModule?ae:{default:ae}}function E(ae){if(Array.isArray(ae)){for(var ie=0,ne=Array(ae.length);ie<ae.length;ie++)ne[ie]=ae[ie];return ne}return Array.from(ae)}Object.defineProperty(T,"__esModule",{value:!0});var G=I("./extend"),Z=L(G),W=I("../image/Image"),Q=L(W),$=I("has-own"),J=L($),ee={configurable:!0,enumerable:!1,get:void 0};class te extends Array{constructor(ae){if(Array.isArray(ae)){super(ae.length);for(var ie=0;ie<ae.length;ie++)this[ie]=ae[ie]}else"number"==typeof ae?super(ae):super();this.computed=null}static load(ae){return Promise.all(ae.map(Q.default.load)).then(ie=>new te(ie))}static extendMethod(ae,ie){var ne=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},oe=ne.inPlace,le=void 0!==oe&&oe,se=ne.returnThis,de=void 0===se||se,ue=ne.partialArgs,he=void 0===ue?[]:ue;return te.prototype[ae]=le?function(){this.computed=null;for(var me=arguments.length,ce=Array(me),ge=0;ge<me;ge++)ce[ge]=arguments[ge];var pe=ie.apply(this,[].concat(E(he),ce));return de?this:pe}:function(){for(var me=arguments.length,ce=Array(me),ge=0;ge<me;ge++)ce[ge]=arguments[ge];return ie.apply(this,[].concat(E(he),ce))},te}static extendProperty(ae,ie){var ne=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},oe=ne.partialArgs,le=void 0===oe?[]:oe;return ee.get=function(){if(null===this.computed)this.computed={};else if((0,J.default)(ae,this.computed))return this.computed[ae];var se=ie.apply(this,le);return this.computed[ae]=se,se},Object.defineProperty(te.prototype,ae,ee),te}checkProcessable(ae){var ie=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if("string"!=typeof ae)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError("The process: "+ae+" can not be applied on an empty stack");this[0].checkProcessable(ae,ie);for(var ne=1;ne<this.length;ne++){if((ie.sameSize===void 0||ie.sameSize)&&this[0].width!==this[ne].width)throw new TypeError("The process: "+ae+" can not be applied if width is not identical in all images");if((void 0===ie.sameSize||ie.sameSize)&&this[0].height!==this[ne].height)throw new TypeError("The process: "+ae+" can not be applied if height is not identical in all images");if((void 0===ie.sameAlpha||ie.sameAlpha)&&this[0].alpha!==this[ne].alpha)throw new TypeError("The process: "+ae+" can not be applied if alpha is not identical in all images");if((void 0===ie.sameBitDepth||ie.sameBitDepth)&&this[0].bitDepth!==this[ne].bitDepth)throw new TypeError("The process: "+ae+" can not be applied if bitDepth is not identical in all images");if((void 0===ie.sameColorModel||ie.sameColorModel)&&this[0].colorModel!==this[ne].colorModel)throw new TypeError("The process: "+ae+" can not be applied if colorModel is not identical in all images");if((void 0===ie.sameNumberChannels||ie.sameNumberChannels)&&this[0].channels!==this[ne].channels)throw new TypeError("The process: "+ae+" can not be applied if channels is not identical in all images")}}}T.default=te,Array[Symbol.species]||(te.prototype.map=function(ae,ie){if("function"!=typeof ae)throw new TypeError(ae+" is not a function");var ne=new te(this.length);for(var oe=0;oe<this.length;oe++)ne[oe]=ae.call(ie,this[oe],oe,this);return ne}),(0,Z.default)(te)},{"../image/Image":146,"./extend":256,"has-own":44}],251:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].getHistogram(E);for(var G=1;G<this.length;G++){var Z=this[G].getHistogram(E);for(var W=0;W<L.length;W++)L[W]+=Z[W]}return L}},{}],252:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(E){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].getHistograms(E),G=L[0].length;for(var Z=1;Z<this.length;Z++){var W=this[Z].getHistograms(E);for(var Q=0;Q<L.length;Q++)for(var $=0;$<G;$++)L[Q][$]+=W[Q][$]}return L}},{}],253:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].max;for(var E=1;E<this.length;E++)for(var G=0;G<L.length;G++)L[G]=Math.max(L[G],this[E].max[G]);return L}},{}],254:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("median",{bitDepth:[8,16]});var G=this.getHistograms({maxSlots:this[0].maxValue+1}),Z=Array(G.length);for(var W=0;W<G.length;W++){var Q=G[W];Z[W]=(0,L.median)(Q)}return Z};var L=I("../../util/histogram")},{"../../util/histogram":263}],255:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var L=this[0].min;for(var E=1;E<this.length;E++)for(var G=0;G<L.length;G++)L[G]=Math.min(L[G],this[E].min[G]);return L}},{}],256:[function(I,R,T){"use strict";function L(se){return se&&se.__esModule?se:{default:se}}Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(de){de.extendMethod("matchAndCrop",G.default),de.extendMethod("getMin",W.default),de.extendMethod("getMax",$.default),de.extendMethod("getMedian",ee.default),de.extendMethod("getHistogram",ae.default),de.extendMethod("getHistograms",ne.default),de.extendMethod("getAverage",le.default)};var E=I("./transform/matchAndCrop"),G=L(E),Z=I("./compute/min"),W=L(Z),Q=I("./compute/max"),$=L(Q),J=I("./compute/median"),ee=L(J),te=I("./compute/histogram"),ae=L(te),ie=I("./compute/histograms"),ne=L(ie),oe=I("./utility/average"),le=L(oe)},{"./compute/histogram":251,"./compute/histograms":252,"./compute/max":253,"./compute/median":254,"./compute/min":255,"./transform/matchAndCrop":257,"./utility/average":258}],257:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){var Z=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},W=Z.algorithm,Q=W===void 0?"matchToPrevious":W,$=Z.ignoreBorder,J=$===void 0?[0,0]:$;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});var ee=this[0],te=[];te[0]={position:[0,0],image:this[0]};var ae=[0,0];for(var ie=1;ie<this.length;ie++){var ne=ee.getBestMatch(this[ie],{border:J});te[ie]={position:[ne[0]+ae[0],ne[1]+ae[1]],image:this[ie]},"matchToPrevious"===Q&&(ae[0]+=ne[0],ae[1]+=ne[1],ee=this[ie])}var oe=0,le=0,se=0,de=0;for(var ue=0;ue<te.length;ue++){var he=te[ue];he.position[0]>oe&&(oe=he.position[0]),he.position[0]<le&&(le=he.position[0]),he.position[1]>se&&(se=he.position[1]),he.position[1]<de&&(de=he.position[1])}le=0-le,de=0-de;for(var me=0;me<te.length;me++){var ce=te[me];ce.crop=ce.image.crop({x:oe-ce.position[0],y:se-ce.position[1],width:ee.width-le-oe,height:ee.height-de-se})}var ge=[];for(var pe=0;pe<te.length;pe++)ge[pe]=te[pe].crop;return new E.default(ge)};var L=I("../Stack"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../Stack":250}],258:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){this.checkProcessable("average",{bitDepth:[8,16]});var Z=new Uint32Array(this[0].data.length);for(var W=0;W<this.length;W++){var Q=this[W];for(var $=0;$<this[0].data.length;$++)Z[$]+=Q.data[$]}var J=E.default.createFrom(this[0]),ee=J.data;for(var te=0;te<this[0].data.length;te++)ee[te]=Z[te]/this.length;return J};var L=I("../../image/Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"../../image/Image":146}],259:[function(I,R,T){"use strict";function L(Q,$){var J=$?Q.channels:Q.components,ee=Array(J);for(var te=0;te<J;te++)ee[te]=te;return ee}function E(Q,$,J){Array.isArray($)||($=[$]);for(var ee=0;ee<$.length;ee++)$[ee]=G(Q,$[ee],J);return $}function G(Q,$){var J=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0;if($===void 0)throw new RangeError("validateChannel : the channel has to be >=0 and <"+Q.channels);if("string"==typeof $){switch(Q.colorModel){case W.GREY:break;case W.RGB:"rgb".includes($)&&("r"===$?$=0:"g"===$?$=1:"b"===$?$=2:void 0);break;case W.HSL:"hsl".includes($)&&("h"===$?$=0:"s"===$?$=1:"l"===$?$=2:void 0);break;case W.HSV:"hsv".includes($)&&("h"===$?$=0:"s"===$?$=1:"v"===$?$=2:void 0);break;case W.CMYK:"cmyk".includes($)&&("c"===$?$=0:"m"===$?$=1:"y"===$?$=2:"k"===$?$=3:void 0);break;default:throw new Error(`Unexpected color model: ${Q.colorModel}`);}if("a"===$){if(!Q.alpha)throw new Error("validateChannel : the image does not contain alpha channel");$=Q.components}if("string"==typeof $)throw new Error("validateChannel : undefined channel: "+$)}if($>=Q.channels)throw new RangeError("validateChannel : the channel has to be >=0 and <"+Q.channels);if(!J&&$>=Q.components)throw new RangeError("validateChannel : alpha channel may not be selected");return $}Object.defineProperty(T,"__esModule",{value:!0}),T.validateArrayOfChannels=function($){var J=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},ee=J.channels,te=J.allowAlpha,ae=J.defaultAlpha;return"boolean"!=typeof te&&(te=!0),"undefined"==typeof ee?L($,ae):E($,ee,te)},T.validateChannel=G;var Z=I("../image/model/model"),W=function($){if($&&$.__esModule)return $;var J={};if(null!=$)for(var ee in $)Object.prototype.hasOwnProperty.call($,ee)&&(J[ee]=$[ee]);return J.default=$,J}(Z)},{"../image/model/model":186}],260:[function(I,R,T){"use strict";function L(Z,W,Q){return 0>Q&&(Q+=1),1<Q&&(Q-=1),Q<1/6?Z+6*(W-Z)*Q:Q<1/2?W:Q<2/3?Z+6*((W-Z)*(2/3-Q)):Z}function E(Z,W,Q){var $=void 0,J=void 0,ee=void 0,te=void 0,ae=void 0,ie=void 0;return W/=100,Q/=100,0===W?te=ae=ie=255*Q:(J=0.5>=Q?Q*(W+1):Q+W-Q*W,$=2*Q-J,ee=Z/360,te=L($,J,ee+1/3),ae=L($,J,ee),ie=L($,J,ee-1/3)),{r:te,g:ae,b:ie}}Object.defineProperty(T,"__esModule",{value:!0}),T.css2array=function(W){var Q=(0,G.cssColor)(W);return[Q.r,Q.g,Q.b,Math.round(255*Q.a/100)]},T.getDistinctColors=function(W){var Q=Array(W),$=0;for(var J=0;360>J;J+=360/W){$++;var ee=E(J,100,30+15*($%4));Q[$-1]=[Math.round(255*ee.r),Math.round(255*ee.g),Math.round(255*ee.b)]}return Q},T.getRandomColor=function(){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]};var G=I("color-functions")},{"color-functions":9}],261:[function(I,R,T){"use strict";function L(E){if("string"==typeof E){var G=E[E.length-1];E=parseFloat(E),"%"===G&&(E/=100)}return E}Object.defineProperty(T,"__esModule",{value:!0}),T.getFactor=L,T.getThreshold=function(G,Z){if(!Z)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof G){var W=G[G.length-1];if("%"!==W)throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(G)/100*Z}if("number"==typeof G)return 1>G?G*Z:G;throw Error("getThreshold : the value is not valid")},T.factorDimensions=function(G,Z,W){G=L(G);var Q=Math.round(G*Z),$=Math.round(G*W);return 0>=Q&&(Q=1),0>=$&&($=1),{width:Q,height:$}}},{}],262:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.dxs=[1,0,-1,0,1,1,-1,-1],T.dys=[0,1,0,-1,1,-1,1,-1]},{}],263:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.median=function(E){var G=E.reduce((J,ee)=>J+ee);if(0===G)throw new Error("unreachable");for(var Z=0,W=0,Q=G/2,$=void 0;!0;){if(0<E[Z]){if(void 0!=$)return($+Z)/2;if(W+=E[Z],W>Q)return Z;W==Q&&($=Z)}Z++}},T.mean=function(E){var G=0,Z=0;for(var W=0;W<E.length;W++)G+=E[W],Z+=E[W]*W;return 0===G?0:Z/G}},{}],264:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.validateKernel=function(Z){var W=void 0,Q=void 0;if(!Array.isArray(Z))throw new Error("validateKernel: Invalid Kernel: "+Z);else if(!Array.isArray(Z[0])){var $=Math.sqrt(Z.length);if((0,E.default)($))Q=W=Math.floor(Math.sqrt(Z.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");var J=Array($);for(var ee=0;ee<$;ee++){J[ee]=Array($);for(var te=0;te<$;te++)J[ee][te]=Z[ee*$+te]}Z=J}else if(0==(1&Z.length)||0==(1&Z[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");else W=Math.floor(Z.length/2),Q=Math.floor(Z[0].length/2);return{kernel:Z,kWidth:Q,kHeight:W}};var L=I("is-integer"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"is-integer":53}],265:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.DISCRETE_LAPLACE_4=[[0,1,0],[1,-4,1],[0,1,0]],T.DISCRETE_LAPLACE_8=[[1,1,1],[1,-8,1],[1,1,1]],T.GRADIENT_X=[[-1,0,1],[-2,0,2],[-1,0,1]],T.GRADIENT_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],T.SECOND_DERIVATIVE=[[-1,-2,0,2,1],[-2,-4,0,4,2],[0,0,0,0,0],[1,2,0,-2,-1],[2,4,0,-4,-2]],T.SECOND_DERIVATIVE_INV=[[1,2,0,-2,-1],[2,4,0,-4,-2],[0,0,0,0,0],[-2,-4,0,4,2],[-1,-2,0,2,1]]},{}],266:[function(I,R,T){"use strict";function L(E,G,Z){var W=Array(E);for(var Q=0;Q<E;Q++)W[Q]=Array(G);if(Z)for(var $=0;$<E;$++)for(var J=0;J<G;J++)W[$][J]=Z;return W.width=E,W.height=G,W.__proto__=L.prototype,W}Object.defineProperty(T,"__esModule",{value:!0}),T.default=L,L.prototype.localMin=function(E,G){var Z=this[E][G],W=[E,G];for(var Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]<Z&&(Z=this[Q][$],W=[Q,$]);return{position:W,value:Z}},L.prototype.localMax=function(E,G){var Z=this[E][G],W=[E,G];for(var Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]>Z&&(Z=this[Q][$],W=[Q,$]);return{position:W,value:Z}},L.prototype.localSearch=function(E,G,Z){var W=[];for(var Q=Math.max(0,E-1);Q<Math.min(this.length,E+2);Q++)for(var $=Math.max(0,G-1);$<Math.min(this[0].length,G+2);$++)this[Q][$]===Z&&W.push([Q,$]);return W}},{}],267:[function(I,R,T){"use strict";function L(ie){return ie&&ie.__esModule?ie:{default:ie}}function E(ie,ne,oe){var le=Q.default.zeros(ne,ie);if(oe.filled)for(var se=0;se<ne;se++)for(var de=0;de<ie;de++)le.set(se,de,1);else{for(var ue of[0,ne-1])for(var he=0;he<ie;he++)le.set(ue,he,1);for(var me=0;me<ne;me++)for(var ce of[0,ie-1])le.set(me,ce,1)}return le}function G(ie,ne,oe){var le=Q.default.zeros(ne,ie,oe),se=1-ne%2,de=1-ie%2,ue=Math.floor((ie-1)/2),he=Math.floor((ne-1)/2),me=ue*ue,ce=he*he;if(oe.filled)for(var ge=0;ge<=he;ge++){var pe=Math.floor(Math.sqrt(me-me*ge*ge/ce));for(var fe=ue-pe;fe<=ue;fe++)le.set(he-ge,fe,1),le.set(he+ge+se,fe,1),le.set(he-ge,ie-fe-1,1),le.set(he+ge+se,ie-fe-1,1)}else{for(var _e=0;_e<=he;_e++){var be=Math.floor(Math.sqrt(me-me*_e*_e/ce)),ye=ue-be;le.set(he-_e,ye,1),le.set(he+_e+se,ye,1),le.set(he-_e,ie-ye-1,1),le.set(he+_e+se,ie-ye-1,1)}for(var xe=0;xe<=ue;xe++){var ke=Math.floor(Math.sqrt(ce-ce*xe*xe/me)),we=he-ke;le.set(we,ue-xe,1),le.set(we,ue+xe+de,1),le.set(ne-we-1,ue-xe,1),le.set(ne-we-1,ue+xe+de,1)}}return le}function Z(ie,ne,oe){if(!oe.filled)throw new Error("Non filled triangle is not implemented");var le=Q.default.zeros(ne,ie,oe);for(var se=0;se<ne;se++){var de=Math.floor((1-se/ne)*ie/2);for(var ue=de;ue<ie-de;ue++)le.set(se,ue,1)}return le}Object.defineProperty(T,"__esModule",{value:!0});var W=I("ml-matrix"),Q=L(W),$=I("../image/Image"),J=L($),ee=I("../image/kindNames"),te=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],ae=[[0,1,0],[1,1,1],[0,1,0]];T.default=class{constructor(){var ne=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},oe=ne.kind,le=void 0===oe?"cross":oe,se=ne.shape,de=ne.size,ue=ne.width,he=ne.height,me=ne.filled,ce=void 0===me||me;if(de&&(ue=de,he=de),se)switch(se.toLowerCase()){case"square":case"rectangle":this.matrix=E(ue,he,{filled:ce});break;case"circle":case"ellipse":this.matrix=G(ue,he,{filled:ce});break;case"triangle":this.matrix=Z(ue,he,{filled:ce});break;default:throw new Error(`Shape: unexpected shape: ${se}`);}else if(le)switch(le.toLowerCase()){case"cross":this.matrix=te;break;case"smallcross":this.matrix=ae;break;default:throw new Error(`Shape: unexpected kind: ${le}`);}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){var ne=this.matrix,oe=[];for(var le=0;le<ne.length;le++)for(var se=0;se<ne[0].length;se++)ne[le][se]&&oe.push([se-this.halfWidth,le-this.halfHeight]);return oe}getMask(){var ne=new J.default(this.width,this.height,{kind:ee.BINARY});for(var oe=0;oe<this.matrix.length;oe++)for(var le=0;le<this.matrix[0].length;le++)this.matrix[oe][le]&&ne.setBitXY(le,oe);return ne}}},{"../image/Image":146,"../image/kindNames":183,"ml-matrix":87}],268:[function(I,R,T){"use strict";function L(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(T,"__esModule",{value:!0}),T.checkNumberArray=function($){if(!isNaN($)){if(0>=$)throw new Error("checkNumberArray: the value must be greater than 0");return $}if($ instanceof G.default)return $.data;if(!(0,W.default)($))throw new Error("checkNumberArray: the value should be either a number, array or Image");return $};var E=I("../image/Image"),G=L(E),Z=I("is-array-type"),W=L(Z)},{"../image/Image":146,"is-array-type":49}],269:[function(I,R,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(Z){Z.extendMethod("background",E.default)};var L=I("./process/background"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(L)},{"./process/background":270}],270:[function(I,R,T){"use strict";function L(J){return J&&J.__esModule?J:{default:J}}function E(J,ee,te){return J.post("data",[ee,te]).then(function(ae){for(var ie in ae)ae[ie]=new Q.default(ae[ie]);return ae})}Object.defineProperty(T,"__esModule",{value:!0});var G=I("extend"),Z=L(G),W=I("../../image/Image"),Q=L(W),$={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:0.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};T.default={run:function(ee,te,ae){te=(0,Z.default)({},$,te);var ie=this.manager;return Array.isArray(ee)?Promise.all(ee.map(function(ne){var oe=E(ie,ne,te);return"function"==typeof ae&&oe.then(ae),oe})):E(ie,ee,te)},work:function(){worker.on("data",function(ee,te,ae){function ie(pe,fe){ae.include.includes(pe)&&(ne[pe]=fe,oe.push(fe.data.buffer))}te=new IJS(te);var ne={},oe=[],le=te.grey(),se=le.sobelFilter();ie("sobel",se);var de=se.level().mask({threshold:ae.threshold});ie("mask",de);var ue=se.getRoiManager();ue.fromMask(de);var he=ue.getMask(ae.roi);ie("realMask",he);var me=le.getPixelsGrid({sampling:ae.sampling,mask:he}),ce=te.getBackground(me.xyS,me.zS,ae.regression);ie("background",ce);var ge=te.subtract(ce);ne.result=ge,oe.push(ge.data.buffer),ee(ne,oe)})}}},{"../../image/Image":146,extend:35}],271:[function(I,R,T){"use strict";function L($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(T,"__esModule",{value:!0});var E=I("web-worker-manager"),G=L(E),Z=I("./extend"),W=L(Z);class Q{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url($){if("string"!=typeof $)throw new TypeError("worker URL must be a string");this._url=$,this._deps[0]=$}static extendMethod($,J){function ee(){var ne;te||(this.checkUrl(),ae=this.url,te=new G.default(J.work,{deps:ae}),ie.manager=te);for(var oe=arguments.length,le=Array(oe),se=0;se<oe;se++)le[se]=arguments[se];return(ne=J.run).call.apply(ne,[ie].concat(le))}var te=void 0,ae=void 0,ie={};ee.reset=function(){te&&(te.terminate(),te=new G.default(J.work,{deps:ae}),ie.manager=te)},Q.prototype[$]=ee}}(0,W.default)(Q),T.default=new Q},{"./extend":269,"web-worker-manager":144}]},{},[247])(247)});

//# sourceMappingURL=image.min.js.map