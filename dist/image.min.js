(function(D){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=D();else if("function"==typeof define&&define.amd)define([],D);else{var I;I="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,I.IJS=D()}})(function(){var define;return function D(I,R,T){function E(Z,W){if(!R[Z]){if(!I[Z]){var Q="function"==typeof require&&require;if(!W&&Q)return Q(Z,!0);if(L)return L(Z,!0);var $=new Error("Cannot find module '"+Z+"'");throw $.code="MODULE_NOT_FOUND",$}var J=R[Z]={exports:{}};I[Z][0].call(J.exports,function(ee){var te=I[Z][1][ee];return E(te?te:ee)},J,J.exports,D,I,R,T)}return R[Z].exports}var L="function"==typeof require&&require;for(var G=0;G<T.length;G++)E(T[G]);return E}({1:[function(D,I,R){(function(T){"use strict";var E=D("es-abstract/es6"),L=Number.isNaN||function(W){return W!==W},G=Number.isFinite||function(W){return"number"==typeof W&&T.isFinite(W)},Z=Array.prototype.indexOf;I.exports=function(Q){var $=1<arguments.length?E.ToInteger(arguments[1]):0;if(Z&&!L(Q)&&G($)&&"undefined"!=typeof Q)return-1<Z.apply(this,arguments);var J=E.ToObject(this),ee=E.ToLength(J.length);if(0===ee)return!1;for(var te=0<=$?$:Math.max(0,ee+$);te<ee;){if(E.SameValueZero(Q,J[te]))return!0;te+=1}return!1}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"es-abstract/es6":25}],2:[function(D,I,R){"use strict";var T=D("define-properties"),E=D("es-abstract/es6"),L=D("./implementation"),G=D("./polyfill"),Z=G(),W=D("./shim"),Q=Array.prototype.slice,$=function(ee,te){return E.RequireObjectCoercible(ee),Z.apply(ee,Q.call(arguments,1))};T($,{implementation:L,getPolyfill:G,shim:W}),I.exports=$},{"./implementation":1,"./polyfill":3,"./shim":4,"define-properties":23,"es-abstract/es6":25}],3:[function(D,I,R){"use strict";var T=D("./implementation");I.exports=function(){return Array.prototype.includes||T}},{"./implementation":1}],4:[function(D,I,R){"use strict";var T=D("define-properties"),E=D("./polyfill");I.exports=function(){var G=E();return Array.prototype.includes!==G&&T(Array.prototype,{includes:G}),G}},{"./polyfill":3,"define-properties":23}],5:[function(D,I,R){"use strict";I.exports=function(E){return atob(E)}},{}],6:[function(D,I,R){"use strict";function T(ae){for(var ie=ae.length,ne=new ArrayBuffer(ie),le=new Uint8Array(ne),oe=-1;++oe<ie;)le[oe]=ae.charCodeAt(oe);return ne}function E(ae){for(var ie="",ne=new Uint8Array(ae),le=ne.byteLength,oe=-1;++oe<le;)ie+=String.fromCharCode(ne[oe]);return ie}function L(ae,ie){return new te(function(ne,le){var oe=new Image;ie&&(oe.crossOrigin=ie),oe.onload=function(){ne(oe)},oe.onerror=le,oe.src=ae})}function G(ae){var ie=document.createElement("canvas");ie.width=ae.width,ie.height=ae.height;var ne=ie.getContext("2d");return ne.drawImage(ae,0,0,ae.width,ae.height,0,0,ae.width,ae.height),ie}function Z(ae,ie){return ie=ie||{},"string"==typeof ie&&(ie={type:ie}),new ee(ae,ie)}function W(ae){return new te(function(ie,ne){var le=new FileReader,oe="function"==typeof le.readAsBinaryString;le.onloadend=function(se){var de=se.target.result||"";return oe?ie(de):void ie(E(de))},le.onerror=ne,oe?le.readAsBinaryString(ae):le.readAsArrayBuffer(ae)})}function Q(ae,ie){return te.resolve().then(function(){var ne=[T(atob(ae))];return ie?Z(ne,{type:ie}):Z(ne)})}function $(ae){return te.resolve().then(function(){var ie=ae.match(/data:([^;]+)/)[1],ne=ae.replace(/^[^,]+,/,""),le=T(atob(ne));return Z([le],{type:ie})})}function J(ae,ie,ne){return te.resolve().then(function(){return"function"==typeof ae.toBlob?new te(function(le){ae.toBlob(le,ie,ne)}):$(ae.toDataURL(ie,ne))})}var ee=D("blob"),te=D("native-or-lie");I.exports={createBlob:Z,createObjectURL:function(ie){return(window.URL||window.webkitURL).createObjectURL(ie)},revokeObjectURL:function(ie){return(window.URL||window.webkitURL).revokeObjectURL(ie)},imgSrcToBlob:function(ie,ne,le,oe){return ne=ne||"image/png",L(ie,le).then(function(se){return G(se)}).then(function(se){return J(se,ne,oe)})},imgSrcToDataURL:function(ie,ne,le,oe){return ne=ne||"image/png",L(ie,le).then(function(se){return G(se)}).then(function(se){return se.toDataURL(ne,oe)})},canvasToBlob:J,dataURLToBlob:$,blobToBase64String:function(ie){return W(ie).then(function(ne){return btoa(ne)})},base64StringToBlob:Q,binaryStringToBlob:function(ie,ne){return te.resolve().then(function(){return Q(btoa(ie),ne)})},blobToBinaryString:W,arrayBufferToBlob:function(ie,ne){return te.resolve().then(function(){return Z([ie],ne)})},blobToArrayBuffer:function(ie){return new te(function(ne,le){var oe=new FileReader;oe.onloadend=function(se){var de=se.target.result||new ArrayBuffer(0);ne(de)},oe.onerror=le,oe.readAsArrayBuffer(ie)})}}},{blob:7,"native-or-lie":112}],7:[function(D,I,R){(function(T){"use strict";function E(J){for(var ee=0;ee<J.length;ee++){var te=J[ee];if(te.buffer instanceof ArrayBuffer){var ae=te.buffer;if(te.byteLength!==ae.byteLength){var ie=new Uint8Array(te.byteLength);ie.set(new Uint8Array(ae,te.byteOffset,te.byteLength)),ae=ie.buffer}J[ee]=ae}}}function L(J,ee){ee=ee||{};var te=new Z;E(J);for(var ae=0;ae<J.length;ae++)te.append(J[ae]);return ee.type?te.getBlob(ee.type):te.getBlob()}function G(J,ee){return E(J),new Blob(J,ee||{})}var Z=T.BlobBuilder||T.WebKitBlobBuilder||T.MSBlobBuilder||T.MozBlobBuilder,W=function(){try{var J=new Blob(["hi"]);return 2===J.size}catch(ee){return!1}}(),Q=W&&function(){try{var J=new Blob([new Uint8Array([1,2])]);return 2===J.size}catch(ee){return!1}}(),$=Z&&Z.prototype.append&&Z.prototype.getBlob;;;I.exports=function(){if(W)return Q?T.Blob:G;return $?L:void 0}()}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],8:[function(D,I,R){},{}],9:[function(D,I,R){"use strict";I.exports={hex2rgb:D("./lib/hex2rgb"),hsv2hex:D("./lib/hsv2hex"),hsv2rgb:D("./lib/hsv2rgb"),rgb2hex:D("./lib/rgb2hex"),rgb2hsv:D("./lib/rgb2hsv"),rgba:D("./lib/rgba"),rgba2rgb:D("./lib/rgba2rgb"),rgba2hex:D("./lib/rgba2hex"),hsl2hsv:D("./lib/hsl2hsv"),hsv2hsl:D("./lib/hsv2hsl"),hsl2rgb:D("./lib/hsl2rgb"),cssColor:D("./lib/css-color")}},{"./lib/css-color":11,"./lib/hex2rgb":12,"./lib/hsl2hsv":13,"./lib/hsl2rgb":14,"./lib/hsv2hex":15,"./lib/hsv2hsl":16,"./lib/hsv2rgb":17,"./lib/rgb2hex":18,"./lib/rgb2hsv":19,"./lib/rgba":20,"./lib/rgba2hex":21,"./lib/rgba2rgb":22}],10:[function(D,I,R){"use strict";I.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}},{}],11:[function(D,I,R){"use strict";function T(ee){var te=J[ee.toLowerCase()];if(te)return{r:te[0],g:te[1],b:te[2],a:100}}function E(ee){if(0==ee.indexOf("rgb(")){ee=ee.match(/rgb\(([^)]+)\)/)[1];var te=ee.split(/ *, */).map(Number);return{r:te[0],g:te[1],b:te[2],a:100}}}function L(ee){if(0===ee.indexOf("rgba(")){ee=ee.match(/rgba\(([^)]+)\)/)[1];var te=ee.split(/ *, */).map(Number);return{r:te[0],g:te[1],b:te[2],a:100*te[3]}}}function G(ee){if("#"===ee[0]&&7===ee.length)return{r:parseInt(ee.slice(1,3),16),g:parseInt(ee.slice(3,5),16),b:parseInt(ee.slice(5,7),16),a:100}}function Z(ee){if("#"===ee[0]&&4===ee.length)return{r:parseInt(ee[1]+ee[1],16),g:parseInt(ee[2]+ee[2],16),b:parseInt(ee[3]+ee[3],16),a:100}}function W(ee){if(0===ee.indexOf("hsl(")){ee=ee.match(/hsl\(([^)]+)\)/)[1];var te=ee.split(/ *, */),ae=parseInt(te[0],10),ie=parseInt(te[1],10),ne=parseInt(te[2],10),le=$(ae,ie,ne);return le.a=100,le}}function Q(ee){if(0===ee.indexOf("hsla(")){ee=ee.match(/hsla\(([^)]+)\)/)[1];var te=ee.split(/ *, */),ae=parseInt(te[0],10),ie=parseInt(te[1],10),ne=parseInt(te[2],10),le=parseInt(100*te[3],10),oe=$(ae,ie,ne);return oe.a=le,oe}}var $=D("./hsl2rgb"),J=D("./_colors");I.exports=function(te){return T(te)||Z(te)||G(te)||E(te)||L(te)||W(te)||Q(te)}},{"./_colors":10,"./hsl2rgb":14}],12:[function(D,I,R){"use strict";I.exports=function(T){return("#"===T[0]&&(T=T.substr(1)),6===T.length)?{r:parseInt(T.substr(0,2),16),g:parseInt(T.substr(2,2),16),b:parseInt(T.substr(4,2),16)}:3===T.length?{r:parseInt(T[0]+T[0],16),g:parseInt(T[1]+T[1],16),b:parseInt(T[2]+T[2],16)}:void 0}},{}],13:[function(D,I,R){"use strict";I.exports=function(T,E,L){return E*=(50>L?L:100-L)/100,console.log("s",E),{h:T,s:100*(2*E/(L+E)),v:L+E}}},{}],14:[function(D,I,R){"use strict";var T=D("./hsl2hsv"),E=D("./hsv2rgb");I.exports=function(L,G,Z){var W=T(L,G,Z);return E(W.h,W.s,W.v)}},{"./hsl2hsv":13,"./hsv2rgb":17}],15:[function(D,I,R){"use strict";var T=D("./hsv2rgb"),E=D("./rgb2hex");I.exports=function(L,G,Z){var W=T(L,G,Z);return E(W.r,W.g,W.b)}},{"./hsv2rgb":17,"./rgb2hex":18}],16:[function(D,I,R){"use strict";I.exports=function(T,E,L){var G=(200-E)*L/100;return{h:T,s:E*L/(100>G?G:200-G),l:G/2}}},{}],17:[function(D,I,R){"use strict";I.exports=function(T,E,L){var E=E/100,L=L/100,G=[],Z=L*E,W=T/60,Q=Z*(1-Math.abs(W%2-1)),$=L-Z;switch(parseInt(W,10)){case 0:G=[Z,Q,0];break;case 1:G=[Q,Z,0];break;case 2:G=[0,Z,Q];break;case 3:G=[0,Q,Z];break;case 4:G=[Q,0,Z];break;case 5:G=[Z,0,Q];}return{r:Math.round(255*(G[0]+$)),g:Math.round(255*(G[1]+$)),b:Math.round(255*(G[2]+$))}}},{}],18:[function(D,I,R){"use strict";I.exports=function(T,E,L){function G(Z){var W=Z.toString(16);return 1===W.length?"0"+W:W}return[G(T),G(E),G(L)].join("")}},{}],19:[function(D,I,R){"use strict";I.exports=function(T,E,L){var Q=Math.max(T,E,L),$=Math.min(T,E,L),J=Q-$,G,Z,W;return 0==J?G=0:T===Q?G=(E-L)/J%6:E===Q?G=(L-T)/J+2:L===Q&&(G=(T-E)/J+4),G=Math.round(60*G),0>G&&(G+=360),Z=Math.round(100*(0===Q?0:J/Q)),W=Math.round(100*(Q/255)),{h:G,s:Z,v:W}}},{}],20:[function(D,I,R){"use strict";I.exports=function(T,E,L,G){return"rgba("+[T,E,L,G/100].join(",")+")"}},{}],21:[function(D,I,R){"use strict";var T=D("./rgba2rgb"),E=D("./rgb2hex");I.exports=function(L,G,Z,W){var Q=T(L,G,Z,W);return E(Q.r,Q.g,Q.b)}},{"./rgb2hex":18,"./rgba2rgb":22}],22:[function(D,I,R){"use strict";I.exports=function(T,E,L,G){return G=G/100,{r:parseInt(255*(1-G)+G*T,10),g:parseInt(255*(1-G)+G*E,10),b:parseInt(255*(1-G)+G*L,10)}}},{}],23:[function(D,I,R){"use strict";var T=D("object-keys"),E=D("foreach"),L="function"==typeof Symbol&&"symbol"==typeof Symbol(),G=Object.prototype.toString,Z=function(ee){return"function"==typeof ee&&"[object Function]"===G.call(ee)},W=Object.defineProperty&&function(){var ee={};try{for(var te in Object.defineProperty(ee,"x",{enumerable:!1,value:ee}),ee)return!1;return ee.x===ee}catch(ae){return!1}}(),Q=function(ee,te,ae,ie){(!(te in ee)||Z(ie)&&ie())&&(W?Object.defineProperty(ee,te,{configurable:!0,enumerable:!1,value:ae,writable:!0}):ee[te]=ae)},$=function(ee,te){var ae=2<arguments.length?arguments[2]:{},ie=T(te);L&&(ie=ie.concat(Object.getOwnPropertySymbols(te))),E(ie,function(ne){Q(ee,ne,te[ne],ae[ne])})};$.supportsDescriptors=!!W,I.exports=$},{foreach:41,"object-keys":116}],24:[function(D,I,R){"use strict";var T=D("./helpers/isNaN"),E=D("./helpers/isFinite"),L=D("./helpers/sign"),G=D("./helpers/mod"),Z=D("is-callable"),W=D("es-to-primitive/es5");I.exports={ToPrimitive:W,ToBoolean:function($){return!!$},ToNumber:function($){return+$},ToInteger:function($){var J=this.ToNumber($);return T(J)?0:0!==J&&E(J)?L(J)*Math.floor(Math.abs(J)):J},ToInt32:function($){return this.ToNumber($)>>0},ToUint32:function($){return this.ToNumber($)>>>0},ToUint16:function($){var J=this.ToNumber($);if(T(J)||0===J||!E(J))return 0;var ee=L(J)*Math.floor(Math.abs(J));return G(ee,65536)},ToString:function($){return $+""},ToObject:function($){return this.CheckObjectCoercible($),Object($)},CheckObjectCoercible:function($,J){if(null==$)throw new TypeError(J||"Cannot call method on "+$);return $},IsCallable:Z,SameValue:function($,J){return $===J?0!==$||1/$==1/J:T($)&&T(J)},Type:function($){return null===$?"Null":"undefined"==typeof $?"Undefined":"function"==typeof $||"object"==typeof $?"Object":"number"==typeof $?"Number":"boolean"==typeof $?"Boolean":"string"==typeof $?"String":void 0}}},{"./helpers/isFinite":27,"./helpers/isNaN":28,"./helpers/mod":30,"./helpers/sign":31,"es-to-primitive/es5":32,"is-callable":50}],25:[function(D,I,R){"use strict";var T=Object.prototype.toString,E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,L=E?Symbol.prototype.toString:T,G=D("./helpers/isNaN"),Z=D("./helpers/isFinite"),W=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Q=D("./helpers/assign"),$=D("./helpers/sign"),J=D("./helpers/mod"),ee=D("./helpers/isPrimitive"),te=D("es-to-primitive/es6"),ae=parseInt,ie=D("function-bind"),ne=ie.call(Function.call,String.prototype.slice),le=ie.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),oe=ie.call(Function.call,RegExp.prototype.test,/^0o[0-7]+$/i),se=["\x85","\u200B","\uFFFE"].join(""),de=new RegExp("["+se+"]","g"),ue=ie.call(Function.call,RegExp.prototype.test,de),he=/^[\-\+]0x[0-9a-f]+$/i,me=ie.call(Function.call,RegExp.prototype.test,he),ce=["\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),pe=new RegExp("(^["+ce+"]+)|(["+ce+"]+$)","g"),ge=ie.call(Function.call,String.prototype.replace),fe=function(ke){return ge(ke,pe,"")},_e=D("./es5"),be=D("is-regex"),ye=Q(Q({},_e),{Call:function(ke,we){var ve=2<arguments.length?arguments[2]:[];if(!this.IsCallable(ke))throw new TypeError(ke+" is not a function");return ke.apply(we,ve)},ToPrimitive:te,ToNumber:function(ke){var we=ee(ke)?ke:te(ke,"number");if("symbol"==typeof we)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof we){if(le(we))return this.ToNumber(ae(ne(we,2),2));if(oe(we))return this.ToNumber(ae(ne(we,2),8));if(ue(we)||me(we))return NaN;var ve=fe(we);if(ve!==we)return this.ToNumber(ve)}return+we},ToInt16:function(ke){var we=this.ToUint16(ke);return 32768<=we?we-65536:we},ToInt8:function(ke){var we=this.ToUint8(ke);return 128<=we?we-256:we},ToUint8:function(ke){var we=this.ToNumber(ke);if(G(we)||0===we||!Z(we))return 0;var ve=$(we)*Math.floor(Math.abs(we));return J(ve,256)},ToUint8Clamp:function(ke){var we=this.ToNumber(ke);if(G(we)||0>=we)return 0;if(255<=we)return 255;var ve=Math.floor(ke);return ve+0.5<we?ve+1:we<ve+0.5?ve:0==ve%2?ve:ve+1},ToString:function(ke){if("symbol"==typeof ke)throw new TypeError("Cannot convert a Symbol value to a string");return ke+""},ToObject:function(ke){return this.RequireObjectCoercible(ke),Object(ke)},ToPropertyKey:function(ke){var we=this.ToPrimitive(ke,String);return"symbol"==typeof we?L.call(we):this.ToString(we)},ToLength:function(ke){var we=this.ToInteger(ke);return 0>=we?0:we>W?W:we},CanonicalNumericIndexString:function(ke){if("[object String]"!==T.call(ke))throw new TypeError("must be a string");if("-0"===ke)return-0;var we=this.ToNumber(ke);return this.SameValue(this.ToString(we),ke)?we:void 0},RequireObjectCoercible:_e.CheckObjectCoercible,IsArray:Array.isArray||function(ke){return"[object Array]"===T.call(ke)},IsConstructor:function(ke){return"function"==typeof ke&&!!ke.prototype},IsExtensible:function(ke){return!Object.preventExtensions||!ee(ke)&&Object.isExtensible(ke)},IsInteger:function(ke){if("number"!=typeof ke||G(ke)||!Z(ke))return!1;var we=Math.abs(ke);return Math.floor(we)===we},IsPropertyKey:function(ke){return"string"==typeof ke||"symbol"==typeof ke},IsRegExp:function(ke){if(!ke||"object"!=typeof ke)return!1;if(E){var we=ke[Symbol.match];if("undefined"!=typeof we)return _e.ToBoolean(we)}return be(ke)},SameValueZero:function(ke,we){return ke===we||G(ke)&&G(we)},Type:function(ke){return"symbol"==typeof ke?"Symbol":_e.Type(ke)},SpeciesConstructor:function(ke,we){if("Object"!==this.Type(ke))throw new TypeError("Assertion failed: Type(O) is not Object");var ve=ke.constructor;if("undefined"==typeof ve)return we;if("Object"!==this.Type(ve))throw new TypeError("O.constructor is not an Object");var Me=E&&Symbol.species?ve[Symbol.species]:void 0;if(null==Me)return we;if(this.IsConstructor(Me))return Me;throw new TypeError("no constructor found")}});delete ye.CheckObjectCoercible,I.exports=ye},{"./es5":24,"./helpers/assign":26,"./helpers/isFinite":27,"./helpers/isNaN":28,"./helpers/isPrimitive":29,"./helpers/mod":30,"./helpers/sign":31,"es-to-primitive/es6":33,"function-bind":43,"is-regex":54}],26:[function(D,I,R){"use strict";var T=Object.prototype.hasOwnProperty;I.exports=Object.assign||function(L,G){for(var Z in G)T.call(G,Z)&&(L[Z]=G[Z]);return L}},{}],27:[function(D,I,R){"use strict";var T=Number.isNaN||function(E){return E!==E};I.exports=Number.isFinite||function(E){return"number"==typeof E&&!T(E)&&E!==1/0&&E!==-(1/0)}},{}],28:[function(D,I,R){"use strict";I.exports=Number.isNaN||function(E){return E!==E}},{}],29:[function(D,I,R){"use strict";I.exports=function(E){return null===E||"function"!=typeof E&&"object"!=typeof E}},{}],30:[function(D,I,R){"use strict";I.exports=function(E,L){var G=E%L;return Math.floor(0<=G?G:G+L)}},{}],31:[function(D,I,R){"use strict";I.exports=function(E){return 0<=E?1:-1}},{}],32:[function(D,I,R){"use strict";var T=Object.prototype.toString,E=D("./helpers/isPrimitive"),L=D("is-callable"),G={"[[DefaultValue]]":function(W,Q){var $=Q||("[object Date]"===T.call(W)?String:Number);if($===String||$===Number){var J=$===String?["toString","valueOf"]:["valueOf","toString"],ee,te;for(te=0;te<J.length;++te)if(L(W[J[te]])&&(ee=W[J[te]](),E(ee)))return ee;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};I.exports=function(W,Q){return E(W)?W:G["[[DefaultValue]]"](W,Q)}},{"./helpers/isPrimitive":34,"is-callable":50}],33:[function(D,I,R){"use strict";var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,E=D("./helpers/isPrimitive"),L=D("is-callable"),G=D("is-date-object"),Z=D("is-symbol"),W=function(J,ee){if("undefined"==typeof J||null===J)throw new TypeError("Cannot call method on "+J);if("string"!=typeof ee||"number"!==ee&&"string"!==ee)throw new TypeError("hint must be \"string\" or \"number\"");var te="string"===ee?["toString","valueOf"]:["valueOf","toString"],ae,ie,ne;for(ne=0;ne<te.length;++ne)if(ae=J[te[ne]],L(ae)&&(ie=ae.call(J),E(ie)))return ie;throw new TypeError("No default value")},Q=function(J,ee){var te=J[ee];if(null!==te&&"undefined"!=typeof te){if(!L(te))throw new TypeError(te+" returned for property "+ee+" of object "+J+" is not a function");return te}};I.exports=function(J,ee){if(E(J))return J;var te="default";1<arguments.length&&(ee===String?te="string":ee===Number&&(te="number"));var ae;if(T&&(Symbol.toPrimitive?ae=Q(J,Symbol.toPrimitive):Z(J)&&(ae=Symbol.prototype.valueOf)),"undefined"!=typeof ae){var ie=ae.call(J,te);if(E(ie))return ie;throw new TypeError("unable to convert exotic object to primitive")}return"default"==te&&(G(J)||Z(J))&&(te="string"),W(J,"default"==te?"number":te)}},{"./helpers/isPrimitive":34,"is-callable":50,"is-date-object":51,"is-symbol":55}],34:[function(D,I,R){arguments[4][29][0].apply(R,arguments)},{dup:29}],35:[function(D,I,R){"use strict";var T=Object.prototype.hasOwnProperty,E=Object.prototype.toString,L=function(W){return"function"==typeof Array.isArray?Array.isArray(W):"[object Array]"===E.call(W)},G=function(W){if(!W||"[object Object]"!==E.call(W))return!1;var Q=T.call(W,"constructor"),$=W.constructor&&W.constructor.prototype&&T.call(W.constructor.prototype,"isPrototypeOf");if(W.constructor&&!Q&&!$)return!1;for(var J in W);return"undefined"==typeof J||T.call(W,J)};I.exports=function Z(){var ae=arguments[0],ie=1,ne=arguments.length,le=!1,W,Q,$,J,ee,te;for("boolean"==typeof ae?(le=ae,ae=arguments[1]||{},ie=2):("object"!=typeof ae&&"function"!=typeof ae||null==ae)&&(ae={});ie<ne;++ie)if(W=arguments[ie],null!=W)for(Q in W)$=ae[Q],J=W[Q],ae!==J&&(le&&J&&(G(J)||(ee=L(J)))?(ee?(ee=!1,te=$&&L($)?$:[]):te=$&&G($)?$:{},ae[Q]=Z(le,te,J)):"undefined"!=typeof J&&(ae[Q]=J));return ae}},{}],36:[function(D,I,R){"use strict";var T=D("iobuffer"),E=D("tiff");I.exports=function(G){var Z=new T(G),W={};Z.setBigEndian();var Q=Z.readUint16();if(65496!==Q)throw new Error("SOI marker not found. Not a valid JPEG file");var $=Z.readUint16();if(65505===$){Z.readUint16();var J=Z.readBytes(6);if(69===J[0]&&120===J[1]&&105===J[2]&&102===J[3]&&0===J[4]&&0===J[5]){var ee=E.decode(Z,{onlyFirst:!0,ignoreImageData:!0,offset:Z.offset});W.exif=ee}}return W}},{iobuffer:48,tiff:137}],37:[function(D,I,R){"use strict";R.decode=D("./decode")},{"./decode":36}],38:[function(D,I,R){"use strict";function T(te,ae,ie){for(var ne=0;ne<ie;ne++)ae[ne]=te[ne]}function E(te,ae,ie,ne){for(var le=0;le<ne;le++)ae[le]=te[le];for(;le<ie;le++)ae[le]=255&te[le]+ae[le-ne]}function L(te,ae,ie,ne){var le=0;if(0===ie.length)for(;le<ne;le++)ae[le]=te[le];else for(;le<ne;le++)ae[le]=255&te[le]+ie[le]}function G(te,ae,ie,ne,le){var oe=0;if(0===ie.length){for(;oe<le;oe++)ae[oe]=te[oe];for(;oe<ne;oe++)ae[oe]=255&te[oe]+(ae[oe-le]>>1)}else{for(;oe<le;oe++)ae[oe]=255&te[oe]+(ie[oe]>>1);for(;oe<ne;oe++)ae[oe]=255&te[oe]+(ae[oe-le]+ie[oe]>>1)}}function Z(te,ae,ie,ne,le){var oe=0;if(0===ie.length){for(;oe<le;oe++)ae[oe]=te[oe];for(;oe<ne;oe++)ae[oe]=255&te[oe]+ae[oe-le]}else{for(;oe<le;oe++)ae[oe]=255&te[oe]+ie[oe];for(;oe<ne;oe++)ae[oe]=255&te[oe]+W(ae[oe-le],ie[oe],ie[oe-le])}}function W(te,ae,ie){var ne=te+ae-ie,le=Math.abs(ne-te),oe=Math.abs(ne-ae),se=Math.abs(ne-ie);if(le<=oe&&le<=se)return te;return oe<=se?ae:ie}var Q=D("iobuffer"),$=D("pako").Inflate,J=new Uint8Array(0),ee=[137,80,78,71,13,10,26,10];I.exports=class extends Q{constructor(ae){super(ae),this._decoded=!1,this._inflator=new $,this._png=null,this._end=!1,this.setBigEndian()}decode(){if(this._decoded)return this._png;for(this._png={tEXt:{}},this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(var ae=0;8>ae;ae++)if(this.readUint8()!==ee[ae])throw new Error(`Wrong PNG signature. Byte at ${ae} should be ${ee[ae]}.`)}decodeChunk(){var ae=this.readUint32(),ie=this.readChars(4),ne=this.offset;switch(ie){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(ae);break;case"IDAT":this.decodeIDAT(ae);break;case"tEXt":this.decodetEXt(ae);break;case"IEND":this._end=!0;break;default:this.skip(ae);}if(this.offset-ne!==ae)throw new Error("Length mismatch while decoding chunk "+ie);this.readUint32()}decodeIHDR(){var ae=this._png;if(ae.width=this.readUint32(),ae.height=this.readUint32(),ae.bitDepth=this.readUint8(),ae.colourType=this.readUint8(),ae.compressionMethod=this.readUint8(),ae.filterMethod=this.readUint8(),ae.interlaceMethod=this.readUint8(),0!==this._png.compressionMethod)throw new Error("Unsupported compression method: "+ae.compressionMethod)}decodePLTE(ae){if(0!=ae%3)throw new RangeError("PLTE field length must be a multiple of 3. Got "+ae);var ie=ae/3;this._hasPalette=!0;var ne=this._palette=Array(ie);for(var le=0;le<ie;le++)ne[le]=[this.readUint8(),this.readUint8(),this.readUint8()]}decodeIDAT(ae){this._inflator.push(new Uint8Array(this.buffer,this.offset,ae)),this.skip(ae)}decodetEXt(ae){for(var ie="",ne;"\0"!==(ne=this.readChar());)ie+=ne;this._png.tEXt[ie]=this.readChars(ae-ie.length-1)}decodeImage(){if(this._inflator.push(J,!0),this._inflator.err)throw new Error("Error while decompressing the data");var ae=this._inflator.result;if(this._inflator=null,0!==this._png.filterMethod)throw new Error("Filter method "+this._png.filterMethod+" not supported");if(0===this._png.interlaceMethod)this.decodeInterlaceNull(ae);else throw new Error("Interlace method "+this._png.interlaceMethod+" not supported")}decodeInterlaceNull(ae){var ie;switch(this._png.colourType){case 0:ie=1;break;case 2:ie=3;break;case 3:if(!this._hasPalette)throw new Error("Missing palette");ie=1;break;case 4:ie=2;break;case 6:ie=4;break;default:throw new Error("Unknown colour type: "+this._png.colourType);}var ne=this._png.height,le=ie*this._png.bitDepth/8,oe=this._png.width*le,se=new Uint8Array(this._png.height*oe),de=J,ue=0,he,me;for(var ce=0;ce<ne;ce++){switch(he=ae.subarray(ue+1,ue+1+oe),me=se.subarray(ce*oe,(ce+1)*oe),ae[ue]){case 0:T(he,me,oe);break;case 1:E(he,me,oe,le);break;case 2:L(he,me,de,oe);break;case 3:G(he,me,de,oe,le);break;case 4:Z(he,me,de,oe,le);break;default:throw new Error("Unsupported filter: "+ae[ue]);}de=me,ue+=oe+1}this._hasPalette&&(this._png.palette=this._palette),this._png.data=se}}},{iobuffer:48,pako:118}],39:[function(D,I,R){"use strict";R.PNGDecoder=D("./PNGDecoder")},{"./PNGDecoder":38}],40:[function(D,I,R){"use strict";I.exports=function(T){return T&&1<T.length?255===T[0]&&216===T[1]&&255===T[2]?{ext:"jpg",mime:"image/jpeg"}:137===T[0]&&80===T[1]&&78===T[2]&&71===T[3]?{ext:"png",mime:"image/png"}:71===T[0]&&73===T[1]&&70===T[2]?{ext:"gif",mime:"image/gif"}:87===T[8]&&69===T[9]&&66===T[10]&&80===T[11]?{ext:"webp",mime:"image/webp"}:70===T[0]&&76===T[1]&&73===T[2]&&70===T[3]?{ext:"flif",mime:"image/flif"}:(73===T[0]&&73===T[1]&&42===T[2]&&0===T[3]||77===T[0]&&77===T[1]&&0===T[2]&&42===T[3])&&67===T[8]&&82===T[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===T[0]&&73===T[1]&&42===T[2]&&0===T[3]||77===T[0]&&77===T[1]&&0===T[2]&&42===T[3]?{ext:"tif",mime:"image/tiff"}:66===T[0]&&77===T[1]?{ext:"bmp",mime:"image/bmp"}:73===T[0]&&73===T[1]&&188===T[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===T[0]&&66===T[1]&&80===T[2]&&83===T[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===T[0]&&75===T[1]&&3===T[2]&&4===T[3]&&109===T[30]&&105===T[31]&&109===T[32]&&101===T[33]&&116===T[34]&&121===T[35]&&112===T[36]&&101===T[37]&&97===T[38]&&112===T[39]&&112===T[40]&&108===T[41]&&105===T[42]&&99===T[43]&&97===T[44]&&116===T[45]&&105===T[46]&&111===T[47]&&110===T[48]&&47===T[49]&&101===T[50]&&112===T[51]&&117===T[52]&&98===T[53]&&43===T[54]&&122===T[55]&&105===T[56]&&112===T[57]?{ext:"epub",mime:"application/epub+zip"}:80===T[0]&&75===T[1]&&3===T[2]&&4===T[3]&&77===T[30]&&69===T[31]&&84===T[32]&&65===T[33]&&45===T[34]&&73===T[35]&&78===T[36]&&70===T[37]&&47===T[38]&&109===T[39]&&111===T[40]&&122===T[41]&&105===T[42]&&108===T[43]&&108===T[44]&&97===T[45]&&46===T[46]&&114===T[47]&&115===T[48]&&97===T[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80===T[0]&&75===T[1]&&(3===T[2]||5===T[2]||7===T[2])&&(4===T[3]||6===T[3]||8===T[3])?{ext:"zip",mime:"application/zip"}:117===T[257]&&115===T[258]&&116===T[259]&&97===T[260]&&114===T[261]?{ext:"tar",mime:"application/x-tar"}:82===T[0]&&97===T[1]&&114===T[2]&&33===T[3]&&26===T[4]&&7===T[5]&&(0===T[6]||1===T[6])?{ext:"rar",mime:"application/x-rar-compressed"}:31===T[0]&&139===T[1]&&8===T[2]?{ext:"gz",mime:"application/gzip"}:66===T[0]&&90===T[1]&&104===T[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===T[0]&&122===T[1]&&188===T[2]&&175===T[3]&&39===T[4]&&28===T[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===T[0]&&1===T[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===T[0]&&0===T[1]&&0===T[2]&&(24===T[3]||32===T[3])&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]||51===T[0]&&103===T[1]&&112===T[2]&&53===T[3]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&109===T[8]&&112===T[9]&&52===T[10]&&50===T[11]&&109===T[16]&&112===T[17]&&52===T[18]&&49===T[19]&&109===T[20]&&112===T[21]&&52===T[22]&&50===T[23]&&105===T[24]&&115===T[25]&&111===T[26]&&109===T[27]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&105===T[8]&&115===T[9]&&111===T[10]&&109===T[11]||0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&109===T[8]&&112===T[9]&&52===T[10]&&50===T[11]&&0===T[12]&&0===T[13]&&0===T[14]&&0===T[15]?{ext:"mp4",mime:"video/mp4"}:0===T[0]&&0===T[1]&&0===T[2]&&28===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&77===T[8]&&52===T[9]&&86===T[10]?{ext:"m4v",mime:"video/x-m4v"}:77===T[0]&&84===T[1]&&104===T[2]&&100===T[3]?{ext:"mid",mime:"audio/midi"}:109===T[31]&&97===T[32]&&116===T[33]&&114===T[34]&&111===T[35]&&115===T[36]&&107===T[37]&&97===T[38]?{ext:"mkv",mime:"video/x-matroska"}:26===T[0]&&69===T[1]&&223===T[2]&&163===T[3]?{ext:"webm",mime:"video/webm"}:0===T[0]&&0===T[1]&&0===T[2]&&20===T[3]&&102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]?{ext:"mov",mime:"video/quicktime"}:82===T[0]&&73===T[1]&&70===T[2]&&70===T[3]&&65===T[8]&&86===T[9]&&73===T[10]?{ext:"avi",mime:"video/x-msvideo"}:48===T[0]&&38===T[1]&&178===T[2]&&117===T[3]&&142===T[4]&&102===T[5]&&207===T[6]&&17===T[7]&&166===T[8]&&217===T[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===T[0]&&0===T[1]&&1===T[2]&&"b"===T[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===T[0]&&68===T[1]&&51===T[2]||255===T[0]&&251===T[1]?{ext:"mp3",mime:"audio/mpeg"}:102===T[4]&&116===T[5]&&121===T[6]&&112===T[7]&&77===T[8]&&52===T[9]&&65===T[10]||77===T[0]&&52===T[1]&&65===T[2]&&32===T[3]?{ext:"m4a",mime:"audio/m4a"}:79===T[28]&&112===T[29]&&117===T[30]&&115===T[31]&&72===T[32]&&101===T[33]&&97===T[34]&&100===T[35]?{ext:"opus",mime:"audio/opus"}:79===T[0]&&103===T[1]&&103===T[2]&&83===T[3]?{ext:"ogg",mime:"audio/ogg"}:102===T[0]&&76===T[1]&&97===T[2]&&67===T[3]?{ext:"flac",mime:"audio/x-flac"}:82===T[0]&&73===T[1]&&70===T[2]&&70===T[3]&&87===T[8]&&65===T[9]&&86===T[10]&&69===T[11]?{ext:"wav",mime:"audio/x-wav"}:35===T[0]&&33===T[1]&&65===T[2]&&77===T[3]&&82===T[4]&&10===T[5]?{ext:"amr",mime:"audio/amr"}:37===T[0]&&80===T[1]&&68===T[2]&&70===T[3]?{ext:"pdf",mime:"application/pdf"}:77===T[0]&&90===T[1]?{ext:"exe",mime:"application/x-msdownload"}:(67===T[0]||70===T[0])&&87===T[1]&&83===T[2]?{ext:"swf",mime:"application/x-shockwave-flash"}:123===T[0]&&92===T[1]&&114===T[2]&&116===T[3]&&102===T[4]?{ext:"rtf",mime:"application/rtf"}:119===T[0]&&79===T[1]&&70===T[2]&&70===T[3]&&(0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]||79===T[4]&&84===T[5]&&84===T[6]&&79===T[7])?{ext:"woff",mime:"application/font-woff"}:119===T[0]&&79===T[1]&&70===T[2]&&50===T[3]&&(0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]||79===T[4]&&84===T[5]&&84===T[6]&&79===T[7])?{ext:"woff2",mime:"application/font-woff"}:76===T[34]&&80===T[35]&&(0===T[8]&&0===T[9]&&1===T[10]||1===T[8]&&0===T[9]&&2===T[10]||2===T[8]&&0===T[9]&&2===T[10])?{ext:"eot",mime:"application/octet-stream"}:0===T[0]&&1===T[1]&&0===T[2]&&0===T[3]&&0===T[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===T[0]&&84===T[1]&&84===T[2]&&79===T[3]&&0===T[4]?{ext:"otf",mime:"application/font-sfnt"}:0===T[0]&&0===T[1]&&1===T[2]&&0===T[3]?{ext:"ico",mime:"image/x-icon"}:70===T[0]&&76===T[1]&&86===T[2]&&1===T[3]?{ext:"flv",mime:"video/x-flv"}:37===T[0]&&33===T[1]?{ext:"ps",mime:"application/postscript"}:253===T[0]&&55===T[1]&&122===T[2]&&88===T[3]&&90===T[4]&&0===T[5]?{ext:"xz",mime:"application/x-xz"}:83===T[0]&&81===T[1]&&76===T[2]&&105===T[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===T[0]&&69===T[1]&&83===T[2]&&26===T[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===T[0]&&114===T[1]&&50===T[2]&&52===T[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===T[0]&&83===T[1]&&67===T[2]&&70===T[3]||73===T[0]&&83===T[1]&&99===T[2]&&40===T[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===T[0]&&60===T[1]&&97===T[2]&&114===T[3]&&99===T[4]&&104===T[5]&&62===T[6]&&10===T[7]&&100===T[8]&&101===T[9]&&98===T[10]&&105===T[11]&&97===T[12]&&110===T[13]&&45===T[14]&&98===T[15]&&105===T[16]&&110===T[17]&&97===T[18]&&114===T[19]&&121===T[20]?{ext:"deb",mime:"application/x-deb"}:33===T[0]&&60===T[1]&&97===T[2]&&114===T[3]&&99===T[4]&&104===T[5]&&62===T[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===T[0]&&171===T[1]&&238===T[2]&&219===T[3]?{ext:"rpm",mime:"application/x-rpm"}:31===T[0]&&160===T[1]||31===T[0]&&157===T[1]?{ext:"Z",mime:"application/x-compress"}:76===T[0]&&90===T[1]&&73===T[2]&&80===T[3]?{ext:"lz",mime:"application/x-lzip"}:208===T[0]&&207===T[1]&&17===T[2]&&224===T[3]&&161===T[4]&&177===T[5]&&26===T[6]&&225===T[7]?{ext:"msi",mime:"application/x-msi"}:null:null}},{}],41:[function(D,I,R){"use strict";var T=Object.prototype.hasOwnProperty,E=Object.prototype.toString;I.exports=function(G,Z,W){if("[object Function]"!==E.call(Z))throw new TypeError("iterator must be a function");var Q=G.length;if(Q===+Q)for(var $=0;$<Q;$++)Z.call(W,G[$],$,G);else for(var J in G)T.call(G,J)&&Z.call(W,G[J],J,G)}},{}],42:[function(D,I,R){"use strict";var T=Array.prototype.slice,E=Object.prototype.toString;I.exports=function(G){var Z=this;if("function"!=typeof Z||"[object Function]"!==E.call(Z))throw new TypeError("Function.prototype.bind called on incompatible "+Z);var W=T.call(arguments,1),$=Math.max(0,Z.length-W.length),J=[],Q;for(var ee=0;ee<$;ee++)J.push("$"+ee);if(Q=Function("binder","return function ("+J.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof Q){var ie=Z.apply(this,W.concat(T.call(arguments)));return Object(ie)===ie?ie:this}return Z.apply(G,W.concat(T.call(arguments)))}),Z.prototype){var te=function(){};te.prototype=Z.prototype,Q.prototype=new te,te.prototype=null}return Q}},{}],43:[function(D,I,R){"use strict";var T=D("./implementation");I.exports=Function.prototype.bind||T},{"./implementation":42}],44:[function(D,I,R){"use strict";var T=Object.prototype.hasOwnProperty;I.exports=R=function(L,G){return T.call(G,L)},R.version=D("./package").version},{"./package":45}],45:[function(D,I,R){I.exports={name:"has-own",version:"1.0.0",description:"A safer .hasOwnProperty() - hasOwn(name, obj)",main:"index.js",scripts:{test:"make test"},author:"Aaron Heckmann <aaron.heckmann+github@gmail.com>",license:"MIT",repository:{type:"git",url:"git://github.com/pebble/has-own.git"},homepage:"https://github.com/pebble/has-own/",devDependencies:{mocha:"^1.21.0"}}},{}],46:[function(D,I,R){"use strict";var T=D("file-type");I.exports=function(E){var L=T(E);return-1===["jpg","png","gif","webp","tif","bmp","jxr","psd"].indexOf(L&&L.ext)?null:L}},{"file-type":40}],47:[function(D,I,R){(function(T){"use strict";function E(){J=!0;for(var ie=ee.length,te,ae;ie;){for(ae=ee,ee=[],te=-1;++te<ie;)ae[te]();ie=ee.length}J=!1}var L=T.MutationObserver||T.WebKitMutationObserver,G;if(L){var Z=0,W=new L(E),Q=T.document.createTextNode("");W.observe(Q,{characterData:!0}),G=function(){Q.data=Z=++Z%2}}else if(!T.setImmediate&&"undefined"!=typeof T.MessageChannel){var $=new T.MessageChannel;$.port1.onmessage=E,G=function(){$.port2.postMessage(0)}}else G="document"in T&&"onreadystatechange"in T.document.createElement("script")?function(){var ae=T.document.createElement("script");ae.onreadystatechange=function(){E(),ae.onreadystatechange=null,ae.parentNode.removeChild(ae),ae=null},T.document.documentElement.appendChild(ae)}:function(){setTimeout(E,0)};var J,ee=[];I.exports=function(ae){1!==ee.push(ae)||J||G()}}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],48:[function(D,I,R){"use strict";var T=8192,E=[];I.exports=class{constructor(G,Z){Z=Z||{},G===void 0&&(G=T),"number"==typeof G&&(G=new ArrayBuffer(G));var W=G.byteLength,Q=Z.offset?Z.offset>>>0:0;G.buffer&&(W=G.byteLength-Q,G=G.byteLength===G.buffer.byteLength?Q?G.buffer.slice(Q):G.buffer:G.buffer.slice(G.byteOffset+Q,G.byteOffset+G.byteLength)),this.buffer=G,this.length=W,this.byteLength=W,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=W||T,this._mark=0}available(G){return void 0===G&&(G=1),this.offset+G<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(G){G===void 0&&(G=1),this.offset+=G}seek(G){this.offset=G}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(G){if(void 0===G&&(G=1),!this.available(G)){var Z=this._increment+this._increment;this._increment=Z;var W=this.length+Z,Q=new Uint8Array(W);Q.set(new Uint8Array(this.buffer)),this.buffer=Q.buffer,this.length=W,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(G){G===void 0&&(G=1);var Z=new Uint8Array(G);for(var W=0;W<G;W++)Z[W]=this.readByte();return Z}readInt16(){var G=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,G}readUint16(){var G=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,G}readInt32(){var G=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,G}readUint32(){var G=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,G}readFloat32(){var G=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,G}readFloat64(){var G=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,G}readChar(){return String.fromCharCode(this.readInt8())}readChars(G){G===void 0&&(G=1),E.length=G;for(var Z=0;Z<G;Z++)E[Z]=this.readChar();return E.join("")}writeBoolean(G){this.writeUint8(G?255:0)}writeInt8(G){this.ensureAvailable(1),this._data.setInt8(this.offset++,G)}writeUint8(G){this.ensureAvailable(1),this._data.setUint8(this.offset++,G)}writeByte(G){this.writeUint8(G)}writeBytes(G){this.ensureAvailable(G.length);for(var Z=0;Z<G.length;Z++)this._data.setUint8(this.offset++,G[Z])}writeInt16(G){this.ensureAvailable(2),this._data.setInt16(this.offset,G,this.littleEndian),this.offset+=2}writeUint16(G){this.ensureAvailable(2),this._data.setUint16(this.offset,G,this.littleEndian),this.offset+=2}writeInt32(G){this.ensureAvailable(4),this._data.setInt32(this.offset,G,this.littleEndian),this.offset+=4}writeUint32(G){this.ensureAvailable(4),this._data.setUint32(this.offset,G,this.littleEndian),this.offset+=4}writeFloat32(G){this.ensureAvailable(4),this._data.setFloat32(this.offset,G,this.littleEndian),this.offset+=4}writeFloat64(G){this.ensureAvailable(8),this._data.setFloat64(this.offset,G,this.littleEndian),this.offset+=8}writeChar(G){this.writeUint8(G.charCodeAt(0))}writeChars(G){for(var Z=0;Z<G.length;Z++)this.writeUint8(G.charCodeAt(Z))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},{}],49:[function(D,I,R){"use strict";var T=Object.prototype.toString;I.exports=function(L){return"Array"===T.call(L).substr(-6,5)}},{}],50:[function(D,I,R){"use strict";var T=Function.prototype.toString,E=/^\s*class /,L=function($){try{var J=T.call($),ee=J.replace(/\/\/.*\n/g,""),te=ee.replace(/\/\*[.\s\S]*\*\//g,""),ae=te.replace(/\n/mg," ").replace(/ {2}/g," ");return E.test(ae)}catch(ie){return!1}},G=function($){try{return!L($)&&(T.call($),!0)}catch(J){return!1}},Z=Object.prototype.toString,W="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;I.exports=function($){if(!$)return!1;if("function"!=typeof $&&"object"!=typeof $)return!1;if(W)return G($);if(L($))return!1;var J=Z.call($);return"[object Function]"===J||"[object GeneratorFunction]"===J}},{}],51:[function(D,I,R){"use strict";var T=Date.prototype.getDay,E=function(W){try{return T.call(W),!0}catch(Q){return!1}},L=Object.prototype.toString,G="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;I.exports=function(W){return"object"!=typeof W||null===W?!1:G?E(W):"[object Date]"===L.call(W)}},{}],52:[function(D,I,R){"use strict";var T=D("number-is-nan");I.exports=Number.isFinite||function(E){return!("number"!=typeof E||T(E)||E===1/0||E===-(1/0))}},{"number-is-nan":115}],53:[function(D,I,R){"use strict";var T=D("is-finite");I.exports=Number.isInteger||function(E){return"number"==typeof E&&T(E)&&Math.floor(E)===E}},{"is-finite":52}],54:[function(D,I,R){"use strict";var T=RegExp.prototype.exec,E=function(W){try{return T.call(W),!0}catch(Q){return!1}},L=Object.prototype.toString,G="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;I.exports=function(W){return!("object"!=typeof W)&&(G?E(W):"[object RegExp]"===L.call(W))}},{}],55:[function(D,I,R){"use strict";var T=Object.prototype.toString,E="function"==typeof Symbol&&"symbol"==typeof Symbol();if(E){var L=Symbol.prototype.toString,G=/^Symbol\(.*\)$/,Z=function(Q){return!("symbol"!=typeof Q.valueOf())&&G.test(L.call(Q))};I.exports=function(Q){if("symbol"==typeof Q)return!0;if("[object Symbol]"!==T.call(Q))return!1;try{return Z(Q)}catch($){return!1}}}else I.exports=function(Q){return!1}},{}],56:[function(D,I,R){(function(T){"use strict";(function(E){if("object"==typeof R&&"undefined"!=typeof I)I.exports=E();else if("function"==typeof define&&define.amd)define([],E);else{var L;L="undefined"==typeof window?"undefined"==typeof T?"undefined"==typeof self?this:self:T:window,L.PriorityQueue=E()}})(function(){return function E(L,G,Z){function W(J,ee){if(!G[J]){if(!L[J]){var te="function"==typeof D&&D;if(!ee&&te)return te(J,!0);if(Q)return Q(J,!0);var ae=new Error("Cannot find module '"+J+"'");throw ae.code="MODULE_NOT_FOUND",ae}var ie=G[J]={exports:{}};L[J][0].call(ie.exports,function(ne){var le=L[J][1][ne];return W(le?le:ne)},ie,ie.exports,E,L,G,Z)}return G[J].exports}var Q="function"==typeof D&&D;for(var $=0;$<Z.length;$++)W(Z[$]);return W}({1:[function(E,L,G){var ee=function(ie,ne){function le(){this.constructor=ie}for(var oe in ne)te.call(ne,oe)&&(ie[oe]=ne[oe]);return le.prototype=ne.prototype,ie.prototype=new le,ie.__super__=ne.prototype,ie},te={}.hasOwnProperty,Z,W,Q,$,J;Z=E("./PriorityQueue/AbstractPriorityQueue"),W=E("./PriorityQueue/ArrayStrategy"),$=E("./PriorityQueue/BinaryHeapStrategy"),Q=E("./PriorityQueue/BHeapStrategy"),J=function(ae){function ie(ne){ne||(ne={}),ne.strategy||(ne.strategy=$),ne.comparator||(ne.comparator=function(le,oe){return(le||0)-(oe||0)}),ie.__super__.constructor.call(this,ne)}return ee(ie,ae),ie}(Z),J.ArrayStrategy=W,J.BinaryHeapStrategy=$,J.BHeapStrategy=Q,L.exports=J},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(E,L,G){var Z;L.exports=Z=function(){function W(Q){var $;if(null==(null==Q?void 0:Q.strategy))throw"Must pass options.strategy, a strategy";if(null==(null==Q?void 0:Q.comparator))throw"Must pass options.comparator, a comparator";this.priv=new Q.strategy(Q),this.length=(null==Q||null==($=Q.initialValues)?void 0:$.length)||0}return W.prototype.queue=function(Q){return this.length++,this.priv.queue(Q),void 0},W.prototype.dequeue=function(Q){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},W.prototype.peek=function(Q){if(!this.length)throw"Empty queue";return this.priv.peek()},W.prototype.clear=function(){return this.length=0,this.priv.clear()},W}()},{}],3:[function(E,L,G){var Z,W;W=function($,J,ee){var te,ae,ie;for(ae=0,te=$.length;ae<te;)ie=ae+te>>>1,0<=ee($[ie],J)?ae=ie+1:te=ie;return ae},L.exports=Z=function(){function Q($){var J;this.options=$,this.comparator=this.options.comparator,this.data=(null==(J=this.options.initialValues)?void 0:J.slice(0))||[],this.data.sort(this.comparator).reverse()}return Q.prototype.queue=function($){var J=W(this.data,$,this.comparator);return this.data.splice(J,0,$),void 0},Q.prototype.dequeue=function(){return this.data.pop()},Q.prototype.peek=function(){return this.data[this.data.length-1]},Q.prototype.clear=function(){return this.data.length=0,void 0},Q}()},{}],4:[function(E,L,G){var Z;L.exports=Z=function(){function W(Q){var $,J,ee,te,ae,ie,ne,le,oe;for(this.comparator=(null==Q?void 0:Q.comparator)||function(se,de){return se-de},this.pageSize=(null==Q?void 0:Q.pageSize)||512,this.length=0,le=0;1<<le<this.pageSize;)le+=1;if(1<<le!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=le,this._emptyMemoryPageTemplate=$=[],(J=ee=0,ie=this.pageSize);0<=ie?ee<ie:ee>ie;J=0<=ie?++ee:--ee)$.push(null);if(this._memory=[],this._mask=this.pageSize-1,Q.initialValues)for(ne=Q.initialValues,te=0,ae=ne.length;te<ae;te++)oe=ne[te],this.queue(oe)}return W.prototype.queue=function(Q){return this.length+=1,this._write(this.length,Q),this._bubbleUp(this.length,Q),void 0},W.prototype.dequeue=function(){var Q,$;return Q=this._read(1),$=this._read(this.length),this.length-=1,0<this.length&&(this._write(1,$),this._bubbleDown(1,$)),Q},W.prototype.peek=function(){return this._read(1)},W.prototype.clear=function(){return this.length=0,this._memory.length=0,void 0},W.prototype._write=function(Q,$){for(var J=Q>>this._shift;J>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[J][Q&this._mask]=$},W.prototype._read=function(Q){return this._memory[Q>>this._shift][Q&this._mask]},W.prototype._bubbleUp=function(Q,$){var J,ee,te,ae;for(J=this.comparator;1<Q&&(ee=Q&this._mask,Q<this.pageSize||3<ee?te=Q&~this._mask|ee>>1:2>ee?(te=Q-this.pageSize>>this._shift,te+=te&~(this._mask>>1),te|=this.pageSize>>1):te=Q-2,ae=this._read(te),!(0>J(ae,$)));)this._write(te,$),this._write(Q,ae),Q=te;0},W.prototype._bubbleDown=function(Q,$){var J,ee,te,ae,ie;for(ie=this.comparator;Q<this.length;)if(Q>this._mask&&!(Q&this._mask-1)?J=ee=Q+2:Q&this.pageSize>>1?(J=(Q&~this._mask)>>1,J|=Q&this._mask>>1,J=J+1<<this._shift,ee=J+1):(J=Q+(Q&this._mask),ee=J+1),J!==ee&&ee<=this.length){if(te=this._read(J),ae=this._read(ee),0>ie(te,$)&&0>=ie(te,ae))this._write(J,$),this._write(Q,te),Q=J;else if(0>ie(ae,$))this._write(ee,$),this._write(Q,ae),Q=ee;else break;}else if(!(J<=this.length))break;else if(te=this._read(J),0>ie(te,$))this._write(J,$),this._write(Q,te),Q=J;else break;0},W}()},{}],5:[function(E,L,G){var Z;L.exports=Z=function(){function W(Q){var $;this.comparator=(null==Q?void 0:Q.comparator)||function(J,ee){return J-ee},this.length=0,this.data=(null==($=Q.initialValues)?void 0:$.slice(0))||[],this._heapify()}return W.prototype._heapify=function(){var Q,$,J;if(0<this.data.length)for(Q=$=1,J=this.data.length;1<=J?$<J:$>J;Q=1<=J?++$:--$)this._bubbleUp(Q);0},W.prototype.queue=function(Q){return this.data.push(Q),this._bubbleUp(this.data.length-1),void 0},W.prototype.dequeue=function(){var Q,$;return $=this.data[0],Q=this.data.pop(),0<this.data.length&&(this.data[0]=Q,this._bubbleDown(0)),$},W.prototype.peek=function(){return this.data[0]},W.prototype.clear=function(){return this.length=0,this.data.length=0,void 0},W.prototype._bubbleUp=function(Q){for(var $,J;0<Q&&($=Q-1>>>1,0>this.comparator(this.data[Q],this.data[$]));)J=this.data[$],this.data[$]=this.data[Q],this.data[Q]=J,Q=$;0},W.prototype._bubbleDown=function(Q){var $,J,ee,te,ae;for($=this.data.length-1;J=(Q<<1)+1,te=J+1,ee=Q,J<=$&&0>this.comparator(this.data[J],this.data[ee])&&(ee=J),te<=$&&0>this.comparator(this.data[te],this.data[ee])&&(ee=te),ee!==Q;)ae=this.data[ee],this.data[ee]=this.data[Q],this.data[Q]=ae,Q=ee;0},W}()},{}]},{},[1])(1)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],57:[function(D,I,R){"use strict";function T(){}function E(ie){if("function"!=typeof ie)throw new TypeError("resolver must be a function");this.state=ae,this.queue=[],this.outcome=void 0,ie!==T&&W(this,ie)}function L(ie,ne,le){this.promise=ie,"function"==typeof ne&&(this.onFulfilled=ne,this.callFulfilled=this.otherCallFulfilled),"function"==typeof le&&(this.onRejected=le,this.callRejected=this.otherCallRejected)}function G(ie,ne,le){$(function(){var oe;try{oe=ne(le)}catch(se){return J.reject(ie,se)}oe===ie?J.reject(ie,new TypeError("Cannot resolve promise with itself")):J.resolve(ie,oe)})}function Z(ie){var ne=ie&&ie.then;if(ie&&"object"==typeof ie&&"function"==typeof ne)return function(){ne.apply(ie,arguments)}}function W(ie,ne){function le(ue){se||(se=!0,J.reject(ie,ue))}function oe(ue){se||(se=!0,J.resolve(ie,ue))}var se=!1,de=Q(function(){ne(oe,le)});"error"===de.status&&le(de.value)}function Q(ie,ne){var le={};try{le.value=ie(ne),le.status="success"}catch(oe){le.status="error",le.value=oe}return le}var $=D("immediate"),J={},ee=["REJECTED"],te=["FULFILLED"],ae=["PENDING"];I.exports=E,E.prototype["catch"]=function(ie){return this.then(null,ie)},E.prototype.then=function(ie,ne){if("function"!=typeof ie&&this.state===te||"function"!=typeof ne&&this.state===ee)return this;var le=new this.constructor(T);if(this.state!==ae){var oe=this.state===te?ie:ne;G(le,oe,this.outcome)}else this.queue.push(new L(le,ie,ne));return le},L.prototype.callFulfilled=function(ie){J.resolve(this.promise,ie)},L.prototype.otherCallFulfilled=function(ie){G(this.promise,this.onFulfilled,ie)},L.prototype.callRejected=function(ie){J.reject(this.promise,ie)},L.prototype.otherCallRejected=function(ie){G(this.promise,this.onRejected,ie)},J.resolve=function(ie,ne){var le=Q(Z,ne);if("error"===le.status)return J.reject(ie,le.value);var oe=le.value;if(oe)W(ie,oe);else{ie.state=te,ie.outcome=ne;for(var se=-1,de=ie.queue.length;++se<de;)ie.queue[se].callFulfilled(ne)}return ie},J.reject=function(ie,ne){ie.state=ee,ie.outcome=ne;for(var le=-1,oe=ie.queue.length;++le<oe;)ie.queue[le].callRejected(ne);return ie},E.resolve=function(ne){return ne instanceof this?ne:J.resolve(new this(T),ne)},E.reject=function(ne){var le=new this(T);return J.reject(le,ne)},E.all=function(ne){function le(pe,ge){oe.resolve(pe).then(function(_e){ue[ge]=_e,++he!==se||de||(de=!0,J.resolve(ce,ue))},function(fe){de||(de=!0,J.reject(ce,fe))})}var oe=this;if("[object Array]"!==Object.prototype.toString.call(ne))return this.reject(new TypeError("must be an array"));var se=ne.length,de=!1;if(!se)return this.resolve([]);for(var ue=Array(se),he=0,me=-1,ce=new this(T);++me<se;)le(ne[me],me);return ce},E.race=function(ne){function le(me){oe.resolve(me).then(function(ce){de||(de=!0,J.resolve(he,ce))},function(ce){de||(de=!0,J.reject(he,ce))})}var oe=this;if("[object Array]"!==Object.prototype.toString.call(ne))return this.reject(new TypeError("must be an array"));var se=ne.length,de=!1;if(!se)return this.resolve([]);for(var ue=-1,he=new this(T);++ue<se;)le(ne[ue]);return he}},{immediate:47}],58:[function(D,I,R){"use strict";function T(L){var G=Array(L[0].length);for(var Z=0;Z<G.length;++Z)G[Z]=Array(L.length);for(Z=0;Z<L.length;++Z)for(var W=0;W<L[0].length;++W)G[W][Z]=L[Z][W];return G}var E=D("ml-stat").array;I.exports={coordArrayToPoints:function(G,Z){if(0!=G.length%Z)throw new RangeError("Dimensions number must be accordance with the size of the array.");var W=G.length/Z,Q=Array(W),$=0;for(var J=0;J<G.length;J+=Z){var ee=Array(Z);for(var te=0;te<Z;++te)ee[te]=G[J+te];Q[$]=ee,$++}return Q},coordArrayToCoordMatrix:function(G,Z){if(0!=G.length%Z)throw new RangeError("Dimensions number must be accordance with the size of the array.");var W=Array(Z),Q=G.length/Z;for(var $=0;$<W.length;$++)W[$]=Array(Q);for($=0;$<G.length;$+=Z)for(var J=0;J<Z;++J){var ee=Math.floor($/Z);W[J][ee]=G[$+J]}return W},coordMatrixToCoordArray:function(G){var Z=Array(G.length*G[0].length),W=0;for(var Q=0;Q<G[0].length;++Q)for(var $=0;$<G.length;++$)Z[W]=G[$][Q],++W;return Z},coordMatrixToPoints:T,pointsToCoordArray:function(G){var Z=Array(G.length*G[0].length),W=0;for(var Q=0;Q<G.length;++Q)for(var $=0;$<G[0].length;++$)Z[W]=G[Q][$],++W;return Z},pointsToCoordMatrix:T,applyDotProduct:function(G,Z){var W,Q;G.length<=Z.length?(Q=G,W=Z):(Q=Z,W=G);var $=W.length-Q.length+1,J=Array($);for(var ee=0;ee<$;++ee){var te=0;for(var ae=0;ae<Q.length;++ae)te+=Q[ae]*W[ee+ae];J[ee]=te}return J},scale:function(G,Z){var W;W=Z.inPlace?G:Array(G.length);var Q=Z.max,$=Z.min;if("number"==typeof Q){if("number"==typeof $){var J=E.minMax(G),ee=(Q-$)/(J.max-J.min);for(var te=0;te<W.length;te++)W[te]=(G[te]-J.min)*ee+$}else{var ae=E.max(G),ee=Q/ae;for(var te=0;te<W.length;te++)W[te]=G[te]*ee}}else if("number"==typeof $){var ae=E.min(G),ee=$/ae;for(var te=0;te<W.length;te++)W[te]=G[te]*ee}return W}}},{"ml-stat":110}],59:[function(D,I,R){"use strict";function T(G,Z,W,Q,$){function J(ke,we,ve,Me){return(Me-we)/(ve-ke)}var ee=G.length,te=(Q-W)/($-1),ae=W-te/2,ie=Array($),ne=G[1]-G[0],le=G[G.length-1]-G[G.length-2],oe=ae,se=ae+te,de=Number.MIN_VALUE,ue=0,he=G[0]-ne,me=0,ce=0,pe=0,ge=0,fe=0,_e=0,be=0,ye=0;main:for(;!0;){for(;0<=he-se;){var xe=L(0,se-de,pe,ue);if(_e=ce+xe,ie[ye]=(_e-fe)/te,ye++,ye===$)break main;oe=se,se+=te,fe=_e}de<=oe&&oe<=he&&(xe=L(0,oe-de,pe,ue),fe=ce+xe),ce+=L(de,he,pe,ge),de=he,ue=me,be<ee?(he=G[be],me=Z[be],be++):be===ee&&(he+=le,me=0),pe=J(de,ue,he,me),ge=-pe*de+ue}return ie}function E(G,Z,W,Q,$){var J=G.length,ee=(Q-W)/($-1),te=G[G.length-1]-G[G.length-2],ae=W-ee/2,ie=Array($),ne=ae,le=ae+ee,oe=-Number.MAX_VALUE,se=0,de=G[0],ue=Z[0],he=0,me=!0,ce=0,pe=0,ge=1,fe=0;main:for(;!0;){if(oe>=de)throw new Error("x must be an increasing serie");for(;0<oe-le;){if(me&&(pe++,me=!1),ie[fe]=0>=pe?0:ce/pe,fe++,fe===$)break main;ne=le,le+=ee,ce=0,pe=0}oe>ne&&(ce+=se,pe++),(oe==-Number.MAX_VALUE||1<he)&&pe--,oe=de,se=ue,ge<J?(de=G[ge],ue=Z[ge],ge++):(de+=te,ue=0,he++)}return ie}function L(G,Z,W,Q){return 0.5*W*Z*Z+Q*Z-(0.5*W*G*G+Q*G)}R.getEquallySpacedData=function(Z,W,Q){1<Z.length&&Z[0]>Z[1]&&(Z=Z.slice().reverse(),W=W.slice().reverse());var $=Z.length;if($!==W.length)throw new RangeError("the x and y vector doesn't have the same size.");Q===void 0&&(Q={});var J=Q.from===void 0?Z[0]:Q.from;if(isNaN(J)||!isFinite(J))throw new RangeError("'From' value must be a number");var ee=Q.to===void 0?Z[Z.length-1]:Q.to;if(isNaN(ee)||!isFinite(ee))throw new RangeError("'To' value must be a number");var te=J>ee;if(te){var ae=J;J=ee,ee=ae}var ie=Q.numberOfPoints===void 0?100:Q.numberOfPoints;if(isNaN(ie)||!isFinite(ie))throw new RangeError("'Number of points' value must be a number");if(1>ie)throw new RangeError("the number of point must be higher than 1");var ne="slot"===Q.variant?"slot":"smooth",le="slot"==ne?E(Z,W,J,ee,ie):T(Z,W,J,ee,ie);return te?le.reverse():le},R.integral=L},{}],60:[function(D,I,R){"use strict";I.exports=R=D("./ArrayUtils"),R.getEquallySpacedData=D("./getEquallySpaced").getEquallySpacedData,R.SNV=D("./snv").SNV},{"./ArrayUtils":58,"./getEquallySpaced":59,"./snv":61}],61:[function(D,I,R){"use strict";R.SNV=function(L){var G=T.mean(L),Z=T.standardDeviation(L),W=L.slice();for(var Q=0;Q<L.length;Q++)W[Q]=(W[Q]-G)/Z;return W};var T=D("ml-stat").array},{"ml-stat":110}],62:[function(D,I,R){"use strict";function T(L,G){var Z=0;for(var W=0;W<L.length;W++)Z+=(L[W]-G[W])*(L[W]-G[W]);return Z}function E(L,G){return Math.sqrt(T(L,G))}I.exports=E,E.squared=T},{}],63:[function(D,I,R){"use strict";var T=D("./fftlib");I.exports={DEBUG:!1,ifft2DArray:function(L,G,Z){var W=Array(G*Z),Q=G/2,$=2*(Z-1);T.init(Q);var J={re:Array(Q),im:Array(Q)};for(var ee=0;ee<Z;ee++){for(var te=Q-1;0<=te;te--)J.re[te]=L[2*te*Z+ee],J.im[te]=L[(2*te+1)*Z+ee];T.bt(J.re,J.im);for(var te=Q-1;0<=te;te--)W[2*te*Z+ee]=J.re[te],W[(2*te+1)*Z+ee]=J.im[te]}var ae=Array(Q*$);T.init($);var ie={re:Array($),im:Array($)};for(var te=0;te<G;te+=2){ie.re[0]=W[te*Z],ie.im[0]=W[(te+1)*Z];for(var ee=1;ee<Z;ee++)ie.re[ee]=W[te*Z+ee],ie.im[ee]=W[(te+1)*Z+ee],ie.re[$-ee]=W[te*Z+ee],ie.im[$-ee]=-W[(te+1)*Z+ee];T.bt(ie.re,ie.im);var ne=te/2*$;for(var ee=$-1;0<=ee;ee--)ae[ne+ee]=ie.re[ee]/($*Q)}return ae},fft2DArray:function(L,G,Z,W){Object.assign({},{inplace:!0});var Q=Z/2+1,$=2*G,J=Array($*Q);T.init(Z);var ee={re:Array(Z),im:Array(Z)},te={re:Array(Z),im:Array(Z)},ae={re:Array(Z),im:Array(Z)},ie,ne,le,oe,se;for(var de=0;de<G/2;de++){ie=2*de*Z,ee.re=L.slice(ie,ie+Z),ie=(2*de+1)*Z,ee.im=L.slice(ie,ie+Z),T.fft1d(ee.re,ee.im),this.reconstructTwoRealFFT(ee,te,ae),ne=4*de*Q,le=(4*de+1)*Q,oe=(4*de+2)*Q,se=(4*de+3)*Q;for(var ue=Q-1;0<=ue;ue--)J[ne+ue]=te.re[ue],J[le+ue]=te.im[ue],J[oe+ue]=ae.re[ue],J[se+ue]=ae.im[ue]}te=null,ae=null;var he=Array($*Q);T.init(G);var me={re:Array(G),im:Array(G)};for(var ce=Q-1;0<=ce;ce--){for(var de=G-1;0<=de;de--)me.re[de]=J[2*de*Q+ce],me.im[de]=J[(2*de+1)*Q+ce],isNaN(me.re[de])&&(me.re[de]=0),isNaN(me.im[de])&&(me.im[de]=0);T.fft1d(me.re,me.im);for(var de=G-1;0<=de;de--)he[2*de*Q+ce]=me.re[de],he[(2*de+1)*Q+ce]=me.im[de]}return he},reconstructTwoRealFFT:function(L,G,Z){var W=L.re.length;G.re[0]=L.re[0],G.im[0]=0,Z.re[0]=L.im[0],Z.im[0]=0;var Q,$,J,ee,te;for(var ae=W/2;0<ae;ae--)te=W-ae,Q=0.5*(L.re[ae]-L.re[te]),$=0.5*(L.re[ae]+L.re[te]),J=0.5*(L.im[ae]-L.im[te]),ee=0.5*(L.im[ae]+L.im[te]),G.re[ae]=$,G.im[ae]=J,G.re[te]=$,G.im[te]=-J,Z.re[ae]=ee,Z.im[ae]=-Q,Z.re[te]=ee,Z.im[te]=Q},convolute2DI:function(L,G,Z,W){var Q,$;for(var J=0;J<Z/2;J++)for(var ee=0;ee<W;ee++)Q=L[2*J*W+ee]*G[2*J*W+ee]-L[(2*J+1)*W+ee]*G[(2*J+1)*W+ee],$=L[2*J*W+ee]*G[(2*J+1)*W+ee]+L[(2*J+1)*W+ee]*G[2*J*W+ee],L[2*J*W+ee]=Q,L[(2*J+1)*W+ee]=$},convolute:function(L,G,Z,W,Q){var $=Array(W*Z);for(var J=0;J<Z*W;J++)$[J]=L[J];$=this.fft2DArray($,Z,W);var ee=G.length,te=G[0].length,ae=Array(W*Z);for(var J=0;J<W*Z;J++)ae[J]=0;var le=Math.floor((ee-1)/2),oe=Math.floor((te-1)/2),ie,ne;for(var se=0;se<ee;se++){ie=(se-le+Z)%Z;for(var de=0;de<te;de++)ne=(de-oe+W)%W,ae[ie*W+ne]=G[se][de]}ae=this.fft2DArray(ae,Z,W);var ue=2*Z,he=W/2+1;return this.convolute2DI($,ae,ue,he),this.ifft2DArray($,ue,he)},toRadix2:function(L,G,Z){var W,Q,$,J,ee=Z,te=G;if(0===Z||0!=(Z&Z-1)){for(ee=0;0!=Z>>++ee;);ee=1<<ee}if(0===G||0!=(G&G-1)){for(te=0;0!=G>>++te;);te=1<<te}if(te==G&&ee==Z)return{data:L,rows:G,cols:Z};var ae=Array(te*ee),ie=Math.floor((te-G)/2)-G,ne=Math.floor((ee-Z)/2)-Z;for(W=0;W<te;W++)for($=W*ee,J=(W-ie)%G*Z,Q=0;Q<ee;Q++)ae[$+Q]=L[J+(Q-ne)%Z];return{data:ae,rows:te,cols:ee}},crop:function(L,G,Z,W,Q,$){if(G==W&&Z==Q)return L;Object.assign({},$);var J=Array(Q*W),ee=Math.floor((G-W)/2),te=Math.floor((Z-Q)/2),ae,ie,ne,le;for(ne=0;ne<W;ne++)for(ae=ne*Q,ie=(ne+ee)*Z,le=0;le<Q;le++)J[ae+le]=L[ie+(le+te)];return J}}},{"./fftlib":64}],64:[function(D,I,R){"use strict";(function(){var T;T="undefined"==typeof R?{}:R;var E={release:"0.3.0",date:"2013-03"};T.toString=function(){return"version "+E.release+", released "+E.date};var L=0,G=null,Z=null,W={init:function(ee){if(0!==ee&&0==(ee&ee-1))L=ee,W._initArray(),W._makeBitReversalTable(),W._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(ee,te){W.fft(ee,te,1)},ifft1d:function(ee,te){var ae=1/L;W.fft(ee,te,-1);for(var ie=0;ie<L;ie++)ee[ie]*=ae,te[ie]*=ae},bt1d:function(ee,te){W.fft(ee,te,-1)},fft2d:function(ee,te){var ae=[],ie=[],ne=0;for(var le=0;le<L;le++){ne=le*L;for(var oe=0;oe<L;oe++)ae[oe]=ee[oe+ne],ie[oe]=te[oe+ne];W.fft1d(ae,ie);for(var se=0;se<L;se++)ee[se+ne]=ae[se],te[se+ne]=ie[se]}for(var de=0;de<L;de++){for(var ue=0;ue<L;ue++)ne=de+ue*L,ae[ue]=ee[ne],ie[ue]=te[ne];W.fft1d(ae,ie);for(var he=0;he<L;he++)ne=de+he*L,ee[ne]=ae[he],te[ne]=ie[he]}},ifft2d:function(ee,te){var ae=[],ie=[],ne=0;for(var le=0;le<L;le++){ne=le*L;for(var oe=0;oe<L;oe++)ae[oe]=ee[oe+ne],ie[oe]=te[oe+ne];W.ifft1d(ae,ie);for(var se=0;se<L;se++)ee[se+ne]=ae[se],te[se+ne]=ie[se]}for(var de=0;de<L;de++){for(var ue=0;ue<L;ue++)ne=de+ue*L,ae[ue]=ee[ne],ie[ue]=te[ne];W.ifft1d(ae,ie);for(var he=0;he<L;he++)ne=de+he*L,ee[ne]=ae[he],te[ne]=ie[he]}},fft:function(ee,te,ae){var ce=L>>2,ie,ne,le,oe,se,de,ue,he,me;for(var pe=0;pe<L;pe++)oe=G[pe],pe<oe&&(se=ee[pe],ee[pe]=ee[oe],ee[oe]=se,se=te[pe],te[pe]=te[oe],te[oe]=se);for(var ge=1;ge<L;ge<<=1){ne=0,ie=L/(ge<<1);for(var fe=0;fe<ge;fe++){de=Z[ne+ce],ue=ae*Z[ne];for(var _e=fe;_e<L;_e+=ge<<1)le=_e+ge,he=de*ee[le]+ue*te[le],me=de*te[le]-ue*ee[le],ee[le]=ee[_e]-he,ee[_e]+=he,te[le]=te[_e]-me,te[_e]+=me;ne+=ie}}},_initArray:function(){G="undefined"==typeof Uint32Array?[]:new Uint32Array(L),Z="undefined"==typeof Float64Array?[]:new Float64Array(1.25*L)},_paddingZero:function(){},_makeBitReversalTable:function(){var ee=0,te=0,ae=0;for(G[0]=0;++ee<L;){for(ae=L>>1;ae<=te;)te-=ae,ae>>=1;te+=ae,G[ee]=te}},_makeCosSinTable:function(){var ee=L>>1,te=L>>2,ae=L>>3,ie=Math.sin(Math.PI/L),ne=2*ie*ie,le=Math.sqrt(ne*(2-ne)),oe=Z[te]=1,se=Z[0]=0;ie=2*ne;for(var de=1;de<ae;de++)oe-=ne,ne+=ie*oe,se+=le,le-=ie*se,Z[de]=se,Z[te-de]=oe;0!=ae&&(Z[ae]=Math.sqrt(0.5));for(var ue=0;ue<te;ue++)Z[ee-ue]=Z[ue];for(var he=0;he<ee+te;he++)Z[he+ee]=-Z[he]}},Q=["init","fft1d","ifft1d","fft2d","ifft2d"];for(var $=0;$<Q.length;$++)T[Q[$]]=W[Q[$]];return T.bt=W.bt1d,T.fft=W.fft1d,T.ifft=W.ifft1d,T}).call(void 0)},{}],65:[function(D,I,R){"use strict";R.FFTUtils=D("./FFTUtils"),R.FFT=D("./fftlib")},{"./FFTUtils":63,"./fftlib":64}],66:[function(D,I,R){"use strict";var T=D("ml-distance-euclidean").squared,E={sigma:1};I.exports=class{constructor(G){G=Object.assign({},E,G),this.sigma=G.sigma,this.divisor=2*G.sigma*G.sigma}compute(G,Z){var W=T(G,Z);return Math.exp(-W/this.divisor)}}},{"ml-distance-euclidean":62}],67:[function(D,I,R){"use strict";var T={degree:1,constant:1,scale:1};I.exports=class{constructor(L){L=Object.assign({},T,L),this.degree=L.degree,this.constant=L.constant,this.scale=L.scale}compute(L,G){var Z=0;for(var W=0;W<L.length;W++)Z+=L[W]*G[W];return Math.pow(this.scale*Z+this.constant,this.degree)}}},{}],68:[function(D,I,R){"use strict";var T={alpha:0.01,constant:-Math.E};I.exports=class{constructor(L){L=Object.assign({},T,L),this.alpha=L.alpha,this.constant=L.constant}compute(L,G){var Z=0;for(var W=0;W<L.length;W++)Z+=L[W]*G[W];return Math.tanh(this.alpha*Z+this.constant)}}},{}],69:[function(D,I,R){"use strict";var T=D("ml-matrix"),E=D("ml-kernel-gaussian"),L=D("ml-kernel-polynomial"),G=D("./kernels/anova-kernel"),Z=D("./kernels/cauchy-kernel"),W=D("./kernels/exponential-kernel"),Q=D("./kernels/histogram-intersection-kernel"),$=D("./kernels/laplacian-kernel"),J=D("./kernels/multiquadratic-kernel"),ee=D("./kernels/rational-quadratic-kernel"),te=D("ml-kernel-sigmoid"),ae={gaussian:E,rbf:E,polynomial:L,poly:L,anova:G,cauchy:Z,exponential:W,histogram:Q,min:Q,laplacian:$,multiquadratic:J,rational:ee,sigmoid:te,mlp:te};I.exports=class{constructor(ne,le){if(this.kernelType=ne,"linear"!==ne)if("string"==typeof ne){ne=ne.toLowerCase();var oe=ae[ne];if(oe)this.kernelFunction=new oe(le);else throw new Error("unsupported kernel type: "+ne)}else if("object"==typeof ne&&"function"==typeof ne.compute)this.kernelFunction=ne;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(ne,le){if(void 0===le&&(le=ne),"linear"===this.kernelType){var oe=new T(ne);return oe.mmul(new T(le).transpose())}var se=new T(ne.length,le.length),de,ue;if(ne===le)for(de=0;de<ne.length;de++)for(ue=de;ue<ne.length;ue++)se[de][ue]=se[ue][de]=this.kernelFunction.compute(ne[de],ne[ue]);else for(de=0;de<ne.length;de++)for(ue=0;ue<le.length;ue++)se[de][ue]=this.kernelFunction.compute(ne[de],le[ue]);return se}}},{"./kernels/anova-kernel":70,"./kernels/cauchy-kernel":71,"./kernels/exponential-kernel":72,"./kernels/histogram-intersection-kernel":73,"./kernels/laplacian-kernel":74,"./kernels/multiquadratic-kernel":75,"./kernels/rational-quadratic-kernel":76,"ml-kernel-gaussian":66,"ml-kernel-polynomial":67,"ml-kernel-sigmoid":68,"ml-matrix":86}],70:[function(D,I,R){"use strict";var T={sigma:1,degree:1};I.exports=class{constructor(L){L=Object.assign({},T,L),this.sigma=L.sigma,this.degree=L.degree}compute(L,G){var Z=0,W=Math.min(L.length,G.length);for(var Q=1;Q<=W;++Q)Z+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(L[Q-1],Q)-Math.pow(G[Q-1],Q),2)),this.degree);return Z}}},{}],71:[function(D,I,R){"use strict";var T=D("ml-distance-euclidean").squared,E={sigma:1};I.exports=class{constructor(G){G=Object.assign({},E,G),this.sigma=G.sigma}compute(G,Z){return 1/(1+T(G,Z)/(this.sigma*this.sigma))}}},{"ml-distance-euclidean":62}],72:[function(D,I,R){"use strict";var T=D("ml-distance-euclidean"),E={sigma:1};I.exports=class{constructor(G){G=Object.assign({},E,G),this.sigma=G.sigma,this.divisor=2*G.sigma*G.sigma}compute(G,Z){var W=T(G,Z);return Math.exp(-W/this.divisor)}}},{"ml-distance-euclidean":62}],73:[function(D,I,R){"use strict";I.exports=class{compute(E,L){var G=Math.min(E.length,L.length),Z=0;for(var W=0;W<G;++W)Z+=Math.min(E[W],L[W]);return Z}}},{}],74:[function(D,I,R){"use strict";var T=D("ml-distance-euclidean"),E={sigma:1};I.exports=class{constructor(G){G=Object.assign({},E,G),this.sigma=G.sigma}compute(G,Z){var W=T(G,Z);return Math.exp(-W/this.sigma)}}},{"ml-distance-euclidean":62}],75:[function(D,I,R){"use strict";var T=D("ml-distance-euclidean").squared,E={constant:1};I.exports=class{constructor(G){G=Object.assign({},E,G),this.constant=G.constant}compute(G,Z){return Math.sqrt(T(G,Z)+this.constant*this.constant)}}},{"ml-distance-euclidean":62}],76:[function(D,I,R){"use strict";var T=D("ml-distance-euclidean").squared,E={constant:1};I.exports=class{constructor(G){G=Object.assign({},E,G),this.constant=G.constant}compute(G,Z){var W=T(G,Z);return 1-W/(W+this.constant)}}},{"ml-distance-euclidean":62}],77:[function(D,I,R){"use strict";"use strict;";function T(L){var G=L,Z,W;if("number"!=typeof L[0]){Z=L.length,W=L[0].length,G=Array(Z*W);for(var Q=0;Q<Z;Q++)for(var $=0;$<W;$++)G[Q*W+$]=L[Q][$]}else{var J=Math.sqrt(L.length);Number.isInteger(J)&&(Z=J,W=J)}return{data:G,rows:Z,cols:W}}var E=D("ml-fft").FFTUtils;I.exports={fft:function(G,Z,W){var Q=T(G),$=Q.data,J=Object.assign({normalize:!1,divisor:1,rows:Q.rows,cols:Q.cols},W),ee,te;if(J.rows&&J.cols)ee=J.rows,te=J.cols;else throw new Error("Invalid number of rows or columns "+ee+" "+te);var ae=J.divisor,le=Z.length,oe=Z[0].length,ie,ne;if(J.normalize)for(ae=0,ie=0;ie<le;ie++)for(ne=0;ne<oe;ne++)ae+=Z[ie][ne];if(0===ae)throw new RangeError("convolution: The divisor is equal to zero");var se=E.toRadix2($,ee,te),de=E.convolute(se.data,Z,se.rows,se.cols);if(de=E.crop(de,se.rows,se.cols,ee,te),0!=ae&&1!=ae)for(ie=0;ie<de.length;ie++)de[ie]/=ae;return de},direct:function(G,Z,W){var Q=T(G),$=Q.data,J=Object.assign({normalize:!1,divisor:1,rows:Q.rows,cols:Q.cols},W),ee,te;if(J.rows&&J.cols)ee=J.rows,te=J.cols;else throw new Error("Invalid number of rows or columns "+ee+" "+te);var ae=J.divisor,ie=Z.length,ne=Z[0].length,le,oe,se,de,ue,he,me,ce,pe;if(J.normalize)for(ae=0,le=0;le<ie;le++)for(oe=0;oe<ne;oe++)ae+=Z[le][oe];if(0===ae)throw new RangeError("convolution: The divisor is equal to zero");var ge=Array(ee*te),fe=Math.floor(ie/2),_e=Math.floor(ne/2);for(de=0;de<ee;de++)for(se=0;se<te;se++){for(he=0,oe=0;oe<ie;oe++)for(le=0;le<ne;le++)me=Z[ie-oe-1][ne-le-1],ce=(de+oe-fe+ee)%ee,pe=(se+le-_e+te)%te,ue=ce*te+pe,he+=$[ue]*me;ue=de*te+se,ge[ue]=he/ae}return ge},kernelFactory:{LoG:function(G,Z,W){var Q=1000;W&&W.factor&&(Q=W.factor);var $=Array(Z),J,ee,te,ae;Q*=-1;var ie=(Z-1)/2;for(J=0;J<Z;J++)for($[J]=Array(Z),ae=(J-ie)*(J-ie),ee=0;ee<Z;ee++)te=-((ee-ie)*(ee-ie)+ae)/(2*G*G),$[J][ee]=Math.round(Q*(1+te)*Math.exp(te));return $}},matrix2Array:T}},{"ml-fft":65}],78:[function(require,module,exports){"use strict";module.exports=function(superCtor){function compareNumbers(D,I){return D-I}function fillTemplateFunction(D,I){for(var R in I)D=D.replace(new RegExp("%"+R+"%","g"),I[R]);return D}superCtor===void 0&&(superCtor=Object);class D extends superCtor{static get[Symbol.species](){return this}static from1DArray(I,R,T){if(I*R!==T.length)throw new RangeError("Data length does not match given dimensions");var E=new this(I,R);for(var L=0;L<I;L++)for(var G=0;G<R;G++)E.set(L,G,T[L*R+G]);return E}static rowVector(I){var R=new this(1,I.length);for(var T=0;T<I.length;T++)R.set(0,T,I[T]);return R}static columnVector(I){var R=new this(I.length,1);for(var T=0;T<I.length;T++)R.set(T,0,I[T]);return R}static empty(I,R){return new this(I,R)}static zeros(I,R){return this.empty(I,R).fill(0)}static ones(I,R){return this.empty(I,R).fill(1)}static rand(I,R,T){T===void 0&&(T=Math.random);var E=this.empty(I,R);for(var L=0;L<I;L++)for(var G=0;G<R;G++)E.set(L,G,T());return E}static randInt(I,R,T,E){T===void 0&&(T=1000),E===void 0&&(E=Math.random);var L=this.empty(I,R);for(var G=0;G<I;G++)for(var Z=0;Z<R;Z++){var W=Math.floor(E()*T);L.set(G,Z,W)}return L}static eye(I,R,T){T===void 0&&(T=1),R===void 0&&(R=I);var E=Math.min(I,R),L=this.zeros(I,R);for(var G=0;G<E;G++)L.set(G,G,T);return L}static diag(I,R,T){var E=I.length;R===void 0&&(R=E),T===void 0&&(T=R);var L=Math.min(E,R,T),G=this.zeros(R,T);for(var Z=0;Z<L;Z++)G.set(Z,Z,I[Z]);return G}static min(I,R){I=this.checkMatrix(I),R=this.checkMatrix(R);var T=I.rows,E=I.columns,L=new this(T,E);for(var G=0;G<T;G++)for(var Z=0;Z<E;Z++)L.set(G,Z,Math.min(I.get(G,Z),R.get(G,Z)));return L}static max(I,R){I=this.checkMatrix(I),R=this.checkMatrix(R);var T=I.rows,E=I.columns,L=new this(T,E);for(var G=0;G<T;G++)for(var Z=0;Z<E;Z++)L.set(G,Z,Math.max(I.get(G,Z),R.get(G,Z)));return L}static checkMatrix(I){return D.isMatrix(I)?I:new this(I)}static isMatrix(I){return null!=I&&"Matrix"===I.klass}get size(){return this.rows*this.columns}apply(I){if("function"!=typeof I)throw new TypeError("callback must be a function");var R=this.rows,T=this.columns;for(var E=0;E<R;E++)for(var L=0;L<T;L++)I.call(this,E,L);return this}to1DArray(){var I=Array(this.size);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)I[R*this.columns+T]=this.get(R,T);return I}to2DArray(){var I=Array(this.rows);for(var R=0;R<this.rows;R++){I[R]=Array(this.columns);for(var T=0;T<this.columns;T++)I[R][T]=this.get(R,T)}return I}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var I=0;I<this.rows;I++)for(var R=0;R<=I;R++)if(this.get(I,R)!==this.get(R,I))return!1;return!0}return!1}set(I,R,T){throw new Error("set method is unimplemented")}get(I,R){throw new Error("get method is unimplemented")}repeat(I,R){I=I||1,R=R||1;var T=new this.constructor[Symbol.species](this.rows*I,this.columns*R);for(var E=0;E<I;E++)for(var L=0;L<R;L++)T.setSubMatrix(this,this.rows*E,this.columns*L);return T}fill(I){for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.set(R,T,I);return this}neg(){return this.mulS(-1)}getRow(I){util.checkRowIndex(this,I);var R=Array(this.columns);for(var T=0;T<this.columns;T++)R[T]=this.get(I,T);return R}getRowVector(I){return this.constructor.rowVector(this.getRow(I))}setRow(I,R){util.checkRowIndex(this,I),R=util.checkRowVector(this,R);for(var T=0;T<this.columns;T++)this.set(I,T,R[T]);return this}swapRows(I,R){util.checkRowIndex(this,I),util.checkRowIndex(this,R);for(var T=0;T<this.columns;T++){var E=this.get(I,T);this.set(I,T,this.get(R,T)),this.set(R,T,E)}return this}getColumn(I){util.checkColumnIndex(this,I);var R=Array(this.rows);for(var T=0;T<this.rows;T++)R[T]=this.get(T,I);return R}getColumnVector(I){return this.constructor.columnVector(this.getColumn(I))}setColumn(I,R){util.checkColumnIndex(this,I),R=util.checkColumnVector(this,R);for(var T=0;T<this.rows;T++)this.set(T,I,R[T]);return this}swapColumns(I,R){util.checkColumnIndex(this,I),util.checkColumnIndex(this,R);for(var T=0;T<this.rows;T++){var E=this.get(T,I);this.set(T,I,this.get(T,R)),this.set(T,R,E)}return this}addRowVector(I){I=util.checkRowVector(this,I);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.set(R,T,this.get(R,T)+I[T]);return this}subRowVector(I){I=util.checkRowVector(this,I);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.set(R,T,this.get(R,T)-I[T]);return this}mulRowVector(I){I=util.checkRowVector(this,I);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.set(R,T,this.get(R,T)*I[T]);return this}divRowVector(I){I=util.checkRowVector(this,I);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.set(R,T,this.get(R,T)/I[T]);return this}addColumnVector(I){I=util.checkColumnVector(this,I);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.set(R,T,this.get(R,T)+I[R]);return this}subColumnVector(I){I=util.checkColumnVector(this,I);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.set(R,T,this.get(R,T)-I[R]);return this}mulColumnVector(I){I=util.checkColumnVector(this,I);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.set(R,T,this.get(R,T)*I[R]);return this}divColumnVector(I){I=util.checkColumnVector(this,I);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.set(R,T,this.get(R,T)/I[R]);return this}mulRow(I,R){util.checkRowIndex(this,I);for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)*R);return this}mulColumn(I,R){util.checkColumnIndex(this,I);for(var T=0;T<this.rows;T++)this.set(T,I,this.get(T,I)*R)}max(){var I=this.get(0,0);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.get(R,T)>I&&(I=this.get(R,T));return I}maxIndex(){var I=this.get(0,0),R=[0,0];for(var T=0;T<this.rows;T++)for(var E=0;E<this.columns;E++)this.get(T,E)>I&&(I=this.get(T,E),R[0]=T,R[1]=E);return R}min(){var I=this.get(0,0);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)this.get(R,T)<I&&(I=this.get(R,T));return I}minIndex(){var I=this.get(0,0),R=[0,0];for(var T=0;T<this.rows;T++)for(var E=0;E<this.columns;E++)this.get(T,E)<I&&(I=this.get(T,E),R[0]=T,R[1]=E);return R}maxRow(I){util.checkRowIndex(this,I);var R=this.get(I,0);for(var T=1;T<this.columns;T++)this.get(I,T)>R&&(R=this.get(I,T));return R}maxRowIndex(I){util.checkRowIndex(this,I);var R=this.get(I,0),T=[I,0];for(var E=1;E<this.columns;E++)this.get(I,E)>R&&(R=this.get(I,E),T[1]=E);return T}minRow(I){util.checkRowIndex(this,I);var R=this.get(I,0);for(var T=1;T<this.columns;T++)this.get(I,T)<R&&(R=this.get(I,T));return R}minRowIndex(I){util.checkRowIndex(this,I);var R=this.get(I,0),T=[I,0];for(var E=1;E<this.columns;E++)this.get(I,E)<R&&(R=this.get(I,E),T[1]=E);return T}maxColumn(I){util.checkColumnIndex(this,I);var R=this.get(0,I);for(var T=1;T<this.rows;T++)this.get(T,I)>R&&(R=this.get(T,I));return R}maxColumnIndex(I){util.checkColumnIndex(this,I);var R=this.get(0,I),T=[0,I];for(var E=1;E<this.rows;E++)this.get(E,I)>R&&(R=this.get(E,I),T[0]=E);return T}minColumn(I){util.checkColumnIndex(this,I);var R=this.get(0,I);for(var T=1;T<this.rows;T++)this.get(T,I)<R&&(R=this.get(T,I));return R}minColumnIndex(I){util.checkColumnIndex(this,I);var R=this.get(0,I),T=[0,I];for(var E=1;E<this.rows;E++)this.get(E,I)<R&&(R=this.get(E,I),T[0]=E);return T}diag(){var I=Math.min(this.rows,this.columns),R=Array(I);for(var T=0;T<I;T++)R[T]=this.get(T,T);return R}sum(){var I=0;for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)I+=this.get(R,T);return I}mean(){return this.sum()/this.size}prod(){var I=1;for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)I*=this.get(R,T);return I}cumulativeSum(){var I=0;for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)I+=this.get(R,T),this.set(R,T,I);return this}dot(I){D.isMatrix(I)&&(I=I.to1DArray());var R=this.to1DArray();if(R.length!==I.length)throw new RangeError("vectors do not have the same size");var T=0;for(var E=0;E<R.length;E++)T+=R[E]*I[E];return T}mmul(I){I=this.constructor.checkMatrix(I),this.columns!==I.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");var R=this.rows,T=this.columns,E=I.columns,L=new this.constructor[Symbol.species](R,E),G=Array(T);for(var Z=0;Z<E;Z++){for(var W=0;W<T;W++)G[W]=I.get(W,Z);for(var Q=0;Q<R;Q++){var $=0;for(W=0;W<T;W++)$+=this.get(Q,W)*G[W];L.set(Q,Z,$)}}return L}strassen_2x2(I){var R=new this.constructor[Symbol.species](2,2),T=this.get(0,0),E=I.get(0,0),L=this.get(0,1),G=I.get(0,1),Z=this.get(1,0),W=I.get(1,0),Q=this.get(1,1),$=I.get(1,1),J=(T+Q)*(E+$),ee=(Z+Q)*E,te=T*(G-$),ae=Q*(W-E),ie=(T+L)*$;return R.set(0,0,J+ae-ie+(L-Q)*(W+$)),R.set(0,1,te+ie),R.set(1,0,ee+ae),R.set(1,1,J-ee+te+(Z-T)*(E+G)),R}strassen_3x3(I){var R=new this.constructor[Symbol.species](3,3),T=this.get(0,0),E=this.get(0,1),L=this.get(0,2),G=this.get(1,0),Z=this.get(1,1),W=this.get(1,2),Q=this.get(2,0),$=this.get(2,1),J=this.get(2,2),ee=I.get(0,0),te=I.get(0,1),ae=I.get(0,2),ie=I.get(1,0),ne=I.get(1,1),le=I.get(1,2),oe=I.get(2,0),se=I.get(2,1),de=I.get(2,2),ue=(T-G)*(-te+ne),he=(-T+G+Z)*(ee-te+ne),me=(G+Z)*(-ee+te),ce=T*ee,pe=(-T+Q+$)*(ee-ae+le),ge=(-T+Q)*(ae-le),fe=(Q+$)*(-ee+ae),_e=(-L+$+J)*(ne+oe-se),be=(L-J)*(ne-se),ye=L*oe,xe=($+J)*(-oe+se),ke=(-L+Z+W)*(le+oe-de),we=(L-W)*(le-de),ve=(Z+W)*(-oe+de);return R.set(0,0,ce+ye+E*ie),R.set(0,1,(T+E+L-G-Z-$-J)*ne+he+me+ce+_e+ye+xe),R.set(0,2,ce+pe+fe+(T+E+L-Z-W-Q-$)*le+ye+ke+ve),R.set(1,0,ue+Z*(-ee+te+ie-ne-le-oe+de)+he+ce+ye+ke+we),R.set(1,1,ue+he+me+ce+W*se),R.set(1,2,ye+ke+we+ve+G*ae),R.set(2,0,ce+pe+ge+$*(-ee+ae+ie-ne-le-oe+se)+_e+be+ye),R.set(2,1,_e+be+ye+xe+Q*te),R.set(2,2,ce+pe+ge+fe+J*de),R}mmul_strassen(I){function R(ee,te,ae){var ie=ee.rows,ne=ee.columns;if(ie==te&&ne==ae)return ee;var le=D.zeros(te,ae);return le=le.setSubMatrix(ee,0,0),le}function T(ee,te,ae,ie){if(512>=ae||512>=ie)return ee.mmul(te);1==ae%2&&1==ie%2?(ee=R(ee,ae+1,ie+1),te=R(te,ae+1,ie+1)):1==ae%2?(ee=R(ee,ae+1,ie),te=R(te,ae+1,ie)):1==ie%2&&(ee=R(ee,ae,ie+1),te=R(te,ae,ie+1));var ne=parseInt(ee.rows/2),le=parseInt(ee.columns/2),oe=ee.subMatrix(0,ne-1,0,le-1),se=te.subMatrix(0,ne-1,0,le-1),de=ee.subMatrix(0,ne-1,le,ee.columns-1),ue=te.subMatrix(0,ne-1,le,te.columns-1),he=ee.subMatrix(ne,ee.rows-1,0,le-1),me=te.subMatrix(ne,te.rows-1,0,le-1),ce=ee.subMatrix(ne,ee.rows-1,le,ee.columns-1),pe=te.subMatrix(ne,te.rows-1,le,te.columns-1),ge=T(D.add(oe,ce),D.add(se,pe),ne,le),fe=T(D.add(he,ce),se,ne,le),_e=T(oe,D.sub(ue,pe),ne,le),be=T(ce,D.sub(me,se),ne,le),ye=T(D.add(oe,de),pe,ne,le),xe=T(D.sub(he,oe),D.add(se,ue),ne,le),ke=T(D.sub(de,ce),D.add(me,pe),ne,le),we=D.add(ge,be);we.sub(ye),we.add(ke);var ve=D.add(_e,ye),Me=D.add(fe,be),je=D.sub(ge,fe);je.add(_e),je.add(xe);var Pe=D.zeros(2*we.rows,2*we.columns);return Pe=Pe.setSubMatrix(we,0,0),Pe=Pe.setSubMatrix(ve,we.rows,0),Pe=Pe.setSubMatrix(Me,0,we.columns),Pe=Pe.setSubMatrix(je,we.rows,we.columns),Pe.subMatrix(0,ae-1,0,ie-1)}var E=this.clone(),L=E.rows,G=E.columns,Z=I.rows,W=I.columns;G!=Z&&console.log(`Multiplying ${L} x ${G} and ${Z} x ${W} matrix: dimensions do not match.`);var Q=Math.max(L,Z),$=Math.max(G,W),E=R(E,Q,$),I=R(I,Q,$),J=T(E,I,Q,$);return J}scaleRows(I,R){if(I=void 0===I?0:I,R=void 0===R?1:R,I>=R)throw new RangeError("min should be strictly smaller than max");var T=this.constructor.empty(this.rows,this.columns);for(var E=0;E<this.rows;E++){var L=arrayUtils.scale(this.getRow(E),{min:I,max:R});T.setRow(E,L)}return T}scaleColumns(I,R){if(I=void 0===I?0:I,R=void 0===R?1:R,I>=R)throw new RangeError("min should be strictly smaller than max");var T=this.constructor.empty(this.rows,this.columns);for(var E=0;E<this.columns;E++){var L=arrayUtils.scale(this.getColumn(E),{min:I,max:R});T.setColumn(E,L)}return T}kroneckerProduct(I){I=this.constructor.checkMatrix(I);var R=this.rows,T=this.columns,E=I.rows,L=I.columns,G=new this.constructor[Symbol.species](R*E,T*L);for(var Z=0;Z<R;Z++)for(var W=0;W<T;W++)for(var Q=0;Q<E;Q++)for(var $=0;$<L;$++)G[E*Z+Q][L*W+$]=this.get(Z,W)*I.get(Q,$);return G}transpose(){var I=new this.constructor[Symbol.species](this.columns,this.rows);for(var R=0;R<this.rows;R++)for(var T=0;T<this.columns;T++)I.set(T,R,this.get(R,T));return I}sortRows(I){I===void 0&&(I=compareNumbers);for(var R=0;R<this.rows;R++)this.setRow(R,this.getRow(R).sort(I));return this}sortColumns(I){I===void 0&&(I=compareNumbers);for(var R=0;R<this.columns;R++)this.setColumn(R,this.getColumn(R).sort(I));return this}subMatrix(I,R,T,E){util.checkRange(this,I,R,T,E);var L=new this.constructor[Symbol.species](R-I+1,E-T+1);for(var G=I;G<=R;G++)for(var Z=T;Z<=E;Z++)L[G-I][Z-T]=this.get(G,Z);return L}subMatrixRow(I,R,T){if(void 0===R&&(R=0),void 0===T&&(T=this.columns-1),R>T||0>R||R>=this.columns||0>T||T>=this.columns)throw new RangeError("Argument out of range");var E=new this.constructor[Symbol.species](I.length,T-R+1);for(var L=0;L<I.length;L++)for(var G=R;G<=T;G++){if(0>I[L]||I[L]>=this.rows)throw new RangeError("Row index out of range: "+I[L]);E.set(L,G-R,this.get(I[L],G))}return E}subMatrixColumn(I,R,T){if(void 0===R&&(R=0),void 0===T&&(T=this.rows-1),R>T||0>R||R>=this.rows||0>T||T>=this.rows)throw new RangeError("Argument out of range");var E=new this.constructor[Symbol.species](T-R+1,I.length);for(var L=0;L<I.length;L++)for(var G=R;G<=T;G++){if(0>I[L]||I[L]>=this.columns)throw new RangeError("Column index out of range: "+I[L]);E.set(G-R,L,this.get(G,I[L]))}return E}setSubMatrix(I,R,T){I=this.constructor.checkMatrix(I);var E=R+I.rows-1,L=T+I.columns-1;util.checkRange(this,R,E,T,L);for(var G=0;G<I.rows;G++)for(var Z=0;Z<I.columns;Z++)this[R+G][T+Z]=I.get(G,Z);return this}selection(I,R){var T=util.checkIndices(this,I,R),E=new this.constructor[Symbol.species](I.length,R.length);for(var L=0;L<T.row.length;L++){var G=T.row[L];for(var Z=0;Z<T.column.length;Z++){var W=T.column[Z];E[L][Z]=this.get(G,W)}}return E}trace(){var I=Math.min(this.rows,this.columns),R=0;for(var T=0;T<I;T++)R+=this.get(T,T);return R}transposeView(){return new MatrixTransposeView(this)}rowView(I){return util.checkRowIndex(this,I),new MatrixRowView(this,I)}columnView(I){return util.checkColumnIndex(this,I),new MatrixColumnView(this,I)}flipRowView(){return new MatrixFlipRowView(this)}flipColumnView(){return new MatrixFlipColumnView(this)}subMatrixView(I,R,T,E){return new MatrixSubView(this,I,R,T,E)}selectionView(I,R){return new MatrixSelectionView(this,I,R)}}D.prototype.klass="Matrix",D.random=D.rand,D.diagonal=D.diag,D.prototype.diagonal=D.prototype.diag,D.identity=D.eye,D.prototype.negate=D.prototype.neg,D.prototype.tensorProduct=D.prototype.kroneckerProduct;var inplaceOperator=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,inplaceOperatorScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,inplaceOperatorMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,staticOperator=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,inplaceMethod=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,staticMethod=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,inplaceMethodWithArgs=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,staticMethodWithArgs=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,inplaceMethodWithOneArgScalar=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,inplaceMethodWithOneArgMatrix=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    checkDimensions(this, matrix);
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,inplaceMethodWithOneArg=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,operators=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]];for(var operator of operators){var inplaceOp=eval(fillTemplateFunction(inplaceOperator,{name:operator[1],op:operator[0]})),inplaceOpS=eval(fillTemplateFunction(inplaceOperatorScalar,{name:operator[1]+"S",op:operator[0]})),inplaceOpM=eval(fillTemplateFunction(inplaceOperatorMatrix,{name:operator[1]+"M",op:operator[0]})),staticOp=eval(fillTemplateFunction(staticOperator,{name:operator[1]}));for(var i=1;i<operator.length;i++)D.prototype[operator[i]]=inplaceOp,D.prototype[operator[i]+"S"]=inplaceOpS,D.prototype[operator[i]+"M"]=inplaceOpM,D[operator[i]]=staticOp}var methods=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(D){methods.push(["Math."+D,D])});for(var method of methods){var inplaceMeth=eval(fillTemplateFunction(inplaceMethod,{name:method[1],method:method[0]})),staticMeth=eval(fillTemplateFunction(staticMethod,{name:method[1]}));for(var i=1;i<method.length;i++)D.prototype[method[i]]=inplaceMeth,D[method[i]]=staticMeth}var methodsWithArgs=[["Math.pow",1,"pow"]];for(var methodWithArg of methodsWithArgs){var args="arg0";for(var i=1;i<methodWithArg[1];i++)args+=`, arg${i}`;if(1!==methodWithArg[1]){var inplaceMethWithArgs=eval(fillTemplateFunction(inplaceMethodWithArgs,{name:methodWithArg[2],method:methodWithArg[0],args:args})),staticMethWithArgs=eval(fillTemplateFunction(staticMethodWithArgs,{name:methodWithArg[2],args:args}));for(var i=2;i<methodWithArg.length;i++)D.prototype[methodWithArg[i]]=inplaceMethWithArgs,D[methodWithArg[i]]=staticMethWithArgs}else{var tmplVar={name:methodWithArg[2],args:args,method:methodWithArg[0]},inplaceMethod=eval(fillTemplateFunction(inplaceMethodWithOneArg,tmplVar)),inplaceMethodS=eval(fillTemplateFunction(inplaceMethodWithOneArgScalar,tmplVar)),inplaceMethodM=eval(fillTemplateFunction(inplaceMethodWithOneArgMatrix,tmplVar)),staticMethod=eval(fillTemplateFunction(staticMethodWithArgs,tmplVar));for(var i=2;i<methodWithArg.length;i++)D.prototype[methodWithArg[i]]=inplaceMethod,D.prototype[methodWithArg[i]+"M"]=inplaceMethodM,D.prototype[methodWithArg[i]+"S"]=inplaceMethodS,D[methodWithArg[i]]=staticMethod}}return D};var arrayUtils=require("ml-array-utils"),util=require("./util"),MatrixTransposeView=require("./views/transpose"),MatrixRowView=require("./views/row"),MatrixSubView=require("./views/sub"),MatrixSelectionView=require("./views/selection"),MatrixColumnView=require("./views/column"),MatrixFlipRowView=require("./views/flipRow"),MatrixFlipColumnView=require("./views/flipColumn")},{"./util":89,"./views/column":91,"./views/flipColumn":92,"./views/flipRow":93,"./views/row":94,"./views/selection":95,"./views/sub":96,"./views/transpose":97,"ml-array-utils":60}],79:[function(D,I,R){"use strict";function T(L){if(!(this instanceof T))return new T(L);if(L=E.checkMatrix(L),!L.isSymmetric())throw new Error("Matrix is not symmetric");var G=L,Z=G.rows,W=new E(Z,Z),Q=!0,$,J,ee;for(J=0;J<Z;J++){var te=W[J],ae=0;for(ee=0;ee<J;ee++){var ie=W[ee],ne=0;for($=0;$<ee;$++)ne+=ie[$]*te[$];te[ee]=ne=(G[J][ee]-ne)/W[ee][ee],ae=ae+ne*ne}for(ae=G[J][J]-ae,Q&=0<ae,W[J][J]=Math.sqrt(Math.max(ae,0)),ee=J+1;ee<Z;ee++)W[J][ee]=0}if(!Q)throw new Error("Matrix is not positive definite");this.L=W}var E=D("../matrix");T.prototype={get lowerTriangularMatrix(){return this.L},solve:function(G){G=E.checkMatrix(G);var Z=this.L,W=Z.rows;if(G.rows!==W)throw new Error("Matrix dimensions do not match");var Q=G.columns,$=G.clone(),J,ee,te;for(te=0;te<W;te++)for(ee=0;ee<Q;ee++){for(J=0;J<te;J++)$[te][ee]-=$[J][ee]*Z[te][J];$[te][ee]/=Z[te][te]}for(te=W-1;0<=te;te--)for(ee=0;ee<Q;ee++){for(J=te+1;J<W;J++)$[te][ee]-=$[J][ee]*Z[J][te];$[te][ee]/=Z[te][te]}return $}},I.exports=T},{"../matrix":87}],80:[function(D,I,R){"use strict";function T(ae,ie){if(ie=Object.assign({},te,ie),!(this instanceof T))return new T(ae,ie);if(ae=Q.checkMatrix(ae),!ae.isSquare())throw new Error("Matrix is not a square matrix");var ne=ae.columns,le=ee(ne,ne,0),oe=Array(ne),se=Array(ne),de=ae,me=!1,ue,he;if(me=!!ie.assumeSymmetric||ae.isSymmetric(),me){for(ue=0;ue<ne;ue++)for(he=0;he<ne;he++)le[ue][he]=de.get(ue,he);E(ne,se,oe,le),L(ne,se,oe,le)}else{var ce=ee(ne,ne,0),pe=Array(ne);for(he=0;he<ne;he++)for(ue=0;ue<ne;ue++)ce[ue][he]=de.get(ue,he);G(ne,ce,pe,le),Z(ne,se,oe,le,ce)}this.n=ne,this.e=se,this.d=oe,this.V=le}function E(ae,ie,ne,le){var oe,se,de,ue,he,me,ce,pe;for(he=0;he<ae;he++)ne[he]=le[ae-1][he];for(ue=ae-1;0<ue;ue--){for(pe=0,de=0,me=0;me<ue;me++)pe=pe+Math.abs(ne[me]);if(0===pe)for(ie[ue]=ne[ue-1],he=0;he<ue;he++)ne[he]=le[ue-1][he],le[ue][he]=0,le[he][ue]=0;else{for(me=0;me<ue;me++)ne[me]/=pe,de+=ne[me]*ne[me];for(oe=ne[ue-1],se=Math.sqrt(de),0<oe&&(se=-se),ie[ue]=pe*se,de=de-oe*se,ne[ue-1]=oe-se,he=0;he<ue;he++)ie[he]=0;for(he=0;he<ue;he++){for(oe=ne[he],le[he][ue]=oe,se=ie[he]+le[he][he]*oe,me=he+1;me<=ue-1;me++)se+=le[me][he]*ne[me],ie[me]+=le[me][he]*oe;ie[he]=se}for(oe=0,he=0;he<ue;he++)ie[he]/=de,oe+=ie[he]*ne[he];for(ce=oe/(de+de),he=0;he<ue;he++)ie[he]-=ce*ne[he];for(he=0;he<ue;he++){for(oe=ne[he],se=ie[he],me=he;me<=ue-1;me++)le[me][he]-=oe*ie[me]+se*ne[me];ne[he]=le[ue-1][he],le[ue][he]=0}}ne[ue]=de}for(ue=0;ue<ae-1;ue++){if(le[ae-1][ue]=le[ue][ue],le[ue][ue]=1,de=ne[ue+1],0!==de){for(me=0;me<=ue;me++)ne[me]=le[me][ue+1]/de;for(he=0;he<=ue;he++){for(se=0,me=0;me<=ue;me++)se+=le[me][ue+1]*le[me][he];for(me=0;me<=ue;me++)le[me][he]-=se*ne[me]}}for(me=0;me<=ue;me++)le[me][ue+1]=0}for(he=0;he<ae;he++)ne[he]=le[ae-1][he],le[ae-1][he]=0;le[ae-1][ae-1]=1,ie[0]=0}function L(ae,ie,ne,le){var oe,se,de,ue,he,me,ce,pe,ge,fe,_e,be,ye,xe,ke,we,ve;for(de=1;de<ae;de++)ie[de-1]=ie[de];ie[ae-1]=0;var Me=0,je=0,Pe=Math.pow(2,-52);for(me=0;me<ae;me++){for(je=Math.max(je,Math.abs(ne[me])+Math.abs(ie[me])),ce=me;ce<ae&&!(Math.abs(ie[ce])<=Pe*je);)ce++;if(ce>me){ve=0;do{for(ve=ve+1,oe=ne[me],pe=(ne[me+1]-oe)/(2*ie[me]),ge=J(pe,1),0>pe&&(ge=-ge),ne[me]=ie[me]/(pe+ge),ne[me+1]=ie[me]*(pe+ge),fe=ne[me+1],se=oe-ne[me],de=me+2;de<ae;de++)ne[de]-=se;for(Me=Me+se,pe=ne[ce],_e=1,be=_e,ye=_e,xe=ie[me+1],ke=0,we=0,de=ce-1;de>=me;de--)for(ye=be,be=_e,we=ke,oe=_e*ie[de],se=_e*pe,ge=J(pe,ie[de]),ie[de+1]=ke*ge,ke=ie[de]/ge,_e=pe/ge,pe=_e*ne[de]-ke*oe,ne[de+1]=se+ke*(_e*oe+ke*ne[de]),he=0;he<ae;he++)se=le[he][de+1],le[he][de+1]=ke*le[he][de]+_e*se,le[he][de]=_e*le[he][de]-ke*se;pe=-ke*we*ye*xe*ie[me]/fe,ie[me]=ke*pe,ne[me]=_e*pe}while(Math.abs(ie[me])>Pe*je)}ne[me]=ne[me]+Me,ie[me]=0}for(de=0;de<ae-1;de++){for(he=de,pe=ne[de],ue=de+1;ue<ae;ue++)ne[ue]<pe&&(he=ue,pe=ne[ue]);if(he!==de)for(ne[he]=ne[de],ne[de]=pe,ue=0;ue<ae;ue++)pe=le[ue][de],le[ue][de]=le[ue][he],le[ue][he]=pe}}function G(ae,ie,ne,le){var oe=0,se=ae-1,de,ue,he,me,ce,pe,ge;for(pe=oe+1;pe<=se-1;pe++){for(ge=0,me=pe;me<=se;me++)ge=ge+Math.abs(ie[me][pe-1]);if(0!==ge){for(he=0,me=se;me>=pe;me--)ne[me]=ie[me][pe-1]/ge,he+=ne[me]*ne[me];for(ue=Math.sqrt(he),0<ne[pe]&&(ue=-ue),he=he-ne[pe]*ue,ne[pe]=ne[pe]-ue,ce=pe;ce<ae;ce++){for(de=0,me=se;me>=pe;me--)de+=ne[me]*ie[me][ce];for(de=de/he,me=pe;me<=se;me++)ie[me][ce]-=de*ne[me]}for(me=0;me<=se;me++){for(de=0,ce=se;ce>=pe;ce--)de+=ne[ce]*ie[me][ce];for(de=de/he,ce=pe;ce<=se;ce++)ie[me][ce]-=de*ne[ce]}ne[pe]=ge*ne[pe],ie[pe][pe-1]=ge*ue}}for(me=0;me<ae;me++)for(ce=0;ce<ae;ce++)le[me][ce]=me===ce?1:0;for(pe=se-1;pe>=oe+1;pe--)if(0!==ie[pe][pe-1]){for(me=pe+1;me<=se;me++)ne[me]=ie[me][pe-1];for(ce=pe;ce<=se;ce++){for(ue=0,me=pe;me<=se;me++)ue+=ne[me]*le[me][ce];for(ue=ue/ne[pe]/ie[pe][pe-1],me=pe;me<=se;me++)le[me][ce]+=ue*ne[me]}}}function Z(ae,ie,ne,le,oe){var se=ae-1,de=0,ue=ae-1,he=Math.pow(2,-52),me=0,ce=0,pe=0,ge=0,fe=0,_e=0,be=0,ye=0,xe,ke,we,ve,Me,je,Pe,De,Ie,Se,Ce,Ae,Re,Be,ze;for(xe=0;xe<ae;xe++)for((xe<de||xe>ue)&&(ne[xe]=oe[xe][xe],ie[xe]=0),ke=Math.max(xe-1,0);ke<ae;ke++)ce=ce+Math.abs(oe[xe][ke]);for(;se>=de;){for(ve=se;ve>de&&(_e=Math.abs(oe[ve-1][ve-1])+Math.abs(oe[ve][ve]),0==_e&&(_e=ce),!(Math.abs(oe[ve][ve-1])<he*_e));)ve--;if(ve===se)oe[se][se]=oe[se][se]+me,ne[se]=oe[se][se],ie[se]=0,se--,ye=0;else if(ve===se-1){if(Pe=oe[se][se-1]*oe[se-1][se],pe=(oe[se-1][se-1]-oe[se][se])/2,ge=pe*pe+Pe,be=Math.sqrt(Math.abs(ge)),oe[se][se]=oe[se][se]+me,oe[se-1][se-1]=oe[se-1][se-1]+me,De=oe[se][se],0<=ge){for(be=0<=pe?pe+be:pe-be,ne[se-1]=De+be,ne[se]=ne[se-1],0!=be&&(ne[se]=De-Pe/be),ie[se-1]=0,ie[se]=0,De=oe[se][se-1],_e=Math.abs(De)+Math.abs(be),pe=De/_e,ge=be/_e,fe=Math.sqrt(pe*pe+ge*ge),pe=pe/fe,ge=ge/fe,ke=se-1;ke<ae;ke++)be=oe[se-1][ke],oe[se-1][ke]=ge*be+pe*oe[se][ke],oe[se][ke]=ge*oe[se][ke]-pe*be;for(xe=0;xe<=se;xe++)be=oe[xe][se-1],oe[xe][se-1]=ge*be+pe*oe[xe][se],oe[xe][se]=ge*oe[xe][se]-pe*be;for(xe=de;xe<=ue;xe++)be=le[xe][se-1],le[xe][se-1]=ge*be+pe*le[xe][se],le[xe][se]=ge*le[xe][se]-pe*be}else ne[se-1]=De+pe,ne[se]=De+pe,ie[se-1]=be,ie[se]=-be;se=se-2,ye=0}else{if(De=oe[se][se],Ie=0,Pe=0,ve<se&&(Ie=oe[se-1][se-1],Pe=oe[se][se-1]*oe[se-1][se]),10==ye){for(me+=De,xe=de;xe<=se;xe++)oe[xe][xe]-=De;_e=Math.abs(oe[se][se-1])+Math.abs(oe[se-1][se-2]),De=Ie=0.75*_e,Pe=-0.4375*_e*_e}if(30==ye&&(_e=(Ie-De)/2,_e=_e*_e+Pe,0<_e)){for(_e=Math.sqrt(_e),Ie<De&&(_e=-_e),_e=De-Pe/((Ie-De)/2+_e),xe=de;xe<=se;xe++)oe[xe][xe]-=_e;me+=_e,De=Ie=Pe=0.964}for(ye=ye+1,Me=se-2;Me>=ve&&(be=oe[Me][Me],fe=De-be,_e=Ie-be,pe=(fe*_e-Pe)/oe[Me+1][Me]+oe[Me][Me+1],ge=oe[Me+1][Me+1]-be-fe-_e,fe=oe[Me+2][Me+1],_e=Math.abs(pe)+Math.abs(ge)+Math.abs(fe),pe=pe/_e,ge=ge/_e,fe=fe/_e,Me!=ve)&&!(Math.abs(oe[Me][Me-1])*(Math.abs(ge)+Math.abs(fe))<he*(Math.abs(pe)*(Math.abs(oe[Me-1][Me-1])+Math.abs(be)+Math.abs(oe[Me+1][Me+1]))));)Me--;for(xe=Me+2;xe<=se;xe++)oe[xe][xe-2]=0,xe>Me+2&&(oe[xe][xe-3]=0);for(we=Me;we<=se-1&&(Be=we!==se-1,we!=Me&&(pe=oe[we][we-1],ge=oe[we+1][we-1],fe=Be?oe[we+2][we-1]:0,De=Math.abs(pe)+Math.abs(ge)+Math.abs(fe),0!==De&&(pe=pe/De,ge=ge/De,fe=fe/De)),0!==De);we++)if(_e=Math.sqrt(pe*pe+ge*ge+fe*fe),0>pe&&(_e=-_e),0!==_e){for(we==Me?ve!==Me&&(oe[we][we-1]=-oe[we][we-1]):oe[we][we-1]=-_e*De,pe=pe+_e,De=pe/_e,Ie=ge/_e,be=fe/_e,ge=ge/pe,fe=fe/pe,ke=we;ke<ae;ke++)pe=oe[we][ke]+ge*oe[we+1][ke],Be&&(pe=pe+fe*oe[we+2][ke],oe[we+2][ke]=oe[we+2][ke]-pe*be),oe[we][ke]=oe[we][ke]-pe*De,oe[we+1][ke]=oe[we+1][ke]-pe*Ie;for(xe=0;xe<=Math.min(se,we+3);xe++)pe=De*oe[xe][we]+Ie*oe[xe][we+1],Be&&(pe=pe+be*oe[xe][we+2],oe[xe][we+2]=oe[xe][we+2]-pe*fe),oe[xe][we]=oe[xe][we]-pe,oe[xe][we+1]=oe[xe][we+1]-pe*ge;for(xe=de;xe<=ue;xe++)pe=De*le[xe][we]+Ie*le[xe][we+1],Be&&(pe=pe+be*le[xe][we+2],le[xe][we+2]=le[xe][we+2]-pe*fe),le[xe][we]=le[xe][we]-pe,le[xe][we+1]=le[xe][we+1]-pe*ge}}}if(0!==ce){for(se=ae-1;0<=se;se--)if(pe=ne[se],ge=ie[se],0===ge)for(ve=se,oe[se][se]=1,xe=se-1;0<=xe;xe--){for(Pe=oe[xe][xe]-pe,fe=0,ke=ve;ke<=se;ke++)fe=fe+oe[xe][ke]*oe[ke][se];if(0>ie[xe])be=Pe,_e=fe;else if(ve=xe,0===ie[xe]?oe[xe][se]=0===Pe?-fe/(he*ce):-fe/Pe:(De=oe[xe][xe+1],Ie=oe[xe+1][xe],ge=(ne[xe]-pe)*(ne[xe]-pe)+ie[xe]*ie[xe],je=(De*_e-be*fe)/ge,oe[xe][se]=je,oe[xe+1][se]=Math.abs(De)>Math.abs(be)?(-fe-Pe*je)/De:(-_e-Ie*je)/be),je=Math.abs(oe[xe][se]),1<he*je*je)for(ke=xe;ke<=se;ke++)oe[ke][se]=oe[ke][se]/je}else if(0>ge)for(ve=se-1,Math.abs(oe[se][se-1])>Math.abs(oe[se-1][se])?(oe[se-1][se-1]=ge/oe[se][se-1],oe[se-1][se]=-(oe[se][se]-pe)/oe[se][se-1]):(ze=W(0,-oe[se-1][se],oe[se-1][se-1]-pe,ge),oe[se-1][se-1]=ze[0],oe[se-1][se]=ze[1]),oe[se][se-1]=0,oe[se][se]=1,xe=se-2;0<=xe;xe--){for(Se=0,Ce=0,ke=ve;ke<=se;ke++)Se=Se+oe[xe][ke]*oe[ke][se-1],Ce=Ce+oe[xe][ke]*oe[ke][se];if(Pe=oe[xe][xe]-pe,0>ie[xe])be=Pe,fe=Se,_e=Ce;else if(ve=xe,0===ie[xe]?(ze=W(-Se,-Ce,Pe,ge),oe[xe][se-1]=ze[0],oe[xe][se]=ze[1]):(De=oe[xe][xe+1],Ie=oe[xe+1][xe],Ae=(ne[xe]-pe)*(ne[xe]-pe)+ie[xe]*ie[xe]-ge*ge,Re=2*(ne[xe]-pe)*ge,0===Ae&&0===Re&&(Ae=he*ce*(Math.abs(Pe)+Math.abs(ge)+Math.abs(De)+Math.abs(Ie)+Math.abs(be))),ze=W(De*fe-be*Se+ge*Ce,De*_e-be*Ce-ge*Se,Ae,Re),oe[xe][se-1]=ze[0],oe[xe][se]=ze[1],Math.abs(De)>Math.abs(be)+Math.abs(ge)?(oe[xe+1][se-1]=(-Se-Pe*oe[xe][se-1]+ge*oe[xe][se])/De,oe[xe+1][se]=(-Ce-Pe*oe[xe][se]-ge*oe[xe][se-1])/De):(ze=W(-fe-Ie*oe[xe][se-1],-_e-Ie*oe[xe][se],be,ge),oe[xe+1][se-1]=ze[0],oe[xe+1][se]=ze[1])),je=Math.max(Math.abs(oe[xe][se-1]),Math.abs(oe[xe][se])),1<he*je*je)for(ke=xe;ke<=se;ke++)oe[ke][se-1]=oe[ke][se-1]/je,oe[ke][se]=oe[ke][se]/je}for(xe=0;xe<ae;xe++)if(xe<de||xe>ue)for(ke=xe;ke<ae;ke++)le[xe][ke]=oe[xe][ke];for(ke=ae-1;ke>=de;ke--)for(xe=de;xe<=ue;xe++){for(be=0,we=de;we<=Math.min(ke,ue);we++)be=be+le[xe][we]*oe[we][ke];le[xe][ke]=be}}}function W(ae,ie,ne,le){var oe,se;return Math.abs(ne)>Math.abs(le)?(oe=le/ne,se=ne+oe*le,[(ae+oe*ie)/se,(ie-oe*ae)/se]):(oe=ne/le,se=le+oe*ne,[(oe*ae+ie)/se,(oe*ie-ae)/se])}var Q=D("../matrix"),$=D("./util"),J=$.hypotenuse,ee=$.getFilled2DArray,te={assumeSymmetric:!1};T.prototype={get realEigenvalues(){return this.d},get imaginaryEigenvalues(){return this.e},get eigenvectorMatrix(){return Q.isMatrix(this.V)||(this.V=new Q(this.V)),this.V},get diagonalMatrix(){var ae=this.n,ie=this.e,ne=this.d,le=new Q(ae,ae),oe,se;for(oe=0;oe<ae;oe++){for(se=0;se<ae;se++)le[oe][se]=0;le[oe][oe]=ne[oe],0<ie[oe]?le[oe][oe+1]=ie[oe]:0>ie[oe]&&(le[oe][oe-1]=ie[oe])}return le}},I.exports=T},{"../matrix":87,"./util":84}],81:[function(D,I,R){"use strict";function T(L){if(!(this instanceof T))return new T(L);L=E.checkMatrix(L);var G=L.clone(),Z=G.rows,W=G.columns,Q=Array(Z),$=1,J,ee,te,ae,ie,ne,le,oe,se,de;for(J=0;J<Z;J++)Q[J]=J;for(se=Array(Z),ee=0;ee<W;ee++){for(J=0;J<Z;J++)se[J]=G[J][ee];for(J=0;J<Z;J++){for(oe=G[J],de=Math.min(J,ee),ie=0,te=0;te<de;te++)ie+=oe[te]*se[te];oe[ee]=se[J]-=ie}for(ae=ee,J=ee+1;J<Z;J++)Math.abs(se[J])>Math.abs(se[ae])&&(ae=J);if(ae!==ee){for(te=0;te<W;te++)ne=G[ae][te],G[ae][te]=G[ee][te],G[ee][te]=ne;le=Q[ae],Q[ae]=Q[ee],Q[ee]=le,$=-$}if(ee<Z&&0!==G[ee][ee])for(J=ee+1;J<Z;J++)G[J][ee]/=G[ee][ee]}this.LU=G,this.pivotVector=Q,this.pivotSign=$}var E=D("../matrix");T.prototype={isSingular:function(){var G=this.LU,Z=G.columns;for(var W=0;W<Z;W++)if(0===G[W][W])return!0;return!1},get determinant(){var L=this.LU;if(!L.isSquare())throw new Error("Matrix must be square");var G=this.pivotSign,Z=L.columns;for(var W=0;W<Z;W++)G*=L[W][W];return G},get lowerTriangularMatrix(){var L=this.LU,G=L.rows,Z=L.columns,W=new E(G,Z);for(var Q=0;Q<G;Q++)for(var $=0;$<Z;$++)W[Q][$]=Q>$?L[Q][$]:Q===$?1:0;return W},get upperTriangularMatrix(){var L=this.LU,G=L.rows,Z=L.columns,W=new E(G,Z);for(var Q=0;Q<G;Q++)for(var $=0;$<Z;$++)W[Q][$]=Q<=$?L[Q][$]:0;return W},get pivotPermutationVector(){return this.pivotVector.slice()},solve:function(G){G=E.checkMatrix(G);var Z=this.LU,W=Z.rows;if(W!==G.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var Q=G.columns,$=G.subMatrixRow(this.pivotVector,0,Q-1),J=Z.columns,ee,te,ae;for(ae=0;ae<J;ae++)for(ee=ae+1;ee<J;ee++)for(te=0;te<Q;te++)$[ee][te]-=$[ae][te]*Z[ee][ae];for(ae=J-1;0<=ae;ae--){for(te=0;te<Q;te++)$[ae][te]/=Z[ae][ae];for(ee=0;ee<ae;ee++)for(te=0;te<Q;te++)$[ee][te]-=$[ae][te]*Z[ee][ae]}return $}},I.exports=T},{"../matrix":87}],82:[function(D,I,R){"use strict";function T(G){if(!(this instanceof T))return new T(G);G=E.checkMatrix(G);var Z=G.clone(),W=G.rows,Q=G.columns,$=Array(Q),J,ee,te,ae;for(te=0;te<Q;te++){var ie=0;for(J=te;J<W;J++)ie=L(ie,Z[J][te]);if(0!==ie){for(0>Z[te][te]&&(ie=-ie),J=te;J<W;J++)Z[J][te]/=ie;for(Z[te][te]+=1,ee=te+1;ee<Q;ee++){for(ae=0,J=te;J<W;J++)ae+=Z[J][te]*Z[J][ee];for(ae=-ae/Z[te][te],J=te;J<W;J++)Z[J][ee]+=ae*Z[J][te]}}$[te]=-ie}this.QR=Z,this.Rdiag=$}var E=D("../matrix"),L=D("./util").hypotenuse;T.prototype={solve:function(Z){Z=E.checkMatrix(Z);var W=this.QR,Q=W.rows;if(Z.rows!==Q)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var $=Z.columns,J=Z.clone(),ee=W.columns,te,ae,ie,ne;for(ie=0;ie<ee;ie++)for(ae=0;ae<$;ae++){for(ne=0,te=ie;te<Q;te++)ne+=W[te][ie]*J[te][ae];for(ne=-ne/W[ie][ie],te=ie;te<Q;te++)J[te][ae]+=ne*W[te][ie]}for(ie=ee-1;0<=ie;ie--){for(ae=0;ae<$;ae++)J[ie][ae]/=this.Rdiag[ie];for(te=0;te<ie;te++)for(ae=0;ae<$;ae++)J[te][ae]-=J[ie][ae]*W[te][ie]}return J.subMatrix(0,ee-1,0,$-1)},isFullRank:function(){var Z=this.QR.columns;for(var W=0;W<Z;W++)if(0===this.Rdiag[W])return!1;return!0},get upperTriangularMatrix(){var G=this.QR,Z=G.columns,W=new E(Z,Z),Q,$;for(Q=0;Q<Z;Q++)for($=0;$<Z;$++)W[Q][$]=Q<$?G[Q][$]:Q===$?this.Rdiag[Q]:0;return W},get orthogonalMatrix(){var G=this.QR,Z=G.rows,W=G.columns,Q=new E(Z,W),$,J,ee,te;for(ee=W-1;0<=ee;ee--){for($=0;$<Z;$++)Q[$][ee]=0;for(Q[ee][ee]=1,J=ee;J<W;J++)if(0!==G[ee][ee]){for(te=0,$=ee;$<Z;$++)te+=G[$][ee]*Q[$][J];for(te=-te/G[ee][ee],$=ee;$<Z;$++)Q[$][J]+=te*G[$][ee]}}return Q}},I.exports=T},{"../matrix":87,"./util":84}],83:[function(D,I,R){"use strict";function T(W,Q){if(!(this instanceof T))return new T(W,Q);W=E.checkMatrix(W),Q=Q||{};var $=W.rows,J=W.columns,ee=Math.min($,J),te=!0,ae=!0;!1===Q.computeLeftSingularVectors&&(te=!1),!1===Q.computeRightSingularVectors&&(ae=!1);var ie=!0===Q.autoTranspose,ne=!1,le;if(!($<J))le=W.clone();else if(!ie)le=W.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{le=W.transpose(),$=le.rows,J=le.columns,ne=!0;var oe=te;te=ae,ae=oe}var se=Array(Math.min($+1,J)),de=Z($,ee,0),ue=Z(J,J,0),he=Array(J),me=Array($),ce=Math.min($-1,J),pe=Math.max(0,Math.min(J-2,$)),ge,fe,_e,be,ye,xe,ke,we,ve,Me,je,Pe,De,Ie,Se,Ce,Ae,Re,Be,ze,Te;for(_e=0,Me=Math.max(ce,pe);_e<Me;_e++){if(_e<ce){for(se[_e]=0,ge=_e;ge<$;ge++)se[_e]=G(se[_e],le[ge][_e]);if(0!==se[_e]){for(0>le[_e][_e]&&(se[_e]=-se[_e]),ge=_e;ge<$;ge++)le[ge][_e]/=se[_e];le[_e][_e]+=1}se[_e]=-se[_e]}for(fe=_e+1;fe<J;fe++){if(_e<ce&&0!==se[_e]){for(ye=0,ge=_e;ge<$;ge++)ye+=le[ge][_e]*le[ge][fe];for(ye=-ye/le[_e][_e],ge=_e;ge<$;ge++)le[ge][fe]+=ye*le[ge][_e]}he[fe]=le[_e][fe]}if(te&&_e<ce)for(ge=_e;ge<$;ge++)de[ge][_e]=le[ge][_e];if(_e<pe){for(he[_e]=0,ge=_e+1;ge<J;ge++)he[_e]=G(he[_e],he[ge]);if(0!==he[_e]){for(0>he[_e+1]&&(he[_e]=-he[_e]),ge=_e+1;ge<J;ge++)he[ge]/=he[_e];he[_e+1]+=1}if(he[_e]=-he[_e],_e+1<$&&0!==he[_e]){for(ge=_e+1;ge<$;ge++)me[ge]=0;for(fe=_e+1;fe<J;fe++)for(ge=_e+1;ge<$;ge++)me[ge]+=he[fe]*le[ge][fe];for(fe=_e+1;fe<J;fe++)for(ye=-he[fe]/he[_e+1],ge=_e+1;ge<$;ge++)le[ge][fe]+=ye*me[ge]}if(ae)for(ge=_e+1;ge<J;ge++)ue[ge][_e]=he[ge]}}if(be=Math.min(J,$+1),ce<J&&(se[ce]=le[ce][ce]),$<be&&(se[be-1]=0),pe+1<be&&(he[pe]=le[pe][be-1]),he[be-1]=0,te){for(fe=ce;fe<ee;fe++){for(ge=0;ge<$;ge++)de[ge][fe]=0;de[fe][fe]=1}for(_e=ce-1;0<=_e;_e--)if(0!==se[_e]){for(fe=_e+1;fe<ee;fe++){for(ye=0,ge=_e;ge<$;ge++)ye+=de[ge][_e]*de[ge][fe];for(ye=-ye/de[_e][_e],ge=_e;ge<$;ge++)de[ge][fe]+=ye*de[ge][_e]}for(ge=_e;ge<$;ge++)de[ge][_e]=-de[ge][_e];for(de[_e][_e]=1+de[_e][_e],ge=0;ge<_e-1;ge++)de[ge][_e]=0}else{for(ge=0;ge<$;ge++)de[ge][_e]=0;de[_e][_e]=1}}if(ae)for(_e=J-1;0<=_e;_e--){if(_e<pe&&0!==he[_e])for(fe=_e+1;fe<J;fe++){for(ye=0,ge=_e+1;ge<J;ge++)ye+=ue[ge][_e]*ue[ge][fe];for(ye=-ye/ue[_e+1][_e],ge=_e+1;ge<J;ge++)ue[ge][fe]+=ye*ue[ge][_e]}for(ge=0;ge<J;ge++)ue[ge][_e]=0;ue[_e][_e]=1}for(var Ee=be-1,Le=0,Fe=Math.pow(2,-52);0<be;){for(_e=be-2;-1<=_e&&-1!==_e;_e--)if(Math.abs(he[_e])<=Fe*(Math.abs(se[_e])+Math.abs(se[_e+1]))){he[_e]=0;break}if(_e===be-2)je=4;else{for(xe=be-1;xe>=_e&&xe!==_e;xe--)if(ye=(xe===be?0:Math.abs(he[xe]))+(xe===_e+1?0:Math.abs(he[xe-1])),Math.abs(se[xe])<=Fe*ye){se[xe]=0;break}xe===_e?je=3:xe===be-1?je=1:(je=2,_e=xe)}switch(_e++,je){case 1:{for(ke=he[be-2],he[be-2]=0,fe=be-2;fe>=_e;fe--)if(ye=G(se[fe],ke),we=se[fe]/ye,ve=ke/ye,se[fe]=ye,fe!==_e&&(ke=-ve*he[fe-1],he[fe-1]=we*he[fe-1]),ae)for(ge=0;ge<J;ge++)ye=we*ue[ge][fe]+ve*ue[ge][be-1],ue[ge][be-1]=-ve*ue[ge][fe]+we*ue[ge][be-1],ue[ge][fe]=ye;break}case 2:{for(ke=he[_e-1],he[_e-1]=0,fe=_e;fe<be;fe++)if(ye=G(se[fe],ke),we=se[fe]/ye,ve=ke/ye,se[fe]=ye,ke=-ve*he[fe],he[fe]=we*he[fe],te)for(ge=0;ge<$;ge++)ye=we*de[ge][fe]+ve*de[ge][_e-1],de[ge][_e-1]=-ve*de[ge][fe]+we*de[ge][_e-1],de[ge][fe]=ye;break}case 3:{for(Pe=Math.max(Math.max(Math.max(Math.max(Math.abs(se[be-1]),Math.abs(se[be-2])),Math.abs(he[be-2])),Math.abs(se[_e])),Math.abs(he[_e])),De=se[be-1]/Pe,Ie=se[be-2]/Pe,Se=he[be-2]/Pe,Ce=se[_e]/Pe,Ae=he[_e]/Pe,Re=((Ie+De)*(Ie-De)+Se*Se)/2,Be=De*Se*(De*Se),ze=0,(0!==Re||0!==Be)&&(ze=Math.sqrt(Re*Re+Be),0>Re&&(ze=-ze),ze=Be/(Re+ze)),ke=(Ce+De)*(Ce-De)+ze,Te=Ce*Ae,fe=_e;fe<be-1;fe++){if(ye=G(ke,Te),we=ke/ye,ve=Te/ye,fe!==_e&&(he[fe-1]=ye),ke=we*se[fe]+ve*he[fe],he[fe]=we*he[fe]-ve*se[fe],Te=ve*se[fe+1],se[fe+1]=we*se[fe+1],ae)for(ge=0;ge<J;ge++)ye=we*ue[ge][fe]+ve*ue[ge][fe+1],ue[ge][fe+1]=-ve*ue[ge][fe]+we*ue[ge][fe+1],ue[ge][fe]=ye;if(ye=G(ke,Te),we=ke/ye,ve=Te/ye,se[fe]=ye,ke=we*he[fe]+ve*se[fe+1],se[fe+1]=-ve*he[fe]+we*se[fe+1],Te=ve*he[fe+1],he[fe+1]=we*he[fe+1],te&&fe<$-1)for(ge=0;ge<$;ge++)ye=we*de[ge][fe]+ve*de[ge][fe+1],de[ge][fe+1]=-ve*de[ge][fe]+we*de[ge][fe+1],de[ge][fe]=ye}he[be-2]=ke,Le=Le+1;break}case 4:{if(0>=se[_e]&&(se[_e]=0>se[_e]?-se[_e]:0,ae))for(ge=0;ge<=Ee;ge++)ue[ge][_e]=-ue[ge][_e];for(;_e<Ee&&!(se[_e]>=se[_e+1]);){if(ye=se[_e],se[_e]=se[_e+1],se[_e+1]=ye,ae&&_e<J-1)for(ge=0;ge<J;ge++)ye=ue[ge][_e+1],ue[ge][_e+1]=ue[ge][_e],ue[ge][_e]=ye;if(te&&_e<$-1)for(ge=0;ge<$;ge++)ye=de[ge][_e+1],de[ge][_e+1]=de[ge][_e],de[ge][_e]=ye;_e++}Le=0,be--;break}}}if(ne){var Ve=ue;ue=de,de=Ve}this.m=$,this.n=J,this.s=se,this.U=de,this.V=ue}var E=D("../matrix"),L=D("./util"),G=L.hypotenuse,Z=L.getFilled2DArray;T.prototype={get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},get norm2(){return this.s[0]},get rank(){var W=Math.pow(2,-52),Q=Math.max(this.m,this.n)*this.s[0]*W,$=0,J=this.s;for(var ee=0,te=J.length;ee<te;ee++)J[ee]>Q&&$++;return $},get diagonal(){return this.s},get threshold(){return Math.pow(2,-52)/2*Math.max(this.m,this.n)*this.s[0]},get leftSingularVectors(){return E.isMatrix(this.U)||(this.U=new E(this.U)),this.U},get rightSingularVectors(){return E.isMatrix(this.V)||(this.V=new E(this.V)),this.V},get diagonalMatrix(){return E.diag(this.s)},solve:function(Q){var $=this.threshold,J=this.s.length,ee=E.zeros(J,J),te;for(te=0;te<J;te++)ee[te][te]=Math.abs(this.s[te])<=$?0:1/this.s[te];var ae=this.U,ie=this.rightSingularVectors,ne=ie.mmul(ee),le=ie.rows,oe=ae.length,se=E.zeros(le,oe),de,ue,he;for(te=0;te<le;te++)for(de=0;de<oe;de++){for(he=0,ue=0;ue<J;ue++)he+=ne[te][ue]*ae[de][ue];se[te][de]=he}return se.mmul(Q)},solveForDiagonal:function(Q){return this.solve(E.diag(Q))},inverse:function(){var Q=this.V,$=this.threshold,J=Q.length,ee=Q[0].length,te=new E(J,this.s.length),ae,ie;for(ae=0;ae<J;ae++)for(ie=0;ie<ee;ie++)te[ae][ie]=Math.abs(this.s[ie])>$?Q[ae][ie]/this.s[ie]:0;var ne=this.U,le=ne.length,oe=ne[0].length,se=new E(J,le),de,ue;for(ae=0;ae<J;ae++)for(ie=0;ie<le;ie++){for(ue=0,de=0;de<oe;de++)ue+=te[ae][de]*ne[ie][de];se[ae][ie]=ue}return se}},I.exports=T},{"../matrix":87,"./util":84}],84:[function(D,I,R){"use strict";R.hypotenuse=function(E,L){if(Math.abs(E)>Math.abs(L)){var G=L/E;return Math.abs(E)*Math.sqrt(1+G*G)}if(0!==L){var G=E/L;return Math.abs(L)*Math.sqrt(1+G*G)}return 0},R.getEmpty2DArray=function(T,E){var L=Array(T);for(var G=0;G<T;G++)L[G]=Array(E);return L},R.getFilled2DArray=function(T,E,L){var G=Array(T);for(var Z=0;Z<T;Z++){G[Z]=Array(E);for(var W=0;W<E;W++)G[Z][W]=L}return G}},{}],85:[function(D,I,R){"use strict";function T(J){return J=L.checkMatrix(J),E(J,L.eye(J.rows))}function E(J,ee){return J=L.checkMatrix(J),ee=L.checkMatrix(ee),J.isSquare()?new W(J).solve(ee):new Q(J).solve(ee)}var L=D("./matrix"),G=D("./dc/svd"),Z=D("./dc/evd"),W=D("./dc/lu"),Q=D("./dc/qr"),$=D("./dc/cholesky");L.inverse=L.inv=T,L.prototype.inverse=L.prototype.inv=function(){return T(this)},L.solve=E,L.prototype.solve=function(J){return E(this,J)},I.exports={SingularValueDecomposition:G,SVD:G,EigenvalueDecomposition:Z,EVD:Z,LuDecomposition:W,LU:W,QrDecomposition:Q,QR:Q,CholeskyDecomposition:$,CHO:$,inverse:T,solve:E}},{"./dc/cholesky":79,"./dc/evd":80,"./dc/lu":81,"./dc/qr":82,"./dc/svd":83,"./matrix":87}],86:[function(D,I,R){"use strict";I.exports=D("./matrix"),I.exports.Decompositions=I.exports.DC=D("./decompositions")},{"./decompositions":85,"./matrix":87}],87:[function(D,I,R){"use strict";D("./symbol-species");var T=D("./abstractMatrix"),E=D("./util");class L extends T(Array){constructor(G,Z){if(1===arguments.length&&"number"==typeof G)return Array(G);if(L.isMatrix(G))return G.clone();if(Number.isInteger(G)&&0<G){if(super(G),Number.isInteger(Z)&&0<Z)for(var W=0;W<G;W++)this[W]=Array(Z);else throw new TypeError("nColumns must be a positive integer");}else if(Array.isArray(G)){var Q=G;if(G=Q.length,Z=Q[0].length,"number"!=typeof Z||0===Z)throw new TypeError("Data must be a 2D array with at least one element");super(G);for(var W=0;W<G;W++){if(Q[W].length!==Z)throw new RangeError("Inconsistent array dimensions");this[W]=[].concat(Q[W])}}else throw new TypeError("First argument must be a positive number or an array");this.rows=G,this.columns=Z}set(G,Z,W){return this[G][Z]=W,this}get(G,Z){return this[G][Z]}clone(){var G=new this.constructor[Symbol.species](this.rows,this.columns);for(var Z=0;Z<this.rows;Z++)for(var W=0;W<this.columns;W++)G.set(Z,W,this.get(Z,W));return G}removeRow(G){if(E.checkRowIndex(this,G),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(G,1),this.rows-=1,this}addRow(G,Z){return void 0===Z&&(Z=G,G=this.rows),E.checkRowIndex(this,G,!0),Z=E.checkRowVector(this,Z,!0),this.splice(G,0,Z),this.rows+=1,this}removeColumn(G){if(E.checkColumnIndex(this,G),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var Z=0;Z<this.rows;Z++)this[Z].splice(G,1);return this.columns-=1,this}addColumn(G,Z){"undefined"==typeof Z&&(Z=G,G=this.columns),E.checkColumnIndex(this,G,!0),Z=E.checkColumnVector(this,Z);for(var W=0;W<this.rows;W++)this[W].splice(G,0,Z[W]);return this.columns+=1,this}}I.exports=L,L.abstractMatrix=T},{"./abstractMatrix":78,"./symbol-species":88,"./util":89}],88:[function(D,I,R){"use strict";Symbol.species||(Symbol.species=Symbol.for("@@species"))},{}],89:[function(D,I,R){"use strict";R.checkRowIndex=function(E,L,G){var Z=G?E.rows:E.rows-1;if(0>L||L>Z)throw new RangeError("Row index out of range")},R.checkColumnIndex=function(E,L,G){var Z=G?E.columns:E.columns-1;if(0>L||L>Z)throw new RangeError("Column index out of range")},R.checkRowVector=function(E,L){if(L.to1DArray&&(L=L.to1DArray()),L.length!==E.columns)throw new RangeError("vector size must be the same as the number of columns");return L},R.checkColumnVector=function(E,L){if(L.to1DArray&&(L=L.to1DArray()),L.length!==E.rows)throw new RangeError("vector size must be the same as the number of rows");return L},R.checkIndices=function(E,L,G){var Z=L.some(Q=>{return 0>Q||Q>=E.rows}),W=G.some(Q=>{return 0>Q||Q>=E.columns});if(Z||W)throw new RangeError("Indices are out of range");if("object"!=typeof L||"object"!=typeof G)throw new TypeError("Unexpected type for row/column indices");return Array.isArray(L)||(L=Array.from(L)),Array.isArray(G)||(L=Array.from(G)),{row:L,column:G}},R.checkRange=function(E,L,G,Z,W){if(5!==arguments.length)throw new TypeError("Invalid argument type");var Q=Array.from(arguments).slice(1).some(function($){return"number"!=typeof $});if(Q)throw new TypeError("Invalid argument type");if(L>G||Z>W||0>L||L>=E.rows||0>G||G>=E.rows||0>Z||Z>=E.columns||0>W||W>=E.columns)throw new RangeError("Submatrix indices are out of range")},R.getRange=function(E,L){var G=Array(L-E+1);for(var Z=0;Z<G.length;Z++)G[Z]=E+Z;return G}},{}],90:[function(D,I,R){"use strict";var T=D("../abstractMatrix"),E;class L extends T(){constructor(G,Z,W){super(),this.matrix=G,this.rows=Z,this.columns=W}static get[Symbol.species](){return E||(E=D("../matrix")),E}}I.exports=L},{"../abstractMatrix":78,"../matrix":87}],91:[function(D,I,R){"use strict";var T=D("./base");I.exports=class extends T{constructor(L,G){super(L,L.rows,1),this.column=G}set(L,G,Z){return this.matrix.set(L,this.column,Z),this}get(L,G){return this.matrix.get(L,this.column)}}},{"./base":90}],92:[function(D,I,R){"use strict";var T=D("./base");I.exports=class extends T{constructor(L){super(L,L.rows,L.columns)}set(L,G,Z){return this.matrix.set(L,this.columns-G-1,Z),this}get(L,G){return this.matrix.get(L,this.columns-G-1)}}},{"./base":90}],93:[function(D,I,R){"use strict";var T=D("./base");I.exports=class extends T{constructor(L){super(L,L.rows,L.columns)}set(L,G,Z){return this.matrix.set(this.rows-L-1,G,Z),this}get(L,G){return this.matrix.get(this.rows-L-1,G)}}},{"./base":90}],94:[function(D,I,R){"use strict";var T=D("./base");I.exports=class extends T{constructor(L,G){super(L,1,L.columns),this.row=G}set(L,G,Z){return this.matrix.set(this.row,G,Z),this}get(L,G){return this.matrix.get(this.row,G)}}},{"./base":90}],95:[function(D,I,R){"use strict";var T=D("./base"),E=D("../util");I.exports=class extends T{constructor(G,Z,W){var Q=E.checkIndices(G,Z,W);super(G,Q.row.length,Q.column.length),this.rowIndices=Q.row,this.columnIndices=Q.column}set(G,Z,W){return this.matrix.set(this.rowIndices[G],this.columnIndices[Z],W),this}get(G,Z){return this.matrix.get(this.rowIndices[G],this.columnIndices[Z])}}},{"../util":89,"./base":90}],96:[function(D,I,R){"use strict";var T=D("./base"),E=D("../util");I.exports=class extends T{constructor(G,Z,W,Q,$){E.checkRange(G,Z,W,Q,$),super(G,W-Z+1,$-Q+1),this.startRow=Z,this.startColumn=Q}set(G,Z,W){return this.matrix.set(this.startRow+G,this.startColumn+Z,W),this}get(G,Z){return this.matrix.get(this.startRow+G,this.startColumn+Z)}}},{"../util":89,"./base":90}],97:[function(D,I,R){"use strict";var T=D("./base");I.exports=class extends T{constructor(L){super(L,L.columns,L.rows)}set(L,G,Z){return this.matrix.set(G,L,Z),this}get(L,G){return this.matrix.get(G,L)}}},{"./base":90}],98:[function(D,I,R){"use strict";R.SimpleLinearRegression=R.SLR=D("./regression/simple-linear-regression"),R.NonLinearRegression=R.NLR={PolynomialRegression:D("./regression/polynomial-regression"),PotentialRegression:D("./regression/potential-regression"),ExpRegression:D("./regression/exp-regression"),PowerRegression:D("./regression/power-regression")},R.KernelRidgeRegression=R.KRR=D("./regression/kernel-ridge-regression"),R.PolinomialFitting2D=D("./regression/poly-fit-regression2d"),R.TheilSenRegression=D("./regression/theil-sen-regression")},{"./regression/exp-regression":100,"./regression/kernel-ridge-regression":101,"./regression/poly-fit-regression2d":102,"./regression/polynomial-regression":103,"./regression/potential-regression":104,"./regression/power-regression":105,"./regression/simple-linear-regression":106,"./regression/theil-sen-regression":107}],99:[function(D,I,R){"use strict";I.exports=class{predict(E){var L;if(Array.isArray(E)){L=Array(E.length);for(var G=0;G<E.length;G++)L[G]=this._predict(E[G])}else if(Number.isFinite(E))L=this._predict(E);else throw new TypeError("x must be a number or array");return L}_predict(E){throw new Error("_compute not implemented")}train(E){}toString(E){return""}toLaTeX(E){return""}modelQuality(E,L){var G=E.length,Z=Array(G);for(var W=0;W<G;W++)Z[W]=this._predict(E[W]);var Q=0,$=0,J=0,ee=0,te=0,ae=0,ie=0;for(var ne=0;ne<G;ne++)Q+=Z[ne],$+=L[ne],te+=Z[ne]*Z[ne],ae+=L[ne]*L[ne],ie+=Z[ne]*L[ne],0!==L[ne]&&(J+=(L[ne]-Z[ne])*(L[ne]-Z[ne])/L[ne]),ee=(L[ne]-Z[ne])*(L[ne]-Z[ne]);var le=(G*ie-Q*$)/Math.sqrt((G*te-Q*Q)*(G*ae-$*$));return{r:le,r2:le*le,chi2:J,rmsd:ee*ee/G}}}},{}],100:[function(D,I,R){"use strict";var T=D("./util").maybeToPrecision,E=D("./simple-linear-regression"),L=D("./base-regression");class G extends L{constructor(Z,W,Q){if(super(),!0===Z)this.A=W.A,this.C=W.C,W.quality&&(this.quality=W.quality);else{var $=Z.length;if($!==W.length)throw new RangeError("input and output array have a different length");var J=Array($);for(var ee=0;ee<$;ee++)J[ee]=Math.log(W[ee]);var te=new E(Z,J,{computeCoefficient:!1});this.A=te.slope,this.C=Math.exp(te.intercept),(Q||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){return this.C*Math.exp(Z*this.A)}toJSON(){var Z={name:"expRegression",A:this.A,C:this.C};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"y = "+T(this.C,Z)+"*exp("+T(this.A,Z)+"*x)"}toLaTeX(Z){return 0<=this.A?"y = "+T(this.C,Z)+"e^{"+T(this.A,Z)+"x}":"y = \\frac{"+T(this.C,Z)+"}{e^{"+T(-this.A,Z)+"x}}"}static load(Z){if("expRegression"!==Z.name)throw new TypeError("not a exp regression model");return new G(!0,Z)}}I.exports=G},{"./base-regression":99,"./simple-linear-regression":106,"./util":108}],101:[function(D,I,R){"use strict";var T=D("ml-matrix"),E=D("ml-kernel"),L=D("./base-regression"),G={lambda:0.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class Z extends L{constructor(W,Q,$){if(super(),!0===W)this.alpha=Q.alpha,this.inputs=Q.inputs,this.kernelType=Q.kernelType,this.kernelOptions=Q.kernelOptions,this.kernel=new E(Q.kernelType,Q.kernelOptions),Q.quality&&(this.quality=Q.quality);else{$=Object.assign({},G,$);var J=new E($.kernelType,$.kernelOptions),ee=J.compute(W),te=W.length;ee.add(T.eye(te,te).mul($.lambda)),this.alpha=ee.solve(Q),this.inputs=W,this.kernelType=$.kernelType,this.kernelOptions=$.kernelOptions,this.kernel=J,$.computeQuality&&(this.quality=this.modelQuality(W,Q))}}_predict(W){return this.kernel.compute([W],this.inputs).mmul(this.alpha)[0]}toJSON(){var W={name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions};return this.quality&&(W.quality=this.quality),W}static load(W){if("kernelRidgeRegression"!==W.name)throw new TypeError("not a KRR model");return new Z(!0,W)}}I.exports=Z},{"./base-regression":99,"ml-kernel":69,"ml-matrix":86}],102:[function(D,I,R){"use strict";function T($,J){var ee=$.clone();for(var te=0;te<$.rows;++te)ee[te][0]=Math.pow(ee[te][0],J);return ee}function E($,J){this[$][J]=Math.abs(this[$][J])}var L=D("ml-matrix"),G=L.DC.SingularValueDecomposition,Z=D("./base-regression"),W={order:2};class Q extends Z{constructor($,J,ee){super(),!0===$?(this.coefficients=L.columnVector(J.coefficients),this.order=J.order,J.r&&(this.r=J.r,this.r2=J.r2),J.chi2&&(this.chi2=J.chi2)):(ee=Object.assign({},W,ee),this.order=ee.order,this.coefficients=[],this.X=$,this.y=J,this.train(this.X,this.y,ee),ee.computeQuality&&(this.quality=this.modelQuality($,J)))}train($,J,ee){if(L.isMatrix($)||($=new L($)),L.isMatrix(J)||(J=L.columnVector(J)),J.rows!==$.rows&&(J=J.transpose()),2!==$.columns)throw new RangeError("You give X with "+$.columns+" columns and it must be 2");if($.rows!==J.rows)throw new RangeError("X and y must have the same rows");var te=$.rows,ae=(this.order+2)*(this.order+1)/2;this.coefficients=Array(ae);var ie=$.getColumnVector(0),ne=$.getColumnVector(1),le=1/ie.clone().apply(E).max(),oe=1/ne.clone().apply(E).max(),se=1/J.clone().apply(E).max();ie.mulColumn(0,le),ne.mulColumn(0,oe),J.mulColumn(0,se);var de=new L(te,ae),ue=0;for(var he=0;he<=this.order;++he){var me=this.order-he;for(var ce=0;ce<=me;++ce){var pe=T(ie,he).mulColumnVector(T(ne,ce));de.setColumn(ue,pe),ue++}}var ge=new G(de.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),fe=L.rowVector(ge.diagonal);fe=fe.apply(function(xe,ke){this[xe][ke]=1e-15<=this[xe][ke]?1/this[xe][ke]:0});var _e=L.zeros(te,ae);for(he=0;he<ae;++he)_e[he][he]=fe[0][he];fe=_e;var be=ge.rightSingularVectors,ye=ge.leftSingularVectors;for(this.coefficients=ye.mmul(fe.transpose()).mmul(be.transpose()).mmul(J),ue=0,he=0;he<=ae;++he)for(me=this.order-he,ce=0;ce<=me;++ce)this.coefficients[ue][0]=this.coefficients[ue][0]*Math.pow(le,he)*Math.pow(oe,ce)/se,ue++}_predict($){var J=$[0],ee=$[1],te=0,ae=0;for(var ie=0;ie<=this.order;ie++)for(var ne=0;ne<=this.order-ie;ne++)te+=Math.pow(J,ie)*Math.pow(ee,ne)*this.coefficients[ae][0],ae++;return te}toJSON(){var $={name:"polyfit2D",order:this.order,coefficients:this.coefficients};return this.quality&&($.quality=this.quality),$}static load($){if("polyfit2D"!==$.name)throw new TypeError("not a polyfit2D model");return new Q(!0,$)}}I.exports=Q},{"./base-regression":99,"ml-matrix":86}],103:[function(D,I,R){"use strict";var T=D("./util").maybeToPrecision,E=D("./base-regression"),L=D("ml-matrix");class G extends E{constructor(Z,W,Q,$){if(super(),!0===Z)this.coefficients=W.coefficients,this.powers=W.powers,this.M=W.M,W.quality&&(this.quality=W.quality);else{var J=Z.length;if(J!==W.length)throw new RangeError("input and output array have a different length");var ee=void 0;if(Array.isArray(Q))ee=Q,Q=ee.length;else for(Q++,ee=Array(Q),ie=0;ie<Q;ie++)ee[ie]=ie;var te=new L(J,Q),ae=new L([W]),ie,ne;for(ie=0;ie<Q;ie++)for(ne=0;ne<J;ne++)te[ne][ie]=0===ee[ie]?1:Math.pow(Z[ne],ee[ie]);var le=te.transposeView(),oe=le.mmul(te),se=le.mmul(ae.transposeView());this.coefficients=oe.solve(se).to1DArray(),this.powers=ee,this.M=Q-1,($||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){var W=0;for(var Q=0;Q<this.powers.length;Q++)W+=this.coefficients[Q]*Math.pow(Z,this.powers[Q]);return W}toJSON(){var Z={name:"polynomialRegression",coefficients:this.coefficients,powers:this.powers,M:this.M};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return this._toFormula(Z,!1)}toLaTeX(Z){return this._toFormula(Z,!0)}_toFormula(Z,W){var Q="^",$="",J="*";W&&(Q="^{",$="}",J="");var ee="",te;for(var ae=0;ae<this.coefficients.length;ae++)te="",0!==this.coefficients[ae]&&(te=0===this.powers[ae]?T(this.coefficients[ae],Z):1===this.powers[ae]?T(this.coefficients[ae],Z)+J+"x":T(this.coefficients[ae],Z)+J+"x"+Q+this.powers[ae]+$,0<this.coefficients[ae]&&(te="+"+te)),ee=te+ee;return"+"===ee.charAt(0)&&(ee=ee.slice(1)),"y = "+ee}static load(Z){if("polynomialRegression"!==Z.name)throw new TypeError("not a polynomial regression model");return new G(!0,Z)}}I.exports=G},{"./base-regression":99,"./util":108,"ml-matrix":86}],104:[function(D,I,R){"use strict";var T=D("./util").maybeToPrecision,E=D("./polynomial-regression"),L=D("./power-regression"),G=D("./base-regression");I.exports=class extends G{constructor(W,Q,$,J){if(super(),!0===W)this.A=Q.A,this.M=Q.M,Q.quality&&(this.quality=Q.quality);else{var ee=W.length;if(ee!==Q.length)throw new RangeError("input and output array have a different length");var te=new E(W,Q,[$],{computeCoefficient:!0});this.A=te.coefficients[0],this.M=$,(J||{}).computeQuality&&(this.quality=this.modelQuality(W,Q))}}_predict(W){return this.A*Math.pow(W,this.M)}toJSON(){var W={name:"potentialRegression",A:this.A,M:this.M};return this.quality&&(W.quality=this.quality),W}toString(W){return"y = "+T(this.A,W)+"*x^"+this.M}toLaTeX(W){return 0<=this.M?"y = "+T(this.A,W)+"x^{"+this.M+"}":"y = \\frac{"+T(this.A,W)+"}{x^{"+-this.M+"}}"}static load(W){if("potentialRegression"!==W.name)throw new TypeError("not a potential regression model");return new L(!0,W)}}},{"./base-regression":99,"./polynomial-regression":103,"./power-regression":105,"./util":108}],105:[function(D,I,R){"use strict";var T=D("./util").maybeToPrecision,E=D("./simple-linear-regression"),L=D("./base-regression");class G extends L{constructor(Z,W,Q){if(super(),!0===Z)this.A=W.A,this.B=W.B,this.quality=W.quality||{},W.quality.r&&(this.quality.r=W.quality.r,this.quality.r2=W.quality.r2),W.quality.chi2&&(this.quality.chi2=W.quality.chi2);else{var $=Z.length;if($!==W.length)throw new RangeError("input and output array have a different length");var J=Array($),ee=Array($);for(var te=0;te<$;te++)J[te]=Math.log(Z[te]),ee[te]=Math.log(W[te]);var ae=new E(J,ee,{computeCoefficient:!1});this.A=Math.exp(ae.intercept),this.B=ae.slope,(Q||{}).computeQuality&&(this.quality=this.modelQuality(Z,W))}}_predict(Z){return this.A*Math.pow(Z,this.B)}toJSON(){var Z={name:"powerRegression",A:this.A,B:this.B};return this.quality&&(Z.quality=this.quality),Z}toString(Z){return"y = "+T(this.A,Z)+"*x^"+T(this.B,Z)}toLaTeX(Z){return 0<=this.B?"y = "+T(this.A,Z)+"x^{"+T(this.B,Z)+"}":"y = \\frac{"+T(this.A,Z)+"}{x^{"+T(-this.B,Z)+"}}"}static load(Z){if("powerRegression"!==Z.name)throw new TypeError("not a power regression model");return new G(!0,Z)}}I.exports=G},{"./base-regression":99,"./simple-linear-regression":106,"./util":108}],106:[function(D,I,R){"use strict";var T=D("./util").maybeToPrecision,E=D("./base-regression");class L extends E{constructor(G,Z,W){if(W=W||{},super(),!0===G)this.slope=Z.slope,this.intercept=Z.intercept,this.quality=Z.quality||{},Z.quality.r&&(this.quality.r=Z.quality.r,this.quality.r2=Z.quality.r2),Z.quality.chi2&&(this.quality.chi2=Z.quality.chi2);else{var Q=G.length;if(Q!==Z.length)throw new RangeError("input and output array have a different length");var $=0,J=0,ee=0,te=0;for(var ae=0;ae<Q;ae++)$+=G[ae],J+=Z[ae],ee+=G[ae]*G[ae],Z[ae]*Z[ae],te+=G[ae]*Z[ae];var ie=Q*te-$*J;this.slope=ie/(Q*ee-$*$),this.intercept=1/Q*J-this.slope*(1/Q)*$,this.coefficients=[this.intercept,this.slope],W.computeQuality&&(this.quality=this.modelQuality(G,Z))}}toJSON(){var G={name:"simpleLinearRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(G.quality=this.quality),G}_predict(G){return this.slope*G+this.intercept}computeX(G){return(G-this.intercept)/this.slope}toString(G){var Z="y = ";if(this.slope){var W=T(this.slope,G);if(Z+=(1==W?"":W)+"x",this.intercept){var Q=Math.abs(this.intercept),$=Q===this.intercept?"+":"-";Z+=" "+$+" "+T(Q,G)}}else Z+=T(this.intercept,G);return Z}toLaTeX(G){return this.toString(G)}static load(G){if("simpleLinearRegression"!==G.name)throw new TypeError("not a SLR model");return new L(!0,G)}}I.exports=L},{"./base-regression":99,"./util":108}],107:[function(D,I,R){"use strict";var T=D("./base-regression"),E=D("./util").maybeToPrecision,L=D("ml-stat/array").median;class G extends T{constructor(Z,W,Q){if(Q=Q||{},super(),!0===Z)this.slope=W.slope,this.intercept=W.intercept,this.quality=W.quality||{},W.quality.r&&(this.quality.r=W.quality.r,this.quality.r2=W.quality.r2),W.quality.chi2&&(this.quality.chi2=W.quality.chi2);else{var $=Z.length;if($!==W.length)throw new RangeError("Input and output array have a different length");var J=Array($*$),ee=0;for(var te=0;te<$;++te)for(var ae=te+1;ae<$;++ae)Z[te]!==Z[ae]&&(J[ee++]=(W[ae]-W[te])/(Z[ae]-Z[te]));J.length=ee;var ie=L(J),ne=Array($);for(var le=0;le<$;++le)ne[le]=W[le]-ie*Z[le];this.slope=ie,this.intercept=L(ne),this.coefficients=[this.intercept,this.slope],Q.computeQuality&&(this.quality=this.modelQuality(Z,W))}}toJSON(){var Z={name:"TheilSenRegression",slope:this.slope,intercept:this.intercept};return this.quality&&(Z.quality=this.quality),Z}_predict(Z){return this.slope*Z+this.intercept}computeX(Z){return(Z-this.intercept)/this.slope}toString(Z){var W="y = ";if(this.slope){var Q=E(this.slope,Z);if(W+=(0.00001>Math.abs(Q-1)?"":Q)+"x",this.intercept){var $=Math.abs(this.intercept),J=$===this.intercept?"+":"-";W+=" "+J+" "+E($,Z)}}else W+=E(this.intercept,Z);return W}toLaTeX(Z){return this.toString(Z)}static load(Z){if("TheilSenRegression"!==Z.name)throw new TypeError("not a Theil-Sen model");return new G(!0,Z)}}I.exports=G},{"./base-regression":99,"./util":108,"ml-stat/array":109}],108:[function(D,I,R){"use strict";R.maybeToPrecision=function(E,L){return L?E.toPrecision(L):E.toString()}},{}],109:[function(D,I,R){"use strict";function T(E,L){return E-L}R.sum=function(L){var E=0;for(var G=0;G<L.length;G++)E+=L[G];return E},R.max=function(L){var E=L[0],G=L.length;for(var Z=1;Z<G;Z++)L[Z]>E&&(E=L[Z]);return E},R.min=function(L){var E=L[0],G=L.length;for(var Z=1;Z<G;Z++)L[Z]<E&&(E=L[Z]);return E},R.minMax=function(L){var G=L[0],Z=L[0],W=L.length;for(var Q=1;Q<W;Q++)L[Q]<G&&(G=L[Q]),L[Q]>Z&&(Z=L[Q]);return{min:G,max:Z}},R.arithmeticMean=function(L){var G=0,Z=L.length;for(var W=0;W<Z;W++)G+=L[W];return G/Z},R.mean=R.arithmeticMean,R.geometricMean=function(L){var G=1,Z=L.length;for(var W=0;W<Z;W++)G*=L[W];return Math.pow(G,1/Z)},R.logMean=function(L){var G=0,Z=L.length;for(var W=0;W<Z;W++)G+=Math.log(L[W]);return G/Z},R.grandMean=function(L,G){var Z=0,W=0,Q=L.length;for(var $=0;$<Q;$++)Z+=G[$]*L[$],W+=G[$];return Z/W},R.truncatedMean=function(L,G,Z){Z===void 0&&(Z=!1),Z||(L=[].concat(L).sort(T));var W=L.length,Q=Math.floor(W*G),$=0;for(var J=Q;J<W-Q;J++)$+=L[J];return $/(W-2*Q)},R.harmonicMean=function(L){var G=0,Z=L.length;for(var W=0;W<Z;W++){if(0===L[W])throw new RangeError("value at index "+W+"is zero");G+=1/L[W]}return Z/G},R.contraHarmonicMean=function(L){var G=0,Z=0,W=L.length;for(var Q=0;Q<W;Q++)G+=L[Q]*L[Q],Z+=L[Q];if(0>Z)throw new RangeError("sum of values is negative");return G/Z},R.median=function(L,G){G===void 0&&(G=!1),G||(L=[].concat(L).sort(T));var Z=L.length,W=Math.floor(Z/2);return 0==Z%2?0.5*(L[W-1]+L[W]):L[W]},R.variance=function(L,G){G===void 0&&(G=!0);var Z=R.mean(L),W=0,Q=L.length;for(var $=0;$<Q;$++){var J=L[$]-Z;W+=J*J}return G?W/(Q-1):W/Q},R.standardDeviation=function(L,G){return Math.sqrt(R.variance(L,G))},R.standardError=function(L){return R.standardDeviation(L)/Math.sqrt(L.length)},R.robustMeanAndStdev=function(L){var G=0,Z=0,W=L.length,Q=0;for(Q=0;Q<W;Q++)G+=L[Q];G/=W;var $=Array(W);for(Q=0;Q<W;Q++)$[Q]=Math.abs(L[Q]-G);return $.sort(T),Z=1==W%2?$[(W-1)/2]/0.6745:0.5*($[W/2]+$[W/2-1])/0.6745,{mean:G,stdev:Z}},R.quartiles=function(L,G){"undefined"==typeof G&&(G=!1),G||(L=[].concat(L).sort(T));var Z=L.length/4,W=L[Math.ceil(Z)-1],Q=R.median(L,!0),$=L[Math.ceil(3*Z)-1];return{q1:W,q2:Q,q3:$}},R.pooledStandardDeviation=function(L,G){return Math.sqrt(R.pooledVariance(L,G))},R.pooledVariance=function(L,G){"undefined"==typeof G&&(G=!0);var Z=0,W=0,Q=L.length;for(var $=0;$<Q;$++){var J=L[$],ee=R.variance(J);Z+=(J.length-1)*ee,W+=G?J.length-1:J.length}return Z/W},R.mode=function(L){var G=L.length,Z=Array(G),W;for(W=0;W<G;W++)Z[W]=0;var Q=Array(G),$=0;for(W=0;W<G;W++){var J=Q.indexOf(L[W]);0<=J?Z[J]++:(Q[$]=L[W],Z[$]=1,$++)}var ee=0,te=0;for(W=0;W<$;W++)Z[W]>ee&&(ee=Z[W],te=W);return Q[te]},R.covariance=function(L,G,Z){"undefined"==typeof Z&&(Z=!0);var W=R.mean(L),Q=R.mean(G);if(L.length!==G.length)throw"Vectors do not have the same dimensions";var $=0,J=L.length;for(var ee=0;ee<J;ee++){var te=L[ee]-W,ae=G[ee]-Q;$+=te*ae}return Z?$/(J-1):$/J},R.skewness=function(L,G){"undefined"==typeof G&&(G=!0);var Z=R.mean(L),W=0,Q=0,$=L.length;for(var J=0;J<$;J++){var ee=L[J]-Z;W+=ee*ee,Q+=ee*ee*ee}var te=W/$,ae=Q/$,ie=ae/Math.pow(te,3/2);if(G){var ne=Math.sqrt($*($-1));return ne/($-2)*ie}return ie},R.kurtosis=function(L,G){"undefined"==typeof G&&(G=!0);var Z=R.mean(L),W=L.length,Q=0,$=0;for(var J=0;J<W;J++){var ee=L[J]-Z;Q+=ee*ee,$+=ee*ee*ee*ee}var te=Q/W,ae=$/W;if(G){var ie=Q/(W-1),ne=$/(ie*ie);return W*(W+1)/((W-1)*(W-2)*(W-3))*ne-3*((W-1)*(W-1)/((W-2)*(W-3)))}return ae/(te*te)-3},R.entropy=function(L,G){"undefined"==typeof G&&(G=0);var Z=0,W=L.length;for(var Q=0;Q<W;Q++)Z+=L[Q]*Math.log(L[Q]+G);return-Z},R.weightedMean=function(L,G){var Z=0,W=L.length;for(var Q=0;Q<W;Q++)Z+=L[Q]*G[Q];return Z},R.weightedStandardDeviation=function(L,G){return Math.sqrt(R.weightedVariance(L,G))},R.weightedVariance=function(L,G){var Z=R.weightedMean(L,G),W=0,Q=L.length,$=0,J=0;for(var ee=0;ee<Q;ee++){var te=L[ee]-Z,ae=G[ee];W+=ae*(te*te),J+=ae,$+=ae*ae}return W*(J/(J*J-$))},R.center=function(L,G){"undefined"==typeof G&&(G=!1);var Z=L;G||(Z=[].concat(L));var W=R.mean(Z),Q=Z.length;for(var $=0;$<Q;$++)Z[$]-=W},R.standardize=function(L,G,Z){"undefined"==typeof G&&(G=R.standardDeviation(L)),"undefined"==typeof Z&&(Z=!1);var W=L.length,Q=Z?L:Array(W);for(var $=0;$<W;$++)Q[$]=L[$]/G;return Q},R.cumulativeSum=function(L){var G=L.length,Z=Array(G);Z[0]=L[0];for(var W=1;W<G;W++)Z[W]=Z[W-1]+L[W];return Z}},{}],110:[function(D,I,R){"use strict";R.array=D("./array"),R.matrix=D("./matrix")},{"./array":109,"./matrix":111}],111:[function(D,I,R){"use strict";function T(L,G){return L-G}var E=D("./array");R.max=function(G){var L=-(1/0);for(var Z=0;Z<G.length;Z++)for(var W=0;W<G[Z].length;W++)G[Z][W]>L&&(L=G[Z][W]);return L},R.min=function(G){var L=1/0;for(var Z=0;Z<G.length;Z++)for(var W=0;W<G[Z].length;W++)G[Z][W]<L&&(L=G[Z][W]);return L},R.minMax=function(G){var Z=1/0,W=-(1/0);for(var Q=0;Q<G.length;Q++)for(var $=0;$<G[Q].length;$++)G[Q][$]<Z&&(Z=G[Q][$]),G[Q][$]>W&&(W=G[Q][$]);return{min:Z,max:W}},R.entropy=function(G,Z){"undefined"==typeof Z&&(Z=0);var W=0,Q=G.length,$=G[0].length;for(var J=0;J<Q;J++)for(var ee=0;ee<$;ee++)W+=G[J][ee]*Math.log(G[J][ee]+Z);return-W},R.mean=function(G,Z){"undefined"==typeof Z&&(Z=0);var W=G.length,Q=G[0].length,$,J,ee,te;if(-1===Z){for($=[0],J=W*Q,ee=0;ee<W;ee++)for(te=0;te<Q;te++)$[0]+=G[ee][te];$[0]/=J}else if(0===Z)for($=Array(Q),J=W,te=0;te<Q;te++){for($[te]=0,ee=0;ee<W;ee++)$[te]+=G[ee][te];$[te]/=J}else if(1===Z)for($=Array(W),J=Q,te=0;te<W;te++){for($[te]=0,ee=0;ee<Q;ee++)$[te]+=G[te][ee];$[te]/=J}else throw new Error("Invalid dimension");return $},R.sum=function(G,Z){"undefined"==typeof Z&&(Z=0);var W=G.length,Q=G[0].length,$,J,ee;if(-1===Z)for($=[0],J=0;J<W;J++)for(ee=0;ee<Q;ee++)$[0]+=G[J][ee];else if(0===Z)for($=Array(Q),ee=0;ee<Q;ee++)for($[ee]=0,J=0;J<W;J++)$[ee]+=G[J][ee];else if(1===Z)for($=Array(W),ee=0;ee<W;ee++)for($[ee]=0,J=0;J<Q;J++)$[ee]+=G[ee][J];else throw new Error("Invalid dimension");return $},R.product=function(G,Z){"undefined"==typeof Z&&(Z=0);var W=G.length,Q=G[0].length,$,J,ee;if(-1===Z)for($=[1],J=0;J<W;J++)for(ee=0;ee<Q;ee++)$[0]*=G[J][ee];else if(0===Z)for($=Array(Q),ee=0;ee<Q;ee++)for($[ee]=1,J=0;J<W;J++)$[ee]*=G[J][ee];else if(1===Z)for($=Array(W),ee=0;ee<W;ee++)for($[ee]=1,J=0;J<Q;J++)$[ee]*=G[ee][J];else throw new Error("Invalid dimension");return $},R.standardDeviation=function(G,Z,W){var Q=R.variance(G,Z,W),$=Q.length;for(var J=0;J<$;J++)Q[J]=Math.sqrt(Q[J]);return Q},R.variance=function(G,Z,W){"undefined"==typeof W&&(W=!0),Z=Z||R.mean(G);var Q=G.length;if(0===Q)return[];var $=G[0].length,J=Array($);for(var ee=0;ee<$;ee++){var te=0,ae=0,ie=0;for(var ne=0;ne<Q;ne++)ie=G[ne][ee]-Z[ee],te+=ie,ae+=ie*ie;J[ee]=W?(ae-te*te/Q)/(Q-1):(ae-te*te/Q)/Q}return J},R.median=function(G){var Z=G.length,W=G[0].length,Q=Array(W);for(var $=0;$<W;$++){var J=Array(Z);for(var ee=0;ee<Z;ee++)J[ee]=G[ee][$];J.sort(T);var te=J.length;Q[$]=0==te%2?0.5*(J[te/2]+J[te/2-1]):J[Math.floor(te/2)]}return Q},R.mode=function(G){var Z=G.length,W=G[0].length,Q=Array(W),$,J;for($=0;$<W;$++){var ee=Array(Z);for(var te=0;te<Z;te++)ee[te]=0;var ae=Array(Z),ie=0;for(J=0;J<Z;J++){var ne=ae.indexOf(G[J][$]);0<=ne?ee[ne]++:(ae[ie]=G[J][$],ee[ie]=1,ie++)}var le=0,oe=0;for(J=0;J<ie;J++)ee[J]>le&&(le=ee[J],oe=J);Q[$]=ae[oe]}return Q},R.skewness=function(G,Z){"undefined"==typeof Z&&(Z=!0);var W=R.mean(G),Q=G.length,$=W.length,J=Array($);for(var ee=0;ee<$;ee++){var te=0,ae=0;for(var ie=0;ie<Q;ie++){var ne=G[ie][ee]-W[ee];te+=ne*ne,ae+=ne*ne*ne}var le=te/Q,oe=ae/Q,se=oe/Math.pow(le,3/2);if(Z){var de=Math.sqrt(Q*(Q-1));J[ee]=de/(Q-2)*se}else J[ee]=se}return J},R.kurtosis=function(G,Z){"undefined"==typeof Z&&(Z=!0);var W=R.mean(G),Q=G.length,$=G[0].length,J=Array($);for(var ee=0;ee<$;ee++){var te=0,ae=0;for(var ie=0;ie<Q;ie++){var ne=G[ie][ee]-W[ee];te+=ne*ne,ae+=ne*ne*ne*ne}var le=te/Q,oe=ae/Q;if(Z){var se=te/(Q-1),de=ae/(se*se);J[ee]=Q*(Q+1)/((Q-1)*(Q-2)*(Q-3))*de-3*((Q-1)*(Q-1)/((Q-2)*(Q-3)))}else J[ee]=oe/(le*le)-3}return J},R.standardError=function(G){var Z=G.length,W=R.standardDeviation(G),Q=W.length,$=Array(Q),J=Math.sqrt(Z);for(var ee=0;ee<Q;ee++)$[ee]=W[ee]/J;return $},R.covariance=function(G,Z){return R.scatter(G,void 0,Z)},R.scatter=function(G,Z,W){"undefined"==typeof W&&(W=0),"undefined"==typeof Z&&(0===W?Z=G.length-1:1==W&&(Z=G[0].length-1));var Q=R.mean(G,W),$=G.length;if(0===$)return[[]];var J=G[0].length,ee,te,ae,ie,ne;if(0===W){for(ee=Array(J),te=0;te<J;te++)ee[te]=Array(J);for(te=0;te<J;te++)for(ae=te;ae<J;ae++){for(ie=0,ne=0;ne<$;ne++)ie+=(G[ne][ae]-Q[ae])*(G[ne][te]-Q[te]);ie/=Z,ee[te][ae]=ie,ee[ae][te]=ie}}else if(1===W){for(ee=Array($),te=0;te<$;te++)ee[te]=Array($);for(te=0;te<$;te++)for(ae=te;ae<$;ae++){for(ie=0,ne=0;ne<J;ne++)ie+=(G[ae][ne]-Q[ae])*(G[te][ne]-Q[te]);ie/=Z,ee[te][ae]=ie,ee[ae][te]=ie}}else throw new Error("Invalid dimension");return ee},R.correlation=function(G){var Z=R.mean(G),W=R.standardDeviation(G,!0,Z),Q=R.zScores(G,Z,W),$=G.length,J=G[0].length,ee,te,ae=Array(J);for(ee=0;ee<J;ee++)ae[ee]=Array(J);for(ee=0;ee<J;ee++)for(te=ee;te<J;te++){var ie=0;for(var ne=0,le=Q.length;ne<le;ne++)ie+=Q[ne][te]*Q[ne][ee];ie/=$-1,ae[ee][te]=ie,ae[te][ee]=ie}return ae},R.zScores=function(G,Z,W){return Z=Z||R.mean(G),"undefined"==typeof W&&(W=R.standardDeviation(G,!0,Z)),R.standardize(R.center(G,Z,!1),W,!0)},R.center=function(G,Z,W){Z=Z||R.mean(G);var Q=G,$=G.length,J,ee,te;if(!W)for(Q=Array($),J=0;J<$;J++)Q[J]=Array(G[J].length);for(J=0;J<$;J++){var ae=Q[J];for(ee=0,te=ae.length;ee<te;ee++)ae[ee]=G[J][ee]-Z[ee]}return Q},R.standardize=function(G,Z,W){"undefined"==typeof Z&&(Z=R.standardDeviation(G));var Q=G,$=G.length,J,ee,te;if(!W)for(Q=Array($),J=0;J<$;J++)Q[J]=Array(G[J].length);for(J=0;J<$;J++){var ae=Q[J],ie=G[J];for(ee=0,te=ae.length;ee<te;ee++)0===Z[ee]||isNaN(Z[ee])||(ae[ee]=ie[ee]/Z[ee])}return Q},R.weightedVariance=function(G,Z){var W=R.mean(G),Q=G.length;if(0===Q)return[];var $=G[0].length,J=Array($);for(var ee=0;ee<$;ee++){var te=0,ae=0,ie=0;for(var ne=0;ne<Q;ne++){var le=G[ne][ee]-W[ee],oe=Z[ne];te+=oe*(le*le),ie+=oe,ae+=oe*oe}J[ee]=te*(ie/(ie*ie-ae))}return J},R.weightedMean=function(G,Z,W){"undefined"==typeof W&&(W=0);var Q=G.length;if(0===Q)return[];var $=G[0].length,J,ee,te,ae,ie,ne;if(0===W){for(J=Array($),ee=0;ee<$;ee++)J[ee]=0;for(ee=0;ee<Q;ee++)for(ne=G[ee],ie=Z[ee],ae=0;ae<$;ae++)J[ae]+=ne[ae]*ie}else if(1===W){for(J=Array(Q),ee=0;ee<Q;ee++)J[ee]=0;for(ae=0;ae<Q;ae++)for(ne=G[ae],ie=Z[ae],ee=0;ee<$;ee++)J[ae]+=ne[ee]*ie}else throw new Error("Invalid dimension");var le=E.sum(Z);if(0!==le)for(ee=0,te=J.length;ee<te;ee++)J[ee]/=le;return J},R.weightedCovariance=function(G,Z,W,Q){Q=Q||0,W=W||R.weightedMean(G,Z,Q);var $=0,J=0;for(var ee=0,te=Z.length;ee<te;ee++)$+=Z[ee],J+=Z[ee]*Z[ee];var ae=$/($*$-J);return R.weightedScatter(G,Z,W,ae,Q)},R.weightedScatter=function(G,Z,W,Q,$){$=$||0,W=W||R.weightedMean(G,Z,$),"undefined"==typeof Q&&(Q=1);var J=G.length;if(0===J)return[[]];var ee=G[0].length,te,ae,ie,ne,le;if(0===$){for(te=Array(ee),ae=0;ae<ee;ae++)te[ae]=Array(ee);for(ae=0;ae<ee;ae++)for(ie=ae;ie<ee;ie++){for(le=0,ne=0;ne<J;ne++)le+=Z[ne]*(G[ne][ie]-W[ie])*(G[ne][ae]-W[ae]);te[ae][ie]=le*Q,te[ie][ae]=le*Q}}else if(1===$){for(te=Array(J),ae=0;ae<J;ae++)te[ae]=Array(J);for(ae=0;ae<J;ae++)for(ie=ae;ie<J;ie++){for(le=0,ne=0;ne<ee;ne++)le+=Z[ne]*(G[ie][ne]-W[ie])*(G[ae][ne]-W[ae]);te[ae][ie]=le*Q,te[ie][ae]=le*Q}}else throw new Error("Invalid dimension");return te}},{"./array":109}],112:[function(D,I,R){"use strict";I.exports="function"==typeof Promise?Promise:D("lie")},{lie:57}],113:[function(D,I,R){"use strict";I.exports=function(E,L){E=E||0;var G=Array(E);for(var Z=0;Z<E;Z++)G[Z]=L;return G}},{}],114:[function(D,I,R){"use strict";function T(L){if("number"!=typeof L||E(L))throw new TypeError("Expected a number")}var E=D("number-is-nan");R.asc=function(L,G){return T(L),T(G),L-G},R.desc=function(L,G){return T(L),T(G),G-L}},{"number-is-nan":115}],115:[function(D,I,R){"use strict";I.exports=Number.isNaN||function(T){return T!==T}},{}],116:[function(D,I,R){"use strict";var T=Object.prototype.hasOwnProperty,E=Object.prototype.toString,L=Array.prototype.slice,G=D("./isArguments"),Z=Object.prototype.propertyIsEnumerable,W=!Z.call({toString:null},"toString"),Q=Z.call(function(){},"prototype"),$=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],J=function(le){var oe=le.constructor;return oe&&oe.prototype===le},ee={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},te=function(){if("undefined"==typeof window)return!1;for(var ne in window)try{if(!ee["$"+ne]&&T.call(window,ne)&&null!==window[ne]&&"object"==typeof window[ne])try{J(window[ne])}catch(le){return!0}}catch(le){return!0}return!1}(),ae=function(le){if("undefined"==typeof window||!te)return J(le);try{return J(le)}catch(oe){return!1}},ie=function(le){var oe=null!==le&&"object"==typeof le,se="[object Function]"===E.call(le),de=G(le),ue=oe&&"[object String]"===E.call(le),he=[];if(!oe&&!se&&!de)throw new TypeError("Object.keys called on a non-object");if(ue&&0<le.length&&!T.call(le,0))for(var me=0;me<le.length;++me)he.push(me+"");if(de&&0<le.length)for(var ce=0;ce<le.length;++ce)he.push(ce+"");else for(var pe in le)!(Q&&se&&"prototype"===pe)&&T.call(le,pe)&&he.push(pe+"");if(W){var ge=ae(le);for(var fe=0;fe<$.length;++fe)!(ge&&"constructor"===$[fe])&&T.call(le,$[fe])&&he.push($[fe])}return he};ie.shim=function(){if(Object.keys){var le=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!le){var oe=Object.keys;Object.keys=function(de){return G(de)?oe(L.call(de)):oe(de)}}}else Object.keys=ie;return Object.keys||ie},I.exports=ie},{"./isArguments":117}],117:[function(D,I,R){"use strict";var T=Object.prototype.toString;I.exports=function(L){var G=T.call(L),Z="[object Arguments]"===G;return Z||(Z="[object Array]"!==G&&null!==L&&"object"==typeof L&&"number"==typeof L.length&&0<=L.length&&"[object Function]"===T.call(L.callee)),Z}},{}],118:[function(D,I,R){"use strict";var T=D("./lib/utils/common").assign,E=D("./lib/deflate"),L=D("./lib/inflate"),G=D("./lib/zlib/constants"),Z={};T(Z,E,L,G),I.exports=Z},{"./lib/deflate":119,"./lib/inflate":120,"./lib/utils/common":121,"./lib/zlib/constants":124}],119:[function(D,I,R){"use strict";function T(ie){if(!(this instanceof T))return new T(ie);this.options=G.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},ie||{});var ne=this.options;ne.raw&&0<ne.windowBits?ne.windowBits=-ne.windowBits:ne.gzip&&0<ne.windowBits&&16>ne.windowBits&&(ne.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Q,this.strm.avail_out=0;var le=L.deflateInit2(this.strm,ne.level,ne.method,ne.windowBits,ne.memLevel,ne.strategy);if(le!==ee)throw new Error(W[le]);if(ne.header&&L.deflateSetHeader(this.strm,ne.header),ne.dictionary){var oe;if(oe="string"==typeof ne.dictionary?Z.string2buf(ne.dictionary):"[object ArrayBuffer]"===$.call(ne.dictionary)?new Uint8Array(ne.dictionary):ne.dictionary,le=L.deflateSetDictionary(this.strm,oe),le!==ee)throw new Error(W[le]);this._dict_set=!0}}function E(ie,ne){var le=new T(ne);if(le.push(ie,!0),le.err)throw le.msg;return le.result}var L=D("./zlib/deflate"),G=D("./utils/common"),Z=D("./utils/strings"),W=D("./zlib/messages"),Q=D("./zlib/zstream"),$=Object.prototype.toString,J=4,ee=0,te=1,ae=2;T.prototype.push=function(ie,ne){var le=this.strm,oe=this.options.chunkSize,se,de;if(this.ended)return!1;de=ne===~~ne?ne:!0===ne?J:0,le.input="string"==typeof ie?Z.string2buf(ie):"[object ArrayBuffer]"===$.call(ie)?new Uint8Array(ie):ie,le.next_in=0,le.avail_in=le.input.length;do{if(0===le.avail_out&&(le.output=new G.Buf8(oe),le.next_out=0,le.avail_out=oe),se=L.deflate(le,de),se!==te&&se!==ee)return this.onEnd(se),this.ended=!0,!1;(0===le.avail_out||0===le.avail_in&&(de===J||de===ae))&&("string"===this.options.to?this.onData(Z.buf2binstring(G.shrinkBuf(le.output,le.next_out))):this.onData(G.shrinkBuf(le.output,le.next_out)))}while((0<le.avail_in||0===le.avail_out)&&se!==te);return de===J?(se=L.deflateEnd(this.strm),this.onEnd(se),this.ended=!0,se===ee):de!==ae||(this.onEnd(ee),le.avail_out=0,!0)},T.prototype.onData=function(ie){this.chunks.push(ie)},T.prototype.onEnd=function(ie){ie===ee&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=G.flattenChunks(this.chunks)),this.chunks=[],this.err=ie,this.msg=this.strm.msg},R.Deflate=T,R.deflate=E,R.deflateRaw=function(ne,le){return le=le||{},le.raw=!0,E(ne,le)},R.gzip=function(ne,le){return le=le||{},le.gzip=!0,E(ne,le)}},{"./utils/common":121,"./utils/strings":122,"./zlib/deflate":126,"./zlib/messages":131,"./zlib/zstream":133}],120:[function(D,I,R){"use strict";function T(te){if(!(this instanceof T))return new T(te);this.options=G.assign({chunkSize:16384,windowBits:0,to:""},te||{});var ae=this.options;ae.raw&&0<=ae.windowBits&&16>ae.windowBits&&(ae.windowBits=-ae.windowBits,0===ae.windowBits&&(ae.windowBits=-15)),0<=ae.windowBits&&16>ae.windowBits&&!(te&&te.windowBits)&&(ae.windowBits+=32),15<ae.windowBits&&48>ae.windowBits&&0==(15&ae.windowBits)&&(ae.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $,this.strm.avail_out=0;var ie=L.inflateInit2(this.strm,ae.windowBits);if(ie!==W.Z_OK)throw new Error(Q[ie]);this.header=new J,L.inflateGetHeader(this.strm,this.header)}function E(te,ae){var ie=new T(ae);if(ie.push(te,!0),ie.err)throw ie.msg;return ie.result}var L=D("./zlib/inflate"),G=D("./utils/common"),Z=D("./utils/strings"),W=D("./zlib/constants"),Q=D("./zlib/messages"),$=D("./zlib/zstream"),J=D("./zlib/gzheader"),ee=Object.prototype.toString;T.prototype.push=function(te,ae){var ie=this.strm,ne=this.options.chunkSize,le=this.options.dictionary,ce=!1,oe,se,de,ue,he,me;if(this.ended)return!1;se=ae===~~ae?ae:!0===ae?W.Z_FINISH:W.Z_NO_FLUSH,ie.input="string"==typeof te?Z.binstring2buf(te):"[object ArrayBuffer]"===ee.call(te)?new Uint8Array(te):te,ie.next_in=0,ie.avail_in=ie.input.length;do{if(0===ie.avail_out&&(ie.output=new G.Buf8(ne),ie.next_out=0,ie.avail_out=ne),oe=L.inflate(ie,W.Z_NO_FLUSH),oe===W.Z_NEED_DICT&&le&&(me="string"==typeof le?Z.string2buf(le):"[object ArrayBuffer]"===ee.call(le)?new Uint8Array(le):le,oe=L.inflateSetDictionary(this.strm,me)),oe===W.Z_BUF_ERROR&&!0==ce&&(oe=W.Z_OK,ce=!1),oe!==W.Z_STREAM_END&&oe!==W.Z_OK)return this.onEnd(oe),this.ended=!0,!1;ie.next_out&&(0===ie.avail_out||oe===W.Z_STREAM_END||0===ie.avail_in&&(se===W.Z_FINISH||se===W.Z_SYNC_FLUSH))&&("string"===this.options.to?(de=Z.utf8border(ie.output,ie.next_out),ue=ie.next_out-de,he=Z.buf2string(ie.output,de),ie.next_out=ue,ie.avail_out=ne-ue,ue&&G.arraySet(ie.output,ie.output,de,ue,0),this.onData(he)):this.onData(G.shrinkBuf(ie.output,ie.next_out))),0===ie.avail_in&&0===ie.avail_out&&(ce=!0)}while((0<ie.avail_in||0===ie.avail_out)&&oe!==W.Z_STREAM_END);return oe===W.Z_STREAM_END&&(se=W.Z_FINISH),se===W.Z_FINISH?(oe=L.inflateEnd(this.strm),this.onEnd(oe),this.ended=!0,oe===W.Z_OK):se!==W.Z_SYNC_FLUSH||(this.onEnd(W.Z_OK),ie.avail_out=0,!0)},T.prototype.onData=function(te){this.chunks.push(te)},T.prototype.onEnd=function(te){te===W.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=G.flattenChunks(this.chunks)),this.chunks=[],this.err=te,this.msg=this.strm.msg},R.Inflate=T,R.inflate=E,R.inflateRaw=function(ae,ie){return ie=ie||{},ie.raw=!0,E(ae,ie)},R.ungzip=E},{"./utils/common":121,"./utils/strings":122,"./zlib/constants":124,"./zlib/gzheader":127,"./zlib/inflate":129,"./zlib/messages":131,"./zlib/zstream":133}],121:[function(D,I,R){"use strict";var T="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;R.assign=function(G){for(var Z=Array.prototype.slice.call(arguments,1);Z.length;){var W=Z.shift();if(W){if("object"!=typeof W)throw new TypeError(W+"must be non-object");for(var Q in W)W.hasOwnProperty(Q)&&(G[Q]=W[Q])}}return G},R.shrinkBuf=function(G,Z){return G.length===Z?G:G.subarray?G.subarray(0,Z):(G.length=Z,G)};var E={arraySet:function(Z,W,Q,$,J){if(W.subarray&&Z.subarray)return void Z.set(W.subarray(Q,Q+$),J);for(var ee=0;ee<$;ee++)Z[J+ee]=W[Q+ee]},flattenChunks:function(Z){var W,Q,$,J,ee,te;for($=0,W=0,Q=Z.length;W<Q;W++)$+=Z[W].length;for(te=new Uint8Array($),J=0,(W=0,Q=Z.length);W<Q;W++)ee=Z[W],te.set(ee,J),J+=ee.length;return te}},L={arraySet:function(Z,W,Q,$,J){for(var ee=0;ee<$;ee++)Z[J+ee]=W[Q+ee]},flattenChunks:function(Z){return[].concat.apply([],Z)}};R.setTyped=function(G){G?(R.Buf8=Uint8Array,R.Buf16=Uint16Array,R.Buf32=Int32Array,R.assign(R,E)):(R.Buf8=Array,R.Buf16=Array,R.Buf32=Array,R.assign(R,L))},R.setTyped(T)},{}],122:[function(D,I,R){"use strict";function T(Q,$){if(65537>$&&(Q.subarray&&G||!Q.subarray&&L))return String.fromCharCode.apply(null,E.shrinkBuf(Q,$));var J="";for(var ee=0;ee<$;ee++)J+=String.fromCharCode(Q[ee]);return J}var E=D("./common"),L=!0,G=!0;try{String.fromCharCode.apply(null,[0])}catch(Q){L=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Q){G=!1}var Z=new E.Buf8(256);for(var W=0;256>W;W++)Z[W]=252<=W?6:248<=W?5:240<=W?4:224<=W?3:192<=W?2:1;Z[254]=Z[254]=1,R.string2buf=function(Q){var ie=Q.length,ne=0,$,J,ee,te,ae;for(te=0;te<ie;te++)J=Q.charCodeAt(te),55296==(64512&J)&&te+1<ie&&(ee=Q.charCodeAt(te+1),56320==(64512&ee)&&(J=65536+(J-55296<<10)+(ee-56320),te++)),ne+=128>J?1:2048>J?2:65536>J?3:4;for($=new E.Buf8(ne),ae=0,te=0;ae<ne;te++)J=Q.charCodeAt(te),55296==(64512&J)&&te+1<ie&&(ee=Q.charCodeAt(te+1),56320==(64512&ee)&&(J=65536+(J-55296<<10)+(ee-56320),te++)),128>J?$[ae++]=J:2048>J?($[ae++]=192|J>>>6,$[ae++]=128|63&J):65536>J?($[ae++]=224|J>>>12,$[ae++]=128|63&J>>>6,$[ae++]=128|63&J):($[ae++]=240|J>>>18,$[ae++]=128|63&J>>>12,$[ae++]=128|63&J>>>6,$[ae++]=128|63&J);return $},R.buf2binstring=function(Q){return T(Q,Q.length)},R.binstring2buf=function(Q){var $=new E.Buf8(Q.length);for(var J=0,ee=$.length;J<ee;J++)$[J]=Q.charCodeAt(J);return $},R.buf2string=function(Q,$){var J,ee,te,ae,ie=$||Q.length,ne=Array(2*ie);for(ee=0,J=0;J<ie;){if(te=Q[J++],128>te){ne[ee++]=te;continue}if(ae=Z[te],4<ae){ne[ee++]=65533,J+=ae-1;continue}for(te&=2===ae?31:3===ae?15:7;1<ae&&J<ie;)te=te<<6|63&Q[J++],ae--;if(1<ae){ne[ee++]=65533;continue}65536>te?ne[ee++]=te:(te-=65536,ne[ee++]=55296|1023&te>>10,ne[ee++]=56320|1023&te)}return T(ne,ee)},R.utf8border=function(Q,$){var J;for($=$||Q.length,$>Q.length&&($=Q.length),J=$-1;0<=J&&128==(192&Q[J]);)J--;return 0>J?$:0===J?$:J+Z[Q[J]]>$?J:$}},{"./common":121}],123:[function(D,I,R){"use strict";I.exports=function(E,L,G,Z){for(var W=0|65535&E,Q=0|65535&E>>>16,$=0;0!==G;){$=2000<G?2000:G,G-=$;do W=0|W+L[Z++],Q=0|Q+W;while(--$);W%=65521,Q%=65521}return 0|(W|Q<<16)}},{}],124:[function(D,I,R){"use strict";I.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],125:[function(D,I,R){"use strict";var T=function(){var G=[],L;for(var Z=0;256>Z;Z++){L=Z;for(var W=0;8>W;W++)L=1&L?3988292384^L>>>1:L>>>1;G[Z]=L}return G}();I.exports=function(L,G,Z,W){L^=-1;for(var Q=W;Q<W+Z;Q++)L=L>>>8^T[255&(L^G[Q])];return-1^L}},{}],126:[function(D,I,R){"use strict";function T(Oe,Ye){return Oe.msg=fe[Ye],Ye}function E(Oe){return(Oe<<1)-(4<Oe?9:0)}function L(Oe){for(var Ye=Oe.length;0<=--Ye;)Oe[Ye]=0}function G(Oe){var Ye=Oe.state,Ue=Ye.pending;Ue>Oe.avail_out&&(Ue=Oe.avail_out);0===Ue||(me.arraySet(Oe.output,Ye.pending_buf,Ye.pending_out,Ue,Oe.next_out),Oe.next_out+=Ue,Ye.pending_out+=Ue,Oe.total_out+=Ue,Oe.avail_out-=Ue,Ye.pending-=Ue,0===Ye.pending&&(Ye.pending_out=0))}function Z(Oe,Ye){ce._tr_flush_block(Oe,0<=Oe.block_start?Oe.block_start:-1,Oe.strstart-Oe.block_start,Ye),Oe.block_start=Oe.strstart,G(Oe.strm)}function W(Oe,Ye){Oe.pending_buf[Oe.pending++]=Ye}function Q(Oe,Ye){Oe.pending_buf[Oe.pending++]=255&Ye>>>8,Oe.pending_buf[Oe.pending++]=255&Ye}function $(Oe,Ye,Ue,Ge){var Xe=Oe.avail_in;return(Xe>Ge&&(Xe=Ge),0===Xe)?0:(Oe.avail_in-=Xe,me.arraySet(Ye,Oe.input,Oe.next_in,Xe,Ue),1===Oe.state.wrap?Oe.adler=pe(Oe.adler,Ye,Xe,Ue):2===Oe.state.wrap&&(Oe.adler=ge(Oe.adler,Ye,Xe,Ue)),Oe.next_in+=Xe,Oe.total_in+=Xe,Xe)}function J(Oe,Ye){var Ue=Oe.max_chain_length,Ge=Oe.strstart,Xe,He,Ze=Oe.prev_length,We=Oe.nice_match,Ke=Oe.strstart>Oe.w_size-Se?Oe.strstart-(Oe.w_size-Se):0,Qe=Oe.window,$e=Oe.w_mask,Je=Oe.prev,et=Oe.strstart+Ie,at=Qe[Ge+Ze-1],nt=Qe[Ge+Ze];Oe.prev_length>=Oe.good_match&&(Ue>>=2),We>Oe.lookahead&&(We=Oe.lookahead);do{if(Xe=Ye,Qe[Xe+Ze]!==nt||Qe[Xe+Ze-1]!==at||Qe[Xe]!==Qe[Ge]||Qe[++Xe]!==Qe[Ge+1])continue;Ge+=2,Xe++;do;while(Qe[++Ge]===Qe[++Xe]&&Qe[++Ge]===Qe[++Xe]&&Qe[++Ge]===Qe[++Xe]&&Qe[++Ge]===Qe[++Xe]&&Qe[++Ge]===Qe[++Xe]&&Qe[++Ge]===Qe[++Xe]&&Qe[++Ge]===Qe[++Xe]&&Qe[++Ge]===Qe[++Xe]&&Ge<et);if(He=Ie-(et-Ge),Ge=et-Ie,He>Ze){if(Oe.match_start=Ye,Ze=He,He>=We)break;at=Qe[Ge+Ze-1],nt=Qe[Ge+Ze]}}while((Ye=Je[Ye&$e])>Ke&&0!=--Ue);return Ze<=Oe.lookahead?Ze:Oe.lookahead}function ee(Oe){var Ye=Oe.w_size,Ue,Ge,Xe,He,Ze;do{if(He=Oe.window_size-Oe.lookahead-Oe.strstart,Oe.strstart>=Ye+(Ye-Se)){me.arraySet(Oe.window,Oe.window,Ye,Ye,0),Oe.match_start-=Ye,Oe.strstart-=Ye,Oe.block_start-=Ye,Ge=Oe.hash_size,Ue=Ge;do Xe=Oe.head[--Ue],Oe.head[Ue]=Xe>=Ye?Xe-Ye:0;while(--Ge);Ge=Ye,Ue=Ge;do Xe=Oe.prev[--Ue],Oe.prev[Ue]=Xe>=Ye?Xe-Ye:0;while(--Ge);He+=Ye}if(0===Oe.strm.avail_in)break;if(Ge=$(Oe.strm,Oe.window,Oe.strstart+Oe.lookahead,He),Oe.lookahead+=Ge,Oe.lookahead+Oe.insert>=De)for(Ze=Oe.strstart-Oe.insert,Oe.ins_h=Oe.window[Ze],Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[Ze+1])&Oe.hash_mask;Oe.insert&&(Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[Ze+De-1])&Oe.hash_mask,Oe.prev[Ze&Oe.w_mask]=Oe.head[Oe.ins_h],Oe.head[Oe.ins_h]=Ze,Ze++,Oe.insert--,!(Oe.lookahead+Oe.insert<De)););}while(Oe.lookahead<Se&&0!==Oe.strm.avail_in)}function te(Oe,Ye){for(var Ue,Ge;;){if(Oe.lookahead<Se){if(ee(Oe),Oe.lookahead<Se&&Ye===_e)return Le;if(0===Oe.lookahead)break}if(Ue=0,Oe.lookahead>=De&&(Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[Oe.strstart+De-1])&Oe.hash_mask,Ue=Oe.prev[Oe.strstart&Oe.w_mask]=Oe.head[Oe.ins_h],Oe.head[Oe.ins_h]=Oe.strstart),0!==Ue&&Oe.strstart-Ue<=Oe.w_size-Se&&(Oe.match_length=J(Oe,Ue)),!(Oe.match_length>=De))Ge=ce._tr_tally(Oe,0,Oe.window[Oe.strstart]),Oe.lookahead--,Oe.strstart++;else if(Ge=ce._tr_tally(Oe,Oe.strstart-Oe.match_start,Oe.match_length-De),Oe.lookahead-=Oe.match_length,Oe.match_length<=Oe.max_lazy_match&&Oe.lookahead>=De){Oe.match_length--;do Oe.strstart++,Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[Oe.strstart+De-1])&Oe.hash_mask,Ue=Oe.prev[Oe.strstart&Oe.w_mask]=Oe.head[Oe.ins_h],Oe.head[Oe.ins_h]=Oe.strstart;while(0!=--Oe.match_length);Oe.strstart++}else Oe.strstart+=Oe.match_length,Oe.match_length=0,Oe.ins_h=Oe.window[Oe.strstart],Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[Oe.strstart+1])&Oe.hash_mask;if(Ge&&(Z(Oe,!1),0===Oe.strm.avail_out))return Le}return Oe.insert=Oe.strstart<De-1?Oe.strstart:De-1,Ye===be?(Z(Oe,!0),0===Oe.strm.avail_out?Ve:qe):Oe.last_lit&&(Z(Oe,!1),0===Oe.strm.avail_out)?Le:Fe}function ae(Oe,Ye){for(var Ue,Ge,Xe;;){if(Oe.lookahead<Se){if(ee(Oe),Oe.lookahead<Se&&Ye===_e)return Le;if(0===Oe.lookahead)break}if(Ue=0,Oe.lookahead>=De&&(Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[Oe.strstart+De-1])&Oe.hash_mask,Ue=Oe.prev[Oe.strstart&Oe.w_mask]=Oe.head[Oe.ins_h],Oe.head[Oe.ins_h]=Oe.strstart),Oe.prev_length=Oe.match_length,Oe.prev_match=Oe.match_start,Oe.match_length=De-1,0!==Ue&&Oe.prev_length<Oe.max_lazy_match&&Oe.strstart-Ue<=Oe.w_size-Se&&(Oe.match_length=J(Oe,Ue),5>=Oe.match_length&&(1===Oe.strategy||Oe.match_length===De&&4096<Oe.strstart-Oe.match_start)&&(Oe.match_length=De-1)),Oe.prev_length>=De&&Oe.match_length<=Oe.prev_length){Xe=Oe.strstart+Oe.lookahead-De,Ge=ce._tr_tally(Oe,Oe.strstart-1-Oe.prev_match,Oe.prev_length-De),Oe.lookahead-=Oe.prev_length-1,Oe.prev_length-=2;do++Oe.strstart<=Xe&&(Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[Oe.strstart+De-1])&Oe.hash_mask,Ue=Oe.prev[Oe.strstart&Oe.w_mask]=Oe.head[Oe.ins_h],Oe.head[Oe.ins_h]=Oe.strstart);while(0!=--Oe.prev_length);if(Oe.match_available=0,Oe.match_length=De-1,Oe.strstart++,Ge&&(Z(Oe,!1),0===Oe.strm.avail_out))return Le}else if(!Oe.match_available)Oe.match_available=1,Oe.strstart++,Oe.lookahead--;else if(Ge=ce._tr_tally(Oe,0,Oe.window[Oe.strstart-1]),Ge&&Z(Oe,!1),Oe.strstart++,Oe.lookahead--,0===Oe.strm.avail_out)return Le}return Oe.match_available&&(Ge=ce._tr_tally(Oe,0,Oe.window[Oe.strstart-1]),Oe.match_available=0),Oe.insert=Oe.strstart<De-1?Oe.strstart:De-1,Ye===be?(Z(Oe,!0),0===Oe.strm.avail_out?Ve:qe):Oe.last_lit&&(Z(Oe,!1),0===Oe.strm.avail_out)?Le:Fe}function ie(Oe,Ye){for(var Ze=Oe.window,Ue,Ge,Xe,He;;){if(Oe.lookahead<=Ie){if(ee(Oe),Oe.lookahead<=Ie&&Ye===_e)return Le;if(0===Oe.lookahead)break}if(Oe.match_length=0,Oe.lookahead>=De&&0<Oe.strstart&&(Xe=Oe.strstart-1,Ge=Ze[Xe],Ge===Ze[++Xe]&&Ge===Ze[++Xe]&&Ge===Ze[++Xe])){He=Oe.strstart+Ie;do;while(Ge===Ze[++Xe]&&Ge===Ze[++Xe]&&Ge===Ze[++Xe]&&Ge===Ze[++Xe]&&Ge===Ze[++Xe]&&Ge===Ze[++Xe]&&Ge===Ze[++Xe]&&Ge===Ze[++Xe]&&Xe<He);Oe.match_length=Ie-(He-Xe),Oe.match_length>Oe.lookahead&&(Oe.match_length=Oe.lookahead)}if(Oe.match_length>=De?(Ue=ce._tr_tally(Oe,1,Oe.match_length-De),Oe.lookahead-=Oe.match_length,Oe.strstart+=Oe.match_length,Oe.match_length=0):(Ue=ce._tr_tally(Oe,0,Oe.window[Oe.strstart]),Oe.lookahead--,Oe.strstart++),Ue&&(Z(Oe,!1),0===Oe.strm.avail_out))return Le}return Oe.insert=0,Ye===be?(Z(Oe,!0),0===Oe.strm.avail_out?Ve:qe):Oe.last_lit&&(Z(Oe,!1),0===Oe.strm.avail_out)?Le:Fe}function ne(Oe,Ye){for(var Ue;;){if(0===Oe.lookahead&&(ee(Oe),0===Oe.lookahead)){if(Ye===_e)return Le;break}if(Oe.match_length=0,Ue=ce._tr_tally(Oe,0,Oe.window[Oe.strstart]),Oe.lookahead--,Oe.strstart++,Ue&&(Z(Oe,!1),0===Oe.strm.avail_out))return Le}return Oe.insert=0,Ye===be?(Z(Oe,!0),0===Oe.strm.avail_out?Ve:qe):Oe.last_lit&&(Z(Oe,!1),0===Oe.strm.avail_out)?Le:Fe}function le(Oe,Ye,Ue,Ge,Xe){this.good_length=Oe,this.max_lazy=Ye,this.nice_length=Ue,this.max_chain=Ge,this.func=Xe}function oe(Oe){Oe.window_size=2*Oe.w_size,L(Oe.head),Oe.max_lazy_match=Ne[Oe.level].max_lazy,Oe.good_match=Ne[Oe.level].good_length,Oe.nice_match=Ne[Oe.level].nice_length,Oe.max_chain_length=Ne[Oe.level].max_chain,Oe.strstart=0,Oe.block_start=0,Oe.lookahead=0,Oe.insert=0,Oe.match_length=Oe.prev_length=De-1,Oe.match_available=0,Oe.ins_h=0}function se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=je,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new me.Buf16(2*(2*Pe+1)),this.dyn_dtree=new me.Buf16(122),this.bl_tree=new me.Buf16(78),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new me.Buf16(16),this.heap=new me.Buf16(2*Pe+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new me.Buf16(2*Pe+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(Oe){var Ye;return Oe&&Oe.state?(Oe.total_in=Oe.total_out=0,Oe.data_type=2,Ye=Oe.state,Ye.pending=0,Ye.pending_out=0,0>Ye.wrap&&(Ye.wrap=-Ye.wrap),Ye.status=Ye.wrap?Ce:Te,Oe.adler=2===Ye.wrap?0:1,Ye.last_flush=_e,ce._tr_init(Ye),xe):T(Oe,we)}function ue(Oe){var Ye=de(Oe);return Ye===xe&&oe(Oe.state),Ye}function he(Oe,Ye,Ue,Ge,Xe,He){if(!Oe)return we;var Ze=1;if(-1===Ye&&(Ye=6),0>Ge?(Ze=0,Ge=-Ge):15<Ge&&(Ze=2,Ge-=16),1>Xe||9<Xe||Ue!==je||8>Ge||15<Ge||0>Ye||9<Ye||0>He||4<He)return T(Oe,we);8===Ge&&(Ge=9);var We=new se;return Oe.state=We,We.strm=Oe,We.wrap=Ze,We.gzhead=null,We.w_bits=Ge,We.w_size=1<<We.w_bits,We.w_mask=We.w_size-1,We.hash_bits=Xe+7,We.hash_size=1<<We.hash_bits,We.hash_mask=We.hash_size-1,We.hash_shift=~~((We.hash_bits+De-1)/De),We.window=new me.Buf8(2*We.w_size),We.head=new me.Buf16(We.hash_size),We.prev=new me.Buf16(We.w_size),We.lit_bufsize=1<<Xe+6,We.pending_buf_size=4*We.lit_bufsize,We.pending_buf=new me.Buf8(We.pending_buf_size),We.d_buf=1*We.lit_bufsize,We.l_buf=3*We.lit_bufsize,We.level=Ye,We.strategy=He,We.method=Ue,ue(Oe)}var me=D("../utils/common"),ce=D("./trees"),pe=D("./adler32"),ge=D("./crc32"),fe=D("./messages"),_e=0,be=4,ye=5,xe=0,ke=1,we=-2,ve=-5,Me=2,je=8,Pe=286,De=3,Ie=258,Se=Ie+De+1,Ce=42,Ae=69,Re=73,Be=91,ze=103,Te=113,Ee=666,Le=1,Fe=2,Ve=3,qe=4,Ne=[new le(0,0,0,0,function(Ye,Ue){var Ge=65535;for(Ge>Ye.pending_buf_size-5&&(Ge=Ye.pending_buf_size-5);;){if(1>=Ye.lookahead){if(ee(Ye),0===Ye.lookahead&&Ue===_e)return Le;if(0===Ye.lookahead)break}Ye.strstart+=Ye.lookahead,Ye.lookahead=0;var Xe=Ye.block_start+Ge;if((0===Ye.strstart||Ye.strstart>=Xe)&&(Ye.lookahead=Ye.strstart-Xe,Ye.strstart=Xe,Z(Ye,!1),0===Ye.strm.avail_out))return Le;if(Ye.strstart-Ye.block_start>=Ye.w_size-Se&&(Z(Ye,!1),0===Ye.strm.avail_out))return Le}return Ye.insert=0,Ue===be?(Z(Ye,!0),0===Ye.strm.avail_out?Ve:qe):Ye.strstart>Ye.block_start&&(Z(Ye,!1),0===Ye.strm.avail_out)?Le:Le}),new le(4,4,8,4,te),new le(4,5,16,8,te),new le(4,6,32,32,te),new le(4,4,16,16,ae),new le(8,16,32,32,ae),new le(8,16,128,128,ae),new le(8,32,128,256,ae),new le(32,128,258,1024,ae),new le(32,258,258,4096,ae)];R.deflateInit=function(Ye,Ue){return he(Ye,Ue,je,15,8,0)},R.deflateInit2=he,R.deflateReset=ue,R.deflateResetKeep=de,R.deflateSetHeader=function(Ye,Ue){return Ye&&Ye.state?2===Ye.state.wrap?(Ye.state.gzhead=Ue,xe):we:we},R.deflate=function(Ye,Ue){var Ge,Xe,He,Ze;if(!Ye||!Ye.state||Ue>ye||0>Ue)return Ye?T(Ye,we):we;if(Xe=Ye.state,!Ye.output||!Ye.input&&0!==Ye.avail_in||Xe.status===Ee&&Ue!==be)return T(Ye,0===Ye.avail_out?ve:we);if(Xe.strm=Ye,Ge=Xe.last_flush,Xe.last_flush=Ue,Xe.status===Ce)if(2===Xe.wrap)Ye.adler=0,W(Xe,31),W(Xe,139),W(Xe,8),Xe.gzhead?(W(Xe,(Xe.gzhead.text?1:0)+(Xe.gzhead.hcrc?2:0)+(Xe.gzhead.extra?4:0)+(Xe.gzhead.name?8:0)+(Xe.gzhead.comment?16:0)),W(Xe,255&Xe.gzhead.time),W(Xe,255&Xe.gzhead.time>>8),W(Xe,255&Xe.gzhead.time>>16),W(Xe,255&Xe.gzhead.time>>24),W(Xe,9===Xe.level?2:Xe.strategy>=Me||2>Xe.level?4:0),W(Xe,255&Xe.gzhead.os),Xe.gzhead.extra&&Xe.gzhead.extra.length&&(W(Xe,255&Xe.gzhead.extra.length),W(Xe,255&Xe.gzhead.extra.length>>8)),Xe.gzhead.hcrc&&(Ye.adler=ge(Ye.adler,Xe.pending_buf,Xe.pending,0)),Xe.gzindex=0,Xe.status=Ae):(W(Xe,0),W(Xe,0),W(Xe,0),W(Xe,0),W(Xe,0),W(Xe,9===Xe.level?2:Xe.strategy>=Me||2>Xe.level?4:0),W(Xe,3),Xe.status=Te);else{var We=je+(Xe.w_bits-8<<4)<<8,Ke=-1;Ke=Xe.strategy>=Me||2>Xe.level?0:6>Xe.level?1:6===Xe.level?2:3,We|=Ke<<6,0!==Xe.strstart&&(We|=32),We+=31-We%31,Xe.status=Te,Q(Xe,We),0!==Xe.strstart&&(Q(Xe,Ye.adler>>>16),Q(Xe,65535&Ye.adler)),Ye.adler=1}if(Xe.status===Ae)if(Xe.gzhead.extra){for(He=Xe.pending;Xe.gzindex<(65535&Xe.gzhead.extra.length)&&!(Xe.pending===Xe.pending_buf_size&&(Xe.gzhead.hcrc&&Xe.pending>He&&(Ye.adler=ge(Ye.adler,Xe.pending_buf,Xe.pending-He,He)),G(Ye),He=Xe.pending,Xe.pending===Xe.pending_buf_size));)W(Xe,255&Xe.gzhead.extra[Xe.gzindex]),Xe.gzindex++;Xe.gzhead.hcrc&&Xe.pending>He&&(Ye.adler=ge(Ye.adler,Xe.pending_buf,Xe.pending-He,He)),Xe.gzindex===Xe.gzhead.extra.length&&(Xe.gzindex=0,Xe.status=Re)}else Xe.status=Re;if(Xe.status===Re)if(Xe.gzhead.name){He=Xe.pending;do{if(Xe.pending===Xe.pending_buf_size&&(Xe.gzhead.hcrc&&Xe.pending>He&&(Ye.adler=ge(Ye.adler,Xe.pending_buf,Xe.pending-He,He)),G(Ye),He=Xe.pending,Xe.pending===Xe.pending_buf_size)){Ze=1;break}Ze=Xe.gzindex<Xe.gzhead.name.length?255&Xe.gzhead.name.charCodeAt(Xe.gzindex++):0,W(Xe,Ze)}while(0!==Ze);Xe.gzhead.hcrc&&Xe.pending>He&&(Ye.adler=ge(Ye.adler,Xe.pending_buf,Xe.pending-He,He)),0===Ze&&(Xe.gzindex=0,Xe.status=Be)}else Xe.status=Be;if(Xe.status===Be)if(Xe.gzhead.comment){He=Xe.pending;do{if(Xe.pending===Xe.pending_buf_size&&(Xe.gzhead.hcrc&&Xe.pending>He&&(Ye.adler=ge(Ye.adler,Xe.pending_buf,Xe.pending-He,He)),G(Ye),He=Xe.pending,Xe.pending===Xe.pending_buf_size)){Ze=1;break}Ze=Xe.gzindex<Xe.gzhead.comment.length?255&Xe.gzhead.comment.charCodeAt(Xe.gzindex++):0,W(Xe,Ze)}while(0!==Ze);Xe.gzhead.hcrc&&Xe.pending>He&&(Ye.adler=ge(Ye.adler,Xe.pending_buf,Xe.pending-He,He)),0===Ze&&(Xe.status=ze)}else Xe.status=ze;if(Xe.status===ze&&(Xe.gzhead.hcrc?(Xe.pending+2>Xe.pending_buf_size&&G(Ye),Xe.pending+2<=Xe.pending_buf_size&&(W(Xe,255&Ye.adler),W(Xe,255&Ye.adler>>8),Ye.adler=0,Xe.status=Te)):Xe.status=Te),0!==Xe.pending){if(G(Ye),0===Ye.avail_out)return Xe.last_flush=-1,xe;}else if(0===Ye.avail_in&&E(Ue)<=E(Ge)&&Ue!==be)return T(Ye,ve);if(Xe.status===Ee&&0!==Ye.avail_in)return T(Ye,ve);if(0!==Ye.avail_in||0!==Xe.lookahead||Ue!==_e&&Xe.status!==Ee){var Qe=Xe.strategy===Me?ne(Xe,Ue):3===Xe.strategy?ie(Xe,Ue):Ne[Xe.level].func(Xe,Ue);if((Qe===Ve||Qe===qe)&&(Xe.status=Ee),Qe===Le||Qe===Ve)return 0===Ye.avail_out&&(Xe.last_flush=-1),xe;if(Qe===Fe&&(1===Ue?ce._tr_align(Xe):Ue!=ye&&(ce._tr_stored_block(Xe,0,0,!1),3==Ue&&(L(Xe.head),0===Xe.lookahead&&(Xe.strstart=0,Xe.block_start=0,Xe.insert=0))),G(Ye),0===Ye.avail_out))return Xe.last_flush=-1,xe}return Ue===be?0>=Xe.wrap?ke:(2===Xe.wrap?(W(Xe,255&Ye.adler),W(Xe,255&Ye.adler>>8),W(Xe,255&Ye.adler>>16),W(Xe,255&Ye.adler>>24),W(Xe,255&Ye.total_in),W(Xe,255&Ye.total_in>>8),W(Xe,255&Ye.total_in>>16),W(Xe,255&Ye.total_in>>24)):(Q(Xe,Ye.adler>>>16),Q(Xe,65535&Ye.adler)),G(Ye),0<Xe.wrap&&(Xe.wrap=-Xe.wrap),0===Xe.pending?ke:xe):xe},R.deflateEnd=function(Ye){var Ue;return Ye&&Ye.state?(Ue=Ye.state.status,Ue!==Ce&&Ue!==Ae&&Ue!==Re&&Ue!==Be&&Ue!==ze&&Ue!==Te&&Ue!==Ee)?T(Ye,we):(Ye.state=null,Ue===Te?T(Ye,-3):xe):we},R.deflateSetDictionary=function(Ye,Ue){var Ge=Ue.length,Xe,He,Ze,We,Ke,Qe,$e,Je;if(!Ye||!Ye.state)return we;if(Xe=Ye.state,We=Xe.wrap,2===We||1===We&&Xe.status!==Ce||Xe.lookahead)return we;for(1===We&&(Ye.adler=pe(Ye.adler,Ue,Ge,0)),Xe.wrap=0,Ge>=Xe.w_size&&(0===We&&(L(Xe.head),Xe.strstart=0,Xe.block_start=0,Xe.insert=0),Je=new me.Buf8(Xe.w_size),me.arraySet(Je,Ue,Ge-Xe.w_size,Xe.w_size,0),Ue=Je,Ge=Xe.w_size),Ke=Ye.avail_in,Qe=Ye.next_in,$e=Ye.input,Ye.avail_in=Ge,Ye.next_in=0,Ye.input=Ue,ee(Xe);Xe.lookahead>=De;){He=Xe.strstart,Ze=Xe.lookahead-(De-1);do Xe.ins_h=(Xe.ins_h<<Xe.hash_shift^Xe.window[He+De-1])&Xe.hash_mask,Xe.prev[He&Xe.w_mask]=Xe.head[Xe.ins_h],Xe.head[Xe.ins_h]=He,He++;while(--Ze);Xe.strstart=He,Xe.lookahead=De-1,ee(Xe)}return Xe.strstart+=Xe.lookahead,Xe.block_start=Xe.strstart,Xe.insert=Xe.lookahead,Xe.lookahead=0,Xe.match_length=Xe.prev_length=De-1,Xe.match_available=0,Ye.next_in=Qe,Ye.input=$e,Ye.avail_in=Ke,Xe.wrap=We,xe},R.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":121,"./adler32":123,"./crc32":125,"./messages":131,"./trees":132}],127:[function(D,I,R){"use strict";I.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],128:[function(D,I,R){"use strict";var T=30;I.exports=function(L,G){var Z,W,Q,$,J,ee,te,ae,ie,ne,le,oe,se,de,ue,he,me,ce,pe,ge,fe,_e,be,ye,xe;Z=L.state,W=L.next_in,ye=L.input,Q=W+(L.avail_in-5),$=L.next_out,xe=L.output,J=$-(G-L.avail_out),ee=$+(L.avail_out-257),te=Z.dmax,ae=Z.wsize,ie=Z.whave,ne=Z.wnext,le=Z.window,oe=Z.hold,se=Z.bits,de=Z.lencode,ue=Z.distcode,he=(1<<Z.lenbits)-1,me=(1<<Z.distbits)-1;top:do{15>se&&(oe+=ye[W++]<<se,se+=8,oe+=ye[W++]<<se,se+=8),ce=de[oe&he];dolen:for(;;){if(pe=ce>>>24,oe>>>=pe,se-=pe,pe=255&ce>>>16,0===pe)xe[$++]=65535&ce;else if(16&pe){ge=65535&ce,pe&=15,pe&&(se<pe&&(oe+=ye[W++]<<se,se+=8),ge+=oe&(1<<pe)-1,oe>>>=pe,se-=pe),15>se&&(oe+=ye[W++]<<se,se+=8,oe+=ye[W++]<<se,se+=8),ce=ue[oe&me];dodist:for(;;){if(pe=ce>>>24,oe>>>=pe,se-=pe,pe=255&ce>>>16,16&pe){if(fe=65535&ce,pe&=15,se<pe&&(oe+=ye[W++]<<se,se+=8,se<pe&&(oe+=ye[W++]<<se,se+=8)),fe+=oe&(1<<pe)-1,fe>te){L.msg="invalid distance too far back",Z.mode=T;break top}if(oe>>>=pe,se-=pe,pe=$-J,fe>pe){if(pe=fe-pe,pe>ie&&Z.sane){L.msg="invalid distance too far back",Z.mode=T;break top}if(_e=0,be=le,0===ne){if(_e+=ae-pe,pe<ge){ge-=pe;do xe[$++]=le[_e++];while(--pe);_e=$-fe,be=xe}}else if(ne<pe){if(_e+=ae+ne-pe,pe-=ne,pe<ge){ge-=pe;do xe[$++]=le[_e++];while(--pe);if(_e=0,ne<ge){pe=ne,ge-=pe;do xe[$++]=le[_e++];while(--pe);_e=$-fe,be=xe}}}else if(_e+=ne-pe,pe<ge){ge-=pe;do xe[$++]=le[_e++];while(--pe);_e=$-fe,be=xe}for(;2<ge;)xe[$++]=be[_e++],xe[$++]=be[_e++],xe[$++]=be[_e++],ge-=3;ge&&(xe[$++]=be[_e++],1<ge&&(xe[$++]=be[_e++]))}else{_e=$-fe;do xe[$++]=xe[_e++],xe[$++]=xe[_e++],xe[$++]=xe[_e++],ge-=3;while(2<ge);ge&&(xe[$++]=xe[_e++],1<ge&&(xe[$++]=xe[_e++]))}}else if(0==(64&pe)){ce=ue[(65535&ce)+(oe&(1<<pe)-1)];continue dodist}else{L.msg="invalid distance code",Z.mode=T;break top}break}}else if(0==(64&pe)){ce=de[(65535&ce)+(oe&(1<<pe)-1)];continue dolen}else if(32&pe){Z.mode=12;break top}else{L.msg="invalid literal/length code",Z.mode=T;break top}break}}while(W<Q&&$<ee);ge=se>>3,W-=ge,se-=ge<<3,oe&=(1<<se)-1,L.next_in=W,L.next_out=$,L.avail_in=W<Q?5+(Q-W):5-(W-Q),L.avail_out=$<ee?257+(ee-$):257-($-ee),Z.hold=oe,Z.bits=se}},{}],129:[function(D,I,R){"use strict";function T(Ze){return(255&Ze>>>24)+(65280&Ze>>>8)+((65280&Ze)<<8)+((255&Ze)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new J.Buf16(320),this.work=new J.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function L(Ze){var We;return Ze&&Ze.state?(We=Ze.state,Ze.total_in=Ze.total_out=We.total=0,Ze.msg="",We.wrap&&(Ze.adler=1&We.wrap),We.mode=pe,We.last=0,We.havedict=0,We.dmax=32768,We.head=null,We.hold=0,We.bits=0,We.lencode=We.lendyn=new J.Buf32(852),We.distcode=We.distdyn=new J.Buf32(592),We.sane=1,We.back=-1,de):ue}function G(Ze){var We;return Ze&&Ze.state?(We=Ze.state,We.wsize=0,We.whave=0,We.wnext=0,L(Ze)):ue}function Z(Ze,We){var Ke,Qe;return Ze&&Ze.state?(Qe=Ze.state,0>We?(Ke=0,We=-We):(Ke=(We>>4)+1,48>We&&(We&=15)),We&&(8>We||15<We))?ue:(null!==Qe.window&&Qe.wbits!==We&&(Qe.window=null),Qe.wrap=Ke,Qe.wbits=We,G(Ze)):ue}function W(Ze,We){var Ke,Qe;return Ze?(Qe=new E,Ze.state=Qe,Qe.window=null,Ke=Z(Ze,We),Ke!==de&&(Ze.state=null),Ke):ue}function Q(Ze){if(Ge){var We;for(Xe=new J.Buf32(512),He=new J.Buf32(32),We=0;144>We;)Ze.lens[We++]=8;for(;256>We;)Ze.lens[We++]=9;for(;280>We;)Ze.lens[We++]=7;for(;288>We;)Ze.lens[We++]=8;for(ie(ne,Ze.lens,0,288,Xe,0,Ze.work,{bits:9}),We=0;32>We;)Ze.lens[We++]=5;ie(le,Ze.lens,0,32,He,0,Ze.work,{bits:5}),Ge=!1}Ze.lencode=Xe,Ze.lenbits=9,Ze.distcode=He,Ze.distbits=5}function $(Ze,We,Ke,Qe){var Je=Ze.state,$e;return null===Je.window&&(Je.wsize=1<<Je.wbits,Je.wnext=0,Je.whave=0,Je.window=new J.Buf8(Je.wsize)),Qe>=Je.wsize?(J.arraySet(Je.window,We,Ke-Je.wsize,Je.wsize,0),Je.wnext=0,Je.whave=Je.wsize):($e=Je.wsize-Je.wnext,$e>Qe&&($e=Qe),J.arraySet(Je.window,We,Ke-Qe,$e,Je.wnext),Qe-=$e,Qe?(J.arraySet(Je.window,We,Ke-Qe,Qe,0),Je.wnext=Qe,Je.whave=Je.wsize):(Je.wnext+=$e,Je.wnext===Je.wsize&&(Je.wnext=0),Je.whave<Je.wsize&&(Je.whave+=$e))),0}var J=D("../utils/common"),ee=D("./adler32"),te=D("./crc32"),ae=D("./inffast"),ie=D("./inftrees"),ne=1,le=2,oe=4,se=6,de=0,ue=-2,he=-3,me=-4,ce=8,pe=1,ge=2,fe=3,_e=4,be=5,ye=6,xe=7,ke=8,we=9,ve=10,Me=11,je=12,Pe=13,De=14,Ie=15,Se=16,Ce=17,Ae=18,Re=19,Be=20,ze=21,Te=22,Ee=23,Le=24,Fe=25,Ve=26,qe=27,Ne=28,Oe=29,Ye=30,Ue=31,Ge=!0,Xe,He;R.inflateReset=G,R.inflateReset2=Z,R.inflateResetKeep=L,R.inflateInit=function(We){return W(We,15)},R.inflateInit2=W,R.inflate=function(We,Ke){var ct=0,vt=new J.Buf8(4),Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Qe,$e,Je,et,at,nt,lt,ot,rt,st,dt,ut,ht,mt,pt,gt,_t,bt,yt,xt,kt,wt,Mt,jt;if(!We||!We.state||!We.output||!We.input&&0!==We.avail_in)return ue;Qe=We.state,Qe.mode===je&&(Qe.mode=Pe),at=We.next_out,Je=We.output,lt=We.avail_out,et=We.next_in,$e=We.input,nt=We.avail_in,ot=Qe.hold,rt=Qe.bits,st=nt,dt=lt,wt=de;inf_leave:for(;;)switch(Qe.mode){case pe:if(0===Qe.wrap){Qe.mode=Pe;break}for(;16>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}if(2&Qe.wrap&&35615===ot){Qe.check=0,vt[0]=255&ot,vt[1]=255&ot>>>8,Qe.check=te(Qe.check,vt,2,0),ot=0,rt=0,Qe.mode=ge;break}if(Qe.flags=0,Qe.head&&(Qe.head.done=!1),!(1&Qe.wrap)||(((255&ot)<<8)+(ot>>8))%31){We.msg="incorrect header check",Qe.mode=Ye;break}if((15&ot)!=ce){We.msg="unknown compression method",Qe.mode=Ye;break}if(ot>>>=4,rt-=4,kt=(15&ot)+8,0===Qe.wbits)Qe.wbits=kt;else if(kt>Qe.wbits){We.msg="invalid window size",Qe.mode=Ye;break}Qe.dmax=1<<kt,We.adler=Qe.check=1,Qe.mode=512&ot?ve:je,ot=0,rt=0;break;case ge:for(;16>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}if(Qe.flags=ot,(255&Qe.flags)!=ce){We.msg="unknown compression method",Qe.mode=Ye;break}if(57344&Qe.flags){We.msg="unknown header flags set",Qe.mode=Ye;break}Qe.head&&(Qe.head.text=1&ot>>8),512&Qe.flags&&(vt[0]=255&ot,vt[1]=255&ot>>>8,Qe.check=te(Qe.check,vt,2,0)),ot=0,rt=0,Qe.mode=fe;case fe:for(;32>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}Qe.head&&(Qe.head.time=ot),512&Qe.flags&&(vt[0]=255&ot,vt[1]=255&ot>>>8,vt[2]=255&ot>>>16,vt[3]=255&ot>>>24,Qe.check=te(Qe.check,vt,4,0)),ot=0,rt=0,Qe.mode=_e;case _e:for(;16>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}Qe.head&&(Qe.head.xflags=255&ot,Qe.head.os=ot>>8),512&Qe.flags&&(vt[0]=255&ot,vt[1]=255&ot>>>8,Qe.check=te(Qe.check,vt,2,0)),ot=0,rt=0,Qe.mode=be;case be:if(1024&Qe.flags){for(;16>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}Qe.length=ot,Qe.head&&(Qe.head.extra_len=ot),512&Qe.flags&&(vt[0]=255&ot,vt[1]=255&ot>>>8,Qe.check=te(Qe.check,vt,2,0)),ot=0,rt=0}else Qe.head&&(Qe.head.extra=null);Qe.mode=ye;case ye:if(1024&Qe.flags&&(ut=Qe.length,ut>nt&&(ut=nt),ut&&(Qe.head&&(kt=Qe.head.extra_len-Qe.length,!Qe.head.extra&&(Qe.head.extra=Array(Qe.head.extra_len)),J.arraySet(Qe.head.extra,$e,et,ut,kt)),512&Qe.flags&&(Qe.check=te(Qe.check,$e,ut,et)),nt-=ut,et+=ut,Qe.length-=ut),Qe.length))break inf_leave;Qe.length=0,Qe.mode=xe;case xe:if(2048&Qe.flags){if(0===nt)break inf_leave;ut=0;do kt=$e[et+ut++],Qe.head&&kt&&65536>Qe.length&&(Qe.head.name+=String.fromCharCode(kt));while(kt&&ut<nt);if(512&Qe.flags&&(Qe.check=te(Qe.check,$e,ut,et)),nt-=ut,et+=ut,kt)break inf_leave}else Qe.head&&(Qe.head.name=null);Qe.length=0,Qe.mode=ke;case ke:if(4096&Qe.flags){if(0===nt)break inf_leave;ut=0;do kt=$e[et+ut++],Qe.head&&kt&&65536>Qe.length&&(Qe.head.comment+=String.fromCharCode(kt));while(kt&&ut<nt);if(512&Qe.flags&&(Qe.check=te(Qe.check,$e,ut,et)),nt-=ut,et+=ut,kt)break inf_leave}else Qe.head&&(Qe.head.comment=null);Qe.mode=we;case we:if(512&Qe.flags){for(;16>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}if(ot!==(65535&Qe.check)){We.msg="header crc mismatch",Qe.mode=Ye;break}ot=0,rt=0}Qe.head&&(Qe.head.hcrc=1&Qe.flags>>9,Qe.head.done=!0),We.adler=Qe.check=0,Qe.mode=je;break;case ve:for(;32>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}We.adler=Qe.check=T(ot),ot=0,rt=0,Qe.mode=Me;case Me:if(0===Qe.havedict)return We.next_out=at,We.avail_out=lt,We.next_in=et,We.avail_in=nt,Qe.hold=ot,Qe.bits=rt,2;We.adler=Qe.check=1,Qe.mode=je;case je:if(5===Ke||Ke===se)break inf_leave;case Pe:if(Qe.last){ot>>>=7&rt,rt-=7&rt,Qe.mode=qe;break}for(;3>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}switch(Qe.last=1&ot,ot>>>=1,rt-=1,3&ot){case 0:Qe.mode=De;break;case 1:if(Q(Qe),Qe.mode=Be,Ke===se){ot>>>=2,rt-=2;break inf_leave}break;case 2:Qe.mode=Ce;break;case 3:We.msg="invalid block type",Qe.mode=Ye;}ot>>>=2,rt-=2;break;case De:for(ot>>>=7&rt,rt-=7&rt;32>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}if((65535&ot)!=(65535^ot>>>16)){We.msg="invalid stored block lengths",Qe.mode=Ye;break}if(Qe.length=65535&ot,ot=0,rt=0,Qe.mode=Ie,Ke===se)break inf_leave;case Ie:Qe.mode=Se;case Se:if(ut=Qe.length,ut){if(ut>nt&&(ut=nt),ut>lt&&(ut=lt),0===ut)break inf_leave;J.arraySet(Je,$e,et,ut,at),nt-=ut,et+=ut,lt-=ut,at+=ut,Qe.length-=ut;break}Qe.mode=je;break;case Ce:for(;14>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}if(Qe.nlen=(31&ot)+257,ot>>>=5,rt-=5,Qe.ndist=(31&ot)+1,ot>>>=5,rt-=5,Qe.ncode=(15&ot)+4,ot>>>=4,rt-=4,286<Qe.nlen||30<Qe.ndist){We.msg="too many length or distance symbols",Qe.mode=Ye;break}Qe.have=0,Qe.mode=Ae;case Ae:for(;Qe.have<Qe.ncode;){for(;3>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}Qe.lens[Pt[Qe.have++]]=7&ot,ot>>>=3,rt-=3}for(;19>Qe.have;)Qe.lens[Pt[Qe.have++]]=0;if(Qe.lencode=Qe.lendyn,Qe.lenbits=7,Mt={bits:Qe.lenbits},wt=ie(0,Qe.lens,0,19,Qe.lencode,0,Qe.work,Mt),Qe.lenbits=Mt.bits,wt){We.msg="invalid code lengths set",Qe.mode=Ye;break}Qe.have=0,Qe.mode=Re;case Re:for(;Qe.have<Qe.nlen+Qe.ndist;){for(;;){if(ct=Qe.lencode[ot&(1<<Qe.lenbits)-1],pt=ct>>>24,gt=255&ct>>>16,_t=65535&ct,pt<=rt)break;if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}if(16>_t)ot>>>=pt,rt-=pt,Qe.lens[Qe.have++]=_t;else{if(16===_t){for(jt=pt+2;rt<jt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}if(ot>>>=pt,rt-=pt,0===Qe.have){We.msg="invalid bit length repeat",Qe.mode=Ye;break}kt=Qe.lens[Qe.have-1],ut=3+(3&ot),ot>>>=2,rt-=2}else if(17===_t){for(jt=pt+3;rt<jt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}ot>>>=pt,rt-=pt,kt=0,ut=3+(7&ot),ot>>>=3,rt-=3}else{for(jt=pt+7;rt<jt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}ot>>>=pt,rt-=pt,kt=0,ut=11+(127&ot),ot>>>=7,rt-=7}if(Qe.have+ut>Qe.nlen+Qe.ndist){We.msg="invalid bit length repeat",Qe.mode=Ye;break}for(;ut--;)Qe.lens[Qe.have++]=kt}}if(Qe.mode===Ye)break;if(0===Qe.lens[256]){We.msg="invalid code -- missing end-of-block",Qe.mode=Ye;break}if(Qe.lenbits=9,Mt={bits:Qe.lenbits},wt=ie(ne,Qe.lens,0,Qe.nlen,Qe.lencode,0,Qe.work,Mt),Qe.lenbits=Mt.bits,wt){We.msg="invalid literal/lengths set",Qe.mode=Ye;break}if(Qe.distbits=6,Qe.distcode=Qe.distdyn,Mt={bits:Qe.distbits},wt=ie(le,Qe.lens,Qe.nlen,Qe.ndist,Qe.distcode,0,Qe.work,Mt),Qe.distbits=Mt.bits,wt){We.msg="invalid distances set",Qe.mode=Ye;break}if(Qe.mode=Be,Ke===se)break inf_leave;case Be:Qe.mode=ze;case ze:if(6<=nt&&258<=lt){We.next_out=at,We.avail_out=lt,We.next_in=et,We.avail_in=nt,Qe.hold=ot,Qe.bits=rt,ae(We,dt),at=We.next_out,Je=We.output,lt=We.avail_out,et=We.next_in,$e=We.input,nt=We.avail_in,ot=Qe.hold,rt=Qe.bits,Qe.mode===je&&(Qe.back=-1);break}for(Qe.back=0;;){if(ct=Qe.lencode[ot&(1<<Qe.lenbits)-1],pt=ct>>>24,gt=255&ct>>>16,_t=65535&ct,pt<=rt)break;if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}if(gt&&0==(240&gt)){for(bt=pt,yt=gt,xt=_t;;){if(ct=Qe.lencode[xt+((ot&(1<<bt+yt)-1)>>bt)],pt=ct>>>24,gt=255&ct>>>16,_t=65535&ct,bt+pt<=rt)break;if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}ot>>>=bt,rt-=bt,Qe.back+=bt}if(ot>>>=pt,rt-=pt,Qe.back+=pt,Qe.length=_t,0===gt){Qe.mode=Ve;break}if(32&gt){Qe.back=-1,Qe.mode=je;break}if(64&gt){We.msg="invalid literal/length code",Qe.mode=Ye;break}Qe.extra=15&gt,Qe.mode=Te;case Te:if(Qe.extra){for(jt=Qe.extra;rt<jt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}Qe.length+=ot&(1<<Qe.extra)-1,ot>>>=Qe.extra,rt-=Qe.extra,Qe.back+=Qe.extra}Qe.was=Qe.length,Qe.mode=Ee;case Ee:for(;;){if(ct=Qe.distcode[ot&(1<<Qe.distbits)-1],pt=ct>>>24,gt=255&ct>>>16,_t=65535&ct,pt<=rt)break;if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}if(0==(240&gt)){for(bt=pt,yt=gt,xt=_t;;){if(ct=Qe.distcode[xt+((ot&(1<<bt+yt)-1)>>bt)],pt=ct>>>24,gt=255&ct>>>16,_t=65535&ct,bt+pt<=rt)break;if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}ot>>>=bt,rt-=bt,Qe.back+=bt}if(ot>>>=pt,rt-=pt,Qe.back+=pt,64&gt){We.msg="invalid distance code",Qe.mode=Ye;break}Qe.offset=_t,Qe.extra=15&gt,Qe.mode=Le;case Le:if(Qe.extra){for(jt=Qe.extra;rt<jt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}Qe.offset+=ot&(1<<Qe.extra)-1,ot>>>=Qe.extra,rt-=Qe.extra,Qe.back+=Qe.extra}if(Qe.offset>Qe.dmax){We.msg="invalid distance too far back",Qe.mode=Ye;break}Qe.mode=Fe;case Fe:if(0===lt)break inf_leave;if(ut=dt-lt,Qe.offset>ut){if(ut=Qe.offset-ut,ut>Qe.whave&&Qe.sane){We.msg="invalid distance too far back",Qe.mode=Ye;break}ut>Qe.wnext?(ut-=Qe.wnext,ht=Qe.wsize-ut):ht=Qe.wnext-ut,ut>Qe.length&&(ut=Qe.length),mt=Qe.window}else mt=Je,ht=at-Qe.offset,ut=Qe.length;ut>lt&&(ut=lt),lt-=ut,Qe.length-=ut;do Je[at++]=mt[ht++];while(--ut);0===Qe.length&&(Qe.mode=ze);break;case Ve:if(0===lt)break inf_leave;Je[at++]=Qe.length,lt--,Qe.mode=ze;break;case qe:if(Qe.wrap){for(;32>rt;){if(0===nt)break inf_leave;nt--,ot|=$e[et++]<<rt,rt+=8}if(dt-=lt,We.total_out+=dt,Qe.total+=dt,dt&&(We.adler=Qe.check=Qe.flags?te(Qe.check,Je,dt,at-dt):ee(Qe.check,Je,dt,at-dt)),dt=lt,(Qe.flags?ot:T(ot))!==Qe.check){We.msg="incorrect data check",Qe.mode=Ye;break}ot=0,rt=0}Qe.mode=Ne;case Ne:if(Qe.wrap&&Qe.flags){for(;32>rt;){if(0===nt)break inf_leave;nt--,ot+=$e[et++]<<rt,rt+=8}if(ot!==(4294967295&Qe.total)){We.msg="incorrect length check",Qe.mode=Ye;break}ot=0,rt=0}Qe.mode=Oe;case Oe:wt=1;break inf_leave;case Ye:wt=he;break inf_leave;case Ue:return me;case 32:default:return ue;}return(We.next_out=at,We.avail_out=lt,We.next_in=et,We.avail_in=nt,Qe.hold=ot,Qe.bits=rt,(Qe.wsize||dt!==We.avail_out&&Qe.mode<Ye&&(Qe.mode<qe||Ke!==oe))&&$(We,We.output,We.next_out,dt-We.avail_out))?(Qe.mode=Ue,me):(st-=We.avail_in,dt-=We.avail_out,We.total_in+=st,We.total_out+=dt,Qe.total+=dt,Qe.wrap&&dt&&(We.adler=Qe.check=Qe.flags?te(Qe.check,Je,dt,We.next_out-dt):ee(Qe.check,Je,dt,We.next_out-dt)),We.data_type=Qe.bits+(Qe.last?64:0)+(Qe.mode===je?128:0)+(Qe.mode===Be||Qe.mode===Ie?256:0),(0===st&&0===dt||Ke===oe)&&wt===de&&(wt=-5),wt)},R.inflateEnd=function(We){if(!We||!We.state)return ue;var Ke=We.state;return Ke.window&&(Ke.window=null),We.state=null,de},R.inflateGetHeader=function(We,Ke){var Qe;return We&&We.state?(Qe=We.state,0==(2&Qe.wrap))?ue:(Qe.head=Ke,Ke.done=!1,de):ue},R.inflateSetDictionary=function(We,Ke){var Qe=Ke.length,$e,Je,et;return We&&We.state?($e=We.state,0!==$e.wrap&&$e.mode!==Me)?ue:$e.mode===Me&&(Je=1,Je=ee(Je,Ke,Qe,0),Je!==$e.check)?he:(et=$(We,Ke,Qe,Qe),et)?($e.mode=Ue,me):($e.havedict=1,de):ue},R.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":121,"./adler32":123,"./crc32":125,"./inffast":128,"./inftrees":130}],130:[function(D,I,R){"use strict";var T=D("../utils/common"),E=15,L=852,G=592,Z=0,W=1,Q=2,$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],J=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],te=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];I.exports=function(ie,ne,le,oe,se,de,ue,he){var me=he.bits,ce=0,pe=0,ge=0,fe=0,_e=0,be=0,ye=0,xe=0,ke=0,we=0,Ie=null,Se=0,Ae=new T.Buf16(E+1),Re=new T.Buf16(E+1),Be=null,ze=0,ve,Me,je,Pe,De,Ce,Te,Ee,Le;for(ce=0;ce<=E;ce++)Ae[ce]=0;for(pe=0;pe<oe;pe++)Ae[ne[le+pe]]++;for(_e=me,fe=E;1<=fe&&0===Ae[fe];fe--);if(_e>fe&&(_e=fe),0==fe)return se[de++]=20971520,se[de++]=20971520,he.bits=1,0;for(ge=1;ge<fe&&0===Ae[ge];ge++);for(_e<ge&&(_e=ge),xe=1,ce=1;ce<=E;ce++)if(xe<<=1,xe-=Ae[ce],0>xe)return-1;if(0<xe&&(ie===Z||1!=fe))return-1;for(Re[1]=0,ce=1;ce<E;ce++)Re[ce+1]=Re[ce]+Ae[ce];for(pe=0;pe<oe;pe++)0!==ne[le+pe]&&(ue[Re[ne[le+pe]]++]=pe);if(ie===Z?(Ie=Be=ue,Ce=19):ie===W?(Ie=$,Se-=257,Be=J,ze-=257,Ce=256):(Ie=ee,Be=te,Ce=-1),we=0,pe=0,ce=ge,De=de,be=_e,ye=0,je=-1,ke=1<<_e,Pe=ke-1,ie===W&&ke>L||ie===Q&&ke>G)return 1;for(var Fe=0;;){Fe++,Te=ce-ye,ue[pe]<Ce?(Ee=0,Le=ue[pe]):ue[pe]>Ce?(Ee=Be[ze+ue[pe]],Le=Ie[Se+ue[pe]]):(Ee=96,Le=0),ve=1<<ce-ye,Me=1<<be,ge=Me;do Me-=ve,se[De+(we>>ye)+Me]=0|(Te<<24|Ee<<16|Le);while(0!==Me);for(ve=1<<ce-1;we&ve;)ve>>=1;if(0===ve?we=0:(we&=ve-1,we+=ve),pe++,0==--Ae[ce]){if(ce==fe)break;ce=ne[le+ue[pe]]}if(ce>_e&&(we&Pe)!==je){for(0==ye&&(ye=_e),De+=ge,be=ce-ye,xe=1<<be;be+ye<fe&&(xe-=Ae[be+ye],!(0>=xe));)be++,xe<<=1;if(ke+=1<<be,ie===W&&ke>L||ie===Q&&ke>G)return 1;je=we&Pe,se[je]=0|(_e<<24|be<<16|De-de)}}return 0!=we&&(se[De+we]=0|(4194304|ce-ye<<24)),he.bits=_e,0}},{"../utils/common":121}],131:[function(D,I,R){"use strict";I.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],132:[function(D,I,R){"use strict";function T(He){for(var Ze=He.length;0<=--Ze;)He[Ze]=0}function E(He,Ze,We,Ke,Qe){this.static_tree=He,this.extra_bits=Ze,this.extra_base=We,this.elems=Ke,this.max_length=Qe,this.has_stree=He&&He.length}function L(He,Ze){this.dyn_tree=He,this.max_code=0,this.stat_desc=Ze}function G(He){return 256>He?Ve[He]:Ve[256+(He>>>7)]}function Z(He,Ze){He.pending_buf[He.pending++]=255&Ze,He.pending_buf[He.pending++]=255&Ze>>>8}function W(He,Ze,We){He.bi_valid>Ie-We?(He.bi_buf|=65535&Ze<<He.bi_valid,Z(He,He.bi_buf),He.bi_buf=Ze>>Ie-He.bi_valid,He.bi_valid+=We-Ie):(He.bi_buf|=65535&Ze<<He.bi_valid,He.bi_valid+=We)}function Q(He,Ze,We){W(He,We[2*Ze],We[2*Ze+1])}function $(He,Ze){var We=0;do We|=1&He,He>>>=1,We<<=1;while(0<--Ze);return We>>>1}function J(He){16===He.bi_valid?(Z(He,He.bi_buf),He.bi_buf=0,He.bi_valid=0):8<=He.bi_valid&&(He.pending_buf[He.pending++]=255&He.bi_buf,He.bi_buf>>=8,He.bi_valid-=8)}function ee(He,Ze){var We=Ze.dyn_tree,Ke=Ze.max_code,Qe=Ze.stat_desc.static_tree,$e=Ze.stat_desc.has_stree,Je=Ze.stat_desc.extra_bits,et=Ze.stat_desc.extra_base,at=Ze.stat_desc.max_length,nt,lt,ot,rt,st,dt,ut=0;for(rt=0;rt<=De;rt++)He.bl_count[rt]=0;for(We[2*He.heap[He.heap_max]+1]=0,nt=He.heap_max+1;nt<Pe;nt++)(lt=He.heap[nt],rt=We[2*We[2*lt+1]+1]+1,rt>at&&(rt=at,ut++),We[2*lt+1]=rt,!(lt>Ke))&&(He.bl_count[rt]++,st=0,lt>=et&&(st=Je[lt-et]),dt=We[2*lt],He.opt_len+=dt*(rt+st),$e&&(He.static_len+=dt*(Qe[2*lt+1]+st)));if(0!=ut){do{for(rt=at-1;0===He.bl_count[rt];)rt--;He.bl_count[rt]--,He.bl_count[rt+1]+=2,He.bl_count[at]--,ut-=2}while(0<ut);for(rt=at;0!==rt;rt--)for(lt=He.bl_count[rt];0!==lt;)(ot=He.heap[--nt],!(ot>Ke))&&(We[2*ot+1]!==rt&&(He.opt_len+=(rt-We[2*ot+1])*We[2*ot],We[2*ot+1]=rt),lt--)}}function te(He,Ze,We){var Ke=Array(De+1),Qe=0,$e,Je;for($e=1;$e<=De;$e++)Ke[$e]=Qe=Qe+We[$e-1]<<1;for(Je=0;Je<=Ze;Je++){var et=He[2*Je+1];0!==et&&(He[2*Je]=$(Ke[et]++,et))}}function ae(){var He,Ze,We,Ke,Qe,$e=Array(De+1);for(We=0,Ke=0;Ke<ke-1;Ke++)for(Ne[Ke]=We,He=0;He<1<<Be[Ke];He++)qe[We++]=Ke;for(qe[We-1]=Ke,Qe=0,Ke=0;16>Ke;Ke++)for(Oe[Ke]=Qe,He=0;He<1<<ze[Ke];He++)Ve[Qe++]=Ke;for(Qe>>=7;Ke<Me;Ke++)for(Oe[Ke]=Qe<<7,He=0;He<1<<ze[Ke]-7;He++)Ve[256+Qe++]=Ke;for(Ze=0;Ze<=De;Ze++)$e[Ze]=0;for(He=0;143>=He;)Le[2*He+1]=8,He++,$e[8]++;for(;255>=He;)Le[2*He+1]=9,He++,$e[9]++;for(;279>=He;)Le[2*He+1]=7,He++,$e[7]++;for(;287>=He;)Le[2*He+1]=8,He++,$e[8]++;for(te(Le,ve+1,$e),He=0;He<Me;He++)Fe[2*He+1]=5,Fe[2*He]=$(He,5);Ye=new E(Le,Be,we+1,ve,De),Ue=new E(Fe,ze,0,Me,De),Ge=new E([],Te,0,je,7)}function ie(He){var Ze;for(Ze=0;Ze<ve;Ze++)He.dyn_ltree[2*Ze]=0;for(Ze=0;Ze<Me;Ze++)He.dyn_dtree[2*Ze]=0;for(Ze=0;Ze<je;Ze++)He.bl_tree[2*Ze]=0;He.dyn_ltree[2*Se]=1,He.opt_len=He.static_len=0,He.last_lit=He.matches=0}function ne(He){8<He.bi_valid?Z(He,He.bi_buf):0<He.bi_valid&&(He.pending_buf[He.pending++]=He.bi_buf),He.bi_buf=0,He.bi_valid=0}function le(He,Ze,We,Ke){ne(He),Ke&&(Z(He,We),Z(He,~We)),_e.arraySet(He.pending_buf,He.window,Ze,We,He.pending),He.pending+=We}function oe(He,Ze,We,Ke){var Qe=2*Ze,$e=2*We;return He[Qe]<He[$e]||He[Qe]===He[$e]&&Ke[Ze]<=Ke[We]}function se(He,Ze,We){for(var Ke=He.heap[We],Qe=We<<1;Qe<=He.heap_len&&(Qe<He.heap_len&&oe(Ze,He.heap[Qe+1],He.heap[Qe],He.depth)&&Qe++,!oe(Ze,Ke,He.heap[Qe],He.depth));)He.heap[We]=He.heap[Qe],We=Qe,Qe<<=1;He.heap[We]=Ke}function de(He,Ze,We){var Ke,Qe,$e=0,Je,et;if(0!==He.last_lit)do Ke=He.pending_buf[He.d_buf+2*$e]<<8|He.pending_buf[He.d_buf+2*$e+1],Qe=He.pending_buf[He.l_buf+$e],$e++,0===Ke?Q(He,Qe,Ze):(Je=qe[Qe],Q(He,Je+we+1,Ze),et=Be[Je],0!==et&&(Qe-=Ne[Je],W(He,Qe,et)),Ke--,Je=G(Ke),Q(He,Je,We),et=ze[Je],0!==et&&(Ke-=Oe[Je],W(He,Ke,et)));while($e<He.last_lit);Q(He,Se,Ze)}function ue(He,Ze){var We=Ze.dyn_tree,Ke=Ze.stat_desc.static_tree,Qe=Ze.stat_desc.has_stree,$e=Ze.stat_desc.elems,Je,et,at=-1,nt;for(He.heap_len=0,He.heap_max=Pe,Je=0;Je<$e;Je++)0===We[2*Je]?We[2*Je+1]=0:(He.heap[++He.heap_len]=at=Je,He.depth[Je]=0);for(;2>He.heap_len;)nt=He.heap[++He.heap_len]=2>at?++at:0,We[2*nt]=1,He.depth[nt]=0,He.opt_len--,Qe&&(He.static_len-=Ke[2*nt+1]);for(Ze.max_code=at,Je=He.heap_len>>1;1<=Je;Je--)se(He,We,Je);nt=$e;do Je=He.heap[1],He.heap[1]=He.heap[He.heap_len--],se(He,We,1),et=He.heap[1],He.heap[--He.heap_max]=Je,He.heap[--He.heap_max]=et,We[2*nt]=We[2*Je]+We[2*et],He.depth[nt]=(He.depth[Je]>=He.depth[et]?He.depth[Je]:He.depth[et])+1,We[2*Je+1]=We[2*et+1]=nt,He.heap[1]=nt++,se(He,We,1);while(2<=He.heap_len);He.heap[--He.heap_max]=He.heap[1],ee(He,Ze),te(We,at,He.bl_count)}function he(He,Ze,We){var Ke,Qe=-1,$e,Je=Ze[1],et=0,at=7,nt=4;for(0===Je&&(at=138,nt=3),Ze[2*(We+1)+1]=65535,Ke=0;Ke<=We;Ke++){if($e=Je,Je=Ze[2*(Ke+1)+1],++et<at&&$e===Je)continue;else et<nt?He.bl_tree[2*$e]+=et:0===$e?10>=et?He.bl_tree[2*Ae]++:He.bl_tree[2*Re]++:($e!==Qe&&He.bl_tree[2*$e]++,He.bl_tree[2*Ce]++);et=0,Qe=$e,0===Je?(at=138,nt=3):$e===Je?(at=6,nt=3):(at=7,nt=4)}}function me(He,Ze,We){var Ke,Qe=-1,$e,Je=Ze[1],et=0,at=7,nt=4;for(0===Je&&(at=138,nt=3),Ke=0;Ke<=We;Ke++){if($e=Je,Je=Ze[2*(Ke+1)+1],++et<at&&$e===Je)continue;else if(et<nt)do Q(He,$e,He.bl_tree);while(0!=--et);else 0===$e?10>=et?(Q(He,Ae,He.bl_tree),W(He,et-3,3)):(Q(He,Re,He.bl_tree),W(He,et-11,7)):($e!==Qe&&(Q(He,$e,He.bl_tree),et--),Q(He,Ce,He.bl_tree),W(He,et-3,2));et=0,Qe=$e,0===Je?(at=138,nt=3):$e===Je?(at=6,nt=3):(at=7,nt=4)}}function ce(He){var Ze;for(he(He,He.dyn_ltree,He.l_desc.max_code),he(He,He.dyn_dtree,He.d_desc.max_code),ue(He,He.bl_desc),Ze=je-1;3<=Ze&&0===He.bl_tree[2*Ee[Ze]+1];Ze--);return He.opt_len+=3*(Ze+1)+5+5+4,Ze}function pe(He,Ze,We,Ke){var Qe;for(W(He,Ze-257,5),W(He,We-1,5),W(He,Ke-4,4),Qe=0;Qe<Ke;Qe++)W(He,He.bl_tree[2*Ee[Qe]+1],3);me(He,He.dyn_ltree,Ze-1),me(He,He.dyn_dtree,We-1)}function ge(He){var Ze=4093624447,We;for(We=0;31>=We;We++,Ze>>>=1)if(1&Ze&&0!==He.dyn_ltree[2*We])return be;if(0!==He.dyn_ltree[18]||0!==He.dyn_ltree[20]||0!==He.dyn_ltree[26])return ye;for(We=32;We<we;We++)if(0!==He.dyn_ltree[2*We])return ye;return be}function fe(He,Ze,We,Ke){W(He,0+(Ke?1:0),3),le(He,Ze,We,!0)}var _e=D("../utils/common"),be=0,ye=1,xe=1,ke=29,we=256,ve=we+1+ke,Me=30,je=19,Pe=2*ve+1,De=15,Ie=16,Se=256,Ce=16,Ae=17,Re=18,Be=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ze=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Le=Array(2*(ve+2));T(Le);var Fe=Array(2*Me);T(Fe);var Ve=Array(512);T(Ve);var qe=Array(256);T(qe);var Ne=Array(ke);T(Ne);var Oe=Array(Me);T(Oe);var Ye,Ue,Ge,Xe=!1;R._tr_init=function(Ze){Xe||(ae(),Xe=!0),Ze.l_desc=new L(Ze.dyn_ltree,Ye),Ze.d_desc=new L(Ze.dyn_dtree,Ue),Ze.bl_desc=new L(Ze.bl_tree,Ge),Ze.bi_buf=0,Ze.bi_valid=0,ie(Ze)},R._tr_stored_block=fe,R._tr_flush_block=function(Ze,We,Ke,Qe){var $e,Je,et=0;0<Ze.level?(2===Ze.strm.data_type&&(Ze.strm.data_type=ge(Ze)),ue(Ze,Ze.l_desc),ue(Ze,Ze.d_desc),et=ce(Ze),$e=Ze.opt_len+3+7>>>3,Je=Ze.static_len+3+7>>>3,Je<=$e&&($e=Je)):$e=Je=Ke+5,Ke+4<=$e&&-1!==We?fe(Ze,We,Ke,Qe):4===Ze.strategy||Je===$e?(W(Ze,(xe<<1)+(Qe?1:0),3),de(Ze,Le,Fe)):(W(Ze,4+(Qe?1:0),3),pe(Ze,Ze.l_desc.max_code+1,Ze.d_desc.max_code+1,et+1),de(Ze,Ze.dyn_ltree,Ze.dyn_dtree)),ie(Ze),Qe&&ne(Ze)},R._tr_tally=function(Ze,We,Ke){return Ze.pending_buf[Ze.d_buf+2*Ze.last_lit]=255&We>>>8,Ze.pending_buf[Ze.d_buf+2*Ze.last_lit+1]=255&We,Ze.pending_buf[Ze.l_buf+Ze.last_lit]=255&Ke,Ze.last_lit++,0===We?Ze.dyn_ltree[2*Ke]++:(Ze.matches++,We--,Ze.dyn_ltree[2*(qe[Ke]+we+1)]++,Ze.dyn_dtree[2*G(We)]++),Ze.last_lit===Ze.lit_bufsize-1},R._tr_align=function(Ze){W(Ze,xe<<1,3),Q(Ze,Se,Le),J(Ze)}},{"../utils/common":121}],133:[function(D,I,R){"use strict";I.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],134:[function(D,I,R){"use strict";var T=D("./tiffDecoder");I.exports=function(L,G){var Z=new T(L,G);return Z.decode(G)}},{"./tiffDecoder":141}],135:[function(D,I,R){"use strict";var T={standard:D("./tags/standard"),exif:D("./tags/exif"),gps:D("./tags/gps")};class E{constructor(L){if(!L)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=L,this._map=null}get(L){if("number"==typeof L)return this.fields.get(L);return"string"==typeof L?this.fields.get(T[this.kind].tagsByName[L]):void 0}get map(){if(!this._map){this._map={};var L=T[this.kind].tagsById;for(var G of this.fields.keys())L[G]&&(this._map[L[G]]=this.fields.get(G))}return this._map}}I.exports=E},{"./tags/exif":138,"./tags/gps":139,"./tags/standard":140}],136:[function(D,I,R){"use strict";function T(L,G){if(1===G)return L.readUint8();var Z=new Uint8Array(G);for(var W=0;W<G;W++)Z[W]=L.readUint8();return Z}var E=new Map([[1,[1,T]],[2,[1,function(G,Z){var W=[],Q="";for(var $=0;$<Z;$++){var J=String.fromCharCode(G.readUint8());"\0"===J?(W.push(Q),Q=""):Q+=J}return 1===W.length?W[0]:W}]],[3,[2,function(G,Z){if(1===Z)return G.readUint16();var W=new Uint16Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readUint16();return W}]],[4,[4,function(G,Z){if(1===Z)return G.readUint32();var W=new Uint32Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readUint32();return W}]],[5,[8,function(G,Z){if(1===Z)return G.readUint32()/G.readUint32();var W=Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readUint32()/G.readUint32();return W}]],[6,[1,function(G,Z){if(1===Z)return G.readInt8();var W=new Int8Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readInt8();return W}]],[7,[1,T]],[8,[2,function(G,Z){if(1===Z)return G.readInt16();var W=new Int16Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readInt16();return W}]],[9,[4,function(G,Z){if(1===Z)return G.readInt32();var W=new Int32Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readInt32();return W}]],[10,[8,function(G,Z){if(1===Z)return G.readInt32()/G.readInt32();var W=Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readInt32()/G.readInt32();return W}]],[11,[4,function(G,Z){if(1===Z)return G.readFloat32();var W=new Float32Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readFloat32();return W}]],[12,[8,function(G,Z){if(1===Z)return G.readFloat64();var W=new Float64Array(Z);for(var Q=0;Q<Z;Q++)W[Q]=G.readFloat64();return W}]]]);R.getByteLength=function(L,G){return E.get(L)[0]*G},R.readData=function(L,G,Z){return E.get(G)[1](L,Z)}},{}],137:[function(D,I,R){arguments[4][37][0].apply(R,arguments)},{"./decode":134,dup:37}],138:[function(D,I,R){"use strict";var T={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},E={};for(var L in T)E[T[L]]=L;I.exports={tagsById:T,tagsByName:E}},{}],139:[function(D,I,R){"use strict";var T={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},E={};for(var L in T)E[T[L]]=L;I.exports={tagsById:T,tagsByName:E}},{}],140:[function(D,I,R){"use strict";var T={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},E={};for(var L in T)E[T[L]]=L;I.exports={tagsById:T,tagsByName:E}},{}],141:[function(D,I,R){"use strict";function T(te,ae,ie,ne){if(8===ie)return new Uint8Array(te*ae);return 16===ie?new Uint16Array(te*ae):32===ie&&3===ne?new Float32Array(te*ae):void Z("bit depth / sample format",ie+" / "+ne)}function E(te,ae,ie,ne){for(var le=0;le<ne;le++)te[ie++]=ae.getUint8(le);return ie}function L(te,ae,ie,ne,le){for(var oe=0;oe<2*ne;oe+=2)te[ie++]=ae.getUint16(oe,le);return ie}function G(te,ae,ie,ne,le){for(var oe=0;oe<4*ne;oe+=4)te[ie++]=ae.getFloat32(oe,le);return ie}function Z(te,ae){throw new Error("Unsupported "+te+": "+ae)}var W=D("iobuffer"),Q=D("./ifd"),$=D("./tiffIfd"),J=D("./ifdValue"),ee={ignoreImageData:!1,onlyFirst:!1};I.exports=class extends W{constructor(ae,ie){super(ae,ie),this._nextIFD=0}decode(ae){ae=Object.assign({},ee,ae);var ie=[];for(this.decodeHeader();this._nextIFD;)if(ie.push(this.decodeIFD(ae)),ae.onlyFirst)return ie[0];return ie}decodeHeader(){var ae=this.readUint16();if(18761===ae)this.setLittleEndian();else if(19789===ae)this.setBigEndian();else throw new Error("invalid byte order: 0x"+ae.toString(16));if(ae=this.readUint16(),42!==ae)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(ae){this.seek(this._nextIFD);var ie;ie=ae.kind?new Q(ae.kind):new $;var ne=this.readUint16();for(var le=0;le<ne;le++)this.decodeIFDEntry(ie);return ae.ignoreImageData||this.decodeImageData(ie),this._nextIFD=this.readUint32(),ie}decodeIFDEntry(ae){var ie=this.offset,ne=this.readUint16(),le=this.readUint16(),oe=this.readUint32();if(1>le||12<le)return void this.skip(4);var se=J.getByteLength(le,oe);4<se&&this.seek(this.readUint32());var de=J.readData(this,le,oe);if(ae.fields.set(ne,de),34665===ne||34853===ne){var ue=this.offset,he=void 0;34665===ne?he="exif":34853===ne&&(he="gps"),this._nextIFD=de,ae[he]=this.decodeIFD({kind:he,ignoreImageData:!0}),this.offset=ue}this.seek(ie),this.skip(12)}decodeImageData(ae){var ie=ae.orientation;switch(ie&&1!==ie&&Z("orientation",ie),ae.type){case 1:this.decodeBilevelOrGrey(ae);break;default:Z("image type",ae.type);}}decodeBilevelOrGrey(ae){var ie=ae.width,ne=ae.height,le=ae.bitsPerSample,oe=ae.sampleFormat,se=ie*ne,de=T(se,1,le,oe),ue=ae.compression,he=ae.rowsPerStrip,me=he*ie,ce=ae.stripOffsets,pe=ae.stripByteCounts,ge=0;for(var fe=0;fe<ce.length;fe++){var _e=this.getStripData(ue,ce[fe],pe[fe]),be=se>me?me:se;se-=be,8===le?ge=E(de,_e,ge,be):16===le?ge=L(de,_e,ge,be,this.isLittleEndian()):32===le&&3===oe?ge=G(de,_e,ge,be,this.isLittleEndian()):Z("bitDepth",le)}ae.data=de}getStripData(ae,ie,ne){switch(ae){case 1:return new DataView(this.buffer,ie,ne);break;case 2:case 32773:Z("Compression",ae);break;default:throw new Error("invalid compression: "+ae);}}}},{"./ifd":135,"./ifdValue":136,"./tiffIfd":142,iobuffer:48}],142:[function(D,I,R){"use strict";function T(Z){return"number"==typeof Z?[Z]:Z}var E=D("./ifd"),L=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class G extends E{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var Z=new Date,W=L.exec(this.dateTime);return Z.setFullYear(W[1],W[2]-1,W[3]),Z.setHours(W[4],W[5],W[6]),Z}get newSubfileType(){return this.fields.get(254)}get imageWidth(){return this.fields.get(256)}get imageLength(){return this.fields.get(257)}get bitsPerSample(){return this.fields.get(258)}get compression(){return this.fields.get(259)||1}get type(){return this.fields.get(262)}get fillOrder(){return this.fields.get(266)||1}get documentName(){return this.fields.get(269)}get imageDescription(){return this.fields.get(270)}get stripOffsets(){return T(this.fields.get(273))}get orientation(){return this.fields.get(274)}get samplesPerPixel(){return this.fields.get(277)}get rowsPerStrip(){return this.fields.get(278)}get stripByteCounts(){return T(this.fields.get(279))}get minSampleValue(){return this.fields.get(280)||0}get maxSampleValue(){return this.fields.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.fields.get(282)}get yResolution(){return this.fields.get(283)}get planarConfiguration(){return this.fields.get(284)||1}get resolutionUnit(){return this.fields.get(296)||2}get dateTime(){return this.fields.get(306)}get predictor(){return this.fields.get(317)||1}get sampleFormat(){return this.fields.get(339)||1}get sMinSampleValue(){return this.fields.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.fields.get(341)||this.maxSampleValue}}I.exports=G},{"./ifd":135}],143:[function(D,I,R){"use strict";function T(G,Z){if("string"!=typeof G&&"function"!=typeof G)throw new TypeError("func argument must be a function");if(void 0===Z&&(Z={}),"object"!=typeof Z||null===Z)throw new TypeError("options argument must be an object");this._workerCode=G.toString(),this._numWorkers=void 0===Z.maxWorkers||"auto"===Z.maxWorkers?Math.min(L-1,1):0<Z.maxWorkers?Math.min(Z.maxWorkers,L):L,this._workers=new Map,this._timeout=Z.timeout||0,this._terminateOnError=!!Z.terminateOnError;var W=Z.deps;"string"==typeof W&&(W=[W]),Array.isArray(W)||(W=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(W)}var E=D("./workerTemplate"),L=navigator.hardwareConcurrency||1;Function.prototype,T.prototype._init=function(G){var Z=E.newWorkerURL(this._workerCode,G);for(var W=0;W<this._numWorkers;W++){var Q=new Worker(Z);Q.onmessage=this._onmessage.bind(this,Q),Q.onerror=this._onerror.bind(this,Q),Q.running=!1,Q.id=W,this._workers.set(Q,null)}URL.revokeObjectURL(Z)},T.prototype._onerror=function(G,Z){if(!this._terminated){this._working--,G.running=!1;var W=this._workers.get(G);W&&W[1](Z.message),this._workers.set(G,null),this._terminateOnError?this.terminate():this._exec()}},T.prototype._onmessage=function(G,Z){if(!this._terminated){this._working--,G.running=!1;var W=this._workers.get(G);W&&W[0](Z.data.data),this._workers.set(G,null),this._exec()}},T.prototype._exec=function(){for(var G of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!G.running)for(var Z=0;Z<this._waiting.length;Z++){var W=this._waiting[Z];if("number"!=typeof W[4]||W[4]===G.id){this._waiting.splice(Z,1),G.postMessage({action:"exec",event:W[0],args:W[1]},W[2]),G.running=!0,G.time=Date.now(),this._workers.set(G,W[3]),this._working++;break}}}},T.prototype.terminate=function(){if(!this._terminated){for(var G of this._workers)G[0].terminate(),G[1]&&G[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},T.prototype.postAll=function(G,Z){if(this._terminated)throw new Error("Cannot post (terminated)");var W=[];for(var Q of this._workers.keys())W.push(this.post(G,Z,[],Q.id));return Promise.all(W)},T.prototype.post=function(G,Z,W,Q){Z===void 0&&(Z=[]),W===void 0&&(W=[]),Array.isArray(Z)||(Z=[Z]),Array.isArray(W)||(W=[W]);var $=this;return new Promise(function(J,ee){if($._terminated)throw new Error("Cannot post (terminated)");$._waiting.push([G,Z,W,[J,ee],Q]),$._exec()})},I.exports=T},{"./workerTemplate":144}],144:[function(D,I,R){"use strict";var T=function(){function L(){this._listeners={}}self.window=self,L.prototype.on=function(G,Z){if(this._listeners[G])throw new RangeError("there is already a listener for "+G);if("function"!=typeof Z)throw new TypeError("callback argument must be a function");this._listeners[G]=Z},L.prototype._send=function(G,Z,W){W===void 0?W=[]:!Array.isArray(W)&&(W=[W]),self.postMessage({id:G,data:Z},W)},L.prototype._trigger=function(G,Z){if(!this._listeners[G])throw new Error("event "+G+" is not defined");this._listeners[G].apply(null,Z)};var E=new L;self.onmessage=function(G){switch(G.data.action){case"exec":G.data.args.unshift(function(Z,W){E._send(G.data.id,Z,W)}),E._trigger(G.data.event,G.data.args);break;case"ping":E._send(G.data.id,"pong");break;default:throw new Error("unexpected action: "+G.data.action);}}}.toString().split("\"CODE\";");R.newWorkerURL=function(L,G){var Z=new Blob(["(",T[0],"importScripts.apply(self, "+JSON.stringify(G)+");\n","(",L,")();",T[1],")();"],{type:"application/javascript"});return URL.createObjectURL(Z)}},{}],145:[function(D,I,R){"use strict";function T(fe){return fe&&fe.__esModule?fe:{default:fe}}function E(fe){if(Array.isArray(fe)){for(var _e=0,be=Array(fe.length);_e<fe.length;_e++)be[_e]=fe[_e];return be}return Array.from(fe)}Object.defineProperty(R,"__esModule",{value:!0});var L=D("./kind"),G=D("./kindNames"),Z=D("./environment"),W=D("./extend"),Q=T(W),$=D("./bitMethods"),J=T($),ee=D("fs"),te=D("./model/model"),ae=D("./roi/manager"),ie=T(ae),ne=D("./mediaTypes"),le=D("extend"),oe=T(le),se=D("./load"),de=D("../stack/Stack"),ue=T(de),he=D("blob-util"),me=D("has-own"),ce=T(me),pe={configurable:!0,enumerable:!1,get:void 0};class ge{constructor(fe,_e,be,ye){if(void 0===fe&&(fe=1),void 0===_e&&(_e=1),"object"==typeof fe){var xe=fe,ke=!0===_e;fe=xe.width,_e=xe.height,be=ke?xe.data.slice():xe.data,ye={position:xe.position,components:xe.components,alpha:xe.alpha,bitDepth:xe.bitDepth,colorModel:xe.colorModel,parent:xe,meta:xe.meta}}if(be&&!be.length&&(ye=be,be=null),void 0===ye&&(ye={}),this.width=fe,this.height=_e,0>=this.width)throw new RangeError("width must be greater than 0");if(0>=this.height)throw new RangeError("height must be greater than 0");Object.defineProperty(this,"parent",{enumerable:!1,writable:!0}),this.parent=ye.parent,this.position=ye.position||[0,0];var we=void 0;if("string"!=typeof ye.kind)we=(0,L.getKind)(G.RGBA);else if(we=(0,L.getKind)(ye.kind),!we)throw new RangeError("invalid image kind: "+ye.kind);var ve=(0,oe.default)({},we,ye);if(this.components=ve.components,this.alpha=ve.alpha+0,this.bitDepth=ve.bitDepth,this.colorModel=ve.colorModel,this.meta=ye.meta||{},this.computed=null,this.initialize(),!be)(0,L.createPixelArray)(this);else{var Me=(0,L.getTheoreticalPixelArraySize)(this);if(Me!==be.length)throw new RangeError(`incorrect data size. Should be ${Me} and found ${be.length}`);this.data=be}}initialize(){this.size=this.width*this.height,this.sizes=[this.width,this.height],this.channels=this.components+this.alpha,this.maxValue=32===this.bitDepth?Number.MAX_VALUE:Math.pow(2,this.bitDepth)-1,this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=32>this.bitDepth,this.borderSizes=[0,0]}static load(fe,_e){return(0,se.loadURL)(fe,_e)}static fromCanvas(fe){var _e=fe.getContext("2d"),be=_e.getImageData(0,0,fe.width,fe.height);return new ge(be.width,be.height,be.data)}static extendMethod(fe,_e){var be=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},ye=be.inPlace,xe=ye!==void 0&&ye,ke=be.returnThis,we=!(ke!==void 0)||ke,ve=be.partialArgs,Me=ve===void 0?[]:ve,je=be.stack,Pe=je!==void 0&&je;if(xe){if(ge.prototype[fe]=function(){this.computed=null;for(var Se=arguments.length,Ce=Array(Se),Ae=0;Ae<Se;Ae++)Ce[Ae]=arguments[Ae];var Re=_e.apply(this,[].concat(E(Me),Ce));return we?this:Re},Pe){var De="string"==typeof Pe?Pe:fe;ue.default.prototype[De]=we?function(){for(var Se of this)Se[fe].apply(Se,arguments);return this}:function(){var Se=new ue.default(this.length);for(var Ce=0;Ce<this.length;Ce++){var Ae;Se[Ce]=(Ae=this[Ce])[fe].apply(Ae,arguments)}return Se}}}else if(ge.prototype[fe]=function(){for(var Se=arguments.length,Ce=Array(Se),Ae=0;Ae<Se;Ae++)Ce[Ae]=arguments[Ae];return _e.apply(this,[].concat(E(Me),Ce))},Pe){var Ie="string"==typeof Pe?Pe:fe;ue.default.prototype[Ie]=function(){var Se=new ue.default(this.length);for(var Ce=0;Ce<this.length;Ce++){var Ae;Se[Ce]=(Ae=this[Ce])[fe].apply(Ae,arguments)}return Se}}return ge}static extendProperty(fe,_e){var be=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},ye=be.partialArgs,xe=void 0===ye?[]:ye;return pe.get=function(){if(null===this.computed)this.computed={};else if((0,ce.default)(fe,this.computed))return this.computed[fe];var ke=_e.apply(this,xe);return this.computed[fe]=ke,ke},Object.defineProperty(ge.prototype,fe,pe),ge}static createFrom(fe,_e){var be={width:fe.width,height:fe.height,position:fe.position,components:fe.components,alpha:fe.alpha,colorModel:fe.colorModel,bitDepth:fe.bitDepth,parent:fe};return(0,oe.default)(be,_e),new ge(be.width,be.height,be)}static isTypeSupported(fe){var _e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"write";if("string"!=typeof fe)throw new TypeError("type argument must be a string");if(fe=(0,ne.getType)(fe),"write"===_e)return(0,ne.canWrite)(fe);throw new TypeError("unknown operation: "+_e)}getPixelIndex(fe){var _e=0;for(var be=0;be<fe.length;be++)_e+=this.multipliers[be]*fe[be];return _e}setValueXY(fe,_e,be,ye){return this.data[(_e*this.width+fe)*this.channels+be]=ye,this.computed=null,this}getValueXY(fe,_e,be){return this.data[(_e*this.width+fe)*this.channels+be]}setValue(fe,_e,be){return this.data[fe*this.channels+_e]=be,this.computed=null,this}getValue(fe,_e){return this.data[fe*this.channels+_e]}setPixelXY(fe,_e,be){return this.setPixel(_e*this.width+fe,be)}getPixelXY(fe,_e){return this.getPixel(_e*this.width+fe)}setPixel(fe,_e){var be=fe*this.channels;for(var ye=0;ye<_e.length;ye++)this.data[be+ye]=_e[ye];return this.computed=null,this}getPixel(fe){var _e=Array(this.channels),be=fe*this.channels;for(var ye=0;ye<this.channels;ye++)_e[ye]=this.data[be+ye];return _e}toDataURL(){var fe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"image/png";return this.getCanvas().toDataURL((0,ne.getType)(fe))}toBlob(){var fe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"image/png",_e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0.8;return(0,he.canvasToBlob)(this.getCanvas({originalData:!0}),fe,_e)}getCanvas(){var fe=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_e=fe.originalData,be=void 0!==_e&&_e,ye=void 0;be?(this.checkProcessable("getInPlaceCanvas",{channels:[4],bitDepth:[8]}),ye=new Z.ImageData(this.data,this.width,this.height)):ye=new Z.ImageData(this.getRGBAData(),this.width,this.height);var xe=new Z.Canvas(this.width,this.height),ke=xe.getContext("2d");return ke.putImageData(ye,0,0),xe}getRGBAData(){this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16]});var fe=this.size,_e=new Uint8ClampedArray(4*(this.width*this.height));if(1===this.bitDepth)for(var be=0;be<fe;be++){var ye=this.getBit(be);_e[4*be]=255*ye,_e[4*be+1]=255*ye,_e[4*be+2]=255*ye}else if(1===this.components)for(var xe=0;xe<fe;xe++)_e[4*xe]=this.data[xe*this.channels]>>>this.bitDepth-8,_e[4*xe+1]=this.data[xe*this.channels]>>>this.bitDepth-8,_e[4*xe+2]=this.data[xe*this.channels]>>>this.bitDepth-8;else if(3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[te.RGB]}),this.colorModel===te.RGB))for(var ke=0;ke<fe;ke++)_e[4*ke]=this.data[ke*this.channels]>>>this.bitDepth-8,_e[4*ke+1]=this.data[ke*this.channels+1]>>>this.bitDepth-8,_e[4*ke+2]=this.data[ke*this.channels+2]>>>this.bitDepth-8;if(this.alpha){this.checkProcessable("getRGBAData",{bitDepth:[8,16]});for(var we=0;we<fe;we++)_e[4*we+3]=this.data[we*this.channels+this.components]>>this.bitDepth-8}else for(var ve=0;ve<fe;ve++)_e[4*ve+3]=255;return _e}getRoiManager(fe){return new ie.default(this,fe)}clone(){var fe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},_e=fe.copyData,be=!(_e!==void 0)||_e;return new ge(this,be)}save(fe){var _e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},be=_e.format,ye=be===void 0?"png":be;return new Promise((xe,ke)=>{var we=(0,ee.createWriteStream)(fe),ve=this.getCanvas(),Me=void 0;switch(ye.toLowerCase()){case"png":Me=ve.pngStream();break;case"jpg":case"jpeg":Me=ve.jpegStream();break;default:throw new RangeError("invalid output format: "+ye);}we.on("finish",xe),we.on("error",ke),Me.pipe(we)})}checkProcessable(fe){var _e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},be=_e.bitDepth,ye=_e.alpha,xe=_e.colorModel,ke=_e.components,we=_e.channels;if("string"!=typeof fe)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(be&&(Array.isArray(be)||(be=[be]),!be.includes(this.bitDepth)))throw new TypeError("The process: "+fe+" can only be applied if bit depth is in: "+be);if(ye&&(Array.isArray(ye)||(ye=[ye]),!ye.includes(this.alpha)))throw new TypeError("The process: "+fe+" can only be applied if alpha is in: "+ye);if(xe&&(Array.isArray(xe)||(xe=[xe]),!xe.includes(this.colorModel)))throw new TypeError("The process: "+fe+" can only be applied if color model is in: "+xe);if(ke&&(Array.isArray(ke)||(ke=[ke]),!ke.includes(this.components)))throw new TypeError("The process: "+fe+" can only be applied if the number of channels is in: "+ke);if(we&&(Array.isArray(we)||(we=[we]),!we.includes(this.channels)))throw new TypeError("The process: "+fe+" can only be applied if the number of components is in: "+we)}checkColumn(fe){if(0>fe||fe>=this.width)throw new RangeError(`checkColumn: column should be included between 0 and ${this.width-1}. Current value: ${fe}`)}checkRow(fe){if(0>fe||fe>=this.height)throw new RangeError(`checkRow: row should be included between 0 and ${this.height-1}. Current value: ${fe}`)}checkChannel(fe){if(0>fe||fe>=this.channels)throw new RangeError(`checkChannel: channel should be included between 0 and ${this.channels-1}. Current value: ${fe}`)}apply(fe){for(var _e=0;_e<this.height;_e++)for(var be=0;be<this.width;be++){var ye=(_e*this.width+be)*this.channels;fe.call(this,ye)}}}R.default=ge,(0,Q.default)(ge),(0,J.default)(ge)},{"../stack/Stack":245,"./bitMethods":146,"./environment":159,"./extend":160,"./kind":181,"./kindNames":182,"./load":183,"./mediaTypes":184,"./model/model":185,"./roi/manager":198,"blob-util":6,extend:35,fs:8,"has-own":44}],146:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){for(var L in T)E.prototype[L]=T[L]};var T={setBitXY:function(L,G){var Z=G*this.width+L;this.data[Z>>3]|=1<<7-(7&Z)},clearBitXY:function(L,G){var Z=G*this.width+L;this.data[Z>>3]&=~(1<<7-(7&Z))},toggleBitXY:function(L,G){var Z=G*this.width+L;this.data[Z>>3]^=1<<7-(7&Z)},getBitXY:function(L,G){var Z=G*this.width+L;return this.data[Z>>3]&1<<7-(7&Z)?1:0},setBit:function(L){this.data[L>>3]|=1<<7-(7&L)},clearBit:function(L){this.data[L>>3]&=~(1<<7-(7&L))},toggleBit:function(L){this.data[L>>3]^=1<<7-(7&L)},getBit:function(L){return this.data[L>>3]&1<<7-(7&L)?1:0}}},{}],147:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var G=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},Z=G.useAlpha,W=!(Z!==void 0)||Z,Q=G.nbSlots,$=Q===void 0?512:Q;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});var J=Math.log($)/Math.log(8);if(J!==Math.floor(J))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");var ee=this.bitDepth-J,te=this.data,ae=(0,E.default)(Math.pow(8,J),0),ie=Math.pow(2,2*J),ne=Math.pow(2,J);for(var le=0;le<te.length;le+=this.channels){var oe=(te[le]>>ee)*ie+(te[le+1]>>ee)*ne+(te[le+2]>>ee);W&&this.alpha?ae[oe]+=te[le+this.channels-1]/this.maxValue:ae[oe]++}return ae};var T=D("new-array"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"new-array":113}],148:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},L=E.alpha,G=L===void 0?1:L;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});var Z=0;if(G!==void 0){for(var W=this.components;W<this.data.length;W+=this.channels)this.data[W]===G&&Z++;return Z}return this.size}},{}],149:[function(D,I,R){"use strict";function T(Q){return Q&&Q.__esModule?Q:{default:Q}}function E(Q,$){var J=$.useAlpha,ee=$.maxSlots,te=Math.log2(ee);if(!(0,W.default)(te))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");var ae=0;this.bitDepth>te&&(ae=this.bitDepth-te);var ie=this.data,ne=(0,G.default)(Math.pow(2,Math.min(this.bitDepth,te)),0);if(J&&this.alpha){var le=this.channels-Q-1;for(var oe=Q;oe<ie.length;oe+=this.channels)ne[ie[oe]>>ae]+=ie[oe+le]/this.maxValue}else for(var se=Q;se<ie.length;se+=this.channels)ne[ie[se]>>ae]++;return ne}Object.defineProperty(R,"__esModule",{value:!0}),R.getHistogram=function(){var $=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},J=$.maxSlots,ee=void 0===J?256:J,te=$.channel,ae=$.useAlpha,ie=void 0===ae||ae;if(this.checkProcessable("getHistogram",{bitDepth:[8,16]}),void 0===te){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");te=0}return E.call(this,te,{useAlpha:ie,maxSlots:ee})},R.getHistograms=function(){var $=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},J=$.maxSlots,ee=J===void 0?256:J,te=$.useAlpha,ae=!(te!==void 0)||te;this.checkProcessable("getHistograms",{bitDepth:[8,16]});var ie=Array(ae?this.components:this.channels);for(var ne=0;ne<ie.length;ne++)ie[ne]=E.call(this,ne,{useAlpha:ae,maxSlots:ee});return ie};var L=D("new-array"),G=T(L),Z=D("is-integer"),W=T(Z)},{"is-integer":53,"new-array":113}],150:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},L=E.removeClosePoints,G=L===void 0?0:L,Z=E.region,W=Z===void 0?3:Z,Q=E.invert,$=Q!==void 0&&Q,J=E.mask,ee=E.maxEquals,te=ee===void 0?2:ee,ae=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),W*=4;var ie=$?0:1,ne=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],le=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],oe=8>=W?1:2,se=[];for(var de=oe;de<ae.height-oe;de++)for(var ue=oe;ue<ae.width-oe;ue++)if(!(J&&J.getBitXY(ue,de)!==ie)){var he=0,me=0,ce=ae.data[ue+de*ae.width];for(var pe=0;pe<W;pe++)$?ae.data[ue+ne[pe]+(de+le[pe])*ae.width]>ce&&he++:ae.data[ue+ne[pe]+(de+le[pe])*ae.width]<ce&&he++,ae.data[ue+ne[pe]+(de+le[pe])*ae.width]===ce&&me++;he+me===W&&me<=te&&se.push([ue,de])}if(0<G)for(var ge=0;ge<se.length;ge++)for(var fe=ge+1;fe<se.length;fe++)Math.sqrt(Math.pow(se[ge][0]-se[fe][0],2)+Math.pow(se[ge][1]-se[fe][1],2))<G&&(se[ge][0]=se[ge][0]+se[fe][0]>>1,se[ge][1]=se[ge][1]+se[fe][1]>>1,se.splice(fe,1),fe--);return se}},{}],151:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("max",{bitDepth:[8,16]});var G=(0,E.default)(this.channels,-(1/0));for(var Z=0;Z<this.data.length;Z+=this.channels)for(var W=0;W<this.channels;W++)this.data[Z+W]>G[W]&&(G[W]=this.data[Z+W]);return G};var T=D("new-array"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"new-array":113}],152:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var L=this.getHistograms({maxSlots:this.maxValue+1}),G=Array(L.length);for(var Z=0;Z<L.length;Z++){var W=L[Z];G[Z]=(0,T.mean)(W)}return G};var T=D("../../util/histogram")},{"../../util/histogram":258}],153:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var L=this.getHistograms({maxSlots:this.maxValue+1}),G=Array(L.length);for(var Z=0;Z<L.length;Z++){var W=L[Z];G[Z]=(0,T.median)(W)}return G};var T=D("../../util/histogram")},{"../../util/histogram":258}],154:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var G=(0,E.default)(this.channels,+(1/0));for(var Z=0;Z<this.data.length;Z+=this.channels)for(var W=0;W<this.channels;W++)this.data[Z+W]<G[W]&&(G[W]=this.data[Z+W]);return G};var T=D("new-array"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"new-array":113}],155:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("points",{bitDepth:[1]});var E=Array(this.size),L=0;for(var G=0;G<this.width;G++)for(var Z=0;Z<this.height;Z++)1===this.getBitXY(G,Z)&&(E[L++]=[G,Z]);return E.length=L,E}},{}],156:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){if(this===E)return[0,0];for(var L=[0,0],G=this;G;){if(G===E)return L;G.position&&(L[0]+=G.position[0],L[1]+=G.position[1]),G=G.parent}return!1}},{}],157:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("sum",{bitDepth:[8,16]});var G=(0,E.default)(this.channels,0);for(var Z=0;Z<this.data.length;Z+=this.channels)for(var W=0;W<this.channels;W++)G[W]+=this.data[Z+W];return G};var T=D("new-array"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"new-array":113}],158:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){return this.checkProcessable("getSvd",{bitDepth:[1]}),T.DC.SVD(this.points)};var T=D("ml-matrix")},{"ml-matrix":86}],159:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var T=void 0,E=void 0,L=void 0,G=void 0,Z=void 0,W=void 0;"undefined"==typeof self?"undefined"!=typeof I&&I.exports&&function(){R.env=W="node",R.isDifferentOrigin=Z=()=>!1;var Q=D("canvas");R.DOMImage=E=Q.Image,R.Canvas=L=Q,R.ImageData=G=Q.ImageData;var $=D("fs");R.loadBinary=T=function(ee){return new Promise(function(te,ae){$.readFile(ee,function(ie,ne){ie?ae(ie):te(ne.buffer)})})}}():function(){R.env=W="browser";var Q=self.location.origin;R.isDifferentOrigin=Z=function(J){try{var ee=new self.URL(J);return ee.origin!==Q}catch(te){return!1}},R.ImageData=G=self.ImageData,R.DOMImage=E=self.Image,R.Canvas=L=function(J,ee){var te=self.document.createElement("canvas");return te.width=J,te.height=ee,te},R.loadBinary=T=function(J){var ee=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},te=ee.withCredentials,ae=te!==void 0&&te;return new Promise(function(ie,ne){var le=new self.XMLHttpRequest;le.open("GET",J,!0),le.responseType="arraybuffer",le.withCredentials=ae,le.onload=function(oe){200===this.status?ie(this.response):ne(oe)},le.onerror=ne,le.send()})}}(),R.loadBinary=T,R.DOMImage=E,R.Canvas=L,R.ImageData=G,R.isDifferentOrigin=Z,R.env=W},{canvas:void 0,fs:8}],160:[function(D,I,R){"use strict";function T(ha){return ha&&ha.__esModule?ha:{default:ha}}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(ma){var ca={inPlace:!0},ga={stack:!0};ma.extendMethod("invertGetSet",L.default,ca),ma.extendMethod("invertIterator",Z.default,ca),ma.extendMethod("invertPixel",J.default,ca),ma.extendMethod("invertOneLoop",Q.default,ca),ma.extendMethod("invertApply",te.default,ca),ma.extendMethod("invert",le.default,{inPlace:!0,stack:!0}),ma.extendMethod("invertBinaryLoop",ie.default,ca),ma.extendMethod("level",xe.default,ca),ma.extendMethod("add",we.default,ca),ma.extendMethod("subtract",Me.default,ca),ma.extendMethod("multiply",Ie.default,ca),ma.extendMethod("divide",Ce.default,ca),ma.extendMethod("hypotenuse",Pe.default),ma.extendMethod("background",Re.default),ma.extendMethod("flipX",se.default),ma.extendMethod("flipY",ue.default),ma.extendMethod("blurFilter",me.default),ma.extendMethod("medianFilter",pe.default),ma.extendMethod("gaussianFilter",fe.default),ma.extendMethod("sobelFilter",be.default),ma.extendMethod("crop",ze.default,ga),ma.extendMethod("scale",Ee.default,ga),ma.extendMethod("hsv",Fe.default),ma.extendMethod("hsl",qe.default),ma.extendMethod("cmyk",Oe.default),ma.extendMethod("rgba8",Ue.default),ma.extendMethod("grey",Xe.default).extendMethod("gray",Xe.default),ma.extendMethod("mask",Ze.default),ma.extendMethod("pad",Ke.default),ma.extendMethod("resizeBinary",$e.default),ma.extendMethod("colorDepth",et.default),ma.extendMethod("setBorder",nt.default,ca),ma.extendMethod("getRow",kt.default),ma.extendMethod("getColumn",vt.default),ma.extendMethod("getMatrix",jt.default),ma.extendMethod("setMatrix",Dt.default),ma.extendMethod("getPixelsArray",St.default),ma.extendMethod("split",ot.default),ma.extendMethod("getChannel",st.default),ma.extendMethod("combineChannels",ut.default),ma.extendMethod("setChannel",mt.default),ma.extendMethod("getSimilarity",pt.default),ma.extendMethod("getPixelsGrid",_t.default),ma.extendMethod("getBestMatch",yt.default),ma.extendMethod("paintMasks",At.default,ca),ma.extendMethod("paintPoints",Bt.default,ca),ma.extendMethod("extract",Tt.default),ma.extendMethod("convolution",Lt.default),ma.extendMethod("convolutionFft",Vt.default),ma.extendMethod("countAlphaPixels",ua.default),ma.extendMethod("getHistogram",qt.getHistogram).extendProperty("histogram",qt.getHistogram),ma.extendMethod("getHistograms",qt.getHistograms).extendProperty("histograms",qt.getHistograms),ma.extendMethod("getColorHistogram",Ot.default).extendProperty("colorHistogram",Ot.default),ma.extendMethod("getMin",Ut.default).extendProperty("min",Ut.default),ma.extendMethod("getMax",Xt.default).extendProperty("max",Xt.default),ma.extendMethod("getSum",Zt.default).extendProperty("sum",Zt.default),ma.extendMethod("getLocalMaxima",Kt.default),ma.extendMethod("getMedian",ea.default).extendProperty("median",ea.default),ma.extendMethod("getMean",$t.default).extendProperty("mean",$t.default),ma.extendMethod("getPoints",aa.default).extendProperty("points",aa.default),ma.extendMethod("getRelativePosition",na.default),ma.extendMethod("getSvd",oa.default).extendProperty("svd",oa.default)};var E=D("./filter/invertGetSet"),L=T(E),G=D("./filter/invertIterator"),Z=T(G),W=D("./filter/invertOneLoop"),Q=T(W),$=D("./filter/invertPixel"),J=T($),ee=D("./filter/invertApply"),te=T(ee),ae=D("./filter/invertBinaryLoop"),ie=T(ae),ne=D("./filter/invert"),le=T(ne),oe=D("./filter/flipX"),se=T(oe),de=D("./filter/flipY"),ue=T(de),he=D("./filter/blurFilter"),me=T(he),ce=D("./filter/medianFilter"),pe=T(ce),ge=D("./filter/gaussianFilter"),fe=T(ge),_e=D("./filter/sobelFilter"),be=T(_e),ye=D("./filter/level"),xe=T(ye),ke=D("./filter/add"),we=T(ke),ve=D("./filter/subtract"),Me=T(ve),je=D("./filter/hypotenuse"),Pe=T(je),De=D("./filter/multiply"),Ie=T(De),Se=D("./filter/divide"),Ce=T(Se),Ae=D("./filter/background"),Re=T(Ae),Be=D("./transform/crop"),ze=T(Be),Te=D("./transform/scale/scale"),Ee=T(Te),Le=D("./transform/hsv"),Fe=T(Le),Ve=D("./transform/hsl"),qe=T(Ve),Ne=D("./transform/cmyk"),Oe=T(Ne),Ye=D("./transform/rgba8"),Ue=T(Ye),Ge=D("./transform/grey"),Xe=T(Ge),He=D("./transform/mask/mask"),Ze=T(He),We=D("./transform/pad"),Ke=T(We),Qe=D("./transform/resizeBinary"),$e=T(Qe),Je=D("./transform/colorDepth"),et=T(Je),at=D("./utility/setBorder"),nt=T(at),lt=D("./utility/split"),ot=T(lt),rt=D("./utility/getChannel"),st=T(rt),dt=D("./utility/combineChannels"),ut=T(dt),ht=D("./utility/setChannel"),mt=T(ht),ct=D("./utility/getSimilarity"),pt=T(ct),gt=D("./utility/getPixelsGrid"),_t=T(gt),bt=D("./utility/getBestMatch"),yt=T(bt),xt=D("./utility/getRow"),kt=T(xt),wt=D("./utility/getColumn"),vt=T(wt),Mt=D("./utility/getMatrix"),jt=T(Mt),Pt=D("./utility/setMatrix"),Dt=T(Pt),It=D("./utility/getPixelsArray"),St=T(It),Ct=D("./operator/paintMasks"),At=T(Ct),Rt=D("./operator/paintPoints"),Bt=T(Rt),zt=D("./operator/extract"),Tt=T(zt),Et=D("./operator/convolution"),Lt=T(Et),Ft=D("./operator/convolutionFft"),Vt=T(Ft),qt=D("./compute/histogram"),Nt=D("./compute/colorHistogram"),Ot=T(Nt),Yt=D("./compute/min"),Ut=T(Yt),Gt=D("./compute/max"),Xt=T(Gt),Ht=D("./compute/sum"),Zt=T(Ht),Wt=D("./compute/localMaxima"),Kt=T(Wt),Qt=D("./compute/mean"),$t=T(Qt),Jt=D("./compute/median"),ea=T(Jt),ta=D("./compute/points"),aa=T(ta),ia=D("./compute/relativePosition"),na=T(ia),la=D("./compute/svd"),oa=T(la),da=D("./compute/countAlphaPixels"),ua=T(da)},{"./compute/colorHistogram":147,"./compute/countAlphaPixels":148,"./compute/histogram":149,"./compute/localMaxima":150,"./compute/max":151,"./compute/mean":152,"./compute/median":153,"./compute/min":154,"./compute/points":155,"./compute/relativePosition":156,"./compute/sum":157,"./compute/svd":158,"./filter/add":161,"./filter/background":162,"./filter/blurFilter":163,"./filter/divide":164,"./filter/flipX":165,"./filter/flipY":166,"./filter/gaussianFilter":167,"./filter/hypotenuse":168,"./filter/invert":169,"./filter/invertApply":170,"./filter/invertBinaryLoop":171,"./filter/invertGetSet":172,"./filter/invertIterator":173,"./filter/invertOneLoop":174,"./filter/invertPixel":175,"./filter/level":176,"./filter/medianFilter":177,"./filter/multiply":178,"./filter/sobelFilter":179,"./filter/subtract":180,"./operator/convolution":186,"./operator/convolutionFft":187,"./operator/extract":188,"./operator/paintMasks":189,"./operator/paintPoints":190,"./transform/cmyk":199,"./transform/colorDepth":200,"./transform/crop":201,"./transform/grey":202,"./transform/hsl":204,"./transform/hsv":205,"./transform/mask/mask":210,"./transform/pad":223,"./transform/resizeBinary":224,"./transform/rgba8":225,"./transform/scale/scale":227,"./utility/combineChannels":228,"./utility/getBestMatch":230,"./utility/getChannel":231,"./utility/getColumn":232,"./utility/getMatrix":233,"./utility/getPixelsArray":234,"./utility/getPixelsGrid":235,"./utility/getRow":236,"./utility/getSimilarity":237,"./utility/setBorder":238,"./utility/setChannel":239,"./utility/setMatrix":240,"./utility/split":241}],161:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(G){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},W=Z.channels;if(this.checkProcessable("add",{bitDepth:[8,16]}),W=(0,T.validateArrayOfChannels)(this,{channels:W}),G=(0,E.checkNumberArray)(G),!isNaN(G))for(var Q=0;Q<W.length;Q++){var $=W[Q];for(var J=0;J<this.data.length;J+=this.channels)this.data[J+$]=Math.min(this.maxValue,this.data[J+$]+G>>0)}else{if(this.data.length!==G.length)throw new Error("add: the data size is different");for(var ee=0;ee<W.length;ee++){var te=W[ee];for(var ae=0;ae<this.data.length;ae+=this.channels)this.data[ae+te]=Math.max(0,Math.min(this.maxValue,this.data[ae+te]+G[ae+te]>>0))}}};var T=D("../../util/channel"),E=D("../../util/value")},{"../../util/channel":254,"../../util/value":263}],162:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(Z,W,Q){var $=new T.KernelRidgeRegression(Z,W,Q),J=Array(this.size);for(var ee=0;ee<this.width;ee++)for(var te=0;te<this.height;te++)J[te*this.width+ee]=[ee,te];var ae=$.predict(J),G=L.default.createFrom(this);for(var ie=0;ie<this.size;ie++)G.data[ie]=Math.min(this.maxValue,Math.max(0,ae[ie][0]));return G};var T=D("ml-regression"),E=D("../Image"),L=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../Image":145,"ml-regression":98}],163:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=G.radius,W=void 0===Z?1:Z;if(this.checkProcessable("meanFilter",{components:[1],bitDepth:[8,16]}),1>W)throw new Error("Number of neighbors should be grater than 0");var Q=2*W+1,$=Array(Q*Q);for(var J=0;J<$.length;J++)$[J]=1;return E.default.call(this,$)};var T=D("../operator/convolutionFft"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../operator/convolutionFft":187}],164:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(G){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},W=Z.channels;if(this.checkProcessable("divide",{bitDepth:[8,16]}),W=(0,T.validateArrayOfChannels)(this,{channels:W}),G=(0,E.checkNumberArray)(G),!isNaN(G))for(var Q=0;Q<W.length;Q++){var $=W[Q];for(var J=0;J<this.data.length;J+=this.channels)this.data[J+$]=Math.min(this.maxValue,this.data[J+$]/G>>0)}else{if(this.data.length!==G.length)throw new Error("divide: the: the data size is different");for(var ee=0;ee<W.length;ee++){var te=W[ee];for(var ae=0;ae<this.data.length;ae+=this.channels)this.data[ae+te]=Math.max(0,Math.min(this.maxValue,this.data[ae+te]/G[ae+te]>>0))}}};var T=D("../../util/channel"),E=D("../../util/value")},{"../../util/channel":254,"../../util/value":263}],165:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(var E=0;E<this.height;E++){var L=E*this.width*this.channels;for(var G=0;G<Math.floor(this.width/2);G++){var Z=G*this.channels+L,W=(this.width-G-1)*this.channels+L;for(var Q=0;Q<this.channels;Q++){var $=this.data[Z+Q];this.data[Z+Q]=this.data[W+Q],this.data[W+Q]=$}}}return this}},{}],166:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(var E=0;E<Math.floor(this.height/2);E++)for(var L=0;L<this.width;L++){var G=L*this.channels+E*this.width*this.channels,Z=L*this.channels+(this.height-1-E)*this.channels*this.width;for(var W=0;W<this.channels;W++){var Q=this.data[G+W];this.data[G+W]=this.data[Z+W],this.data[Z+W]=Q}}return this}},{}],167:[function(D,I,R){"use strict";function T(Z,W){if(1>Z)throw new RangeError("Radius should be grater than 0");var Q=2*Z+1,$=Array(Q*Q),J=2*(W*W),ee=Math.PI*J;for(var te=0;te<=Z;te++)for(var ae=te;ae<=Z;ae++){var ie=Math.exp(-(te*te+ae*ae)/J)/ee;$[(te+Z)*Q+(ae+Z)]=ie,$[(te+Z)*Q+(-ae+Z)]=ie,$[(-te+Z)*Q+(ae+Z)]=ie,$[(-te+Z)*Q+(-ae+Z)]=ie,$[(ae+Z)*Q+(te+Z)]=ie,$[(ae+Z)*Q+(-te+Z)]=ie,$[(-ae+Z)*Q+(te+Z)]=ie,$[(-ae+Z)*Q+(-te+Z)]=ie}return $}function E(Z){if(0>=Z)throw new RangeError("Sigma should be grater than 0");for(var W=2*(Z*Z),Q=Math.PI*W,$=1/Q,J=$,ee=0;0.99>J;){ee++,$=Math.exp(-(ee*ee)/W)/Q,J+=4*$;for(var te=1;te<ee;te++)$=Math.exp(-(te*te+ee*ee)/W)/Q,J+=8*$;$=4*Math.exp(-(2*ee*ee)/W)/Q,J+=$}if(1<J)throw new Error("unexpected sum over 1");return T(ee,Z)}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var W=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Q=W.radius,$=void 0===Q?1:Q,J=W.sigma,ee=W.channels,te=W.border,ae=void 0===te?"copy":te,ie=W.algorithm,ne=void 0===ie?"auto":ie;this.checkProcessable("gaussian",{bitDepth:[8,16]});var le=void 0;return J?le=E(J):(J=0.3*($-1)+0.8,le=T($,J)),G.default.call(this,le,{border:ae,channels:ee,algorithm:ne})};var L=D("../operator/convolution"),G=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../operator/convolution":186}],168:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.bitDepth,$=void 0===Q?this.bitDepth:Q,J=W.channels;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==Z.width||this.height!==Z.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==Z.alpha||this.bitDepth!==Z.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==Z.channels)throw new Error("hypotenuse: both images must have the same number of channels");var ee=L.default.createFrom(this,{bitDepth:$});J=(0,T.validateArrayOfChannels)(this,{channels:J});var te=ee.isClamped;for(var ae=0;ae<J.length;ae++){var ie=J[ae];for(var ne=ie;ne<this.data.length;ne+=this.channels){var le=Math.sqrt(this.data[ne]*this.data[ne]+Z.data[ne]*Z.data[ne]);ee.data[ne]=te?Math.min(Math.max(Math.round(le),0),ee.maxValue):le}}return ee};var T=D("../../util/channel"),E=D("../Image"),L=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../../util/channel":254,"../Image":145}],169:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var L=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},G=L.channels;if(this.checkProcessable("invertOneLoop",{bitDepth:[1,8,16]}),1===this.bitDepth){var Z=this.data;for(var W=0;W<Z.length;W++)Z[W]=~Z[W]}else{G=(0,T.validateArrayOfChannels)(this,{channels:G});for(var Q=0;Q<G.length;Q++){var $=G[Q];for(var J=$;J<this.data.length;J+=this.channels)this.data[J]=this.maxValue-this.data[J]}}};var T=D("../../util/channel")},{"../../util/channel":254}],170:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){if(1===this.bitDepth){var E=this.data;for(var L=0;L<E.length;L++)E[L]=~E[L]}else this.checkProcessable("invertApply",{bitDepth:[8,16]}),this.apply(function(G){for(var Z=0;Z<this.components;Z++)this.data[G+Z]=this.maxValue-this.data[G+Z]})}},{}],171:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("invertBinaryLoop",{bitDepth:[1]});for(var E=0;E<this.size;E++)this.toggleBit(E)}},{}],172:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth){var E=this.data;for(var L=0;L<E.length;L++)E[L]=~E[L]}else for(var G=0;G<this.width;G++)for(var Z=0;Z<this.height;Z++)for(var W=0;W<this.components;W++){var Q=this.getValueXY(G,Z,W);this.setValueXY(G,Z,W,this.maxValue-Q)}}},{}],173:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){if(this.checkProcessable("invert",{bitDepth:[1,8,16]}),1===this.bitDepth){var E=this.data;for(var L=0;L<E.length;L++)E[L]=~E[L]}else for(var G of this.pixels()){var Z=G.index,W=G.pixel;for(var Q=0;Q<this.components;Q++)this.setValue(Z,Q,this.maxValue-W[Q])}}},{}],174:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("invertOneLoop",{bitDepth:[8,16]});var E=this.data;for(var L=0;L<E.length;L+=this.channels)for(var G=0;G<this.components;G++)E[L+G]=this.maxValue-E[L+G]}},{}],175:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("invertPixel",{bitDepth:[8,16]});for(var E=0;E<this.width;E++)for(var L=0;L<this.height;L++){var G=this.getPixelXY(E,L);for(var Z=0;Z<this.components;Z++)G[Z]=this.maxValue-G[Z];this.setPixelXY(E,L,G)}}},{}],176:[function(D,I,R){"use strict";function T(Z,W,Q,$){var J=0.00001,ee=Array(Z.channels);for(var te of $)ee[te]=0===W[te]&&Q[te]===Z.maxValue?0:Q[te]===W[te]?0:(Z.maxValue+1-J)/(Q[te]-W[te]),W[te]+=(0.5-J/2)/ee[te];for(var ae=0;ae<$.length;ae++){var ie=$[ae];if(0!==ee[ie])for(var ne=0;ne<Z.data.length;ne+=Z.channels)Z.data[ne+ie]=Math.min(Math.max(0,0|(Z.data[ne+ie]-W[ie])*ee[ie]+0.5),Z.maxValue)}}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var W=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Q=W.algorithm,$=void 0===Q?"range":Q,J=W.channels,ee=W.min,te=void 0===ee?this.min:ee,ae=W.max,ie=void 0===ae?this.max:ae;switch(this.checkProcessable("level",{bitDepth:[8,16]}),J=(0,G.validateArrayOfChannels)(this,{channels:J}),$){case"range":0>te&&(te=0),ie>this.maxValue&&(ie=this.maxValue),Array.isArray(te)||(te=(0,L.default)(J.length,te)),Array.isArray(ie)||(ie=(0,L.default)(J.length,ie)),T(this,te,ie,J);break;default:throw new Error("level: algorithm not implement: "+$);}};var E=D("new-array"),L=function(W){return W&&W.__esModule?W:{default:W}}(E),G=D("../../util/channel")},{"../../util/channel":254,"new-array":113}],177:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var W=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Q=W.radius,$=void 0===Q?1:Q,J=W.channels,ee=W.border,te=void 0===ee?"copy":ee;if(this.checkProcessable("median",{bitDepth:[8,16]}),1>$)throw new Error("Kernel radius should be greater than 0");J=(0,T.validateArrayOfChannels)(this,J,!0);var ae=$,ie=$,ne=G.default.createFrom(this),le=(2*ae+1)*(2*ie+1),oe=Math.floor(le/2),se=Array(le);for(var de=0;de<J.length;de++){var ue=J[de];for(var he=ie;he<this.height-ie;he++)for(var me=ae;me<this.width-ae;me++){var ce=0;for(var pe=-ie;pe<=ie;pe++)for(var ge=-ae;ge<=ae;ge++){var fe=((he+pe)*this.width+me+ge)*this.channels+ue;se[ce++]=this.data[fe]}var _e=(he*this.width+me)*this.channels+ue,be=se.sort(E.asc)[oe];ne.data[_e]=be}}if(this.alpha&&!J.includes(this.channels))for(var ye=this.components;ye<this.data.length;ye=ye+this.channels)ne.data[ye]=this.data[ye];return ne.setBorder({size:[ae,ie],algorithm:te}),ne};var T=D("../../util/channel"),E=D("num-sort"),L=D("../Image"),G=function(W){return W&&W.__esModule?W:{default:W}}(L)},{"../../util/channel":254,"../Image":145,"num-sort":114}],178:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(G){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},W=Z.channels;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),0>=G)throw new Error("multiply: the value must be greater than 0");if(W=(0,T.validateArrayOfChannels)(this,{channels:W}),G=(0,E.checkNumberArray)(G),!isNaN(G))for(var Q=0;Q<W.length;Q++){var $=W[Q];for(var J=0;J<this.data.length;J+=this.channels)this.data[J+$]=Math.min(this.maxValue,this.data[J+$]*G>>0)}else{if(this.data.length!==G.length)throw new Error("multiply: the data size is different");for(var ee=0;ee<W.length;ee++){var te=W[ee];for(var ae=0;ae<this.data.length;ae+=this.channels)this.data[ae+te]=Math.max(0,Math.min(this.maxValue,this.data[ae+te]*G[ae+te]>>0))}}};var T=D("../../util/channel"),E=D("../../util/value")},{"../../util/channel":254,"../../util/value":263}],179:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var Z=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},W=Z.kernelX,Q=W===void 0?L.GRADIENT_X:W,$=Z.kernelY,J=$===void 0?L.GRADIENT_Y:$,ee=Z.border,te=ee===void 0?"copy":ee,ae=Z.channels;this.checkProcessable("sobel",{bitDepth:[8,16]});var ie=E.default.call(this,Q,{channels:ae,border:te,bitDepth:32}),ne=E.default.call(this,J,{channels:ae,border:te,bitDepth:32});return ie.hypotenuse(ne,{bitDepth:this.bitDepth,channels:ae})};var T=D("../operator/convolution"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(T),L=D("../../util/kernels")},{"../../util/kernels":260,"../operator/convolution":186}],180:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(G){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},W=Z.channels;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),W=(0,T.validateArrayOfChannels)(this,{channels:W}),G=(0,E.checkNumberArray)(G),!isNaN(G))for(var Q=0;Q<W.length;Q++){var $=W[Q];for(var J=0;J<this.data.length;J+=this.channels)this.data[J+$]=Math.max(0,this.data[J+$]-G>>0)}else{if(this.data.length!==G.length)throw new Error("substract: the data size is different");for(var ee=0;ee<W.length;ee++){var te=W[ee];for(var ae=0;ae<this.data.length;ae+=this.channels)this.data[ae+te]=Math.max(0,Math.min(this.maxValue,this.data[ae+te]-G[ae+te]>>0))}}};var T=D("../../util/channel"),E=D("../../util/value")},{"../../util/channel":254,"../../util/value":263}],181:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getKind=function(W){return G[W]},R.getTheoreticalPixelArraySize=function(W){var Q=W.channels*W.size;return 1===W.bitDepth&&(Q=Math.ceil(Q/8)),Q},R.createPixelArray=function(W){var Q=W.channels*W.size,$=void 0;switch(W.bitDepth){case 1:$=new Uint8Array(Math.ceil(Q/8));break;case 8:$=new Uint8ClampedArray(Q);break;case 16:$=new Uint16Array(Q);break;case 32:$=new Float32Array(Q);break;default:throw new Error("Cannot create pixel array for bit depth "+W.bitDepth);}if(W.alpha)for(var J=W.components;J<$.length;J+=W.channels)$[J]=W.maxValue;W.data=$};var T=D("./kindNames"),E=function(W){if(W&&W.__esModule)return W;var Q={};if(null!=W)for(var $ in W)Object.prototype.hasOwnProperty.call(W,$)&&(Q[$]=W[$]);return Q.default=W,Q}(T),L=D("./model/model"),G={};G[E.BINARY]={components:1,alpha:0,bitDepth:1,colorModel:L.GREY},G[E.GREYA]={components:1,alpha:1,bitDepth:8,colorModel:L.GREY},G[E.GREY]={components:1,alpha:0,bitDepth:8,colorModel:L.GREY},G[E.RGBA]={components:3,alpha:1,bitDepth:8,colorModel:L.RGB},G[E.RGB]={components:3,alpha:0,bitDepth:8,colorModel:L.RGB},G[E.CMYK]={components:4,alpha:0,bitDepth:8,colorModel:L.CMYK},G[E.CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:L.CMYK}},{"./kindNames":182,"./model/model":185}],182:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.BINARY="BINARY",R.GREY="GREY",R.GREYA="GREYA",R.RGB="RGB",R.RGBA="RGBA",R.CMYK="CMYK",R.CMYKA="CMYKA"},{}],183:[function(D,I,R){"use strict";function T(ce){return ce&&ce.__esModule?ce:{default:ce}}function E(ce){var pe=new Uint8Array(ce.length);for(var ge=0;ge<ce.length;ge++)pe[ge]=ce.charCodeAt(ge);return pe}function L(ce){return(255&ce)<<8|255&ce>>8}function G(ce){var pe=new ne.PNGDecoder(ce),ge=pe.decode(),fe=ge.bitDepth,_e=ge.data.buffer,be=void 0;if(8===fe)be=new Uint8ClampedArray(_e);else if(16===fe){be=new Uint16Array(_e);for(var ye=0;ye<be.length;ye++)be[ye]=L(be[ye])}var xe=ge.colourType,ke=void 0,we=0;switch(xe){case 0:ke=1;break;case 2:ke=3;break;case 4:ke=1,we=1;break;case 6:ke=3,we=1;break;default:throw new Error(`Unexpected colourType: ${xe}`);}return new ee.default(ge.width,ge.height,be,{components:ke,alpha:we,bitDepth:fe})}function Z(ce){var pe=(0,oe.decode)(ce);return 1===pe.length?Q(pe[0]):new ae.default(pe.map(Q))}function W(ce){var pe={tiff:ce};return ce.exif&&(pe.exif=ce.exif),ce.gps&&(pe.gps=ce.gps),pe}function Q(ce){return new ee.default(ce.width,ce.height,ce.data,{components:1,alpha:0,colorModel:null,bitDepth:ce.bitsPerSample,meta:W(ce)})}function $(ce,pe){return pe=pe||{},new Promise(function(ge,fe){var _e=new ie.DOMImage;(0,ie.isDifferentOrigin)(ce)&&(_e.crossOrigin="Anonymous"),_e.onload=function(){var be=_e.width,ye=_e.height,xe=new ie.Canvas(be,ye),ke=xe.getContext("2d");ke.drawImage(_e,0,0,be,ye);var we=ke.getImageData(0,0,be,ye).data;ge(new ee.default(be,ye,we,pe))},_e.onerror=function(){fe(new Error("Could not load "+ce))},_e.src=ce})}Object.defineProperty(R,"__esModule",{value:!0}),R.loadURL=function(pe,ge){var fe=pe.slice(0,64).match(me),_e=void 0;return _e=fe?Promise.resolve(E((0,de.default)(pe.slice(fe[0].length)))):(0,ie.loadBinary)(pe,ge),_e.then(function(be){var ye=new Uint8Array(be),xe=(0,he.default)(ye);if(xe)switch(xe.ext){case"png":return G(be);case"jpg":{var ke=(0,le.decode)(be),we=void 0;return ke.exif&&(we=W(ke.exif)),$(pe,{meta:we})}case"tif":return Z(be);}return $(pe)})};var J=D("./Image"),ee=T(J),te=D("../stack/Stack"),ae=T(te),ie=D("./environment"),ne=D("fast-png"),le=D("fast-jpeg"),oe=D("tiff"),se=D("atob-lite"),de=T(se),ue=D("image-type"),he=T(ue),me=/^data:[a-z]+\/([a-z]+);base64,/},{"../stack/Stack":245,"./Image":145,"./environment":159,"atob-lite":5,"fast-jpeg":37,"fast-png":39,"image-type":46,tiff:137}],184:[function(D,I,R){"use strict";function T($){W||(W=new L.default(1,1));var J=Z.get($);return J||(J=new Q($),Z.set($,J)),J}Object.defineProperty(R,"__esModule",{value:!0}),R.canWrite=function(J){return"node"===G.env&&"image/png"!==J?!1:T(J).canWrite()},R.getType=function(J){return J.includes("/")||(J="image/"+J),J};var E=D("./Image"),L=function(J){return J&&J.__esModule?J:{default:J}}(E),G=D("./environment"),Z=new Map,W=void 0;class Q{constructor($){this.type=$,this._canWrite=null}canWrite(){return null===this._canWrite&&(this._canWrite=W.toDataURL(this.type).startsWith("data:"+this.type)),this._canWrite}}},{"./Image":145,"./environment":159}],185:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.RGB="RGB",R.HSL="HSL",R.HSV="HSV",R.CMYK="CMYK",R.GREY="GREY"},{}],186:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(Q){var $=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},J=$.channels,ee=$.bitDepth,te=$.normalize,ae=void 0!==te&&te,ie=$.divisor,ne=void 0===ie?1:ie,le=$.border,oe=void 0===le?"copy":le,se=$.algorithm,de=void 0===se?"auto":se,ue=E.default.createFrom(this,{bitDepth:ee});J=(0,L.validateArrayOfChannels)(this,J,!0);var he=(0,G.validateKernel)(Q);Q=he.kernel,"auto"===de&&(9<Q.length||9<Q[0].length?de="fft":de="direct"),(4096<this.width||4096<this.height)&&(de="direct");var me=Math.floor(Q.length/2),ce=Math.floor(Q[0].length/2),pe=ue.isClamped,ge=Array(this.height*this.width),fe=void 0,_e=void 0,be=void 0,ye=void 0,xe=void 0,ke=void 0;for(ye=0;ye<J.length;ye++){for(xe=J[ye],be=0;be<this.height;be++)for(_e=0;_e<this.width;_e++)fe=be*this.width+_e,ge[fe]=this.data[fe*this.channels+xe];for(ke="direct"===de?Z.direct(ge,Q,{rows:this.height,cols:this.width,normalize:ae,divisor:ne}):Z.fft(ge,Q,{rows:this.height,cols:this.width,normalize:ae,divisor:ne}),be=0;be<this.height;be++)for(_e=0;_e<this.width;_e++)fe=be*this.width+_e,ue.data[fe*this.channels+xe]=pe?Math.min(Math.max(ke[fe],0),ue.maxValue):ke[fe]}if(this.alpha&&!J.includes(this.channels))for(_e=this.components;_e<this.data.length;_e=_e+this.channels)ue.data[_e]=this.data[_e];return"periodic"!==oe&&ue.setBorder({size:[ce,me],algorithm:oe}),ue};var T=D("../Image"),E=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(T),L=D("../../util/channel"),G=D("../../util/kernel"),Z=D("ml-matrix-convolution")},{"../../util/channel":254,"../../util/kernel":259,"../Image":145,"ml-matrix-convolution":77}],187:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){var L=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return L.algorithm="fft",this.convolution(E,L)}},{}],188:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(G){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},W=Z.position;if(this.checkProcessable("extract",{bitDepth:[8,16]}),!W&&(W=G.getRelativePosition(this),!W))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");var L=E.default.createFrom(this,{width:G.width,height:G.height,alpha:1,position:W,parent:this});for(var Q=0;Q<G.width;Q++)for(var $=0;$<G.height;$++){for(var J=0;J<this.channels;J++){var ee=this.getValueXY(Q+W[0],$+W[1],J);L.setValueXY(Q,$,J,ee)}G.getBitXY(Q,$)||L.setValueXY(Q,$,this.components,0)}return L};var T=D("../Image"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../Image":145}],189:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(G){var Z=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},W=Z.color,Q=W===void 0?"red":W,$=Z.colors,J=Z.alpha,ee=J===void 0?255:J,te=Z.randomColors,ae=te!==void 0&&te,ie=Z.distinctColors,ne=ie!==void 0&&ie,le=Z.labels,oe=le===void 0?[]:le,se=Z.labelsPosition,de=se===void 0?[]:se,ue=Z.labelColor,he=ue===void 0?"blue":ue,me=Z.labelFont,ce=me===void 0?"12px Helvetica":me;this.checkProcessable("paintMasks",{channels:4,bitDepth:[8,16],colorModel:T.RGB}),Q&&!Array.isArray(Q)&&(Q=(0,E.css2array)(Q)),$&&($=$.map(function(Me){return Array.isArray(Me)?Me:(0,E.css2array)(Me)})),Array.isArray(G)||(G=[G]),ne&&($=(0,E.getDistinctColors)(G.length));for(var pe=0;pe<G.length;pe++){var ge=G[pe];$?Q=$[pe%$.length]:ae&&(Q=(0,E.getRandomColor)());for(var fe=0;fe<ge.width;fe++)for(var _e=0;_e<ge.height;_e++)if(ge.getBitXY(fe,_e))for(var be=0;be<Math.min(this.components,Q.length);be++)if(255===ee)this.setValueXY(fe+ge.position[0],_e+ge.position[1],be,Q[be]);else{var ye=this.getValueXY(fe+ge.position[0],_e+ge.position[1],be);ye=Math.round((ye*(255-ee)+Q[be]*ee)/255),this.setValueXY(fe+ge.position[0],_e+ge.position[1],be,ye)}}if(Array.isArray(oe)&&0<oe.length){var xe=this.getCanvas({originalData:!0}),ke=xe.getContext("2d");ke.fillStyle=he,ke.font=ce;for(var we=0;we<Math.min(G.length,oe.length);we++){var ve=de[we]?de[we]:G[we].position;ke.fillText(oe[we],ve[0],ve[1])}this.data=ke.getImageData(0,0,this.width,this.height).data}};var T=D("../model/model"),E=D("../../util/color")},{"../../util/color":255,"../model/model":185}],190:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(Z){var W=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},Q=W.color,$=Q===void 0?[this.maxValue,0,0]:Q,J=W.shape;this.checkProcessable("paintPoints",{components:3,bitDepth:[8,16],colorModel:T.RGB});var ee=new L.default(J).getPoints(),te=Math.min(this.channels,$.length);for(var ae=0;ae<Z.length;ae++){var ie=Z[ae][0],ne=Z[ae][1];for(var le=0;le<ee.length;le++){var oe=ee[le][0],se=ee[le][1];if(0<=ie+oe&&0<=ne+se&&ie+oe<this.width&&ne+se<this.height){var de=(ie+oe+(ne+se)*this.width)*this.channels;for(var ue=0;ue<te;ue++)this.data[de+ue]=$[ue]}}}};var T=D("../model/model"),E=D("../../util/shape"),L=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../../util/shape":262,"../model/model":185}],191:[function(D,I,R){"use strict";function T(le){return le&&le.__esModule?le:{default:le}}function E(le){var oe=le.map,se=oe.data,de=new Set,ue=new Map,he=new Set,me=[1,0,-1,0],ce=[0,1,0,-1];for(var pe=le.minX;pe<=le.maxX;pe++)for(var ge=le.minY;ge<=le.maxY;ge++){var fe=pe+ge*oe.width;if(se[fe]===le.id)for(var _e=0;4>_e;_e++){var be=pe+me[_e],ye=ge+ce[_e];if(0<=be&&0<=ye&&be<oe.width&&ye<oe.height){var xe=be+ye*oe.width;if(se[xe]!==le.id&&!he.has(xe)){he.add(xe),de.add(se[xe]);var ke=ue.get(se[xe]);ke?ue.set(se[xe],++ke):ue.set(se[xe],1)}}}}var we=Array.from(de),ve=we.map(function(Me){return ue.get(Me)});return{ids:we,lengths:ve}}function L(le){var oe=new Set,se=le.map,de=se.data;for(var ue of[0,le.height-1])for(var he=0;he<le.width;he++){var me=(ue+le.minY)*se.width+he+le.minX;if(0<he-le.minX&&de[me]===le.id&&de[me-1]!==le.id){var ce=de[me-1];oe.add(ce)}if(1<se.width-he-le.minX&&de[me]===le.id&&de[me+1]!==le.id){var pe=de[me+1];oe.add(pe)}}for(var ge of[0,le.width-1])for(var fe=0;fe<le.height;fe++){var _e=(fe+le.minY)*se.width+ge+le.minX;if(0<fe-le.minY&&de[_e]===le.id&&de[_e-se.width]!==le.id){var be=de[_e-se.width];oe.add(be)}if(1<se.height-fe-le.minY&&de[_e]===le.id&&de[_e+se.width]!==le.id){var ye=de[_e+se.width];oe.add(ye)}}return Array.from(oe)}function G(le){var oe=0,se=le.map,de=se.data,ue=[0];1<le.height&&(ue[1]=le.height-1);for(var he of ue)for(var me=1;me<le.width-1;me++){var ce=(he+le.minY)*se.width+me+le.minX;de[ce]===le.id&&oe++}var pe=[0];1<le.width&&(pe[1]=le.width-1);for(var ge of pe)for(var fe=0;fe<le.height;fe++){var _e=(fe+le.minY)*se.width+ge+le.minX;de[_e]===le.id&&oe++}return oe}function Z(le){var oe=0,se=le.map,de=se.data;for(var ue=1;ue<le.width-1;ue++)for(var he=1;he<le.height-1;he++){var me=(he+le.minY)*se.width+ue+le.minX;de[me]===le.id&&(de[me-1]!==le.id||de[me+1]!==le.id||de[me-se.width]!==le.id||de[me+se.width]!==le.id)&&oe++}return oe+le.box}function W(le){var oe=0,se=le.map,de=se.data;for(var ue=1;ue<le.width-1;ue++)for(var he=1;he<le.height-1;he++){var me=(he+le.minY)*se.width+ue+le.minX;de[me]===le.id&&(le.externalIDs.includes(de[me-1])||le.externalIDs.includes(de[me+1])||le.externalIDs.includes(de[me-se.width])||le.externalIDs.includes(de[me+se.width]))&&oe++}return oe+le.box}function Q(le){var oe=[le.id],se=le.map,de=se.data;if(2<le.height)for(var ue=0;ue<le.width;ue++){var he=le.minY*se.width+ue+le.minX;if(oe.includes(de[he])){var me=de[he+se.width];oe.includes(me)||le.boxIDs.includes(me)||oe.push(me)}}var ce=[,,,,];for(var pe=1;pe<le.width-1;pe++)for(var ge=1;ge<le.height-1;ge++){var fe=(ge+le.minY)*se.width+pe+le.minX;if(oe.includes(de[fe])){ce[0]=de[fe-1],ce[1]=de[fe+1],ce[2]=de[fe-se.width],ce[3]=de[fe+se.width];for(var _e=0;4>_e;_e++){var be=ce[_e];oe.includes(be)||le.boxIDs.includes(be)||oe.push(be)}}}return oe}Object.defineProperty(R,"__esModule",{value:!0});var $=D("../Image"),J=T($),ee=D("../kindNames"),te=function(oe){if(oe&&oe.__esModule)return oe;var se={};if(null!=oe)for(var de in oe)Object.prototype.hasOwnProperty.call(oe,de)&&(se[de]=oe[de]);return se.default=oe,se}(ee),ae=D("../../util/shape"),ie=T(ae);class ne{constructor(le,oe){this.map=le,this.id=oe,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(){var le=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},oe=le.scale,se=void 0===oe?1:oe,de=le.kind,ue=void 0===de?"":de,he=void 0;return he="contour"===ue?this.contourMask:"box"===ue?this.boxMask:"filled"===ue?this.filledMask:"center"===ue?this.centerMask:this.mask,1>se&&(he=he.resizeBinary(se),he.parent=this.mask.parent,he.position[0]+=this.minX,he.position[1]+=this.minY),he}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center?this.computed.center:this.computed.center=[this.width/2>>0,this.height/2>>0]}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){var le=this.borderIDs,oe=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];var se=this.internalIDs;for(var de=0;de<le.length;de++)se.includes(le[de])||(this.computed.externalIDs.push(le[de]),this.computed.externalLengths.push(oe[de]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){var le=E(this);this.computed.borderIDs=le.ids,this.computed.borderLengths=le.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs?this.computed.boxIDs:this.computed.boxIDs=L(this)}get internalIDs(){return this.computed.internalIDs?this.computed.internalIDs:this.computed.internalIDs=Q(this)}get box(){return this.computed.box?this.computed.box:this.computed.box=G(this)}get external(){return this.computed.external?this.computed.external:this.computed.external=W(this)}get border(){return this.computed.border?this.computed.border:this.computed.border=Z(this)}get contourMask(){if(this.computed.contourMask)return this.computed.contourMask;var le=new J.default(this.width,this.height,{kind:te.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var oe=0;oe<this.width;oe++)for(var se=0;se<this.height;se++)this.map.data[oe+this.minX+(se+this.minY)*this.map.width]===this.id&&(0<oe&&oe<this.width-1&&0<se&&se<this.height-1?(this.map.data[oe-1+this.minX+(se+this.minY)*this.map.width]!==this.id||this.map.data[oe+1+this.minX+(se+this.minY)*this.map.width]!==this.id||this.map.data[oe+this.minX+(se-1+this.minY)*this.map.width]!==this.id||this.map.data[oe+this.minX+(se+1+this.minY)*this.map.width]!==this.id)&&le.setBitXY(oe,se):le.setBitXY(oe,se));return this.computed.contour=le}get boxMask(){if(this.computed.boxMask)return this.computed.boxMask;var le=new J.default(this.width,this.height,{kind:te.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var oe=0;oe<this.width;oe++)le.setBitXY(oe,0),le.setBitXY(oe,this.height-1);for(var se=0;se<this.height;se++)le.setBitXY(0,se),le.setBitXY(this.width-1,se);return this.computed.boxMask=le}get mask(){if(this.computed.mask)return this.computed.mask;var le=new J.default(this.width,this.height,{kind:te.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var oe=0;oe<this.width;oe++)for(var se=0;se<this.height;se++)this.map.data[oe+this.minX+(se+this.minY)*this.map.width]===this.id&&le.setBitXY(oe,se);return this.computed.mask=le}get filledMask(){if(this.computed.filledMask)return this.computed.filledMask;var le=new J.default(this.width,this.height,{kind:te.BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(var oe=0;oe<this.width;oe++)for(var se=0;se<this.height;se++){var de=oe+this.minX+(se+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[de])&&le.setBitXY(oe,se)}return this.computed.filledMask=le}get centerMask(){if(this.computed.centerMask)return this.computed.centerMask;var le=new ie.default({kind:"smallCross"}).getMask();return le.parent=this.map.parent,le.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=le}get points(){if(this.computed.points)return this.computed.points;var le=[];for(var oe=0;oe<this.height;oe++)for(var se=0;se<this.width;se++){var de=(oe+this.minY)*this.map.width+se+this.minX;this.map.data[de]===this.id&&le.push([se,oe])}return this.computed.points=le}get maxLengthPoints(){if(this.computed.maxLengthPoints)return this.computed.maxLengthPoints;var le=0,oe=void 0,se=this.points;for(var de=0;de<se.length;de++)for(var ue=de+1;ue<se.length;ue++){var he=Math.pow(se[de][0]-se[ue][0],2)+Math.pow(se[de][1]-se[ue][1],2);he>=le&&(le=he,oe=[se[de],se[ue]])}return this.computed.maxLengthPoints=oe}get maxLength(){if(this.computed.maxLength)return this.computed.maxLength;var le=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));return this.computed.maxLength=le}get angle(){if(this.computed.angle)return this.computed.angle;var le=this.maxLengthPoints,oe=180*-Math.atan2(le[0][1]-le[1][1],le[0][0]-le[1][0])/Math.PI;return this.computed.angle=oe}}R.default=ne},{"../../util/shape":262,"../Image":145,"../kindNames":182}],192:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var T=D("./Roi"),E=function(G){return G&&G.__esModule?G:{default:G}}(T);R.default=class{constructor(G,Z){this.roiMap=G,this.options=Z,this.roi=this.createRoi()}createRoi(){var G=this.roiMap.data,Z={};this.roiMap.positive=0,this.roiMap.negative=0;for(var W=0;W<G.length;W++)G[W]&&!Z[G[W]]&&(Z[G[W]]=!0,0<G[W]?this.roiMap.positive++:this.roiMap.negative++);var Q={};for(var $ in Z)Q[$]=new E.default(this.roiMap,1*$);var J=this.roiMap.width,ee=this.roiMap.height;for(var te=0;te<J;te++)for(var ae=0;ae<ee;ae++){var ie=ae*J+te;if(0!==G[ie]){var ne=G[ie];te<Q[ne].minX&&(Q[ne].minX=te),te>Q[ne].maxX&&(Q[ne].maxX=te),ae<Q[ne].minY&&(Q[ne].minY=ae),ae>Q[ne].maxY&&(Q[ne].maxY=ae),Q[ne].meanX+=te,Q[ne].meanY+=ae,Q[ne].surface++}}var le=[];for(var oe in Z)Q[oe].meanX/=Q[oe].surface,Q[oe].meanY/=Q[oe].surface,le.push(Q[oe]);return le}}},{"./Roi":191}],193:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});class T{constructor(E,L){this.parent=E,this.width=E.width,this.height=E.height,this.data=L,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}}R.default=T},{}],194:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(G){function Z(se,de){var ue=0,he=0,me=G.getBitXY(se,de),ce=me?++ee:--te;for(ie[0]=se,ne[0]=de;ue<=he;){var pe=ie[ue&ae],ge=ne[ue&ae];if(J[ge*G.width+pe]=ce,0<pe&&0===J[ge*G.width+pe-1]&&G.getBitXY(pe-1,ge)===me&&(he++,ie[he&ae]=pe-1,ne[he&ae]=ge,J[ge*G.width+pe-1]=-32768),0<ge&&0===J[(ge-1)*G.width+pe]&&G.getBitXY(pe,ge-1)===me&&(he++,ie[he&ae]=pe,ne[he&ae]=ge-1,J[(ge-1)*G.width+pe]=-32768),pe<G.width-1&&0===J[ge*G.width+pe+1]&&G.getBitXY(pe+1,ge)===me&&(he++,ie[he&ae]=pe+1,ne[he&ae]=ge,J[ge*G.width+pe+1]=-32768),ge<G.height-1&&0===J[(ge+1)*G.width+pe]&&G.getBitXY(pe,ge+1)===me&&(he++,ie[he&ae]=pe,ne[he&ae]=ge+1,J[(ge+1)*G.width+pe]=-32768),$&&(0<pe&&0<ge&&0===J[(ge-1)*G.width+pe-1]&&G.getBitXY(pe-1,ge-1)===me&&(he++,ie[he&ae]=pe-1,ne[he&ae]=ge-1,J[(ge-1)*G.width+pe-1]=-32768),pe<G.width-1&&0<ge&&0===J[(ge-1)*G.width+pe+1]&&G.getBitXY(pe+1,ge-1)===me&&(he++,ie[he&ae]=pe+1,ne[he&ae]=ge-1,J[(ge-1)*G.width+pe+1]=-32768),0<pe&&ge<G.height-1&&0===J[(ge+1)*G.width+pe-1]&&G.getBitXY(pe-1,ge+1)===me&&(he++,ie[he&ae]=pe-1,ne[he&ae]=ge+1,J[(ge+1)*G.width+pe-1]=-32768),pe<G.width-1&&ge<G.height-1&&0===J[(ge+1)*G.width+pe+1]&&G.getBitXY(pe+1,ge+1)===me&&(he++,ie[he&ae]=pe+1,ne[he&ae]=ge+1,J[(ge+1)*G.width+pe+1]=-32768)),ue++,he-ue>ae)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}var W=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},Q=W.allowCorners,$=Q!==void 0&&Q,J=new Int16Array(G.size),ee=0,te=0,ae=65535,ie=new Uint16Array(ae+1),ne=new Uint16Array(ae+1);for(var le=0;le<G.width;le++)for(var oe=0;oe<G.height;oe++)0===J[oe*G.width+le]&&Z(le,oe);return new E.default(G,J)};var T=D("../RoiMap"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../RoiMap":193}],195:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){function G(ve,Me){var je=fe;ye=0,xe=1,_e[0]=ve,be[0]=Me;for(var Pe=!0;ye<xe;){var De=_e[ye&me],Ie=be[ye&me];Pe&=Z(De,Ie,ne),ye++}if(!Pe){for(var Se=0;Se<xe;Se++){var Ce=_e[Se&me],Ae=be[Se&me],Re=Ae*ie.width+Ce;de[Re]=0}fe=je}return Pe}function Z(ve,Me,je){var Pe=de[Me*ie.width+ve],De=ie.data[Me*ie.width+ve];for(var Ie=Me-1;Ie<=Me+1;Ie++)for(var Se=ve-1;Se<=ve+1;Se++){var Ce=Ie*ie.width+Se;if(0===ue[Ce])switch(ue[Ce]=1,he[Ce]=ie.data[Ce]-De,je){case ne:if(0===he[Ce]){if(0===Se||0===Ie||Se===ie.width-1||Ie===ie.height-1)return!1;de[Ce]=Pe,_e[xe&me]=Se,be[xe&me]=Ie,xe++}else{if(0<he[Ce])return!1;ee||(de[Ce]=Pe,ce[fe&me]=Se,pe[fe&me]=Ie,fe++)}break;case le:0>=he[Ce]&&(de[Ce]=Pe,ce[fe&me]=Se,pe[fe&me]=Ie,fe++);break;default:throw new Error("unreachable");}}return!0}var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},Q=W.allowCorner,$=!(Q!==void 0)||Q,J=W.onlyTop,ee=J!==void 0&&J,te=W.invert,ae=te!==void 0&&te,ie=this;ie.checkProcessable("fromMaxima",{components:[1]});var ne=1,le=2,oe=0,se=0,de=new Int16Array(ie.size),ue=new Int8Array(ie.size),he=new Float32Array(ie.size),me=1048575,ce=new Uint16Array(me+1),pe=new Uint16Array(me+1),ge=0,fe=0,_e=new Uint16Array(me+1),be=new Uint16Array(me+1),ye=0,xe=0;for(function(Me){var je=Me.maxima,Pe=void 0===je||je;for(var De=1;De<ie.height-1;De++)for(var Ie=1;Ie<ie.width-1;Ie++){var Se=Ie+De*ie.width;if(0===ue[Se]){var Ce=Pe?ie.data[Se]:-ie.data[Ie+De*ie.width];if(ie.data[De*ie.width+Ie-1]>Ce)continue;if(ie.data[De*ie.width+Ie+1]>Ce)continue;if(ie.data[(De-1)*ie.width+Ie]>Ce)continue;if(ie.data[(De+1)*ie.width+Ie]>Ce)continue;if($){if(ie.data[(De-1)*ie.width+Ie-1]>Ce)continue;if(ie.data[(De-1)*ie.width+Ie+1]>Ce)continue;if(ie.data[(De+1)*ie.width+Ie-1]>Ce)continue;if(ie.data[(De+1)*ie.width+Ie+1]>Ce)continue}de[Se]=Pe?++oe:--se;var Ae=G(Ie,De,ne);Ae||(Pe?--oe:++se)}}}(ie,{maxima:!ae});ge<fe;){var ke=ce[ge&me],we=pe[ge&me];Z(ke,we,le),ge++}return new E.default(ie,de)};var T=D("../RoiMap"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../RoiMap":193}],196:[function(D,I,R){"use strict";function T(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(Q){var $=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},J=new Z.default($),ee=new Int16Array(this.size),te=0,ae=J.getPoints();for(var ie=0;ie<Q.length;ie++){te++;var ne=Q[ie][0],le=Q[ie][1];for(var oe=0;oe<ae.length;oe++){var se=ae[oe][0],de=ae[oe][1];0<=ne+se&&0<=le+de&&ne+se<this.width&&le+de<this.height&&(ee[ne+se+(le+de)*this.width]=te)}}return new L.default(this,ee)};var E=D("../RoiMap"),L=T(E),G=D("./../../../util/shape"),Z=T(G)},{"../RoiMap":193,"./../../../util/shape":262}],197:[function(D,I,R){"use strict";function T(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var $=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},J=$.points,ee=$.mask,te=$.image,ae=$.fillMaxValue,ie=ae===void 0?this.maxValue:ae,ne=$.invert,le=ne!==void 0&&ne,oe=te||this;oe.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),le=!le,J||(J=oe.getLocalMaxima({invert:le,mask:ee}));var se=le?0:1,de=new Int16Array(oe.size),ue=oe.width,he=oe.height,me=new Z.default({comparator:(ve,Me)=>ve[2]-Me[2],strategy:Z.default.BinaryHeapStrategy});for(var ce=0;ce<J.length;ce++){var pe=J[ce][0]+J[ce][1]*ue;de[pe]=ce+1;var ge=oe.data[pe];(le&&ge<=ie||!le&&ge>=ie)&&me.queue([J[ce][0],J[ce][1],ge])}for(;0<me.length;){var fe=me.dequeue(),_e=fe[0]+fe[1]*ue;for(var be=0;4>be;be++){var ye=fe[0]+W.dxs[be],xe=fe[1]+W.dys[be];if(0<=ye&&0<=xe&&ye<ue&&xe<he){var ke=ye+xe*ue;if(!ee||ee.getBit(ke)===se){var we=oe.data[ke];(le&&we<=ie||!le&&we>=ie)&&0===de[ke]&&(de[ke]=de[_e],me.queue([fe[0]+W.dxs[be],fe[1]+W.dys[be],we]))}}}}return new L.default(oe,de)};var E=D("../RoiMap"),L=T(E),G=D("js-priority-queue"),Z=T(G),W=D("./../../../util/dxdy.js")},{"../RoiMap":193,"./../../../util/dxdy.js":257,"js-priority-queue":56}],198:[function(D,I,R){"use strict";function T(de){return de&&de.__esModule?de:{default:de}}Object.defineProperty(R,"__esModule",{value:!0});var E=D("./creator/fromMask"),L=T(E),G=D("./creator/fromMaxima"),Z=T(G),W=D("./creator/fromWaterShed"),Q=T(W),$=D("./creator/fromPoints"),J=T($),ee=D("extend"),te=T(ee),ae=D("../Image"),ie=T(ae),ne=D("./RoiMap"),le=T(ne),oe=D("./RoiLayer"),se=T(oe);R.default=class{constructor(ue){var he=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this._image=ue,this._options=he,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(){var ue=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},he=(0,te.default)({},this._options,ue),me=Z.default.call(this._image,ue);this._layers[he.label]=new se.default(me,he)}fromPoints(ue){var he=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},me=(0,te.default)({},this._options,he),ce=J.default.call(this._image,ue,he);return this._layers[me.label]=new se.default(ce,me),this}putMap(ue){var he=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},me=new le.default(this._image,ue),ce=(0,te.default)({},this._options,he);return this._layers[ce.label]=new se.default(me,ce),this}fromWaterShed(){var ue=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},he=(0,te.default)({},this._options,ue),me=Q.default.call(this._image,ue);this._layers[he.label]=new se.default(me,he)}fromMask(ue){var he=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},me=(0,te.default)({},this._options,he),ce=L.default.call(this._image,ue,he);return this._layers[me.label]=new se.default(ce,me),this}getMap(){var ue=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},he=(0,te.default)({},this._options,ue);return this._assertLayerWithLabel(he.label),this._layers[he.label].roiMap}getRoiIds(){var ue=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},he=this.getRois(ue);if(he){var me=Array(he.length);for(var ce=0;ce<he.length;ce++)me[ce]=he[ce].id;return me}throw new Error("ROIs not found")}getRois(){var ue=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},he=ue.label,me=void 0===he?this._options.label:he,ce=ue.positive,pe=void 0===ce||ce,ge=ue.negative,fe=void 0===ge||ge,_e=ue.minSurface,be=void 0===_e?0:_e,ye=ue.maxSurface,xe=void 0===ye?Number.POSITIVE_INFINITY:ye,ke=ue.minWidth,we=void 0===ke?0:ke,ve=ue.maxWidth,Me=void 0===ve?Number.POSITIVE_INFINITY:ve,je=ue.minHeight,Pe=void 0===je?0:je,De=ue.maxHeight,Ie=void 0===De?Number.POSITIVE_INFINITY:De;if(!this._layers[me])throw new Error("getRoi: This Roi layer ("+me+") does not exists.");var Se=this._layers[me].roi,Ce=Array(Se.length),Ae=0;for(var Re=0;Re<Se.length;Re++){var Be=Se[Re];(0>Be.id&&fe||0<Be.id&&pe)&&Be.surface>=be&&Be.surface<=xe&&Be.width>=we&&Be.width<=Me&&Be.height>=Pe&&Be.height<=Ie&&(Ce[Ae++]=Be)}return Ce.length=Ae,Ce}getMasks(){var ue=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},he=this.getRois(ue),me=Array(he.length);for(var ce=0;ce<he.length;ce++)me[ce]=he[ce].getMask(ue);return me}getData(){var ue=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},he=(0,te.default)({},this._options,ue);return this._assertLayerWithLabel(he.label),this._layers[he.label].roiMap.data}paint(){var ue=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},he=ue.labelProperty;this._painted||(this._painted=this._image.rgba8());var me=this.getMasks(ue);if(he){var ce=this.getRois(ue);ue.labels=ce.map(pe=>pe[he]),ue.labelsPosition=ce.map(pe=>[pe.meanX,pe.meanY])}return this._painted.paintMasks(me,ue),this._painted}getMask(){var ue=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},he=new ie.default(this._image.width,this._image.height,{kind:"BINARY"}),me=this.getMasks(ue);for(var ce=0;ce<me.length;ce++){var pe=me[ce];for(var ge=0;ge<pe.width;ge++)for(var fe=0;fe<pe.height;fe++)pe.getBitXY(ge,fe)&&he.setBitXY(ge+pe.position[0],fe+pe.position[1])}return he}resetPainted(){var ue=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},he=ue.image;this._painted=he?this.image.rgba8():this._image.rgba8()}mergeRoi(){var ue=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},he=(0,te.default)({},this._options,ue),me=ue.algorithm,ce=me===void 0?"commonBorder":me,pe=ue.minCommonBorderLength,ge=pe===void 0?5:pe,fe=this.getRois(he),_e=new Set;switch(ce.toLowerCase()){case"commonborder":for(var be=0;be<fe.length;be++)for(var ye=0;ye<fe[be].borderIDs.length;ye++)0!==fe[be].borderIDs[ye]&&fe[be].borderIDs[ye]<fe[be].id&&fe[be].borderLengths[ye]*ge>=fe[be].border&&_e.add([fe[be].id,fe[be].borderIDs[ye]]);break;default:throw new Error(`Unexpected algorithm: ${ce}`);}var xe=this.getMap(he).data;for(var ke=0;ke<xe.length;ke++)if(0!==xe[ke])for(var we of _e)xe[ke]===we[0]&&(xe[ke]=we[1]);this.putMap(xe,he)}_assertLayerWithLabel(ue){if(!this._layers[ue])throw new Error(`no layer with label ${ue}`)}}},{"../Image":145,"./RoiLayer":192,"./RoiMap":193,"./creator/fromMask":194,"./creator/fromMaxima":195,"./creator/fromPoints":196,"./creator/fromWaterShed":197,extend:35}],199:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[T.RGB]});var Z=L.default.createFrom(this,{components:4,colorModel:T.CMYK}),W=0,Q=this.data;for(var $=0;$<Q.length;$+=this.channels){var J=Q[$],ee=Q[$+1],te=Q[$+2],ae=Math.min(this.maxValue-J,this.maxValue-ee,this.maxValue-te),ie=(this.maxValue-J-ae)/(1-ae/this.maxValue),ne=(this.maxValue-ee-ae)/(1-ae/this.maxValue),le=(this.maxValue-te-ae)/(1-ae/this.maxValue);Z.data[W++]=ie,Z.data[W++]=ne,Z.data[W++]=le,Z.data[W++]=ae,this.alpha&&(Z.data[W++]=Q[$+3])}return Z};var T=D("../model/model"),E=D("../Image"),L=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../Image":145,"../model/model":185}],200:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8;if(this.checkProcessable("colorDepth",{bitDepth:[8,16]}),![8,16].includes(G))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===G)return this.clone();var Z=E.default.createFrom(this,{bitDepth:G});if(8===G)for(var W=0;W<this.data.length;W++)Z.data[W]=this.data[W]>>8;else for(var Q=0;Q<this.data.length;Q++)Z.data[Q]=this.data[Q]<<8|this.data[Q];return Z};var T=D("../Image"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../Image":145}],201:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var G=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},Z=G.x,W=Z===void 0?0:Z,Q=G.y,$=Q===void 0?0:Q,J=G.width,ee=J===void 0?this.width-W:J,te=G.height,ae=te===void 0?this.height-$:te;if(W>this.width-1||$>this.height-1)throw new RangeError(`crop: origin (x:${W}, y:${$}) out of range (${this.width-1}; ${this.height-1})`);if(0>=ee||0>=ae)throw new RangeError(`crop: width and height (width:${ee}; height:${ae}) must be positive numbers`);if(0>W||0>$)throw new RangeError(`crop: x and y (x:${W}, y:${$}) must be positive numbers`);if(ee>this.width-W||ae>this.height-$)throw new RangeError(`crop: (x: ${W}, y:${$}, width:${ee}, height:${ae}) size is out of range`);var ie=E.default.createFrom(this,{width:ee,height:ae}),ne=ee*this.channels,le=0,oe=W*this.channels;for(var se=$;se<$+ae;se++)for(var de=se*this.width*this.channels+oe,ue=de+ne;de<ue;de++)ie.data[le++]=this.data[de];return ie};var T=D("../Image"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../Image":145}],202:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},Q=W.algorithm,$=Q===void 0?"luma709":Q,J=W.keepAlpha,ee=J!==void 0&&J,te=W.mergeAlpha,ae=!(te!==void 0)||te,ie=W.allowGrey,ne=ie!==void 0&&ie,le={bitDepth:[8,16],alpha:[0,1]};ne||(le.colorModel=[L.RGB],le.components=[3]),this.checkProcessable("grey",le),1===this.components&&($="red"),ee&=this.alpha,ae&=this.alpha,ee&&(ae=!1);var oe=E.default.createFrom(this,{components:1,alpha:ee,colorModel:null}),se=G.methods[$.toLowerCase()];if(!se)throw new Error("Unsupported grey algorithm: "+$);var de=0;for(var ue=0;ue<this.data.length;ue+=this.channels)ae?oe.data[de++]=se(this.data,ue,this)*this.data[ue+this.components]/this.maxValue:(oe.data[de++]=se(this.data,ue,this),oe.alpha&&(oe.data[de++]=this.data[ue+this.components]));return oe};var T=D("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(T),L=D("../model/model"),G=D("./greyAlgorithms")},{"../Image":145,"../model/model":185,"./greyAlgorithms":203}],203:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var T=R.methods={luma709:function(L,G){return 6966*L[G]+23436*L[G+1]+2366*L[G+2]>>15},luma601:function(L,G){return 9798*L[G]+19235*L[G+1]+3735*L[G+2]>>15},maximum:function(L,G){return Math.max(L[G],L[G+1],L[G+2])},minimum:function(L,G){return Math.min(L[G],L[G+1],L[G+2])},average:function(L,G){return(L[G]+L[G+1]+L[G+2])/3>>0},minmax:function(L,G){return(Math.max(L[G],L[G+1],L[G+2])+Math.min(L[G],L[G+1],L[G+2]))/2},red:function(L,G){return L[G]},green:function(L,G){return L[G+1]},blue:function(L,G){return L[G+2]},cyan:function(L,G,Z){var W=T.black(L,G,Z);return(Z.maxValue-L[0]-W)/(1-W/Z.maxValue)>>0},magenta:function(L,G,Z){var W=T.black(L,G,Z);return(Z.maxValue-L[1]-W)/(1-W/Z.maxValue)>>0},yellow:function(L,G,Z){var W=T.black(L,G,Z);return(Z.maxValue-L[2]-W)/(1-W/Z.maxValue)>>0},black:function(L,G,Z){return Math.min(Z.maxValue-L[G],Z.maxValue-L[G+1],Z.maxValue-L[G+2])},hue:function(L,G,Z){var W=T.min(L,G),Q=T.max(L,G);if(Q===W)return 0;var E=0,$=Q-W;switch(Q){case L[G]:E=(L[G+1]-L[G+2])/$+(L[G+1]<L[G+2]?6:0);break;case L[G+1]:E=(L[G+2]-L[G])/$+2;break;case L[G+2]:E=(L[G]-L[G+1])/$+4;break;default:throw new Error("unreachable");}return E/6*Z.maxValue>>0},saturation:function(L,G,Z){var W=T.min(L,G),Q=T.max(L,G);return 0===Q?0:(Q-W)/Q*Z.maxValue},lightness:function(L,G){var Z=T.min(L,G),W=T.max(L,G);return(W+Z)/2}};Object.defineProperty(T,"luminosity",{enumerable:!1,value:T.lightness}),Object.defineProperty(T,"luminance",{enumerable:!1,value:T.lightness}),Object.defineProperty(T,"min",{enumerable:!1,value:T.minimum}),Object.defineProperty(T,"max",{enumerable:!1,value:T.maximum}),Object.defineProperty(T,"brightness",{enumerable:!1,value:T.maximum}),R.names=Object.keys(T)},{}],204:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[T.RGB]});var Z=L.default.createFrom(this,{colorModel:T.HSL}),W=Math.floor(this.maxValue/2),Q=0,$=this.data;for(var J=0;J<$.length;J+=this.channels){var ee=$[J],te=$[J+1],ae=$[J+2],ie=Math.max(ee,te,ae),ne=Math.min(ee,te,ae),le=0,oe=0,se=(ie+ne)/2;if(ie!==ne){var de=ie-ne;switch(oe=se>W?de/(2-ie-ne):de/(ie+ne),ie){case ee:le=(te-ae)/de+(te<ae?6:0);break;case te:le=(ae-ee)/de+2;break;case ae:le=(ee-te)/de+4;break;default:throw new Error("unreachable");}le/=6}Z.data[Q++]=le*this.maxValue,Z.data[Q++]=oe*this.maxValue,Z.data[Q++]=se,this.alpha&&(Z.data[Q++]=$[J+3])}return Z};var T=D("../model/model"),E=D("../Image"),L=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../Image":145,"../model/model":185}],205:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[T.RGB]});var Z=L.default.createFrom(this,{colorModel:T.HSV}),W=0,Q=this.data;for(var $=0;$<Q.length;$+=this.channels){var J=Q[$],ee=Q[$+1],te=Q[$+2],ae=Math.min(J,ee,te),ie=Math.max(J,ee,te),ne=ie-ae,le=0,oe=0===ie?0:ne/ie;if(ie!==ae){switch(ie){case J:le=(ee-te)/ne+(ee<te?6:0);break;case ee:le=(te-J)/ne+2;break;case te:le=(J-ee)/ne+4;break;default:throw new Error("unreachable");}le/=6}Z.data[W++]=le*this.maxValue,Z.data[W++]=oe*this.maxValue,Z.data[W++]=ie,this.alpha&&(Z.data[W++]=Q[$+3])}return Z};var T=D("../model/model"),E=D("../Image"),L=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../Image":145,"../model/model":185}],206:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){var L=0;for(var G=0;G<E.length;G++)if(0!==E[G]){L=G;break}var Z=E.length-1;for(var W=E.length-1;W>=L;W--)if(0!==E[W]){Z=W;break}var Q=1/(Z-L),$=Array(E.length),J=0,ee=0;for(var te=L;te<E.length;te++)J+=te*E[te],ee+=E[te],$[te]=J/ee;var ae=Array(E.length);J=ee=0;for(var ie=Z;0<ie;ie--)J+=ie*E[ie],ee+=E[ie],ae[ie-1]=J/ee;var ne=-1,le=Number.MAX_VALUE;for(var oe=0;oe<E.length;oe++){var se=0,de=void 0;for(var ue=0;ue<=oe;ue++)de=1/(1+Q*Math.abs(ue-$[oe])),0.000001>de||0.999999<de||(se+=E[ue]*(-de*Math.log(de)-(1-de)*Math.log(1-de)));for(var he=oe+1;he<E.length;he++)de=1/(1+Q*Math.abs(he-ae[oe])),0.000001>de||0.999999<de||(se+=E[he]*(-de*Math.log(de)-(1-de)*Math.log(1-de)));se<le&&(le=se,ne=oe)}return ne}},{}],207:[function(D,I,R){"use strict";function T(E){var L=!1,G=0;for(var Z=1;Z<E.length-1;Z++)if(E[Z-1]<E[Z]&&E[Z+1]<E[Z]&&(G++,2<G))return!1;return 2==G&&(L=!0),L}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(L){for(var G=L.slice(),Z=0;!T(G);){var W=0,Q=0,$=G[0];for(var J=0;J<L.length-1;J++)W=Q,Q=$,$=G[J+1],G[J]=(W+Q+$)/3;if(G[L.length-1]=(Q+$)/3,Z++,10000<Z)throw new Error("Intermodes Threshold not found after 10000 iterations")}var ee=0;for(var te=1;te<L.length-1;te++)G[te-1]<G[te]&&G[te+1]<G[te]&&(ee+=te);return Math.floor(ee/2)}},{}],208:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){var L=void 0,G=void 0,Z=void 0,W=void 0,Q=0;for(var $=1;$<E.length;$++)if(0<E[$]){Q=$+1;break}for(;!0;){L=0,Z=0;for(var J=0;J<Q;J++)Z=Z+E[J],L=L+E[J]*J;W=0,G=0;for(var ee=Q+1;ee<E.length;ee++)G+=E[ee],W+=E[ee]*ee;if(0<Z&&0<G&&(L/=Z,W/=G,Q===Math.round((L+W)/2)))break;if(Q++,Q>E.length-2)throw new Error("Threshold not found")}return Q}},{}],209:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E,L){var G=void 0,Z=void 0,W=void 0,Q=void 0,$=void 0,J=void 0,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,le=void 0;ne=0.5,ie=0;for(var oe=0;oe<E.length;oe++)ie+=oe*E[oe];ie/=L,ee=ie;do{J=ee,G=0|J+0.5,Z=0,Q=0;for(var se=0;se<=G;se++)Z+=se*E[se],Q+=E[se];te=0===Q?0:Z/Q,W=0,$=0;for(var de=G+1;de<E.length;de++)W+=de*E[de],$+=E[de];ae=0===$?0:W/$,le=(te-ae)/(Math.log(te)-Math.log(ae)),ee=le<-Number.EPSILON?0|le-0.5:0|le+0.5}while(Math.abs(ee-J)>ne);return G}},{}],210:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var W=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Q=W.algorithm,$=void 0===Q?"threshold":Q,J=W.threshold,ee=void 0===J?0.5:J,te=W.useAlpha,ae=void 0===te||te,ie=W.invert,ne=void 0!==ie&&ie;if(this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),"threshold"===$)ee=(0,G.getThreshold)(ee,this.maxValue);else{var le=L.methods[$.toLowerCase()];if(le){var oe=this.getHistogram();ee=le(oe,this.size)}else throw new Error("mask transform unknown algorithm: "+$)}var se=new E.default(this.width,this.height,{kind:"BINARY",parent:this}),de=0;if(this.alpha&&ae)for(var ue=0;ue<this.data.length;ue+=this.channels){var he=this.data[ue]+(this.maxValue-this.data[ue])*(this.maxValue-this.data[ue+1])/this.maxValue;(ne&&he<=ee||!ne&&he>=ee)&&se.setBit(de),de++}else for(var me=0;me<this.data.length;me+=this.channels)(ne&&this.data[me]<=ee||!ne&&this.data[me]>=ee)&&se.setBit(de),de++;return se};var T=D("../../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(T),L=D("./maskAlgorithms"),G=D("../../../util/converter")},{"../../../util/converter":256,"../../Image":145,"./maskAlgorithms":211}],211:[function(D,I,R){"use strict";function T(Me){return Me&&Me.__esModule?Me:{default:Me}}Object.defineProperty(R,"__esModule",{value:!0}),R.names=R.methods=void 0;var E=D("./huang"),L=T(E),G=D("./intermodes"),Z=T(G),W=D("./isodata"),Q=T(W),$=D("./li"),J=T($),ee=D("./maxEntropy"),te=T(ee),ae=D("./mean"),ie=T(ae),ne=D("./minError"),le=T(ne),oe=D("./minimum"),se=T(oe),de=D("./moments"),ue=T(de),he=D("./otsu"),me=T(he),ce=D("./percentile"),pe=T(ce),ge=D("./renyiEntropy.js"),fe=T(ge),_e=D("./shanbhag"),be=T(_e),ye=D("./triangle"),xe=T(ye),ke=D("./yen"),we=T(ke),ve=R.methods={huang:L.default,intermodes:Z.default,isodata:Q.default,li:J.default,maxentropy:te.default,mean:ie.default,minerror:le.default,minimum:se.default,moments:ue.default,otsu:me.default,percentile:pe.default,renyientropy:fe.default,shanbhag:be.default,triangle:xe.default,yen:we.default};R.names=["threshold"].concat(Object.keys(ve))},{"./huang":206,"./intermodes":207,"./isodata":208,"./li":209,"./maxEntropy":212,"./mean":213,"./minError":214,"./minimum":215,"./moments":216,"./otsu":217,"./percentile":218,"./renyiEntropy.js":219,"./shanbhag":220,"./triangle":221,"./yen":222}],212:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E,L){var G=Array(E.length);for(var Z=0;Z<E.length;Z++)G[Z]=E[Z]/L;var W=Array(E.length),Q=Array(E.length);W[0]=G[0],Q[0]=1-W[0];for(var $=1;$<E.length;$++)W[$]=W[$-1]+G[$],Q[$]=1-W[$];var J=0;for(var ee=0;ee<E.length;ee++)if(Math.abs(W[ee])>=Number.EPSILON){J=ee;break}var te=E.length-1;for(var ae=E.length-1;ae>=J;ae--)if(Math.abs(Q[ae])>=Number.EPSILON){te=ae;break}var ie=-1,ne=void 0,le=Number.MIN_VALUE,oe=void 0,se=void 0;for(var de=J;de<=te;de++){oe=0;for(var ue=0;ue<=de;ue++)0!==E[ue]&&(oe-=G[ue]/W[de]*Math.log(G[ue]/W[de]));se=0;for(var he=de+1;he<E.length;he++)0!==E[he]&&(se-=G[he]/Q[de]*Math.log(G[he]/Q[de]));ne=oe+se,le<ne&&(le=ne,ie=de)}return ie}},{}],213:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E,L){var G=0;for(var Z=0;Z<E.length;Z++)G+=Z*E[Z];return Math.floor(G/L)}},{}],214:[function(D,I,R){"use strict";function T(G,Z){var W=0;for(var Q=0;Q<=Z;Q++)W+=G[Q];return W}function E(G,Z){var W=0;for(var Q=0;Q<=Z;Q++)W+=Q*G[Q];return W}function L(G,Z){var W=0;for(var Q=0;Q<=Z;Q++)W+=Q*Q*G[Q];return W}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(Z,W){var Q=void 0,$=-2,J=void 0,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,le=void 0,oe=void 0,se=void 0,de=void 0,ue=void 0,he=0;for(var me=0;me<Z.length;me++)he+=me*Z[me];for(he/=W,Q=he;Q!==$;){var ce=T(Z,Q),pe=T(Z,Z.length-1),ge=E(Z,Q),fe=E(Z,Z.length-1),_e=L(Z,Q),be=L(Z,Z.length-1);if(J=ge/ce,ee=(fe-ge)/(pe-ce),te=ce/pe,ae=(pe-ce)/pe,ie=_e/ce-J*J,ne=(be-_e)/(pe-ce)-ee*ee,le=1/ie-1/ne,oe=J/ie-ee/ne,se=J*J/ie-ee*ee/ne+Math.log10(ie*(ae*ae)/(ne*(te*te))),de=oe*oe-le*se,0>de)return Q;$=Q,ue=(oe+Math.sqrt(de))/le,Q=isNaN(ue)?$:Math.floor(ue)}return Q}},{}],215:[function(D,I,R){"use strict";function T(G){var Z=Array(G.length);for(var W=1;W<G.length-1;W++)Z[W]=(G[W-1]+G[W]+G[W+1])/3;return Z[0]=(G[0]+G[1])/3,Z[G.length-1]=(G[G.length-2]+G[G.length-1])/3,Z}function E(G,Z){var W=void 0;for(var Q=1;Q<Z;Q++)if(G[Q-1]>G[Q]&&G[Q+1]>=G[Q]){W=Q;break}return W}function L(G){var Z=G.length,W=!1,Q=0;for(var $=1;$<Z-1;$++)if(G[$-1]<G[$]&&G[$+1]<G[$]&&(Q++,2<Q))return!1;return 2==Q&&(W=!0),W}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(Z){if(2>Z.length)return 0;var W=0,Q=-1,$=-1,J=Array(Z.length);for(var ee=0;ee<Z.length;ee++)J[ee]=Z[ee],0<Z[ee]&&($=ee);for(;!L(J);)if(J=T(J),W++,10000<W)return Q;return Q=E(J,$),Q}},{}],216:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E,L){var G=1,Z=0,W=0,Q=0,$=0,J=void 0,ee=void 0,te=void 0,ae=void 0,ie=void 0,ne=void 0,le=-1,oe=E.length,se=Array(oe);for(var de=0;de<oe;de++)se[de]=E[de]/L;for(var ue=0;ue<oe;ue++)Z+=ue*se[ue],W+=ue*ue*se[ue],Q+=ue*ue*ue*se[ue];ee=G*W-Z*Z,te=(-W*W+Z*Q)/ee,ae=(G*-Q+W*Z)/ee,ie=0.5*(-ae-Math.sqrt(ae*ae-4*te)),ne=0.5*(-ae+Math.sqrt(ae*ae-4*te)),J=(ne-Z)/(ne-ie);for(var he=0;he<oe;he++)if($+=se[he],$>J){le=he;break}return le}},{}],217:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E,L){var G=0,Z=0,W=0,Q=0,$=void 0,J=void 0,ee=0,te=0,ae=0;for(var ie=1;ie<E.length;++ie)G+=ie*E[ie];for(var ne=1;ne<E.length;++ne)if(W+=E[ne],0!=W){if(Q=L-W,0==Q)break;Z+=ne*E[ne],$=Z/W,J=(G-Z)/Q,te=W*Q*($-J)*($-J),te>=ee&&(ae=ne,ee=te)}return ae}},{}],218:[function(D,I,R){"use strict";function T(E,L){var G=0;for(var Z=0;Z<=L;Z++)G+=E[Z];return G}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){var L=-1,G=Array(E.length),Z=T(E,E.length-1),W=1;for(var Q=0;Q<E.length;Q++)G[Q]=Math.abs(T(E,Q)/Z-0.5),G[Q]<W&&(W=G[Q],L=Q);return L}},{}],219:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(L,G){var Z=void 0,W=void 0,Q=void 0,$=Array(L.length),J=Array(L.length),ee=Array(L.length),te=0,ae=0,ie=0,ne=0,le=0,oe=0;for(var se=0;se<L.length;se++)$[se]=L[se]/G;J[0]=$[0],ee[0]=1-J[0];for(var de=1;de<L.length;de++)J[de]=J[de-1]+$[de],ee[de]=1-J[de];W=0;for(var ue=0;ue<L.length;ue++)if(Math.abs(J[ue])>=Number.EPSILON){W=ue;break}Q=L.length-1;for(var he=L.length-1;he>=W;he--)if(Math.abs(ee[he])>=Number.EPSILON){Q=he;break}for(var me=W;me<=Q;me++){var ce=0,pe=0,ge=0;for(var fe=0;fe<=me;fe++)0!==L[fe]&&(ce-=$[fe]/J[me]*Math.log($[fe]/J[me])),pe+=Math.sqrt($[fe]/J[me]),ge+=$[fe]*$[fe]/(J[me]*J[me]);var _e=0,be=0,ye=0;for(var xe=me+1;xe<L.length;xe++)0!==L[xe]&&(_e-=$[xe]/ee[me]*Math.log($[xe]/ee[me])),be+=Math.sqrt($[xe]/ee[me]),ye+=$[xe]*$[xe]/(ee[me]*ee[me]);var ke=ce+_e,we=2*(0<pe*be?Math.log(pe*be):0),ve=-1*(0<ge*ye?Math.log(ge*ye):0);ke>ne&&(ne=ke,te=me),we>le&&(le=we,ae=me),ve>oe&&(oe=ve,ie=me)}var Me=[te,ae,ie];Me.sort(T.asc);var je=void 0;je=5>=Math.abs(Me[0]-Me[1])?5>=Math.abs(Me[1]-Me[2])?[1,2,1]:[0,1,3]:5>=Math.abs(Me[1]-Me[2])?[3,1,0]:[1,2,1];var Pe=J[Me[2]]-J[Me[0]];return Z=Math.round(Me[0]*(J[Me[0]]+0.25*Pe*je[0])+0.25*Me[1]*Pe*je[1]+Me[2]*(ee[Me[2]]+0.25*Pe*je[2])),Z};var T=D("num-sort")},{"num-sort":114}],220:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E,L){var G=Array(E.length);for(var Z=0;Z<E.length;Z++)G[Z]=E[Z]/L;var W=Array(E.length),Q=Array(E.length);W[0]=G[0],Q[0]=1-W[0];for(var $=1;$<E.length;$++)W[$]=W[$-1]+G[$],Q[$]=1-W[$];var J=0;for(var ee=0;ee<E.length;ee++)if(Math.abs(W[ee])>=Number.EPSILON){J=ee;break}var te=E.length-1;for(var ae=E.length-1;ae>=J;ae--)if(Math.abs(Q[ae])>=Number.EPSILON){te=ae;break}var ie=-1,ne=Number.MAX_VALUE,le=void 0,oe=void 0,se=void 0,de=void 0;for(var ue=J;ue<=te;ue++){se=0,le=0.5/W[ue];for(var he=1;he<=ue;he++)se-=G[he]*Math.log(1-le*W[he-1]);se*=le,de=0,le=0.5/Q[ue];for(var me=ue+1;me<E.length;me++)de-=G[me]*Math.log(1-le*Q[me]);de*=le,oe=Math.abs(se-de),oe<ne&&(ne=oe,ie=ue)}return ie}},{}],221:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){var L=0,G=0,Z=0,W=0;for(var Q=0;Q<E.length;Q++)if(0<E[Q]){L=Q;break}0<L&&L--;for(var $=E.length-1;0<$;$--)if(0<E[$]){W=$;break}W<E.length-1&&W++;for(var J=0;J<E.length;J++)E[J]>G&&(Z=J,G=E[J]);var ee=!1;if(Z-L<W-Z){ee=!0;for(var te=0,ae=E.length-1;te<ae;){var ie=E[te];E[te]=E[ae],E[ae]=ie,te++,ae--}L=E.length-1-W,Z=E.length-1-Z}if(L===Z)return L;var ne=void 0,le=void 0,oe=void 0;ne=E[Z],le=L-Z,oe=Math.sqrt(ne*ne+le*le),ne/=oe,le/=oe,oe=ne*L+le*E[L];var se=L,de=0;for(var ue=L+1;ue<=Z;ue++){var he=ne*ue+le*E[ue]-oe;he>de&&(se=ue,de=he)}if(se--,ee){for(var me=0,ce=E.length-1;me<ce;){var pe=E[me];E[me]=E[ce],E[ce]=pe,me++,ce--}return E.length-1-se}return se}},{}],222:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E,L){var G=Array(E.length);for(var Z=0;Z<E.length;Z++)G[Z]=E[Z]/L;var W=Array(E.length);W[0]=G[0];for(var Q=1;Q<E.length;Q++)W[Q]=W[Q-1]+G[Q];var $=Array(E.length);$[0]=G[0]*G[0];for(var J=1;J<E.length;J++)$[J]=$[J-1]+G[J]*G[J];var ee=Array(E.length);ee[E.length-1]=0;for(var te=E.length-2;0<=te;te--)ee[te]=ee[te+1]+G[te+1]*G[te+1];var ae=-1,ie=Number.MIN_VALUE,ne=void 0;for(var le=0;le<E.length;le++)ne=-1*(0<$[le]*ee[le]?Math.log($[le]*ee[le]):0)+2*(0<W[le]*(1-W[le])?Math.log(W[le]*(1-W[le])):0),ne>ie&&(ie=ne,ae=le);return ae}},{}],223:[function(D,I,R){"use strict";function T($){return $&&$.__esModule?$:{default:$}}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var J=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ee=J.size,te=void 0===ee?0:ee,ae=J.algorithm,ie=void 0===ae?"copy":ae,ne=J.color;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===ie){if(ne.length!==this.channels)throw new Error("pad: the color array must have the same length as the number of channels. Here: "+this.channels);for(var le=0;le<ne.length;le++)0===ne[le]&&(ne[le]=0.001)}else ne=(0,Z.default)(this.channels,null);Array.isArray(te)||(te=[te,te]);var oe=this.width+2*te[0],se=this.height+2*te[1],de=this.channels,ue=L.default.createFrom(this,{width:oe,height:se});(0,Q.default)(this,ue,te[0],te[1]);for(var he=te[0];he<oe-te[0];he++)for(var me=0;me<de;me++){var ce=ne[me]||ue.data[(te[1]*oe+he)*de+me];for(var pe=0;pe<te[1];pe++)ue.data[(pe*oe+he)*de+me]=ce;ce=ne[me]||ue.data[((se-te[1]-1)*oe+he)*de+me];for(var ge=se-te[1];ge<se;ge++)ue.data[(ge*oe+he)*de+me]=ce}for(var fe=0;fe<se;fe++)for(var _e=0;_e<de;_e++){var be=ne[_e]||ue.data[(fe*oe+te[0])*de+_e];for(var ye=0;ye<te[0];ye++)ue.data[(fe*oe+ye)*de+_e]=be;be=ne[_e]||ue.data[(fe*oe+oe-te[0]-1)*de+_e];for(var xe=oe-te[0];xe<oe;xe++)ue.data[(fe*oe+xe)*de+_e]=be}return ue};var E=D("../Image"),L=T(E),G=D("new-array"),Z=T(G),W=D("../utility/copy"),Q=T(W)},{"../Image":145,"../utility/copy":229,"new-array":113}],224:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0.5;this.checkProcessable("resizeBinary",{bitDepth:[1]});var Q=Math.floor(this.width*W),$=Math.floor(this.height*W),J=Math.round((this.width-Q)/2),ee=Math.round((this.height-$)/2),te=E.default.createFrom(this,{kind:G.BINARY,width:Q,height:$,position:[J,ee],parent:this});for(var ae=0;ae<this.width;ae++)for(var ie=0;ie<this.height;ie++)this.getBitXY(ae,ie)&&te.setBitXY(Math.floor(ae*W),Math.floor(ie*W));return te};var T=D("../Image"),E=function(W){return W&&W.__esModule?W:{default:W}}(T),L=D("../kindNames"),G=function(W){if(W&&W.__esModule)return W;var Q={};if(null!=W)for(var $ in W)Object.prototype.hasOwnProperty.call(W,$)&&(Q[$]=W[$]);return Q.default=W,Q}(L)},{"../Image":145,"../kindNames":182}],225:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var G=new E.default(this.width,this.height,{kind:"RGBA"});return G.data=this.getRGBAData(),G};var T=D("../Image"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../Image":145}],226:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E,L,G){var Z=this.width/L,W=this.height/G;for(var Q=0;Q<L;Q++){var $=Math.floor((Q+0.5)*Z);for(var J=0;J<G;J++){var ee=Math.floor((J+0.5)*W);for(var te=0;te<this.channels;te++)E.setValueXY(Q,J,te,this.getValueXY($,ee,te))}}}},{}],227:[function(D,I,R){"use strict";function T(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var $=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},J=$.width,ee=J===void 0?this.width:J,te=$.height,ae=te===void 0?this.height:te,ie=$.factor,ne=ie===void 0?1:ie,le=$.algorithm,oe=le===void 0?"nearestNeighbor":le,se=(0,W.factorDimensions)(ne,ee,ae),de=se.width,ue=se.height;if(ee===this.width&&ae===this.height)return this.clone();var he=L.default.createFrom(this,{width:de,height:ue});switch(oe.toLowerCase()){case"nearestneighbor":case"nearestneighbour":Z.default.call(this,he,de,ue);break;default:throw new Error("Unsupported scale algorithm: "+oe);}return he};var E=D("../../Image"),L=T(E),G=D("./nearestNeighbor"),Z=T(G),W=D("../../../util/converter")},{"../../../util/converter":256,"../../Image":145,"./nearestNeighbor":226}],228:[function(D,I,R){"use strict";function T(G){return(G[0]+G[1]+G[2])/3}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var Z=0<arguments.length&&arguments[0]!==void 0?arguments[0]:T,W=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},Q=W.mergeAlpha,$=Q!==void 0&&Q,J=W.keepAlpha,ee=J!==void 0&&J;$&=this.alpha,ee&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});var te=L.default.createFrom(this,{components:1,alpha:ee,colorModel:null}),ae=0;for(var ie=0;ie<this.size;ie++){var ne=Z(this.getPixel(ie));$?te.data[ae++]=ne*this.data[ie*this.channels+this.components]/this.maxValue:(te.data[ae++]=ne,ee&&(te.data[ae++]=this.data[ie*this.channels+this.components]))}return te};var E=D("../Image"),L=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"../Image":145}],229:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E,L,G,Z){var W=E.width,Q=E.height,$=L.width,J=E.channels;for(var ee=0;ee<W;ee++)for(var te=0;te<Q;te++)for(var ae=0;ae<J;ae++){var ie=(te*W+ee)*J+ae,ne=((Z+te)*$+G+ee)*J+ae;L.data[ne]=E.data[ie]}}},{}],230:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(G){var Z=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},W=Z.border;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==G.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==G.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==G.colorModel)throw new Error("Both images must have the same colorModel");for(var Q=new E.default(G.width,G.height,-(1/0)),$=Math.floor(G.width/2),J=Math.floor(G.height/2),ee=$,te=J,ae=!1;!ae;){var ie=Q.localSearch($,J,-(1/0));for(var ne=0;ne<ie.length;ne++){var le=ie[ne],oe=this.getSimilarity(G,{border:W,shift:[ee-le[0],te-le[1]]});Q[le[0]][le[1]]=oe}var se=Q.localMax($,J);se.position[0]!==$||se.position[1]!==J?($=se.position[0],J=se.position[1]):ae=!0}return[$-ee,J-te]};var T=D("../../util/matrix"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../../util/matrix":261}],231:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(Z){var W=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},Q=W.keepAlpha,$=Q!==void 0&&Q,J=W.mergeAlpha,ee=J!==void 0&&J;$&=this.alpha,ee&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),Z=(0,L.validateChannel)(this,Z);var te=E.default.createFrom(this,{components:1,alpha:$,colorModel:null}),ae=0;for(var ie=0;ie<this.data.length;ie+=this.channels)ee?te.data[ae++]=this.data[ie+Z]*this.data[ie+this.components]/this.maxValue:(te.data[ae++]=this.data[ie+Z],$&&(te.data[ae++]=this.data[ie+this.components]));return te};var T=D("../Image"),E=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(T),L=D("./../../util/channel")},{"../Image":145,"./../../util/channel":254}],232:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){var L=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;this.checkProcessable("getColumn",{bitDepth:[8,16]}),this.checkColumn(E),this.checkChannel(L);var G=Array(this.height),Z=0,W=this.width*this.channels;for(var Q=L+E*this.channels;Q<this.data.length;Q+=W)G[Z++]=this.data[Q];return G}},{}],233:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=G.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===Z){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");Z=0}var W=new E.default(this.height,this.width);for(var Q=0;Q<this.height;Q++)for(var $=0;$<this.width;$++)W.set(Q,$,this.getValueXY($,Q,Z));return W};var T=D("ml-matrix"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"ml-matrix":86}],234:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});var E=Array(this.size),L=0;for(var G=0;G<this.data.length;G+=this.channels){var Z=Array(this.components);for(var W=0;W<this.components;W++)Z[W]=this.data[G+W];E[L++]=Z}return E}},{}],235:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var E=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},L=E.sampling,G=void 0===L?[10,10]:L,Z=E.painted,W=void 0!==Z&&Z,Q=E.mask;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(G)||(G=[G,G]);var $=G[0],J=G[1],ee=$*J,te=Array(ee),ae=Array(ee),ie=this.width/$,ne=this.height/J,le=Math.floor(ie/2),oe=0;for(var se=0;se<$;se++){var de=Math.floor(ne/2);for(var ue=0;ue<J;ue++){var he=Math.round(le),me=Math.round(de);(!Q||Q.getBitXY(he,me))&&(te[oe]=[he,me],ae[oe]=this.getPixelXY(he,me),oe++),de+=ne}le+=ie}te.length=oe,ae.length=oe;var ce={xyS:te,zS:ae};return W&&(ce.painted=this.rgba8().paintPoints(te)),ce}},{}],236:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){var L=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0;this.checkProcessable("getRow",{bitDepth:[8,16]}),this.checkRow(E),this.checkChannel(L);var G=Array(this.width),Z=0,W=E*this.width*this.channels+L,Q=W+this.width*this.channels;for(var $=W;$<Q;$+=this.channels)G[Z++]=this.data[$];return G}},{}],237:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(Z){var W=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},Q=W.shift,$=void 0===Q?[0,0]:Q,J=W.average,ee=W.channels,te=W.defaultAlpha,ae=W.normalize,ie=W.border,ne=void 0===ie?[0,0]:ie;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(ne)||(ne=[ne,ne]),ee=(0,T.validateArrayOfChannels)(this,{channels:ee,defaultAlpha:te}),this.bitDepth!==Z.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==Z.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==Z.colorModel)throw new Error("Both images must have the same colorModel");"undefined"==typeof J&&(J=!0);var le=Math.max(ne[0],-$[0]),oe=Math.min(this.width-ne[0],this.width-$[0]),se=Math.max(ne[1],-$[1]),de=Math.min(this.height-ne[1],this.height-$[1]),ue=(0,L.default)(ee.length,0);for(var he=0;he<ee.length;he++){var me=ee[he],ce=ae?this.sum[me]:Math.max(this.sum[me],Z.sum[me]),pe=ae?Z.sum[me]:Math.max(this.sum[me],Z.sum[me]);if(0!==ce&&0!==pe)for(var ge=le;ge<oe;ge++)for(var fe=se;fe<de;fe++){var _e=ge*this.multiplierX+fe*this.multiplierY+me,be=_e+$[0]*this.multiplierX+$[1]*this.multiplierY;ue[he]+=Math.min(this.data[_e]/ce,Z.data[be]/pe)}}return J?ue.reduce((ye,xe)=>ye+xe)/ue.length:ue};var T=D("./../../util/channel"),E=D("new-array"),L=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E)},{"./../../util/channel":254,"new-array":113}],238:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=G.size,W=void 0===Z?0:Z,Q=G.algorithm,$=void 0===Q?"copy":Q,J=G.color;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===$){if(J.length!==this.channels)throw new Error("setBorder: the color array must have the same length as the number of channels. Here: "+this.channels);for(var ee=0;ee<J.length;ee++)0===J[ee]&&(J[ee]=0.001)}else J=(0,E.default)(this.channels,null);Array.isArray(W)||(W=[W,W]);var te=W[0],ae=W[1],ie=this.channels;for(var ne=te;ne<this.width-te;ne++)for(var le=0;le<ie;le++){var oe=J[le]||this.data[(ne+this.width*ae)*ie+le];for(var se=0;se<ae;se++)this.data[(se*this.width+ne)*ie+le]=oe;oe=J[le]||this.data[(ne+this.width*(this.height-ae-1))*ie+le];for(var de=this.height-ae;de<this.height;de++)this.data[(de*this.width+ne)*ie+le]=oe}for(var ue=0;ue<this.height;ue++)for(var he=0;he<ie;he++){var me=J[he]||this.data[(ue*this.width+te)*ie+he];for(var ce=0;ce<te;ce++)this.data[(ue*this.width+ce)*ie+he]=me;me=J[he]||this.data[(ue*this.width+this.width-te-1)*ie+he];for(var pe=this.width-te;pe<this.width;pe++)this.data[(ue*this.width+pe)*ie+he]=me}};var T=D("new-array"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"new-array":113}],239:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(L,G){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),G.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),G.width!==this.width||G.height!==this.height)throw new Error("Images must have exactly the same width and height");L=(0,T.validateChannel)(this,L);var Z=L;for(var W=0;W<G.data.length;W++)this.data[Z]=G.data[W],Z+=this.channels};var T=D("./../../util/channel")},{"./../../util/channel":254}],240:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){var L=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},G=L.channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===G){if(1<this.components)throw new RangeError("You need to define the channel for an image that contains more than one channel");G=0}if(!E.length||!E[0].length||this.width!==E.columns||this.height!==E.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(var Z=0;Z<this.height;Z++)for(var W=0;W<this.width;W++)this.setValueXY(W,Z,G,E.get(Z,W))}},{}],241:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var G=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=G.preserveAlpha,W=void 0===Z||Z;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return[this.clone()];var Q=[],$=this.data;if(this.alpha&&W)for(var J=0;J<this.components;J++){var ee=E.default.createFrom(this,{components:1,alpha:!0,colorModel:null}),te=0;for(var ae=0;ae<$.length;ae+=this.channels)ee.data[te++]=$[ae+J],ee.data[te++]=$[ae+this.components];Q.push(ee)}else for(var ie=0;ie<this.channels;ie++){var ne=E.default.createFrom(this,{components:1,alpha:!1,colorModel:null}),le=0;for(var oe=0;oe<$.length;oe+=this.channels)ne.data[le++]=$[oe+ie];Q.push(ne)}return Q};var T=D("../Image"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../Image":145}],242:[function(D,I,R){"use strict";var T=D("./image/environment"),E=D("array-includes"),L=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(E);L.default.shim(),I.exports=R=D("./image/Image").default,R.Stack=D("./stack/Stack").default,R.Shape=D("./util/shape").default,R.Kernel=D("./kernel/kernel"),R.Static={grey:D("./image/transform/greyAlgorithms").names,mask:D("./image/transform/mask/maskAlgorithms").names},"browser"===T.env&&(R.Worker=D("./worker/worker").default)},{"./image/Image":145,"./image/environment":159,"./image/transform/greyAlgorithms":203,"./image/transform/mask/maskAlgorithms":211,"./kernel/kernel":243,"./stack/Stack":245,"./util/shape":262,"./worker/worker":266,"array-includes":2}],243:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var T=D("../util/kernels");Object.keys(T).forEach(function(L){"default"===L||"__esModule"===L||Object.defineProperty(R,L,{enumerable:!0,get:function(){return T[L]}})});var E=D("./laplacianOfGaussian");Object.defineProperty(R,"laplacianOfGaussian",{enumerable:!0,get:function(){return E.laplacianOfGaussian}})},{"../util/kernels":260,"./laplacianOfGaussian":244}],244:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.laplacianOfGaussian=function(E,L,G){var Z=Array(L),W=void 0,Q=void 0,$=void 0,J=void 0;G||(G=100),G*=-1;var ee=(L-1)/2,te=2*E*E;for(W=0;W<L;W++)for(Z[W]=Array(L),J=(W-ee)*(W-ee),Q=0;Q<L;Q++)$=(Q-ee)*(Q-ee),Z[W][Q]=Math.round(G*(1-($+J)/te)*Math.exp(-($+J)/te));return Z}},{}],245:[function(D,I,R){"use strict";function T(te){return te&&te.__esModule?te:{default:te}}function E(te){if(Array.isArray(te)){for(var ae=0,ie=Array(te.length);ae<te.length;ae++)ie[ae]=te[ae];return ie}return Array.from(te)}Object.defineProperty(R,"__esModule",{value:!0});var L=D("./extend"),G=T(L),Z=D("../image/Image"),W=T(Z),Q=D("has-own"),$=T(Q),J={configurable:!0,enumerable:!1,get:void 0};class ee extends Array{constructor(te){if(Array.isArray(te)){super(te.length);for(var ae=0;ae<te.length;ae++)this[ae]=te[ae]}else"number"==typeof te?super(te):super();this.computed=null}static load(te){return Promise.all(te.map(W.default.load)).then(ae=>new ee(ae))}static extendMethod(te,ae){var ie=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},ne=ie.inPlace,le=void 0!==ne&&ne,oe=ie.returnThis,se=void 0===oe||oe,de=ie.partialArgs,ue=void 0===de?[]:de;return ee.prototype[te]=le?function(){this.computed=null;for(var he=arguments.length,me=Array(he),ce=0;ce<he;ce++)me[ce]=arguments[ce];var pe=ae.apply(this,[].concat(E(ue),me));return se?this:pe}:function(){for(var he=arguments.length,me=Array(he),ce=0;ce<he;ce++)me[ce]=arguments[ce];return ae.apply(this,[].concat(E(ue),me))},ee}static extendProperty(te,ae){var ie=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},ne=ie.partialArgs,le=void 0===ne?[]:ne;return J.get=function(){if(null===this.computed)this.computed={};else if((0,$.default)(te,this.computed))return this.computed[te];var oe=ae.apply(this,le);return this.computed[te]=oe,oe},Object.defineProperty(ee.prototype,te,J),ee}checkProcessable(te){var ae=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if("string"!=typeof te)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError("The process: "+te+" can not be applied on an empty stack");this[0].checkProcessable(te,ae);for(var ie=1;ie<this.length;ie++){if((ae.sameSize===void 0||ae.sameSize)&&this[0].width!==this[ie].width)throw new TypeError("The process: "+te+" can not be applied if width is not identical in all images");if((void 0===ae.sameSize||ae.sameSize)&&this[0].height!==this[ie].height)throw new TypeError("The process: "+te+" can not be applied if height is not identical in all images");if((void 0===ae.sameAlpha||ae.sameAlpha)&&this[0].alpha!==this[ie].alpha)throw new TypeError("The process: "+te+" can not be applied if alpha is not identical in all images");if((void 0===ae.sameBitDepth||ae.sameBitDepth)&&this[0].bitDepth!==this[ie].bitDepth)throw new TypeError("The process: "+te+" can not be applied if bitDepth is not identical in all images");if((void 0===ae.sameColorModel||ae.sameColorModel)&&this[0].colorModel!==this[ie].colorModel)throw new TypeError("The process: "+te+" can not be applied if colorModel is not identical in all images");if((void 0===ae.sameNumberChannels||ae.sameNumberChannels)&&this[0].channels!==this[ie].channels)throw new TypeError("The process: "+te+" can not be applied if channels is not identical in all images")}}}R.default=ee,Array[Symbol.species]||(ee.prototype.map=function(te,ae){if("function"!=typeof te)throw new TypeError(te+" is not a function");var ie=new ee(this.length);for(var ne=0;ne<this.length;ne++)ie[ne]=te.call(ae,this[ne],ne,this);return ie}),(0,G.default)(ee)},{"../image/Image":145,"./extend":251,"has-own":44}],246:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){this.checkProcessable("min",{bitDepth:[8,16]});var T=this[0].getHistogram(E);for(var L=1;L<this.length;L++){var G=this[L].getHistogram(E);for(var Z=0;Z<T.length;Z++)T[Z]+=G[Z]}return T}},{}],247:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(E){this.checkProcessable("min",{bitDepth:[8,16]});var T=this[0].getHistograms(E),L=T[0].length;for(var G=1;G<this.length;G++){var Z=this[G].getHistograms(E);for(var W=0;W<T.length;W++)for(var Q=0;Q<L;Q++)T[W][Q]+=Z[W][Q]}return T}},{}],248:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var T=this[0].max;for(var E=1;E<this.length;E++)for(var L=0;L<T.length;L++)T[L]=Math.max(T[L],this[E].max[L]);return T}},{}],249:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("median",{bitDepth:[8,16]});var L=this.getHistograms({maxSlots:this[0].maxValue+1}),G=Array(L.length);for(var Z=0;Z<L.length;Z++){var W=L[Z];G[Z]=(0,T.median)(W)}return G};var T=D("../../util/histogram")},{"../../util/histogram":258}],250:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("min",{bitDepth:[8,16]});var T=this[0].min;for(var E=1;E<this.length;E++)for(var L=0;L<T.length;L++)T[L]=Math.min(T[L],this[E].min[L]);return T}},{}],251:[function(D,I,R){"use strict";function T(oe){return oe&&oe.__esModule?oe:{default:oe}}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(se){se.extendMethod("matchAndCrop",L.default),se.extendMethod("getMin",Z.default),se.extendMethod("getMax",Q.default),se.extendMethod("getMedian",J.default),se.extendMethod("getHistogram",te.default),se.extendMethod("getHistograms",ie.default),se.extendMethod("getAverage",le.default)};var E=D("./transform/matchAndCrop"),L=T(E),G=D("./compute/min"),Z=T(G),W=D("./compute/max"),Q=T(W),$=D("./compute/median"),J=T($),ee=D("./compute/histogram"),te=T(ee),ae=D("./compute/histograms"),ie=T(ae),ne=D("./utility/average"),le=T(ne)},{"./compute/histogram":246,"./compute/histograms":247,"./compute/max":248,"./compute/median":249,"./compute/min":250,"./transform/matchAndCrop":252,"./utility/average":253}],252:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){var G=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},Z=G.algorithm,W=Z===void 0?"matchToPrevious":Z,Q=G.ignoreBorder,$=Q===void 0?[0,0]:Q;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});var J=!("matchToPrevious"!==W),ee=this[0],te=[];te[0]={position:[0,0],image:this[0]};var ae=[0,0];for(var ie=1;ie<this.length;ie++){var ne=ee.getBestMatch(this[ie],{border:$});te[ie]={position:[ne[0]+ae[0],ne[1]+ae[1]],image:this[ie]},J&&(ae[0]+=ne[0],ae[1]+=ne[1],ee=this[ie])}var le=0,oe=0,se=0,de=0;for(var ue=0;ue<te.length;ue++){var he=te[ue];he.position[0]>le&&(le=he.position[0]),he.position[0]<oe&&(oe=he.position[0]),he.position[1]>se&&(se=he.position[1]),he.position[1]<de&&(de=he.position[1])}oe*=-1,de*=-1;for(var me=0;me<te.length;me++){var ce=te[me];ce.crop=ce.image.crop({x:le-ce.position[0],y:se-ce.position[1],width:ee.width-oe-le,height:ee.height-de-se})}var pe=[];for(var ge=0;ge<te.length;ge++)pe[ge]=te[ge].crop;return new E.default(pe)};var T=D("../Stack"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../Stack":245}],253:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(){this.checkProcessable("average",{bitDepth:[8,16]});var G=new Uint32Array(this[0].data.length);for(var Z=0;Z<this.length;Z++){var W=this[Z];for(var Q=0;Q<this[0].data.length;Q++)G[Q]+=W.data[Q]}var $=E.default.createFrom(this[0]),J=$.data;for(var ee=0;ee<this[0].data.length;ee++)J[ee]=G[ee]/this.length;return $};var T=D("../../image/Image"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"../../image/Image":145}],254:[function(D,I,R){"use strict";function T(W,Q){var $=Q?W.channels:W.components,J=Array($);for(var ee=0;ee<$;ee++)J[ee]=ee;return J}function E(W,Q,$){Array.isArray(Q)||(Q=[Q]);for(var J=0;J<Q.length;J++)Q[J]=L(W,Q[J],$);return Q}function L(W,Q){var $=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0;if(Q===void 0)throw new RangeError("validateChannel : the channel has to be >=0 and <"+W.channels);if("string"==typeof Q){switch(W.colorModel){case Z.GREY:break;case Z.RGB:"rgb".includes(Q)&&("r"===Q?Q=0:"g"===Q?Q=1:"b"===Q?Q=2:void 0);break;case Z.HSL:"hsl".includes(Q)&&("h"===Q?Q=0:"s"===Q?Q=1:"l"===Q?Q=2:void 0);break;case Z.HSV:"hsv".includes(Q)&&("h"===Q?Q=0:"s"===Q?Q=1:"v"===Q?Q=2:void 0);break;case Z.CMYK:"cmyk".includes(Q)&&("c"===Q?Q=0:"m"===Q?Q=1:"y"===Q?Q=2:"k"===Q?Q=3:void 0);break;default:throw new Error(`Unexpected color model: ${W.colorModel}`);}if("a"===Q){if(!W.alpha)throw new Error("validateChannel : the image does not contain alpha channel");Q=W.components}if("string"==typeof Q)throw new Error("validateChannel : undefined channel: "+Q)}if(Q>=W.channels)throw new RangeError("validateChannel : the channel has to be >=0 and <"+W.channels);if(!$&&Q>=W.components)throw new RangeError("validateChannel : alpha channel may not be selected");return Q}Object.defineProperty(R,"__esModule",{value:!0}),R.validateArrayOfChannels=function(Q){var $=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},J=$.channels,ee=$.allowAlpha,te=$.defaultAlpha;return"boolean"!=typeof ee&&(ee=!0),"undefined"==typeof J?T(Q,te):E(Q,J,ee)},R.validateChannel=L;var G=D("../image/model/model"),Z=function(Q){if(Q&&Q.__esModule)return Q;var $={};if(null!=Q)for(var J in Q)Object.prototype.hasOwnProperty.call(Q,J)&&($[J]=Q[J]);return $.default=Q,$}(G)},{"../image/model/model":185}],255:[function(D,I,R){"use strict";function T(G,Z,W){return 0>W&&(W+=1),1<W&&(W-=1),W<1/6?G+6*(Z-G)*W:W<1/2?Z:W<2/3?G+6*((Z-G)*(2/3-W)):G}function E(G,Z,W){var Q=void 0,$=void 0,J=void 0,ee=void 0,te=void 0,ae=void 0;return Z/=100,W/=100,0===Z?ee=te=ae=255*W:($=0.5>=W?W*(Z+1):W+Z-W*Z,Q=2*W-$,J=G/360,ee=T(Q,$,J+1/3),te=T(Q,$,J),ae=T(Q,$,J-1/3)),{r:ee,g:te,b:ae}}Object.defineProperty(R,"__esModule",{value:!0}),R.css2array=function(Z){var W=(0,L.cssColor)(Z);return[W.r,W.g,W.b,Math.round(255*W.a/100)]},R.getDistinctColors=function(Z){var W=Array(Z),Q=0;for(var $=0;360>$;$+=360/Z){Q++;var J=E($,100,30+15*(Q%4));W[Q-1]=[Math.round(255*J.r),Math.round(255*J.g),Math.round(255*J.b)]}return W},R.getRandomColor=function(){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]};var L=D("color-functions")},{"color-functions":9}],256:[function(D,I,R){"use strict";function T(E){if("string"==typeof E){var L=E[E.length-1];E=parseFloat(E),"%"===L&&(E/=100)}return E}Object.defineProperty(R,"__esModule",{value:!0}),R.getFactor=T,R.getThreshold=function(L,G){if(!G)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof L){var Z=L[L.length-1];if("%"!==Z)throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(L)/100*G}if("number"==typeof L)return 1>L?L*G:L;throw Error("getThreshold : the value is not valid")},R.factorDimensions=function(L,G,Z){return L=T(L),{width:Math.round(L*G),height:Math.round(L*Z)}}},{}],257:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.dxs=[1,0,-1,0,1,1,-1,-1],R.dys=[0,1,0,-1,1,-1,1,-1]},{}],258:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.median=function(E){var L=E.reduce(($,J)=>$+J);if(0===L)throw new Error("unreachable");for(var G=0,Z=0,W=L/2,Q=void 0;!0;){if(0<E[G]){if(void 0!=Q)return(Q+G)/2;if(Z+=E[G],Z>W)return G;Z==W&&(Q=G)}G++}},R.mean=function(E){var L=0,G=0;for(var Z=0;Z<E.length;Z++)L+=E[Z],G+=E[Z]*Z;return 0===L?0:G/L}},{}],259:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.validateKernel=function(G){var Z=void 0,W=void 0;if(!Array.isArray(G))throw new Error("validateKernel: Invalid Kernel: "+G);else if(!Array.isArray(G[0])){var Q=Math.sqrt(G.length);if((0,E.default)(Q))W=Z=Math.floor(Math.sqrt(G.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");var $=Array(Q);for(var J=0;J<Q;J++){$[J]=Array(Q);for(var ee=0;ee<Q;ee++)$[J][ee]=G[J*Q+ee]}G=$}else if(0==(1&G.length)||0==(1&G[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");else Z=Math.floor(G.length/2),W=Math.floor(G[0].length/2);return{kernel:G,kWidth:W,kHeight:Z}};var T=D("is-integer"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"is-integer":53}],260:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.DISCRETE_LAPLACE_4=[[0,1,0],[1,-4,1],[0,1,0]],R.DISCRETE_LAPLACE_8=[[1,1,1],[1,-8,1],[1,1,1]],R.GRADIENT_X=[[-1,0,1],[-2,0,2],[-1,0,1]],R.GRADIENT_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],R.SECOND_DERIVATIVE=[[-1,-2,0,2,1],[-2,-4,0,4,2],[0,0,0,0,0],[1,2,0,-2,-1],[2,4,0,-4,-2]],R.SECOND_DERIVATIVE_INV=[[1,2,0,-2,-1],[2,4,0,-4,-2],[0,0,0,0,0],[-2,-4,0,4,2],[-1,-2,0,2,1]]},{}],261:[function(D,I,R){"use strict";function T(E,L,G){var Z=Array(E);for(var W=0;W<E;W++)Z[W]=Array(L);if(G)for(var Q=0;Q<E;Q++)for(var $=0;$<L;$++)Z[Q][$]=G;return Z.width=E,Z.height=L,Z.__proto__=T.prototype,Z}Object.defineProperty(R,"__esModule",{value:!0}),R.default=T,T.prototype.localMin=function(E,L){var G=this[E][L],Z=[E,L];for(var W=Math.max(0,E-1);W<Math.min(this.length,E+2);W++)for(var Q=Math.max(0,L-1);Q<Math.min(this[0].length,L+2);Q++)this[W][Q]<G&&(G=this[W][Q],Z=[W,Q]);return{position:Z,value:G}},T.prototype.localMax=function(E,L){var G=this[E][L],Z=[E,L];for(var W=Math.max(0,E-1);W<Math.min(this.length,E+2);W++)for(var Q=Math.max(0,L-1);Q<Math.min(this[0].length,L+2);Q++)this[W][Q]>G&&(G=this[W][Q],Z=[W,Q]);return{position:Z,value:G}},T.prototype.localSearch=function(E,L,G){var Z=[];for(var W=Math.max(0,E-1);W<Math.min(this.length,E+2);W++)for(var Q=Math.max(0,L-1);Q<Math.min(this[0].length,L+2);Q++)this[W][Q]===G&&Z.push([W,Q]);return Z}},{}],262:[function(D,I,R){"use strict";function T(ae){return ae&&ae.__esModule?ae:{default:ae}}function E(ae,ie,ne){var le=W.default.zeros(ie,ae);if(ne.filled)for(var oe=0;oe<ie;oe++)for(var se=0;se<ae;se++)le.set(oe,se,1);else{for(var de of[0,ie-1])for(var ue=0;ue<ae;ue++)le.set(de,ue,1);for(var he=0;he<ie;he++)for(var me of[0,ae-1])le.set(he,me,1)}return le}function L(ae,ie,ne){var le=W.default.zeros(ie,ae,ne),oe=1-ie%2,se=1-ae%2,de=Math.floor((ae-1)/2),ue=Math.floor((ie-1)/2),he=de*de,me=ue*ue;if(ne.filled)for(var ce=0;ce<=ue;ce++){var pe=Math.floor(Math.sqrt(he-he*ce*ce/me));for(var ge=de-pe;ge<=de;ge++)le.set(ue-ce,ge,1),le.set(ue+ce+oe,ge,1),le.set(ue-ce,ae-ge-1,1),le.set(ue+ce+oe,ae-ge-1,1)}else{for(var fe=0;fe<=ue;fe++){var _e=Math.floor(Math.sqrt(he-he*fe*fe/me)),be=de-_e;le.set(ue-fe,be,1),le.set(ue+fe+oe,be,1),le.set(ue-fe,ae-be-1,1),le.set(ue+fe+oe,ae-be-1,1)}for(var ye=0;ye<=de;ye++){var xe=Math.floor(Math.sqrt(me-me*ye*ye/he)),ke=ue-xe;le.set(ke,de-ye,1),le.set(ke,de+ye+se,1),le.set(ie-ke-1,de-ye,1),le.set(ie-ke-1,de+ye+se,1)}}return le}function G(ae,ie,ne){if(!ne.filled)throw new Error("Non filled triangle is not implemented");var le=W.default.zeros(ie,ae,ne);for(var oe=0;oe<ie;oe++){var se=Math.floor((1-oe/ie)*ae/2);for(var de=se;de<ae-se;de++)le.set(oe,de,1)}return le}Object.defineProperty(R,"__esModule",{value:!0});var Z=D("ml-matrix"),W=T(Z),Q=D("../image/Image"),$=T(Q),J=D("../image/kindNames"),ee=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],te=[[0,1,0],[1,1,1],[0,1,0]];R.default=class{constructor(){var ie=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ne=ie.kind,le=void 0===ne?"cross":ne,oe=ie.shape,se=ie.size,de=ie.width,ue=ie.height,he=ie.filled,me=void 0===he||he;if(se&&(de=se,ue=se),oe)switch(oe.toLowerCase()){case"square":case"rectangle":this.matrix=E(de,ue,{filled:me});break;case"circle":case"ellipse":this.matrix=L(de,ue,{filled:me});break;case"triangle":this.matrix=G(de,ue,{filled:me});break;default:throw new Error(`Shape: unexpected shape: ${oe}`);}else if(le)switch(le.toLowerCase()){case"cross":this.matrix=ee;break;case"smallcross":this.matrix=te;break;default:throw new Error(`Shape: unexpected kind: ${le}`);}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){var ie=this.matrix,ne=[];for(var le=0;le<ie.length;le++)for(var oe=0;oe<ie[0].length;oe++)ie[le][oe]&&ne.push([oe-this.halfWidth,le-this.halfHeight]);return ne}getMask(){var ie=new $.default(this.width,this.height,{kind:J.BINARY});for(var ne=0;ne<this.matrix.length;ne++)for(var le=0;le<this.matrix[0].length;le++)this.matrix[ne][le]&&ie.setBitXY(le,ne);return ie}}},{"../image/Image":145,"../image/kindNames":182,"ml-matrix":86}],263:[function(D,I,R){"use strict";function T(W){return W&&W.__esModule?W:{default:W}}Object.defineProperty(R,"__esModule",{value:!0}),R.checkNumberArray=function(Q){if(!isNaN(Q)){if(0>=Q)throw new Error("checkNumberArray: the value must be greater than 0");return Q}if(Q instanceof L.default)return Q.data;if(!(0,Z.default)(Q))throw new Error("checkNumberArray: the value should be either a number, array or Image");return Q};var E=D("../image/Image"),L=T(E),G=D("is-array-type"),Z=T(G)},{"../image/Image":145,"is-array-type":49}],264:[function(D,I,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=function(G){G.extendMethod("background",E.default)};var T=D("./process/background"),E=function(G){return G&&G.__esModule?G:{default:G}}(T)},{"./process/background":265}],265:[function(D,I,R){"use strict";function T($){return $&&$.__esModule?$:{default:$}}function E($,J,ee){return $.post("data",[J,ee]).then(function(te){for(var ae in te)te[ae]=new W.default(te[ae]);return te})}Object.defineProperty(R,"__esModule",{value:!0});var L=D("extend"),G=T(L),Z=D("../../image/Image"),W=T(Z),Q={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:0.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};R.default={run:function(J,ee,te){ee=(0,G.default)({},Q,ee);var ae=this.manager;return Array.isArray(J)?Promise.all(J.map(function(ie){var ne=E(ae,ie,ee);return"function"==typeof te&&ne.then(te),ne})):E(ae,J,ee)},work:function(){worker.on("data",function(J,ee,te){function ae(pe,ge){te.include.includes(pe)&&(ie[pe]=ge,ne.push(ge.data.buffer))}ee=new IJS(ee);var ie={},ne=[],le=ee.grey(),oe=le.sobelFilter();ae("sobel",oe);var se=oe.level().mask({threshold:te.threshold});ae("mask",se);var de=oe.getRoiManager();de.fromMask(se);var ue=de.getMask(te.roi);ae("realMask",ue);var he=le.getPixelsGrid({sampling:te.sampling,mask:ue}),me=ee.getBackground(he.xyS,he.zS,te.regression);ae("background",me);var ce=ee.subtract(me);ie.result=ce,ne.push(ce.data.buffer),J(ie,ne)})}}},{"../../image/Image":145,extend:35}],266:[function(D,I,R){"use strict";function T(Q){return Q&&Q.__esModule?Q:{default:Q}}Object.defineProperty(R,"__esModule",{value:!0});var E=D("web-worker-manager"),L=T(E),G=D("./extend"),Z=T(G);class W{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(Q){if("string"!=typeof Q)throw new TypeError("worker URL must be a string");this._url=Q,this._deps[0]=Q}static extendMethod(Q,$){function J(){var ie;ee||(this.checkUrl(),te=this.url,ee=new L.default($.work,{deps:te}),ae.manager=ee);for(var ne=arguments.length,le=Array(ne),oe=0;oe<ne;oe++)le[oe]=arguments[oe];return(ie=$.run).call.apply(ie,[ae].concat(le))}var ee=void 0,te=void 0,ae={};J.reset=function(){ee&&(ee.terminate(),ee=new L.default($.work,{deps:te}),ae.manager=ee)},W.prototype[Q]=J}}(0,Z.default)(W),R.default=new W},{"./extend":264,"web-worker-manager":143}]},{},[242])(242)});

//# sourceMappingURL=image.min.js.map