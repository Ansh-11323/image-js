<!DOCTYPE html>
<head>
  <script src="dist/image.js"></script>
</head>
<body>
  <h1>image-js demos</h1>
  <div>
    <button type="button" onclick="doIt();">Do it!</button>
  </div>
  <div>
    <img id="img" src="img/cyclopean_isles_sicily_italy.jpg" />
  </div>
  <div>
    <canvas id="canvas"></canvas>
  </div>
  <script>
    function doIt() {
      const img = document.getElementById('img');
      const tmpCanvas = document.createElement('canvas');
      tmpCanvas.width = img.width;
      tmpCanvas.height = img.height;
      const ctx = tmpCanvas.getContext('2d');
      ctx.drawImage(img, 0, 0);
      const image = IJS.readCanvas(tmpCanvas);

      const inverted = image.invert();
      for (let i = 3; i < inverted.data.length; i += 4) {
        inverted.data[i] = 255;
      }
      const canvas = document.getElementById('canvas')
      canvas.width = inverted.width;
      canvas.height = inverted.height;
      IJS.writeCanvas(canvas, inverted);
    }
  </script>
</body>
</html>